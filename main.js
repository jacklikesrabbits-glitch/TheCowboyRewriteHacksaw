(p=>{function o(){return nl.__string_rec(this,"")}var R,i={},fe={};function e(e,t){var n,i=Object.create(e);for(n in t)i[n]=t[n];return t.toString!==Object.prototype.toString&&(i.toString=t.toString),i}function ot(e,t){this.r=new RegExp(e,t.split("u").join(""))}function s(e,t){this.min=e,this.max=t}function be(){}function X(){}function el(){}function b(){this.b=""}function Ae(){}function U(){}function we(e){this.nodeType=e,this.children=[],this.attributeMap=new at}function S(e){(this.i=e).set_bigEndian(!1)}function k(){}function M(e){(this.i=e).set_bigEndian(!0),this.checkCRC=!0}function ze(){}function I(e){(this.i=e).set_bigEndian(!1)}function u(e,t){this._itemIndex=0,this._totalItems=0,this._commonFolder="common",this._defaultLocale="en",this._localizedFolder="localized",this._configFolder="config",this._fontFolder="font",this._gradientFolder="gradient",this._modelFolder="model",this._spineFolder="spine",this._atlasFolder="atlas",this._soundFolder="sound",this._imageFolder="image",this._loadingSet=new at;var n=this;null==t&&(t={}),this._platform=t.platform,this._locale=t.locale,this._formats=t.formats,this._imageFolder=null!=t.imageFolder?t.imageFolder:this._imageFolder,this._soundFolder=null!=t.soundFolder?t.soundFolder:this._soundFolder,this._fontFolder=null!=t.fontFolder?t.fontFolder:this._fontFolder,this._atlasFolder=null!=t.atlasFolder?t.atlasFolder:this._atlasFolder,this._spineFolder=null!=t.spineFolder?t.spineFolder:this._spineFolder,this._modelFolder=null!=t.modelFolder?t.modelFolder:this._modelFolder,this._gradientFolder=null!=t.gradientFolder?t.gradientFolder:this._gradientFolder,this._configFolder=null!=t.configFolder?t.configFolder:this._configFolder,this._defaultLocale=null!=t.defaultLocale?t.defaultLocale:this._defaultLocale,this._commonFolder=null!=t.commonFolder?t.commonFolder:this._commonFolder,this._localizedFolder=null!=t.localizedFolder?t.localizedFolder:this._localizedFolder,this._extensionHandlers=new Je,this._loadingQueue=[],this._loadedBytes=new at,(e=new LA(e)).onData=function(e){e=JSON.parse(e);n._content=e.children.find(function(e){return"default"==e.name}),"default"!=t.pack&&(n._brandingContent=e.children.find(function(e){return e.name==t.pack})),n._commonContent=il.find(n._content.children,function(e){return e.name==n._commonFolder}),n._platformContent=il.find(n._content.children,function(e){return e.name==t.platform}),null!=n._brandingContent&&(n._brandingCommon=il.find(n._brandingContent.children,function(e){return e.name==n._commonFolder}),n._brandingPlatform=il.find(n._brandingContent.children,function(e){return e.name==t.platform})),n.onReady()},e.onError=function(e){},e.request()}function d(){this._predicates=[],this._scheduled=[],this.inited=!1,this.next=null,this.owner=null}function a(){}function l(){}function r(e){this._lastTime=null,this.getDelta=null,e.push(new De),e.push(new Fe),e.sort(function(e,t){var n=0,e=(n|=1<<e.type._hx_index,0);return(e|=1<<t.type._hx_index)<n?1:n<e?-1:0}),this._systems=e,this.baseEntity=new ge("base")}function h(){}function c(){this.componentFlags=0}function _(){}function ee(){this.enableShaderDevices=new at,this.disableShaderDevices=new at,this.pixelRatio=1,this.customRenderCallback=null,this.frozen=!0,this.scale=1,this.stageDimensions={x:0,y:0},this.stageSize={x:0,y:0},d.call(this),this.componentType=Ie.Model,this.resizeSignal=new Pe,this.freezeSignal=new Pe}function m(){}function g(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.h=0,this.w=0,this.y=0,this.x=0,this.x=e,this.y=t,this.w=n,this.h=i}function f(e,t){this._next=null,this._signal=e,this._listener=t,this.stayInList=!0}function A(e){this._head=null!=e?new f(this,e):null,this._deferredTasks=null}function x(){}function y(){var e=this,t=Vr.CURRENT;null!=t?((this.engine=t).onReady=Cn(this,this.setup),SA.delay(Cn(this,this.setup),0)):u0.start(function(){t=new Vr,(e.engine=t).onReady=Cn(e,e.setup),t.init()})}function sl(e,t,n,i){if(this.loadedCache=[],this._fileSystem=new gt,this.sdScale=1,this._core=e,this._renderer=t,this._sound=n,this._engine=i,y.call(this),!this.engine.driver.hasFeature(Yr.ShaderModel3))throw new tl("WebGL 2.0 support required and not available on this browser. Enable WebGL support or try another browser.");this.appModel=new ee,this.initFrozenDetection(),this._assetConfig={}}function B(e){this._alpha=1,d.call(this),e=(e=new It(null!=e?e:new Hr),tt.init(e,null),e),this.object=e,this.componentType=Ie.Graphics3D}function v(){}function T(e){this._onFitCallback=null,this._enabled=!0,this._shouldFit=!1,this._forceFit=!1,this._time=0,this.duration=.25,d.call(this),this._config=e,this.componentType=Ie.Actor}function E(e,t,n,i){this.right=0,this.left=0,this.bottom=0,this.top=0,null!=e&&(this.top=e),null!=t&&(this.bottom=t),null!=n&&(this.left=n),null!=i&&(this.right=i)}function F(e,t,n,i,s){this.crop=!1,this.bounds=null,this.fitCurve=function(e){return e},this.duration=.25,this.margins=new E(null,null,null,null),null!=e&&(this.margins=e),null!=t&&(this.duration=t),null!=n&&(this.fitCurve=n),null!=i&&(this.bounds=i),null!=s&&(this.crop=s)}function te(e,t,n,i){this.right=0,this.left=0,this.bottom=0,this.top=0,null!=e&&(this.top=e),null!=t&&(this.bottom=t),null!=n&&(this.left=n),null!=i&&(this.right=i)}function D(e){d.call(this),this._sceneId=D.sceneCounter++,this.scene=e}function P(){this.chainId=null,d.call(this),this.componentType=Ie.Actor}function z(){}function Q(e,t,n,i,s){this.scale=1,this.tiles=[],this.tile=e,null!=t&&(this.tiles=t),this.contents=n,this.animation=i,null!=s&&(this.scale=s)}function V(){}function O(){this.priority=0,this.initialize()}function W(){this.flipY__=0,O.call(this)}function N(){W.call(this)}function G(){this.time__=0,this._tweenVector=new Et(0,0,0,0),O.call(this)}function H(){}function Y(e){this.data=e}function Z(){}function ne(e,t){this.realMaxWidth=-1,this.constraintWidth=-1,this.wordWrap=!0,this.lineBreak=!0,this.lineSpacing=0,this.letterSpacing=0,Mt.call(this,t),this.set_font(e),this.set_textAlign(Mr.Left),this.set_text(""),this.currentText="",this.set_textColor(16777215)}function ie(e,t){this.yMarg=10,this.xMarg=0,this._origSize=this._size=e.size,ne.call(this,e.clone(),t)}function se(){}function Xe(e,t,n){this.loop=!1,this.parallel=!1,(this.cancel=null)!=e&&(this.cancel=e),null!=t&&(this.parallel=t),null!=n&&(this.loop=n)}(i.EReg=ot).__name__="EReg",ot.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&0<=e&&e<this.r.m.length)return this.r.m[e];throw tl.thrown("EReg::matched")},matchedPos:function(){if(null==this.r.m)throw tl.thrown("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(e,t,n){var i;return null==n&&(n=-1),this.r.global?(this.r.lastIndex=t,this.r.m=this.r.exec(n<0?e:Jn.substr(e,0,t+n)),(i=null!=this.r.m)&&(this.r.s=e)):(i=this.match(n<0?Jn.substr(e,t,null):Jn.substr(e,t,n)))&&(this.r.s=e,this.r.m.index+=t),i},split:function(e){return e.replace(this.r,"#__delim__#").split("#__delim__#")},__class__:ot};var Jn=function(){},ae=((i.HxOverrides=Jn).__name__="HxOverrides",Jn.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:n=(t=e.split(" "))[0].split("-"),t=t[1].split(":");return new Date(n[0],n[1]-1,n[2],t[0],t[1],t[2]);default:throw tl.thrown("Invalid date format : "+e)}},Jn.cca=function(e,t){e=e.charCodeAt(t);if(e==e)return e},Jn.substr=function(e,t,n){if(null==n)n=e.length;else if(n<0){if(0!=t)return"";n=e.length+n}return e.substr(t,n)},Jn.remove=function(e,t){t=e.indexOf(t);return-1!=t&&(e.splice(t,1),!0)},Jn.now=function(){return Date.now()},(i.IntIterator=s).__name__="IntIterator",s.prototype={hasNext:function(){return this.min<this.max},next:function(){return this.min++},__class__:s},(i.Lambda=be).__name__="Lambda",be.array=function(e){for(var t=[],n=g1(e);n.hasNext();)t.push(n.next());return t},be.has=function(e,t){for(var n=g1(e);n.hasNext();)if(n.next()==t)return!0;return!1},be.exists=function(e,t){for(var n=g1(e);n.hasNext();)if(t(n.next()))return!0;return!1},be.filter=function(e,t){for(var n=[],i=g1(e);i.hasNext();){var s=i.next();t(s)&&n.push(s)}return n},be.fold=function(e,t,n){for(var i=g1(e);i.hasNext();)n=t(i.next(),n);return n},be.count=function(e,t){var n=0;if(null==t)for(var i=g1(e);i.hasNext();)i.next(),++n;else for(var s=g1(e);s.hasNext();)t(s.next())&&++n;return n},be.find=function(e,t){for(var n=g1(e);n.hasNext();){var i=n.next();if(t(i))return i}return null},be.findIndex=function(e,t){for(var n=0,i=g1(e);i.hasNext();){if(t(i.next()))return n;++n}return-1},Math.__name__="Math",(i.Reflect=X).__name__="Reflect",X.field=function(e,t){try{return e[t]}catch(e){return CA.lastError=e,null}},X.getProperty=function(e,t){var n;return null==e?null:!!e.__properties__&&(n=e.__properties__["get_"+t])?e[n]():e[t]},X.setProperty=function(e,t,n){var i,s=!!e.__properties__&&(i=e.__properties__["set_"+t]);s?e[i](n):e[t]=n},X.fields=function(e){var t=[];if(null!=e){var n,i=Object.prototype.hasOwnProperty;for(n in e)"__id__"!=n&&"hx__closures__"!=n&&i.call(e,n)&&t.push(n)}return t},X.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},X.compare=function(e,t){return e==t?0:t<e?1:-1},X.isObject=function(e){var t;return null!=e&&("string"==(t=typeof e)||"object"==t&&null==e.__enum__||"function"==t&&null!=(e.__name__||e.__ename__))},X.isEnumValue=function(e){return null!=e&&null!=e.__enum__},X.deleteField=function(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)},X.copy=function(e){if(null==e)return null;for(var t={},n=0,i=X.fields(e);n<i.length;){var s=i[n];++n,t[s]=X.field(e,s)}return t},X.makeVarArgs=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t(e)}},(i.Std=el).__name__="Std",el.string=function(e){return nl.__string_rec(e,"")},el.parseInt=function(e){e=parseInt(e);return isNaN(e)?null:e},el.random=function(e){return e<=0?0:Math.floor(Math.random()*e)},(i.StringBuf=b).__name__="StringBuf",b.prototype={__class__:b},(i.StringTools=Ae).__name__="StringTools",Ae.htmlEscape=function(e,t){for(var n="",i=0,s=e;i<s.length;){var a=i++,l=(e=s).charCodeAt(a),r=(l=55296<=l&&l<=56319?l-55232<<10|1023&e.charCodeAt(1+a):l,65536<=l&&++i,l);switch(r){case 34:n+=t?"&quot;":String.fromCodePoint(r);break;case 38:n+="&amp;";break;case 39:n+=t?"&#039;":String.fromCodePoint(r);break;case 60:n+="&lt;";break;case 62:n+="&gt;";break;default:n+=String.fromCodePoint(r)}}return n},Ae.startsWith=function(e,t){return e.length>=t.length&&0==e.lastIndexOf(t,0)},Ae.endsWith=function(e,t){var n=t.length,i=e.length;return n<=i&&e.indexOf(t,i-n)==i-n},Ae.isSpace=function(e,t){e=Jn.cca(e,t);return 8<e&&e<14||32==e},Ae.ltrim=function(e){for(var t=e.length,n=0;n<t&&Ae.isSpace(e,n);)++n;return 0<n?Jn.substr(e,n,t-n):e},Ae.rtrim=function(e){for(var t=e.length,n=0;n<t&&Ae.isSpace(e,t-n-1);)++n;return 0<n?Jn.substr(e,0,t-n):e},Ae.trim=function(e){return Ae.ltrim(Ae.rtrim(e))},Ae.replace=function(e,t,n){return e.split(t).join(n)},Ae.hex=function(e,t){for(var n="";n="0123456789ABCDEF".charAt(15&e)+n,0<(e>>>=4););if(null!=t)for(;n.length<t;)n="0"+n;return n},fe.ValueType={__ename__:!0,__constructs__:null,TNull:{_hx_name:"TNull",_hx_index:0,__enum__:"ValueType",toString:o},TInt:{_hx_name:"TInt",_hx_index:1,__enum__:"ValueType",toString:o},TFloat:{_hx_name:"TFloat",_hx_index:2,__enum__:"ValueType",toString:o},TBool:{_hx_name:"TBool",_hx_index:3,__enum__:"ValueType",toString:o},TObject:{_hx_name:"TObject",_hx_index:4,__enum__:"ValueType",toString:o},TFunction:{_hx_name:"TFunction",_hx_index:5,__enum__:"ValueType",toString:o},TClass:((R=function(e){return{_hx_index:6,c:e,__enum__:"ValueType",toString:o}})._hx_name="TClass",R.__params__=["c"],R),TEnum:((R=function(e){return{_hx_index:7,e:e,__enum__:"ValueType",toString:o}})._hx_name="TEnum",R.__params__=["e"],R),TUnknown:{_hx_name:"TUnknown",_hx_index:8,__enum__:"ValueType",toString:o}}),ye=(ae.__constructs__=[ae.TNull,ae.TInt,ae.TFloat,ae.TBool,ae.TObject,ae.TFunction,ae.TClass,ae.TEnum,ae.TUnknown],ae.__empty_constructs__=[ae.TNull,ae.TInt,ae.TFloat,ae.TBool,ae.TObject,ae.TFunction,ae.TUnknown],(i.Type=U).__name__="Type",U.createInstance=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(t)))},U.createEnum=function(e,t,n){var i=X.field(e,t);if(null==i)throw tl.thrown("No such constructor "+t);if(X.isFunction(i)){if(null==n)throw tl.thrown("Constructor "+t+" need parameters");return i.apply(e,n)}if(null!=n&&0!=n.length)throw tl.thrown("Constructor "+t+" does not need parameters");return i},U.createEnumIndex=function(e,t,n){var i=e.__constructs__[t];if(null==(i=null==i?null:i._hx_name))throw tl.thrown(t+" is not a valid enum constructor index");return U.createEnum(e,i,n)},U.getClassFields=function(e){e=X.fields(e);return Jn.remove(e,"__name__"),Jn.remove(e,"__interfaces__"),Jn.remove(e,"__properties__"),Jn.remove(e,"__super__"),Jn.remove(e,"__meta__"),Jn.remove(e,"prototype"),e},U.typeof=function(e){switch(typeof e){case"boolean":return ae.TBool;case"function":return e.__name__||e.__ename__?ae.TObject:ae.TFunction;case"number":return Math.ceil(e)==e%2147483648?ae.TInt:ae.TFloat;case"object":var t;return null==e?ae.TNull:null!=(t=e.__enum__)?ae.TEnum(fe[t]):null!=(t=nl.getClass(e))?ae.TClass(t):ae.TObject;case"string":return ae.TClass(String);case"undefined":return ae.TNull;default:return ae.TUnknown}},U.enumEq=function(e,t){if(e!=t)try{var n=e.__enum__;if(null==n||n!=t.__enum__)return!1;if(e._hx_index!=t._hx_index)return!1;for(var i=fe[n].__constructs__[e._hx_index].__params__,s=0;s<i.length;){var a=i[s];if(++s,!U.enumEq(e[a],t[a]))return!1}}catch(s){return CA.lastError=s,!1}return!0},U.enumParameters=function(e){var t=fe[e.__enum__].__constructs__[e._hx_index].__params__;if(null==t)return[];for(var n=[],i=0;i<t.length;){var s=t[i];++i,n.push(e[s])}return n},{}),le=(ye.toString=function(e){switch(e){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}},(i.Xml=we).__name__="Xml",we.parse=function(e){return px.parse(e)},we.createElement=function(e){var t=new we(we.Element);if(t.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":ye.toString(t.nodeType)));return t.nodeName=e,t},we.createPCData=function(e){var t=new we(we.PCData);if(t.nodeType==we.Document||t.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":ye.toString(t.nodeType)));return t.nodeValue=e,t},we.createCData=function(e){var t=new we(we.CData);if(t.nodeType==we.Document||t.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":ye.toString(t.nodeType)));return t.nodeValue=e,t},we.createComment=function(e){var t=new we(we.Comment);if(t.nodeType==we.Document||t.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":ye.toString(t.nodeType)));return t.nodeValue=e,t},we.createDocType=function(e){var t=new we(we.DocType);if(t.nodeType==we.Document||t.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":ye.toString(t.nodeType)));return t.nodeValue=e,t},we.createProcessingInstruction=function(e){var t=new we(we.ProcessingInstruction);if(t.nodeType==we.Document||t.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":ye.toString(t.nodeType)));return t.nodeValue=e,t},we.createDocument=function(){return new we(we.Document)},we.prototype={get:function(e){if(this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));return this.attributeMap.h[e]},set:function(e,t){if(this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));this.attributeMap.h[e]=t},exists:function(e){if(this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,e)},attributes:function(){if(this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));return new WA(this.attributeMap.h)},elements:function(){if(this.nodeType!=we.Document&&this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));for(var e=[],t=0,n=this.children;t<n.length;){var i=n[t];++t,i.nodeType==we.Element&&e.push(i)}return new JA(e)},elementsNamed:function(e){if(this.nodeType!=we.Document&&this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));for(var t=[],n=0,i=this.children;n<i.length;){var s,a=i[n];if(++n,a.nodeType==we.Element){if(a.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==a.nodeType?"null":ye.toString(a.nodeType)));s=a.nodeName==e}else s=!1;s&&t.push(a)}return new JA(t)},firstElement:function(){if(this.nodeType!=we.Document&&this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));for(var e=0,t=this.children;e<t.length;){var n=t[e];if(++e,n.nodeType==we.Element)return n}return null},addChild:function(e){if(this.nodeType!=we.Document&&this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));null!=e.parent&&e.parent.removeChild(e),this.children.push(e),e.parent=this},removeChild:function(e){if(this.nodeType!=we.Document&&this.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":ye.toString(this.nodeType)));return!!Jn.remove(this.children,e)&&!(e.parent=null)},toString:function(){return mx.print(this)},__class__:we},fe["format.gif.Block"]={__ename__:!0,__constructs__:null,BFrame:((R=function(e){return{_hx_index:0,frame:e,__enum__:"format.gif.Block",toString:o}})._hx_name="BFrame",R.__params__=["frame"],R),BExtension:((R=function(e){return{_hx_index:1,extension:e,__enum__:"format.gif.Block",toString:o}})._hx_name="BExtension",R.__params__=["extension"],R),BEOF:{_hx_name:"BEOF",_hx_index:2,__enum__:"format.gif.Block",toString:o}}),re=(le.__constructs__=[le.BFrame,le.BExtension,le.BEOF],le.__empty_constructs__=[le.BEOF],fe["format.gif.Extension"]={__ename__:!0,__constructs__:null,EGraphicControl:((R=function(e){return{_hx_index:0,gce:e,__enum__:"format.gif.Extension",toString:o}})._hx_name="EGraphicControl",R.__params__=["gce"],R),EComment:((R=function(e){return{_hx_index:1,text:e,__enum__:"format.gif.Extension",toString:o}})._hx_name="EComment",R.__params__=["text"],R),EText:((R=function(e){return{_hx_index:2,pte:e,__enum__:"format.gif.Extension",toString:o}})._hx_name="EText",R.__params__=["pte"],R),EApplicationExtension:((R=function(e){return{_hx_index:3,ext:e,__enum__:"format.gif.Extension",toString:o}})._hx_name="EApplicationExtension",R.__params__=["ext"],R),EUnknown:((R=function(e,t){return{_hx_index:4,id:e,data:t,__enum__:"format.gif.Extension",toString:o}})._hx_name="EUnknown",R.__params__=["id","data"],R)}),oe=(re.__constructs__=[re.EGraphicControl,re.EComment,re.EText,re.EApplicationExtension,re.EUnknown],re.__empty_constructs__=[],fe["format.gif.ApplicationExtension"]={__ename__:!0,__constructs__:null,AENetscapeLooping:((R=function(e){return{_hx_index:0,loops:e,__enum__:"format.gif.ApplicationExtension",toString:o}})._hx_name="AENetscapeLooping",R.__params__=["loops"],R),AEUnknown:((R=function(e,t,n){return{_hx_index:1,name:e,version:t,data:n,__enum__:"format.gif.ApplicationExtension",toString:o}})._hx_name="AEUnknown",R.__params__=["name","version","data"],R)}),ue=(oe.__constructs__=[oe.AENetscapeLooping,oe.AEUnknown],oe.__empty_constructs__=[],fe["format.gif.Version"]={__ename__:!0,__constructs__:null,GIF87a:{_hx_name:"GIF87a",_hx_index:0,__enum__:"format.gif.Version",toString:o},GIF89a:{_hx_name:"GIF89a",_hx_index:1,__enum__:"format.gif.Version",toString:o},Unknown:((R=function(e){return{_hx_index:2,version:e,__enum__:"format.gif.Version",toString:o}})._hx_name="Unknown",R.__params__=["version"],R)}),he=(ue.__constructs__=[ue.GIF87a,ue.GIF89a,ue.Unknown],ue.__empty_constructs__=[ue.GIF87a,ue.GIF89a],fe["format.gif.DisposalMethod"]={__ename__:!0,__constructs__:null,UNSPECIFIED:{_hx_name:"UNSPECIFIED",_hx_index:0,__enum__:"format.gif.DisposalMethod",toString:o},NO_ACTION:{_hx_name:"NO_ACTION",_hx_index:1,__enum__:"format.gif.DisposalMethod",toString:o},FILL_BACKGROUND:{_hx_name:"FILL_BACKGROUND",_hx_index:2,__enum__:"format.gif.DisposalMethod",toString:o},RENDER_PREVIOUS:{_hx_name:"RENDER_PREVIOUS",_hx_index:3,__enum__:"format.gif.DisposalMethod",toString:o},UNDEFINED:((R=function(e){return{_hx_index:4,index:e,__enum__:"format.gif.DisposalMethod",toString:o}})._hx_name="UNDEFINED",R.__params__=["index"],R)}),ce=(he.__constructs__=[he.UNSPECIFIED,he.NO_ACTION,he.FILL_BACKGROUND,he.RENDER_PREVIOUS,he.UNDEFINED],he.__empty_constructs__=[he.UNSPECIFIED,he.NO_ACTION,he.FILL_BACKGROUND,he.RENDER_PREVIOUS],(i["format.gif.Reader"]=S).__name__="format.gif.Reader",S.prototype={read:function(){if(71!=this.i.readByte())throw tl.thrown("Invalid header");if(73!=this.i.readByte())throw tl.thrown("Invalid header");if(70!=this.i.readByte())throw tl.thrown("Invalid header");var e=this.i.readString(3),t=ue.GIF89a;switch(e){case"87a":t=ue.GIF87a;break;case"89a":t=ue.GIF89a;break;default:t=ue.Unknown(e)}for(var n=this.i.readUInt16(),i=this.i.readUInt16(),s=this.i.readByte(),a=this.i.readByte(),l=this.i.readByte(),n={width:n,height:i,hasGlobalColorTable:128==(128&s),colorResolution:(112&s)>>>4,sorted:8==(8&s),globalColorTableSize:2<<(7&s),backgroundColorIndex:a,pixelAspectRatio:l=0!=l?(l+15)/64:1},i=null,r=(n.hasGlobalColorTable&&(i=this.readColorTable(n.globalColorTableSize)),new zA);;){var o=this.readBlock();if(r.add(o),o==le.BEOF)break}return{version:t,logicalScreenDescriptor:n,globalColorTable:i,blocks:r}},readBlock:function(){switch(this.i.readByte()){case 33:return this.readExtension();case 44:return this.readImage();case 59:return le.BEOF}return le.BEOF},readImage:function(){var e=this.i.readUInt16(),t=this.i.readUInt16(),n=this.i.readUInt16(),i=this.i.readUInt16(),s=this.i.readByte(),a=128==(128&s),l=64==(64&s),r=2<<(7&s),o=null;return a&&(o=this.readColorTable(r)),le.BFrame({x:e,y:t,width:n,height:i,localColorTable:a,interlaced:l,sorted:32==(32&s),localColorTableSize:r,pixels:this.readPixels(n,i,l),colorTable:o})},readPixels:function(e,t,n){for(var i=this.i,s=e*t,a=new IA(new ArrayBuffer(s)),l=i.readByte(),r=i.readByte()-1,o=i.readByte(),u=8,h=1<<l,c=1+h,_=l+1,d=1<<_,p=d-1,m=[],g=0;g<h;)m[y=g++]=[y];for(var f,A,x=[],w=2+h,y=0,b=0;y<s;){for(f=b;u<_&&0!=r;)o|=i.readByte()<<u,u+=8,0==--r&&(r=i.readByte());if(b=o&p,o>>=_,u-=_,b==h)x=m.slice(),w=2+h,p=(d=1<<(_=l+1))-1;else{if(b==c)break;if(b<w)f!=h&&((v=x[f].slice()).push(x[b][0]),x[w++]=v);else{if(b!=w)throw tl.thrown("Invalid LZW code. Excepted: "+w+", got: "+b);(v=x[f].slice()).push(v[0]),x[w++]=v}for(var v=x[b],g=0;g<v.length;)a.b[y++]=v[g++];w==d&&_<12&&(p=(d=1<<++_)-1)}}for(;0<r;)i.readByte(),0==--r&&(r=i.readByte());for(;y<s;)a.b[y++]=0;return n&&(n=new IA(new ArrayBuffer(s)),A=this.deinterlace(a,n,8,0,0,e,t),A=this.deinterlace(a,n,8,4,A,e,t),A=this.deinterlace(a,n,4,2,A,e,t),this.deinterlace(a,n,2,1,A,e,t),a=n),a},deinterlace:function(e,t,n,i,s,a,l){for(;i<l;)t.blit(i*a,e,s,a),s+=a,i+=n;return s},readExtension:function(){var e=this.i.readByte();switch(e){case 1:if(12!=this.i.readByte())throw tl.thrown("Incorrect size of Plain Text Extension introducer block.");for(var t=this.i.readUInt16(),n=this.i.readUInt16(),i=this.i.readUInt16(),s=this.i.readUInt16(),a=this.i.readByte(),l=this.i.readByte(),r=this.i.readByte(),o=this.i.readByte(),u=new YA,h=new IA(new ArrayBuffer(255)),c=this.i.readByte();0!=c;)this.i.readBytes(h,0,c),u.writeBytes(h,0,c),c=this.i.readByte();return u.flush(),h=u.getBytes(),u.close(),le.BExtension(re.EText({textGridX:t,textGridY:n,textGridWidth:i,textGridHeight:s,charCellWidth:a,charCellHeight:l,textForegroundColorIndex:r,textBackgroundColorIndex:o,text:h.toString()}));case 249:if(4!=this.i.readByte())throw tl.thrown("Incorrect Graphic Control Extension block size!");var _,d=this.i.readByte();switch((28&d)>>2){case 0:_=he.UNSPECIFIED;break;case 1:_=he.NO_ACTION;break;case 2:_=he.FILL_BACKGROUND;break;case 3:_=he.RENDER_PREVIOUS;break;default:_=he.UNDEFINED((28&d)>>2)}t=le.BExtension(re.EGraphicControl({disposalMethod:_,userInput:2==(2&d),hasTransparentColor:1==(1&d),delay:this.i.readUInt16(),transparentIndex:this.i.readByte()}));return this.i.readByte(),t;case 254:for(u=new YA,h=new IA(new ArrayBuffer(255)),c=this.i.readByte();0!=c;)this.i.readBytes(h,0,c),u.writeBytes(h,0,c),c=this.i.readByte();return u.flush(),h=u.getBytes(),u.close(),le.BExtension(re.EComment(h.toString()));case 255:return this.readApplicationExtension();default:for(u=new YA,h=new IA(new ArrayBuffer(255)),c=this.i.readByte();0!=c;)this.i.readBytes(h,0,c),u.writeBytes(h,0,c),c=this.i.readByte();return u.flush(),h=u.getBytes(),u.close(),le.BExtension(re.EUnknown(e,h))}},readApplicationExtension:function(){if(11!=this.i.readByte())throw tl.thrown("Incorrect size of Application Extension introducer block.");for(var e=this.i.readString(8),t=this.i.readString(3),n=new YA,i=new IA(new ArrayBuffer(255)),s=this.i.readByte();0!=s;)this.i.readBytes(i,0,s),n.writeBytes(i,0,s),s=this.i.readByte();n.flush(),i=n.getBytes(),n.close();var a=i;return"NETSCAPE"==e&&"2.0"==t&&1==a.b[0]?le.BExtension(re.EApplicationExtension(oe.AENetscapeLooping(a.b[1]|a.b[2]<<8))):le.BExtension(re.EApplicationExtension(oe.AEUnknown(e,t,a)))},readColorTable:function(e){e*=3;for(var t=new IA(new ArrayBuffer(e)),n=0;n<e;){var i=this.i.readByte(),i=(t.b[n]=i,this.i.readByte()),i=(t.b[n+1]=i,this.i.readByte());t.b[n+2]=i,n+=3}return t},__class__:S},(i["format.gif.Tools"]=k).__name__="format.gif.Tools",k.extractFullBGRA=function(e,t){for(var n=null,i=0,s=new IA(new ArrayBuffer(e.logicalScreenDescriptor.width*e.logicalScreenDescriptor.height*4)),a=e.blocks.h;null!=a;){var l=a.item,a=a.next;switch(l._hx_index){case 0:var r=l.frame,o=r.localColorTable?r.colorTable:e.globalColorTable;if(null==o)throw tl.thrown("Frame does not have a color table!");var u=null!=n&&n.hasTransparentColor?3*n.transparentIndex:-1,h=r.pixels,c=0,_=4*(r.y*e.logicalScreenDescriptor.width+r.x),d=4*(e.logicalScreenDescriptor.width-r.width)+4;switch((i!=t&&null!=n?n.disposalMethod:he.NO_ACTION)._hx_index){case 2:for(var p=0,m=h.length;p<m;)++p,s.b[_]=0,s.b[_+1]=0,s.b[_+2]=0,s.b[_+3]=0,++c==r.width?(c=0,_+=d):_+=4;break;case 3:break;default:for(var g=0,f=h.length;g<f;){var A=3*h.b[g++];u!=A&&(s.b[_]=o.b[2+A],s.b[_+1]=o.b[1+A],s.b[_+2]=o.b[A],s.b[_+3]=255),++c==r.width?(c=0,_+=d):_+=4}}if(i==t)return s;++i,n=null;break;case 1:var x=l.extension;0==x._hx_index&&(n=x.gce)}}return s},k.extractFullRGBA=function(e,t){for(var n=null,i=0,s=new IA(new ArrayBuffer(e.logicalScreenDescriptor.width*e.logicalScreenDescriptor.height*4)),a=e.blocks.h;null!=a;){var l=a.item,a=a.next;switch(l._hx_index){case 0:var r=l.frame,o=r.localColorTable?r.colorTable:e.globalColorTable;if(null==o)throw tl.thrown("Frame does not have a color table!");var u=null!=n&&n.hasTransparentColor?3*n.transparentIndex:-1,h=r.pixels,c=0,_=4*(r.y*e.logicalScreenDescriptor.width+r.x),d=4*(e.logicalScreenDescriptor.width-r.width)+4;switch((i!=t&&null!=n?n.disposalMethod:he.NO_ACTION)._hx_index){case 2:for(var p=0,m=h.length;p<m;)++p,s.b[_]=0,s.b[_+1]=0,s.b[_+2]=0,s.b[_+3]=0,++c==r.width?(c=0,_+=d):_+=4;break;case 3:break;default:for(var g=0,f=h.length;g<f;){var A=3*h.b[g++];u!=A&&(s.b[_]=o.b[A],s.b[_+1]=o.b[1+A],s.b[_+2]=o.b[2+A],s.b[_+3]=255),++c==r.width?(c=0,_+=d):_+=4}}if(i==t)return s;++i,n=null;break;case 1:var x=l.extension;0==x._hx_index&&(n=x.gce)}}return s},fe["format.png.Color"]={__ename__:!0,__constructs__:null,ColGrey:((R=function(e){return{_hx_index:0,alpha:e,__enum__:"format.png.Color",toString:o}})._hx_name="ColGrey",R.__params__=["alpha"],R),ColTrue:((R=function(e){return{_hx_index:1,alpha:e,__enum__:"format.png.Color",toString:o}})._hx_name="ColTrue",R.__params__=["alpha"],R),ColIndexed:{_hx_name:"ColIndexed",_hx_index:2,__enum__:"format.png.Color",toString:o}}),_e=(ce.__constructs__=[ce.ColGrey,ce.ColTrue,ce.ColIndexed],ce.__empty_constructs__=[ce.ColIndexed],fe["format.png.Chunk"]={__ename__:!0,__constructs__:null,CEnd:{_hx_name:"CEnd",_hx_index:0,__enum__:"format.png.Chunk",toString:o},CHeader:((R=function(e){return{_hx_index:1,h:e,__enum__:"format.png.Chunk",toString:o}})._hx_name="CHeader",R.__params__=["h"],R),CData:((R=function(e){return{_hx_index:2,b:e,__enum__:"format.png.Chunk",toString:o}})._hx_name="CData",R.__params__=["b"],R),CPalette:((R=function(e){return{_hx_index:3,b:e,__enum__:"format.png.Chunk",toString:o}})._hx_name="CPalette",R.__params__=["b"],R),CUnknown:((R=function(e,t){return{_hx_index:4,id:e,data:t,__enum__:"format.png.Chunk",toString:o}})._hx_name="CUnknown",R.__params__=["id","data"],R)}),de=(_e.__constructs__=[_e.CEnd,_e.CHeader,_e.CData,_e.CPalette,_e.CUnknown],_e.__empty_constructs__=[_e.CEnd],(i["format.png.Reader"]=M).__name__="format.png.Reader",M.prototype={read:function(){if(137!=this.i.readByte())throw tl.thrown("Invalid header");if(80!=this.i.readByte())throw tl.thrown("Invalid header");if(78!=this.i.readByte())throw tl.thrown("Invalid header");if(71!=this.i.readByte())throw tl.thrown("Invalid header");if(13!=this.i.readByte())throw tl.thrown("Invalid header");if(10!=this.i.readByte())throw tl.thrown("Invalid header");if(26!=this.i.readByte())throw tl.thrown("Invalid header");if(10!=this.i.readByte())throw tl.thrown("Invalid header");for(var e=new zA;;){var t=this.readChunk();if(e.add(t),t==_e.CEnd)break}return e},readHeader:function(e){e.set_bigEndian(!0);var t,n=e.readInt32(),i=e.readInt32(),s=e.readByte(),a=e.readByte();switch(a){case 0:t=ce.ColGrey(!1);break;case 2:t=ce.ColTrue(!1);break;case 3:t=ce.ColIndexed;break;case 4:t=ce.ColGrey(!0);break;case 6:t=ce.ColTrue(!0);break;default:throw tl.thrown("Unknown color model "+a+":"+s)}var l=e.readByte(),r=e.readByte();if(0!=l||0!=r)throw tl.thrown("Invalid header");l=e.readByte();if(0!=l&&1!=l)throw tl.thrown("Invalid header");return{width:n,height:i,colbits:s,color:t,interlaced:1==l}},readChunk:function(){var e=this.i.readInt32(),t=this.i.readString(4),n=this.i.read(e),e=this.i.readInt32();if(this.checkCRC){for(var i=-1,s=255&((i=16777215^((s=(s=(s=(s=(s=(s=(s=(s=255&(-1^Jn.cca(t,0)))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s)))^Jn.cca(t,1)),s=255&((i=i>>>8^((s=(s=(s=(s=(s=(s=(s=s>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s)))^Jn.cca(t,2)),s=255&((i=i>>>8^((s=(s=(s=(s=(s=(s=(s=s>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s)))^Jn.cca(t,3)),a=(i=i>>>8^((s=(s=(s=(s=(s=(s=(s=s>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s)),n.length),l=n.b.bufferValue,r=0;r<a;)i=i>>>8^((s=(s=(s=(s=(s=(s=(s=(s=255&(i^l.bytes[r++]))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s))>>>1^-306674912&-(1&s));if((-1^i)!=e)throw tl.thrown("CRC check failure")}switch(t){case"IDAT":return _e.CData(n);case"IEND":return _e.CEnd;case"IHDR":return _e.CHeader(this.readHeader(new HA(n)));case"PLTE":return _e.CPalette(n);default:return _e.CUnknown(t,n)}},__class__:M},(i["format.png.Tools"]=ze).__name__="format.png.Tools",ze.getHeader=function(e){for(var t=e.h;null!=t;){var n=t.item,t=t.next;if(1==n._hx_index)return n.h}throw tl.thrown("Header not found")},ze.getPalette=function(e){for(var t=e.h;null!=t;){var n=t.item,t=t.next;if(3==n._hx_index)return n.b}return null},ze.extract32=function(z,Q,V){for(var e=ze.getHeader(z),t=null==Q?new IA(new ArrayBuffer(e.width*e.height*4)):Q,n=null,O=null,i=z.h;null!=i;){var s=i.item;i=i.next,2==s._hx_index&&(A=s.b,null!=O?O.add(A):n=null==n?A:((O=new jA).add(n),O.add(A),null))}if(null==(n=null!=O?O.getBytes():n))throw tl.thrown("Data not found");var n=Qe.run(n),a=0,l=0,W=0,N=(V&&(W=8*-e.width,l=(e.height-1)*(4*e.width)),V?-1:1);switch((A=e.color)._hx_index){case 0:var r=A.alpha;if(8!=e.colbits)throw tl.thrown("Unsupported color mode");var o=e.width;if(n.length<e.height*((r?2:1)*o+1))throw tl.thrown("Not enough data");var G=-1;if(!r)for(i=z.h;null!=i;){s=i.item;if(i=i.next,4==s._hx_index){var u=s.data;if("tRNS"==s.id){2<=u.length&&(G=u.b[1]);break}}}for(var u=0,h=e.height;u<h;){var c=u++;switch(Me=n.b[a++]){case 0:if(r)for(var U=0;U<o;){++U;var L=n.b[a++];t.b[l++]=L,t.b[l++]=L,t.b[l++]=L,t.b[l++]=n.b[a++]}else for(var j=0;j<o;){++j;var H=n.b[a++];t.b[l++]=H,t.b[l++]=H,t.b[l++]=H,t.b[l++]=H==G?0:255}break;case 1:var Y=0,_=0;if(r)for(var Z=0;Z<o;)++Z,Y+=n.b[a++],t.b[l++]=Y,t.b[l++]=Y,t.b[l++]=Y,_+=n.b[a++],t.b[l++]=_;else for(var X=0;X<o;)++X,Y+=n.b[a++],t.b[l++]=Y,t.b[l++]=Y,t.b[l++]=Y,t.b[l++]=Y==G?0:255;break;case 2:var d=0==c?0:4*o*N;if(r)for(var q=0;q<o;){++q;var K=n.b[a++]+t.b[l-d],K=(t.b[l++]=K,t.b[l++]=K,t.b[l++]=K,n.b[a++]+t.b[l-d]);t.b[l++]=K}else for(var J=0;J<o;){++J;var $=n.b[a++]+t.b[l-d];t.b[l++]=$,t.b[l++]=$,t.b[l++]=$,t.b[l++]=$==G?0:255}break;case 3:var p=0,ee=0,m=0==c?0:4*o*N;if(r)for(var te=0;te<o;)++te,p=n.b[a++]+(p+t.b[l-m]>>1)&255,t.b[l++]=p,t.b[l++]=p,t.b[l++]=p,ee=n.b[a++]+(ee+t.b[l-m]>>1)&255,t.b[l++]=ee;else for(var ne=0;ne<o;)++ne,p=n.b[a++]+(p+t.b[l-m]>>1)&255,t.b[l++]=p,t.b[l++]=p,t.b[l++]=p,t.b[l++]=p==G?0:255;break;case 4:var g=4*o*N,f=0,ie=0;if(r)for(var se=0;se<o;){var ae=se++,le=((P=(Ee=f+(Be=0==c?0:t.b[l-g])-(E=0==ae||0==c?0:t.b[l-g-4]))-E)<0&&(P=-P),a++),f=((D=(D=Ee-f)<0?-D:D)<=(R=(R=Ee-Be)<0?-R:R)&&D<=P?f:R<=P?Be:E)+n.b[le]&255;t.b[l++]=f,t.b[l++]=f,t.b[l++]=f;(C=(pe=ie+(de=0==c?0:t.b[l-g])-(Ie=0==ae||0==c?0:t.b[l-g-4]))-Ie)<0&&(C=-C);le=a++,ie=((b=(b=pe-ie)<0?-b:b)<=(v=(v=pe-de)<0?-v:v)&&b<=C?ie:v<=C?de:Ie)+n.b[le]&255;t.b[l++]=ie}else for(var re=0;re<o;){var oe=re++,ue=((xe=(ge=f+(me=0==c?0:t.b[l-g])-(F=0==oe||0==c?0:t.b[l-g-4]))-F)<0&&(xe=-xe),a++);f=((fe=(fe=ge-f)<0?-fe:fe)<=(Ae=(Ae=ge-me)<0?-Ae:Ae)&&fe<=xe?f:Ae<=xe?me:F)+n.b[ue]&255,t.b[l++]=f,t.b[l++]=f,t.b[l++]=f,t.b[l++]=f==G?0:255}break;default:throw tl.thrown("Invalid filter "+Me)}l+=W}break;case 1:r=A.alpha;if(8!=e.colbits)throw tl.thrown("Unsupported color mode");o=e.width;if(n.length<e.height*((r?4:3)*o+1))throw tl.thrown("Not enough data");var he=-1,ce=-1,_e=-1;if(!r)for(i=z.h;null!=i;){s=i.item;if(i=i.next,4==s._hx_index){var A=s.data;if("tRNS"==s.id){6<=A.length&&(he=A.b[1],ce=A.b[3],_e=A.b[5]);break}}}for(var x=0,w=0,y=0,_=0,A=0,u=e.height;A<u;){c=A++;switch(Me=n.b[a++]){case 0:if(r)for(h=0;h<o;)++h,t.b[l++]=n.b[a+2],t.b[l++]=n.b[a+1],t.b[l++]=n.b[a],t.b[l++]=n.b[a+3],a+=4;else for(U=0;U<o;)++U,y=n.b[a+2],t.b[l++]=y,w=n.b[a+1],t.b[l++]=w,x=n.b[a],t.b[l++]=x,t.b[l++]=x==he&&w==ce&&y==_e?0:255,a+=3;break;case 1:if(x=w=y=_=0,r)for(j=0;j<o;)++j,y+=n.b[a+2],t.b[l++]=y,w+=n.b[a+1],t.b[l++]=w,x+=n.b[a],t.b[l++]=x,_+=n.b[a+3],t.b[l++]=_,a+=4;else for(Z=0;Z<o;)++Z,y+=n.b[a+2],t.b[l++]=y,w+=n.b[a+1],t.b[l++]=w,x+=n.b[a],t.b[l++]=x,t.b[l++]=x==he&&w==ce&&y==_e?0:255,a+=3;break;case 2:d=0==c?0:4*o*N;if(r)for(X=0;X<o;)++X,t.b[l]=n.b[a+2]+t.b[l-d],++l,t.b[l]=n.b[a+1]+t.b[l-d],++l,t.b[l]=n.b[a]+t.b[l-d],++l,t.b[l]=n.b[a+3]+t.b[l-d],++l,a+=4;else for(q=0;q<o;)++q,y=n.b[a+2]+t.b[l-d],t.b[l]=y,++l,w=n.b[a+1]+t.b[l-d],t.b[l]=w,++l,x=n.b[a]+t.b[l-d],t.b[l]=x,++l,t.b[l++]=x==he&&w==ce&&y==_e?0:255,a+=3;break;case 3:y=_=0,w=0,x=0,m=0==c?0:4*o*N;if(r)for(J=0;J<o;)++J,y=n.b[a+2]+(y+t.b[l-m]>>1)&255,t.b[l++]=y,w=n.b[a+1]+(w+t.b[l-m]>>1)&255,t.b[l++]=w,x=n.b[a]+(x+t.b[l-m]>>1)&255,t.b[l++]=x,_=n.b[a+3]+(_+t.b[l-m]>>1)&255,t.b[l++]=_,a+=4;else for(te=0;te<o;)++te,y=n.b[a+2]+(y+t.b[l-m]>>1)&255,t.b[l++]=y,w=n.b[a+1]+(w+t.b[l-m]>>1)&255,t.b[l++]=w,x=n.b[a]+(x+t.b[l-m]>>1)&255,t.b[l++]=x,t.b[l++]=x==he&&w==ce&&y==_e?0:255,a+=3;break;case 4:g=4*o*N;if(x=w=y=_=0,r)for(ne=0;ne<o;){var de,pe,b,v,C,ae=ne++;(P=(Ee=y+(Be=0==c?0:t.b[l-g])-(E=0==ae||0==c?0:t.b[l-g-4]))-E)<0&&(P=-P),y=((D=(D=Ee-y)<0?-D:D)<=(R=(R=Ee-Be)<0?-R:R)&&D<=P?y:R<=P?Be:E)+n.b[a+2]&255,t.b[l++]=y,(C=(pe=w+(de=0==c?0:t.b[l-g])-(Ie=0==ae||0==c?0:t.b[l-g-4]))-Ie)<0&&(C=-C),w=((b=(b=pe-w)<0?-b:b)<=(v=(v=pe-de)<0?-v:v)&&b<=C?w:v<=C?de:Ie)+n.b[a+1]&255,t.b[l++]=w;(xe=(ge=x+(me=0==c?0:t.b[l-g])-(F=0==ae||0==c?0:t.b[l-g-4]))-F)<0&&(xe=-xe),x=((fe=(fe=ge-x)<0?-fe:fe)<=(Ae=(Ae=ge-me)<0?-Ae:Ae)&&fe<=xe?x:Ae<=xe?me:F)+n.b[a]&255,t.b[l++]=x;var me,ge,fe,Ae,xe,we=0==c?0:t.b[l-g],ye=_+we-(Te=0==ae||0==c?0:t.b[l-g-4]),be=ye-_,ve=ye-we,ye=ye-Te;ye<0&&(ye=-ye),_=((be=be<0?-be:be)<=(ve=ve<0?-ve:ve)&&be<=ye?_:ve<=ye?we:Te)+n.b[a+3]&255,t.b[l++]=_,a+=4}else for(se=0;se<o;){var oe=se++,S=0==c?0:t.b[l-g],k=0==oe||0==c?0:t.b[l-g-4],M=y+S-k,I=M-y,B=M-S,M=M-k,I=(M<0&&(M=-M),y=((I=I<0?-I:I)<=(B=B<0?-B:B)&&I<=M?y:B<=M?S:k)+n.b[a+2]&255,t.b[l++]=y,0==c?0:t.b[l-g]),B=0==oe||0==c?0:t.b[l-g-4],M=w+I-B,S=M-w,k=M-I,M=M-B,S=(M<0&&(M=-M),w=((S=S<0?-S:S)<=(k=k<0?-k:k)&&S<=M?w:k<=M?I:B)+n.b[a+1]&255,t.b[l++]=w,0==c?0:t.b[l-g]),k=0==oe||0==c?0:t.b[l-g-4],M=x+S-k,I=M-x,B=M-S,M=M-k;M<0&&(M=-M),x=((I=I<0?-I:I)<=(B=B<0?-B:B)&&I<=M?x:B<=M?S:k)+n.b[a]&255,t.b[l++]=x,t.b[l++]=x==he&&w==ce&&y==_e?0:255,a+=3}break;default:throw tl.thrown("Invalid filter "+Me)}l+=W}break;case 2:var Ce=ze.getPalette(z);if(null==Ce)throw tl.thrown("PNG Palette is missing");for(var Se,T=null,i=z.h;null!=i;){s=i.item;if(i=i.next,4==s._hx_index&&"tRNS"==s.id){T=s.data;break}}null!=T&&T.length<1<<e.colbits&&((Se=new IA(new ArrayBuffer(1<<e.colbits))).blit(0,T,0,T.length),Se.fill(T.length,Se.length-T.length,255),T=Se);o=e.width,d=Math.ceil(o*e.colbits/8)+1;if(n.length<e.height*d)throw tl.thrown("Not enough data");for(var ke=d-1,A=0,r=e.height;A<r;){var Me,c=A++;if(0==(Me=n.b[a++]))a+=ke;else switch(Me){case 1:for(var E=0,u=0;u<o;)++u,E+=n.b[a],n.b[a++]=255&E;break;case 2:for(d=0==c?0:1+ke,h=0;h<o;)++h,n.b[a]+=n.b[a-d],++a;break;case 3:for(var Ie=0,m=0==c?0:1+ke,U=0;U<o;)++U,Ie=n.b[a]+(Ie+n.b[a-m]>>1)&255,n.b[a++]=Ie;break;case 4:for(var g=1+ke,F=0,j=0;j<o;){var Be,Te,Ee,D,R,P,ae=j++;(P=(Ee=F+(Be=0==c?0:n.b[a-g])-(Te=0==ae||0==c?0:n.b[a-g-1]))-Te)<0&&(P=-P),F=((D=(D=Ee-F)<0?-D:D)<=(R=(R=Ee-Be)<0?-R:R)&&D<=P?F:R<=P?Be:Te)+n.b[a]&255,n.b[a++]=F}break;default:throw tl.thrown("Invalid filter "+Me)}}a=0;if(8==e.colbits)for(A=0,r=e.height;A<r;){++A,++a;for(u=0,h=e.width;u<h;){++u;E=n.b[a++];t.b[l++]=Ce.b[3*E+2],t.b[l++]=Ce.b[3*E+1],t.b[l++]=Ce.b[3*E],t.b[l++]=null!=T?T.b[E]:255}l+=W}else{if(!(e.colbits<8))throw tl.thrown(e.colbits+" indexed bits per pixel not supported");for(var Fe=e.colbits,De=(1<<Fe)-1,A=0,r=e.height;A<r;){++A,++a;for(var Re=0,Pe=0,u=0,h=e.width;u<h;){++u,Pe<Fe&&(Re=Re<<8|n.b[a++],Pe+=8);E=Re>>>Pe-Fe&De;Pe-=Fe,t.b[l++]=Ce.b[3*E+2],t.b[l++]=Ce.b[3*E+1],t.b[l++]=Ce.b[3*E],t.b[l++]=null!=T?T.b[E]:255}l+=W}}}return t},ze.extract=function(e,t,n){null==n&&(n=!1);var i=ze.getHeader(e),s=!1;switch((f=i.color)._hx_index){case 0:var s=A=f.alpha,a=A?2:1;break;case 1:a=(s=A=f.alpha)?4:3;break;case 2:throw tl.thrown("assert")}for(var l=i.colbits>>3,r=(n=n&&s?!1:n)?a+1:a,o=(null==t&&(t=new IA(new ArrayBuffer(r*l*i.width*i.height))),null),u=null,h=e.h;null!=h;){var c=h.item,h=h.next;2==c._hx_index&&(f=c.b,null!=u?u.add(f):o=null==o?f:((u=new jA).add(o),u.add(f),null))}if(null==(o=null!=u?u.getBytes():o))throw tl.thrown("Data not found");var o=Qe.run(o),_=0,d=0,p=i.width,m=a*l,g=r*l*p,z=r*l;if(o.length<i.height*(m*p+1))throw tl.thrown("Not enough data");for(var f=[],A=0;A<m;)++A,f.push(0);for(var A=0,Q=i.height;A<Q;){var x=A++,w=o.b[_++];if(0!=w&&2!=w)for(var y=0;y<m;)f[y++]=0;switch(w){case 0:for(var b=0;b<p;){++b;for(var v=0;v<m;)++v,t.b[d++]=o.b[_++];n&&(t.b[d++]=255,2==l)&&(t.b[d++]=255)}break;case 1:for(var C=0;C<p;){++C;for(var S=0;S<m;){var k=S++;f[k]+=o.b[_++],t.b[d++]=f[k]}n&&(t.b[d++]=255,2==l)&&(t.b[d++]=255)}break;case 2:for(var V=0==x?0:g,M=0;M<p;){++M;for(var O=0;O<m;){++O;var W=o.b[_++]+t.b[d-V];t.b[d++]=W}n&&(t.b[d++]=255,2==l)&&(t.b[d++]=255)}break;case 3:for(var N=0==x?0:g,G=0;G<p;){++G;for(var U=0;U<m;){var I=U++;f[I]=o.b[_++]+(f[I]+t.b[d-N]>>1)&255,t.b[d++]=f[I]}n&&(t.b[d++]=255,2==l)&&(t.b[d++]=255)}break;case 4:for(var L=0;L<p;){for(var j=L++,H=0;H<m;){var B=H++,T=f[B],E=0==x?0:t.b[d-g],F=0==j||0==x?0:t.b[d-g-z],D=T+E-F,R=D-T,P=(R<0&&(R=-R),D-E),D=(P<0&&(P=-P),D-F),Y=(D<0&&(D=-D),_++);f[B]=(R<=P&&R<=D?T:P<=D?E:F)+o.b[Y]&255,t.b[d++]=f[B]}n&&(t.b[d++]=255,2==l)&&(t.b[d++]=255)}break;default:throw tl.thrown("Invalid filter "+w)}}if(16==i.colbits)for(d=0,f=0,A=i.height*p*r;f<A;){++f;var Z=t.b[d],E=t.b[d+1];t.b[d++]=E,t.b[d++]=Z}return t},fe["format.tga.ImageOrigin"]={__ename__:!0,__constructs__:null,BottomLeft:{_hx_name:"BottomLeft",_hx_index:0,__enum__:"format.tga.ImageOrigin",toString:o},BottomRight:{_hx_name:"BottomRight",_hx_index:1,__enum__:"format.tga.ImageOrigin",toString:o},TopLeft:{_hx_name:"TopLeft",_hx_index:2,__enum__:"format.tga.ImageOrigin",toString:o},TopRight:{_hx_name:"TopRight",_hx_index:3,__enum__:"format.tga.ImageOrigin",toString:o}}),pe=(de.__constructs__=[de.BottomLeft,de.BottomRight,de.TopLeft,de.TopRight],de.__empty_constructs__=[de.BottomLeft,de.BottomRight,de.TopLeft,de.TopRight],fe["format.tga.ImageType"]={__ename__:!0,__constructs__:null,NoImage:{_hx_name:"NoImage",_hx_index:0,__enum__:"format.tga.ImageType",toString:o},UncompressedColorMapped:{_hx_name:"UncompressedColorMapped",_hx_index:1,__enum__:"format.tga.ImageType",toString:o},UncompressedTrueColor:{_hx_name:"UncompressedTrueColor",_hx_index:2,__enum__:"format.tga.ImageType",toString:o},UncompressedBlackAndWhite:{_hx_name:"UncompressedBlackAndWhite",_hx_index:3,__enum__:"format.tga.ImageType",toString:o},RunLengthColorMapped:{_hx_name:"RunLengthColorMapped",_hx_index:4,__enum__:"format.tga.ImageType",toString:o},RunLengthTrueColor:{_hx_name:"RunLengthTrueColor",_hx_index:5,__enum__:"format.tga.ImageType",toString:o},RunLengthBlackAndWhite:{_hx_name:"RunLengthBlackAndWhite",_hx_index:6,__enum__:"format.tga.ImageType",toString:o},Unknown:((R=function(e){return{_hx_index:7,type:e,__enum__:"format.tga.ImageType",toString:o}})._hx_name="Unknown",R.__params__=["type"],R)}),Qe=(pe.__constructs__=[pe.NoImage,pe.UncompressedColorMapped,pe.UncompressedTrueColor,pe.UncompressedBlackAndWhite,pe.RunLengthColorMapped,pe.RunLengthTrueColor,pe.RunLengthBlackAndWhite,pe.Unknown],pe.__empty_constructs__=[pe.NoImage,pe.UncompressedColorMapped,pe.UncompressedTrueColor,pe.UncompressedBlackAndWhite,pe.RunLengthColorMapped,pe.RunLengthTrueColor,pe.RunLengthBlackAndWhite],(i["format.tga.Reader"]=I).__name__="format.tga.Reader",I.prototype={read:function(){var e=this.i.readByte(),t=this.readHeader(),e=0==e?"":this.i.readString(e),n=this.readColorMapData(t);return{header:t,imageId:e,colorMapData:n,imageData:this.readImageData(t,n),developerData:null}},readHeader:function(){var e,t=this.i.readByte(),n=this.i.readByte();switch(n){case 0:e=pe.NoImage;break;case 1:e=pe.UncompressedColorMapped;break;case 2:e=pe.UncompressedTrueColor;break;case 3:e=pe.UncompressedBlackAndWhite;break;case 9:e=pe.RunLengthColorMapped;break;case 10:e=pe.RunLengthTrueColor;break;case 11:e=pe.RunLengthBlackAndWhite;break;default:e=pe.Unknown(n)}var i,s=this.i.readInt16(),a=this.i.readInt16(),l=this.i.readByte(),r=this.i.readInt16(),o=this.i.readInt16(),u=this.i.readInt16(),h=this.i.readInt16(),c=this.i.readByte(),_=this.i.readByte();switch(48&_){case 16:i=de.BottomRight;break;case 32:i=de.TopLeft;break;case 48:i=de.TopRight;break;default:i=de.BottomLeft}return{colorMapType:t,imageType:e,colorMapFirstIndex:s,colorMapLength:a,colorMapEntrySize:l,xOrigin:r,yOrigin:o,width:u,height:h,bitsPerPixel:c,alphaChannelBits:15&_,imageOrigin:i}},readColorMapData:function(e){return 0==e.colorMapType?null:this.readPixels(e.colorMapEntrySize,e.colorMapLength,e.alphaChannelBits,!1)},readImageData:function(e,t){switch(e.imageType._hx_index){case 0:return null;case 1:return this.readIndexes(e.bitsPerPixel,e.width*e.height,t,e.colorMapFirstIndex,!1);case 2:return this.readPixels(e.bitsPerPixel,e.width*e.height,e.alphaChannelBits,!1);case 3:return this.readMono(e.bitsPerPixel,e.width*e.height,e.alphaChannelBits,!1);case 4:return this.readIndexes(e.bitsPerPixel,e.width*e.height,t,e.colorMapFirstIndex,!0);case 5:return this.readPixels(e.bitsPerPixel,e.width*e.height,e.alphaChannelBits,!0);case 6:return this.readMono(e.bitsPerPixel,e.width*e.height,e.alphaChannelBits,!0);default:throw tl.thrown("Unsupported image data type!")}},readPixels:function(e,t,n,i){var s,a,l=new Array(t),r=0!=n;switch(e){case 8:a=Cn(R=this.i,R.readByte),s=Cn(this,this.parsePixel1);break;case 16:a=Cn(R=this.i,R.readUInt16),s=Cn(this,this.parsePixel2);break;case 24:a=Cn(R=this.i,R.readUInt24),s=Cn(this,this.parsePixel3);break;case 32:a=Cn(R=this.i,R.readInt32),s=Cn(this,this.parsePixel4);break;default:throw tl.thrown("Unsupported bits per pixels amount!")}if(i)for(var o,u=0;u<t;)if(0!=(128&(o=this.i.readByte()))){o&=127;for(var h=s(a(),r);0<=o;)l[u++]=h,--o}else for(o&=127;0<=o;)l[u++]=s(a(),r),--o;else for(var c=0;c<t;)l[c++]=s(a(),r);return l},readMono:function(e,t,n,i){var s,a,l=new Array(t),r=0!=n;switch(e){case 8:a=Cn(R=this.i,R.readByte),s=Cn(this,this.parsePixel1);break;case 16:a=Cn(R=this.i,R.readUInt16),s=Cn(this,this.parsePixelGreyAlpha);break;default:throw tl.thrown("Unsupported bits per pixels amount!")}if(i)for(var o,u=0;u<t;)if(0!=(128&(o=this.i.readByte()))){o&=127;for(var h=s(a(),r);0<=o;)l[u++]=h,--o}else for(o&=127;0<=o;)l[u++]=s(a(),r),--o;else for(var c=0;c<t;)l[c++]=s(a(),r);return l},readIndexes:function(e,t,n,i,s){var a,l=new Array(t);switch(e){case 8:a=Cn(R=this.i,R.readByte);break;case 16:a=Cn(R=this.i,R.readUInt16);break;case 24:a=Cn(R=this.i,R.readUInt24);break;case 32:a=Cn(R=this.i,R.readInt32);break;default:throw tl.thrown("Unsupported bits per pixels amount!")}if(s)for(var r,o=0;o<t;)if(0!=(128&(r=this.i.readByte()))){r&=127;for(var u=n[i+a()];0<=r;)l[o++]=u,--r}else for(r&=127;0<=r;)l[o++]=n[i+a()],--r;else for(var h=0;h<t;)l[h++]=n[i+a()];return l},parsePixel1:function(e,t){return e<<16|e<<8|e},parsePixelGreyAlpha:function(e,t){return(t?(65280&e)<<16:0)|this.parsePixel1(255&e,!1)},parsePixel2:function(e,t){return(t&&1==(32768&e)?-16777216:0)|(((31744&e)>>10)/31*255|0)<<16|(((992&e)>>5)/31*255|0)<<8|(31&e)/31*255|0},parsePixel3:function(e,t){return e},parsePixel4:function(e,t){return e},__class__:I},function(){}),me=((i["format.tools.Inflate"]=Qe).__name__="format.tools.Inflate",Qe.run=function(e){return Ax.run(e)},(i["gasm.assets.Loader"]=u).__name__="gasm.assets.Loader",u.prototype={load:function(){this._loadedItems=0,this._totalBytes=il.reduce(this._loadingQueue,function(e,t){var n=t.size;if(null!=t.extras)for(var i=0,s=t.extras;i<s.length;)n+=s[i++].size;return n+e},0),this.loadNext()},addHandler:function(e,t){this._extensionHandlers.h[e._hx_index]=t},queueItem:function(e,t){var n,e=this.getEntry(e,t);if(null==e)return!1;if(Object.prototype.hasOwnProperty.call(this._loadingSet.h,e.path))return!1;switch(this._loadingSet.h[e.path]=!0,t._hx_index){case 3:n=[me.BitmapFontImage];break;case 6:n=[me.AtlasImage];break;case 10:n=[me.SpineImage,me.SpineConfig];break;default:n=[]}this._totalItems++;var i={type:t,name:e.name,path:e.path,size:e.size,extension:e.extension,extras:null};if(null!=e.extras){i.extras=[];for(var s=i.extras.length,a=0,l=e.extras;a<l.length;){var r=l[a];++a,i.extras.push({type:n[s],name:r.name,path:r.path,size:r.size,extension:r.extension}),this._totalItems++}}return this._loadingQueue.push(i),!0},onReady:function(){},onComplete:function(){},onProgress:function(e){},onError:function(e){},loadNext:function(){var e=this;if(this._itemIndex<this._loadingQueue.length){var t=this._loadingQueue[this._itemIndex];if(this.loadItem(t,this._extensionHandlers.h[t.type._hx_index]),null!=t.extras)for(var n=0,i=t.extras;n<i.length;){var s=i[n];++n,this.loadItem(s,this._extensionHandlers.h[s.type._hx_index])}SA.delay(function(){e._itemIndex++,e.loadNext()},0)}},loadItem:function(s,a){var l=this,r=new XMLHttpRequest;r.open("GET",s.path,!0),r.responseType="arraybuffer",r.onload=function(e){var t,n,i;200!=r.status?(t="Failed to load item "+s.name+", with HTTP statuscode "+r.status+": "+r.statusText+".",l.onError(t)):(l._loadedItems++,t=IA.ofData(r.response),2==s.type._hx_index&&(n="R_font_"+s.name,(i=window.document.createElement("style")).type="text/css",i.innerHTML="@font-face{ font-family: "+n+"; src: url('data:font/ttf;base64,"+TA.encode(t)+"') format('truetype'); }",window.document.getElementsByTagName("head")[0].appendChild(i),(i=window.document.createElement("div")).style.fontFamily=n,i.style.opacity=0,i.style.width="1px",i.style.height="1px",i.style.position="fixed",i.style.bottom="0px",i.style.right="0px",i.innerHTML=".",i.className="hx__loadFont",window.document.body.appendChild(i)),null!=a&&a({id:s.name,data:t,path:s.path}),l._loadedItems==l._totalItems&&l.onComplete())},r.onprogress=function(e){var t=e.loaded;l.handleProgress(0|t,s.path,0|e.total)},r.send(null)},getDirsForLocale:function(e,t){for(var n=this,i=[],s=0;s<e.length;){var a=e[s];++s,"directory"==a.type&&i.push(a)}var l=il.find(i,function(e){return e.name==t});return null!=l?l:il.find(i,function(e){return e.name==n._defaultLocale})},getFilesFromFolder:function(e,t,n,i){var s=this;if(null==e)return null;var a,l=il.find(e.children,function(e){return e.name==s._localizedFolder}),l=null==l?null:s.getDirsForLocale(l.children,t);if(null==l)a=null;else{for(var r=l.children,o=[],u=0;u<r.length;){var h=r[u],c=(++u,h.name),_=Jn.substr(c,0,0<=c.indexOf(".")?c.lastIndexOf("."):null);new ot("(-\\d+)","gm").split(_)[0]==n&&"file"==h.type&&o.push(h)}a=o}t=a;if(null!=t&&0<t.length)return t;for(r=e.children,o=[],u=0;u<r.length;){h=r[u],c=(++u,h.name),_=Jn.substr(c,0,0<=c.indexOf(".")?c.lastIndexOf("."):null);new ot("(-\\d+)","gm").split(_)[0]==n&&"file"==h.type&&o.push(h)}return o},getEntry:function(n,i){var t,s=this;switch(i._hx_index){case 0:t=this._imageFolder;break;case 1:t=this._soundFolder;break;case 2:case 3:t=this._fontFolder;break;case 5:t=this._configFolder;break;case 6:t=this._atlasFolder;break;case 8:t=this._gradientFolder;break;case 9:t=this._modelFolder;break;case 10:t=this._spineFolder;break;default:t=null}var e=null,a=(null!=this._platformContent&&(e=il.find(this._platformContent.children,function(e){return e.name==t})),null),l=(null!=this._brandingPlatform&&(a=il.find(this._brandingPlatform.children,function(e){return e.name==t})),null),r=(null!=this._brandingCommon&&(l=il.find(this._brandingCommon.children,function(e){return e.name==t})),il.reduce([a,l,e,il.find(this._commonContent.children,function(e){return e.name==t})],function(e,t){return null==e||0==e.length?s.getFilesFromFolder(t,s._locale,n,i):e},null)),o=null;if(null!=r)if(1<r.length)switch(i._hx_index){case 3:var o=il.find(r,function(e){return".json"==e.extension}),u=il.find(r,function(e){return".png"==e.extension}),h=(o.extras=[],u.type="file",u.path=Ae.replace(u.path,"\\","/"),u.name);u.name=Jn.substr(h,0,0<=h.indexOf(".")?h.lastIndexOf("."):null),u.size=null!=u.size?0|u.size:0,o.extras.push(u);break;case 6:o=il.find(r,function(e){return".atlas"==e.extension});for(var c=this.getPreferredExtension(me.AtlasImage),_=[".ktx2",".png",".jpg",".jpeg"],d=[],p=0;p<r.length;){var m=r[p];++p,m.extension==c&&d.push(m)}for(var p=[],g=0;g<r.length;){m=r[g];++g,-1!=_.indexOf(m.extension)&&p.push(m)}for(var f=null!=d&&0<d.length?d:p,A=new Array(f.length),d=0,p=f.length;d<p;){var x=d++,w=f[x],h=(w.type="file",w.path=Ae.replace(w.path,"\\","/"),w.name);w.name=Jn.substr(h,0,0<=h.indexOf(".")?h.lastIndexOf("."):null),w.size=null!=w.size?0|w.size:0,A[x]=w}o.extras=A;break;case 10:o=il.find(r,function(e){return".atlas"==e.extension});c=this.getPreferredExtension(me.SpineImage),h=(null==(u=il.find(r,function(e){return e.extension==c}))&&(u=il.find(r,function(e){return".png"==e.extension||".jpg"==e.extension||".ktx2"==e.extension})),o.extras=[],u.type="file",u.path=Ae.replace(u.path,"\\","/"),u.name),u=(u.name=Jn.substr(h,0,0<=h.indexOf(".")?h.lastIndexOf("."):null),u.size=null!=u.size?0|u.size:0,o.extras.push(u),il.find(r,function(e){return".json"==e.extension})),h=(u.type="file",u.path=Ae.replace(u.path,"\\","/"),u.name);u.name=Jn.substr(h,0,0<=h.indexOf(".")?h.lastIndexOf("."):null),u.size=null!=u.size?0|u.size:0,o.extras.push(u);break;default:var y=this.getPreferredExtension(i);o=il.find(r,function(e){return e.extension==y})}else o=r[0];if(null==o)return null;o.path=Ae.replace(o.path,"\\","/");h=o.name;return o.name=Jn.substr(h,0,0<=h.indexOf(".")?h.lastIndexOf("."):null),o.size=null!=o.size?0|o.size:0,o},handleProgress:function(e,t,n){this._loadedBytes.h[t]=e;t=zy.reduce(this._loadedBytes,function(e,t){return t._1+e},0);this.onProgress(t/this._totalBytes*100|0)},getPreferredExtension:function(t){var e=il.find(this._formats,function(e){return e.type==t});return null!=e?e.extension:null},__class__:u},fe["gasm.assets.AssetType"]={__ename__:!0,__constructs__:null,Image:{_hx_name:"Image",_hx_index:0,__enum__:"gasm.assets.AssetType",toString:o},Sound:{_hx_name:"Sound",_hx_index:1,__enum__:"gasm.assets.AssetType",toString:o},Font:{_hx_name:"Font",_hx_index:2,__enum__:"gasm.assets.AssetType",toString:o},BitmapFont:{_hx_name:"BitmapFont",_hx_index:3,__enum__:"gasm.assets.AssetType",toString:o},BitmapFontImage:{_hx_name:"BitmapFontImage",_hx_index:4,__enum__:"gasm.assets.AssetType",toString:o},Config:{_hx_name:"Config",_hx_index:5,__enum__:"gasm.assets.AssetType",toString:o},Atlas:{_hx_name:"Atlas",_hx_index:6,__enum__:"gasm.assets.AssetType",toString:o},AtlasImage:{_hx_name:"AtlasImage",_hx_index:7,__enum__:"gasm.assets.AssetType",toString:o},Gradient:{_hx_name:"Gradient",_hx_index:8,__enum__:"gasm.assets.AssetType",toString:o},Model:{_hx_name:"Model",_hx_index:9,__enum__:"gasm.assets.AssetType",toString:o},SpineAtlas:{_hx_name:"SpineAtlas",_hx_index:10,__enum__:"gasm.assets.AssetType",toString:o},SpineImage:{_hx_name:"SpineImage",_hx_index:11,__enum__:"gasm.assets.AssetType",toString:o},SpineConfig:{_hx_name:"SpineConfig",_hx_index:12,__enum__:"gasm.assets.AssetType",toString:o}}),ge=(me.__constructs__=[me.Image,me.Sound,me.Font,me.BitmapFont,me.BitmapFontImage,me.Config,me.Atlas,me.AtlasImage,me.Gradient,me.Model,me.SpineAtlas,me.SpineImage,me.SpineConfig],me.__empty_constructs__=[me.Image,me.Sound,me.Font,me.BitmapFont,me.BitmapFontImage,me.Config,me.Atlas,me.AtlasImage,me.Gradient,me.Model,me.SpineAtlas,me.SpineImage,me.SpineConfig],(i["gasm.core.Component"]=d).__name__="gasm.core.Component",d.prototype={setup:function(){},init:function(){},onAdded:function(){},remove:function(){var e=null!=this.owner;return e&&this.owner.remove(this),e},dispose:function(){this._scheduled=[]},update:function(e){for(var t=0,n=this._scheduled;t<n.length;){var i=n[t];++t,i.when=Re.sub(i.when,e),Re.leq(i.when,0)&&(i.trigger.trigger(null),Jn.remove(this._scheduled,i))}for(t=0,n=this._predicates;t<n.length;){i=n[t];++t,i.predicate()&&(i.trigger.trigger(null),Jn.remove(this._predicates,i))}},after:function(e){null==e&&(e=0);var t=new qy;return null==e?t.trigger(null):this._scheduled.push({when:e,trigger:t}),t},when:function(t,e){null==e&&(e=0);var n=this,i=new qy,s=e,a=Jn.now()/1e3,l=null,l={predicate:Re.gt(e,0)?function(){var e=Jn.now()/1e3;return s=Re.sub(s,e-a),a=e,t()||Re.leq(s,0)?Jn.remove(n._predicates,l):t()}:t,trigger:i};return this._predicates.push(l),i},get_baseName:function(){return null},__class__:d,__properties__:{get_baseName:"get_baseName"}},(i["gasm.core.Context"]=a).__name__="gasm.core.Context",a.__isInterface__=!0,(i["gasm.core.IEngine"]=l).__name__="gasm.core.IEngine",l.__isInterface__=!0,l.prototype={__class__:l},(i["gasm.core.Engine"]=r).__name__="gasm.core.Engine",r.__interfaces__=[l],r.prototype={tick:function(){var e,t;this._paused||(e=Jn.now()/1e3,t=null!=this.getDelta?this.getDelta():null!=(t=e-this._lastTime)?t:e,this.updateEntity(this.baseEntity,t),this._lastTime=e)},pause:function(){this._paused=!0},resume:function(){this._lastTime=Jn.now()/1e3,this._paused=!1},updateEntity:function(e,t){for(var n=0,i=this._systems.length;n<i;)for(var s=this._systems[n++],a=e.firstComponent;null!=a;){var l=a.next;0!=(s.componentFlags&1<<a.componentType._hx_index)&&s.update(a,t),a=l}for(var r=e.firstChild;null!=r;){l=r.next;this.updateEntity(r,t),r=l}},__class__:r},function(e){null==e&&(e=""),this._compMap=new at,this.firstComponent=null,this.next=null,this.firstChild=null,this.parent=null,this.id=e}),ve=((i["gasm.core.Entity"]=ge).__name__="gasm.core.Entity",ge.prototype={add:function(e){for(var t=e.get_baseName(),n=e.owner,n=(null!=n&&n.remove(e),this._compMap.h[t]),i=(null!=n&&this.remove(n),this._compMap.h[t]=e,null),s=this.firstComponent;null!=s;)s=(i=s).next;switch(null!=i?i.next=e:this.firstComponent=e,e.owner=this,e.next=null,e.componentType._hx_index){case 8:this.add(new Ce);break;case 9:this.add(new ke);break;case 10:this.add(new Se);break;case 11:this.add(new ve)}return e.setup(),this},remove:function(e){for(var t=null,n=this.firstComponent;null!=n;){var i,s,a=n.next;if(n==e)return null==t?this.firstComponent=a:(t.owner=this,t.next=a),null!=(i=this._compMap)&&(s=n.get_baseName(),Object.prototype.hasOwnProperty.call(i.h,s))&&delete i.h[s],!n.inited&&0!=n.componentType._hx_index||n.dispose(),n.owner=null,!(n.next=null);t=n,n=a}return this._compMap=null,!1},getChildren:function(){for(var e=[],t=this.firstChild;null!=t;){var n=t.next;e.push(t),t=n}return e},getFromParentsByName:function(e,t){for(var n=this;null!=n;){var i=n._compMap,i=null!=i?i.h[e]:null;if(null!=i)return i;n=n.parent}return null},getFromRootByName:function(e,t){for(var n=null,i=this;null!=i;){var s=i._compMap,s=null!=s?s.h[e]:null;null!=s&&(n=s),i=i.parent}return n},addChild:function(e,t){null==t&&(t=!0);var n=e.parent;if(null!=n&&n.removeChild(e),e.parent=this,t){for(var i=null,s=this.firstChild;null!=s;)s=(i=s).next;null!=i?i.next=e:this.firstChild=e}else e.next=this.firstChild,this.firstChild=e;return this},removeChild:function(e){for(var t=null,n=this.firstChild;null!=n;){var i=n.next;if(n==e)return null==t?this.firstChild=i:t.next=i,n.parent=null,n.next=null,void n.dispose();t=n,n=i}},disposeChildren:function(){for(;null!=this.firstChild;){var e=this.firstChild.next;this.firstChild.dispose(),this.firstChild=e}},dispose:function(){var e=this.parent;for(null!=e&&e.removeChild(this),this.parent=null;null!=this.firstComponent;)this.remove(this.firstComponent);this.disposeChildren()},__class__:ge},(i["gasm.core.ISystem"]=h).__name__="gasm.core.ISystem",h.__isInterface__=!0,h.prototype={__class__:h},(i["gasm.core.System"]=c).__name__="gasm.core.System",c.prototype={__class__:c},(i["gasm.core.api.IDisposable"]=_).__name__="gasm.core.api.IDisposable",_.__isInterface__=!0,(i["gasm.core.components.AppModelComponent"]=ee).__name__="gasm.core.components.AppModelComponent",ee.__super__=d,ee.prototype=e(d.prototype,{get_baseName:function(){return"gasm.core.components.AppModelComponent"},__class__:ee}),function(){d.call(this),this.componentType=Ie.SoundModel}),Ce=((i["gasm.core.components.SoundModelComponent"]=ve).__name__="gasm.core.components.SoundModelComponent",ve.__super__=d,ve.prototype=e(d.prototype,{get_baseName:function(){return"gasm.core.components.SoundModelComponent"},__class__:ve}),function(){this._yScale=1,this._xScale=1,this._height=-1,this._width=-1,this.dirty=!0,this.offsetY=0,this.offsetX=0,this.stageMouseY=0,this.stageMouseX=0,this.mouseY=0,this.mouseX=0,this.origHeight=-1,this.origWidth=-1,this.visible=!0,this.alpha=1,this.y=0,this.x=0,d.call(this),this.componentType=Ie.GraphicsModel,this._pressHandlers=[],this._overHandlers=[],this._outHandlers=[],this._moveHandlers=[],this._dragHandlers=[],this._downHandlers=[],this._upHandlers=[],this._resizeHandlers=[]}),Se=((i["gasm.core.components.SpriteModelComponent"]=Ce).__name__="gasm.core.components.SpriteModelComponent",Ce.__super__=d,Ce.prototype=e(d.prototype,{dispose:function(){for(var e=0,t=Be.__empty_constructs__.slice();e<t.length;)this.removeHandlers(t[e++]);this._pressHandlers=null,this._overHandlers=null,this._outHandlers=null,this._moveHandlers=null,this._dragHandlers=null,this._downHandlers=null,this._upHandlers=null,this._resizeHandlers=null},addHandler:function(e,t){var n;switch(e._hx_index){case 0:n=this._pressHandlers;break;case 1:n=this._dragHandlers;break;case 2:n=this._moveHandlers;break;case 3:n=this._overHandlers;break;case 4:n=this._outHandlers;break;case 5:n=this._downHandlers;break;case 6:n=this._upHandlers;break;case 7:n=this._resizeHandlers}n.push(t)},removeHandler:function(e,t){var n;switch(e._hx_index){case 0:n=this._pressHandlers;break;case 1:n=this._dragHandlers;break;case 2:n=this._moveHandlers;break;case 3:n=this._overHandlers;break;case 4:n=this._outHandlers;break;case 5:n=this._downHandlers;break;case 6:n=this._upHandlers;break;case 7:n=this._resizeHandlers}if(null!=n)for(var i=0;i<n.length;){var s=n[i];++i,s==t&&Jn.remove(n,s)}},removeHandlers:function(e){},triggerEvent:function(e,t,n){var i,s=new Ee(t,n);switch(e._hx_index){case 0:i=this._pressHandlers;break;case 1:i=this._dragHandlers;break;case 2:i=this._moveHandlers;break;case 3:i=this._overHandlers;break;case 4:i=this._outHandlers;break;case 5:i=this._downHandlers;break;case 6:i=this._upHandlers;break;case 7:i=this._resizeHandlers}for(var a=0;a<i.length;)i[a++](s)},set_x:function(e){return this.x=e,this.dirty=!0,e},set_y:function(e){return this.y=e,this.dirty=!0,e},set_width:function(e){return this._width=e,0<this._width&&0<this.origHeight&&(this._xScale=e/this.origWidth),this.dirty=!0,e},set_height:function(e){return this._height=e,0<this._height&&0<this.origHeight&&(this._yScale=e/this.origHeight),this.dirty=!0,e},get_xScale:function(){return this._xScale},set_xScale:function(e){return this._xScale=e,0<this.origWidth&&(this._width=this._xScale*this.origWidth),this.dirty=!0,e},get_yScale:function(){return this._yScale},set_yScale:function(e){return this._yScale=e,0<this.origHeight&&(this._height=this._yScale*this.origHeight),this.dirty=!0,e},get_visible:function(){return this.visible},set_visible:function(e){return this.visible=e,this.dirty=!0,e},get_baseName:function(){return"gasm.core.components.SpriteModelComponent"},__class__:Ce,__properties__:e(d.prototype.__properties__,{set_height:"set_height",set_width:"set_width",set_yScale:"set_yScale",get_yScale:"get_yScale",set_xScale:"set_xScale",get_xScale:"get_xScale",set_visible:"set_visible",get_visible:"get_visible",set_y:"set_y",set_x:"set_x"})}),function(e,t,n){null==n&&(n=16777215),null==t&&(t=14),null==e&&(e=""),this.text="",Ce.call(this),this.text=e,this.size=t,this.color=n}),ke=((i["gasm.core.components.TextModelComponent"]=Se).__name__="gasm.core.components.TextModelComponent",Se.__super__=Ce,Se.prototype=e(Ce.prototype,{get_baseName:function(){return"gasm.core.components.SpriteModelComponent"},__class__:Se}),function(){this.dirty=!1,this.visible=!0,this.alpha=1,this.dimensions={x:0,y:0,z:0},this.scale={x:1,y:1,z:1},this.offset={x:0,y:0,z:0},this.pos={x:0,y:0,z:0},d.call(this),this.componentType=Ie.Graphics3DModel,this._pressHandlers=[],this._overHandlers=[],this._outHandlers=[],this._moveHandlers=[],this._dragHandlers=[],this._downHandlers=[],this._upHandlers=[],this._resizeHandlers=[]}),Me=((i["gasm.core.components.ThreeDModelComponent"]=ke).__name__="gasm.core.components.ThreeDModelComponent",ke.__super__=d,ke.prototype=e(d.prototype,{dispose:function(){for(var e=0,t=Be.__empty_constructs__.slice();e<t.length;)this.removeHandlers(t[e++]);this._pressHandlers=null,this._overHandlers=null,this._outHandlers=null,this._moveHandlers=null,this._dragHandlers=null,this._downHandlers=null,this._upHandlers=null,this._resizeHandlers=null},removeHandlers:function(e){},get_pos:function(){return this.dirty=!0,this.pos},set_pos:function(e){return this.pos=e,this.dirty=!0,e},set_dimensions:function(e){return this.dimensions=e,this.dirty=!0,e},set_scale:function(e){return this.scale=e,this.dirty=!0,e},get_baseName:function(){return"gasm.core.components.ThreeDModelComponent"},__class__:ke,__properties__:e(d.prototype.__properties__,{set_dimensions:"set_dimensions",set_scale:"set_scale",set_pos:"set_pos",get_pos:"get_pos"})}),fe["gasm.core.enums.Anchor"]={__ename__:!0,__constructs__:null,TOP:{_hx_name:"TOP",_hx_index:0,__enum__:"gasm.core.enums.Anchor",toString:o},BOTTOM:{_hx_name:"BOTTOM",_hx_index:1,__enum__:"gasm.core.enums.Anchor",toString:o},LEFT:{_hx_name:"LEFT",_hx_index:2,__enum__:"gasm.core.enums.Anchor",toString:o},RIGHT:{_hx_name:"RIGHT",_hx_index:3,__enum__:"gasm.core.enums.Anchor",toString:o},NONE:{_hx_name:"NONE",_hx_index:4,__enum__:"gasm.core.enums.Anchor",toString:o}}),Ie=(Me.__constructs__=[Me.TOP,Me.BOTTOM,Me.LEFT,Me.RIGHT,Me.NONE],Me.__empty_constructs__=[Me.TOP,Me.BOTTOM,Me.LEFT,Me.RIGHT,Me.NONE],fe["gasm.core.enums.ComponentType"]={__ename__:!0,__constructs__:null,Model:{_hx_name:"Model",_hx_index:0,__enum__:"gasm.core.enums.ComponentType",toString:o},ActiveModel:{_hx_name:"ActiveModel",_hx_index:1,__enum__:"gasm.core.enums.ComponentType",toString:o},SceneModel:{_hx_name:"SceneModel",_hx_index:2,__enum__:"gasm.core.enums.ComponentType",toString:o},GraphicsModel:{_hx_name:"GraphicsModel",_hx_index:3,__enum__:"gasm.core.enums.ComponentType",toString:o},Graphics3DModel:{_hx_name:"Graphics3DModel",_hx_index:4,__enum__:"gasm.core.enums.ComponentType",toString:o},TextModel:{_hx_name:"TextModel",_hx_index:5,__enum__:"gasm.core.enums.ComponentType",toString:o},SoundModel:{_hx_name:"SoundModel",_hx_index:6,__enum__:"gasm.core.enums.ComponentType",toString:o},Actor:{_hx_name:"Actor",_hx_index:7,__enum__:"gasm.core.enums.ComponentType",toString:o},Graphics:{_hx_name:"Graphics",_hx_index:8,__enum__:"gasm.core.enums.ComponentType",toString:o},Graphics3D:{_hx_name:"Graphics3D",_hx_index:9,__enum__:"gasm.core.enums.ComponentType",toString:o},Text:{_hx_name:"Text",_hx_index:10,__enum__:"gasm.core.enums.ComponentType",toString:o},Sound:{_hx_name:"Sound",_hx_index:11,__enum__:"gasm.core.enums.ComponentType",toString:o}}),Be=(Ie.__constructs__=[Ie.Model,Ie.ActiveModel,Ie.SceneModel,Ie.GraphicsModel,Ie.Graphics3DModel,Ie.TextModel,Ie.SoundModel,Ie.Actor,Ie.Graphics,Ie.Graphics3D,Ie.Text,Ie.Sound],Ie.__empty_constructs__=[Ie.Model,Ie.ActiveModel,Ie.SceneModel,Ie.GraphicsModel,Ie.Graphics3DModel,Ie.TextModel,Ie.SoundModel,Ie.Actor,Ie.Graphics,Ie.Graphics3D,Ie.Text,Ie.Sound],fe["gasm.core.enums.EventType"]={__ename__:!0,__constructs__:null,PRESS:{_hx_name:"PRESS",_hx_index:0,__enum__:"gasm.core.enums.EventType",toString:o},DRAG:{_hx_name:"DRAG",_hx_index:1,__enum__:"gasm.core.enums.EventType",toString:o},MOVE:{_hx_name:"MOVE",_hx_index:2,__enum__:"gasm.core.enums.EventType",toString:o},OVER:{_hx_name:"OVER",_hx_index:3,__enum__:"gasm.core.enums.EventType",toString:o},OUT:{_hx_name:"OUT",_hx_index:4,__enum__:"gasm.core.enums.EventType",toString:o},DOWN:{_hx_name:"DOWN",_hx_index:5,__enum__:"gasm.core.enums.EventType",toString:o},UP:{_hx_name:"UP",_hx_index:6,__enum__:"gasm.core.enums.EventType",toString:o},RESIZE:{_hx_name:"RESIZE",_hx_index:7,__enum__:"gasm.core.enums.EventType",toString:o}}),Te=(Be.__constructs__=[Be.PRESS,Be.DRAG,Be.MOVE,Be.OVER,Be.OUT,Be.DOWN,Be.UP,Be.RESIZE],Be.__empty_constructs__=[Be.PRESS,Be.DRAG,Be.MOVE,Be.OVER,Be.OUT,Be.DOWN,Be.UP,Be.RESIZE],fe["gasm.core.enums.SystemType"]={__ename__:!0,__constructs__:null,CORE:{_hx_name:"CORE",_hx_index:0,__enum__:"gasm.core.enums.SystemType",toString:o},ACTOR:{_hx_name:"ACTOR",_hx_index:1,__enum__:"gasm.core.enums.SystemType",toString:o},RENDERING:{_hx_name:"RENDERING",_hx_index:2,__enum__:"gasm.core.enums.SystemType",toString:o},RENDERING3D:{_hx_name:"RENDERING3D",_hx_index:3,__enum__:"gasm.core.enums.SystemType",toString:o},SOUND:{_hx_name:"SOUND",_hx_index:4,__enum__:"gasm.core.enums.SystemType",toString:o}}),Ee=(Te.__constructs__=[Te.CORE,Te.ACTOR,Te.RENDERING,Te.RENDERING3D,Te.SOUND],Te.__empty_constructs__=[Te.CORE,Te.ACTOR,Te.RENDERING,Te.RENDERING3D,Te.SOUND],(i["gasm.core.events.api.IEvent"]=m).__name__="gasm.core.events.api.IEvent",m.__isInterface__=!0,function(e,t){this.pos=e,this.entity=t}),Fe=((i["gasm.core.events.InteractionEvent"]=Ee).__name__="gasm.core.events.InteractionEvent",Ee.__interfaces__=[m],Ee.prototype={__class__:Ee},(i["gasm.core.math.geom.Area"]=g).__name__="gasm.core.math.geom.Area",g.prototype={__class__:g},function(){c.call(this),this.type=Te.ACTOR,this.componentFlags|=128}),De=((i["gasm.core.systems.ActorSystem"]=Fe).__name__="gasm.core.systems.ActorSystem",Fe.__interfaces__=[h],Fe.__super__=c,Fe.prototype=e(c.prototype,{update:function(e,t){var n=e.inited;n||(e.init(),e.inited=!0),e.update(t),n||e.onAdded()},__class__:Fe}),function(){c.call(this),this.type=Te.CORE,this.componentFlags=16|(this.componentFlags|=8),this.componentFlags=2|(this.componentFlags|=32),this.componentFlags|=64}),Re=((i["gasm.core.systems.CoreSystem"]=De).__name__="gasm.core.systems.CoreSystem",De.__interfaces__=[h],De.__super__=c,De.prototype=e(c.prototype,{update:function(e,t){var n=e.inited;n||(e.init(),e.inited=!0),e.update(t),n||e.onAdded()},__class__:De}),{}),Pe=(Re.sub=function(e,t){return e-t},Re.leq=function(e,t){return e<=t},Re.gt=function(e,t){return t<e},(i["gasm.core.utils.SignalConnection"]=f).__name__="gasm.core.utils.SignalConnection",f.__interfaces__=[_],f.prototype={dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:f},(i["gasm.core.utils.SignalBase"]=A).__name__="gasm.core.utils.SignalBase",A.prototype={connectImpl:function(e,t){var n=this,i=new f(this,e);return this._head==A.DISPATCHING_SENTINEL?this.defer(function(){n.listAdd(i,t)}):this.listAdd(i,t),i},disconnect:function(e){var t=this;this._head==A.DISPATCHING_SENTINEL?this.defer(function(){t.listRemove(e)}):this.listRemove(e)},defer:function(e){for(var t=null,n=this._deferredTasks;null!=n;)n=(t=n).next;e=new Ve(e);null!=t?t.next=e:this._deferredTasks=e},willEmit:function(){var e=this._head;return this._head=A.DISPATCHING_SENTINEL,e},didEmit:function(e){this._head=e;var t=this._deferredTasks;for(this._deferredTasks=null;null!=t;)t.fn(),t=t.next},listAdd:function(e,t){if(t)e._next=this._head,this._head=e;else{for(var n=null,i=this._head;null!=i;)i=(n=i)._next;null!=n?n._next=e:this._head=e}},listRemove:function(e){for(var t,n=null,i=this._head;null!=i;){if(i==e)return t=i._next,void(null==n?this._head=t:n._next=t);i=(n=i)._next}},__class__:A},function(e){A.call(this,e)}),Ve=((i["gasm.core.utils.Signal1"]=Pe).__name__="gasm.core.utils.Signal1",Pe.__super__=A,Pe.prototype=e(A.prototype,{connect:function(e,t){return this.connectImpl(e,t=null==t?!1:t)},emit:function(e){var t=this;this._head==A.DISPATCHING_SENTINEL?this.defer(function(){t.emitImpl(e)}):this.emitImpl(e)},emitImpl:function(e){for(var t=this.willEmit(),n=t;null!=n;)n._listener(e),n.stayInList||n.dispose(),n=n._next;this.didEmit(t)},__class__:Pe}),function(e){this.next=null,this.fn=e}),Oe=((i["gasm.core.utils._SignalBase.Task"]=Ve).__name__="gasm.core.utils._SignalBase.Task",Ve.prototype={__class__:Ve},(i["h3d.IDrawable"]=x).__name__="h3d.IDrawable",x.__isInterface__=!0,(i["hxd.App"]=y).__name__="hxd.App",y.__interfaces__=[x],y.staticHandler=function(){},y.prototype={onResize:function(){},onContextLost:function(){null!=this.s3d&&this.s3d.onContextLost()},render:function(e){this.s3d.render(e),this.s2d.render(e)},mark:function(e){this.s3d.mark(e)},setup:function(){var e=this,t=!1;this.engine.onReady=y.staticHandler,this.engine.onContextLost=Cn(this,this.onContextLost),this.engine.onResized=function(){null!=e.s2d&&(e.s2d.checkResize(),t)&&e.onResize()},this.s3d=new ko,this.s2d=new kr,this.s2d.mark=Cn(this,this.mark),this.sevents=new i0,this.sevents.addScene(this.s2d),this.sevents.addScene(this.s3d),this.loadAssets(function(){t=!0,e.init(),l0.skip(),e.mainLoop(),u0.setLoop(Cn(e,e.mainLoop)),Kx.initialize()})},loadAssets:function(e){e()},init:function(){},mainLoop:function(){var e;l0.update(),this.sevents.checkEvents(),this.isDisposed||(this.update(l0.dt),this.isDisposed)||(e=l0.dt,null!=this.s2d&&this.s2d.setElapsedTime(e),null!=this.s3d&&this.s3d.setElapsedTime(e),this.engine.render(this))},update:function(e){},__class__:y},(i["gasm.heaps.HeapsContext"]=sl).__name__="gasm.heaps.HeapsContext",sl.__interfaces__=[a],sl.__super__=y,sl.prototype=e(y.prototype,{preload:function(t,n){var a=this;if(this._soundSupport=null!=X.field(window,"AudioContext")||null!=X.field(window,"webkitAudioContext"),this._assetConfig.formats=[],this._soundSupport){var e=window.document.createElement("audio");if(null!=e.canPlayType){var i,s=e.canPlayType("video/mp4");switch(this.isMacOS()?"":e.canPlayType('audio/webm; codecs="vorbis"')){case"":switch(s){case"maybe":case"probably":i=".mp4";break;default:i=null}break;case"maybe":switch(s){case"":case"maybe":i=".webm";break;case"probably":i=".mp4";break;default:i=null}break;case"probably":i=".webm";break;default:i=null}null==i?this._soundSupport=!1:(this._soundSupport=!0,this._assetConfig.formats.push({type:me.Sound,extension:i}))}}this._basisSupport=this.webAssemblySupport(),this._basisSupport?(this._assetConfig.formats.push({type:me.Image,extension:".ktx2"}),this._assetConfig.formats.push({type:me.AtlasImage,extension:".ktx2"}),this._assetConfig.formats.push({type:me.SpineImage,extension:".ktx2"})):(this._assetConfig.formats.push({type:me.Image,extension:".png"}),this._assetConfig.formats.push({type:me.AtlasImage,extension:".png"}),this._assetConfig.formats.push({type:me.SpineImage,extension:".png"})),this._assetConfig.formats.push({type:me.SpineConfig,extension:".json"}),this.appModel.pixelRatio=window.devicePixelRatio,this.engine.render(this);var l=new u("assets/desc.json",this._assetConfig),r=[];l.onReady=function(){N0.currentInstance=new N0(a._fileSystem);for(var e=0,t=U.getClassFields(a._assetContainers.images);e<t.length;){var n=t[e];++e,l.queueItem(n,me.Image)&&r.push("image:"+n)}if(a._soundSupport)for(e=0,t=U.getClassFields(a._assetContainers.sounds);e<t.length;)l.queueItem(t[e++],me.Sound);for(e=0,t=U.getClassFields(Qu);e<t.length;)l.queueItem(t[e++],me.Font);for(e=0,t=U.getClassFields(yu);e<t.length;)l.queueItem(t[e++],me.BitmapFont);for(e=0,t=U.getClassFields(a._assetContainers.atlases);e<t.length;){var i=t[e];++e,l.queueItem(i,me.Atlas)&&r.push("atlas:"+i)}for(e=0,t=U.getClassFields(a._assetContainers.spines);e<t.length;){var s=t[e];++e,l.queueItem(s,me.SpineAtlas)&&r.push("spine:"+s)}for(e=0,t=U.getClassFields(a._assetContainers.gradients);e<t.length;)l.queueItem(t[e++],me.Gradient);for(e=0,t=X.fields(a._assetContainers.brandingConfigs);e<t.length;)l.queueItem(t[e++],me.Config);for(e=0,t=X.fields(a._assetContainers.models);e<t.length;)l.queueItem(t[e++],me.Model);for(e=0,t=X.fields(a._assetContainers.configs);e<t.length;)l.queueItem(t[e++],me.Config);l.load()},l.onComplete=function(){var e=SA.delay(function(){throw new tl("Unable to load assets: "+el.string(r))},25e3),t=new SA(100);t.run=function(){0==r.length&&(t.stop(),e.stop(),n())}},l.onProgress=function(e){t(e),a.engine.render(a)},l.onError=function(e){throw new tl(e)},l.addHandler(me.Image,function(t){var e="image/"+t.id,n=KA.extension(t.path),i=e+"."+n;a._fileSystem.add(i,t.data),a.getImageTexture(i,n,e).handle(function(e){Jn.remove(r,"image:"+t.id),a._assetContainers.images[t.id]=Ir.fromTexture(e)})}),l.addHandler(me.Sound,function(e){a._assetContainers.sounds[e.id]=e.data}),l.addHandler(me.Font,function(e){var t=M0.fromBytes("font/"+e.id,e.data).to(B0);if(null==t)throw new tl("Unable to parse font "+e.id);a._assetContainers.fonts.h[e.id]=t}),l.addHandler(me.BitmapFont,function(e){var t=e.id.split(".")[0];a._fileSystem.add("fonts/"+t+".json",e.data),a.tryLoadBitmapFont(t).handle(function(e){e&&Jn.remove(r,"fonts:"+t)})}),l.addHandler(me.BitmapFontImage,function(e){var t=e.id.split(".")[0];a._fileSystem.add("fonts/"+t+"."+KA.extension(e.path),e.data),a.tryLoadBitmapFont(t).handle(function(e){e&&Jn.remove(r,"fonts:"+t)})}),l.addHandler(me.Atlas,function(t){Ae.endsWith(t.path,".atlas")&&(a._fileSystem.add("atlas/"+t.id+".atlas",t.data),a.tryLoadAtlas(t.id,t,r).handle(function(e){e&&Jn.remove(r,"atlas:"+t.id)}))}),l.addHandler(me.AtlasImage,function(t){a._fileSystem.add("atlas/"+t.id+"."+KA.extension(t.path),t.data),a.tryLoadAtlas(t.id,t,r).handle(function(e){e&&Jn.remove(r,"atlas:"+t.id)})}),l.addHandler(me.SpineAtlas,function(t){a._fileSystem.add("spine/"+t.id+".atlas",t.data),a.tryLoadSpine(t.id).handle(function(e){e&&Jn.remove(r,"spine:"+t.id)})}),l.addHandler(me.SpineImage,function(t){a._fileSystem.add("spine/"+t.id+"."+KA.extension(t.path),t.data),a.tryLoadSpine(t.id).handle(function(e){e&&Jn.remove(r,"spine:"+t.id)})}),l.addHandler(me.SpineConfig,function(t){a._fileSystem.add("spine/"+t.id+".json",t.data),a.tryLoadSpine(t.id).handle(function(e){e&&Jn.remove(r,"spine:"+t.id)})}),l.addHandler(me.Gradient,function(e){var t=M0.fromBytes(""+e.path,e.data).to(T0);a._assetContainers.gradients[e.id]=t}),l.addHandler(me.Config,function(e){var t=JSON.parse(e.data.toString());"gameconfig"==e.id?a._assetContainers.brandingConfigs[e.id]=t:a._assetContainers.configs[e.id]=t}),l.addHandler(me.Model,function(e){var t=M0.fromBytes(""+e.path,e.data).to(G0);a._assetContainers.models[e.id]=t})},tryLoadBitmapFont:function(i){var s=this;return new Ky(function(e){var t=s.getLoadedImagePath(i,"fonts"),n="fonts/"+i+".json";return s.areFilesLoaded([n])&&null!=t?(t=new I0(s._fileSystem.get(n)),s._assetContainers.bitmapFonts.h[i]=t,e(!0)):e(!1),null})},tryLoadSpine:function(a){var l=this;return new Ky(function(t){var n=l.getLoadedImagePath(a,"spine"),i="spine/"+a+".atlas",s="spine/"+a+".json";return l.areFilesLoaded([i,s])&&null!=n?l.getImageTexture(n,KA.extension(n),"spine/"+a).handle(function(e){e=Ir.fromTexture(e),e=l.parseSpine(n,l._fileSystem.get(i).getBytes(),e,l._fileSystem.get(s).getBytes());l._assetContainers.spines[a]=e,l._fileSystem.delete(n),l._fileSystem.delete(s),l._fileSystem.delete(i),t(!0)}):t(!1),null})},checkIfAllAssetsAreReady:function(e,t,n){var i=this,s=Jn.substr(e,0,-1!=e.lastIndexOf(".")?e.lastIndexOf("."):null),a=new ot("(-\\d+)","gm").split(s)[0],l="atlas/"+a+".atlas";if(!this._fileSystem.exists(l))return null;KA.extension(t.path);for(var t={atlasFilePath:"atlas/"+t.path.split("/").pop(),name:e,cb:n},r=(this.loadedCache.push(t),[".png",".jpg",".jpeg",".ktx2"]),o=this._fileSystem.get(l).getBytes().toString().split("\n"),u=new Array(o.length),h=0,c=o.length;h<c;)u[_=h++]=Ae.trim(o[_]);for(o=u.join("\n").split("\n\n"),u=new Array(o.length),h=0,c=o.length;h<c;)u[_=h++]=o[_].split("\n").shift();for(var _,d=new Array(u.length),h=0,c=u.length;h<c;)d[_=h++]="atlas/"+u[_];if(il.reduce(d,function(t,e){var n=Jn.substr(e,0,e.lastIndexOf("."));return il.each(r,function(e){i._fileSystem.exists(""+n+e)&&t.push(""+n+e)}),t},[]).length!=d.length)return null;for(o=this.loadedCache,h=[],c=0;c<o.length;){var p=o[c],e=(++c,p.name),s=Jn.substr(e,0,-1!=e.lastIndexOf(".")?e.lastIndexOf("."):null);new ot("(-\\d+)","gm").split(s)[0]==a&&h.push(p)}return h},tryLoadAtlas:function(o,u,_){var d=this;return new Ky(function(e){var c=d.checkIfAllAssetsAreReady(o,u,e);if(null!=c){for(var t=[],n=0,i=c;n<i.length;){var s=i[n];++n,Ae.endsWith(s.atlasFilePath,".atlas")&&t.push(s)}var e=t[0].atlasFilePath,a=new pt(d._fileSystem),l=d._fileSystem.get(e),r=2<c.length;a.parse(e,l.getBytes(),function(e,t,n){if(null!=t){for(var i=t.h,s=Object.keys(i),a=s.length,l=0;l<a;){var r=s[l++];d._assetContainers.atlases[r]=i[r]}for(var o=Object.keys(t.h),u=o.length,h=0;h<u;){r=o[h++];Jn.remove(_,"atlas:"+r),Jn.remove(_,"atlas:"+r+"_info")}il.each(c,function(e){e.cb(!0)})}},r)}return null})},areFilesLoaded:function(e){for(var t=0;t<e.length;)if(!this._fileSystem.exists(e[t++]))return!1;return!0},getLoadedImagePath:function(t,n){var i=this,e=il.find([".ktx2",".png",".jpg",".jpeg"],function(e){return i._fileSystem.exists(n+"/"+t+e)});return null==e?null:n+"/"+t+e},initFrozenDetection:function(){var t=this,n=null,e=null;null!=window.document.hidden?(n="hidden",e="visibilitychange"):null!=X.field(window.document,"msHidden")?(n="msHidden",e="msvisibilitychange"):null!=X.field(window.document,"webkitHidden")&&(n="webkitHidden",e="webkitvisibilitychange");window.document.addEventListener(e,function(){var e=X.field(window.document,n);null!=t._engine&&e!=t.appModel.frozen&&(e?t._engine.pause():t._engine.resume()),t.appModel.frozen=e,t.appModel.freezeSignal.emit(t.appModel.frozen)},!1),this.appModel.frozen=X.field(window.document,n),document.getElementById("webgl").addEventListener("webglcontextlost",function(e){e=null!=e.statusMessage?e.statusMessage:"no statusMessage";throw new Error("WebGL context lost, please reload game, "+e)}),this.appModel.frozen=!1},init:function(){this._core=null!=this._core?this._core:new bt(this.s2d),this._renderer=null!=this._renderer?this._renderer:new vt(this.s2d),this._sound=null!=this._sound?this._sound:new Ct,this.systems=[this._core,this._renderer,this._sound],this._engine=null!=this._engine?this._engine:new r(this.systems),this._engine.getDelta=function(){return l0.dt},this.mapInjections(),this.get_baseEntity().add(this.sceneModel),this.get_baseEntity().add(this.appModel),this.onResize()},onResize:function(){for(var e=r0.getInstance(),t=(this.appModel.stageSize.x=e.get_width(),this.appModel.stageSize.y=e.get_height(),e.get_width()/sl.REFERENCE_SIZE),n=e.get_height()/sl.REFERENCE_SIZE,t=(this.appModel.stageDimensions={x:t,y:n},e.get_height()>e.get_width()?"portrait":"landscape"),i=(this.appModel.orientation=t,0),s=this.sceneModel.scenes;i<s.length;){var a=s[i];++i,a.is3D||a.instance.checkResize()}this.appModel.resizeSignal.emit({width:this.appModel.stageSize.x,height:this.appModel.stageSize.y})},update:function(e){this._engine.tick()},render:function(e){var t;null!=this._engine&&null!=(t=(t=null!=(t=this.get_baseEntity()._compMap)?t.h[$e.BASE_NAME]:null)instanceof $e?t:null)?t.render(Cn(this,this.renderScenes)):this.renderScenes(e)},renderScenes:function(e){if(null!=this.appModel.customRenderCallback)this.appModel.customRenderCallback(e);else{var t=0;if(null!=this.sceneModel)for(var n=0,i=this.sceneModel.scenes;n<i.length;){var s=i[n];++n,(s.is3D?s.entity.getFromParentsByName(He.BASE_NAME,He):((s=s.entity.getFromParentsByName(je.BASE_NAME,je)).scene2d.ctx.defaultSmooth=!0,s)).render(e),++t}0==t&&y.prototype.render.call(this,e)}},getImageTexture:function(i,s,e){var a=this;return rt.irreversible(function(n){var t=a._fileSystem.get(i).getBytes();if("ktx2"==s)R0.getTexture(new HA(t),function(e,t){n(e)});else try{var e=M0.fromBytes(i,t).toTexture();e.realloc=null,n(e)}catch(e){CA.lastError=e;t=tl.caught(e).unwrap();throw new tl("Unable to decode image "+i+". "+el.string(t))}})},mapInjections:function(){this._injector=new wx,this.sceneModel=new Ze(this._injector);var e=this._injector.map(i0);e.provider=new kx(this.sevents,e._injector),(e=this._injector.map(Ye)).provider=new kx(this.sceneModel,e._injector),(e=this._injector.map(ge)).provider=new kx(this.get_baseEntity(),e._injector),(e=this._injector.map(ee)).provider=new kx(this.appModel,e._injector),(e=this._injector.map(Ye)).provider=new kx(this.sceneModel,e._injector)},parseSpine:function(e,t,n,i){t=t.toString(),i=i.toString();return new mt(new Ww(new Zw(new ay(t,new yt(n)))).readSkeletonData(new wt(i)))},get_baseEntity:function(){return this._engine.baseEntity},isMacOS:function(e){return null==e&&(e=p.navigator.userAgent),new ot("(Mac OS)","i").match(e)},webAssemblySupport:function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1},__class__:sl,__properties__:{get_baseEntity:"get_baseEntity"}}),(i["gasm.heaps.components.Heaps3DComponent"]=B).__name__="gasm.heaps.components.Heaps3DComponent",B.__super__=d,B.prototype=e(d.prototype,{setup:function(){this.object.set_name(this.owner.id)},init:function(){var e=this.owner._compMap,e=null!=e?e.h[ke.BASE_NAME]:null,e=(this._model=e instanceof ke?e:null,this.object.getBounds()),t=e.xMax-e.xMin;0<t&&this._model.set_dimensions({x:t,y:e.yMax-e.yMin,z:e.zMax-e.zMin}),this._model.set_scale({x:this.object.get_scaleX(),y:this.object.get_scaleY(),z:this.object.get_scaleZ()}),this._model.set_pos({x:0,y:0,z:0}),this._model.dirty=!1,d.prototype.init.call(this)},update:function(e){if(d.prototype.update.call(this,e),tt.update(this.object,e),null!=this._model){if(this._model.dirty){if(this.object.set_x(this._model.get_pos().x+this._model.offset.x),this.object.set_y(this._model.get_pos().y+this._model.offset.y),this.object.set_z(this._model.get_pos().z+this._model.offset.z),this._model.alpha!=this._alpha){this._alpha=this._model.alpha;for(var t=this.object.getMaterials(),n=0;n<t.length;){var i=t[n],s=(++n,i.passes.getShader(ft));i.blendMode==wr.AlphaAdd?(null==s&&(s=new ft(this._model.alpha),i.passes.addShader(s)),s.alpha__=this._model.alpha):(i.mshader.color__.w=this._model.alpha,null!=s&&i.passes.removeShader(s))}}this.object.set_scaleX(this._model.scale.x),this.object.set_scaleY(this._model.scale.y),this.object.set_scaleZ(this._model.scale.z),this.object.set_visible(this._model.visible)}else this._model.get_pos().x=this.object.get_x(),this._model.get_pos().y=this.object.get_y(),this._model.get_pos().z=this.object.get_z(),this._model.scale.x=this.object.get_scaleX(),this._model.scale.y=this.object.get_scaleY(),this._model.scale.z=this.object.get_scaleZ();this._model.dirty=!1}},dispose:function(){null!=this._model&&(null!=this.owner&&this.owner.remove(this),this._model=null),this.object.remove()},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:B}),function(e){this._hasBounds=!1,d.call(this),this._config=e,this.componentType=Ie.Actor}),We=((i["gasm.heaps.components.Heaps3DViewportComponent"]=Oe).__name__="gasm.heaps.components.Heaps3DViewportComponent",Oe.__super__=d,Oe.prototype=e(d.prototype,{init:function(){this._appModel=this.owner.getFromParentsByName(ee.BASE_NAME,ee),this._s3d=this.owner.getFromParentsByName(He.BASE_NAME,He).scene3d;var e=this._s3d.camera;e.pos=st.to3dPoint(this._config.cameraPos),this._config.rightHanded&&(e.rightHanded=!0,e.up=new Gr(0,1,0)),e.target=st.to3dPoint(this._config.cameraTarget),e.zNear=this._config.zNear,e.zFar=this._config.zFar,null!=this._config.fov&&(this.set_fov(this._config.fov),this.set_fovRatio(this._config.fovRatio)),null!=this._config.boundsObject&&(this._s3d.flags&=-3),null!=this._config.orthConfig&&this.setupOrth()},setupOrth:function(){function e(e){var t=Math.min(e.height,e.width)/2,n=-e.width/t/2,i=-e.height/t/2,e=((s=new Ur).xMin=n,s.yMin=i,s.zMin=-10,s.xMax=n+e.width/t,s.yMax=i+e.height/t,s.zMax=10,l._s3d.camera.orthoBounds=s,(e=l._s3d.camera.target).x=0,e.y=0,e.z=0,l._s3d.camera.pos),n=(t=l._s3d.camera.target).x+0,i=t.y+0,s=t.z+1,t=n=null==n?0:n,n=i=null==i?0:i,a=s=null==s?0:s;null==s&&(a=0),null==i&&(n=0),e.x=t=null==t?0:t,e.y=n,e.z=a}var l=this;this._appModel.resizeSignal.connect(e),e({width:this._appModel.stageSize.x,height:this._appModel.stageSize.y})},set_fov:function(e){return this.fov=e,this._s3d.camera.setFovX(this.fov,this.fovRatio),e},set_fovRatio:function(e){return this.fovRatio=e,this.set_fov(this.fov),e},update:function(e){var t,n,i,s;this._hasBounds||null==this._config.boundsObject||1e20!=(t=this._config.boundsObject.getBounds()).xMin&&(this._s3d.flags|=2,i=((s=this._config.bounds2d).xMax-s.xMin)/this._appModel.pixelRatio,n=((s=this._config.bounds2d).yMax-s.yMin)/this._appModel.pixelRatio,i=Math.min(i*((t.yMax-t.yMin)/i)*this._config.boundsMult.x,n*((t.xMax-t.xMin)/n)*this._config.boundsMult.y),this._scale!=i&&((s=this._s3d).scaleX=i,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.scaleY=i,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.scaleZ=i,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),this._s3d.camera.update(),this._scale=i,null!=this.fov)&&this.set_fovRatio(i),this._hasBounds=!0)},get_baseName:function(){return"gasm.heaps.components.Heaps3DViewportComponent"},__class__:Oe,__properties__:e(d.prototype.__properties__,{set_fovRatio:"set_fovRatio",set_fov:"set_fov"})}),function(e,t,n,i,s,a,l,r,o,u,h){this.orthConfig=null,this.rightHanded=!0,this.fovRatio=1.3333333333333333,this.fov=null,this.zFar=100,this.zNear=1,this.cameraTarget=st.fromBacking(new it(-1e-5,0,0,null)),this.cameraPos=st.fromBacking(new it(2,3,4,null)),this.bounds2d=null,this.boundsMult=st.fromBacking(new it(1,1,0,null)),(this.boundsObject=null)!=e&&(this.boundsObject=e),null!=t&&(this.boundsMult=t),null!=n&&(this.bounds2d=n),null!=i&&(this.cameraPos=i),null!=s&&(this.cameraTarget=s),null!=a&&(this.zNear=a),null!=l&&(this.zFar=l),null!=r&&(this.fov=r),null!=o&&(this.fovRatio=o),null!=u&&(this.rightHanded=u),null!=h&&(this.orthConfig=h)}),Ne=((i["gasm.heaps.components.Heaps3DViewportConfig"]=We).__name__="gasm.heaps.components.Heaps3DViewportConfig",We.prototype={__class__:We},(i["gasm.heaps.components.OrthConfig"]=v).__name__="gasm.heaps.components.OrthConfig",(i["gasm.heaps.components.HeapsCameraFitComponent"]=T).__name__="gasm.heaps.components.HeapsCameraFitComponent",T.__super__=d,T.prototype=e(d.prototype,{init:function(){var t=this,e=this.owner._compMap,e=null!=e?e.h[B.BASE_NAME]:null;this._targetComponent=e instanceof B?e:null,this._appModel=this.owner.getFromParentsByName(ee.BASE_NAME,ee),this._s3d=this.owner.getFromParentsByName(He.BASE_NAME,He).scene3d,this._startPos=st.fromVector3(this._s3d.camera.pos),this.duration=this._config.duration,this._appModel.resizeSignal.connect(function(e){t._forceFit=!0}),d.prototype.init.call(this)},update:function(e){var t,n,i,s;d.prototype.update.call(this,e),this.get_enabled()&&null!=this._targetComponent?1e20<=(t=this._targetComponent.object.getBounds()).xMin||(this._s3d.camera.pos.x,i={x:Vr.CURRENT.width,y:Vr.CURRENT.height},n=this._oldObjBounds,s=null==this._oldStageSize||i.x!=this._oldStageSize.x||i.y!=this._oldStageSize.y,this._oldStageSize=i,this._oldObjBounds=t,s||null==n||t.xMax!=n.xMax||t.xMin!=n.xMin||t.yMax!=n.yMax||t.yMin!=n.yMin||t.yMax!=n.yMax||this._forceFit?(this._shouldFit=!0,this._forceFit=!1):(this._shouldFit&&(this._shouldFit=!1,this._s3d.syncOnly(0),this._time=0,this._startPos=st.fromVector3(this._s3d.camera.pos),this._targetPos=this.calculateObjectFit(t)),this._time+=e,i=0<this.duration?Math.min(1,this._time/this.duration):1,this._s3d.camera.pos.x=this._startPos.x*(1-i)+this._targetPos.x*i,this._s3d.camera.pos.y=this._startPos.y*(1-i)+this._targetPos.y*i,this._s3d.camera.pos.z=this._startPos.z*(1-i)+this._targetPos.z*i,1<=i&&(null!=this._onFitCallback&&(s=this._onFitCallback,this._onFitCallback(),this._onFitCallback==s)&&(this._onFitCallback=null),this._startPos=st.fromVector3(this._s3d.camera.pos)))):this._time=0},calculateTargetZ:function(e,t,n,i){return n+(t-e)/Math.tan(Math.atan(e/Math.abs(n)))*(0<n-i?1:-1)},calculateObjectFit:function(e){for(var t=this._targetComponent.object,n=Vr.CURRENT,i=n.width,n=n.height,s=(g=null==(g=(r=this._s3d.camera.pos).x)?0:g,p=null==(p=r.y)?0:p,m=null==(m=r.z)?0:m,null==g?0:g),a=null==p?0:p,l=null==m?0:m,r=(this._s3d.camera.pos.x=0,this._s3d.camera.pos.y=0,this._s3d.camera.target),o=this._s3d.camera.pos,o=(r.x=o.x,r.y=o.y,r.z=o.z,this._s3d.camera.target.z=-this._s3d.camera.zFar,this._s3d.camera.update(),null!=this._config.bounds?this._config.bounds:e),e=this._s3d.camera.project(t.get_x(),t.get_y(),t.get_z(),i,n).z,i=this._s3d.camera.unproject(1,1,e),n=this._s3d.camera.unproject(-1,-1,e),u=[],e=this._config.margins,h=(u.push(this.calculateTargetZ(i.x,o.xMax+e.right,this._s3d.camera.pos.z,t.get_z())),u.push(this.calculateTargetZ(Math.abs(n.x),Math.abs(o.xMin)+e.left,this._s3d.camera.pos.z,t.get_z())),u.push(this.calculateTargetZ(i.y,o.yMax+e.top,this._s3d.camera.pos.z,t.get_z())),u.push(this.calculateTargetZ(Math.abs(n.y),Math.abs(o.yMin)+e.bottom,this._s3d.camera.pos.z,t.get_z())),null),c=null,_=0;_<u.length;){var d=u[_];++_,(null==h||h<d)&&(h=d),(null==c||d<c)&&(c=d)}var p,m,g=(r=this._s3d.camera.pos).x,i=new Gr(g=null==g?0:g,p=null==(p=r.y)?0:p,m=null==(m=r.z)?0:m);return i.z=this._config.crop?c:h,i.x=e.right-e.left,i.y=e.top-e.bottom,(r=this._s3d.camera.pos).x=s,r.y=a,r.z=l,this._s3d.camera.update(),st.fromVector3(i)},get_enabled:function(){return this._enabled},set_enabled:function(e){return 1==e&&(this._forceFit=!0),this._enabled=e},get_margins:function(){return this._config.margins},get_baseName:function(){return"gasm.heaps.components.HeapsCameraFitComponent"},__class__:T,__properties__:e(d.prototype.__properties__,{get_margins:"get_margins"})}),(i["gasm.heaps.components.CameraFitMargins"]=E).__name__="gasm.heaps.components.CameraFitMargins",E.prototype={__class__:E},(i["gasm.heaps.components.CameraFitConfig"]=F).__name__="gasm.heaps.components.CameraFitConfig",F.prototype={__class__:F},function(e,t){this._targetScale=st.fromBacking(new it(0,0,0,null)),this._scheduledTweens=null,this._tweening=!1,this.enable=!0,B.call(this,t),this._config=e,this.set_crop(this._config.crop),this.set_bounds(this._config.bounds),this.set_margins(this._config.margins)}),Ge=((i["gasm.heaps.components.HeapsObjectFitComponent"]=Ne).__name__="gasm.heaps.components.HeapsObjectFitComponent",Ne.__super__=B,Ne.prototype=e(B.prototype,{init:function(){var e=this.owner.getFromParentsByName(He.BASE_NAME,He);this._object=this.object.object,this._camera=e.scene3d.camera,this._lastObjectScale=st.fromBacking(new it(this._object.scaleX,this._object.scaleY,this._object.scaleZ,null)),B.prototype.init.call(this)},update:function(e){var t,n,i,s,a,l,r;B.prototype.update.call(this,e),this.enable&&null!=this._object&&!this._tweening&&(0==this._object.children.length?this._initBounds=null:(e=Vr.CURRENT,(a=this._object).scaleX=1,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a.scaleY=1,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a.scaleZ=1,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),r=null!=(r=this._initBounds)?r:null!=this._config.getBounds||null!=this._config.bounds?(a=null!=this._config.getBounds?this._config.getBounds():this._config.bounds,(n=new Ur).xMin=a.xMin,n.xMax=a.xMax,n.yMin=a.yMin,n.yMax=a.yMax,n.zMin=a.zMin,n.zMax=a.zMax,(i=n).transform(this._object.getAbsPos()),i):this._object.getBounds(),Math.abs(r.zMax)>=this._camera.zFar||(r=this._camera.project(0,0,r.zMax,e.width,e.height,!1).z,e=this._camera.unproject(1,1,r),r=this._camera.unproject(-1,-1,r),t=Math.abs(e.x-r.x),l=Math.abs(r.y-e.y),s=e.y-this.get_margins().top*l,l=r.y+this.get_margins().bottom*l,e=e.x-this.get_margins().right*t,r=r.x+this.get_margins().left*t,(a=this._object).x=r+.5*(e-r),a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),(a=this._object).y=l+.5*(s-l),a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),t=null!=this._config.getBounds||null!=this._config.bounds?(a=null!=this._config.getBounds?this._config.getBounds():this._config.bounds,(n=new Ur).xMin=a.xMin,n.xMax=a.xMax,n.yMin=a.yMin,n.yMax=a.yMax,n.zMin=a.zMin,n.zMax=a.zMax,(i=n).transform(this._object.getAbsPos()),i):this._object.getBounds(),n=Math.abs((e-this._object.x)/(t.xMax-this._object.x)),i=Math.abs((this._object.x-r)/(this._object.x-t.xMin)),e=this.get_crop()?Math.max(n,i):Math.min(n,i),r=Math.abs((s-this._object.y)/(t.yMax-this._object.y)),n=Math.abs((this._object.y-l)/(this._object.y-t.yMin)),i=this.get_crop()?Math.max(r,n):Math.min(r,n),s=this.get_crop()?Math.max(e,i):Math.min(e,i),null!=this._config.maxScale&&(s=Math.min(s,this._config.maxScale),e=Math.min(e,this._config.maxScale),i=Math.min(i,this._config.maxScale)),this._config.keepRatio?st.set(this._targetScale,st.fromBacking(new it(s,s,this._object.scaleZ,null))):st.set(this._targetScale,st.fromBacking(new it(e,i,this._object.scaleZ,null))),this._targetScale.z=this._config.scaleZ?s:this._object.scaleZ,a=this._object,l=this._config.speed,a.scaleX=this._lastObjectScale.x*(1-l)+this._targetScale.x*l,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a=this._object,l=this._config.speed,a.scaleY=this._lastObjectScale.y*(1-l)+this._targetScale.y*l,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a=this._object,l=this._config.speed,a.scaleZ=this._lastObjectScale.z*(1-l)+this._targetScale.z*l,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),this._lastObjectScale=st.fromBacking(new it(this._object.scaleX,this._object.scaleY,this._object.scaleZ,null)),this._initBounds=null!=this._initBounds?this._initBounds:t,null!=this._scheduledTweens&&this.inited&&(this.tween(this._scheduledTweens),this._scheduledTweens=null))))},tween:function(e){var t=this;if(this.inited){this._tweenDone=new qy,this._tweening=!0;for(var n=0;n<e.length;){var i,s,a=e[n];++n,2==a._hx_index&&(a=a.v,i=null!=this.get_margins()?this.get_margins().left:0,s=null!=this.get_margins()?this.get_margins().top:0,a.from.x*=this.get_scale().x,a.from.y*=this.get_scale().y,a.from.z*=this.get_scale().x,a.to.x*=this.get_scale().x+i,a.to.y*=this.get_scale().y+s,a.to.z*=this.get_scale().z)}tt.tween(this.object,e).handle(function(){t._tweening=!1,t._tweenDone.trigger(null)})}else this._scheduledTweens=e,this._tweenDone=new qy;return this._tweenDone},get_margins:function(){return this.margins},set_margins:function(e){return this.margins=e},get_crop:function(){return this.crop},set_crop:function(e){return this.crop=e},get_scale:function(){return null==this._object?st.fromBacking(new it(0,0,0,null)):st.fromBacking(new it(this._object.scaleX,this._object.scaleY,this._object.scaleZ,null))},set_bounds:function(e){return this.bounds=e},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Ne,__properties__:e(B.prototype.__properties__,{set_crop:"set_crop",get_crop:"get_crop",get_scale:"get_scale",set_bounds:"set_bounds",set_margins:"set_margins",get_margins:"get_margins"})}),(i["gasm.heaps.components.ObjectFitMargins"]=te).__name__="gasm.heaps.components.ObjectFitMargins",te.prototype={__class__:te},function(e,t,n,i,s,a,l,r){this.getBounds=null,this.speed=1,this.maxScale=null,this.scaleZ=!1,this.keepRatio=!0,this.crop=!1,this.bounds=null,this.margins=new te(0,0,0,0),null!=e&&(this.margins=e),null!=t&&(this.bounds=t),null!=n&&(this.crop=n),null!=i&&(this.keepRatio=i),null!=s&&(this.scaleZ=s),null!=a&&(this.maxScale=a),null!=l&&(this.speed=l),null!=r&&(this.getBounds=r)}),je=((i["gasm.heaps.components.ObjectFitConfig"]=Ge).__name__="gasm.heaps.components.ObjectFitConfig",Ge.prototype={__class__:Ge},(i["gasm.heaps.components.HeapsSceneBase"]=D).__name__="gasm.heaps.components.HeapsSceneBase",D.__super__=d,D.prototype=e(d.prototype,{get_baseName:function(){return"gasm.heaps.components.HeapsSceneBase"},__class__:D}),function(e){this.componentType=Ie.Model,this.scene2d=e,this._engine=Vr.CURRENT,D.call(this,e)}),He=((i["gasm.heaps.components.HeapsScene2DComponent"]=je).__name__="gasm.heaps.components.HeapsScene2DComponent",je.__super__=D,je.prototype=e(D.prototype,{render:function(e){var t,n=this;null!=this._texturePass?(null==this._size||this._engine.width!=this._size.x||this._engine.height!=this._size.y?(this._postProcessingTexture=new _o(this._engine.width,this._engine.height),this._size={x:this._engine.width,y:this._engine.height}):this._postProcessingTexture.clear(0,0),this._engine.pushTarget(this._postProcessingTexture),this.scene2d.render(this._engine),this._engine.popTarget(),this._texturePass.pass.getShader(xt).texture__=this._postProcessingTexture,this._texturePass.render()):null!=(t=(t=null!=(t=this.owner._compMap)?t.h[$e.BASE_NAME]:null)instanceof $e?t:null)?t.render(function(e){n.scene2d.render(e)}):this.scene2d.render(e)},get_baseName:function(){return"gasm.heaps.components.HeapsSceneBase"},__class__:je}),function(e){this.componentType=Ie.Model,this.scene3d=e,this._engine=Vr.CURRENT,D.call(this,e)}),Ye=((i["gasm.heaps.components.HeapsScene3DComponent"]=He).__name__="gasm.heaps.components.HeapsScene3DComponent",He.__super__=D,He.prototype=e(D.prototype,{render:function(e){var t,n=this;null!=this._texturePass?(null==this._postProcessingTexture?this._postProcessingTexture=new _o(this._engine.width,this._engine.height):this._postProcessingTexture.width==this._engine.width&&this._postProcessingTexture.height==this._engine.height||this._postProcessingTexture.resize(this._engine.width,this._engine.height),this._postProcessingTexture.clear(0,0),this._engine.pushTarget(this._postProcessingTexture),this.scene3d.render(this._engine),this._engine.popTarget(),this._texturePass.pass.getShader(xt).texture__=this._postProcessingTexture,this._texturePass.render()):null!=(t=(t=null!=(t=this.owner._compMap)?t.h[$e.BASE_NAME]:null)instanceof $e?t:null)?t.render(function(e){n.scene3d.render(e)}):this.scene3d.render(e)},get_baseName:function(){return"gasm.heaps.components.HeapsSceneBase"},__class__:He}),function(){this.sceneMap=new at,this.dirty=!1,this.scenes=[],d.call(this),this.componentType=Ie.SceneModel}),Ze=((i["gasm.heaps.components.SceneModelComponent"]=Ye).__name__="gasm.heaps.components.SceneModelComponent",Ye.__super__=d,Ye.prototype=e(d.prototype,{addScene:function(e){return this.removeScene(e.name),e.entity=new ge(e.name),null==e.layerIndex&&(e.layerIndex=this.scenes.length),this.scenes.push(e),this.sortScenes(),this.addEntity(e,this.owner),this.dirty=!0,e.entity},hideScene:function(e){},showScene:function(e){},removeScene:function(t){var e,n=il.find(this.scenes,function(e){return e.name==t});null!=n&&(null!=(e=n.instance)&&(e.removeChildren(),null!=e&&null!=e.parent&&e.parent.removeChild(e),e.dispose()),null!=(e=n.instance)&&(e.removeChildren(),null!=e&&null!=e.parent&&e.parent.removeChild(e),e.dispose()),null!=n.entity.parent&&n.entity.parent.removeChild(n.entity),n.entity.dispose(),this.dirty=!0,Jn.remove(this.scenes,n),e=this.sceneMap,n=n.name,Object.prototype.hasOwnProperty.call(e.h,n))&&delete e.h[n]},moveToTop:function(t){var e=il.find(this.scenes,function(e){return t==e.name});null!=e&&(e.layerIndex=this.scenes.length,this.sortScenes())},addEntity:function(e,t){return null},sortScenes:function(){this.scenes.sort(function(e,t){return e.layerIndex-t.layerIndex}),il.eachi(this.scenes,function(e,t){e.layerIndex=t})},get_baseName:function(){return"gasm.heaps.components.SceneModelComponent"},__class__:Ye}),function(e){this._injector=e,Ye.call(this)}),qe=((i["gasm.heaps.components.HeapsSceneModelComponent"]=Ze).__name__="gasm.heaps.components.HeapsSceneModelComponent",Ze.__super__=Ye,Ze.prototype=e(Ye.prototype,{init:function(){this._sceneEvents=this._injector.getInstance(i0)},hideScene:function(t){var e=be.find(this.scenes,function(e){return e.name==t});e.is3D?e.instance.flags&=-3:e.instance.set_visible(!1)},showScene:function(t){var e=be.find(this.scenes,function(e){return e.name==t});e.is3D?e.instance.flags|=2:e.instance.set_visible(!0)},addEntity:function(e,t){var n,i=e.entity,s=(e.is3D?(s=n=new ko,i.add(new He(s)),i.add(new B(s))):((s=n=new kr).ctx.defaultSmooth=!0,i.add(new je(s)),i.add(new qe(s))),e.instance=n,e.interactive&&this._sceneEvents.addScene(nl.__cast(n,Sr),e.layerIndex),this._injector.map(ge,e.name));return s.provider=new kx(i,s._injector),this.sceneMap.h[e.name]=n,t.addChild(i),i.add(new $e(new dt(null))),i},removeScene:function(e){this._injector.unmap(ge,e),Ye.prototype.removeScene.call(this,e)},get_baseName:function(){return"gasm.heaps.components.SceneModelComponent"},__class__:Ze}),function(e,t,n){null==n&&(n=!0),null==t&&(t=!1),d.call(this),null==e&&(e=new kt),t&&(this._interactive=new br(0,0,e),this._interactive.propagateEvents=!0),this.sprite=e,this._resizeInteractive=n,this.componentType=Ie.Graphics}),Ke=((i["gasm.heaps.components.HeapsSpriteComponent"]=qe).__name__="gasm.heaps.components.HeapsSpriteComponent",qe.__super__=d,qe.prototype=e(d.prototype,{setup:function(){this.sprite.name=this.owner.id},init:function(){var e=this.owner._compMap,t=null!=e?e.h[Ce.BASE_NAME]:null,n=(this._model=t instanceof Ce?t:null,this._appModel=this.owner.getFromParentsByName(ee.BASE_NAME,ee),this.sprite.getSize()),i=n.xMax-n.xMin,n=(n=this.sprite.getSize()).yMax-n.yMin;0<i&&(this._model.set_width(i),this._model.set_height(n)),this._stage=r0.getInstance(),null!=this._interactive&&null!=this._interactive&&(this._interactive.onClick=Cn(this,this.onClick),this._interactive.onPush=Cn(this,this.onDown),this._interactive.onRelease=Cn(this,this.onUp),this._interactive.onOver=Cn(this,this.onOver),this._interactive.onOut=Cn(this,this.onOut),this._interactive.onMove=Cn(this,this.onMove),this.owner.getFromRootByName(Ce.BASE_NAME,Ce).addHandler(Be.UP,Cn(this,this.onStageUp)),((t=null!=(e=this.owner._compMap)?e.h[Ce.BASE_NAME]:null)instanceof Ce?t:null).addHandler(Be.UP,Cn(this,this.onStageUp))),this._model.set_x(this.sprite.x),this._model.set_y(this.sprite.y),this._model.set_xScale(this.sprite.scaleX),this._model.set_yScale(this.sprite.scaleY),this._model.set_visible(this.sprite.visible)},update:function(e){var t,n;null!=this._model&&(this._model.dirty?((n=this.sprite).posChanged=!0,n.x=this._model.x+this._model.offsetX,(n=this.sprite).posChanged=!0,n.y=this._model.y+this._model.offsetY,this.sprite.alpha=this._model.alpha,n=this.sprite,t=this._model.get_xScale(),n.posChanged=!0,n.scaleX=t,n=this.sprite,t=this._model.get_yScale(),n.posChanged=!0,n.scaleY=t,this.sprite.set_visible(this._model.get_visible()),null!=this._interactive&&this._resizeInteractive&&(n=this.sprite.getBounds(),this._interactive.width=n.xMax-n.xMin,this._interactive.height=n.yMax-n.yMin)):(this._model.set_x(this.sprite.x-this._model.offsetX),this._model.set_y(this.sprite.y-this._model.offsetY),this._model.set_xScale(this.sprite.scaleX),this._model.set_yScale(this.sprite.scaleY),this._model.set_visible(this.sprite.visible)),this._model.stageMouseX=this._stage.get_mouseX(),this._model.stageMouseY=this._stage.get_mouseY(),this._model.dirty=!1),d.prototype.update.call(this,e)},dispose:function(){null!=this._interactive&&(this._interactive.onClick=null,this._interactive.onPush=null,this._interactive.onRelease=null,this._interactive.onOver=null,this._interactive.onOut=null,this._interactive.onMove=null,this.owner.getFromRootByName(Ce.BASE_NAME,Ce).removeHandler(Be.UP,Cn(this,this.onStageUp)),null!=this._model)&&this._model.removeHandler(Be.MOVE,Cn(this,this.onDrag)),null!=this._model&&(null!=this.owner&&this.owner.remove(this),this._model=null),null!=this.sprite.parent&&this.sprite.parent.removeChild(this.sprite),this.stopDrag(),this.sprite.removeChildren()},onClick:function(e){this._model.triggerEvent(Be.PRESS,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onDown:function(e){this._model.triggerEvent(Be.DOWN,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner),this.startDrag()},onUp:function(e){this._model.triggerEvent(Be.UP,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner),this.stopDrag()},onStageUp:function(e){this.stopDrag()},onOver:function(e){this._model.triggerEvent(Be.OVER,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onOut:function(e){this._model.triggerEvent(Be.OUT,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onMove:function(e){var t=this.sprite,n=this._stage.get_mouseX(),i=this._stage.get_mouseY(),t=t.globalToLocal(new St(n=null==n?0:n,i=null==i?0:i));this._model.mouseX=t.x,this._model.mouseY=t.y,this._model.stageMouseX=this._stage.get_mouseX(),this._model.stageMouseY=this._stage.get_mouseY(),this._model.triggerEvent(Be.MOVE,{x:this._stage.get_mouseX(),y:this._stage.get_mouseY()},this.owner)},onDrag:function(e){this._model.triggerEvent(Be.DRAG,{x:this._appModel.stageMouseX,y:this._appModel.stageMouseY},this.owner)},stopDrag:function(){null!=this._model&&this._model.removeHandler(Be.MOVE,Cn(this,this.onDrag))},startDrag:function(){this._model.addHandler(Be.MOVE,Cn(this,this.onDrag))},get_baseName:function(){return"gasm.heaps.components.HeapsSpriteComponent"},__class__:qe}),function(e,t,n,i,s,a){this.instance=null,this.entity=null,this.interactive=!1,this.layerIndex=null,this.is3D=!1,this.name=e,null!=t&&(this.is3D=t),null!=n&&(this.layerIndex=n),null!=i&&(this.interactive=i),null!=s&&(this.entity=s),null!=a&&(this.instance=a)}),Je=((i["gasm.heaps.components.SceneLayer"]=Ke).__name__="gasm.heaps.components.SceneLayer",Ke.prototype={__class__:Ke},(i["gasm.heaps.components.actor.render.PostProcessingChainComponent"]=P).__name__="gasm.heaps.components.actor.render.PostProcessingChainComponent",P.__super__=d,P.prototype=e(d.prototype,{init:function(){var e=this.owner._compMap,e=null!=e?e.h[$e.BASE_NAME]:null;this._processor=e instanceof $e?e:null,this.chainId=this.setupChain()},onEnabled:function(){},onDisabled:function(){},dispose:function(){null!=this._processor&&this._processor.destroyChain(this.chainId)},setupChain:function(){throw tl.thrown("PostProcessingChainComponent.setupChain() override in subclass")},get_baseName:function(){return"gasm.heaps.components.actor.render.PostProcessingChainComponent"},__class__:P}),(i["haxe.IMap"]=z).__name__="haxe.IMap",z.__isInterface__=!0,z.prototype={__class__:z},function(){this.h={}}),$e=((i["haxe.ds.IntMap"]=Je).__name__="haxe.ds.IntMap",Je.__interfaces__=[z],Je.prototype={set:function(e,t){this.h[e]=t},get:function(e){return this.h[e]},exists:function(e){return this.h.hasOwnProperty(e)},remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e,t=[];for(e in this.h)this.h.hasOwnProperty(e)&&t.push(+e);return new JA(t)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:Je},function(e){if(this._dt=0,this._defaultChain=null,this._baseTexture=null,this._lastUpdatedChainComponent=null,this._activeChainComponent=null,d.call(this),this._config=e,this.componentType=Ie.Actor,null!=this._config.defaultChain){for(var t=[],n=0,i=this._config.defaultChain;n<i.length;)t.push(this.createPass(i[n++]));this._defaultChain=this.createChain(t)}else this._defaultChain=this.createDefaultChain()}),ut=((i["gasm.heaps.components.actor.render.PostProcessingComponent"]=$e).__name__="gasm.heaps.components.actor.render.PostProcessingComponent",$e.__super__=d,$e.prototype=e(d.prototype,{update:function(e){if(this._dt=e,null!=this._baseTexture){e=this.owner._compMap,e=null!=e?e.h[He.BASE_NAME]:null,e=e instanceof He?e:null;if(null!=e)for(var t=e.scene3d.getMaterials(),n=0;n<t.length;){var i=t[n];++n,1==i.blendMode._hx_index&&(i.passes.set_blendSrc(eo.SrcAlpha),i.passes.set_blendDst(eo.OneMinusSrcAlpha),i.passes.set_blendAlphaSrc(eo.OneMinusDstAlpha),i.passes.set_blendAlphaDst(eo.One))}}},createPass:function(e){e=new ct(e);return $e._passes.h[$e._id]=e,$e._id++},createChain:function(e){return $e._chains.h[$e._id]=e,$e._id++},destroyChain:function(e){var t=$e._chains.h[e];if(null!=t){$e._chains.remove(e);for(var n=0;n<t.length;){var i=t[n];++n,$e._passes.h[i].dispose(),$e._passes.remove(i)}}},render:function(e){for(var t=Vr.CURRENT,n=t.width,i=t.height,s=(null==this._baseTexture?(this._baseTexture=new _o(n,i,[ro.Target]),this._baseTexture.depthBuffer=new _o(n,i,null,C.Depth24Stencil8)):this._baseTexture.width==n&&this._baseTexture.height==i||(this._baseTexture.depthBuffer.dispose(),this._baseTexture.dispose(),this._baseTexture=new _o(n,i,[ro.Target]),this._baseTexture.depthBuffer=new _o(n,i,null,C.Depth24Stencil8)),this.updateAndGetChain(t,this._dt)),a=(t.pushTarget(this._baseTexture),t.clear(0,1,0),e(t),t.popTarget(),0),l=s.length;a<l;){var r=a++,o=$e._passes.h[s[r]],r=r==s.length-1;0==r&&(1<o.targets.length?t.pushTargets(o.targets):t.pushTarget(o.targets[0]),t.clear(0)),o.pass.render(),0==r&&t.popTarget()}},resetChain:function(e){for(var t=$e._chains.h[e],n=0;n<t.length;)$e._passes.h[t[n++]].reset()},updateAndGetChain:function(t,n){var r=this,e=this.owner._compMap,e=null!=e?e.h[P.BASE_NAME]:null,i=e instanceof P?e:null;(i=null==i||i.inited?i:this._activeChainComponent)!=this._activeChainComponent&&(null!=i&&(this.resetChain(i.chainId),i.onEnabled()),null!=this._activeChainComponent)&&this._activeChainComponent.onDisabled(),this._activeChainComponent=i;for(var i=null!=(e=this._activeChainComponent)&&r._lastUpdatedChainComponent==e&&$e._chains.h.hasOwnProperty(e.chainId)?this._activeChainComponent.chainId:this._defaultChain,o=$e._chains.h[i],s=(this._lastUpdatedChainComponent=this._activeChainComponent,new Array(o.length)),a=0,l=o.length;a<l;)s[h=a++]=$e._passes.h[o[h]];il.each(s,function(e){e.update(t,n)});for(var u=new Array(s.length),a=0,l=s.length;a<l;){var h,c=s[h=a++];u[h]={textureInput:c.config.textureInput,shader:c.shader}}return il.eachi(u,function(e,t){for(var n=e.textureInput,i=n.keys();i.hasNext();){var s,a=i.next(),l=n.get(a);switch(l._hx_index){case 0:s=r._baseTexture;break;case 1:s=0==t?r._baseTexture:$e._passes.h[o[t-1]].targets[l.renderTarget];break;case 2:s=$e._passes.h[l.passId].targets[l.renderTarget];break;case 3:s=r.getNoiseTexture(l.size);break;case 4:s=l.t}switch(a._hx_index){case 0:e.shader.colorMap__=s;break;case 1:e.shader.colorMap2__=s;break;case 2:e.shader.normalMap__=s;break;case 3:e.shader.depthMap__=s;break;case 4:e.shader.noiseMap__=s}}}),o},createDefaultChain:function(){var e=new At,t=new PA;return t.set(ht.COLOR,ut.Base),this.createChain([this.createPass(new _t(e,t,null,null,null,null,null))])},getNoiseTexture:function(e){var t;return $e._noiseTextures.h.hasOwnProperty(e)?$e._noiseTextures.h[e]:((t=_o.genNoise(e)).set_wrap(ao.Repeat),$e._noiseTextures.h[e]=t)},get_baseName:function(){return"gasm.heaps.components.actor.render.PostProcessingComponent"},__class__:$e}),fe["gasm.heaps.components.actor.render.TextureSource"]={__ename__:!0,__constructs__:null,Base:{_hx_name:"Base",_hx_index:0,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:o},LastPass:((R=function(e){return{_hx_index:1,renderTarget:e,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:o}})._hx_name="LastPass",R.__params__=["renderTarget"],R),FromPass:((R=function(e,t){return{_hx_index:2,passId:e,renderTarget:t,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:o}})._hx_name="FromPass",R.__params__=["passId","renderTarget"],R),Noise:((R=function(e){return{_hx_index:3,size:e,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:o}})._hx_name="Noise",R.__params__=["size"],R),External:((R=function(e){return{_hx_index:4,t:e,__enum__:"gasm.heaps.components.actor.render.TextureSource",toString:o}})._hx_name="External",R.__params__=["t"],R)}),ht=(ut.__constructs__=[ut.Base,ut.LastPass,ut.FromPass,ut.Noise,ut.External],ut.__empty_constructs__=[ut.Base],fe["gasm.heaps.components.actor.render.TextureInput"]={__ename__:!0,__constructs__:null,COLOR:{_hx_name:"COLOR",_hx_index:0,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:o},COLOR2:{_hx_name:"COLOR2",_hx_index:1,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:o},NORMAL:{_hx_name:"NORMAL",_hx_index:2,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:o},DEPTH:{_hx_name:"DEPTH",_hx_index:3,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:o},NOISE:{_hx_name:"NOISE",_hx_index:4,__enum__:"gasm.heaps.components.actor.render.TextureInput",toString:o}}),ct=(ht.__constructs__=[ht.COLOR,ht.COLOR2,ht.NORMAL,ht.DEPTH,ht.NOISE],ht.__empty_constructs__=[ht.COLOR,ht.COLOR2,ht.NORMAL,ht.DEPTH,ht.NOISE],function(e){this.targets=[],this.config=e,this.pass=new mo(e.shader),this.pass.pass.setBlendMode(e.blendMode),this.shader=e.shader;for(var t=0,n=e.targets;t<n;)++t,this.targets.push(null);this.reset()}),_t=((i["gasm.heaps.components.actor.render.PostProcessingPass"]=ct).__name__="gasm.heaps.components.actor.render.PostProcessingPass",ct.prototype={reset:function(){this.shader.time__=0},dispose:function(){null!=this.pass&&this.pass.dispose()},update:function(e,t){for(var n=e.width*this.config.scaleX|0,i=e.height*this.config.scaleY|0,s=(this.shader.time__+=t*this.config.speed,this.shader.resolution__.x=e.width,this.shader.resolution__.y=e.height,0),a=this.config.targets;s<a;){var l=s++;null==this.targets[l]?this.targets[l]=new _o(n,i,[ro.Target]):this.targets[l].width==n&&this.targets[l].height==i||this.targets[l].resize(n,i)}},__class__:ct},function(e,t,n,i,s,a,l){this.speed=1,this.scaleY=1,this.scaleX=1,this.targets=1,this.blendMode=wr.AlphaAdd,this.shader=e,this.textureInput=t,null!=n&&(this.blendMode=n),null!=i&&(this.targets=i),null!=s&&(this.scaleX=s),null!=a&&(this.scaleY=a),null!=l&&(this.speed=l)}),dt=((i["gasm.heaps.components.actor.render.PostProcessingPassConfig"]=_t).__name__="gasm.heaps.components.actor.render.PostProcessingPassConfig",_t.prototype={__class__:_t},function(e){(this.defaultChain=null)!=e&&(this.defaultChain=e)}),pt=((i["gasm.heaps.components.actor.render.PostProcessingComponentConfig"]=dt).__name__="gasm.heaps.components.actor.render.PostProcessingComponentConfig",dt.prototype={__class__:dt},(i["gasm.heaps.data.Atlas"]=Q).__name__="gasm.heaps.data.Atlas",Q.prototype={__class__:Q},function(e){this._fileSystem=e}),mt=((i["gasm.heaps.data.AtlasParser"]=pt).__name__="gasm.heaps.data.AtlasParser",pt.getValue=function(e,t){e=il.extract(e,function(e){return 0==e.indexOf(t)});return null==e?null:Ae.trim(e.substring(e.indexOf(":")+1))},pt.prototype={parse:function(l,e,r,o){var u=this;if(Object.prototype.hasOwnProperty.call(pt._parsers.h,l))r(null,null,null);else{for(var h=this.parseHeader(e.toString()),c=this.parseAtlasItems(h),t=new Array(c.length),n=0,i=c.length;n<i;){var s=n++;t[s]="atlas/"+c[s].header.file}e=il.distinct(t);(pt._parsers.h[l]=this).createTextures(e).handle(function(e){for(var t=new Array(e.length),n=0,i=e.length;n<i;){var s=n++;t[s]=Ir.fromTexture(e[s])}var a=o?u.createAssetsMultiAtlas(l,t,h,c):u.createAssetsAtlas(l,t,h,c);r(l,a,o)})}},createScale9Tile:function(e,t){var n,i,s,a,l,r,o,u,h;return null==e.split?null:(n=e.xy[0],i=e.xy[1],s=e.split[0],a=e.split[1],l=e.size[0]-(s+a),r=e.split[2],o=e.split[3],u=e.size[1]-(r+o),h=e.offset[0],e=e.offset[1],{tl:t.sub(n,i,s,r,h,e),tm:t.sub(n+s,i,l,r,h,e),tr:t.sub(n+s+l,i,a,r,h,e),ml:t.sub(n,i+r,s,u,h,e),mm:t.sub(n+s,i+r,l,u,h,e),mr:t.sub(n+s+l,i+r,a,u,h,e),bl:t.sub(n,i+r+u,s,o,h,e),bm:t.sub(n+s,i+r+u,l,o,h,e),br:t.sub(n+s+l,i+r+u,a,o,h,e)})},itemToContents:function(e,t){var n=e.xy[0],i=e.xy[1],s=e.size[0],a=e.size[1],l=e.orig[0],r=e.orig[1],o=e.offset[0],u=r-(a+e.offset[1]),e=this.createScale9Tile(e,t);return{width:l,height:r,t:t.sub(n,i,s,a,o,u),scale9:e}},getAtlasName:function(e){e=e.split("/");return e[e.length-1].split(".")[0]},getAtlasContents:function(e,i){var s=this;return il.reduce(e,function(e,t){var n=t.group+(-1==t.index?"":"_"+t.index),t=[s.itemToContents(t,i)];return e.h[n]=t,e},new at)},createAssetsAtlas:function(e,t,n,i,s){null==s&&(s=1);i=this.getAtlasContents(i,t[0]),t=new Q(t[0],null,i,this.createAnimation(i),s),i=new at,s=this.getAtlasName(e);return i.h[s]=t,i},findTile:function(e,t){return il.find(e,function(e){e=e.innerTex.name.split("/");return Ae.startsWith(e[e.length-1],t)})},getMultiAtlasContents:function(e,i){var s=this;return il.reduce(e,function(e,t){var n=t.group+(-1==t.index?"":"_"+t.index),t=[s.itemToContents(t,s.findTile(i,t.header.file))];return e.h[n]=t,e},new at)},createAssetsMultiAtlas:function(e,t,n,i,s){null==s&&(s=1);for(var a=new Array(i.length),l=0,r=i.length;l<r;){var o=l++;a[o]=i[o].group}il.distinct(a);var u=this.getMultiAtlasContents(i,t),t=new Q(null,t,u,this.createAnimation(u),s),l=new at,u=this.getAtlasName(e);return l.h[u]=t,l},getFramesFromAtlasContents:function(e){return zy.reduce(e,function(e,t){for(var n=il.filterNull(t._1),i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++;i[l]=n[l].t}return e=e.concat(i)},[])},getMaxSizeFromAtlasContents:function(e){return zy.reduce(e,function(e,t){for(var n=il.filterNull(t._1),i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++,r=n[l];i[l]={w:r.width,h:r.height}}return e.w=Math.max(e.w,il.reduce(i,function(e,t){return Math.max(e,t.w)},0)),e.h=Math.max(e.h,il.reduce(i,function(e,t){return Math.max(e,t.h)},0)),e},{w:0,h:0})},createAnimation:function(e){var t=this.getFramesFromAtlasContents(e),e=this.getMaxSizeFromAtlasContents(e);return{width:0|e.w,height:0|e.h,frames:t}},createTextures:function(e){for(var t=[],n=0;n<e.length;)t.push(this.createTexture(e[n++]));return rt.inSequence(t)},findAssetPath:function(e){for(var t=Jn.substr(e,0,e.lastIndexOf(".")),n=pt._exts,i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++,r=""+t+n[l];i[l]=this._fileSystem.exists(r)?r:null}return il.filterNull(i)[0]},createTexture:function(i){var t=this.findAssetPath(i),e=this._fileSystem.get(t).getBytes(),n=t.split(".").pop();if(null==n)try{var s=M0.fromBytes(i,e).toTexture();return s.realloc=null,rt.irreversible(function(e){e(s)})}catch(e){CA.lastError=e;var a=tl.caught(e).unwrap();throw new tl("Unable to decode image "+i+"->"+t+". "+el.string(a))}else{if("ktx2"==n)return rt.irreversible(function(n){R0.getTexture(new HA(e),function(e,t){e.setName(i),n(e)})});try{var l=M0.fromBytes(i,e).toTexture();return l.realloc=null,rt.irreversible(function(e){e(l)})}catch(e){CA.lastError=e;a=tl.caught(e).unwrap();throw new tl("Unable to decode image "+i+"->"+t+". "+el.string(a))}}},getGroupsFromAtlasItems:function(e){for(var t=il.reduce(e,function(e,t){return 0==t.indexOf(" ")?e[e.length-1]+="\n"+Ae.trim(t):e.push(Ae.trim(t)),e},[]),n=[],i=0;i<t.length;){var s=t[i];++i,null!=s&&0<s.length&&n.push(s)}return n},parseHeader:function(e){for(var t=e.split("\n\n"),n=new Array(t.length),i=0,s=t.length;i<s;){for(var a=i++,l=t[a].split("\n"),r=Ae.trim(l.shift()),o=pt.getValue(l,"size").split(","),u=new Array(o.length),h=0,c=o.length;h<c;){var _=h++;u[_]=el.parseInt(o[_])}for(var d=Ae.trim(pt.getValue(l,"format")),p=pt.getValue(l,"filter").split(","),m=new Array(p.length),g=0,f=p.length;g<f;){var A=g++;m[A]=Ae.trim(p[A])}var x=Ae.trim(pt.getValue(l,"repeat")),l=this.getGroupsFromAtlasItems(l);n[a]={header:{file:r,size:u,format:d,filter:m,repeat:x},groups:l}}return n},parseGroup:function(e,t){for(var n=e.split("\n"),i=new Array(n.length),s=0,a=n.length;s<a;)i[d=s++]=Ae.trim(n[d]);for(var e=il.filterNull(i),l=Ae.trim(e.shift()).split("/"),r="true"==Ae.trim(pt.getValue(e,"rotate")),n=pt.getValue(e,"xy").split(","),i=new Array(n.length),s=0,a=n.length;s<a;)i[d=s++]=el.parseInt(n[d]);for(var n=pt.getValue(e,"size").split(","),o=new Array(n.length),s=0,a=n.length;s<a;)o[d=s++]=el.parseInt(n[d]);for(var n=pt.getValue(e,"orig").split(","),u=new Array(n.length),s=0,a=n.length;s<a;)u[d=s++]=el.parseInt(n[d]);for(var n=pt.getValue(e,"offset").split(","),h=new Array(n.length),s=0,a=n.length;s<a;)h[d=s++]=el.parseInt(n[d]);var c,_=pt.getValue(e,"split");if(null!=_){for(var d,n=_.split(","),p=new Array(n.length),s=0,a=n.length;s<a;)p[d=s++]=el.parseInt(n[d]);c=p}else c=null;_=el.parseInt(pt.getValue(e,"index"));return{group:l[0],name:l[1],rotate:r,xy:i,size:o,orig:u,offset:h,split:c,index:_,header:t}},parseAtlasItems:function(e){var o=this;return il.reduce(e,function(e,t){for(var n=t.header,i=t.groups,s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=o.parseGroup(i[r],n)}return e.concat(s)},[])},__class__:pt},function(e){this.skeletonData=e}),gt=((i["gasm.heaps.data.Spine"]=mt).__name__="gasm.heaps.data.Spine",mt.prototype={__class__:mt},(i["hxd.fs.FileSystem"]=V).__name__="hxd.fs.FileSystem",V.__isInterface__=!0,V.prototype={__class__:V},function(){this.paths=new at}),ft=((i["gasm.heaps.fs.VirtualFileSystem"]=gt).__name__="gasm.heaps.fs.VirtualFileSystem",gt.__interfaces__=[V],gt.prototype={add:function(e,t){var n=this.paths,t=new A0(e,t);n.h[e]=t},delete:function(e){var t=this.paths;return!!Object.prototype.hasOwnProperty.call(t.h,e)&&(delete t.h[e],!0)},exists:function(e){return Object.prototype.hasOwnProperty.call(this.paths.h,e)},get:function(e){var t=this.paths.h[e];if(null==t)throw tl.thrown(new v0(e));return t},__class__:gt},(i["hxsl.Shader"]=O).__name__="hxsl.Shader",O.prototype={initialize:function(){if(this.constModified=!0,null==this.shader){var e=nl.getClass(this);if(this.shader=e._SHADER,null==this.shader){for(var t=e;null!=t&&null==t.SRC;)t=t.__super__;if(null==t)throw tl.thrown(e.__name__+" has no shader source");this.shader=t._SHADER,null==this.shader&&(this.shader=new Sw(t.SRC,t._MODULE),t._SHADER=this.shader)}}},setPriority:function(e){this.priority=e},getParamValue:function(e){throw tl.thrown("assert")},getParamFloatValue:function(e){throw tl.thrown("assert")},updateConstants:function(e){throw tl.thrown("assert")},updateConstantsFinal:function(e){for(var t=this.shader.consts;null!=t;){if(0==t.globalId);else{var n=e.map.h[t.globalId],i=t.v.type;switch(i._hx_index){case 1:var s=n;if(s>>>t.bits!=0)throw tl.thrown("Constant "+t.v.name+" is outside range ("+s+" > "+((1<<t.bits)-1)+")");this.constBits|=s<<t.pos;break;case 2:n&&(this.constBits|=1<<t.pos);break;case 17:if(null==n){t=t.next;continue}var a=n,l=a.channel;if(null==a.texture)l=rw.Unknown;else if(null==l||l==rw.Unknown)switch(i.size){case 1:if(a.texture.format!=_o.nativeFormat)throw tl.thrown("Constant "+t.v.name+" does not define channel select value");l=rw.PackedFloat;break;case 3:if(a.texture.format!=_o.nativeFormat)throw tl.thrown("Constant "+t.v.name+" does not define channel select value");l=rw.PackedNormal;break;default:throw tl.thrown("Constant "+t.v.name+" does not define channel select value")}this.constBits|=(e.allocChannelID(a.texture)<<3|l._hx_index)<<t.pos;break;default:throw tl.thrown("assert")}}t=t.next}var r=this.shader,o=this.constBits,u=r.instanceCache.h[o];this.instance=null==u?r.makeInstance(o):u},toString:function(){return nl.getClass(this).__name__},__class__:O},function(e){this.alpha__=0,O.call(this),this.alpha__=e}),At=((i["gasm.heaps.shaders.Alpha"]=ft).__name__="gasm.heaps.shaders.Alpha",ft._SHADER=null,ft.__super__=O,ft.prototype=e(O.prototype,{get_alpha:function(){return this.alpha__},set_alpha:function(e){return this.alpha__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.alpha__:null},getParamFloatValue:function(e){return 0==e?this.alpha__:0},__class__:ft,__properties__:{set_alpha:"set_alpha",get_alpha:"get_alpha"}}),(i["h3d.shader.ScreenShader"]=W).__name__="h3d.shader.ScreenShader",W._SHADER=null,W.__super__=O,W.prototype=e(O.prototype,{get_flipY:function(){return this.flipY__},set_flipY:function(e){return this.flipY__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.flipY__:null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:W,__properties__:{set_flipY:"set_flipY",get_flipY:"get_flipY"}}),(i["gasm.heaps.shaders.PostMultiplyAlphaScreen"]=N).__name__="gasm.heaps.shaders.PostMultiplyAlphaScreen",N._SHADER=null,N.__super__=W,N.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:N,__properties__:e(W.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),function(){this.time__=0,this.resolution__=new Gr(0,0,0),W.call(this)}),xt=((i["gasm.heaps.shaders.PostProcessingShaderBase"]=At).__name__="gasm.heaps.shaders.PostProcessingShaderBase",At._SHADER=null,At.__super__=W,At.prototype=e(W.prototype,{get_colorMap:function(){return this.colorMap__},set_colorMap:function(e){return this.colorMap__=e},get_colorMap2:function(){return this.colorMap2__},set_colorMap2:function(e){return this.colorMap2__=e},get_normalMap:function(){return this.normalMap__},set_normalMap:function(e){return this.normalMap__=e},get_depthMap:function(){return this.depthMap__},set_depthMap:function(e){return this.depthMap__=e},get_noiseMap:function(){return this.noiseMap__},set_noiseMap:function(e){return this.noiseMap__=e},get_resolution:function(){return this.resolution__},set_resolution:function(e){return this.resolution__=e},get_time:function(){return this.time__},set_time:function(e){return this.time__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.colorMap__;case 2:return this.colorMap2__;case 3:return this.normalMap__;case 4:return this.depthMap__;case 5:return this.noiseMap__;case 6:return this.resolution__;case 7:return this.time__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 7:return this.time__}return 0},__class__:At,__properties__:e(W.prototype.__properties__,{set_time:"set_time",get_time:"get_time",set_resolution:"set_resolution",get_resolution:"get_resolution",set_noiseMap:"set_noiseMap",get_noiseMap:"get_noiseMap",set_depthMap:"set_depthMap",get_depthMap:"get_depthMap",set_normalMap:"set_normalMap",get_normalMap:"get_normalMap",set_colorMap2:"set_colorMap2",get_colorMap2:"get_colorMap2",set_colorMap:"set_colorMap",get_colorMap:"get_colorMap"})}),function(){W.call(this)}),wt=((i["gasm.heaps.shaders.TextureShader"]=xt).__name__="gasm.heaps.shaders.TextureShader",xt._SHADER=null,xt.__super__=W,xt.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:xt,__properties__:e(W.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),(i["gasm.heaps.shaders.TweenShader"]=G).__name__="gasm.heaps.shaders.TweenShader",G._SHADER=null,G.__super__=O,G.prototype=e(O.prototype,{tween:function(e){for(var t=[],n=0;n<e.length;)t.push(Tt.tween(this._tweenVector,e[n++]));return rt.inParallel(t)},update:function(e){this.time__+=e,Tt.update(this._tweenVector,e),this.set_x(this._tweenVector.x),this.set_y(this._tweenVector.y),this.set_z(this._tweenVector.z),this.set_w(this._tweenVector.w)},set_x:function(e){return null},set_y:function(e){return null},set_z:function(e){return null},set_w:function(e){return null},get_time:function(){return this.time__},set_time:function(e){return this.time__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.time__:null},getParamFloatValue:function(e){return 0==e?this.time__:0},__class__:G,__properties__:{set_time:"set_time",get_time:"get_time",set_w:"set_w",set_z:"set_z",set_y:"set_y",set_x:"set_x"}}),(i["spine.support.utils.JsonValue"]=H).__name__="spine.support.utils.JsonValue",H.__isInterface__=!0,H.prototype={__class__:H,__properties__:{get_child:"get_child",get_next:"get_next",get_size:"get_size",get_name:"get_name"}},(i["spine.support.utils.JsonDynamic"]=Y).__name__="spine.support.utils.JsonDynamic",Y.__interfaces__=[H],Y.prototype={has:function(e){return null!=this.get(e)},require:function(e){return this.get(e)},get:function(e){return!(this.data instanceof Array)&&Object.prototype.hasOwnProperty.call(this.data,e)?new Y(X.field(this.data,e)):null},getAtIndex:function(e){return this.data instanceof Array?new my(this.data,e):null},getChild:function(e){e=X.field(this.data,e);return null==e?null:new Y(e).get_child()},getString:function(e,t){return Object.prototype.hasOwnProperty.call(this.data,e)?X.field(this.data,e):t},getFloat:function(e,t){return null==t&&(t=0),"number"==typeof e&&(0|e)===e?this.data instanceof Array?this.data[e]:t:Object.prototype.hasOwnProperty.call(this.data,e)?X.field(this.data,e):t},getInt:function(e,t){return null==t&&(t=0),Object.prototype.hasOwnProperty.call(this.data,e)?X.field(this.data,e):t},getBoolean:function(e,t){return null==t&&(t=!1),Object.prototype.hasOwnProperty.call(this.data,e)?X.field(this.data,e):t},asString:function(){return this.data},asFloatArray:function(){return this.data},asShortArray:function(){return this.data},asFloat:function(){return this.data},asInt:function(){return this.data},isString:function(){return"string"==typeof this.data},get_next:function(){return null},get_name:function(){return null},get_size:function(){return(this.data instanceof Array?this.data:X.fields(this.data)).length},get_child:function(){var e=this.data;if(null==e)return null;if(e instanceof Array)return new my(e,0);for(var t=[],n=[],i=0,s=X.fields(e);i<s.length;){var a=s[i];++i,t.push(a),n.push(X.field(e,a))}return 0==t.length?null:new my(n,0,t)},__class__:Y,__properties__:{get_child:"get_child",get_size:"get_size",get_name:"get_name",get_next:"get_next"}},function(e){Y.call(this,JSON.parse(e))}),yt=((i["gasm.heaps.spine.SpineConfigHandle"]=wt).__name__="gasm.heaps.spine.SpineConfigHandle",wt.__super__=Y,wt.prototype=e(Y.prototype,{__class__:wt}),(i["spine.support.graphics.TextureLoader"]=Z).__name__="spine.support.graphics.TextureLoader",Z.__isInterface__=!0,Z.prototype={__class__:Z},function(e){this.tile=e}),bt=((i["gasm.heaps.spine.SpineTextureLoader"]=yt).__name__="gasm.heaps.spine.SpineTextureLoader",yt.__interfaces__=[Z],yt.prototype={loadPage:function(e,t){e.rendererObject=this.tile,e.width=0|this.tile.width,e.height=0|this.tile.height},loadRegion:function(e){},__class__:yt},function(e){c.call(this),this.root=e,this.type=Te.CORE,this.componentFlags|=4}),vt=((i["gasm.heaps.systems.HeapsCoreSystem"]=bt).__name__="gasm.heaps.systems.HeapsCoreSystem",bt.__interfaces__=[h],bt.__super__=c,bt.prototype=e(c.prototype,{update:function(e,t){e.inited||(e.init(),e.inited=!0),e.update(t)},__class__:bt}),function(e){c.call(this),this.root=e,this.type=Te.RENDERING,this.componentFlags=512|(this.componentFlags|=256),this.componentFlags|=1024}),Ct=((i["gasm.heaps.systems.HeapsRenderingSystem"]=vt).__name__="gasm.heaps.systems.HeapsRenderingSystem",vt.__interfaces__=[h],vt.__super__=c,vt.prototype=e(c.prototype,{update:function(e,t){if(e.inited)e.update(t);else{switch(e.componentType._hx_index){case 9:e.owner.getFromParentsByName(D.BASE_NAME,D);var n=e;null!=e.owner.parent&&(null==(i=e.owner.parent.getFromParentsByName(B.BASE_NAME,B))?n.root=!0:i.object.addChild(n.object.object));break;case 8:case 10:e.owner.getFromParentsByName(D.BASE_NAME,D);var i=e;null!=e.owner.parent&&(null==(n=e.owner.parent.getFromParentsByName(qe.BASE_NAME,qe))?i.root=!0:n.sprite.addChild(i.sprite))}switch(e.inited=!0,e.init(),e.componentType._hx_index){case 8:case 10:var s=e.owner._compMap,s=null!=s?s.h[Ce.BASE_NAME]:null,s=s instanceof Ce?s:null,a=nl.__cast(e,qe).sprite.getSize();s.origWidth=a.xMax-a.xMin,s.origHeight=a.yMax-a.yMin}e.update(t),e.onAdded()}},__class__:vt}),function(){c.call(this),this.type=Te.SOUND,this.componentFlags|=2048}),St=((i["gasm.heaps.systems.HeapsSoundSystem"]=Ct).__name__="gasm.heaps.systems.HeapsSoundSystem",Ct.__interfaces__=[h],Ct.__super__=c,Ct.prototype=e(c.prototype,{update:function(e,t){e.inited||(e.init(),e.inited=!0),e.update(t)},__class__:Ct}),function(e,t){null==t&&(t=0),this.x=e=null==e?0:e,this.y=t}),kt=((i["h2d.col.PointImpl"]=St).__name__="h2d.col.PointImpl",St.prototype={__class__:St},function(e){this.blendMode=wr.Alpha,this.alpha=1,this.visible=!0,this.rotation=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,this.matA=1,this.matB=0,this.matC=0,this.matD=1,this.absX=0,this.absY=0,this.posChanged=null!=e,this.children=[],null!=e&&e.addChild(this)}),Mt=((i["h2d.Object"]=kt).__name__="h2d.Object",kt.nullDrawable=null,kt.prototype={getBounds:function(e,t){return null==t?t=new Tr:(t.xMin=1e20,t.yMin=1e20,t.xMax=-1e20,t.yMax=-1e20),null!=e&&e.syncPos(),e!=this&&this.syncPos(),this.getBoundsRec(e,t,!1),(t.xMax<=t.xMin||t.yMax<=t.yMin)&&(this.addBounds(e,t,-1,-1,2,2),t.xMax=t.xMin=.5*(t.xMax+t.xMin),t.yMax=t.yMin=.5*(t.yMax+t.yMin)),t},getSize:function(e){null==e?e=new Tr:(e.xMin=1e20,e.yMin=1e20,e.xMax=-1e20,e.yMax=-1e20),this.syncPos(),this.getBoundsRec(this.parent,e,!0),(e.xMax<=e.xMin||e.yMax<=e.yMin)&&(this.addBounds(this.parent,e,-1,-1,2,2),e.xMax=e.xMin=.5*(e.xMax+e.xMin),e.yMax=e.yMin=.5*(e.yMax+e.yMin));var t=-this.x,n=-this.y;return e.xMin+=t,e.xMax+=t,e.yMin+=n,e.yMax+=n,e},set_filter:function(e){return null!=this.filter&&this.allocated&&this.filter.unbind(this),null!=(this.filter=e)&&this.allocated&&e.bind(this),e},getBoundsRec:function(e,t,n){if(this.posChanged){this.calcAbsPos();for(var i=0,s=this.children;i<s.length;)s[i++].posChanged=!0;this.posChanged=!1}var a=this.children.length;if(0==a)t.xMin=1e20,t.yMin=1e20,t.xMax=-1e20,t.yMax=-1e20;else if(1==a)(h=this.children[0]).visible?h.getBoundsRec(e,t,n):(t.xMin=1e20,t.yMin=1e20,t.xMax=-1e20,t.yMax=-1e20);else{for(var l=1/0,r=1/0,o=-1/0,u=-1/0,i=0,s=this.children;i<s.length;){var h=s[i];++i,h.visible&&(h.getBoundsRec(e,t,n),t.xMin<l&&(l=t.xMin),t.yMin<r&&(r=t.yMin),o<t.xMax&&(o=t.xMax),u<t.yMax)&&(u=t.yMax)}t.xMin=l,t.yMin=r,t.xMax=o,t.yMax=u}},addBounds:function(e,t,n,i,s,a){var l,r,o,u,h,c,_,d,p;s<=0||a<=0||(null==e?(c=n*this.matA+i*this.matC+this.absX,_=n*this.matB+i*this.matD+this.absY,c<t.xMin&&(t.xMin=c),t.xMax<c&&(t.xMax=c),_<t.yMin&&(t.yMin=_),t.yMax<_&&(t.yMax=_),c=(n+s)*this.matA+i*this.matC+this.absX,_=(n+s)*this.matB+i*this.matD+this.absY,c<t.xMin&&(t.xMin=c),t.xMax<c&&(t.xMax=c),_<t.yMin&&(t.yMin=_),t.yMax<_&&(t.yMax=_),c=n*this.matA+(i+a)*this.matC+this.absX,_=n*this.matB+(i+a)*this.matD+this.absY,c<t.xMin&&(t.xMin=c),t.xMax<c&&(t.xMax=c),_<t.yMin&&(t.yMin=_),t.yMax<_&&(t.yMax=_),c=(n+s)*this.matA+(i+a)*this.matC+this.absX,_=(n+s)*this.matB+(i+a)*this.matD+this.absY,c<t.xMin&&(t.xMin=c),t.xMax<c&&(t.xMax=c),_<t.yMin&&(t.yMin=_),t.yMax<_&&(t.yMax=_)):e==this?(t.xMin>n&&(t.xMin=n),i<t.yMin&&(t.yMin=i),t.xMax<n+s&&(t.xMax=n+s),t.yMax<i+a&&(t.yMax=i+a)):0!=(d=e.matA*e.matD-e.matB*e.matC)&&(u=this.absX-e.absX,h=this.absY-e.absY,p=(c=n*this.matA+i*this.matC+u)*(r=-e.matB*(d=1/d))+(_=n*this.matB+i*this.matD+h)*(o=e.matA*d),(d=c*(l=e.matD*d)+_*(e=-e.matC*d))<t.xMin&&(t.xMin=d),t.xMax<d&&(t.xMax=d),p<t.yMin&&(t.yMin=p),t.yMax<p&&(t.yMax=p),d=(c=(n+s)*this.matA+i*this.matC+u)*l+(_=(n+s)*this.matB+i*this.matD+h)*e,p=c*r+_*o,d<t.xMin&&(t.xMin=d),t.xMax<d&&(t.xMax=d),p<t.yMin&&(t.yMin=p),t.yMax<p&&(t.yMax=p),d=(c=n*this.matA+(i+a)*this.matC+u)*l+(_=n*this.matB+(i+a)*this.matD+h)*e,p=c*r+_*o,d<t.xMin&&(t.xMin=d),t.xMax<d&&(t.xMax=d),p<t.yMin&&(t.yMin=p),t.yMax<p&&(t.yMax=p),d=(c=(n+s)*this.matA+(i+a)*this.matC+u)*l+(_=(n+s)*this.matB+(i+a)*this.matD+h)*e,p=c*r+_*o,d<t.xMin&&(t.xMin=d),t.xMax<d&&(t.xMax=d),p<t.yMin&&(t.yMin=p),t.yMax<p)&&(t.yMax=p))},localToGlobal:function(e){this.syncPos();var t=(e=null==e?new St(0,0):e).x*this.matB+e.y*this.matD+this.absY;return e.x=e.x*this.matA+e.y*this.matC+this.absX,e.y=t,e},globalToLocal:function(e){this.syncPos(),e.x-=this.absX,e.y-=this.absY;var t=1/(this.matA*this.matD-this.matB*this.matC),n=(-e.x*this.matB+e.y*this.matA)*t;return e.x=(e.x*this.matD-e.y*this.matC)*t,e.y=n,e},getScene:function(){for(var e=this;null!=e.parent;)e=e.parent;return e instanceof kr?e:null},set_visible:function(e){return this.visible!=e&&(this.visible=e,null!=this.parentContainer)&&this.parentContainer.contentChanged(this),e},addChild:function(e){this.addChildAt(e,this.children.length)},addChildAt:function(e,t){(t=t<0?0:t)>this.children.length&&(t=this.children.length);for(var n,i=this;null!=i;){if(i==e)throw tl.thrown("Recursive addChild");i=i.parent}null!=e.parent&&(n=e.allocated,e.allocated=!1,e.parent.removeChild(e),e.allocated=n),this.children.splice(t,0,e),!this.allocated&&e.allocated&&e.onRemove(),e.parent=this,e.parentContainer=this.parentContainer,e.posChanged=!0,this.allocated&&(e.allocated?e.onHierarchyMoved(!0):e.onAdd()),null!=this.parentContainer&&this.parentContainer.contentChanged(this)},onHierarchyMoved:function(e){for(var t=0,n=this.children;t<n.length;)n[t++].onHierarchyMoved(e)},onAdd:function(){this.allocated=!0,null!=this.filter&&this.filter.bind(this);for(var e=0,t=this.children;e<t.length;)t[e++].onAdd()},onRemove:function(){this.allocated=!1,null!=this.filter&&this.filter.unbind(this);for(var e=this.children.length-1;0<=e;){var t=this.children[e--];null!=t&&t.onRemove()}},removeChild:function(e){Jn.remove(this.children,e)&&(e.allocated&&e.onRemove(),(e.parent=null)!=e.parentContainer&&e.setParentContainer(null),e.posChanged=!0,null!=this.parentContainer)&&this.parentContainer.contentChanged(this)},setParentContainer:function(e){this.parentContainer=e;for(var t=0,n=this.children;t<n.length;)n[t++].setParentContainer(e)},removeChildren:function(){for(;0<this.children.length;)this.removeChild(this.getChildAt(0))},drawTo:function(e){var t=this.getScene(),n=null==t;(t=null==t?new kr:t).drawImplTo(this,[e]),n&&(t.dispose(),this.onRemove())},draw:function(e){},sync:function(e){for(var t=this.posChanged,n=(t&&(this.calcAbsPos(),this.posChanged=!1),this.lastFrame=e.frame,0),i=this.children.length;n<i;){var s=this.children[n];if(null==s)break;s.lastFrame!=e.frame&&(t&&(s.posChanged=!0),s.sync(e)),this.children[n]!=s?(n=0,i=this.children.length):++n}},syncPos:function(){if(null!=this.parent&&this.parent.syncPos(),this.posChanged){this.calcAbsPos();for(var e=0,t=this.children;e<t.length;)t[e++].posChanged=!0;this.posChanged=!1}},calcAbsPos:function(){var e,t,n,i;null==this.parent?(0==this.rotation?(this.matA=this.scaleX,this.matB=0,this.matC=0,this.matD=this.scaleY):(i=Math.cos(this.rotation),n=Math.sin(this.rotation),this.matA=this.scaleX*i,this.matB=this.scaleX*n,this.matC=this.scaleY*-n,this.matD=this.scaleY*i),this.absX=this.x,this.absY=this.y):(0==this.rotation?(this.matA=this.scaleX*this.parent.matA,this.matB=this.scaleX*this.parent.matB,this.matC=this.scaleY*this.parent.matC,this.matD=this.scaleY*this.parent.matD):(i=Math.cos(this.rotation),n=Math.sin(this.rotation),e=this.scaleX*i,t=this.scaleX*n,n=this.scaleY*-n,i=this.scaleY*i,this.matA=e*this.parent.matA+t*this.parent.matC,this.matB=e*this.parent.matB+t*this.parent.matD,this.matC=n*this.parent.matA+i*this.parent.matC,this.matD=n*this.parent.matB+i*this.parent.matD),this.absX=this.x*this.parent.matA+this.y*this.parent.matC+this.parent.absX,this.absY=this.x*this.parent.matB+this.y*this.parent.matD+this.parent.absY)},emitTile:function(e,t){null==kt.nullDrawable&&(kt.nullDrawable=new Mt(null)),kt.nullDrawable.smooth=!(null==this.filter||!this.filter.smooth)||null,kt.nullDrawable.absX=this.absX,kt.nullDrawable.absY=this.absY,kt.nullDrawable.matA=this.matA,kt.nullDrawable.matB=this.matB,kt.nullDrawable.matC=this.matC,kt.nullDrawable.matD=this.matD,e.drawTile(kt.nullDrawable,t)},clipBounds:function(e,t,n,i){null==i&&(i=1),null==n&&(n=1);var s,a,l,r,o,u,h=e.tmpBounds;u=null!=e.inFilter?(u=e.baseShader.filterMatrixA__,g=e.baseShader.filterMatrixB__,a=this.matA*u.x+this.matB*u.y,l=this.matA*g.x+this.matB*g.y,r=this.matC*u.x+this.matD*u.y,o=this.matC*g.x+this.matD*g.y,u=this.absX*u.x+this.absY*u.y+u.z,g=this.absX*g.x+this.absY*g.y+g.z,s=(a*e.viewA+l*e.viewC)/n,a=(a*e.viewB+l*e.viewD)/i,l=(r*e.viewA+o*e.viewC)/n,r=(r*e.viewB+o*e.viewD)/i,o=u*e.viewA+g*e.viewC+e.viewX,u*e.viewB+g*e.viewD+e.viewY):(s=(this.matA*e.viewA+this.matB*e.viewC)/n,a=(this.matA*e.viewB+this.matB*e.viewD)/i,l=(this.matC*e.viewA+this.matD*e.viewC)/n,r=(this.matC*e.viewB+this.matD*e.viewD)/i,o=this.absX*e.viewA+this.absY*e.viewC+e.viewX,this.absX*e.viewB+this.absY*e.viewD+e.viewY),h.xMin=1e20,h.yMin=1e20,h.xMax=-1e20,h.yMax=-1e20;i=(g=t.xMin)*a+(n=t.yMin)*r+u;(e=g*s+n*l+o)<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i);i=(g=t.xMax)*a+(n=t.yMin)*r+u;(e=g*s+n*l+o)<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i);i=(g=t.xMin)*a+(n=t.yMax)*r+u;(e=g*s+n*l+o)<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i);var i=(g=t.xMax)*a+(n=t.yMax)*r+u,c=((e=g*s+n*l+o)<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i),h.xMin<-1&&(h.xMin=-1),h.yMin<-1&&(h.yMin=-1),1<h.xMax&&(h.xMax=1),1<h.yMax&&(h.yMax=1),1/(s*r-a*l)),_=h.xMin,d=h.yMin,p=h.xMax,m=h.yMax,g=(h.xMin=1e20,h.yMin=1e20,h.xMax=-1e20,h.yMax=-1e20,_),e=((g=_-o)*r-(n=d-u)*l)*c,i=(-g*a+n*s)*c,g=(e<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i),p),e=((g=p-o)*r-(n=d-u)*l)*c,i=(-g*a+n*s)*c,g=(e<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i),_),e=((g=_-o)*r-(n=m-u)*l)*c,i=(-g*a+n*s)*c,g=(e<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i),p),e=((g=p-o)*r-(n=m-u)*l)*c,i=(-g*a+n*s)*c,d=(e<h.xMin&&(h.xMin=e),h.xMax<e&&(h.xMax=e),i<h.yMin&&(h.yMin=i),h.yMax<i&&(h.yMax=i),t.xMin),_=h.xMin,d=(t.xMin=d<_?_:d,t.yMin),d=(t.yMin=d<(_=h.yMin)?_:d,t.xMax),d=(t.xMax=(_=h.xMax)<d?_:d,t.yMax);t.yMax=(_=h.yMax)<d?_:d},drawFilters:function(e){var t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v;e.pushFilter(this)&&(i=e.tmpBounds,a=new Tr,this.filter.sync(e,this),n=this.filter.useScreenResolution?(t=(n=e.scene).viewportScaleX*this.filter.resolutionScale,n.viewportScaleY*this.filter.resolutionScale):(t=this.filter.resolutionScale,this.filter.resolutionScale),this.filter.autoBounds?0<=(s=this.filter.boundsExtend)&&(this.getBounds(this,i),i.xMin=i.xMin*t-s,i.yMin=i.yMin*n-s,i.xMax=i.xMax*t+s,i.yMax=i.yMax*n+s,i.xMin<a.xMin&&(a.xMin=i.xMin),i.xMax>a.xMax&&(a.xMax=i.xMax),i.yMin<a.yMin&&(a.yMin=i.yMin),i.yMax>a.yMax)&&(a.yMax=i.yMax):(A=t,null==(x=n)&&(x=0),(v=s=kt.tmpPoint).x=A=null==A?0:A,v.y=x,this.filter.getBounds(this,i,s),i.xMin<a.xMin&&(a.xMin=i.xMin),i.xMax>a.xMax&&(a.xMax=i.xMax),i.yMin<a.yMin&&(a.yMin=i.yMin),i.yMax>a.yMax&&(a.yMax=i.yMax),t=s.x,n=s.y),e.setFilterScale(t,n),this.clipBounds(e,a,t,n),i=Math.floor(a.xMin+1e-10),s=Math.floor(a.yMin+1e-10),l=Math.ceil(a.xMax-i-1e-10),r=Math.ceil(a.yMax-s-1e-10),l<=0||r<=0||a.xMax<a.xMin?e.popFilter():(a=e.textures.allocTarget("filterTemp",l,r,!1),e.pushTarget(a,i,s,l,r),e.engine.clear(0),l=e.globalAlpha,o=A=null==(A=(v=(r=e.baseShader).filterMatrixA__).x)?0:A,u=x=null==(x=v.y)?0:x,h=w=null==(w=v.z)?0:w,null==w&&(h=0),null==x&&(u=0),null==A&&(o=0),c=A=null==(A=(v=r.filterMatrixB__).x)?0:A,_=x=null==(x=v.y)?0:x,d=w=null==(w=v.z)?0:w,null==w&&(d=0),null==x&&(_=0),null==A&&(c=0),g=1/(this.matA*this.matD-this.matB*this.matC),p=this.matD*g*t,m=-this.matB*g*n,y=-this.matC*g*t,g=this.matA*g*n,b=-(this.absX*p+this.absY*y),f=-(this.absX*m+this.absY*g),w=null==b?0:b,null==(x=y)&&(x=0),(v=r.filterMatrixA__).x=A=null==(A=p)?0:A,v.y=x,v.z=w,w=null==f?0:f,null==(x=g)&&(x=0),(v=r.filterMatrixB__).x=A=null==(A=m)?0:A,v.y=x,v.z=w,e.globalAlpha=1,this.drawContent(e),(b=Ir.fromTexture(a)).dx=i/t,b.dy=s/n,y=b,null!=(b=this.filter.draw(e,b))&&(b!=y&&(b.dx=(b.dx+i)/t,b.dy=(b.dy+s)/n),b.width/=t,b.height/=n),(v=r.filterMatrixA__).x=o,v.y=u,v.z=h,(v=r.filterMatrixB__).x=c,v.y=_,v.z=d,e.popTarget(),e.popFilter(),e.globalAlpha=l,null!=b&&this.drawFiltered(e,b)))},drawFiltered:function(e,t){var n=e.globalAlpha;e.currentBlend=null,e.inFilterBlend=this.blendMode,e.globalAlpha*=this.alpha,this.emitTile(e,t),e.globalAlpha=n,e.inFilterBlend=null,e.currentBlend=null},drawRec:function(e){if(this.visible){if(this.posChanged){this.calcAbsPos();for(var t=0,n=this.children;t<n.length;)n[t++].posChanged=!0;this.posChanged=!1}var i;null!=this.filter&&this.filter.get_enable()?this.drawFilters(e):(i=e.globalAlpha,e.globalAlpha*=this.alpha,this.drawContent(e),e.globalAlpha=i)}},drawContent:function(e){if(e.front2back){for(var t=this.children.length;0<t--;)this.children[t].drawRec(e);this.draw(e)}else{this.draw(e);for(var n=0,i=this.children;n<i.length;)i[n++].drawRec(e)}},getChildAt:function(e){return this.children[e]},contentChanged:function(e){},__class__:kt,__properties__:{set_filter:"set_filter",set_visible:"set_visible"}},function(e){kt.call(this,e),this.color=new q(1,1,1,1)}),et=((i["h2d.Drawable"]=Mt).__name__="h2d.Drawable",Mt.__super__=kt,Mt.prototype=e(kt.prototype,{drawFiltered:function(e,t){var n=this.shaders;this.shaders=null,kt.prototype.drawFiltered.call(this,e,t),this.shaders=n},addShader:function(e){if(null==e)throw tl.thrown("Can't add null shader");return this.shaders=Cw.addSort(e,this.shaders),e},removeShader:function(e){for(var t=null,n=this.shaders;null!=n;){if(n.s==e)return null==t?this.shaders=n.next:t.next=n.next,!0;n=(t=n).next}return!1},emitTile:function(e,t){null==t&&(t=new Ir(null,0,0,5,5)),e.drawTile(this,t)},__class__:Mt}),(i["h2d.Text"]=ne).__name__="h2d.Text",ne.__super__=Mt,ne.prototype=e(Mt.prototype,{set_font:function(e){if(this.font!=e){if(null!=(this.font=e)){var t=e.type;switch(t._hx_index){case 0:null!=this.sdfShader&&(this.removeShader(this.sdfShader),this.sdfShader=null);break;case 1:var n=t.smoothing;null==this.sdfShader&&(this.sdfShader=new Go,this.addShader(this.sdfShader)),null==this.smooth&&(this.smooth=!0),this.sdfShader.alphaCutoff__=t.alphaCutoff,this.sdfShader.smoothing__=n,(i=this.sdfShader).constModified=!0,i.channel__=t.channel,(i=this.sdfShader).constModified=!0,i.autoSmoothing__=-1==n}}var i;null!=this.glyphs&&null!=(i=this.glyphs)&&null!=i.parent&&i.parent.removeChild(i),this.glyphs=new Br(null==e?null:e.tile,this),this.glyphs.set_visible(!1),this.rebuild()}return e},set_textAlign:function(e){return this.textAlign!=e&&(this.textAlign=e,this.rebuild()),e},set_letterSpacing:function(e){return this.letterSpacing!=e&&(this.letterSpacing=e,this.rebuild()),e},set_lineSpacing:function(e){return this.lineSpacing!=e&&(this.lineSpacing=e,this.rebuild()),e},set_wordWrap:function(e){return this.wordWrap!=e&&(this.wordWrap=e,this.rebuild()),e},onAdd:function(){Mt.prototype.onAdd.call(this),this.rebuild()},sync:function(e){Mt.prototype.sync.call(this,e),this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.needsRebuild&&this.initGlyphs(this.currentText)},draw:function(e){var t,n,i,s,a,l,r,o;null==this.glyphs?this.emitTile(e,Ir.fromColor(16711935,16,16)):(this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.needsRebuild&&this.initGlyphs(this.currentText),null!=this.dropShadow&&(r=this.absX,l=this.absY,this.absX+=this.dropShadow.dx*this.matA+this.dropShadow.dy*this.matC,this.absY+=this.dropShadow.dx*this.matB+this.dropShadow.dy*this.matD,t=this.color.x,n=this.color.y,i=this.color.z,s=this.color.w,a=this.color,o=this.dropShadow.color,a.x=(o>>16&255)/255,a.y=(o>>8&255)/255,a.z=(255&o)/255,a.w=(o>>>24)/255,this.color.w=this.dropShadow.alpha*s,this.glyphs.drawWith(e,this),this.absX=r,this.absY=l,o=null==s?1:s,null==(r=i)&&(r=0),null==(l=n)&&(l=0),(a=this.color).x=null==t?0:t,a.y=l,a.z=r,a.w=o),this.glyphs.drawWith(e,this))},set_text:function(e){e=null==e?"null":e;return e!=this.text&&(this.text=e,this.textChanged=!0,this.validateText(),null!=this.parentContainer)&&this.parentContainer.contentChanged(this),e},validateText:function(){},rebuild:function(){this.calcDone=!1,this.needsRebuild=!0,null!=this.parentContainer&&this.parentContainer.contentChanged(this)},calcTextWidth:function(e){var t,n,i,s,a,l;return this.calcDone?(t=this.calcWidth,n=this.calcHeight,i=this.calcSizeHeight,s=this.calcXMin,a=this.calcYMin,this.initGlyphs(e,!1),l=this.calcWidth,this.calcWidth=t,this.calcHeight=n,this.calcSizeHeight=i,this.calcXMin=s,this.calcYMin=a,l):(this.initGlyphs(e,!1),this.calcDone=!1,this.calcWidth)},splitRawText:function(e,t,n,i,s,a){null==n&&(n=0);var l=null!=(a=null==a?-1:a)?a:-1,r=this.realMaxWidth;if(r<0){if(null==s)return e;r=1/0}null==i&&(i=this.font);for(var o=[],u=0,h=t=null==t?0:t,c=0,_=0,d=e.length;_<d;){var p=_++,m=e.charCodeAt(p),g=i.glyphs.h[m],g=g=null==g&&null==(g=i.charset.resolveChar(m,i.glyphs))?13==m||10==m?i.nullChar:i.defaultChar:g,f=10==m,A=g.width+g.getKerningOffset(l),x=p<e.length-1&&i.charset.isComplementChar(e.charCodeAt(1+p));if(i.charset.isBreakChar(m)&&!x){0==o.length&&0<t&&r<h&&(o.push(""),null!=s&&s.push(t),h-=t);for(var w=h+A+this.letterSpacing,y=1+p,b=e.length,a=m,v=!1;w<=r&&y<b;){var C=e.charCodeAt(y++);if(this.lineBreak&&(i.charset.isSpace(C)||10==C)){v=!0;break}var S=i.glyphs.h[C],S=S=null==S&&null==(S=i.charset.resolveChar(C,i.glyphs))?13==C||10==C?i.nullChar:i.defaultChar:S;if(w+=S.width+this.letterSpacing+S.getKerningOffset(a),i.charset.isBreakChar(a=C)){if(y>=e.length)break;S=e.charCodeAt(y);if(!i.charset.isComplementChar(S))break}}this.lineBreak&&(r<w||!v&&r<w+n)?(f=!0,i.charset.isSpace(m)?(o.push(Jn.substr(e,u,p-u)),g=null):o.push(Jn.substr(e,u,1+p-u)),u=1+p):c=w}else this.wordWrap&&h+A+this.letterSpacing-c>r-A&&(f=!0,o.push(Jn.substr(e,u,p-u)),u=p,h-=A+this.letterSpacing);null!=g&&10!=m&&(h+=A+this.letterSpacing),l=f?(null!=s&&s.push(h),c=h=0,-1):m}return u<e.length&&(0==o.length&&0<t&&h+n-this.letterSpacing>r&&(o.push(""),null!=s&&s.push(t),h-=t),o.push(Jn.substr(e,u,e.length-u)),null!=s)&&s.push(h),o.join("\n")},initGlyphs:function(e,t){(t=null==t?!0:t)&&this.glyphs.clear();for(var n=0,i=0,s=0,a=0,l=0,r=0,o=-1,u=0,h=this.textAlign,c=[],_=this.font.lineHeight+this.lineSpacing,d=this.splitRawText(e,0,0,null,c),p=0;p<c.length;){var m=c[p];++p,n<m&&(n=m)}switch(this.calcWidth=n,h._hx_index){case 0:n=0;break;case 1:case 2:case 3:case 4:for(var g=h==Mr.MultilineCenter||h==Mr.MultilineRight?Math.ceil(this.calcWidth):this.realMaxWidth<0?0:Math.ceil(this.realMaxWidth),f=h==Mr.Center||h==Mr.MultilineCenter?.5:1,p=0,A=c.length;p<A;){var x=p++;c[x]=Math.floor((g-c[x])*f)}a=n=c[0]}for(p=0,A=d.length;p<A;){var w,y=d.charCodeAt(p++),b=this.font,v=b.glyphs.h[y],b=v=null==v&&null==(v=b.charset.resolveChar(y,b.glyphs))?13==y||10==y?b.nullChar:b.defaultChar:v,v=b.getKerningOffset(o),C=b.width+v;if(10==y){switch(s<n&&(s=n),h._hx_index){case 0:n=0;break;case 1:case 2:case 3:case 4:(n=c[++u])<a&&(a=n)}i+=_,o=-1}else null!=b&&(t&&(w=this.glyphs).content.add(n+v,i,w.curColor.x,w.curColor.y,w.curColor.z,w.curColor.w,b.t),0==i&&b.t.dy<l&&(l=b.t.dy),r<(v=i+b.t.dy+b.t.height)&&(r=v),n+=C+this.letterSpacing),o=y}s<n&&(s=n),this.calcXMin=a,this.calcYMin=l,this.calcWidth=s-a,this.calcHeight=r-l,this.calcSizeHeight=i+(0<this.font.baseLine?this.font.baseLine:this.font.lineHeight),this.calcDone=!0,t&&(this.needsRebuild=!1)},get_textHeight:function(){return this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.calcDone||this.initGlyphs(this.text,this.needsRebuild),0==this.font.baseLine?this.calcSizeHeight:this.calcSizeHeight-this.font.baseLine+this.font.lineHeight},get_textWidth:function(){return this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.calcDone||this.initGlyphs(this.text,this.needsRebuild),this.calcWidth},set_maxWidth:function(e){return this.maxWidth!=e&&(this.maxWidth=e,this.updateConstraint()),e},updateConstraint:function(){var e,t,n=this.realMaxWidth;null==this.maxWidth?this.realMaxWidth=this.constraintWidth:this.constraintWidth<0?this.realMaxWidth=this.maxWidth:(e=this.maxWidth,t=this.constraintWidth,this.realMaxWidth=t<e?t:e),this.realMaxWidth!=n&&this.rebuild()},set_textColor:function(e){var t,n;return this.textColor!=e&&(this.textColor=e,t=this.color.w,(n=this.color).x=(e>>16&255)/255,n.y=(e>>8&255)/255,n.z=(255&e)/255,n.w=(e>>>24)/255,this.color.w=t),e},getBoundsRec:function(e,t,n){var i,s,a;Mt.prototype.getBoundsRec.call(this,e,t,n),this.textChanged&&this.text!=this.currentText&&(this.textChanged=!1,this.currentText=this.text,this.calcDone=!1,this.needsRebuild=!0),this.calcDone||this.initGlyphs(this.text,this.needsRebuild),n=n?(i=this.calcXMin,s=0,a=this.calcWidth,this.calcSizeHeight):(i=this.calcXMin,s=this.calcYMin,a=this.calcWidth,this.calcHeight),this.addBounds(e,t,i,s,a,n)},__class__:ne,__properties__:e(Mt.prototype.__properties__,{set_wordWrap:"set_wordWrap",set_lineSpacing:"set_lineSpacing",set_letterSpacing:"set_letterSpacing",set_textAlign:"set_textAlign",get_textHeight:"get_textHeight",get_textWidth:"get_textWidth",set_maxWidth:"set_maxWidth",set_textColor:"set_textColor",set_text:"set_text",set_font:"set_font"})}),(i["gasm.heaps.text.ScalingTextField"]=ie).__name__="gasm.heaps.text.ScalingTextField",ie.__super__=ne,ie.prototype=e(ne.prototype,{dispose:function(){var e=this.glyphs;null!=e&&e.clear(),null!=(e=this.sdfShader)&&this.removeShader(e),this.glyphs=null,this.sdfShader=null},initGlyphs:function(e,t){ne.prototype.initGlyphs.call(this,e,t=null==t?!0:t),this.calcHeight+=this.yMarg,this.calcWidth+=this.xMarg},set_text:function(e){return null!=e&&(e=Ae.replace(e,""," ")),ne.prototype.set_text.call(this,e)},set_xMarg:function(e){return this.calcWidth=this.get_textWidth()+2*this.xMarg,this.xMarg=e},set_yMarg:function(e){return this.calcHeight=this.get_textHeight()+2*this.yMarg,this.yMarg=e},__class__:ie,__properties__:e(ne.prototype.__properties__,{set_yMarg:"set_yMarg",set_xMarg:"set_xMarg"})}),fe["gasm.heaps.transform.ObjectTween"]={__ename__:!0,__constructs__:null,Position:((R=function(e){return{_hx_index:0,v:e,__enum__:"gasm.heaps.transform.ObjectTween",toString:o}})._hx_name="Position",R.__params__=["v"],R),Rotate:((R=function(e){return{_hx_index:1,v:e,__enum__:"gasm.heaps.transform.ObjectTween",toString:o}})._hx_name="Rotate",R.__params__=["v"],R),Scale:((R=function(e){return{_hx_index:2,v:e,__enum__:"gasm.heaps.transform.ObjectTween",toString:o}})._hx_name="Scale",R.__params__=["v"],R),Color:((R=function(e){return{_hx_index:3,v:e,__enum__:"gasm.heaps.transform.ObjectTween",toString:o}})._hx_name="Color",R.__params__=["v"],R)}),It=(et.__constructs__=[et.Position,et.Rotate,et.Scale,et.Color],et.__empty_constructs__=[],function(e){this.updateComplete=s1.trigger(),this.deltaTime=1,this.speedCalculatedThisFrame=!1,this.lastWorldMatrix=null;var t=(this.object=e).getRotationQuat().toEuler();this.position=new Et(e.x,e.y,e.z,1),this.rotation=new Et(t.x,t.y,t.z,1),this.scaling=new Et(e.scaleX,e.scaleY,e.scaleZ,1),this.color=new Et(1,1,1,1),this.home=new Bt(st.fromBacking(new it(this.position.x,this.position.y,this.position.z,null)),st.fromBacking(new it(e.scaleX,e.scaleY,e.scaleZ,null)),st.fromBacking(new it(t.x,t.y,t.z,null)),st.fromBacking(new it(1,1,1,1)))}),tt=((i["gasm.heaps.transform.TweenObjectBacking"]=It).__name__="gasm.heaps.transform.TweenObjectBacking",It.prototype={cancel:function(e){Tt.cancel(this.position,e=null==e?!1:e),Tt.cancel(this.rotation,e),Tt.cancel(this.scaling,e),Tt.cancel(this.color,e)},dispose:function(){this.position.dispose(),this.rotation.dispose(),this.scaling.dispose(),this.color.dispose()},clone:function(){var e=new It(this.object.clone());return null!=this.lastWorldMatrix&&(e.lastWorldMatrix=this.object.getAbsPos()),e},getMaterials:function(){return this.object.getMaterials()},getMeshes:function(){return this.object.getMeshes()},getChildAt:function(e){return this.object.children[e]},getRotationQuat:function(){return this.object.getRotationQuat()},setRotation:function(e,t,n){this.object.setRotation(e,t,n)},setScale:function(e){var t=this.object;t.scaleX=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144)},addChild:function(e){this.object.addChild(e)},getBounds:function(){return this.object.getBounds()},getScene:function(){return this.object.getScene()},setPosition:function(e,t,n){var i=this.position,i=(i.x=null!=e?e:i.x,i.y=null!=t?t:i.y,i.z=null!=n?n:i.z,i.w=i.w,this.object);i.x=e,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.y=t,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.z=n,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144)},setPos:function(e){st.defaultNull(e);var t=this.position,n=e.x,i=e.y,s=e.z,n=(t.x=null!=n?n:t.x,t.y=null!=i?i:t.y,t.z=null!=s?s:t.z,t.w=t.w,this.object);n.x=e.x,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.y=e.y,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.z=e.z,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144)},remove:function(){this.cancel(),this.home=null;var e=this.object;null!=e&&null!=e.parent&&e.parent.removeChild(e)},get_parent:function(){return this.object.parent},get_name:function(){return this.object.name},set_name:function(e){return this.object.name=e},get_visible:function(){return 0!=(2&this.object.flags)},set_visible:function(e){var t=this.object;return e?t.flags|=2:t.flags&=-3,e},get_x:function(){return this.object.x},get_y:function(){return this.object.y},get_z:function(){return this.object.z},set_x:function(e){this.position.x=e;var t=this.object;return t.x=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),e},set_y:function(e){this.position.y=e;var t=this.object;return t.y=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),e},set_z:function(e){this.position.z=e;var t=this.object;return t.z=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),e},get_scaleX:function(){return this.object.scaleX},get_scaleY:function(){return this.object.scaleY},get_scaleZ:function(){return this.object.scaleZ},set_scaleX:function(e){var t=this.object;return t.scaleX=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),e},set_scaleY:function(e){var t=this.object;return t.scaleY=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),e},set_scaleZ:function(e){var t=this.object;return t.scaleZ=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),e},__class__:It,__properties__:{set_scaleZ:"set_scaleZ",get_scaleZ:"get_scaleZ",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_z:"set_z",get_z:"get_z",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_visible:"set_visible",get_visible:"get_visible",set_name:"set_name",get_name:"get_name",get_parent:"get_parent"}},{}),Bt=(tt.init=function(e,t){null==t&&(l=e.get_x(),i=e.get_y(),s=e.get_z(),a=st.fromVector4(new q(l=null==l?0:l,i=null==i?0:i,s=null==s?0:s,1)),n=e.getRotationQuat().toEuler(),l=e.get_scaleX(),i=e.get_scaleY(),s=e.get_scaleZ(),t=new Bt(a,st.fromVector4(new q(l=null==l?0:l,i=null==i?0:i,s=null==s?0:s,1)),st.fromVector3(n),st.fromVector4(new q(1,1,1,1))));var n,i,s,a=e.position,l=st.toVector4(t.pos),a=(a.x=l.x,a.y=l.y,a.z=l.z,a.w=l.w,e.rotation),l=st.toVector4(t.rotation),a=(a.x=l.x,a.y=l.y,a.z=l.z,a.w=l.w,e.scaling),l=st.toVector4(t.scale),a=(a.x=l.x,a.y=l.y,a.z=l.z,a.w=l.w,e.color),l=st.toVector4(t.color);a.x=l.x,a.y=l.y,a.z=l.z,a.w=l.w,e.home=t},tt.resetTween=function(e){e.cancel(),tt.init(e,e.home)},tt.translateTo=function(t,e){var n=new qy;return Tt.tween(t.position,e).handle(function(e){s1.nextTime(t.updateComplete).handle(function(){n.trigger(e)})}),n},tt.rotateTo=function(t,e){var n=new qy,i=st.fromVector3(t.getRotationQuat().toEuler()),s=t.rotation,i=st.toVector4(i);return s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,Tt.tween(t.rotation,e).handle(function(e){s1.nextTime(t.updateComplete).handle(function(){n.trigger(e)})}),n},tt.scaleTo=function(t,e){var n=new qy;return Tt.tween(t.scaling,e).handle(function(e){s1.nextTime(t.updateComplete).handle(function(){n.trigger(e)})}),n},tt.colorTo=function(t,e){var n=new qy;return Tt.tween(t.color,e).handle(function(e){s1.nextTime(t.updateComplete).handle(function(){n.trigger(e)})}),n},tt.tween=function(a,l){var e;return null==l?new Zy(new Yy(!1)):((e=rt.irreversible(function(t){for(var e=[],n=0;n<l.length;){var i,s=l[n];switch(++n,s._hx_index){case 0:i=Tt.tween(a.position,s.v);break;case 1:i=Tt.tween(a.rotation,s.v);break;case 2:i=Tt.tween(a.scaling,s.v);break;case 3:i=Tt.tween(a.color,s.v)}e.push(i)}tt.update(a,0),rt.inParallel(e).handle(function(e){s1.nextTime(a.updateComplete).handle(function(){t(-1==e.indexOf(!1))})})})).eager(),e)},tt.returnHome=function(e,t,n){return tt.tween(e,[et.Position(new nt(e.home.pos,null,null,t=null==t?0:t,null,n=null==n?function(e){return e}:n,null,null,null,null,null)),et.Rotate(new nt(e.home.rotation,null,null,t,null,n,null,null,null,null,null)),et.Scale(new nt(e.home.scale,null,null,t,null,n,null,null,null,null,null)),et.Color(new nt(e.home.color,null,null,t,null,n,null,null,null,null,null))])},tt.update=function(e,t){var n,i,s;if(Tt.update(e.position,t)?(e.set_x(e.position.x),e.set_y(e.position.y),e.set_z(e.position.z)):(n=e.position,o=e.get_x(),i=e.get_y(),s=e.get_z(),n.x=null!=o?o:n.x,n.y=null!=i?i:n.y,n.z=null!=s?s:n.z,n.w=n.w),Tt.update(e.rotation,t)?e.setRotation(e.rotation.x,e.rotation.y,e.rotation.z):(u=e.object.getRotationQuat().toEuler(),n=e.rotation,o=u.x,i=u.y,s=u.z,n.x=null!=o?o:n.x,n.y=null!=i?i:n.y,n.z=null!=s?s:n.z,n.w=n.w),Tt.update(e.scaling,t)?(e.set_scaleX(e.scaling.x),e.set_scaleY(e.scaling.y),e.set_scaleZ(e.scaling.z)):(n=e.scaling,o=e.get_scaleX(),i=e.get_scaleY(),s=e.get_scaleZ(),n.x=null!=o?o:n.x,n.y=null!=i?i:n.y,n.z=null!=s?s:n.z,n.w=n.w),Tt.update(e.color,t))for(var a=0,l=e.getMaterials();a<l.length;){var r=l[a];++a,r.mshader.color__.x=e.color.x,r.mshader.color__.y=e.color.y,r.mshader.color__.z=e.color.z,r.mshader.color__.w=e.color.w}else{var o,u=e.getMaterials();null!=(r=null==u?null:u[0])&&(e.color.x=(o=r).mshader.color__.x,e.color.y=o.mshader.color__.y,e.color.z=o.mshader.color__.z,e.color.w=o.mshader.color__.w)}e.deltaTime=0<t?t:1,e.speedCalculatedThisFrame=!1,e.updateComplete.handlers.invoke(null)},function(e,t,n,i){this.color=null,this.rotation=null,this.scale=null,(this.pos=null)!=e&&(this.pos=e),null!=t&&(this.scale=t),null!=n&&(this.rotation=n),null!=i&&(this.color=i)}),nt=((i["gasm.heaps.transform.Transform"]=Bt).__name__="gasm.heaps.transform.Transform",Bt.prototype={__class__:Bt},function(e,t,n,i,s,a,l,r,o,u,h){this.onRepeat=null,this.onUpdate=null,this.repeat=!1,this.curveDuration=null,this.relative=!1,this.curve=function(e){return e},this.time=0,this.duration=1,this.delay=0,this.from=null,(this.to=null)!=e&&(this.to=e),null!=t&&(this.from=t),null!=n&&(this.delay=n),null!=i&&(this.duration=i),null!=s&&(this.time=s),null!=a&&(this.curve=a),null!=l&&(this.relative=l),null!=r&&(this.curveDuration=r),null!=o&&(this.repeat=o),null!=u&&(this.onUpdate=u),null!=h&&(this.onRepeat=h)}),Tt=((i["gasm.heaps.transform.VectorTween"]=nt).__name__="gasm.heaps.transform.VectorTween",nt.prototype={clone:function(){var e=this.to,t=this.from;return new nt(null!=e?st.clone(e):null,null!=t?st.clone(t):null,this.delay,this.duration,this.time,this.curve,this.relative,this.curveDuration,this.repeat,this.onUpdate,this.onRepeat)},__class__:nt},{}),q=(Tt.tween=function(t,n){(0<(n=n.clone()).delay?t._scheduled:(n=Tt.setupTween(t,n),t._active)).push(n);var e=s1.nextTime(t.tweenSignal,function(e){return e._0==n});return e.handle(function(e){0<n.delay?Jn.remove(t._scheduled,n):Jn.remove(t._active,n)}),rt.map(e,function(e){return e._1})},Tt.cancelUsedAxis=function(e,t){for(var n=[],i=0,s=e._active;i<s.length;){var a=s[i];++i,a.to.x=null==t.to.x?a.to.x:null,a.to.y=null==t.to.y?a.to.y:null,a.to.z=null==t.to.z?a.to.z:null,a.to.w=null==t.to.w?a.to.w:null,null==a.to.x&&null==a.to.y&&null==a.to.z&&null==a.to.w&&n.push(a)}for(i=0;i<n.length;){a=n[i];++i,e.tweenSignal.handlers.invoke({_0:a,_1:!1}),Jn.remove(e._active,a)}},Tt.cancel=function(e,t){null==t&&(t=!1);for(var n=0,i=e._active.concat(e._scheduled);n<i.length;)Tt.cancelTween(e,i[n++],t)},Tt.setupTween=function(e,t){var n,i,s,a,l,r,o,u,h,c,_,d,p=null!=t.from,m=null!=t.to;return m||(t.to=st.clone(t.from),n=e.x,st.set(t.to,st.fromVector4(new q(n=null==n?0:n,i=null==(i=e.y)?0:i,s=null==(s=e.z)?0:s,a=null==(a=e.w)?1:a)))),p||(t.from=st.clone(t.to),n=e.x,st.set(t.from,st.fromVector4(new q(n=null==n?0:n,i=null==(i=e.y)?0:i,s=null==(s=e.z)?0:s,a=null==(a=e.w)?1:a)))),t.relative&&(m&&(r=e,o=null==(c=(l=t.to).x)||null==(d=r.x)?null:c+d,u=null==(c=l.y)||null==(d=r.y)?null:c+d,h=null==(c=l.z)||null==(d=r.z)?null:c+d,_=null==(c=l.w)||null==(d=r.w)?null:c+d,t.to=st.fromBacking(new it(null!=o?o:l.x,null!=u?u:l.y,null!=h?h:l.z,null!=_?_:l.w))),p)&&(r=e,o=null==(c=(l=t.from).x)||null==(d=r.x)?null:c+d,u=null==(c=l.y)||null==(d=r.y)?null:c+d,h=null==(c=l.z)||null==(d=r.z)?null:c+d,_=null==(c=l.w)||null==(d=r.w)?null:c+d,t.from=st.fromBacking(new it(null!=o?o:l.x,null!=u?u:l.y,null!=h?h:l.z,null!=_?_:l.w))),Tt.cancelUsedAxis(e,t),t.time=0,t},Tt.cancelTween=function(e,t,n){(n=null==n?!1:n)?t.time=t.duration+t.delay+1:(t.to=st.fromBacking(new it(null,null,null,null)),e.tweenSignal.handlers.invoke({_0:t,_1:!1}))},Tt.update=function(e,t){if(e._active.concat(e._scheduled).length<=0)return!1;for(var n=0,i=e._scheduled;n<i.length;){var s=i[n];++n,s.delay-=t,s.delay<=0&&(s.delay=0,Jn.remove(e._scheduled,s),e._active.push(Tt.setupTween(e,s)))}for(n=0,i=e._active;n<i.length;){var a,l,r,o,u,s=i[n],h=(++n,s.time+=t,!1),c=0<s.time?s.time/s.duration:0,_=(1<=(c=isNaN(c)||s.duration<=0?1:c)&&(h=!s.repeat,s.time=s.repeat?0:s.time,c=1,null!=s.onRepeat)&&s.onRepeat(),(s.duration-Math.min(s.curveDuration,s.duration))/s.duration);null!=s.to.x&&(null!=s.curveDuration?(a=s.to.x-(s.to.x-s.from.x)*_,c<1-_?e.x=s.from.x*(1-c)+a*c:(l=s.curve(c),e.x=a*(1-l)+s.to.x*l)):(a=s.curve(c),e.x=s.from.x*(1-a)+s.to.x*a)),null!=s.to.y&&(null!=s.curveDuration?(l=s.to.y-(s.to.y-s.from.y)*_,c<1-_?e.y=s.from.y*(1-c)+l*c:(r=s.curve(c),e.y=l*(1-r)+s.to.y*r)):(r=s.curve(c),e.y=s.from.y*(1-r)+s.to.y*r)),null!=s.to.z&&(null!=s.curveDuration?(o=s.to.z-(s.to.z-s.from.z)*_,c<1-_?e.z=s.from.z*(1-c)+o*c:(u=s.curve(c),e.z=o*(1-u)+s.to.z*u)):(o=s.curve(c),e.z=s.from.z*(1-o)+s.to.z*o)),null!=s.to.w&&(null!=s.curveDuration?(u=s.to.w-(s.to.w-s.from.w)*_,c<1-_?e.w=s.from.w*(1-c)+u*c:(_=s.curve(c),e.w=u*(1-_)+s.to.w*_)):(_=s.curve(c),e.w=s.from.w*(1-_)+s.to.w*_)),null!=s.onUpdate&&s.onUpdate(e.x,e.y,e.z,e.w),h&&e.tweenSignal.handlers.invoke({_0:s,_1:!0})}return!0},Tt.getDuration=function(e){return il.reduce(e._active.concat(e._scheduled),function(e,t){return Math.max(t.duration+t.delay-t.time,e)},0)},function(e,t,n,i){null==i&&(i=1),null==n&&(n=0),null==t&&(t=0),this.x=e=null==e?0:e,this.y=t,this.z=n,this.w=i}),Et=((i["h3d.Vector4Impl"]=q).__name__="h3d.Vector4Impl",q.prototype={__class__:q},function(e,t,n,i){null==i&&(i=1),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this._scheduled=[],this._active=[],this.tweenSignal=new r1,q.call(this,e,t,n,i)}),Ft=((i["gasm.heaps.transform.TweenVectorBacking"]=Et).__name__="gasm.heaps.transform.TweenVectorBacking",Et.__super__=q,Et.prototype=e(q.prototype,{dispose:function(){this._active=[],this._scheduled=[]},get_isTweening:function(){return!(this._active.length<=0)||0<this._scheduled.length},__class__:Et,__properties__:{get_isTweening:"get_isTweening"}}),{}),Dt=(Ft.toVector=function(e){return st.fromBacking(new it((e>>16&255)/255,(e>>8&255)/255,(255&e)/255,(e>>24&255)/255))},{}),it=(Dt.eq=function(e,t){return e==t},function(e,t,n,i){this.w=null,this.z=null,this.y=null,this.x=null,this.x=e,this.y=t,this.z=n,this.w=i}),st=((i["gasm.heaps.types.VecBacking"]=it).__name__="gasm.heaps.types.VecBacking",it.prototype={__class__:it},{});function Rt(s,t,a){function l(n,e){var t,i;c&&!h||_?_||r.trigger(e):(t=s[u=n],n==s.length?null!=a&&a.loop&&!h?l(u=0,e):(null!=a&&a.parallel||h?rt.inParallel(o).handle(function(){r.trigger(e)}):r.trigger(e),_=!0):(t=null==t?null:t(e),il.pushIf(o,null!=t,t),h||null!=a&&a.parallel&&(null==a||!a.loop)||null==t?(i=u+=1,l(i,e)):t.handle(function(e){var t=n+=1;l(t,e)})))}var e,r=new qy,o=[],u=0,h=!1,c=!1,_=!1;return r.handle(function(){_=!0}),l(0,t),null!=a&&null!=(e=a.cancel)&&e.handle(function(e){_||(e?(h=!0,e=u+=1,l(e,t)):c=!0)}),r}function Pt(e){this.followRotation=!1,this.posChanged=!0,this.x=0,this.posChanged=!0,this.y=0,this.posChanged=!0,this.scaleX=1,this.posChanged=!0,this.scaleY=1,this.posChanged=!0,this.rotation=0,this.posChanged=!0,this.anchorX=0,this.posChanged=!0,this.anchorY=0,this.viewX=0,this.viewY=0,this.viewW=1,this.viewH=1,this.visible=!0,null!=e&&e.addCamera(this)}function zt(e,t){this.prevChar=e,this.offset=t}function Qt(e,t){this.t=e,this.width=t}function Vt(e,t,n){this.offsetY=0,this.offsetX=0,this.name=e,this.size=t,this.initSize=t,this.glyphs=new Je,this.defaultChar=this.nullChar=new Qt(new Ir(null,0,0,0,0),0),this.charset=Hx.getDefault(),null!=e&&(this.tilePath=KA.withExtension(e,"png")),this.type=null==n?yr.BitmapFont:n}function Ot(){}function Wt(){this.refCount=0,this.forcedLod=-1}function Nt(){Wt.call(this),this.buffers=[],this.state=new Dr,this.allocPos=C0.make()}function Gt(e){this.bevel=.25,this.my=0,this.mx=0,this.md=1,this.mc=0,this.mb=0,this.ma=1,Mt.call(this,e),this.content=new Nt,this.tile=Ir.fromColor(16777215),this.clear()}function Ut(){}function Lt(e){kt.call(this,e),this.layersIndexes=[],this.layerCount=0}function jt(){this.shaderBuffers=new zo,this.engine=Vr.CURRENT,this.frame=0,this.time=0,this.elapsedTime=1/u0.getDefaultFrameRate(),this.textures=new Jr,this.globals=new dw}function Ht(e){this.renderZoneIndex=0,this.renderZoneStack=[],this.currentCamera=null,this.tmpBounds=new Tr,this.defaultSmooth=!1,this.globalAlpha=1,jt.call(this),this.scene=e,this.bufPos=0,this.output=new fo,this.pass=new ho("",null),this.pass.depth(!0,to.Always),this.pass.set_culling($r.None),this.baseShader=new Do,this.baseShader.setPriority(100),this.baseShader.zValue__=0,this.baseShaderList=new Cw(this.baseShader),this.targetsStack=[],this.targetsStackIndex=0,this.cameraStack=[],this.cameraStackIndex=0,this.filterStack=[],this.filterStackIndex=0}function Yt(){this.useAllocatorLimit=1024,Wt.call(this),this.state=new Dr,this.clear()}function Zt(){}function Xt(e,t){null==t&&(t=0),this.x=e=null==e?0:e,this.y=t}function qt(){}function Kt(){this.useScreenResolution=Kt.defaultUseScreenResolution,this.resolutionScale=1,this.enable=!0,this.smooth=!1,this.boundsExtend=0,this.autoBounds=!0}function Jt(){this.maskMatB__=new Gr(0,0,0),this.maskMatA__=new Gr(0,0,0),W.call(this)}function $t(e,t,n,i,s,a){null==a&&(a=!1),null==s&&(s=4e3),null==i&&(i=.02),null==n&&(n=1.333333),null==t&&(t=1),null==e&&(e=25),this.reverseDepth=!1,this.jitterOffsetY=0,this.jitterOffsetX=0,this.viewY=0,this.viewX=0,this.fovY=e,this.zoom=t,this.screenRatio=n,this.zNear=i,this.zFar=s,this.rightHanded=a,this.pos=new Gr(2,3,4),this.up=new Gr(0,0,1),this.target=new Gr(0,0,0),this.m=new Wr,this.mcam=new Wr,this.mproj=new Wr,this.frustum=new Lr,this.update()}function en(e,t,n,i,s){this.t=e,this.next=t,this.layer=n,this.mipLevel=i,this.depthBinding=s}function tn(e,t,n,i){null==i&&(i=1),null==n&&(n=0),null==t&&(t=0),this.x=e=null==e?0:e,this.y=t,this.z=n,this.w=i}function nn(){}function sn(e,t,n){this.name=e,this.frameCount=t,this.sampling=n,this.objects=[],this.lastEvent=-1,this.frame=0,this.speed=1,this.loop=!0,this.pause=!1}function an(){this.bindIndex=-1,this.splitIndex=-1,this.subs=[]}function ln(){this.slackness=0,this.resistance=1,this.stiffness=1,this.damping=1,this.lockAxis=new Gr(0,0,0),this.additive=!1,this.globalForce=new Gr(0,0,0),an.call(this)}function rn(){}function on(e,t,n){this.name=e,this.vertexCount=t,this.bonesPerVertex=n,0<t&&(this.vertexJoints=new Array(t*n),this.vertexWeights=new Array(t*n),this.envelop=[])}function un(){}function hn(e,t){this.a=e,this.b=t}function cn(e){this.colliders=e}function _n(){}function dn(e,t){this.obj=e,this.collider=t}function pn(e){null==e&&(e=!1),this.next=null,this.oriented=e}function mn(e){this.oriented=e=null==e?!1:e}function gn(){}function fn(e,t){this.lastBoundsFrame=-1,this.lastFrame=-1,this.obj=e,this.col=t,this.transform=new gn;var e=this.transform,n=t.buffer,i=new Array(n.length);GA.blit(n,0,i,0,n.length),e.setData(i,t.indexes,t.startIndex,t.triCount),this.currentBounds=new Ur}function An(e,t,n,i){var s=e=null==e?0:e,a=t=null==t?0:t,l=n=null==n?0:n,i=null==(i=null==i?1:i)?0:i;null==n&&(l=0),null==t&&(a=0),this.x=s=null==e?0:s,this.y=a,this.z=l,this.r=i}function xn(e,t){this.invMat=new Wr,this.set_mat(e),this.collider=t}function wn(){}function yn(e,t,n){this.s=e,this.kind=t,this.shader=n}function bn(){}function vn(){}function Sn(){this.triCount=0}function kn(){}function Mn(){}function In(e){null!=e&&this.addPass(new ho("default",null)).addShader(e)}function Bn(e){this.mshader=new Ro,this.set_blendMode(wr.None),In.call(this,this.mshader),this.set_texture(e)}function Tn(){this.db=new at}function En(e,t,n,i,s){this.layers=n,(i=null==i?[]:i).push(ro.IsArray),_o.call(this,e,t,i,s)}function Fn(e,t,n,i){null==i&&(i=1),null==n&&(n=0),null==t&&(t=1),null==e&&(e=1),this.cubeDir=[Nr.L([0,0,-1,0,0,-1,0,0,1,0,0,0]),Nr.L([0,0,1,0,0,-1,0,0,-1,0,0,0]),Nr.L([1,0,0,0,0,0,1,0,0,1,0,0]),Nr.L([1,0,0,0,0,0,-1,0,0,-1,0,0]),Nr.L([1,0,0,0,0,-1,0,0,0,0,1,0]),Nr.L([-1,0,0,0,0,-1,0,0,0,0,-1,0])],mo.call(this,new Po),this.set_radius(e),this.set_quality(i),this.set_gain(t),this.set_linear(n)}function Dn(){this.layer__=0,W.call(this)}function Rn(){W.call(this)}function Pn(){this.mat__=new Wr,W.call(this)}function zn(e,t){this.defaultSort=Cn(R=new wo,R.sort),this.name=e,this.output=new fo(t)}function Qn(e){this.pcfScale=1,this.pcfQuality=1,this.bias=.01,this.power=30,this.samplingKind=xo.None,this.size=1024,this.mode=Ao.None,this.enabled=!0,this.updateStatic=!1,null==this.format&&(this.format=C.R16F),Vr.CURRENT.driver.isSupportedFormat(this.format)||(this.format=_o.nativeFormat),zn.call(this,"shadow",this.getOutputs()),this.light=e,this.blur=new Fn(5),this.blur.set_quality(.5),(e=this.blur.shader).constModified=!0,e.isDepth__=this.format==_o.nativeFormat}function Vn(e){this.minDist=-1,this.maxDist=-1,this.autoZPlanes=!1,this.autoShrink=!0,this.mergePass=new mo(new Oo),Qn.call(this,e),this.lightCamera=new $t,this.lightCamera.orthoBounds=new Ur,this.shader=this.dshader=new Qo}function On(e,t){null==e&&(e=1024),null!=t&&(this.format=t),Vn.call(this,null),this.set_size(e),this.color=new Gr(0,0,0),this.set_mode(Ao.Dynamic),this.shadowMapId=dw.allocID("shadow.map"),this.shadowProjId=dw.allocID("shadow.proj"),this.shadowColorId=dw.allocID("shadow.color"),this.shadowPowerId=dw.allocID("shadow.power"),this.shadowBiasId=dw.allocID("shadow.bias")}function Wn(e){this.current=e,this.discarded=this.lastDisc=null}function Nn(){this.texture=0}function Gn(e,t){if(this.isStatic=!0,this.startIndex=0,this.idxPos=0,this.bufPos=0,Wt.call(this),this.format=e,this.buffers=[],this.allIndexes=[],this.bounds=new Ur,this.allocator=t,e.stride<3)throw tl.thrown("Minimum stride = 3");this.allocPos=C0.make()}function Un(e,t){this.blendshape=e,this.mesh=t,e.incref(),this.weightsBuffer=S0.get().allocFloats(e.shapes.length)}function Ln(e){if(this.shapesBytes=[],this.inputMapping=[],this.refCount=0,(this.hmdModel=e).get_data().vertexFormat.hasLowPrecision)throw tl.thrown("Blend shape doesn't support low precision");for(var t=e.get_data().vertexFormat,n=0,i=e.lib.header.geometries,s=0;s<i.length;)i[s++]==e.get_data()&&(n=s-1);for(var a=[],l=0,r=e.lib.header.shapes;l<r.length;){var o=r[l];++l,o.geom==n&&a.push(o)}for(this.shapes=a,a=0,l=this.shapes.length;a<l;){var u=(o=this.shapes[a++]).vertexCount*o.vertexFormat.strideBytes,h=new IA(new ArrayBuffer(u)),c=(e.lib.resource.entry.readBytes(h,0,e.dataPosition+o.vertexPosition,u),u=e.get_data().vertexCount<<2,new IA(new ArrayBuffer(u)));e.lib.resource.entry.readBytes(c,0,e.dataPosition+o.remapPosition,u),this.shapesBytes.push({vertexBytes:h,remapBytes:c}),this.inputMapping.push(new at)}for(i=t.inputs,s=0;s<i.length;)for(var _=i[s++],a=0,l=this.shapes.length;a<l;)for(var o=a++,d=0,p=this.shapes[o].vertexFormat.inputs,m=0;m<p.length;){var g=p[m++],g=(g.name==_.name&&(this.inputMapping[o].h[g.name]=d),g.type);d+=g==nl.__cast(9,A1)?1:g}}function jn(e,t){this.hmdModel=e,this.data=t}function Hn(){Wt.call(this)}function Yn(e,t){this.translatedZ=0,this.translatedY=0,this.translatedX=0,this.scaled=1,Hn.call(this),this.points=e,this.idx=t}function Zn(e,t,n,i){null==i&&(i=!1),null==n&&(n=1),null==t&&(t=1),this.sizeX=e=null==e?1:e,this.sizeY=t,this.sizeZ=n;var s=new Gr(0,0,0),a=e,l=new Gr(a=null==e?0:a,0,0),r=t,o=new Gr(0,r=null==t?0:r,0),u=new Gr(0,0,null==n?0:n),a=e,h=new Gr(a=null==e?0:a,r=null==t?0:t,0),a=e,c=new Gr(a=null==e?0:a,0,null==n?0:n),r=t,_=new Gr(0,r=null==t?0:r,null==n?0:n),a=e,r=t,a=new Gr(a=null==e?0:a,r=null==t?0:r,null==n?0:n);(r=new Array(0)).push(0),r.push(1),r.push(5),r.push(0),r.push(5),r.push(3),r.push(1),r.push(4),r.push(7),r.push(1),r.push(7),r.push(5),r.push(3),r.push(5),r.push(7),r.push(3),r.push(7),r.push(6),r.push(0),r.push(6),r.push(2),r.push(0),r.push(3),r.push(6),r.push(2),r.push(7),r.push(4),r.push(2),r.push(6),r.push(7),r.push(0),r.push(4),r.push(1),r.push(0),r.push(2),r.push(4),Yn.call(this,[s,l,o,u,h,c,_,a],r),i&&this.translate(.5*-e,.5*-t,.5*-n)}function Xn(e,t,n,i){if(this.lodConfig=null,Hn.call(this),this.lods=[e],null!=i)for(var s=0;s<i.length;)this.lods.push(n.header.geometries[i[s++].geometry]);this.dataPosition=t,null!=(this.lib=n).header.shapes&&0<n.header.shapes.length&&(this.blendshape=new Ln(this)),null!=n.header.colliders&&0<n.header.colliders.length&&(this.colliderData=jn.fromHmd(this))}function qn(){}function Kn(e){this.lineSize=0,this.curR=0,this.curZ=0,this.curY=0,this.curX=0,this.bprim=new Gn(Lx.get_POS3D_NORMAL_UV_RGBA()),this.bprim.isStatic=!1,Co.call(this,this.bprim,null,e),this.tmpPoints=[],this.lineShader=new Vo,this.lineShader.setPriority(-100),(e=this.material).set_castShadows(!1),e.set_receiveShadows(!1),this.material.passes.set_enableLights(!1),this.material.passes.addShader(this.lineShader),(e=new Yo).setPriority(-100),this.material.passes.addShader(e),this.material.passes.set_culling($r.None)}function $n(e,t){this.hitPoint=new q(0,0,0,1),this.lastClickFrame=-1,this.mouseDownButton=-1,this.emittedLastFrame=!1,this.isAbsoluteShape=!1,this.allowMultiClick=!1,this.enableRightButton=!1,this.propagateEvents=!1,this.cancelEvents=!1,Hr.call(this,t),this.shape=e,this.set_cursor(Yx.Button)}function ei(e,t){Hr.call(this,t),this.shader=e}function ti(){}function ni(e,t,n){Co.call(this,e,null==t?null:t[0],n),this.materials=null==t?[this.material]:t}function ii(e){this.cameraFrustumUploaded=!1,this.cameraFrustumBuffer=null,this.forcedScreenRatio=-1,jt.call(this),this.scene=e,this.camera=new $t,this.cachedShaderList=[],this.cachedPassObjects=[],this.initGlobals()}function si(){this.passes=new Wn}function ai(){this.effects=[],this.hasSetTarget=!1,this.emptyPasses=new Wn,this.allPasses=[],this.passObjects=new at,this.set_props(this.getDefaultProps());var t=this,n=(this.frontToBack=function(e){t.depthSort(!0,e)},this);this.backToFront=function(e){n.depthSort(!1,e)}}function li(e,t){Hr.call(this,null),this.name=t.name,this.skin=e,this.lastFrame=-2,this.parent=e,this.index=t.index}function ri(e,t){this.priority=0,this.cullingDistance=-1,ei.call(this,e,t)}function oi(){this.enableSky=!1,zn.call(this,"depth",[gw.PackFloat(gw.Value("output.depth"))]),this.depthMapId=dw.allocID("depthMap")}function ui(){zn.call(this,"normal",[gw.PackNormal(gw.Value("output.normal"))]),this.normalMapId=dw.allocID("normalMap")}function hi(){this.vcount__=0,this.shapeCount__=0,O.call(this)}function ci(){this.globals=new Float32Array(0),this.params=new Float32Array(0),this.tex=new Array(0)}function _i(e){null==e&&(e=0),this.color__=new Gr(0,0,0),O.call(this);var t=this.color__;t.x=(e>>16&255)/255,t.y=(e>>8&255)/255,t.z=(255&e)/255}function di(e){null==e&&(e=0),this.colorKey__=new q(0,0,0,1),O.call(this);var t=this.colorKey__;t.x=(e>>16&255)/255,t.y=(e>>8&255)/255,t.z=(255&e)/255,t.w=(e>>>24)/255}function pi(e){this.enabled__=!0,this.matrix__=new Wr,O.call(this),null!=e?this.matrix__.loadValues(e):this.matrix__.identity()}function mi(){this.color__=new q(0,0,0,1),this.mode__=0,W.call(this)}function gi(){this.mat__=new Wr,W.call(this)}function fi(){this.multiplyAlpha__=0,this.color__=new q(0,0,0,1),this.samples__=0,this.size__=new Gr(0,0,0),W.call(this)}function Ai(){O.call(this)}function xi(){this.prevBonesMatrixes__=[],this.bonesMatrixes__=[],this.calcPrevPos__=!1,this.fourBonesByVertex__=!1,this.MaxBones__=0,O.call(this),this.constModified=!0,this.MaxBones__=34}function wi(e,t,n,i){null==i&&(i=1),null==n&&(n=1),null==t&&(t=0),null==e&&(e=0),this.uvScale__=new Gr(0,0,0),this.uvDelta__=new Gr(0,0,0),O.call(this);var s=this.uvDelta__,a=e,t=null==t?0:t;s.x=a=null==e?0:a,s.y=t,s.z=0,a=n,t=null==i?0:i,(s=this.uvScale__).x=a=null==n?0:a,s.y=t,s.z=0}function yi(){O.call(this)}function bi(e,t){this.isCentered__=!0,this.tangent__=new Gr(0,0,0),this.normal__=new Gr(0,0,0),this.scale__=new Gr(0,0,0),O.call(this);var n=this.normal__;n.x=0,n.y=0,n.z=1,(n=this.tangent__).x=1,n.y=0,n.z=0,e=1/e,null==(t=1/t)&&(t=0),(n=this.scale__).x=e=null==e?0:e,n.y=t,n.z=0}function vi(e,t,n){this.jurisdiction=null,this.serverGameInfo=e,this.overrides=t,null!=n&&(this.jurisdiction=n)}function Ci(e,t,n,i,s,a,l,r,o){this.gameInfoDataCallback=null,this.gameRestoreTrigger=null,this.uiCustomSettings=null,this.parallelRoundsSupport=!1,this.maxWinOdds=null,this.maxWinMultiplier=null,this.autoplayRoundDelay=150,this.gameRoundDelays=e,this.reactGameModes=t,null!=n&&(this.autoplayRoundDelay=n),null!=i&&(this.maxWinMultiplier=i),null!=s&&(this.maxWinOdds=s),null!=a&&(this.parallelRoundsSupport=a),null!=l&&(this.uiCustomSettings=l),null!=r&&(this.gameRestoreTrigger=r),null!=o&&(this.gameInfoDataCallback=o)}function Si(){}function ki(){}function Mi(){}function Ii(){}function Bi(){}function Ti(){}function Ei(){}function Fi(e,t){this.start=e,this.end=t}function Di(e,t,n,i,s,a,l,r,o,u,h){this.customClassName=null,this.featureBuyItemType=null,this.betCostMultiplierBaseGameEffect=!1,this.volatility2=null,this.volatility=null,this.description=null,this.image=null,this.expectedRtp=null,this.betCostMultiplier=null,this.bonusGameId=e,this.name=t,null!=n&&(this.betCostMultiplier=n),null!=i&&(this.expectedRtp=i),null!=s&&(this.image=s),null!=a&&(this.description=a),null!=l&&(this.volatility=l),null!=r&&(this.volatility2=r),null!=o&&(this.betCostMultiplierBaseGameEffect=o),null!=u&&(this.featureBuyItemType=u),null!=h&&(this.customClassName=h)}function Ri(){}function Pi(e,t){this.start=e,this.end=t}function zi(){}function Qi(e,t){this.start=e,this.end=t}function Vi(){}function Oi(){}function Wi(){}function Ni(){}function Gi(){}function Ui(){}function Li(){}function ji(){}function Hi(){}function Yi(){}function Zi(){}function Xi(){}function qi(){}function Ki(){}function Ji(){}function $i(){}function es(){}function ts(){}function ns(){}function is(){}function ss(){}function as(){}function ls(){}function rs(){}function os(){}function us(){}function t(){U.typeof(t.wintier_1),U.typeof(t.music_bonus_level_2),U.typeof(t.update_sweep_2),U.typeof(t.bag_zipper_ding),U.typeof(t.symdrop_3),U.typeof(t.spurs_wood_1),U.typeof(t.bush_hawk_transit),U.typeof(t.pop_glitter_1),U.typeof(t.infuriated_3),U.typeof(t.delighted_1),U.typeof(t.music_level_2),U.typeof(t.music_bonus_level_1),U.typeof(t.spurs_wood_2),U.typeof(t.diamond),U.typeof(t.dropgrid_out),U.typeof(t.delighted_3),U.typeof(t.win_end_bet_high),U.typeof(t.fuming_1),U.typeof(t.suspense_drums),U.typeof(t.arrow),U.typeof(t.western_bonus_3),U.typeof(t.impact_gun_spin),U.typeof(t.raccoon_welcome_3),U.typeof(t.symdrop_1),U.typeof(t.western_vignette_1),U.typeof(t.bugle_cannon_1),U.typeof(t.update_sweep_6),U.typeof(t.holster_gun_faster),U.typeof(t.gunshot_clicks_2),U.typeof(t.click_drop_5),U.typeof(t.bass_hit_5),U.typeof(t.coins_pour),U.typeof(t.music_bonus_3_level_0),U.typeof(t.ping_3),U.typeof(t.whistle_downer),U.typeof(t.wintier_2),U.typeof(t.plastic_click),U.typeof(t.pop_glitter_2),U.typeof(t.reeldrop_1),U.typeof(t.medium_coin_3),U.typeof(t.drumroll),U.typeof(t.holster_gun),U.typeof(t.delighted_4),U.typeof(t.ricochet_3),U.typeof(t.flute_vignette_whip_3),U.typeof(t.ping_1),U.typeof(t.western_bonus_1),U.typeof(t.update_sweep_1),U.typeof(t.infuriated_2),U.typeof(t.pling),U.typeof(t.update_sweep_3),U.typeof(t.music_bonus_level_3),U.typeof(t.ping_2),U.typeof(t.update_sweep_5),U.typeof(t.click_open),U.typeof(t.medium_coin_2),U.typeof(t.big_coin_2),U.typeof(t.music_bonus_2_level_2),U.typeof(t.spin_crunchy_3),U.typeof(t.click_drop_3),U.typeof(t.plink_1),U.typeof(t.plink_3),U.typeof(t.lecowboy_intro),U.typeof(t.plink_4),U.typeof(t.cymbal_crash),U.typeof(t.click_sweep),U.typeof(t.wintier_3),U.typeof(t.music_bonus_2_level_0),U.typeof(t.pistol_boing_whistle),U.typeof(t.music_bonus_2_level_1),U.typeof(t.fountain_start),U.typeof(t.raccoon_welcome_2),U.typeof(t.small_coin_3),U.typeof(t.bugle_cannon_2),U.typeof(t.bass_hit_4),U.typeof(t.spur_whistle),U.typeof(t.gun_draw),U.typeof(t.medium_coin_1),U.typeof(t.cartoon_move),U.typeof(t.small_coin_2),U.typeof(t.pop_guncock),U.typeof(t.dropswoosh_in),U.typeof(t.fuming_2),U.typeof(t.heavy_poof),U.typeof(t.spin_crunchy_1),U.typeof(t.big_coin_1),U.typeof(t.click_close),U.typeof(t.symdrop_4),U.typeof(t.win_end_bet_over),U.typeof(t.happy_1),U.typeof(t.update_sweep_4),U.typeof(t.nail_board_shimmer),U.typeof(t.click_drop_4),U.typeof(t.whirl_1),U.typeof(t.happy_2),U.typeof(t.western_vignette_3),U.typeof(t.success_2),U.typeof(t.music_bonus_level_0),U.typeof(t.spurs_wood_3),U.typeof(t.spurs_wood_4),U.typeof(t.bass_hit_1),U.typeof(t.spin_crunchy_2),U.typeof(t.count_blip),U.typeof(t.raccoon_welcome_1),U.typeof(t.music_level_3),U.typeof(t.gunshot_clicks_1),U.typeof(t.win_end_bet_low),U.typeof(t.poof),U.typeof(t.bugle_wet_1),U.typeof(t.wintier_4),U.typeof(t.coins_swoosh_new),U.typeof(t.swoosh),U.typeof(t.gunshot_clicks_3),U.typeof(t.music_bonus_2_level_3),U.typeof(t.click_drop_2),U.typeof(t.win_count_1),U.typeof(t.symdrop_2),U.typeof(t.coin_swoosh),U.typeof(t.fuming_3),U.typeof(t.music_level_0),U.typeof(t.poof_metallic),U.typeof(t.dropgrid_in),U.typeof(t.western_bonus_2),U.typeof(t.western_vignette_2),U.typeof(t.flute_vignette_whip_1),U.typeof(t.delighted_2),U.typeof(t.ricochet_2),U.typeof(t.cork_pop),U.typeof(t.bass_hit_3),U.typeof(t.desert_ambience),U.typeof(t.small_coin_1),U.typeof(t.ricochet_1),U.typeof(t.ping_clicks_reload),U.typeof(t.shotgun_cock),U.typeof(t.plink_2),U.typeof(t.big_coin_3),U.typeof(t.loud_ping),U.typeof(t.vibraslap),U.typeof(t.success_1),U.typeof(t.music_level_1),U.typeof(t.flute_vignette_whip_2),U.typeof(t.bass_hit_2),U.typeof(t.scratch),U.typeof(t.bugle_wet_2),U.typeof(t.pop_weapon),U.typeof(t.ricochet_4),U.typeof(t.infuriated_1),U.typeof(t.click_drop_1)}function hs(){}function cs(){}function _s(){}function ds(){}function ps(){}function ms(){}function gs(){}function fs(){}function As(){}function xs(){}function ws(){}function ys(){}function bs(){}function vs(){}function Cs(){}function Ss(){}function K(){U.typeof(K.coin_reveal),U.typeof(K.symbols),U.typeof(K.range_reveal),U.typeof(K.bullet_indicator),U.typeof(K.coin),U.typeof(K.countup_tiers),U.typeof(K.shooting_range),U.typeof(K.smokey)}function ks(){}function Ms(e){this.preloaderBackplateTile=null;for(var t=window.document.createElement("script"),n=(t.type="text/javascript",t.src="vendor/needles.umd.js",window.document.body.appendChild(t),ky.divisionExtraScale=6,this._casinoModel=new _u,this._soundTriggers=new uu(Cn(this,this.addSoundEventHandler)),null==e.mobileAssetDir&&(e.mobileAssetDir="sd"),null==e.desktopAssetDir&&(e.desktopAssetDir="hd"),this._config=e,this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),this._uiChannel=hacksawCasino.PubSub.getChannel("ui"),Hx.DEFAULT_CHARS=null!=e.charset?e.charset:Hx.DEFAULT_CHARS,ks.init(),this._assetContainers={},0),i=U.getClassFields(this._config.assets);n<i.length;){var s=i[n];++n,this._assetContainers[s]=X.field(this._config.assets,s)}this._assetContainers.fonts=new at,this._assetContainers.bitmapFonts=new at,this._assetContainers.brandingConfigs={gameconfig:null,sounds:null,groups:null,events:null,pools:null};try{sl.call(this)}catch(n){CA.lastError=n;t=el.string(tl.caught(n).unwrap());this._casinoChannel.publish("gameError",{errorCode:1002,logData:{message:t}})}t=e.preloader.backgroundColor,this.setBackgroundColor(null==t?e.backgroundColor:t),this.sdScale=this._config.sdScale}function Is(e,t,n){this.enabledDevices=null,this.disabledDevices=null,this.name=e,null!=t&&(this.disabledDevices=t),null!=n&&(this.enabledDevices=n)}function Bs(e){this._tweenDoneTrigger=new qy,d.call(this),this.componentType=Ie.Actor,this.tweenDone=this._tweenDoneTrigger,this._removeHandle=this.tweenDone.handle(Cn(this,this.remove)),this._config=e}function Ts(e,t,n,i){this.delay=0,this.curve=null,this.duration=1,this.color=e,null!=t&&(this.duration=t),null!=n&&(this.curve=n),null!=i&&(this.delay=i)}function Es(e){this._resizeConnection=null,this._selected=!1,this._nextRepeat=1/0,this.holdDuration=.3,this.currentStates=0,d.call(this),this._lastStates=this.currentStates,this._config=e,this.componentType=Ie.Actor}function Fs(e,t){this.onExit=function(e){},this.onEnter=function(e){},null!=e&&(this.onEnter=e),null!=t&&(this.onExit=t)}function Ds(e,t,n,i){this.repeatDelay=null,this.stateActions=new PA,this.selectAction=function(e){},this.getCollider=function(e){var t=e.parent.getCollider();return null!=t?t:e.parent.getBounds()},null!=e&&(this.getCollider=e),null!=t&&(this.selectAction=t),null!=n&&(this.stateActions=n),null!=i&&(this.repeatDelay=i)}function Rs(e){this._onClickScreenToken=null,this._cancelled=!1,this._skip=!1,this._startArgs=null,this._doneTriggers=new VA,this.onSkip=function(){return new Zy(new Yy(null))},d.call(this),this.componentType=Ie.Actor,this._multiplyTrigger=s1.trigger(),this._multiplyStartTrigger=s1.trigger(),this._multiplyRemoveTrigger=s1.trigger(),this._multiplyResultTrigger=s1.trigger(),this._updateTrigger=s1.trigger(),this._showTrigger=s1.trigger(),this.multiplyStartSignal=this._multiplyStartTrigger,this.multiplySignal=this._multiplyTrigger,this.multiplyRemoveSignal=this._multiplyRemoveTrigger,this.multiplyResultSignal=this._multiplyResultTrigger,this.updateSignal=this._updateTrigger,this.showSignal=this._showTrigger,this._tweenContainer=(new ge).add(new B),this._posContainer=(new ge).add(new B),this._config=e}function Ps(e,t,n){this.multiplied=null,this.style=null,this.totalAmount=e,null!=t&&(this.style=t),null!=n&&(this.multiplied=n)}function zs(e,t,n){this.style=e,this.baseAmount=t,this.multipliers=n}function Qs(e,t,n,i,s,a,l,r){this.continueAfterSkip=!0,this.position=st.fromBacking(new it(0,0,0,null)),this.margins={x:.03,y:.03},this.getAddedBounds=null,this.disableFitting=!1,this.getFitBounds=null,this.multiplier=null,this.amount=e,null!=t&&(this.multiplier=t),null!=n&&(this.getFitBounds=n),null!=i&&(this.disableFitting=i),null!=s&&(this.getAddedBounds=s),null!=a&&(this.margins=a),null!=l&&(this.position=l),null!=r&&(this.continueAfterSkip=r)}function Vs(e){null==e&&(e=0),d.call(this),this.componentType=Ie.Actor,this._delay=e}function Os(e){this._pubSubChannels=[],this._pubSubTokens=[],this._onCloseFunctions=[function(e){return rt.NOISE}],this._dialogClosing=null,this._buttons=[],d.call(this),this._config=e,this.componentType=Ie.Actor}function Ws(e,t,n){this.buttons=new PA,this.displayables=new PA,this.closeBehaviors=e,null!=t&&(this.displayables=t),null!=n&&(this.buttons=n)}function Ns(e){d.call(this),this._config=e,this.componentType=Ie.Actor}function Gs(e){this.animations=e}function Us(){this._tweenVector=new Et(0,0,0,1),P.call(this)}function Ls(){this._reducedLevel=!1,this._enabled=!0,this._elapsed=0,this._mode="base",this._winChecked=0,this._wins=[],this.floor=0,this.stick=!1,this.excitement=0,d.call(this),this.componentType=Ie.ActiveModel}function js(e){function n(e){hacksawCasino.PubSub.getChannel("casino").unsubscribe(i),hacksawCasino.PubSub.getChannel("game").unsubscribe(s),e(null)}this._tweeningCards=[],this._onSplashFocused=null,this._timeLeft=0,this._activeSplashIndex=0,this._displayables=[],this._splashes=[],this.onContinue=null,B.call(this),this._config=e;var i=null,s=null;(e=rt.irreversible(function(t){i=hacksawCasino.PubSub.getChannel("casino").subscribe("clickScreen",function(e){n(t)}),s=hacksawCasino.PubSub.getChannel("game").subscribe("closeSplash",function(e){n(t)})})).eager(),this.onContinue=e}function Hs(e,t,n,i){this.yOffset=0,this.background=null,this.body=null,(this.header=null)!=e&&(this.header=e),null!=t&&(this.body=t),null!=n&&(this.background=n),null!=i&&(this.yOffset=i)}function Ys(e,t,n,i,s,a,l,r){this.epicSticker=null,this.splashTimeout=2,this.xSpacing=1,this.clickToContinue=null,this.topHeader=null,this.volatility=null,this.logo=e,null!=t&&(this.volatility=t),null!=n&&(this.topHeader=n),null!=i&&(this.clickToContinue=i),null!=s&&(this.xSpacing=s),null!=a&&(this.splashTimeout=a),this.splashes=l,null!=r&&(this.epicSticker=r)}function Zs(e,t){this._anchor=Me.NONE,this._showTextArgs=null,B.call(this,t),this._config=e,this._anchor=e.anchor}function Xs(e,t){this._stepTexts=new VA,this._pauseDuration=0,this._tierChangedAt=0,this._counting=!1,this._skipFromTier=null,this._countupConfig=e,null==t&&(t=new Ge(new te(this._countupConfig.margins.y,this._countupConfig.margins.y,this._countupConfig.margins.x,this._countupConfig.margins.x),null,null,null,null,1,.1,null));for(var n=this._countupConfig.tiers,i=[],s=0;s<n.length;){var a=n[s];++s,0<a.duration&&i.push(a)}this._tiers=i,this._allTiers=this._countupConfig.tiers,Ne.call(this,t)}function qs(e,t,n,i,s,a,l,r,o){this.tierTweens=new fu([et.Scale(new nt(st.fromBacking(new it(1,1,1,null)),st.fromBacking(new it(.1,.1,.1,null)),null,.5,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],null),this.amountTweens=new fu([et.Scale(new nt(st.fromBacking(new it(1.1,1.1,null,null)),null,null,.4,null,function(e){e=2*(e<.5?e:1-e);return 0==e?0:1==e?1:-.5*(Math.cos(3.141592653589793*e)-1)},null,null,null,null,null))],null),this.pauseAfterSkip=1,this.tierPause=0,this.skip=!0,this.text=e,this.id=t,this.val=n,this.duration=i,null!=s&&(this.skip=s),null!=a&&(this.tierPause=a),null!=l&&(this.pauseAfterSkip=l),null!=r&&(this.amountTweens=r),null!=o&&(this.tierTweens=o)}function Ks(e,t,n,i,s,a,l,r,o,u,h,c,_){this.tierTweens=new fu([et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.1,.1,null,null)),null,.5,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],[et.Scale(new nt(st.fromBacking(new it(.1,.1,null,null)),null,null,0,null,function(e){return e},null,null,null,null,null))]),this.amountTweens=new fu([et.Scale(new nt(st.fromBacking(new it(1,1,1,null)),null,null,0,null,function(e){return e},null,null,null,null,null))],[et.Scale(new nt(st.fromBacking(new it(0,0,0,null)),null,null,.5,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))]),this.skipSuffix=null,this.endDuration=1,this.tierAnchor=Me.TOP,this.shadows=!0,this.margins={x:.05,y:.05},this.fullTier=0,this.tierPos=st.fromBacking(new it(null,null,null,null)),this.multiplier=null,this.amount=e,this.tier=t,null!=n&&(this.multiplier=n),this.tiers=i,null!=s&&(this.tierPos=s),null!=a&&(this.fullTier=a),null!=l&&(this.margins=l),null!=r&&(this.shadows=r),null!=o&&(this.tierAnchor=o),null!=u&&(this.endDuration=u),null!=h&&(this.skipSuffix=h),null!=c&&(this.amountTweens=c),null!=_&&(this.tierTweens=_)}function Js(e){B.call(this),this._config=e,this.spineElement=this.createElement(this._config.spine),this.animator=this.spineElement.get_animator(),this.object.addChild(this.spineElement)}function $s(e,t,n,i,s,a,l,r,o,u,h,c){this.pointAttachmentTransformSetting=Ch.All,this.usePremultipliedAlpha=!1,this.useDarkTint=!1,this.exposedClippingAttachments=null,this.enableLights=!0,this.shadows=!1,this.culling=$r.None,this.depthTest=to.Always,this.blendMode=wr.Alpha,this.scale=1,this.spine=e,null!=t&&(this.scale=t),null!=n&&(this.blendMode=n),null!=i&&(this.depthTest=i),null!=s&&(this.culling=s),null!=a&&(this.shadows=a),null!=l&&(this.enableLights=l),this.animations=r,null!=o&&(this.exposedClippingAttachments=o),null!=u&&(this.useDarkTint=u),null!=h&&(this.usePremultipliedAlpha=h),null!=c&&(this.pointAttachmentTransformSetting=c)}function ea(e){this._config=e,Au.call(this,this._config.tile)}function ta(e,t,n,i,s,a,l){this.shadows=!1,this.fixedHeight=null,this.fixedWidth=null,this.depthTest=to.LessEqual,this.blendMode=wr.Alpha,this.scale=1,(this.tile=null)!=e&&(this.tile=e),null!=t&&(this.scale=t),null!=n&&(this.blendMode=n),null!=i&&(this.depthTest=i),null!=s&&(this.fixedWidth=s),null!=a&&(this.fixedHeight=a),null!=l&&(this.shadows=l)}function na(e){this._stop=s1.trigger(),this._inited=new qy,this.timescale=1,B.call(this,null),this._config=e}function ia(e,t){this.autoStart=!1,this.groups=e,null!=t&&(this.autoStart=t)}function sa(){this.particles=null,this.scenery=null}function aa(){}function la(){}function ra(){this.margins=st.fromBacking(new it(null,null,null,null)),this.smallAmountScale=1}function oa(){}function ua(){this.backgroundColor="0x000000",this.progress={offset:{x:0,y:142},backplate:{anchor:"center",scaleMode:"fill"},backgroundColor:"0xFF000000",color:"0xFFA634",height:25,width:400}}function ha(){this.clickToContinue=null,this.topHeader=null,this.splashes=null,this.xSpacing=1.25,this.bodyMaxHeight=300,this.bodyMaxWidth=490,this.headerMaxWidth=490,this.topHeaderMaxWidth=1024,this.volatilityScale=1,this.volatilityPos=st.fromBacking(new it(0,.65,0,null)),this.logoScale=1,this.logoPos=st.fromBacking(new it(0,1.1,0,null))}function ca(e,t,n,i){this.extraAnimations=null,this.animation=null,this.element=null,this.name=e,null!=t&&(this.element=t),null!=n&&(this.animation=n),null!=i&&(this.extraAnimations=i)}function _a(e,t,n,i,s,a){this.isSymbol=!1,this.animation=null,this.element=null,this.tile=null,this.animator=null,this.name=e,null!=t&&(this.animator=t),null!=n&&(this.tile=n),null!=i&&(this.element=i),null!=s&&(this.animation=s),null!=a&&(this.isSymbol=a)}function da(e,t){this.animation=null,this.name=e,null!=t&&(this.animation=t)}function pa(e,t,n){this.frames=null,this.keys=e,this.animation=t,null!=n&&(this.frames=n)}function ma(e,t,n,i,s){this.rotation=0,this.size={x:0,y:0},this.offset={x:0,y:0},this.resolution=4096,(this.id=null)!=e&&(this.id=e),null!=t&&(this.resolution=t),null!=n&&(this.offset=n),null!=i&&(this.size=i),null!=s&&(this.rotation=s)}function ga(e,t,n,i){this.pos=null,this.element=null,(this.createElement=null)!=e&&(this.createElement=e),null!=t&&(this.element=t),this.id=n,null!=i&&(this.pos=i)}function fa(e,t,n,i,s,a,l,r){this.space=null,this.shadows=!1,this.depthTest=to.LessEqual,this.blendMode=wr.Alpha,this.rotation=null,this.scale=1,this.pos=null,this.resource=e,null!=t&&(this.pos=t),null!=n&&(this.scale=n),null!=i&&(this.rotation=i),null!=s&&(this.blendMode=s),null!=a&&(this.depthTest=a),null!=l&&(this.shadows=l),null!=r&&(this.space=r)}function Aa(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C,S,k,M,I,B,T,E,F,D,R,P,z,Q,V,O,W){this.wordWrap=null,this.sdfSmoothing=null,this.gradient=null,this.enabled=!0,this.rotation=null,this.strings=null,this.font=null,this.textureMargins=null,this.spaceWidth=null,this.lineSpacing=null,this.letterSpacing=null,this.textAlign=null,this.locale=null,this.translationId=null,this.backgroundMargins=null,this.offset=null,this.shadowHardness=.5,this.shadowColor=-16777216,this.shadowAlpha=.6,this.shadowAngle=0,this.shadowRadius=0,this.shadowDistance=null,this.outlineMultAlpha3=!0,this.outlineWidth3=null,this.outlineColor3=null,this.outlineMultAlpha2=!0,this.outlineWidth2=null,this.outlineColor2=null,this.outlineMultAlpha=!0,this.outlineStrength=.95,this.outlineWidth=null,this.outlineColor=null,this.color=-1,this.backgroundColor=null,this.align=null,this.height=null,this.width=null,this.maxHeight=null,this.maxWidth=null,this.sdfScaleFactor=1,this.size=12,null!=e&&(this.size=e),null!=t&&(this.sdfScaleFactor=t),null!=n&&(this.maxWidth=n),null!=i&&(this.maxHeight=i),null!=s&&(this.width=s),null!=a&&(this.height=a),null!=l&&(this.align=l),null!=r&&(this.backgroundColor=r),null!=o&&(this.color=o),null!=u&&(this.outlineColor=u),null!=h&&(this.outlineWidth=h),null!=c&&(this.outlineStrength=c),null!=_&&(this.outlineMultAlpha=_),null!=d&&(this.outlineColor2=d),null!=p&&(this.outlineWidth2=p),null!=m&&(this.outlineMultAlpha2=m),null!=g&&(this.outlineColor3=g),null!=f&&(this.outlineWidth3=f),null!=A&&(this.outlineMultAlpha3=A),null!=x&&(this.shadowDistance=x),null!=w&&(this.shadowRadius=w),null!=y&&(this.shadowAngle=y),null!=b&&(this.shadowAlpha=b),null!=v&&(this.shadowColor=v),null!=C&&(this.shadowHardness=C),null!=S&&(this.offset=S),null!=k&&(this.backgroundMargins=k),null!=M&&(this.translationId=M),null!=I&&(this.locale=I),null!=B&&(this.textAlign=B),null!=T&&(this.letterSpacing=T),null!=E&&(this.lineSpacing=E),null!=F&&(this.spaceWidth=F),null!=D&&(this.textureMargins=D),null!=R&&(this.font=R),null!=P&&(this.strings=P),null!=z&&(this.rotation=z),null!=Q&&(this.enabled=Q),null!=V&&(this.gradient=V),null!=O&&(this.sdfSmoothing=O),null!=W&&(this.wordWrap=W)}function xa(e,t,n,i){this.id=null,this.val=e,this.text=t,this.duration=n,null!=i&&(this.id=i)}function wa(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p){this.paylineIds=[],this.merged=null,this.ways=null,this.stacks=null,this.reel=null,this.pos=null,this.stick=null,this.tier=null,this.winFactor=null,this.baseWinAmount=null,this.winMultipliers=null,this.symbol=e,this.mask=t,null!=n&&(this.winMultipliers=n),null!=i&&(this.baseWinAmount=i),this.winAmount=s,this.count=a,null!=l&&(this.winFactor=l),null!=r&&(this.tier=r),null!=o&&(this.stick=o),null!=u&&(this.pos=u),null!=h&&(this.reel=h),null!=c&&(this.stacks=c),null!=_&&(this.ways=_),null!=d&&(this.merged=d),null!=p&&(this.paylineIds=p)}function ya(){this.color__=new q(0,0,0,1),W.call(this)}function ba(e,t,n){null==n&&(n=50),null==t&&(t=0),null==e&&(e=1),this.intensity__=0,this.direction__=0,this.samples__=50,this.intensity__=e,this.direction__=t,this.constModified=!0,this.samples__=n,W.call(this)}function va(e,t,n,i){this._attachments=new PA,this._lastSpeed=0,this.restingZPosition=0,this.size=new Xt(1,1),this.maxBlurSpeed=.3,this.blurTiles=[],this.flags=0,this.tile2=null,this.velocity=0;var s=new Hr,a=(s.name="SymbolHolder|"+t+"|",s.addChild(e),new It(e)),a=(tt.init(a,null),this.symbolObject=a,new It(s));tt.init(a,null),this.object=a,this.id=t,this.size=null!=i?i:this.size,this.animator=new Yu(new Xu(e,n))}function Ca(e,t,n,i,s,a){this.presented=[],va.call(this,e.object,n,i,a),this.tile=t,this._tileDimensions=s}function Sa(e,t,n,i){this.specular=null,this.normal=null,this.diffuse=e,null!=t&&(this.normal=t),null!=n&&(this.specular=n),this.path=i}function ka(e,t){this.baseRotation=st.fromBacking(new it(0,0,0,null)),this.baseScale=st.fromBacking(new it(1,1,1,1)),this.frameIndex=0,this.color=st.fromBacking(new it(1,1,1,1)),this.dead=!0,this.ttl=0,this.life=0,this.velocity=st.fromBacking(new it(null,null,null,null)),this.speed=0,this.index=0,this.index=t,Hr.call(this,e)}function Ma(e,t,n,i,s,a,l){this.exposedModules=null,this.particleSpace=eh.Local,this.autoRemove=!1,this.onDone=null,this.loop=!0,null!=e&&(this.loop=e),null!=t&&(this.onDone=t),null!=n&&(this.autoRemove=n),this.maxParticles=i,null!=s&&(this.particleSpace=s),this.modules=a,null!=l&&(this.exposedModules=l)}function Ia(e,t){this.spawnOrder=1,this.updateOrder=1,this.spawnOrder=null!=e?e:this.spawnOrder,this.updateOrder=null!=t?t:this.updateOrder}function Ba(e){Ia.call(this),this.vector=e}function Ta(e,t,n){this._tmpVector=st.fromBacking(new it(null,null,null,null)),this.curve=o1.linear,Ia.call(this),this.atBirth=e,this.atDeath=t,this.curve=null!=n?n:this.curve}function Ea(e,t,n,i,s){this._tmpVector=st.fromBacking(new it(null,null,null,null)),this.curve=o1.linear,Ia.call(this,1,2),this.min=e,this.max=t,this.from=n,this.to=i,this.curve=null!=s?s:this.curve}function Fa(e){Ia.call(this),this.color=e}function Da(e){Ia.call(this),this.callback=e}function Ra(e,t){this.maxDuration=null,this.minDuration=1,Ia.call(this),null!=e&&(this.minDuration=e),null!=t&&(this.maxDuration=t)}function Pa(e){this.speed=1,Ia.call(this),null!=e&&(this.speed=e)}function za(e,t){this.speed=1,Ia.call(this),this.length=e,null!=t&&(this.speed=t)}function Qa(e,t,n){this.speed=1,Ia.call(this),this.size=e,this.emitFrom=t,null!=n&&(this.speed=n)}function Va(e,t,n){this.speed=1,Ia.call(this),this.radius=e,this.emitFrom=t,null!=n&&(this.speed=n)}function Oa(e,t,n){this.speed=1,Ia.call(this),this.radius=e,this.angle=t,null!=n&&(this.speed=n)}function Wa(e,t,n,i,s){null==s&&(s=0),null==i&&(i=1),this.currentRate=0,this.rateIncrement=0,this.speed=1,Ia.call(this),this.spline=e,this.emitFrom=t,this.radius=n,this.speed=i,this.rateIncrement=s<=0?0:1<=s?1:s,this.currentRate=-this.rateIncrement}function Na(e){Ia.call(this),this.rotation=e}function Ga(e,t){Ia.call(this,2,2),this.rotateOnEmitOnly=e}function Ua(e,t){Ia.call(this),this.rotationRate=e,this.randomOnStart=t}function La(e,t){this.maxScale=null,this.minScale=1,Ia.call(this),null!=e&&(this.minScale=e),null!=t&&(this.maxScale=t)}function ja(e,t,n){this.curve=o1.linear,Ia.call(this),this.atBirth=e,this.atDeath=t,null!=n&&(this.curve=n)}function Ha(e,t,n,i,s){this.curve=o1.linear,Ia.call(this,1,2),this.minSpeed=e,this.maxSpeed=t,this.fromScale=n,this.toScale=i,this.curve=null!=s?s:this.curve}function Ya(e){this._timeSinceLastEmit=0,Ia.call(this),this.set_rate(e),this._rateProc=1/e}function Za(e,t){this._distanceMoved=0,Ia.call(this),this.distance=e,this.maxFrameDistance=null!=t?t:1/0}function Xa(e,t){t=null==t?new dh(null,null,null,null,null,null,null):t,_h.call(this,t,e.t),this.tileData=e}function qa(e,t){t=null==t?new dh(null,null,null,null,null,null,null):t,_h.call(this,t,e[0].t),this.tileDataArray=e}function Ka(e,t,n){this.fps=30,t=null==t?new dh(null,null,null,null,null,null,null):t,_h.call(this,t,e.frames[0]),this.animationData=e,this.set_fps(null==n?this.fps:n),this._loopsPerSecond=this.fps/e.frames.length,this._frames=e.frames.length}function Ja(e,t){this.maxSpeed=null,this.minSpeed=1,Ia.call(this),null!=e&&(this.minSpeed=e),null!=t&&(this.maxSpeed=t)}function $a(e,t){Ia.call(this,1,0),this.atBirth=e,this.atDeath=t}function al(e){Ia.call(this),this.amount=e}function ll(e){Ia.call(this),this.amount=e}function rl(e){this.scale=1,Ia.call(this,2,0),this.scale=null!=e?e:this.scale}function ol(e,t,n){null==n&&(n=!1),null==t&&(t=1),null==e&&(e=1),this.uvT=1,this.uvS=1,this._centered=!1,this._centered=n;var i=new Gr(0,0,0),s=new Gr(null==e?0:e,0,0),a=new Gr(0,null==t?0:t,0),l=new Gr(null==e?0:e,null==t?0:t,0),r=new Array(0);r.push(0),r.push(1),r.push(2),r.push(2),r.push(1),r.push(3),Yn.call(this,[i,s,a,l],r),n&&this.translate(.5*-e,.5*-t,0)}function ul(e){this.uploadedIndices=0,this.uploadedVertices=0,this.indexBuffer=new Array(0),this.vertexBuffer=qx._new(0),this.indexCount=0,this.verticesCount=0,Hn.call(this),this.useDarkColor=e,this.vertexStride=e?13:9;var t=Lx.get_POS3D_UV().append("color",4);e&&(t=t.append("color2",4)),this.bufferFormat=t}function hl(e,t,n){this._curvePositions=null,this.extrusionEndPoints=null,this.extrusionShapeVertices=null,Yn.call(this,[]),this.extrusionShapeType=t,this.spline=e,this.uvMode=n}function cl(e){this.maskMatB__=new Gr(0,0,0),this.maskMatA__=new Gr(0,0,0),W.call(this),this.mask__=e}function _l(e){this.multiplier__=new q(0,0,0,1),O.call(this),this.multiplier__=e}function dl(){O.call(this)}function pl(){O.call(this)}function ml(){this.fillColor__=new q(0,0,0,1),this.shadowMetrics__=new q(0,0,0,1),this.outlineStrength__=1,this.outlineWidth__=0,this.shadowColor__=new q(0,0,0,1),this.outlineColor__=new q(0,0,0,1),this.distanceRange__=0,O.call(this)}function gl(){O.call(this)}function fl(){O.call(this)}function Al(){O.call(this)}function xl(e){Ho.call(this,e)}function wl(e){this.blendFactor__=0,this.direction__=new Gr(0,0,0),this.colorMultiplier__=new q(0,0,0,1),this.rate__=0,G.call(this),this.time__=0;var t=e.dirX,t=(this.direction__.x=t<-1?-1:1<t?1:t,e.dirY),t=(this.direction__.y=t<-1?-1:1<t?1:t,this.blendFactor__=e.blendFactor,this.colorMultiplier__=st.toVector4(e.colorMultiplier),this.colorMultiplier__.w=e.colorMultiplier.w,this.rate__=e.startRate,this.set_x(this.rate__),this.set_y(this.direction__.x),this.set_z(this.direction__.y),this._tweenVector),e=this.get_x(),n=this.get_y(),i=this.get_z();t.x=null!=e?e:t.x,t.y=null!=n?n:t.y,t.z=null!=i?i:t.z,t.w=t.w}function yl(e,t,n,i,s){this.startRate=1,this.blendFactor=.00390625,this.dirY=0,this.dirX=1,null!=e&&(this.dirX=e),null!=t&&(this.dirY=t),null!=n&&(this.blendFactor=n),this.colorMultiplier=i,null!=s&&(this.startRate=s)}function bl(e){this._attachmentOverrides=null,this.animationState=e,this._tracks=this.animationState.tracks}function vl(){}function Cl(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p){this.attachmentOverrides=null,this.keepStencil=!1,this.keepOverlayVisible=!1,this.remainAfterReplace=!1,this.replace=!1,this.rotation=st.fromBacking(new it(0,0,0,null)),this.offset=null,this.scale=1,this.overlay=!1,this.timeScale=1,this.trackIndex=0,this.mixDuration=0,this.interruptTrack=!0,this.loop=!1,this.animationName=e,null!=t&&(this.loop=t),null!=n&&(this.interruptTrack=n),null!=i&&(this.mixDuration=i),null!=s&&(this.trackIndex=s),null!=a&&(this.timeScale=a),null!=l&&(this.overlay=l),null!=r&&(this.scale=r),null!=o&&(this.offset=o),null!=u&&(this.rotation=u),null!=h&&(this.replace=h),null!=c&&(this.remainAfterReplace=c),null!=_&&(this.keepOverlayVisible=_),null!=d&&(this.keepStencil=d),null!=p&&(this.attachmentOverrides=p)}function Sl(e,t){this.slotName=e,this.attachmentName=t}function kl(){this.scratch=[],this.clippedTriangles=[],this.clippedVertices=[],this.clipOutput=[],this.clippingPolygon=[],this.triangulator=new kh}function Ml(e){this.segmentDistanceRanges=[],this.materials=[],this.meshes=[],Lu.call(this),this._config=e,this.spline=this._config.spline,e=new It(this),tt.init(e,null),this.tweenObject=e,this.createMesh()}function Il(e,t,n){this.textureMode=Th.Stretch,this.tile=e,this.splineRate=t,null!=n&&(this.textureMode=n)}function Bl(e,t,n,i,s,a,l,r,o,u,h,c,_){this.enableLights=!0,this.shadows=!1,this.culling=$r.Back,this.depthTest=to.LessEqual,this.blendMode=wr.Alpha,this.vertexSamplesPerSegment=50,this.tilePatches=[],this.extrusionShape=Eh.Texture,this.textureMode=Th.RepeatByTextureWidth(!0),this.endCaps=Bh.Flat(),this.smoothing=.125,this.spline=e,this.tile=t,null!=n&&(this.smoothing=n),null!=i&&(this.endCaps=i),null!=s&&(this.textureMode=s),null!=a&&(this.extrusionShape=a),null!=l&&(this.tilePatches=l),null!=r&&(this.vertexSamplesPerSegment=r),null!=o&&(this.blendMode=o),null!=u&&(this.depthTest=u),null!=h&&(this.culling=h),null!=c&&(this.shadows=c),null!=_&&(this.enableLights=_)}function Tl(e){this._arcLengthLUT=[],this.segments=[],this._sizeLUT=10,this.splineRateInterpolation=new Pi(0,1),this.endPointsConnected=!1,this._config=e,this.rebuildSpline()}function El(e,t,n){this.connectedSpline=!1,this.points=e,this.splineType=t,null!=n&&(this.connectedSpline=n)}function Fl(){}function Dl(e,t){this.tightness=0,Hr.call(this),this._config=e,this.set_velocityVectors(t),t=e.tightness,this.tightness=t<=0?0:1<=t?1:t,this._intensity=e.intensity,this._minBounds=e.minBounds,this._maxBounds=e.maxBounds,this._fieldSpacing=st.fromBacking(new it(1/e.cellCount.x,1/e.cellCount.y,1/e.cellCount.z,null)),this._hasDepth=1<e.cellCount.z}function Rl(e,t,n,i,s,a,l){this.wrapField=!1,this.interpolate=!0,this.intensity=1,this.tightness=0,this.maxBounds=st.fromBacking(new it(1,1,1,null)),this.minBounds=st.fromBacking(new it(-1,-1,-1,null)),this.cellCount=new Tw(1,1,1),null!=e&&(this.cellCount=e),null!=t&&(this.minBounds=t),null!=n&&(this.maxBounds=n),null!=i&&(this.tightness=i),null!=s&&(this.intensity=s),null!=a&&(this.interpolate=a),null!=l&&(this.wrapField=l)}function Pl(){}function zl(){}function Ql(){}function Vl(){}function Ol(){}function Wl(){this._delays=[],this._listeners=[],zl.call(this)}function Nl(e,t,n,i,s,a,l,r,o){this.id=e,this.name=t,this.payouts=n,this.isWild=i,this.isScatter=s,this.isCascading=a,this.height=l,this.width=r,this.originalId=o}function Gl(){}function Ul(){}function Ll(){}function jl(e,t,n){if(this.mIterator=null,this.reuseIterator=!1,null!=n){this.mW=e,this.mH=t;for(var i=this.mData=new Array(this.mW*this.mH),s=0,a=this.mW*this.mH;s<a;){var l=s++;i[l]=n[l]}}else this.mW=e,this.mH=t,this.mData=new Array(this.mW*this.mH)}function Hl(e,t,n,i){this._hasData=!1;var s=e*t,a=null!=n;if(null==n){for(var l=[],r=0;r<s;)++r,l.push(null);n=l}for(jl.call(this,e,t,n),l=[],r=0;r<e;)++r,l.push(0);this.columnIndexes=l,null!=i?(this._hasData=!0,this._dataGrid=i):this._dataGrid=a?n:null}function Yl(e,t,n){this.result=e,this.mergedSteps=t,this.movement=n}function Zl(e,t,n,i){if(this.mW=e,this.mH=t,this.mD=n,this.mData=new Array(this.mW*this.mH*this.mD),null!=i)for(var s=this.mData,a=0,l=this.mW*this.mH*this.mD;a<l;){var r=a++;s[r]=i[r]}}function Xl(){}function ql(){}function Kl(){}function Jl(){}function $l(){}function er(){}function tr(){}function nr(e){var u=this,t=(this._gameModel=new Cc,this._slotModel=new Qd,this._coinValueModel=new vc,new ua),n=(this._slotModel.backgroundData=new sa,this._slotModel.splashData=new ha,this._slotModel.countupData=new ra,this._slotModel.reelData=new Zd,this.getFeatureBuyItems());Ms.call(this,{gameType:"slot",assets:ks,charset:e.charset,soundConfigs:e.soundConfigs,onLoaded:function(){var e=new Ci(4*(u._slotModel.reelData.dropRevealProps.normal[0].values.startDuration+u._slotModel.reelData.dropRevealProps.normal[0].values.stopDuration)*1e3|0,[],null,null,null,null,[Xo.SuperTurbo(!0),Xo.RevealBehavior(qo.DROP),Xo.FeatureBuy(n)],null,function(e){{var t="tr-tr"==u._language,n=new at,i=new Je;i.h[1924]="96.40",i.h[1925]="94.31",i.h[1926]="92.30",i.h[1927]="86.36",n.h.baseGameRTP=i}(i=new Je).h[1924]="96.37",i.h[1925]="94.36",i.h[1926]="92.32",i.h[1927]="86.35",n.h.baseGameRTPOnce=i,(i=new Je).h[1924]="96.28",i.h[1925]="94.34",i.h[1926]="92.31",i.h[1927]="86.33",n.h.baseGameRTPTwice=i,(i=new Je).h[1924]="96.26",i.h[1925]="94.20",i.h[1926]="92.28",n.h.featureSpinsRTP=i,(i=new Je).h[1924]="96.24",i.h[1925]="94.34",i.h[1926]="92.27",n.h.bonushuntRTP=i,(i=new Je).h[1924]="96.15",i.h[1925]="94.42",i.h[1926]="92.26",n.h.bonushuntRTPOnce=i,(i=new Je).h[1924]="96.06",i.h[1925]="94.40",i.h[1926]="92.20",n.h.bonushuntRTPTwice=i,(i=new Je).h[1924]="96.33",i.h[1925]="94.23",i.h[1926]="92.30",n.h.highNoonSaloonRTP=i,(i=new Je).h[1924]="96.20",i.h[1925]="94.31",i.h[1926]="92.29",n.h.highNoonSaloonRTPOnce=i,(i=new Je).h[1924]="96.10",i.h[1925]="94.29",i.h[1926]="92.22",n.h.highNoonSaloonRTPTwice=i,(i=new Je).h[1924]="96.33",i.h[1925]="94.28",i.h[1926]="92.29",n.h.trailOfTrickeryRTP=i;(i=new Je).h[1924]="96.20",i.h[1925]="94.24",i.h[1926]="92.22",n.h.trailOfTrickeryRTPOnce=i;for(var s=zy.mapValues(n,function(e){return zy.mapValues(e,function(e){return t?"%"+e:e+"%"},new Je)},new at).h,a=Object.keys(s),l=a.length,r=0;r<l;){var o=a[r++];e.overrides.h[o]=s[o].h[u._gameModel.gameId]}});u._casinoChannel.publish("gameLoaded",e)},preloader:t.progress,backgroundColor:this._slotModel.backgroundData.color})}function ir(e,t,n,i){this.baseBetLevel=e,this.rtp=t,this.reelSets=n,this.symbols=i}function sr(){}function ar(){this._tweenVector=new Et(0,0,0,1),P.call(this),this._shader=new s_}function lr(e){this._fieldObjects=[],this.currentCollectorPosition=null,d.call(this),this.componentType=Ie.Actor,this._config=e,this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),this._gameChannel=hacksawCasino.PubSub.getChannel("game")}function rr(e,t,n,i,s,a){this.digits=e,this.particleTiles=t,this.followObj=n,this.symbols=i,this.baseBetLevel=s,this.particleLimits=a}function or(e){this._isMobile=!1,this._isBonus2=!1,this._clicked=!1,this._revealSpines=[],this.currentOrientation=null,this.gambleCoinMultiplier=null,this.isUpgraded=!1,this.isGambleCountup=!1,this.isGambling=!1,this.lastGrid="",d.call(this),this.componentType=Ie.Actor,this._config=e,this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),this._isMobile=this._config.isMobile}function ur(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f){this.tileMap=e,this.buttonPositions=t,this.buttonPortraitPositions=n,this.buttonTextGamble=i,this.buttonTextContinue=s,this.rewards=a,this.rewardsTwo=l,this.coinConfig=r,this.symbolConfig=o,this.shootConfig=u,this.spinsWon=h,this.descText=c,this.titleConfig=_,this.coinRevealConfig=d,this.shootRangeSpineConfig=p,this.transformDataSets=m,this.epicStickerTile=g,this.isMobile=f}function hr(e){d.call(this),this.componentType=Ie.Actor,this._config=e,this._grid=new Hl(this._config.reelSize.width,this._config.reelSize.height)}function cr(e,t,n){this.displayConfig=e,this.symPositions=t,this.reelSize=n}function _r(e,t,n,i,s,a){this.duration=1,this.targetAngle=2*Math.PI,this.axis=st.fromBacking(new it(null,1,null,null)),this.from=null,this.to=e,null!=t&&(this.from=t),null!=n&&(this.axis=n),null!=i&&(this.targetAngle=i),null!=s&&(this.duration=s),this.curve=a}function dr(e){d.call(this),this.componentType=Ie.Actor,this._config=e,this._background=new ea(new ta(this._config.bgTileMap.get(bc.BASE),null,null,null,null,null,null))}function pr(e){this.bgTileMap=e}function mr(e){this._ammoAmount=0,this._chamberMaxAmount=6,this._maxAmmoAmount=50,B.call(this),this._config=e,this._bulletSpine=bh.create(this._config.spineConfig),this._ammoText=Fh.create(new xu(this._config.textResource,null,null,null,to.Always,null,null,null,null,null)),this._gameChannel=hacksawCasino.PubSub.getChannel("game")}function gr(e,t,n,i,s,a,l,r,o){this.incrementTween=[],this.resetTween=[],this.shootTween=[],this.darkenTween=[],this.startValue=e,this.textResource=t,null!=n&&(this.darkenTween=n),null!=i&&(this.shootTween=i),null!=s&&(this.resetTween=s),null!=a&&(this.incrementTween=a),this.spineConfig=l,this.animations=r,this.casinoModel=o}function fr(e){this.isInShootStance=!1,this.enabledLayout=!0,this.enable=!0,B.call(this),this._config=e,this._spineElement=bh.create(this._config.spineConfig),this._gameChannel=hacksawCasino.PubSub.getChannel("game")}function Ar(e,t,n,i,s){this.spineConfig=e,this.idleAnimationMaps=t,this.shootAnimationMaps=n,this.animations=i,this.transformDataSets=s}st.clone=function(e){return st.fromBacking(new it(e.x,e.y,e.z,e.w))},st.set=function(e,t,n){return null==n&&(n=!1),e.x=null!=e.x||n?t.x:null,e.y=null!=e.y||n?t.y:null,e.z=null!=e.z||n?t.z:null,e.w=null!=e.w||n?t.w:null,e},st.multiply=function(e,t){var n=e.x;null!=n&&(e.x=n*t),null!=(n=e.y)&&(e.y=n*t),null!=(n=e.z)&&(e.z=n*t),null!=(n=e.w)&&(e.w=n*t)},st.defaultNull=function(e){e.x=null!=e.x?e.x:0,e.y=null!=e.y?e.y:0,e.z=null!=e.z?e.z:0,e.w=null!=e.w?e.w:1},st.fromBacking=function(e){return e},st.fromVector3=function(e){return st.fromBacking(new it(null!=e?e.x:null,null!=e?e.y:null,null!=e?e.z:null,null))},st.fromVector4=function(e){return null!=e?e:new q(0,0,0,1)},st.to3dPoint=function(e){var t,n,i;return null==e?null:(t=null!=(i=e.x)?i:0,n=null!=(i=e.y)?i:0,e=null!=(i=e.z)?i:0,new Gr(t=null==t?0:t,n=null==n?0:n,e=null==e?0:e))},st.toVector4=function(e){var t,n,i,s;return null==e?null:(t=null!=(s=e.x)?s:0,n=null!=(s=e.y)?s:0,i=null!=(s=e.z)?s:0,e=null!=(s=e.w)?s:1,new q(t=null==t?0:t,n=null==n?0:n,i=null==i?0:i,e=null==e?1:e))},(i["gasm.heaps.utils.TileUtils"]=se).__name__="gasm.heaps.utils.TileUtils",se.getSubTexture=function(e,t){null==t&&(t=!1);var n=e.innerTex.mipMap,i=e.innerTex.filter,s=new _o(0|e.width,0|e.height,[ro.Target]),a=(s.realloc=null,s.preventAutoDispose(),new xr(e));return a.smooth=!0,t&&(a.posChanged=!0,a.scaleX=-1,a.posChanged=!0,a.x=e.width),a.drawTo(s),e.innerTex.set_filter(i),e.innerTex.set_mipMap(n),s},se.getSizeByReference=function(e){return{x:e.width/sl.REFERENCE_SIZE,y:e.height/sl.REFERENCE_SIZE}},se.applyShader=function(e,t,n,i){null==i&&(i=!0),null==n&&(n=wr.Alpha);var s=new _o(0|e.width,0|e.height,[ro.Target]),e=(s.realloc=null,s.preventAutoDispose(),new xr(e));return e.set_filter(new Fr(t)),e.blendMode=n,e.smooth=i,e.drawTo(s),Ir.fromTexture(s)},(i["gasm.helpers.RunOptions"]=Xe).__name__="gasm.helpers.RunOptions",Xe.prototype={__class__:Xe};var xr=function(e,t){Mt.call(this,t),this.set_tile(e)},wr=((i["h2d.Bitmap"]=xr).__name__="h2d.Bitmap",xr.__super__=Mt,xr.prototype=e(Mt.prototype,{getBoundsRec:function(e,t,n){Mt.prototype.getBoundsRec.call(this,e,t,n),null!=this.tile&&(null==this.width&&null==this.height?this.addBounds(e,t,this.tile.dx,this.tile.dy,this.tile.width,this.tile.height):this.addBounds(e,t,this.tile.dx,this.tile.dy,null!=this.width?this.width:this.tile.width*this.height/this.tile.height,null!=this.height?this.height:this.tile.height*this.width/this.tile.width))},set_tile:function(e){return this.tile!=e&&(this.tile=e,null!=this.parentContainer)&&this.parentContainer.contentChanged(this),e},draw:function(e){var t,n;null==this.width&&null==this.height?this.emitTile(e,this.tile):(null==this.tile&&this.set_tile(Ir.fromColor(16711935)),t=this.tile.width,n=this.tile.height,this.tile.width=null!=this.width?this.width:t*this.height/n,this.tile.height=null!=this.height?this.height:n*this.width/t,this.emitTile(e,this.tile),this.tile.width=t,this.tile.height=n)},__class__:xr,__properties__:e(Mt.prototype.__properties__,{set_tile:"set_tile"})}),fe["h2d.BlendMode"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h2d.BlendMode",toString:o},Alpha:{_hx_name:"Alpha",_hx_index:1,__enum__:"h2d.BlendMode",toString:o},Add:{_hx_name:"Add",_hx_index:2,__enum__:"h2d.BlendMode",toString:o},AlphaAdd:{_hx_name:"AlphaAdd",_hx_index:3,__enum__:"h2d.BlendMode",toString:o},SoftAdd:{_hx_name:"SoftAdd",_hx_index:4,__enum__:"h2d.BlendMode",toString:o},Multiply:{_hx_name:"Multiply",_hx_index:5,__enum__:"h2d.BlendMode",toString:o},AlphaMultiply:{_hx_name:"AlphaMultiply",_hx_index:6,__enum__:"h2d.BlendMode",toString:o},Erase:{_hx_name:"Erase",_hx_index:7,__enum__:"h2d.BlendMode",toString:o},Screen:{_hx_name:"Screen",_hx_index:8,__enum__:"h2d.BlendMode",toString:o},Sub:{_hx_name:"Sub",_hx_index:9,__enum__:"h2d.BlendMode",toString:o},Max:{_hx_name:"Max",_hx_index:10,__enum__:"h2d.BlendMode",toString:o},Min:{_hx_name:"Min",_hx_index:11,__enum__:"h2d.BlendMode",toString:o}}),yr=(wr.__constructs__=[wr.None,wr.Alpha,wr.Add,wr.AlphaAdd,wr.SoftAdd,wr.Multiply,wr.AlphaMultiply,wr.Erase,wr.Screen,wr.Sub,wr.Max,wr.Min],wr.__empty_constructs__=[wr.None,wr.Alpha,wr.Add,wr.AlphaAdd,wr.SoftAdd,wr.Multiply,wr.AlphaMultiply,wr.Erase,wr.Screen,wr.Sub,wr.Max,wr.Min],(i["h2d.Camera"]=Pt).__name__="h2d.Camera",Pt.prototype={layerVisible:function(e){return!0},enter:function(e){var t;e.pushCamera(this),this.clipViewport&&(t=e.inFilter,e.inFilter=null,e.pushRenderZone(this.viewX*this.scene.width,this.viewY*this.scene.height,this.viewW*this.scene.width,this.viewH*this.scene.height),e.inFilter=t)},exit:function(e){var t;this.clipViewport&&(t=e.inFilter,e.inFilter=null,e.popRenderZone(),e.inFilter=t),e.popCamera()},sync:function(e,t){var n;null==t&&(t=!1),null!=this.scene&&(null!=this.follow&&(this.posChanged=!0,this.x=this.follow.absX,this.posChanged=!0,this.y=this.follow.absY,this.followRotation)&&(this.posChanged=!0,this.rotation=-this.follow.rotation),this.posChanged||t)&&(0==this.rotation?(this.matA=this.scaleX,this.matB=0,this.matC=0,this.matD=this.scaleY):(t=Math.cos(this.rotation),n=Math.sin(this.rotation),this.matA=this.scaleX*t,this.matB=this.scaleX*n,this.matC=this.scaleY*-n,this.matD=this.scaleY*t),this.absX=Math.round(-(this.x*this.matA+this.y*this.matC)+this.scene.width*this.anchorX*this.viewW+this.scene.width*this.viewX),this.absY=Math.round(-(this.x*this.matB+this.y*this.matD)+this.scene.height*this.anchorY*this.viewH+this.scene.height*this.viewY),this.invDet=1/(this.matA*this.matD-this.matB*this.matC),this.posChanged=!1)},eventToCamera:function(e){var t=(e.relX-this.scene.offsetX)/this.scene.viewportScaleX-this.absX,n=(e.relY-this.scene.offsetY)/this.scene.viewportScaleY-this.absY;e.relX=(t*this.matD-n*this.matC)*this.invDet,e.relY=(-t*this.matB+n*this.matA)*this.invDet},__class__:Pt},(i["h2d.Kerning"]=zt).__name__="h2d.Kerning",zt.prototype={__class__:zt},(i["h2d.FontChar"]=Qt).__name__="h2d.FontChar",Qt.prototype={addKerning:function(e,t){e=new zt(e,t);e.next=this.kerning,this.kerning=e},getKerningOffset:function(e){for(var t=this.kerning;null!=t;){if(t.prevChar==e)return t.offset;t=t.next}return 0},clone:function(){var e=new Qt(this.t.clone(),this.width),t=this.kerning;if(null!=t){var n=new zt(t.prevChar,t.offset);for(e.kerning=n,t=t.next;null!=t;)n=n.next=new zt(t.prevChar,t.offset),t=t.next}return e},__class__:Qt},fe["h2d.FontType"]={__ename__:!0,__constructs__:null,BitmapFont:{_hx_name:"BitmapFont",_hx_index:0,__enum__:"h2d.FontType",toString:o},SignedDistanceField:((R=function(e,t,n){return{_hx_index:1,channel:e,alphaCutoff:t,smoothing:n,__enum__:"h2d.FontType",toString:o}})._hx_name="SignedDistanceField",R.__params__=["channel","alphaCutoff","smoothing"],R)}),br=(yr.__constructs__=[yr.BitmapFont,yr.SignedDistanceField],yr.__empty_constructs__=[yr.BitmapFont],(i["h2d.Font"]=Vt).__name__="h2d.Font",Vt.prototype={clone:function(){for(var e=new Vt(this.name,this.size),t=(e.baseLine=this.baseLine,e.lineHeight=this.lineHeight,e.tile=this.tile.clone(),e.charset=this.charset,e.defaultChar=this.defaultChar.clone(),e.type=this.type,e.offsetX=this.offsetX,e.offsetY=this.offsetY,this.glyphs.keys());t.hasNext();){var n=t.next(),i=this.glyphs.h[n],s=i.clone();i==this.defaultChar&&(e.defaultChar=s),e.glyphs.h[n]=s}return e},resizeTo:function(e){for(var t=e/this.size,n=this.glyphs.iterator();n.hasNext();)for(var i=n.next(),s=(i.width*=t,i.t.scaleToSize(i.t.width*t,i.t.height*t),i.t.dx*=t,i.t.dy*=t,i.kerning);null!=s;)s.offset*=t,s=s.next;this.lineHeight=Math.ceil(this.lineHeight*t),this.baseLine=Math.ceil(this.baseLine*t),this.size=e},hasChar:function(e){return null!=this.glyphs.h[e]},calcBaseLine:function(){var e=0,t=this.glyphs.h[32],t=(null!=t&&(e=.5*t.t.height),this.glyphs.h[65]);return null==(t=null==(t=null==t?this.glyphs.h[97]:t)?this.glyphs.h[48]:t)?this.lineHeight-2-e:t.t.dy+t.t.height-e},__class__:Vt},(i["h2d.GPoint"]=Ot).__name__="h2d.GPoint",Ot.prototype={load:function(e,t,n,i,s,a){this.x=e,this.y=t,this.r=n,this.g=i,this.b=s,this.a=a},__class__:Ot},(i["h3d.prim.Primitive"]=Wt).__name__="h3d.prim.Primitive",Wt.prototype={triCount:function(){return null!=this.indexes?this.indexes.vertices/3|0:null==this.buffer?0:this.buffer.vertices/3|0},getCollider:function(){throw tl.thrown("not implemented for "+el.string(this))},getBounds:function(){throw tl.thrown("not implemented for "+el.string(this))},incref:function(){this.refCount++},decref:function(){this.refCount--,this.refCount<=0&&(this.refCount=0,this.dispose())},alloc:function(e){throw tl.thrown("not implemented")},selectMaterial:function(e,t){},render:function(e){var t;null!=this.buffer&&null!=this.buffer.vbuf||this.alloc(e),null==this.indexes?(t=this.buffer,e.renderBuffer(t,e.mem.getTriIndexes(t.vertices),3,0,-1)):e.renderIndexed(this.buffer,this.indexes)},dispose:function(){null!=this.buffer&&(this.buffer.dispose(),this.buffer=null),null!=this.indexes&&(this.indexes.dispose(),this.indexes=null)},toString:function(){return nl.getClass(this).__name__.split(".").pop()},lodCount:function(){return 1},screenRatioToLod:function(e){return 0},__class__:Wt},(i["h2d._Graphics.GraphicsContent"]=Nt).__name__="h2d._Graphics.GraphicsContent",Nt.__super__=Wt,Nt.prototype=e(Wt.prototype,{setTile:function(e){null!=e&&this.state.setTexture(e.innerTex)},next:function(){if(this.tmp.pos>>3<32768)return!1;this.buffers.push({buf:this.tmp,idx:this.index,vbuf:null,ibuf:null,state:this.state}),this.tmp=qx._new(0),this.index=new Array(0);var e=this.state.tail.texture;return this.state=new Dr,this.state.setTexture(e),Wt.prototype.dispose.call(this),!0},alloc:function(e){if(!(this.index.length<=0)){for(var t=S0.get(),n=(this.buffer=t.ofFloats(this.tmp,Lx.get_XY_UV_RGBA()),this.buffer.allocPos=this.allocPos,this.indexes=t.ofIndexes(this.index),0),i=this.buffers;n<i.length;){var s=i[n];++n,null!=s.vbuf&&null!=s.vbuf.vbuf||(s.vbuf=t.ofFloats(s.buf,Lx.get_XY_UV_RGBA())),null!=s.ibuf&&null!=s.ibuf.vbuf||(s.ibuf=t.ofIndexes(s.idx))}this.bufferDirty=!1,this.indexDirty=!1}},doRender:function(e){if(0!=this.index.length){this.flush();for(var t=0,n=this.buffers;t<n.length;){var i=n[t];++t,i.state.drawIndexed(e,i.vbuf,i.ibuf)}this.state.drawIndexed(e,this.buffer,this.indexes)}},flush:function(){var e;null==this.buffer||null==this.buffer.vbuf?this.alloc(Vr.CURRENT):(e=S0.get(),this.bufferDirty&&(e.disposeBuffer(this.buffer),this.buffer=e.ofFloats(this.tmp,Lx.get_XY_UV_RGBA()),this.bufferDirty=!1),this.indexDirty&&(e.disposeIndexBuffer(this.indexes),this.indexes=e.ofIndexes(this.index),this.indexDirty=!1))},dispose:function(){for(var e=0,t=this.buffers;e<t.length;){var n=t[e];++e,null!=n.vbuf&&S0.get().disposeBuffer(n.vbuf),null!=n.ibuf&&S0.get().disposeIndexBuffer(n.ibuf),n.vbuf=null,n.ibuf=null,n.state.clear()}null!=this.buffer&&(S0.get().disposeBuffer(this.buffer),this.buffer=null),null!=this.indexes&&(S0.get().disposeIndexBuffer(this.indexes),this.indexes=null),this.state.clear(),Wt.prototype.dispose.call(this)},clear:function(){this.dispose(),this.tmp=qx._new(0),this.index=new Array(0),this.buffers=[]},__class__:Nt}),(i["h2d.Graphics"]=Gt).__name__="h2d.Graphics",Gt.__super__=Mt,Gt.prototype=e(Mt.prototype,{onRemove:function(){Mt.prototype.onRemove.call(this),this.clear()},clear:function(){this.content.clear(),this.tmpPoints=[],this.pindex=0,this.lineSize=0,this.xMin=1/0,this.yMin=1/0,this.yMax=-1/0,this.xMax=-1/0,this.xMinSize=1/0,this.yMinSize=1/0,this.yMaxSize=-1/0,this.xMaxSize=-1/0},getBoundsRec:function(e,t,n){Mt.prototype.getBoundsRec.call(this,e,t,n),null!=this.tile&&(n?this.addBounds(e,t,this.xMinSize,this.yMinSize,this.xMaxSize-this.xMinSize,this.yMaxSize-this.yMinSize):this.addBounds(e,t,this.xMin,this.yMin,this.xMax-this.xMin,this.yMax-this.yMin))},isConvex:function(e){for(var t=!0,n=!1,i=0,s=e.length;i<s;){var a=i++,l=e[a],r=e[(1+a)%e.length],a=e[(2+a)%e.length],r=0<(r.x-l.x)*(a.y-l.y)-(r.y-l.y)*(a.x-l.x);if(t)t=!1,n=r;else if(n!=r)return!1}return!0},flushLine:function(e){for(var t,n,i=this.tmpPoints,s=i.length-1,a=i[s],l=i[0],z=(this.content.setTile(Ir.fromColor(16777215)),l.x==a.x&&l.y==a.y),r=i.length,Q=(z?l!=a&&(--r,a=i[--s]):(null==(t=i[s-1])&&(t=l),(n=new Ot).load(2*a.x-t.x,2*a.y-t.y,0,0,0,0),i.push(n),null==(t=i[1])&&(t=l),(n=new Ot).load(2*l.x-t.x,2*l.y-t.y,0,0,0,0),a=n),0),V=r;Q<V;){var o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C,S,k,M=Q++,I=i[(1+M)%i.length],B=a.y-l.y,T=l.x-a.x,E=1/Math.sqrt(B*B+T*T),F=l.y-I.y,D=I.x-l.x,R=1/Math.sqrt(F*F+D*D),F=B*E+F*R,D=T*E+D*R,R=1/Math.sqrt(F*F+D*D),R=(F*=R)*B*E+(D*=R)*T*E,P=(R<.1&&(R=.1),.5*this.lineSize/R);F*=P,D*=P,R>this.bevel?(P=this.content,R=l.x+F,c=l.y+D,_=l.r,d=l.g,p=l.b,m=l.a,(h=P.tmp).pos==h.array.length&&((o=h.array.length<<1)<128&&(o=128),(o=new Float32Array(o)).set(h.array),h.array=o),h.array[h.pos++]=R,(o=P.tmp).pos==o.array.length&&((h=o.array.length<<1)<128&&(h=128),(R=new Float32Array(h)).set(o.array),o.array=R),o.array[o.pos++]=c,(h=P.tmp).pos==h.array.length&&((R=h.array.length<<1)<128&&(R=128),(c=new Float32Array(R)).set(h.array),h.array=c),h.array[h.pos++]=0,(R=P.tmp).pos==R.array.length&&((c=R.array.length<<1)<128&&(c=128),(h=new Float32Array(c)).set(R.array),R.array=h),R.array[R.pos++]=0,(c=P.tmp).pos==c.array.length&&((h=c.array.length<<1)<128&&(h=128),(R=new Float32Array(h)).set(c.array),c.array=R),c.array[c.pos++]=_,(h=P.tmp).pos==h.array.length&&((R=h.array.length<<1)<128&&(R=128),(c=new Float32Array(R)).set(h.array),h.array=c),h.array[h.pos++]=d,(_=P.tmp).pos==_.array.length&&((R=_.array.length<<1)<128&&(R=128),(c=new Float32Array(R)).set(_.array),_.array=c),_.array[_.pos++]=p,(h=P.tmp).pos==h.array.length&&((d=h.array.length<<1)<128&&(d=128),(R=new Float32Array(d)).set(h.array),h.array=R),h.array[h.pos++]=m,P.bufferDirty=!0,c=this.content,_=l.x-F,p=l.y-D,d=l.r,R=l.g,h=l.b,m=l.a,(P=c.tmp).pos==P.array.length&&((u=P.array.length<<1)<128&&(u=128),(u=new Float32Array(u)).set(P.array),P.array=u),P.array[P.pos++]=_,(u=c.tmp).pos==u.array.length&&((P=u.array.length<<1)<128&&(P=128),(_=new Float32Array(P)).set(u.array),u.array=_),u.array[u.pos++]=p,(P=c.tmp).pos==P.array.length&&((_=P.array.length<<1)<128&&(_=128),(p=new Float32Array(_)).set(P.array),P.array=p),P.array[P.pos++]=0,(_=c.tmp).pos==_.array.length&&((p=_.array.length<<1)<128&&(p=128),(P=new Float32Array(p)).set(_.array),_.array=P),_.array[_.pos++]=0,(p=c.tmp).pos==p.array.length&&((P=p.array.length<<1)<128&&(P=128),(_=new Float32Array(P)).set(p.array),p.array=_),p.array[p.pos++]=d,(P=c.tmp).pos==P.array.length&&((_=P.array.length<<1)<128&&(_=128),(p=new Float32Array(_)).set(P.array),P.array=p),P.array[P.pos++]=R,(d=c.tmp).pos==d.array.length&&((_=d.array.length<<1)<128&&(_=128),(p=new Float32Array(_)).set(d.array),d.array=p),d.array[d.pos++]=h,(P=c.tmp).pos==P.array.length&&((R=P.array.length<<1)<128&&(R=128),(_=new Float32Array(R)).set(P.array),P.array=_),P.array[P.pos++]=m,c.bufferDirty=!0,p=M==s?e:this.pindex+2,(M<r-1||z)&&((d=this.content).index.push(this.pindex),(h=d.state).tail.count+=1,h.totalCount+=1,d.indexDirty=!0,(R=this.content).index.push(this.pindex+1),(_=R.state).tail.count+=1,_.totalCount+=1,R.indexDirty=!0,(P=this.content).index.push(p),(m=P.state).tail.count+=1,m.totalCount+=1,P.indexDirty=!0,(c=this.content).index.push(this.pindex+1),(h=c.state).tail.count+=1,h.totalCount+=1,c.indexDirty=!0,(d=this.content).index.push(p),(_=d.state).tail.count+=1,_.totalCount+=1,d.indexDirty=!0,(R=this.content).index.push(p+1),(m=R.state).tail.count+=1,m.totalCount+=1,R.indexDirty=!0),this.pindex+=2):(P=-D,P*=c=.5*this.lineSize/(P*B*E+(h=F)*T*E),h*=c,_=M==s?e:this.pindex+3,0<(I.x-l.x)*F+(I.y-l.y)*D?(d=this.content,p=l.x+F,m=l.y+D,R=l.r,B=l.g,T=l.b,E=l.a,(M=d.tmp).pos==M.array.length&&((g=M.array.length<<1)<128&&(g=128),(g=new Float32Array(g)).set(M.array),M.array=g),M.array[M.pos++]=p,(g=d.tmp).pos==g.array.length&&((M=g.array.length<<1)<128&&(M=128),(M=new Float32Array(M)).set(g.array),g.array=M),g.array[g.pos++]=m,(M=d.tmp).pos==M.array.length&&((f=M.array.length<<1)<128&&(f=128),(f=new Float32Array(f)).set(M.array),M.array=f),M.array[M.pos++]=0,(f=d.tmp).pos==f.array.length&&((M=f.array.length<<1)<128&&(M=128),(M=new Float32Array(M)).set(f.array),f.array=M),f.array[f.pos++]=0,(M=d.tmp).pos==M.array.length&&((A=M.array.length<<1)<128&&(A=128),(A=new Float32Array(A)).set(M.array),M.array=A),M.array[M.pos++]=R,(A=d.tmp).pos==A.array.length&&((M=A.array.length<<1)<128&&(M=128),(R=new Float32Array(M)).set(A.array),A.array=R),A.array[A.pos++]=B,(M=d.tmp).pos==M.array.length&&((R=M.array.length<<1)<128&&(R=128),(B=new Float32Array(R)).set(M.array),M.array=B),M.array[M.pos++]=T,(R=d.tmp).pos==R.array.length&&((B=R.array.length<<1)<128&&(B=128),(M=new Float32Array(B)).set(R.array),R.array=M),R.array[R.pos++]=E,d.bufferDirty=!0,T=this.content,B=l.x-P,M=l.y-h,R=l.r,E=l.g,b=l.b,y=l.a,(v=T.tmp).pos==v.array.length&&((x=v.array.length<<1)<128&&(x=128),(x=new Float32Array(x)).set(v.array),v.array=x),v.array[v.pos++]=B,(x=T.tmp).pos==x.array.length&&((v=x.array.length<<1)<128&&(v=128),(B=new Float32Array(v)).set(x.array),x.array=B),x.array[x.pos++]=M,(v=T.tmp).pos==v.array.length&&((B=v.array.length<<1)<128&&(B=128),(M=new Float32Array(B)).set(v.array),v.array=M),v.array[v.pos++]=0,(B=T.tmp).pos==B.array.length&&((M=B.array.length<<1)<128&&(M=128),(v=new Float32Array(M)).set(B.array),B.array=v),B.array[B.pos++]=0,(M=T.tmp).pos==M.array.length&&((v=M.array.length<<1)<128&&(v=128),(B=new Float32Array(v)).set(M.array),M.array=B),M.array[M.pos++]=R,(v=T.tmp).pos==v.array.length&&((B=v.array.length<<1)<128&&(B=128),(M=new Float32Array(B)).set(v.array),v.array=M),v.array[v.pos++]=E,(R=T.tmp).pos==R.array.length&&((B=R.array.length<<1)<128&&(B=128),(M=new Float32Array(B)).set(R.array),R.array=M),R.array[R.pos++]=b,(v=T.tmp).pos==v.array.length&&((E=v.array.length<<1)<128&&(E=128),(B=new Float32Array(E)).set(v.array),v.array=B),v.array[v.pos++]=y,T.bufferDirty=!0,M=this.content,R=l.x+P,b=l.y+h,E=l.r,B=l.g,v=l.b,y=l.a,(T=M.tmp).pos==T.array.length&&((w=T.array.length<<1)<128&&(w=128),(w=new Float32Array(w)).set(T.array),T.array=w),T.array[T.pos++]=R,(w=M.tmp).pos==w.array.length&&((T=w.array.length<<1)<128&&(T=128),(R=new Float32Array(T)).set(w.array),w.array=R),w.array[w.pos++]=b,(T=M.tmp).pos==T.array.length&&((R=T.array.length<<1)<128&&(R=128),(b=new Float32Array(R)).set(T.array),T.array=b),T.array[T.pos++]=0,(R=M.tmp).pos==R.array.length&&((b=R.array.length<<1)<128&&(b=128),(T=new Float32Array(b)).set(R.array),R.array=T),R.array[R.pos++]=0,(b=M.tmp).pos==b.array.length&&((T=b.array.length<<1)<128&&(T=128),(R=new Float32Array(T)).set(b.array),b.array=R),b.array[b.pos++]=E,(T=M.tmp).pos==T.array.length&&((R=T.array.length<<1)<128&&(R=128),(b=new Float32Array(R)).set(T.array),T.array=b),T.array[T.pos++]=B,(E=M.tmp).pos==E.array.length&&((R=E.array.length<<1)<128&&(R=128),(b=new Float32Array(R)).set(E.array),E.array=b),E.array[E.pos++]=v,(T=M.tmp).pos==T.array.length&&((B=T.array.length<<1)<128&&(B=128),(R=new Float32Array(B)).set(T.array),T.array=R),T.array[T.pos++]=y,M.bufferDirty=!0,(b=this.content).index.push(this.pindex),(E=b.state).tail.count+=1,E.totalCount+=1,b.indexDirty=!0,(v=this.content).index.push(_),(B=v.state).tail.count+=1,B.totalCount+=1,v.indexDirty=!0,(R=this.content).index.push(this.pindex+2),(T=R.state).tail.count+=1,T.totalCount+=1,R.indexDirty=!0,(y=this.content).index.push(this.pindex+2),(M=y.state).tail.count+=1,M.totalCount+=1,y.indexDirty=!0,(E=this.content).index.push(_),(b=E.state).tail.count+=1,b.totalCount+=1,E.indexDirty=!0,(B=this.content).index.push(_+1),(v=B.state).tail.count+=1,v.totalCount+=1,B.indexDirty=!0):(T=this.content,R=l.x+P,M=l.y+h,y=l.r,b=l.g,E=l.b,v=l.a,(B=T.tmp).pos==B.array.length&&((C=B.array.length<<1)<128&&(C=128),(C=new Float32Array(C)).set(B.array),B.array=C),B.array[B.pos++]=R,(C=T.tmp).pos==C.array.length&&((B=C.array.length<<1)<128&&(B=128),(R=new Float32Array(B)).set(C.array),C.array=R),C.array[C.pos++]=M,(B=T.tmp).pos==B.array.length&&((R=B.array.length<<1)<128&&(R=128),(M=new Float32Array(R)).set(B.array),B.array=M),B.array[B.pos++]=0,(R=T.tmp).pos==R.array.length&&((M=R.array.length<<1)<128&&(M=128),(B=new Float32Array(M)).set(R.array),R.array=B),R.array[R.pos++]=0,(M=T.tmp).pos==M.array.length&&((B=M.array.length<<1)<128&&(B=128),(R=new Float32Array(B)).set(M.array),M.array=R),M.array[M.pos++]=y,(B=T.tmp).pos==B.array.length&&((R=B.array.length<<1)<128&&(R=128),(M=new Float32Array(R)).set(B.array),B.array=M),B.array[B.pos++]=b,(R=T.tmp).pos==R.array.length&&((M=R.array.length<<1)<128&&(M=128),(B=new Float32Array(M)).set(R.array),R.array=B),R.array[R.pos++]=E,(M=T.tmp).pos==M.array.length&&((B=M.array.length<<1)<128&&(B=128),(R=new Float32Array(B)).set(M.array),M.array=R),M.array[M.pos++]=v,T.bufferDirty=!0,E=this.content,B=l.x-F,R=l.y-D,M=l.r,T=l.g,F=l.b,D=l.a,(k=E.tmp).pos==k.array.length&&((S=k.array.length<<1)<128&&(S=128),(S=new Float32Array(S)).set(k.array),k.array=S),k.array[k.pos++]=B,(S=E.tmp).pos==S.array.length&&((k=S.array.length<<1)<128&&(k=128),(B=new Float32Array(k)).set(S.array),S.array=B),S.array[S.pos++]=R,(k=E.tmp).pos==k.array.length&&((B=k.array.length<<1)<128&&(B=128),(R=new Float32Array(B)).set(k.array),k.array=R),k.array[k.pos++]=0,(B=E.tmp).pos==B.array.length&&((R=B.array.length<<1)<128&&(R=128),(k=new Float32Array(R)).set(B.array),B.array=k),B.array[B.pos++]=0,(R=E.tmp).pos==R.array.length&&((k=R.array.length<<1)<128&&(k=128),(B=new Float32Array(k)).set(R.array),R.array=B),R.array[R.pos++]=M,(k=E.tmp).pos==k.array.length&&((B=k.array.length<<1)<128&&(B=128),(R=new Float32Array(B)).set(k.array),k.array=R),k.array[k.pos++]=T,(M=E.tmp).pos==M.array.length&&((B=M.array.length<<1)<128&&(B=128),(R=new Float32Array(B)).set(M.array),M.array=R),M.array[M.pos++]=F,(k=E.tmp).pos==k.array.length&&((T=k.array.length<<1)<128&&(T=128),(B=new Float32Array(T)).set(k.array),k.array=B),k.array[k.pos++]=D,E.bufferDirty=!0,R=this.content,M=l.x-P,F=l.y-h,T=l.r,B=l.g,k=l.b,D=l.a,(E=R.tmp).pos==E.array.length&&((P=E.array.length<<1)<128&&(P=128),(P=new Float32Array(P)).set(E.array),E.array=P),E.array[E.pos++]=M,(P=R.tmp).pos==P.array.length&&((E=P.array.length<<1)<128&&(E=128),(M=new Float32Array(E)).set(P.array),P.array=M),P.array[P.pos++]=F,(E=R.tmp).pos==E.array.length&&((M=E.array.length<<1)<128&&(M=128),(P=new Float32Array(M)).set(E.array),E.array=P),E.array[E.pos++]=0,(F=R.tmp).pos==F.array.length&&((M=F.array.length<<1)<128&&(M=128),(P=new Float32Array(M)).set(F.array),F.array=P),F.array[F.pos++]=0,(E=R.tmp).pos==E.array.length&&((M=E.array.length<<1)<128&&(M=128),(P=new Float32Array(M)).set(E.array),E.array=P),E.array[E.pos++]=T,(F=R.tmp).pos==F.array.length&&((M=F.array.length<<1)<128&&(M=128),(P=new Float32Array(M)).set(F.array),F.array=P),F.array[F.pos++]=B,(E=R.tmp).pos==E.array.length&&((T=E.array.length<<1)<128&&(T=128),(M=new Float32Array(T)).set(E.array),E.array=M),E.array[E.pos++]=k,(P=R.tmp).pos==P.array.length&&((F=P.array.length<<1)<128&&(F=128),(B=new Float32Array(F)).set(P.array),P.array=B),P.array[P.pos++]=D,R.bufferDirty=!0,(T=this.content).index.push(this.pindex+1),(M=T.state).tail.count+=1,M.totalCount+=1,T.indexDirty=!0,(E=this.content).index.push(_),(k=E.state).tail.count+=1,k.totalCount+=1,E.indexDirty=!0,(F=this.content).index.push(this.pindex+2),(B=F.state).tail.count+=1,B.totalCount+=1,F.indexDirty=!0,(P=this.content).index.push(this.pindex+1),(D=P.state).tail.count+=1,D.totalCount+=1,P.indexDirty=!0,(R=this.content).index.push(_),(M=R.state).tail.count+=1,M.totalCount+=1,R.indexDirty=!0,(T=this.content).index.push(_+1),(k=T.state).tail.count+=1,k.totalCount+=1,T.indexDirty=!0),(E=this.content).index.push(this.pindex),(B=E.state).tail.count+=1,B.totalCount+=1,E.indexDirty=!0,(F=this.content).index.push(this.pindex+1),(D=F.state).tail.count+=1,D.totalCount+=1,F.indexDirty=!0,(P=this.content).index.push(this.pindex+2),(M=P.state).tail.count+=1,M.totalCount+=1,P.indexDirty=!0,this.pindex+=3),a=l,l=I}this.content.setTile(this.tile)},flushFill:function(e){if(!(this.tmpPoints.length<3)){var t=this.tmpPoints,n=t[0],i=t[t.length-1],s=null,a=n.x-i.x;if((a<0?-a:a)<1e-9&&((a=n.y-i.y)<0?-a:a)<1e-9&&(s=t.pop()),this.isConvex(t))for(var l=1,r=t.length-1;l<r;){var o=l++;(c=this.content).index.push(e);(_=c.state).tail.count+=1,_.totalCount+=1,c.indexDirty=!0;var u=this.content,h=(u.index.push(e+o),u.state),h=(h.tail.count+=1,h.totalCount+=1,u.indexDirty=!0,this.content),u=(h.index.push(e+o+1),h.state);u.tail.count+=1,u.totalCount+=1,h.indexDirty=!0}else for(var c,_,n=Gt.EARCUT,l=(null==n&&(n=new c0,Gt.EARCUT=n),0),r=n.triangulate_h2d_GPoint(t);l<r.length;)(c=this.content).index.push(r[l++]+e),(_=c.state).tail.count+=1,_.totalCount+=1,c.indexDirty=!0;null!=s&&t.push(s)}},flush:function(){0!=this.tmpPoints.length&&(this.doFill&&(this.flushFill(this.pindex),this.pindex+=this.tmpPoints.length,this.content.next())&&(this.pindex=0),0<this.lineSize&&(this.flushLine(this.pindex),this.content.next())&&(this.pindex=0),this.tmpPoints=[])},beginFill:function(e,t){null==t&&(t=1),null==e&&(e=0),this.flush(),this.tile=Ir.fromColor(16777215),this.content.setTile(this.tile);t=null==t?1:t;this.curA=t,this.curR=(e>>16&255)/255,this.curG=(e>>8&255)/255,this.curB=(255&e)/255,this.doFill=!0},endFill:function(){this.flush(),this.doFill=!1},drawRect:function(e,t,n,i){this.flush(),this.addVertex(e,t,this.curR,this.curG,this.curB,this.curA,e*this.ma+t*this.mc+this.mx,e*this.mb+t*this.md+this.my);this.addVertex(s=e+n,t,this.curR,this.curG,this.curB,this.curA,s*this.ma+t*this.mc+this.mx,s*this.mb+t*this.md+this.my);var s=e+n,n=(this.addVertex(s,n=t+i,this.curR,this.curG,this.curB,this.curA,s*this.ma+n*this.mc+this.mx,s*this.mb+n*this.md+this.my),t+i);this.addVertex(e,n,this.curR,this.curG,this.curB,this.curA,e*this.ma+n*this.mc+this.mx,e*this.mb+n*this.md+this.my),this.addVertex(e,t,this.curR,this.curG,this.curB,this.curA,e*this.ma+t*this.mc+this.mx,e*this.mb+t*this.md+this.my),this.tmpPoints[0].x+=.01,this.tmpPoints[0].y+=.01,this.tmpPoints[1].y+=.01,this.tmpPoints[3].x+=.01,this.tmpPoints[4].x+=.01,this.tmpPoints[4].y+=.01,this.flush()},addVertex:function(e,t,n,i,s,a,l,r){null==r&&(r=0),null==l&&(l=0);var o,u,h,c=this.lineSize/2,l=(e-c<this.xMin&&(this.xMin=e-c),t-c<this.yMin&&(this.yMin=t-c),e+c>this.xMax&&(this.xMax=e+c),t+c>this.yMax&&(this.yMax=t+c),e<this.xMinSize&&(this.xMinSize=e),t<this.yMinSize&&(this.yMinSize=t),e>this.xMaxSize&&(this.xMaxSize=e),t>this.yMaxSize&&(this.yMaxSize=t),this.doFill&&((o=(c=this.content).tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=e,(o=c.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=t,(o=c.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=l,(o=c.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=r,(o=c.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=n,(o=c.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=i,(o=c.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=s,(o=c.tmp).pos==o.array.length&&((u=o.array.length<<1)<128&&(u=128),(h=new Float32Array(u)).set(o.array),o.array=h),o.array[o.pos++]=a,c.bufferDirty=!0),new Ot);l.load(e,t,this.lineR,this.lineG,this.lineB,this.lineA),this.tmpPoints.push(l)},draw:function(e){e.beginDrawBatchState(this)&&this.content.doRender(e)},sync:function(e){Mt.prototype.sync.call(this,e),this.flush(),this.content.flush()},__class__:Gt}),(i["hxd.Interactive"]=Ut).__name__="hxd.Interactive",Ut.__isInterface__=!0,Ut.prototype={__class__:Ut},function(e,t,n,i){this.shapeY=0,this.shapeX=0,this.lastClickFrame=-1,this.mouseDownButton=-1,this.allowMultiClick=!1,this.enableRightButton=!1,this.propagateEvents=!1,this.cancelEvents=!1,this.cursor=Yx.Button,kt.call(this,n),this.width=e,this.height=t,this.shape=i}),vr=((i["h2d.Interactive"]=br).__name__="h2d.Interactive",br.__interfaces__=[Ut],br.__super__=kt,br.prototype=e(kt.prototype,{onAdd:function(){this.scene=this.getScene(),null!=this.scene&&this.scene.addEventTarget(this),kt.prototype.onAdd.call(this)},draw:function(e){this.maskedBounds=e.getCurrentRenderZone(this.maskedBounds),null!=this.backgroundColor&&this.emitTile(e,Ir.fromColor(this.backgroundColor,0|this.width,0|this.height,(this.backgroundColor>>>24)/255))},getBoundsRec:function(e,t,n){kt.prototype.getBoundsRec.call(this,e,t,n),null==this.backgroundColor&&!n||this.addBounds(e,t,0,0,0|this.width,0|this.height)},onHierarchyMoved:function(e){kt.prototype.onHierarchyMoved.call(this,e),null!=this.scene&&(this.scene.removeEventTarget(this),this.scene=this.getScene(),null!=this.scene)&&this.scene.addEventTarget(this)},onRemove:function(){null!=this.scene&&(this.scene.removeEventTarget(this,!0),this.scene=null),kt.prototype.onRemove.call(this)},checkBounds:function(e){switch(e.kind._hx_index){case 4:case 6:case 7:case 10:return!1;default:return!0}},getInteractiveScene:function(){return this.scene},handleEvent:function(e){if(null!=this.maskedBounds&&this.checkBounds(e)){var t=e.relX,n=e.relY,t=new St(t=null==t?0:t,n=null==n?0:n);if(this.localToGlobal(t),t.x<this.maskedBounds.xMin||t.y<this.maskedBounds.yMin||t.x>this.maskedBounds.xMax||t.y>this.maskedBounds.yMax)return void(e.cancel=!0)}if(null==this.shape&&this.isEllipse&&this.checkBounds(e)){n=.5*this.width,t=.5*this.height,n=(e.relX-n)/n,t=(e.relY-t)/t;if(1<n*n+t*t)return void(e.cancel=!0)}switch(this.propagateEvents&&(e.propagate=!0),this.cancelEvents&&(e.cancel=!0),e.kind._hx_index){case 0:(this.enableRightButton||0==e.button)&&(this.mouseDownButton=e.button,this.onPush(e),e.cancel)&&(this.mouseDownButton=-1);break;case 1:var i;!this.enableRightButton&&0!=e.button||(this.onRelease(e),i=l0.frameCount,this.mouseDownButton!=e.button)||this.lastClickFrame==i&&!this.allowMultiClick||(this.onClick(e),this.lastClickFrame=i),this.mouseDownButton=-1;break;case 2:this.onMove(e);break;case 3:this.onOver(e);break;case 4:this.onOut(e);break;case 5:e.propagate=!0,this.onWheel(e);break;case 6:this.onFocus(e);break;case 7:this.onFocusLost(e);break;case 8:this.onKeyDown(e);break;case 9:this.onKeyUp(e);break;case 10:!this.enableRightButton&&0!=e.button||(this.onRelease(e),this.mouseDownButton!=e.button)||this.onReleaseOutside(e),this.mouseDownButton=-1;break;case 11:this.onTextInput(e);break;case 12:this.onCheck(e)}},calcAbsPos:function(){kt.prototype.calcAbsPos.call(this),this.invDet=1/(this.matA*this.matD-this.matB*this.matC)},onOver:function(e){},onOut:function(e){},onPush:function(e){},onRelease:function(e){},onReleaseOutside:function(e){},onClick:function(e){},onMove:function(e){},onWheel:function(e){},onFocus:function(e){},onFocusLost:function(e){},onKeyUp:function(e){},onKeyDown:function(e){},onCheck:function(e){},onTextInput:function(e){},__class__:br}),(i["h2d.Layers"]=Lt).__name__="h2d.Layers",Lt.__super__=kt,Lt.prototype=e(kt.prototype,{addChild:function(e){this.add(e,-1)},add:function(e,t,n){var i,s;for(null==n&&(n=-1),null==t&&(t=-1),e.parent==this&&(i=e.allocated,e.allocated=!1,this.removeChild(e),e.allocated=i),-1==t&&(t=0==this.layerCount?0:this.layerCount-1);t>=this.layerCount;)this.layersIndexes[this.layerCount++]=this.children.length;-1!=n?0==t?(i=(s=this.layersIndexes[t])<n?s:n,kt.prototype.addChildAt.call(this,e,0<i?i:0)):n<0?kt.prototype.addChildAt.call(this,e,this.layersIndexes[t-1]):(i=this.layersIndexes[t-1]+n,s=this.layersIndexes[t],kt.prototype.addChildAt.call(this,e,s<i?s:i)):kt.prototype.addChildAt.call(this,e,this.layersIndexes[t]);for(var a=t,l=this.layerCount;a<l;)this.layersIndexes[a++]++},addChildAt:function(e,t){this.add(e,-1,t)},removeChild:function(e){for(var t=0,n=this.children.length;t<n;){var i=t++;if(this.children[i]==e){this.children.splice(i,1),e.allocated&&e.onRemove(),e.parent=null,e.posChanged=!0,null!=e.parentContainer&&e.setParentContainer(null);for(var s=this.layerCount-1;0<=s&&this.layersIndexes[s]>i;)this.layersIndexes[s]--,--s;null!=this.parentContainer&&this.parentContainer.contentChanged(this);break}}},__class__:Lt}),(i["h3d.impl.RenderContext"]=jt).__name__="h3d.impl.RenderContext",jt.inst=null,jt.get=function(){return jt.inst},jt.prototype={setCurrent:function(){jt.inst=this},clearCurrent:function(){if(jt.inst!=this)throw tl.thrown("Context has changed");jt.inst=null},dispose:function(){this.textures.dispose()},fillRec:function(e,t,n,i){switch(t._hx_index){case 1:case 3:return n[i]=e,1;case 5:return 4==(a=t.size)?(n[i++]=(_=e).x,n[i++]=_.y,n[i++]=_.z,n[i++]=_.w,4):(n[i++]=(_=e).x,n[i++]=_.y,3==a&&(n[i++]=_.z),a);case 6:var s=e;return n[i++]=s._11,n[i++]=s._21,n[i++]=s._31,n[i++]=0,n[i++]=s._12,n[i++]=s._22,n[i++]=s._32,n[i++]=0,n[i++]=s._13,n[i++]=s._23,n[i++]=s._33,n[i++]=0,12;case 7:s=e;return n[i++]=s._11,n[i++]=s._21,n[i++]=s._31,n[i++]=s._41,n[i++]=s._12,n[i++]=s._22,n[i++]=s._32,n[i++]=s._42,n[i++]=s._13,n[i++]=s._23,n[i++]=s._33,n[i++]=s._43,n[i++]=s._14,n[i++]=s._24,n[i++]=s._34,n[i++]=s._44,16;case 8:s=e;return n[i++]=s._11,n[i++]=s._21,n[i++]=s._31,n[i++]=s._41,n[i++]=s._12,n[i++]=s._22,n[i++]=s._32,n[i++]=s._42,n[i++]=s._13,n[i++]=s._23,n[i++]=s._33,n[i++]=s._43,12;case 13:for(var a=t.vl,l=0,r=0;r<a.length;){var o=a[r];++r,l+=this.fillRec(X.field(e,o.name),o.type,n,i+l)}return l;case 15:a=t.t,r=t.size;switch(a._hx_index){case 3:if(0!=r._hx_index)throw tl.thrown("assert "+el.string(t));for(var u=r.v,h=0,c=(_=e).length<u?_.length:u;h<c;)n[i++]=_[h++];return u;case 5:if(4==a.size&&1==a.t._hx_index){if(0!=r._hx_index)throw tl.thrown("assert "+el.string(t));for(var u=r.v,_=e,h=0;h<u&&null!=(d=_[h++]);)n[i++]=d.x,n[i++]=d.y,n[i++]=d.z,n[i++]=d.w;return 4*u}if(0!=r._hx_index)throw tl.thrown("assert "+el.string(t));for(u=r.v,_=e,p=0,h=0;h<u&&null!=(d=_[h++]);)i+=p=this.fillRec(d,a,n,i);return u*p;case 8:if(0!=r._hx_index)throw tl.thrown("assert "+el.string(t));for(u=r.v,_=e,h=0;h<u&&null!=(s=_[h++]);)n[i++]=s._11,n[i++]=s._21,n[i++]=s._31,n[i++]=s._41,n[i++]=s._12,n[i++]=s._22,n[i++]=s._32,n[i++]=s._42,n[i++]=s._13,n[i++]=s._23,n[i++]=s._33,n[i++]=s._43;return 12*u;default:if(0!=r._hx_index)throw tl.thrown("assert "+el.string(t));for(var d,u=r.v,_=e,p=0,r=0;r<u&&null!=(d=_[r++]);)i+=p=this.fillRec(d,a,n,i);return u*p}break;default:throw tl.thrown("assert "+el.string(t))}},shaderInfo:function(e,t){for(var n=t.split(".").pop();null!=e;){for(var i=0,s=e.s.instance.shader.vars;i<s.length;)if(s[i++].name==n)return e.s.toString();e=e.next}return"(not found)"},fillGlobals:function(e,t){for(var n=t.vertex.globals,i=e.vertex.globals;null!=n;){if(null==(s=this.globals.map.h[n.gid]))throw tl.thrown("Missing global value "+n.path);this.fillRec(s,n.type,i,n.pos),n=n.next}if(null!=t.fragment)for(var s,n=t.fragment.globals,i=e.fragment.globals;null!=n;){if(null==(s=this.globals.map.h[n.gid]))throw tl.thrown("Missing global value "+n.path);this.fillRec(s,n.type,i,n.pos),n=n.next}},fillParams:function(e,t,n,i){null==i&&(i=!1);for(var s=-1,a=null,l=e.vertex,r=(f=t.vertex).params,o=l.params;null!=r;){if(null==r.perObjectGlobal){switch(r.type._hx_index){case 1:case 3:if(s==(M=r.instance))A=a;else{var u=n,s=M;for(i&&++M;0<--M;)u=u.next;A=a=u.s}o[r.pos]=A.getParamFloatValue(r.index),r=r.next;continue}if(s==(x=r.instance))I=a;else{var h=n;for(s=x,i&&++x;0<--x;)h=h.next;I=a=h.s}if(null==(k=I.getParamValue(r.index)))throw tl.thrown("Missing param value "+el.string(a)+"."+r.name)}else if(null!=r.perObjectGlobal){if(null==(B=this.globals.map.h[r.perObjectGlobal.gid]))throw tl.thrown("Missing global value "+r.perObjectGlobal.path+" for shader "+this.shaderInfo(n,r.perObjectGlobal.path));k=17==r.type._hx_index?B.texture:B}else{if(s==(w=r.instance))y=a;else{var c=n;for(s=w,i&&++w;0<--w;)c=c.next;y=a=c.s}if(null==(b=y.getParamValue(r.index)))throw tl.thrown("Missing param value "+el.string(n.s)+"."+r.name);k=b}this.fillRec(k,r.type,o,r.pos),r=r.next}for(var _=0,r=f.textures;null!=r;){if(null==(C=!jt.STRICT)&&(C=!1),null!=r.perObjectGlobal){if(null==(k=this.globals.map.h[r.perObjectGlobal.gid]))throw tl.thrown("Missing global value "+r.perObjectGlobal.path+" for shader "+this.shaderInfo(n,r.perObjectGlobal.path));v=17==r.type._hx_index?k.texture:k}else{if(s==(M=r.instance))I=a;else{u=n;for(s=M,i&&++M;0<--M;)u=u.next;I=a=u.s}if(null==(B=I.getParamValue(r.index))&&!C)throw tl.thrown("Missing param value "+el.string(n.s)+"."+r.name);v=B}if(r.pos<0)for(var d=v,p=0,m=-r.pos;p<m;)l.tex[_++]=d[p++];else l.tex[_++]=v;r=r.next}for(var r=f.buffers,g=0;null!=r;){if(null==(C=!jt.STRICT)&&(C=!1),null!=r.perObjectGlobal){if(null==(k=this.globals.map.h[r.perObjectGlobal.gid]))throw tl.thrown("Missing global value "+r.perObjectGlobal.path+" for shader "+this.shaderInfo(n,r.perObjectGlobal.path));S=17==r.type._hx_index?k.texture:k}else{if(s==(M=r.instance))I=a;else{u=n;for(s=M,i&&++M;0<--M;)u=u.next;I=a=u.s}if(null==(B=I.getParamValue(r.index))&&!C)throw tl.thrown("Missing param value "+el.string(n.s)+"."+r.name);S=B}l.buffers[g++]=S,r=r.next}if(null!=t.fragment){for(var f,A,x,w,y,b,l=e.fragment,r=(f=t.fragment).params,o=l.params;null!=r;){if(null==r.perObjectGlobal){switch(r.type._hx_index){case 1:case 3:if(s==(M=r.instance))A=a;else{u=n;for(s=M,i&&++M;0<--M;)u=u.next;A=a=u.s}o[r.pos]=A.getParamFloatValue(r.index),r=r.next;continue}if(s==(x=r.instance))I=a;else{h=n;for(s=x,i&&++x;0<--x;)h=h.next;I=a=h.s}if(null==(k=I.getParamValue(r.index)))throw tl.thrown("Missing param value "+el.string(a)+"."+r.name)}else if(null!=r.perObjectGlobal){if(null==(B=this.globals.map.h[r.perObjectGlobal.gid]))throw tl.thrown("Missing global value "+r.perObjectGlobal.path+" for shader "+this.shaderInfo(n,r.perObjectGlobal.path));k=17==r.type._hx_index?B.texture:B}else{if(s==(w=r.instance))y=a;else{c=n;for(s=w,i&&++w;0<--w;)c=c.next;y=a=c.s}if(null==(b=y.getParamValue(r.index)))throw tl.thrown("Missing param value "+el.string(n.s)+"."+r.name);k=b}this.fillRec(k,r.type,o,r.pos),r=r.next}for(var v,_=0,r=f.textures;null!=r;){if(null==(C=!jt.STRICT)&&(C=!1),null!=r.perObjectGlobal){if(null==(k=this.globals.map.h[r.perObjectGlobal.gid]))throw tl.thrown("Missing global value "+r.perObjectGlobal.path+" for shader "+this.shaderInfo(n,r.perObjectGlobal.path));v=17==r.type._hx_index?k.texture:k}else{if(s==(M=r.instance))I=a;else{u=n;for(s=M,i&&++M;0<--M;)u=u.next;I=a=u.s}if(null==(B=I.getParamValue(r.index))&&!C)throw tl.thrown("Missing param value "+el.string(n.s)+"."+r.name);v=B}if(r.pos<0)for(d=v,p=0,m=-r.pos;p<m;)l.tex[_++]=d[p++];else l.tex[_++]=v;r=r.next}for(var C,S,k,M,I,B,r=f.buffers,g=0;null!=r;){if(null==(C=!jt.STRICT)&&(C=!1),null!=r.perObjectGlobal){if(null==(k=this.globals.map.h[r.perObjectGlobal.gid]))throw tl.thrown("Missing global value "+r.perObjectGlobal.path+" for shader "+this.shaderInfo(n,r.perObjectGlobal.path));S=17==r.type._hx_index?k.texture:k}else{if(s==(M=r.instance))I=a;else{u=n;for(s=M,i&&++M;0<--M;)u=u.next;I=a=u.s}if(null==(B=I.getParamValue(r.index))&&!C)throw tl.thrown("Missing param value "+el.string(n.s)+"."+r.name);S=B}l.buffers[g++]=S,r=r.next}}},__class__:jt},(i["h2d.RenderContext"]=Ht).__name__="h2d.RenderContext",Ht.__super__=jt,Ht.prototype=e(jt.prototype,{dispose:function(){jt.prototype.dispose.call(this),null!=this.fixedBuffer&&this.fixedBuffer.dispose()},begin:function(){this.texture=null,this.currentObj=null,this.bufPos=0,this.stride=0,this.viewA=this.scene.viewportA,this.viewB=0,this.viewC=0,this.viewD=this.scene.viewportD,this.viewX=this.scene.viewportX,this.viewY=this.scene.viewportY,this.setCurrent(),this.targetFlipY=this.engine.driver.hasFeature(Yr.BottomLeftCoords)?-1:1,this.baseFlipY=null!=this.engine.getCurrentTarget()?this.targetFlipY:1,this.inFilter=null,this.globals.set("time",this.time),this.globals.set("global.time",this.time),this.globals.set("depthMap",{texture:this.engine.driver.getDefaultDepthBuffer(),channel:rw.R});(e=this.baseShader).constModified=!0,e.pixelAlign__=!1;var e=this.baseShader.halfPixelInverse__,t=.5/this.engine.width,e=(null==(i=.5/this.engine.height)&&(i=0),e.x=t=null==t?0:t,e.y=i,e.z=0,this.baseShader.viewportA__),t=this.scene.viewportA,n=this.scene.viewportX,e=(null==n&&(n=0),e.x=t=null==t?0:t,e.y=0,e.z=n,this.baseShader.viewportB__),i=this.scene.viewportD*-this.baseFlipY;null==(n=this.scene.viewportY*-this.baseFlipY)&&(n=0),null==i&&(i=0),e.x=0,e.y=i,e.z=n,(e=this.baseShader.filterMatrixA__).x=1,e.y=0,e.z=0,(e=this.baseShader.filterMatrixB__).x=0,e.y=1,e.z=0,this.baseShaderList.next=null,this.initShaders(this.baseShaderList),this.engine.selectMaterial(this.pass),this.textures.begin()},initShaders:function(e){this.needInitShaders=!1,this.currentShaders=e,this.compiledShader=this.output.compileShaders(this.globals,e);var e=this.shaderBuffers,t=this.compiledShader;e.vertex.grow(t.vertex),null!=t.fragment&&e.fragment.grow(t.fragment),this.fillGlobals(e,this.compiledShader),this.engine.selectShader(this.compiledShader),this.engine.uploadShaderBuffers(e,0)},end:function(){if(this.texture=null,this.currentObj=null,this.baseShaderList.next=null,this.clearCurrent(),0!=this.targetsStackIndex)throw tl.thrown("Missing popTarget()");if(0!=this.cameraStackIndex)throw tl.thrown("Missing popCamera()")},pushCamera:function(e){var t=this.cameraStack[this.cameraStackIndex++],n=(null==t&&this.cameraStack.push(t={va:0,vb:0,vc:0,vd:0,vx:0,vy:0,camera:null}),this.viewA),i=this.viewB,s=this.viewC,a=this.viewD,t=(t.va=n,t.vb=i,t.vc=s,t.vd=a,t.vx=this.viewX,t.vy=this.viewY,t.camera=this.currentCamera,this.currentCamera=e,this.viewA=e.matA*n+e.matB*s,this.viewB=e.matA*i+e.matB*a,this.viewC=e.matC*n+e.matD*s,this.viewD=e.matC*i+e.matD*a,this.viewX=e.absX*n+e.absY*s+this.viewX,this.viewY=e.absX*i+e.absY*a+this.viewY,null!=this.curTarget?-this.targetFlipY:-this.baseFlipY),n=this.baseShader.viewportA__,s=this.viewA,i=this.viewC,e=this.viewX,n=(null==e&&(e=0),null==i&&(i=0),n.x=s=null==s?0:s,n.y=i,n.z=e,this.baseShader.viewportB__),s=this.viewB*t,i=this.viewD*t;null==(e=this.viewY*t)&&(e=0),null==i&&(i=0),n.x=s=null==s?0:s,n.y=i,n.z=e},popCamera:function(){if(0==this.cameraStackIndex)throw tl.thrown("Too many popCamera()");var e=this.cameraStack[--this.cameraStackIndex],e=(this.viewA=e.va,this.viewB=e.vb,this.viewC=e.vc,this.viewD=e.vd,this.viewX=e.vx,this.viewY=e.vy,this.currentCamera=e.camera,(e.camera=null)!=this.curTarget?-this.targetFlipY:-this.baseFlipY),t=this.baseShader.viewportA__,n=this.viewA,i=this.viewC,s=this.viewX,t=(null==s&&(s=0),null==i&&(i=0),t.x=n=null==n?0:n,t.y=i,t.z=s,this.baseShader.viewportB__),n=this.viewB*e,i=this.viewD*e;null==(s=this.viewY*e)&&(s=0),null==i&&(i=0),t.x=n=null==n?0:n,t.y=i,t.z=s},pushFilter:function(e){return!(0==this.filterStack.length&&null!=this.onEnterFilter&&!this.onEnterFilter(e)||(this.inFilter=this.filterStack[this.filterStackIndex++],null==this.inFilter&&(this.inFilter={spr:null,scaleX:1,scaleY:1},this.filterStack.push(this.inFilter)),this.inFilter.spr=e,this.inFilter.scaleX=1,this.inFilter.scaleY=1,0))},setFilterScale:function(e,t){null!=this.inFilter&&(this.inFilter.scaleX=e,this.inFilter.scaleY=t)},popFilter:function(){this.inFilter.spr=null,this.filterStackIndex--,0<this.filterStackIndex?this.inFilter=this.filterStack[this.filterStackIndex-1]:(this.inFilter=null)!=this.onLeaveFilter&&this.onLeaveFilter(this.filterStack[this.filterStackIndex].spr)},pushTarget:function(e,t,n,i,s){null==s&&(s=-1),null==i&&(i=-1),null==n&&(n=0),null==t&&(t=0),this.engine.pushTarget(e),this.initShaders(this.baseShaderList);var a=this.targetsStack[this.targetsStackIndex++],a=(null==a&&this.targetsStack.push(a={t:null,va:0,vb:0,vc:0,vd:0,vx:0,vy:0,hasRZ:!1,rzX:0,rzY:0,rzW:0,rzH:0}),a.t=this.curTarget,a.va=this.viewA,a.vb=this.viewB,a.vc=this.viewC,a.vd=this.viewD,a.vx=this.viewX,a.vy=this.viewY,a.hasRZ=this.hasRenderZone,a.rzX=this.renderX,a.rzY=this.renderY,a.rzW=this.renderW,a.rzH=this.renderH,i<0&&(i=(null==e?this.scene:e).width),s<0&&(s=(null==e?this.scene:e).height),this.viewA=2/i,this.viewB=0,this.viewC=0,this.viewD=2/s,this.viewX=-1-t*this.viewA,this.viewY=-1-n*this.viewD,this.baseShader.halfPixelInverse__),i=.5/(null==e?this.engine:e).width,a=(null==(s=.5/(null==e?this.engine:e).height)&&(s=0),a.x=i=null==i?0:i,a.y=s,a.z=0,this.baseShader.viewportA__),i=this.viewA,s=this.viewC,t=this.viewX,a=(null==t&&(t=0),null==s&&(s=0),a.x=i=null==i?0:i,a.y=s,a.z=t,this.baseShader.viewportB__),i=this.viewB*-this.targetFlipY,s=this.viewD*-this.targetFlipY;null==(t=this.viewY*-this.targetFlipY)&&(t=0),null==s&&(s=0),a.x=i=null==i?0:i,a.y=s,a.z=t,this.curTarget=e,this.currentBlend=null,this.hasRenderZone&&(this.hasRenderZone=!1,this.engine.setRenderZone())},pushTargets:function(e){this.pushTarget(e[0]),1<e.length&&(this.engine.popTarget(),this.engine.pushTargets(e))},popTarget:function(){if(this.targetsStackIndex<=0)throw tl.thrown("Too many popTarget()");this.engine.popTarget();var e=this.targetsStack[--this.targetsStackIndex],t=this.curTarget=e.t,n=(this.viewA=e.va,this.viewB=e.vb,this.viewC=e.vc,this.viewD=e.vd,this.viewX=e.vx,this.viewY=e.vy,null==t?-this.baseFlipY:-this.targetFlipY),i=(this.initShaders(this.baseShaderList),this.baseShader.halfPixelInverse__),s=.5/(null==t?this.engine:t).width,i=(null==(t=.5/(null==t?this.engine:t).height)&&(t=0),i.x=s=null==s?0:s,i.y=t,i.z=0,this.baseShader.viewportA__),s=this.viewA,t=this.viewC,a=this.viewX,i=(null==a&&(a=0),null==t&&(t=0),i.x=s=null==s?0:s,i.y=t,i.z=a,this.baseShader.viewportB__),s=this.viewB*n,t=this.viewD*n;null==(a=this.viewY*n)&&(a=0),null==t&&(t=0),i.x=s=null==s?0:s,i.y=t,i.z=a,e.hasRZ&&this.setRZ(e.rzX,e.rzY,e.rzW,e.rzH)},pushRenderZone:function(e,t,n,i){var s=this.renderZoneStack[this.renderZoneIndex++];null==s?(s={hasRZ:this.hasRenderZone,x:this.renderX,y:this.renderY,w:this.renderW,h:this.renderH},this.renderZoneStack[this.renderZoneIndex-1]=s):this.hasRenderZone?(s.hasRZ=!0,s.x=this.renderX,s.y=this.renderY,s.w=this.renderW,s.h=this.renderH):s.hasRZ=!1,this.setRZ(e,t,n,i)},popRenderZone:function(){if(0==this.renderZoneIndex)throw tl.thrown("Too many popRenderZone()");var e=this.renderZoneStack[--this.renderZoneIndex];e.hasRZ?this.setRZ(e.x,e.y,e.w,e.h):(this.hasRenderZone=!1,this.engine.setRenderZone())},getCurrentRenderZone:function(e){if(!this.hasRenderZone)return null;null==e&&(e=new Tr);var t=this.renderX,n=this.renderY;return e.xMin=t,e.yMin=n,e.xMax=t+this.renderW,e.yMax=n+this.renderH,e},setRZ:function(e,t,n,i){this.hasRenderZone=!0,this.renderX=e,this.renderY=t,this.renderW=n,this.renderH=i;var s,a,l,r,o,u,h=this.scene.viewportA*this.engine.width/2,c=this.scene.viewportD*this.engine.height/2;null!=this.inFilter&&(s=this.baseShader.filterMatrixA__,a=this.baseShader.filterMatrixB__,o=e*s.x+t*s.y+s.z,u=e*a.x+t*a.y+a.z,n=(l=e+n)*s.x+(r=t+i)*s.y+s.z-(e=o),i=l*a.x+r*a.y+a.z-(t=u)),this.engine.setRenderZone(e*h+(this.scene.viewportX+1)*(this.engine.width/2)+1e-10|0,t*c+(this.scene.viewportY+1)*(this.engine.height/2)+1e-10|0,n*h+1e-10|0,i*c+1e-10|0)},drawScene:function(){this.scene.drawRec(this)},beforeDraw:function(){null==this.texture&&(this.texture=_o.fromColor(16711935)),this.baseShader.texture__=this.texture,this.texture.set_filter((null==this.currentObj.smooth?this.defaultSmooth:this.currentObj.smooth)?so.Linear:so.Nearest),this.texture.set_wrap(!this.currentObj.tileWrap||null!=this.currentObj.filter&&null==this.inFilter?ao.Clamp:ao.Repeat);var e=this.currentObj.blendMode,e=(null!=this.inFilter&&this.inFilter.spr==this.currentObj&&e==wr.Erase&&(e=wr.Add),(e=null!=this.inFilterBlend?this.inFilterBlend:e)!=this.currentBlend&&(this.currentBlend=e,this.pass.setBlendMode(e),e!=wr.Alpha&&e!=wr.Add||(this.pass.set_blendAlphaSrc(eo.One),null!=this.inFilterBlend&&this.pass.set_blendSrc(eo.One))),this.shaderBuffers);this.fillParams(e,this.compiledShader,this.currentShaders),this.engine.selectMaterial(this.pass),this.engine.uploadInstanceShaderBuffers(e)},beginDrawBatchState:function(e){var t,n,i,s,a;return!!this.beginDraw(e,null,!0)&&(null!=this.inFilter&&this.inFilter.spr==e?(n=this.baseShader.color__,i=e.color.x,s=e.color.y,a=e.color.z,null==(t=e.color.w)&&(t=1)):null!=this.inFilterBlend?(n=this.baseShader.color__,i=this.globalAlpha,s=this.globalAlpha,a=this.globalAlpha,null==(t=this.globalAlpha)&&(t=1)):(n=this.baseShader.color__,i=e.color.x,s=e.color.y,a=e.color.z,null==(t=e.color.w*this.globalAlpha)&&(t=1)),null==a&&(a=0),null==s&&(s=0),n.x=i=null==i?0:i,n.y=s,n.z=a,n.w=t,n=this.baseShader.absoluteMatrixA__,i=e.matA,null==(a=e.absX)&&(a=0),null==(s=e.matC)&&(s=0),n.x=i=null==i?0:i,n.y=s,n.z=a,n=this.baseShader.absoluteMatrixB__,null==(a=e.absY)&&(a=0),null==(s=e.matD)&&(s=0),n.x=i=null==(i=e.matB)?0:i,n.y=s,n.z=a,!0)},drawTile:function(e,t){var n,i,s,a,l;if(l=null!=this.inFilter?(r=this.baseShader.filterMatrixA__,a=this.baseShader.filterMatrixB__,n=e.matA*r.x+e.matB*r.y,s=e.matA*a.x+e.matB*a.y,f=n*this.viewA+s*this.viewC,n=n*this.viewB+s*this.viewD,i=(s=e.matC*r.x+e.matD*r.y)*this.viewA+(l=e.matC*a.x+e.matD*a.y)*this.viewC,s=s*this.viewB+l*this.viewD,a=(l=e.absX*r.x+e.absY*r.y+r.z)*this.viewA+(r=e.absX*a.x+e.absY*a.y+a.z)*this.viewC+this.viewX,l*this.viewB+r*this.viewD+this.viewY):(f=e.matA*this.viewA+e.matB*this.viewC,n=e.matA*this.viewB+e.matB*this.viewD,i=e.matC*this.viewA+e.matD*this.viewC,s=e.matC*this.viewB+e.matD*this.viewD,a=e.absX*this.viewA+e.absY*this.viewC+this.viewX,e.absX*this.viewB+e.absY*this.viewD+this.viewY),0==n&&0==i){var r=f<0?-f:f,o=s<0?-s:s,r=1.5*(t.width>t.height?t.width:t.height)*(r<o?o:r),u=a+(t.dx+.5*t.width)*f,h=l+(t.dy+.5*t.height)*s;if(u+r<-1||1<u-r||h+r<-1||1<h-r)return!1}else{var u=1e20,h=1e20,r=-1e20,c=-1e20,_=t.dx*f+t.dy*i,d=t.dx*n+t.dy*s;_<1e20&&(u=_),-1e20<_&&(r=_),d<1e20&&(h=d),-1e20<d&&(c=d);(_=((m=t.width)+t.dx)*f+t.dy*i)<u&&(u=_),r<_&&(r=_),(d=(m+t.dx)*n+t.dy*s)<h&&(h=d),c<d&&(c=d);var p=t.height,m=((_=t.dx*f+(p+t.dy)*i)<u&&(u=_),r<_&&(r=_),(d=t.dx*n+(p+t.dy)*s)<h&&(h=d),c<d&&(c=d),t.width),p=t.height;if((_=(m+t.dx)*f+(p+t.dy)*i)<u&&(u=_),(d=(m+t.dx)*n+(p+t.dy)*s)<h&&(h=d),c<d&&(c=d),a+(r=r<_?_:r)<-1||l+c<-1||1<a+u||1<l+h)return!1}if(!this.beginDraw(e,t.innerTex,!0,!0))return!1;null!=this.inFilter&&this.inFilter.spr==e?(w=this.baseShader.color__,m=e.color.x,p=e.color.y,y=e.color.z,null==(g=e.color.w)&&(g=1)):null!=this.inFilterBlend?(w=this.baseShader.color__,m=this.globalAlpha,p=this.globalAlpha,y=this.globalAlpha,null==(g=this.globalAlpha)&&(g=1)):(w=this.baseShader.color__,m=e.color.x,p=e.color.y,y=e.color.z,null==(g=e.color.w*this.globalAlpha)&&(g=1)),null==y&&(y=0),null==p&&(p=0),w.x=m=null==m?0:m,w.y=p,w.z=y,w.w=g;var g,f,A,x,w=this.baseShader.absoluteMatrixA__,m=t.width*e.matA,p=t.height*e.matC,w=(null==(y=e.absX+t.dx*e.matA+t.dy*e.matC)&&(y=0),null==p&&(p=0),w.x=m=null==m?0:m,w.y=p,w.z=y,this.baseShader.absoluteMatrixB__),m=t.width*e.matB,p=t.height*e.matD,w=(null==(y=e.absY+t.dx*e.matB+t.dy*e.matD)&&(y=0),null==p&&(p=0),w.x=m=null==m?0:m,w.y=p,w.z=y,this.baseShader.uvPos__),m=t.u,p=t.v,y=t.u2-t.u,w=(null==(g=t.v2-t.v)&&(g=1),null==y&&(y=0),null==p&&(p=0),w.x=m=null==m?0:m,w.y=p,w.z=y,w.w=g,this.beforeDraw(),null!=this.fixedBuffer&&null!=this.fixedBuffer.vbuf||(this.fixedBuffer=new zr(4,Lx.get_XY_UV_RGBA()),(f=qx._new(0)).pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=0,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,f.pos==f.array.length&&((A=f.array.length<<1)<128&&(A=128),(x=new Float32Array(A)).set(f.array),f.array=x),f.array[f.pos++]=1,this.fixedBuffer.uploadFloats(f,0,4)),this.engine),o=this.fixedBuffer;return w.renderBuffer(o,w.mem.getQuadIndexes(o.vertices),2,0,-1),!0},beginDraw:function(e,t,n,i){if(null==i&&(i=!1),null!=this.onBeginDraw&&!this.onBeginDraw(e))return!1;for(var s=this.needInitShaders,a=!1,l=e.shaders,r=this.currentShaders.next;null!=l&&null!=r;){var o=l.s,u=r.s,l=l.next,r=r.next,h=u.instance;o!=u&&(a=!0),o.updateConstants(this.globals),o.instance!=h&&(s=!0)}if(s=null==l&&null==r&&this.baseShader.isRelative__==n&&this.baseShader.hasUVPos__==i&&this.baseShader.killAlpha__==this.killAlpha?s:!0){var c=this.baseShader;c.constModified=!0,c.hasUVPos__=i,(c=this.baseShader).constModified=!0,c.isRelative__=n,(c=this.baseShader).constModified=!0,c.killAlpha__=this.killAlpha,this.baseShader.updateConstants(this.globals),this.baseShaderList.next=e.shaders,this.initShaders(this.baseShaderList)}else if(a){if(this.currentShaders!=this.baseShaderList)throw tl.thrown("!");this.currentShaders.next=e.shaders}return this.texture=t,this.stride=8,this.currentObj=e,!0},setCurrent:function(){jt.prototype.setCurrent.call(this),this.needInitShaders=!0},__class__:Ht}),fe["h2d.ScaleModeAlign"]={__ename__:!0,__constructs__:null,Left:{_hx_name:"Left",_hx_index:0,__enum__:"h2d.ScaleModeAlign",toString:o},Right:{_hx_name:"Right",_hx_index:1,__enum__:"h2d.ScaleModeAlign",toString:o},Center:{_hx_name:"Center",_hx_index:2,__enum__:"h2d.ScaleModeAlign",toString:o},Top:{_hx_name:"Top",_hx_index:3,__enum__:"h2d.ScaleModeAlign",toString:o},Bottom:{_hx_name:"Bottom",_hx_index:4,__enum__:"h2d.ScaleModeAlign",toString:o}}),Cr=(vr.__constructs__=[vr.Left,vr.Right,vr.Center,vr.Top,vr.Bottom],vr.__empty_constructs__=[vr.Left,vr.Right,vr.Center,vr.Top,vr.Bottom],fe["h2d.ScaleMode"]={__ename__:!0,__constructs__:null,Resize:{_hx_name:"Resize",_hx_index:0,__enum__:"h2d.ScaleMode",toString:o},Stretch:((R=function(e,t){return{_hx_index:1,width:e,height:t,__enum__:"h2d.ScaleMode",toString:o}})._hx_name="Stretch",R.__params__=["width","height"],R),LetterBox:((R=function(e,t,n,i,s){return{_hx_index:2,width:e,height:t,integerScale:n,horizontalAlign:i,verticalAlign:s,__enum__:"h2d.ScaleMode",toString:o}})._hx_name="LetterBox",R.__params__=["width","height","integerScale","horizontalAlign","verticalAlign"],R),Fixed:((R=function(e,t,n,i,s){return{_hx_index:3,width:e,height:t,zoom:n,horizontalAlign:i,verticalAlign:s,__enum__:"h2d.ScaleMode",toString:o}})._hx_name="Fixed",R.__params__=["width","height","zoom","horizontalAlign","verticalAlign"],R),Zoom:((R=function(e){return{_hx_index:4,level:e,__enum__:"h2d.ScaleMode",toString:o}})._hx_name="Zoom",R.__params__=["level"],R),AutoZoom:((R=function(e,t,n){return{_hx_index:5,minWidth:e,minHeight:t,integerScaling:n,__enum__:"h2d.ScaleMode",toString:o}})._hx_name="AutoZoom",R.__params__=["minWidth","minHeight","integerScaling"],R)}),Sr=(Cr.__constructs__=[Cr.Resize,Cr.Stretch,Cr.LetterBox,Cr.Fixed,Cr.Zoom,Cr.AutoZoom],Cr.__empty_constructs__=[Cr.Resize],function(){}),kr=((i["hxd.InteractiveScene"]=Sr).__name__="hxd.InteractiveScene",Sr.__isInterface__=!0,Sr.prototype={__class__:Sr},function(){this.scaleMode=Cr.Resize,Lt.call(this,null);var e=Vr.CURRENT;this.ctx=new Ht(this),this._cameras=[],new Pt(this),this.set_interactiveCamera(this._cameras[0]),this.width=e.width,this.height=e.height,this.viewportA=2/e.width,this.viewportD=2/e.height,this.viewportX=-1,this.viewportY=-1,this.viewportScaleX=1,this.viewportScaleY=1,this.offsetX=0,this.offsetY=0,this.interactive=[],this.eventListeners=[],this.shapePoint=new St(0,0),this.window=r0.getInstance(),this.posChanged=!0}),Mr=((i["h2d.Scene"]=kr).__name__="h2d.Scene",kr.__interfaces__=[Sr,x],kr.__super__=Lt,kr.prototype=e(Lt.prototype,{setEvents:function(e){this.events=e},get_renderer:function(){return this.ctx},set_interactiveCamera:function(e){if(null==e)throw tl.thrown("Interactive cammera cannot be null!");return e.scene!=this&&this.addCamera(e),this.interactiveCamera=e},addCamera:function(e,t){null!=e.scene&&e.scene.removeCamera(e),e.scene=this,e.posChanged=!0,null!=t?this._cameras.splice(t,0,e):this._cameras.push(e)},removeCamera:function(e){if(e==this.interactiveCamera)throw tl.thrown("Current interactive Camera cannot be removed from camera list!");e.scene=null,Jn.remove(this._cameras,e)},checkResize:function(){var e=Vr.CURRENT;if(null!=e){var t=this.scaleMode;switch(t._hx_index){case 0:var n=e.width,i=e.height;n==this.width&&i==this.height||(this.width=n,this.height=i,this.posChanged=!0),this.viewportScaleX=1,this.viewportScaleY=1,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1;break;case 1:var s=t.width,a=t.height;s==this.width&&a==this.height||(this.width=s,this.height=a,this.posChanged=!0),this.viewportScaleX=e.width/s,this.viewportScaleY=e.height/a,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1;break;case 2:var s=t.width,a=t.height,l=t.horizontalAlign,r=t.verticalAlign,o=(s==this.width&&a==this.height||(this.width=s,this.height=a,this.posChanged=!0),e.width/s),u=(d=e.height/a)<o?d:o,h=(t.integerScale&&0==(u|=0)&&(u=1),l),c=r;switch(this.viewportA=2*u/e.width,this.viewportD=2*u/e.height,this.viewportScaleX=u,this.viewportScaleY=u,(h=null==l?vr.Center:h)._hx_index){case 0:this.viewportX=-1,this.offsetX=0;break;case 1:this.viewportX=1-this.width*this.viewportA,this.offsetX=e.width-this.width*u;break;default:this.viewportX=Math.floor((e.width-this.width*u)/(2*u))*this.viewportA-1,this.offsetX=Math.floor((e.width-this.width*u)/2)}switch((c=null==r?vr.Center:c)._hx_index){case 3:this.viewportY=-1,this.offsetY=0;break;case 4:this.viewportY=1-this.height*this.viewportD,this.offsetY=e.height-this.height*u;break;default:this.viewportY=Math.floor((e.height-this.height*u)/(2*u))*this.viewportD-1,this.offsetY=Math.floor((e.height-this.height*u)/2)}break;case 3:var s=t.width,a=t.height,l=t.zoom,r=t.horizontalAlign,_=t.verticalAlign,h=(s==this.width&&a==this.height||(this.width=s,this.height=a,this.posChanged=!0),r),c=_;switch(this.viewportA=2*l/e.width,this.viewportD=2*l/e.height,this.viewportScaleX=l,this.viewportScaleY=l,(h=null==r?vr.Center:h)._hx_index){case 0:this.viewportX=-1,this.offsetX=0;break;case 1:this.viewportX=1-this.width*this.viewportA,this.offsetX=e.width-this.width*l;break;default:this.viewportX=Math.floor((e.width-this.width*l)/(2*l))*this.viewportA-1,this.offsetX=Math.floor((e.width-this.width*l)/2)}switch((c=null==_?vr.Center:c)._hx_index){case 3:this.viewportY=-1,this.offsetY=0;break;case 4:this.viewportY=1-this.height*this.viewportD,this.offsetY=e.height-this.height*l;break;default:this.viewportY=Math.floor((e.height-this.height*l)/(2*l))*this.viewportD-1,this.offsetY=Math.floor((e.height-this.height*l)/2)}break;case 4:s=t.level,n=Math.ceil(e.width/s),i=Math.ceil(e.height/s);n==this.width&&i==this.height||(this.width=n,this.height=i,this.posChanged=!0),this.viewportScaleX=s,this.viewportScaleY=s,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1;break;case 5:var d,o=e.width/t.minWidth,u=(d=e.height/t.minHeight)<o?d:o,n=(t.integerScaling&&0==(u|=0)&&(u=1),Math.ceil(e.width/u)),i=Math.ceil(e.height/u);n==this.width&&i==this.height||(this.width=n,this.height=i,this.posChanged=!0),this.viewportScaleX=u,this.viewportScaleY=u,this.viewportA=2/this.width,this.viewportD=2/this.height,this.viewportX=-1,this.viewportY=-1}}},dispatchListeners:function(e){this.screenToViewport(e);for(var t=0,n=this.eventListeners;t<n.length&&(n[t++](e),e.propagate););},isInteractiveVisible:function(e){for(var t=e;t!=this;){if(null==t||!t.visible)return!1;t=t.parent}return!0},screenToViewport:function(e){this.interactiveCamera.eventToCamera(e)},dispatchEvent:function(e,t){this.screenToViewport(e);var n=e.relX-t.absX,i=e.relY-t.absY;e.relX=(n*t.matD-i*t.matC)*t.invDet,e.relY=(i*t.matA-n*t.matB)*t.invDet,t.handleEvent(e)},handleEvent:function(e,t){this.screenToViewport(e);var n=e.relX,i=e.relY;if(!(n<0||i<0||n>=this.width||i>=this.height))for(var s=this.shapePoint,a=null==t?0:this.interactive.indexOf(t)+1,l=this.interactive.length;a<l;){var r=this.interactive[a++];if(null==r)break;if(0!=r.invDet){var o=n-r.absX,u=i-r.absY,h=(o*r.matD-u*r.matC)*r.invDet,u=(u*r.matA-o*r.matB)*r.invDet;if(null!=r.shape){var o=s,c=h+r.shapeX,_=u+r.shapeY;if(null==_&&(_=0),null==c&&(c=0),o.x=c,o.y=_,!r.shape.contains(s))continue}else if(u<0||h<0||h>=r.width||u>=r.height)continue;for(var d=!0,p=r;null!=p;){if(!p.visible){d=!1;break}p=p.parent}if(d){if(e.relX=h,e.relY=u,r.handleEvent(e),!e.cancel)return r;e.cancel=!1,e.propagate=!1}}}return null},addEventListener:function(e){this.eventListeners.push(e)},addEventTarget:function(e){for(var t=e,n=0;null!=t;)t=t.parent,++n;for(var i=n,s=0,a=this.interactive.length;s<a;){for(var l=s++,t=e,r=this.interactive[l],o=i,u=r,n=0;null!=u;)u=u.parent,++n;for(var h=n,c=t,_=r;h<o;)c=(t=c).parent,--o;for(;o<h;)_=(r=_).parent,--h;for(;c!=_;)c=(t=c).parent,_=(r=_).parent;for(var d=-1,p=0,m=c.children.length;p<m;){var g=p++;if(c.children[g]==t){d=g;break}}for(var f=d,A=-1,x=0,w=_.children.length;x<w;){var y=x++;if(_.children[y]==r){A=y;break}}if(A<f)return void this.interactive.splice(l,0,e)}this.interactive.push(e)},removeEventTarget:function(e,t){null==t&&(t=!1),Jn.remove(this.interactive,e),t&&null!=this.events&&this.events.onRemove(e)},dispose:function(){this.allocated&&this.onRemove(),this.ctx.dispose()},setElapsedTime:function(e){this.ctx.elapsedTime=e},drawImplTo:function(e,t,n){for(var i=0;i<t.length;)if(0==(1&t[i++].flags))throw tl.thrown("Can only draw to texture created with Target flag");this.ctx.engine=Vr.CURRENT;var s=this.ctx.engine.backgroundColor,a=this.ctx.engine.inRender,l=(this.ctx.engine.backgroundColor=null,this.ctx.globalAlpha=this.alpha,jt.get());a?0==this.ctx.targetFlipY&&this.ctx.begin():(this.ctx.engine.begin(),this.ctx.begin()),this.ctx.pushTargets(t),null!=n&&this.ctx.output.setOutput(n),e.drawRec(this.ctx),null!=n&&this.ctx.output.setOutput(),this.ctx.popTarget(),this.ctx.engine.backgroundColor=s,a||(this.ctx.end(),this.ctx.engine.end()),null!=l&&l.setCurrent()},syncOnly:function(e){var t=Vr.CURRENT;this.setElapsedTime(e),this.ctx.engine=t,this.ctx.frame++,this.ctx.time+=this.ctx.elapsedTime,this.ctx.globalAlpha=this.alpha,this.sync(this.ctx)},render:function(e){this.ctx.engine=e,this.ctx.frame++,this.ctx.time+=this.ctx.elapsedTime,this.ctx.globalAlpha=this.alpha,this.mark("s2d"),this.sync(this.ctx),0!=this.children.length&&(this.ctx.begin(),this.ctx.drawScene(),this.ctx.end()),this.mark("vsync")},mark:function(e){},sync:function(e){for(var t=this.posChanged,n=(this.allocated||this.onAdd(),Lt.prototype.sync.call(this,e),0),i=this._cameras;n<i.length;)i[n++].sync(e,t)},clipBounds:function(e,t,n,i){null==i&&(i=1),null==n&&(n=1),u=null!=e.inFilter?(u=e.baseShader.filterMatrixA__,h=e.baseShader.filterMatrixB__,a=this.matA*u.x+this.matB*u.y,l=this.matA*h.x+this.matB*h.y,r=this.matC*u.x+this.matD*u.y,o=this.matC*h.x+this.matD*h.y,u=this.absX*u.x+this.absY*u.y+u.z,h=this.absX*h.x+this.absY*h.y+h.z,s=(a*e.viewA+l*e.viewC)/n,a=(a*e.viewB+l*e.viewD)/i,l=(r*e.viewA+o*e.viewC)/n,r=(r*e.viewB+o*e.viewD)/i,o=u*e.viewA+h*e.viewC+e.viewX,u*e.viewB+h*e.viewD+e.viewY):(s=(this.matA*e.viewA+this.matB*e.viewC)/n,a=(this.matA*e.viewB+this.matB*e.viewD)/i,l=(this.matC*e.viewA+this.matD*e.viewC)/n,r=(this.matC*e.viewB+this.matD*e.viewD)/i,o=this.absX*e.viewA+this.absY*e.viewC+e.viewX,this.absX*e.viewB+this.absY*e.viewD+e.viewY);var s,a,l,r,o,u,h=1/(s*r-a*l);t.xMin=((-1-o)*r+(u+1)*l)*h,t.yMin=((o+1)*a+(-1-u)*s)*h,t.xMax=((1-o)*r+(u-1)*l)*h,t.yMax=((o-1)*a+(1-u)*s)*h},drawContent:function(e){if(e.front2back){for(var t=0,n=this._cameras;t<n.length;){var i=n[t];if(++t,i.visible){var s=this.children.length,a=this.layerCount;for(i.enter(e);0<a--;){var l=0==a?0:this.layersIndexes[a-1];if(i.layerVisible(a))for(;l<=s;)this.children[s--].drawRec(e);else s=l-1}i.exit(e)}}this.draw(e)}else{this.draw(e);for(t=0,n=this._cameras;t<n.length;){i=n[t];if(++t,i.visible){s=0,a=0;for(i.enter(e);a<this.layerCount;){l=this.layersIndexes[a++];if(i.layerVisible(a-1))for(;s<l;)this.children[s++].drawRec(e);else s=l}i.exit(e)}}}},onAdd:function(){this.checkResize(),Lt.prototype.onAdd.call(this),this.window.addResizeEvent(Cn(this,this.checkResize))},onRemove:function(){Lt.prototype.onRemove.call(this),this.window.removeResizeEvent(Cn(this,this.checkResize))},__class__:kr,__properties__:e(Lt.prototype.__properties__,{get_renderer:"get_renderer",set_interactiveCamera:"set_interactiveCamera"})}),fe["h2d.Align"]={__ename__:!0,__constructs__:null,Left:{_hx_name:"Left",_hx_index:0,__enum__:"h2d.Align",toString:o},Right:{_hx_name:"Right",_hx_index:1,__enum__:"h2d.Align",toString:o},Center:{_hx_name:"Center",_hx_index:2,__enum__:"h2d.Align",toString:o},MultilineRight:{_hx_name:"MultilineRight",_hx_index:3,__enum__:"h2d.Align",toString:o},MultilineCenter:{_hx_name:"MultilineCenter",_hx_index:4,__enum__:"h2d.Align",toString:o}}),Ir=(Mr.__constructs__=[Mr.Left,Mr.Right,Mr.Center,Mr.MultilineRight,Mr.MultilineCenter],Mr.__empty_constructs__=[Mr.Left,Mr.Right,Mr.Center,Mr.MultilineRight,Mr.MultilineCenter],function(e,t,n,i,s,a,l){null==l&&(l=0),null==a&&(a=0),this.innerTex=e,this.x=t,this.y=n,this.width=i,this.height=s,this.dx=a,this.dy=l,null!=e&&this.setTexture(e)}),Br=((i["h2d.Tile"]=Ir).__name__="h2d.Tile",Ir.fromColor=function(e,t,n,i){null==n&&(n=1),null==t&&(t=1);e=new Ir(_o.fromColor(e,i=null==i?1:i),0,0,1,1);return e.width=t,e.height=n,e},Ir.fromTexture=function(e){return new Ir(e,0,0,e.width,e.height)},Ir.prototype={setTexture:function(e){null!=(this.innerTex=e)&&(this.u=this.x/e.width,this.v=this.y/e.height,this.u2=(this.x+this.width)/e.width,this.v2=(this.y+this.height)/e.height)},sub:function(e,t,n,i,s,a){return new Ir(this.innerTex,this.x+e,this.y+t,n,i,s=null==s?0:s,a=null==a?0:a)},scaleToSize:function(e,t){this.width=e,this.height=t},dispose:function(){null!=this.innerTex&&this.innerTex.dispose(),this.innerTex=null},clone:function(){var e=new Ir(null,this.x,this.y,this.width,this.height,this.dx,this.dy);return e.innerTex=this.innerTex,e.u=this.u,e.u2=this.u2,e.v=this.v,e.v2=this.v2,e},__class__:Ir},(i["h2d.TileLayerContent"]=Yt).__name__="h2d.TileLayerContent",Yt.__super__=Wt,Yt.prototype=e(Wt.prototype,{clear:function(){this.tmp=qx._new(0),null!=this.buffer&&(8*this.buffer.vertices<this.useAllocatorLimit?S0.get().disposeBuffer(this.buffer):this.buffer.dispose()),this.buffer=null,this.xMin=1/0,this.yMin=1/0,this.xMax=-1/0,this.yMax=-1/0,this.state.clear()},triCount:function(){return null==this.buffer?this.tmp.pos>>4:this.buffer.vertices>>1},add:function(e,t,n,i,s,a,l){{var r=e+l.dx,o=t+l.dy,u;(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=r;var u,u=((u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=o,this.tmp),h=l.u,u=(u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,this.tmp),h=l.v,u,u,u;u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=n,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=i,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=s;var u,u=((u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=a,this.tmp),h=r+l.width;u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h;var u,u=((u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=o,this.tmp),h=l.u2,u=(u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,this.tmp),h=l.v,u,u;u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=n,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=i}(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=s,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=a;(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=r,u=this.tmp,h=o+l.height,u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,u=this.tmp,h=l.u,u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,u=this.tmp,h=l.v2;u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=n,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=i,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=s;(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=a,u=this.tmp,h=r+l.width,u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,u=this.tmp,h=o+l.height,u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,u=this.tmp,h=l.u2,u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,u=this.tmp,h=l.v2;u.pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=h,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=n,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=i,(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=s;(u=this.tmp).pos==u.array.length&&((c=u.array.length<<1)<128&&(c=128),(_=new Float32Array(c)).set(u.array),u.array=_),u.array[u.pos++]=a;var c,_,r=e+l.dx,o=t+l.dy,h=(r<this.xMin&&(this.xMin=r),o<this.yMin&&(this.yMin=o),o+=l.height,(r+=l.width)>this.xMax&&(this.xMax=r),o>this.yMax&&(this.yMax=o),null!=l&&this.state.setTexture(l.innerTex),this.state);h.tail.count+=4,h.totalCount+=4},alloc:function(e){null==this.tmp&&this.clear(),0<this.tmp.pos&&(this.buffer=(this.tmp.pos<this.useAllocatorLimit?S0.get():zr).ofFloats(this.tmp,Lx.get_XY_UV_RGBA()))},dispose:function(){null!=this.buffer&&(8*this.buffer.vertices<this.useAllocatorLimit?S0.get().disposeBuffer(this.buffer):this.buffer.dispose(),this.buffer=null),Wt.prototype.dispose.call(this)},__class__:Yt}),function(e,t){Mt.call(this,t),this.tile=e,this.rangeMin=this.rangeMax=-1,this.curColor=new q(1,1,1,1),this.content=new Yt}),Tr=((i["h2d.TileGroup"]=Br).__name__="h2d.TileGroup",Br.__super__=Mt,Br.prototype=e(Mt.prototype,{getBoundsRec:function(e,t,n){Mt.prototype.getBoundsRec.call(this,e,t,n),this.addBounds(e,t,this.content.xMin,this.content.yMin,this.content.xMax-this.content.xMin,this.content.yMax-this.content.yMin)},clear:function(){this.content.clear()},onRemove:function(){this.content.dispose(),Mt.prototype.onRemove.call(this)},draw:function(e){this.drawWith(e,this)},sync:function(e){Mt.prototype.sync.call(this,e),!this.visible||null!=(e=this.content).buffer&&null!=e.buffer.vbuf||e.alloc(Vr.CURRENT)},drawWith:function(e,t){var n,i=this.content.triCount();0!=i&&e.beginDrawBatchState(t)&&(t=this.rangeMin<0?0:2*this.rangeMin,0<this.rangeMax&&this.rangeMax<2*i&&(i=2*this.rangeMax),null!=(n=this.content).buffer&&null!=n.buffer.vbuf||n.alloc(Vr.CURRENT),n.state.drawQuads(e,n.buffer,t,i-t))},__class__:Br}),(i["h2d.col.Collider"]=Zt).__name__="h2d.col.Collider",Zt.prototype={__class__:Zt},function(){this.xMin=1e20,this.yMin=1e20,this.xMax=-1e20,this.yMax=-1e20}),Er=((i["h2d.col.Bounds"]=Tr).__name__="h2d.col.Bounds",Tr.__super__=Zt,Tr.prototype=e(Zt.prototype,{contains:function(e){return e.x>=this.xMin&&e.x<this.xMax&&e.y>=this.yMin&&e.y<this.yMax},rayIntersection:function(e){var t=(this.xMin-e.px)/e.lx,n=(this.yMin-e.py)/e.ly,i=(this.xMax-e.px)/e.lx,e=(this.yMax-e.py)/e.ly,s=i<t?i:t,a=e<n?e:n,i=t<i?i:t,t=n<e?e:n,e=s<a?a:s;return(t<i?t:i)<e?-1:e},__class__:Tr}),(i["h2d.col.IPoint"]=Xt).__name__="h2d.col.IPoint",Xt.prototype={__class__:Xt},{}),Fr=(Er.fastTriangulate=function(e){return(new c0).triangulate_anon_y_Float_x_Float(e)},Er.isConvex=function(e){if(!(e.length<4))for(var t=e[e.length-2],n=e[e.length-1],i=e[0],s=0<(n.x-t.x)*(i.y-t.y)-(n.y-t.y)*(i.x-t.x),a=1,l=e.length;a<l;)if(t=n,n=i,i=e[a++],0<(n.x-t.x)*(i.y-t.y)-(n.y-t.y)*(i.x-t.x)!=s)return!1;return!0},(i["h2d.col.Ray"]=qt).__name__="h2d.col.Ray",qt.prototype={normalize:function(){var e=this.lx*this.lx+this.ly*this.ly;1!=e&&(e=e<1e-20?0:1/Math.sqrt(e),this.lx*=e,this.ly*=e)},__class__:qt},(i["h2d.filter.Filter"]=Kt).__name__="h2d.filter.Filter",Kt.prototype={get_enable:function(){return this.enable},sync:function(e,t){},bind:function(e){},unbind:function(e){},getBounds:function(e,t,n){e.getBounds(e,t),t.xMin=t.xMin*n.x-this.boundsExtend,t.xMax=t.xMax*n.x+this.boundsExtend,t.yMin=t.yMin*n.y-this.boundsExtend,t.yMax=t.yMax*n.y+this.boundsExtend},draw:function(e,t){return t},__class__:Kt,__properties__:{get_enable:"get_enable"}},(i["h2d.filter._Mask.MaskShader"]=Jt).__name__="h2d.filter._Mask.MaskShader",Jt._SHADER=null,Jt.__super__=W,Jt.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_mask:function(){return this.mask__},set_mask:function(e){return this.mask__=e},get_maskMatA:function(){return this.maskMatA__},set_maskMatA:function(e){return this.maskMatA__=e},get_maskMatB:function(){return this.maskMatB__},set_maskMatB:function(e){return this.maskMatB__=e},get_smoothAlpha:function(){return this.smoothAlpha__},set_smoothAlpha:function(e){return this.constModified=!0,this.smoothAlpha__=e},updateConstants:function(e){this.constBits=0,this.smoothAlpha__&&(this.constBits|=1),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.mask__;case 3:return this.maskMatA__;case 4:return this.maskMatB__;case 5:return this.smoothAlpha__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:Jt,__properties__:e(W.prototype.__properties__,{set_smoothAlpha:"set_smoothAlpha",get_smoothAlpha:"get_smoothAlpha",set_maskMatB:"set_maskMatB",get_maskMatB:"get_maskMatB",set_maskMatA:"set_maskMatA",get_maskMatA:"get_maskMatA",set_mask:"set_mask",get_mask:"get_mask",set_texture:"set_texture",get_texture:"get_texture"})}),function(e,t){null==t&&(t="texture"),Kt.call(this);for(var n=!1,i=0,s=e.shader.data.vars;i<s.length;){var a=s[i];if(++i,a.name==t){if(a.kind!=$0.Param)throw tl.thrown(el.string(e)+"."+t+" should a shader parameter (@param)");n=!0;break}}if(!n)throw tl.thrown("Shader does not have '"+t+"' variable");this.textureParam=t,this.pass=new mo(e)}),Dr=((i["h2d.filter.Shader"]=Fr).__name__="h2d.filter.Shader",Fr.__super__=Kt,Fr.prototype=e(Kt.prototype,{get_shader:function(){return this.pass.shader},draw:function(e,t){var n=e.textures.allocTileTarget("shaderTmp",t);return e.engine.pushTarget(n),this.get_shader()[this.textureParam+"__"]=t.innerTex,this.nearest&&t.innerTex.set_filter(so.Nearest),this.pass.render(),e.engine.popTarget(),Ir.fromTexture(n)},__class__:Fr,__properties__:e(Kt.prototype.__properties__,{get_shader:"get_shader"})}),function(){this.head=this.tail=new Rr(null),this.totalCount=0}),Rr=((i["h2d.impl.BatchDrawState"]=Dr).__name__="h2d.impl.BatchDrawState",Dr.prototype={setTexture:function(e){var t;null!=e&&(null==this.tail.texture?this.tail.texture=e:this.tail.texture!=e&&(0==(t=this.tail).count?t.set(e):null==t.next?t.next=this.tail=new Rr(e):this.tail=t.next.set(e)))},clear:function(){for(var e=this.head;(e.texture=null)!=(e=e.next););this.tail=this.head,this.tail.count=0,this.totalCount=0},drawQuads:function(e,t,n,i){null==i&&(i=-1);var s,a=this.head,l=this.tail.next,r=e.engine;if(0==(n=null==n?0:n)&&-1==i)do{}while(e.texture=a.texture,e.beforeDraw(),null==(h=s=a.count>>1)&&(h=-1),null==(u=n)&&(u=0),r.renderBuffer(t,r.mem.getQuadIndexes(t.vertices),2,u,h),n+=s,(a=a.next)!=l);else{-1==i&&(i=(this.totalCount>>1)-n);var o=0;do{if(n<=o+(s=a.count>>1)){var u,h,c=s<i?s:i;if(e.texture=a.texture,e.beforeDraw(),null==(h=c)&&(h=-1),null==(u=o<=n?n:o)&&(u=0),r.renderBuffer(t,r.mem.getQuadIndexes(t.vertices),2,u,h),0==(i-=c))break}}while(o+=s,(a=a.next)!=l)}},drawIndexed:function(e,t,n,i,s){null==s&&(s=-1);var a,l=this.head,r=this.tail.next,o=e.engine;if(0==(i=null==i?0:i)&&-1==s)for(;e.texture=l.texture,e.beforeDraw(),a=l.count/3|0,o.renderIndexed(t,n,i,a),i+=a,(l=l.next)!=r;);else{-1==s&&(s=this.totalCount/3|0);var u=0;do{if(i<=u+(a=l.count/3|0)){var h=a<s?a:s;if(e.texture=l.texture,e.beforeDraw(),o.renderIndexed(t,n,u<=i?i:u,h),0==(s-=h))break}}while(u+=a,(l=l.next)!=r)}},__class__:Dr},function(e){this.texture=e,this.count=0}),Pr=((i["h2d.impl._BatchDrawState.StateEntry"]=Rr).__name__="h2d.impl._BatchDrawState.StateEntry",Rr.prototype={set:function(e){return this.texture=e,this.count=0,this},__class__:Rr},fe["h3d.BufferFlag"]={__ename__:!0,__constructs__:null,Dynamic:{_hx_name:"Dynamic",_hx_index:0,__enum__:"h3d.BufferFlag",toString:o},NoAlloc:{_hx_name:"NoAlloc",_hx_index:1,__enum__:"h3d.BufferFlag",toString:o},UniformBuffer:{_hx_name:"UniformBuffer",_hx_index:2,__enum__:"h3d.BufferFlag",toString:o},ReadWriteBuffer:{_hx_name:"ReadWriteBuffer",_hx_index:3,__enum__:"h3d.BufferFlag",toString:o},IndexBuffer:{_hx_name:"IndexBuffer",_hx_index:4,__enum__:"h3d.BufferFlag",toString:o}}),zr=(Pr.__constructs__=[Pr.Dynamic,Pr.NoAlloc,Pr.UniformBuffer,Pr.ReadWriteBuffer,Pr.IndexBuffer],Pr.__empty_constructs__=[Pr.Dynamic,Pr.NoAlloc,Pr.UniformBuffer,Pr.ReadWriteBuffer,Pr.IndexBuffer],function(e,t,n){if(this.id=zr.GUID++,this.vertices=e,this.format=t,this.flags=0,this.allocPos=C0.make(),null!=n)for(var i=0;i<n.length;)this.flags|=1<<n[i++]._hx_index;this.engine=Vr.CURRENT,0==(2&this.flags)&&this.engine.mem.allocBuffer(this)}),Qr=((i["h3d.Buffer"]=zr).__name__="h3d.Buffer",zr.ofFloats=function(e,t,n){var i=Math.ceil(e.pos/t.stride),t=new zr(i,t,n);return t.uploadFloats(e,0,i),t},zr.ofSubFloats=function(e,t,n,i){n=new zr(t,n,i);return n.uploadFloats(e,0,t),n},zr.prototype={dispose:function(){null!=this.vbuf&&(this.engine.mem.freeBuffer(this),this.vbuf=null)},uploadFloats:function(e,t,n,i){if((i=null==i?0:i)<0||n<0||i+n>this.vertices)throw tl.thrown("Invalid vertices count");if(0!=n)if(this.format.hasLowPrecision){for(var s=new IA(new ArrayBuffer(n*this.format.strideBytes)),a=0,l=t,r=this.format.inputs,o=0,u=0;u<n;)for(++u,o=0;o<r.length;){var h=r[o++],c=h.type,_=c==nl.__cast(9,A1)?1:c,d=0;switch(h.precision){case 0:for(var p=0,m=_;p<m;)++p,s.setFloat(a+d,e.array[l++]),d+=4;break;case 1:for(var g=0,f=_;g<f;)++g,s.setUInt16(a+d,Lx.float32to16(e.array[l++])),d+=2;break;case 2:for(var A=0,x=_;A<x;)++A,s.b[a+d]=Lx.float32toU8(e.array[l++]),++d;break;case 3:for(var w=0,y=_;w<y;)++w,s.b[a+d]=Lx.float32toS8(e.array[l++]),++d}c=h.type;0!=(3&(a+=(c==nl.__cast(9,A1)?1:c)*Wx.SIZES[h.precision]))&&(a+=4-(3&a))}this.uploadBytes(s,0,n)}else this.engine.driver.uploadBufferData(this,i,n,e,t)},uploadBytes:function(e,t,n){if(n<0||n>this.vertices)throw tl.thrown("Invalid vertices count");0!=n&&this.engine.driver.uploadBufferBytes(this,0,n,e,t)},__class__:zr},(i["h3d.Camera"]=$t).__name__="h3d.Camera",$t.prototype={setFovX:function(e,t){var n=Math.PI/180;this.fovY=2*Math.atan(Math.tan(.5*e*n)/t)/n},clone:function(){var e=new $t(this.fovY,this.zoom,this.screenRatio,this.zNear,this.zFar,this.rightHanded),t=this.pos,n=t.x,i=t.y,s=t.z;e.pos=new Gr(n=null==n?0:n,i=null==i?0:i,s=null==s?0:s);n=(t=this.up).x,i=t.y,s=t.z;e.up=new Gr(n=null==n?0:n,i=null==i?0:i,s=null==s?0:s);n=(t=this.target).x,i=t.y,s=t.z;return e.target=new Gr(n=null==n?0:n,i=null==i?0:i,s=null==s?0:s),e.update(),e},getInverseViewProj:function(){return null==this.minv&&(this.minv=new Wr),this.needInv&&(this.minv.initInverse(this.m),this.needInv=!1),this.minv},getInverseView:function(){return null==this.mcamInv&&(this.mcamInv=new Wr,this.mcamInv._44=0),0==this.mcamInv._44&&this.mcamInv.initInverse(this.mcam),this.mcamInv},calcDirections:function(){var e=this.target,t=this.pos,n=e.x-t.x,i=e.y-t.y,e=e.z-t.z,t=n=null==n?0:n,s=i=null==i?0:i,a=e=null==e?0:e,l=(t=null==t?0:t,t*t+(o=s=null==s?0:s)*o+(u=a=null==a?0:a)*u),r=t=null==(t=n=null==(n=t*(l=l<1e-20?0:1/Math.sqrt(l)))?0:n)?0:t,o=s=null==(s=i=null==(i=o*l)?0:i)?0:s,u=a=null==(a=e=null==(e=u*l)?0:e)?0:a,h=this.up,c=(t=null==(t=n=null==(n=h.y*u-h.z*o)?0:n)?0:t,s=null==(s=i=null==(i=h.z*r-h.x*u)?0:i)?0:s),h=a=null==(a=e=null==(e=h.x*o-h.y*r)?0:e)?0:a,_=t=null==(t=n=null==(n=t*(l=(l=t*t+c*c+h*h)<1e-20?0:1/Math.sqrt(l)))?0:n)?0:t,c=s=null==(s=i=null==(i=c*l)?0:i)?0:s,h=a=null==(a=e=null==(e=h*l)?0:e)?0:a;null==(a=e=null==(e=r*c-o*_)?0:e)&&(a=0),null==(s=i=null==(i=u*_-r*h)?0:i)&&(s=0),null==(t=n=null==(n=o*h-u*c)?0:n)&&(t=0),this.directions._11=r,this.directions._12=o,this.directions._13=u,this.directions._21=_,this.directions._22=c,this.directions._23=h,this.directions._31=t,this.directions._32=s,this.directions._33=a,this.directions._44=1},unproject:function(e,t,n){var e=new Gr(null==e?0:e,null==t?0:t,null==n?0:n),t=e,n=this.getInverseViewProj(),i=t.x*n._12+t.y*n._22+t.z*n._32+n._42,s=t.x*n._13+t.y*n._23+t.z*n._33+n._43,a=1/(t.x*n._14+t.y*n._24+t.z*n._34+n._44);return t.x=(t.x*n._11+t.y*n._21+t.z*n._31+n._41)*a,t.y=i*a,t.z=s*a,e},update:function(){if(null!=this.follow){var e=this.follow.pos.localToGlobal(),t=this.follow.target.localToGlobal(),n=this.pos,i=e.x,s=e.y,e=e.z,n=(null==e&&(e=0),null==s&&(s=0),n.x=i=null==i?0:i,n.y=s,n.z=e,this.target),i=t.x,s=t.y;if(null==(e=t.z)&&(e=0),null==s&&(s=0),n.x=i=null==i?0:i,n.y=s,n.z=e,null!=this.follow.pos.name)for(var a=this.follow.pos;null!=a;){if(null!=a.currentAnimation){var l=a.currentAnimation.getPropValue(this.follow.pos.name,"FOVY");if(null!=l){this.fovY=l;break}}a=a.parent}}this.makeCameraMatrix(this.mcam),this.makeFrustumMatrix(this.mproj),this.m.multiply(this.mcam,this.mproj),this.needInv=!0,null!=this.mcamInv&&(this.mcamInv._44=0),null!=this.mprojInv&&(this.mprojInv._44=0),null!=this.directions&&(this.directions._44=0),this.frustum.loadMatrix(this.m)},makeCameraMatrix:function(e){var t=this.target,n=this.pos,i=t.x-n.x,s=t.y-n.y,t=t.z-n.z,a=i=null==i?0:i,l=s=null==s?0:s,r=t=null==t?0:t,o=a=null==a?0:a,u=l=null==l?0:l,h=r=null==r?0:r,c=(this.rightHanded&&(o*=-1,u*=-1,h*=-1),o*o+u*u+h*h),_=(c=c<1e-20?0:1/Math.sqrt(c),this.up),d=a=null==(a=i=null==(i=_.y*(h*=c)-_.z*(u*=c))?0:i)?0:a,p=l=null==(l=s=null==(s=_.z*(o*=c)-_.x*h)?0:s)?0:l,_=r=null==(r=t=null==(t=_.x*u-_.y*o)?0:t)?0:r;d*=c=(c=d*d+p*p+_*_)<1e-20?0:1/Math.sqrt(c),p*=c,_*=c,0==Math.sqrt(d*d+p*p+_*_)&&(d=u,p=h,_=o);c=a=null==(a=i=null==(i=u*_-h*p)?0:i)?0:a,i=l=null==(l=s=null==(s=h*d-o*_)?0:s)?0:l,a=r=null==(r=t=null==(t=o*p-u*d)?0:t)?0:r,e._11=d,e._12=c,e._13=o,e._14=0,e._21=p,e._22=i,e._23=u,e._24=0,e._31=_,e._32=a,e._33=h,e._34=0,n=this.pos,e._41=-(d*n.x+p*n.y+_*n.z),n=this.pos,e._42=-(c*n.x+i*n.y+a*n.z),n=this.pos;e._43=-(o*n.x+u*n.y+h*n.z),e._44=1},makeFrustumMatrix:function(e){e.zero();var t,n,i,s=this.orthoBounds;null!=s?(n=1/(s.xMax-s.xMin),i=1/(s.yMax-s.yMin),t=1/(s.zMax-s.zMin),e._11=2*n,e._22=2*i,e._33=t,e._41=-(s.xMin+s.xMax)*n,e._42=-(s.yMin+s.yMax)*i,e._43=-s.zMin*t,e._44=1):(n=Math.PI/180,i=this.zoom/Math.tan(Math.atan(Math.tan(.5*this.fovY*n)*this.screenRatio)),e._11=i,e._22=i*this.screenRatio,e._33=this.reverseDepth?-this.zNear/(this.zFar-this.zNear):this.zFar/(this.zFar-this.zNear),e._34=1,e._43=this.reverseDepth?this.zNear*this.zFar/(this.zFar-this.zNear):-(this.zNear*this.zFar)/(this.zFar-this.zNear),e._31=this.jitterOffsetX,e._32=this.jitterOffsetY),e._11+=this.viewX*e._14,e._21+=this.viewX*e._24,e._31+=this.viewX*e._34,e._41+=this.viewX*e._44,e._12+=this.viewY*e._14,e._22+=this.viewY*e._24,e._32+=this.viewY*e._34,e._42+=this.viewY*e._44,this.rightHanded&&(e._33*=-1,e._34*=-1)},project:function(e,t,n,i,s,a,l){null==a&&(a=!0);var r=e,o=t,n=null==n?0:n,t=(null==t&&(o=0),(t=l=null==l?new Gr(0,0,0):l).x=r=null==e?0:r,t.y=o,t.z=n,l),e=this.m,r=t.x*e._12+t.y*e._22+t.z*e._32+e._42,o=t.x*e._13+t.y*e._23+t.z*e._33+e._43,n=1/(t.x*e._14+t.y*e._24+t.z*e._34+e._44);return t.x=(t.x*e._11+t.y*e._21+t.z*e._31+e._41)*n,t.y=r*n,t.z=o*n,l.x=.5*(l.x+1)*i,l.y=.5*(1-l.y)*s,a&&(l.x=Math.round(l.x),l.y=Math.round(l.y)),l},distanceToDepth:function(e){var t=this.zNear,n=this.zFar;return null==n&&(n=1),((this.zFar+this.zNear-2*this.zNear*this.zFar/(e<(t=null==t?0:t)?t:n<e?n:e))/(this.zFar-this.zNear)+1)/2},load:function(e){var t=this.pos,n=e.pos;t.x=n.x,t.y=n.y,t.z=n.z,(t=this.target).x=(n=e.target).x,t.y=n.y,t.z=n.z,(t=this.up).x=(n=e.up).x,t.y=n.y,t.z=n.z,null!=e.orthoBounds?(this.orthoBounds=new Ur,this.orthoBounds.load(e.orthoBounds)):this.orthoBounds=null,this.fovY=e.fovY,this.screenRatio=e.screenRatio,this.zoom=e.zoom,this.zNear=e.zNear,this.zFar=e.zFar,this.follow=null!=e.follow?{pos:e.follow.pos,target:e.follow.target}:null,this.viewX=e.viewX,this.viewY=e.viewY,this.rightHanded=e.rightHanded,this.reverseDepth=e.reverseDepth,this.update()},__class__:$t},(i["h3d._Engine.TargetTmp"]=en).__name__="h3d._Engine.TargetTmp",en.prototype={__class__:en},fe["h3d.DepthBinding"]={__ename__:!0,__constructs__:null,ReadWrite:{_hx_name:"ReadWrite",_hx_index:0,__enum__:"h3d.DepthBinding",toString:o},ReadOnly:{_hx_name:"ReadOnly",_hx_index:1,__enum__:"h3d.DepthBinding",toString:o},DepthOnly:{_hx_name:"DepthOnly",_hx_index:2,__enum__:"h3d.DepthBinding",toString:o},NotBound:{_hx_name:"NotBound",_hx_index:3,__enum__:"h3d.DepthBinding",toString:o}}),Vr=(Qr.__constructs__=[Qr.ReadWrite,Qr.ReadOnly,Qr.DepthOnly,Qr.NotBound],Qr.__empty_constructs__=[Qr.ReadWrite,Qr.ReadOnly,Qr.DepthOnly,Qr.NotBound],function(){this.resCache=new VA,this.ready=!1,this.inRender=!1,this.textureColorCache=new Je,this.tmpVector=new q(0,0,0,1),this.backgroundColor=-16777216,this.hardware=!Vr.SOFTWARE_DRIVER,this.antiAlias=Vr.ANTIALIASING,this.autoResize=!0,this.set_fullScreen(!u0.getValue(a0.IsWindowed)),this.window=r0.getInstance(),this.realFps=u0.getDefaultFrameRate(),this.lastTime=Jn.now()/1e3,this.window.addResizeEvent(Cn(this,this.onWindowResize)),(Vr.CURRENT=this).window.setCurrent(),this.driver=o0.get_supported()?new Xr(this.antiAlias):new Kr}),Or=((i["h3d.Engine"]=Vr).__name__="h3d.Engine",Vr.prototype={init:function(){this.driver.init(Cn(this,this.onCreate),!this.hardware)},selectShader:function(e){this.needFlushTarget&&this.doFlushTarget(),this.driver.selectShader(e)&&this.shaderSwitches++},selectMaterial:function(e){this.driver.selectMaterial(e)},uploadInstanceShaderBuffers:function(e){this.driver.flushShaderBuffers(),this.driver.uploadShaderBuffers(e,1),this.driver.uploadShaderBuffers(e,2),this.driver.uploadShaderBuffers(e,3)},uploadShaderBuffers:function(e,t){this.driver.uploadShaderBuffers(e,t)},selectBuffer:function(e){return null!=e.vbuf&&(this.needFlushTarget&&this.doFlushTarget(),this.driver.selectBuffer(e),!0)},renderBuffer:function(e,t,n,i,s){if(null==s&&(s=-1),null==i&&(i=0),null!=t.vbuf){n=e.vertices/n|0;if(s<0&&(s=n-i),i<0||s<0||n<i+s)throw tl.thrown("Invalid vertices count");0<s&&this.selectBuffer(e)&&(this.driver.draw(t,3*i,s),this.drawTriangles+=s,this.drawCalls++)}},renderIndexed:function(e,t,n,i){null==i&&(i=-1),null==n&&(n=0),null!=t.vbuf&&0<(i=i<0?(t.vertices/3|0)-n:i)&&this.selectBuffer(e)&&(this.driver.draw(t,3*n,i),this.drawTriangles+=i,this.drawCalls++)},renderMultiBuffers:function(e,t,n,i,s){null==s&&(s=-1),null==i&&(i=0);var a=n.vertices/3|0;a<=0||(this.needFlushTarget&&this.doFlushTarget(),this.driver.selectMultiBuffers(e,t),null!=n.vbuf&&0<(s=s<0?a-i:s)&&(this.driver.draw(n,3*i,s),this.drawTriangles+=s,this.drawCalls++))},renderInstanced:function(e,t){null!=e.vbuf&&0<t.commandCount&&(this.driver.drawInstanced(e,t),this.drawTriangles+=t.triCount,this.drawCalls++)},set_debug:function(e){return this.debug=e,this.driver.setDebug(this.debug),e},onCreate:function(e){(Vr.CURRENT=this).window.setCurrent(),this.autoResize&&(this.width=this.window.get_width(),this.height=this.window.get_height()),e?(S0.get().onContextLost(),this.mem.onContextLost()):(this.mem=new qr(this.driver),this.mem.init(),this.nullTexture=new _o(0,0,[ro.NoAlloc])),this.hardware=this.driver.hasFeature(Yr.HardwareAccelerated),this.set_debug(this.debug),this.set_fullScreen(this.fullScreen),this.resize(this.width,this.height),e?this.onContextLost():this.onReady(),this.ready=!0},onContextLost:function(){},onReady:function(){},onWindowResize:function(){var e,t;this.autoResize&&!this.driver.isDisposed()&&(e=this.window.get_width(),t=this.window.get_height(),e==this.width&&t==this.height||this.resize(e,t),this.onResized())},set_fullScreen:function(e){return this.fullScreen=e,null!=this.mem&&u0.getValue(a0.IsWindowed)&&this.window.set_displayMode(e?h0.Borderless:h0.Windowed),e},onResized:function(){},resize:function(e,t){t<32&&(t=32),this.width=e=e<32?32:e,this.height=t,this.driver.isDisposed()||this.driver.resize(e,t)},begin:function(){return!this.driver.isDisposed()&&(this.inRender=!0,this.drawTriangles=0,this.shaderSwitches=0,this.drawCalls=0,this.dispatches=0,this.targetStack=null,this.needFlushTarget=null!=this.currentTargetTex,this.driver.begin(l0.frameCount),null!=this.backgroundColor&&this.clear(this.backgroundColor,1,0),!0)},end:function(){this.inRender=!1,this.driver.end()},getCurrentTarget:function(){return null==this.targetStack?null:this.targetStack.t==this.nullTexture?this.targetStack.textures[0]:this.targetStack.t},pushTarget:function(e,t,n,i){null==i&&(i=Qr.ReadWrite),null==n&&(n=0),null==t&&(t=0);var s=this.targetTmp;null==s?s=new en(e,this.targetStack,t,n,i):(this.targetTmp=s.next,s.t=e,s.next=this.targetStack,s.mipLevel=n,s.layer=t,s.depthBinding=i),this.targetStack=s,this.updateNeedFlush()},updateNeedFlush:function(){var e=this.targetStack;this.needFlushTarget=null==e?null!=this.currentTargetTex:this.currentTargetTex!=e.t||this.currentTargetLayer!=e.layer||this.currentTargetMip!=e.mipLevel||null!=e.textures||this.currentDepthBinding!=e.depthBinding},pushTargets:function(e,t){null==t&&(t=Qr.ReadWrite),this.pushTarget(this.nullTexture,null,null,t),this.targetStack.textures=e,this.needFlushTarget=!0},pushDepth:function(e){this.pushTarget(e,null,null,Qr.DepthOnly)},popTarget:function(){var e=this.targetStack;if(null==e)throw tl.thrown("popTarget() with no matching pushTarget()");this.targetStack=e.next,this.updateNeedFlush(),e.t=null,e.textures=null,e.next=this.targetTmp,this.targetTmp=e},doFlushTarget:function(){var e=this.targetStack;null==e?(this.driver.setRenderTarget(null),this.currentTargetTex=null):(e.depthBinding==Qr.DepthOnly?this.driver.setDepth(e.t):null!=e.textures?this.driver.setRenderTargets(e.textures,e.depthBinding):this.driver.setRenderTarget(e.t,e.layer,e.mipLevel,e.depthBinding),this.currentTargetTex=e.t,this.currentTargetLayer=e.layer,this.currentTargetMip=e.mipLevel,this.currentDepthBinding=e.depthBinding),this.needFlushTarget=!1},clear:function(e,t,n){var i;null!=e&&((i=this.tmpVector).x=(e>>16&255)/255,i.y=(e>>8&255)/255,i.z=(255&e)/255,i.w=(e>>>24)/255),this.needFlushTarget&&this.doFlushTarget(),this.driver.clear(null==e?null:this.tmpVector,t,n)},setRenderZone:function(e,t,n,i){null==i&&(i=-1),null==n&&(n=-1),null==t&&(t=0),null==e&&(e=0),this.needFlushTarget&&this.doFlushTarget(),this.driver.setRenderZone(e,t,n,i)},render:function(e){if(!this.begin())return!1;e.render(this),this.end();var t,e=Jn.now()/1e3-this.lastTime;return this.lastTime+=e,0<e&&((t=1/e)>2*this.realFps?t=2*this.realFps:t<.5*this.realFps&&(t=.5*this.realFps),this.realFps=this.realFps*(1-(e=.3<(e=e/.5)?.3:e))+t*e),!0},__class__:Vr,__properties__:{set_fullScreen:"set_fullScreen",set_debug:"set_debug"}},{}),Wr=(Or._new=function(e,t){return new zr(e,(t=null==t?!1:t)?Lx.get_INDEX32():Lx.get_INDEX16(),[Pr.IndexBuffer])},Or.uploadIndexes=function(e,t,n,i,s){if((s=null==s?0:s)<0||i<0||s+i>e.vertices)throw tl.thrown("Invalid indices count");if(1!=e.format.inputs[0].precision)throw tl.thrown("Can't upload indexes on a 32-bit buffer");0!=i&&Vr.CURRENT.driver.uploadIndexData(e,s,i,t,n)},Or.alloc=function(e,t,n){null==t&&(t=0),(n=null==n?-1:n)<0&&(n=e.length);t=Or._new(n);return Or.uploadIndexes(t,e,0,n),t},function(){}),Nr=((i["h3d.MatrixImpl"]=Wr).__name__="h3d.MatrixImpl",Wr.prototype={zero:function(){this._11=0,this._12=0,this._13=0,this._14=0,this._21=0,this._22=0,this._23=0,this._24=0,this._31=0,this._32=0,this._33=0,this._34=0,this._41=0,this._42=0,this._43=0,this._44=0},identity:function(){this._11=1,this._12=0,this._13=0,this._14=0,this._21=0,this._22=1,this._23=0,this._24=0,this._31=0,this._32=0,this._33=1,this._34=0,this._41=0,this._42=0,this._43=0,this._44=1},initScale:function(e,t,n){null==n&&(n=1),null==t&&(t=1),this._11=e=null==e?1:e,this._12=0,this._13=0,this._14=0,this._21=0,this._22=t,this._23=0,this._24=0,this._31=0,this._32=0,this._33=n,this._34=0,this._41=0,this._42=0,this._43=0,this._44=1},initRotation:function(e,t,n){var i=Math.cos(e),e=Math.sin(e),s=Math.cos(t),t=Math.sin(t),a=Math.cos(n),n=Math.sin(n),l=i*t,r=e*t;this._11=s*a,this._12=s*n,this._13=-t,this._14=0,this._21=r*a-i*n,this._22=r*n+i*a,this._23=e*s,this._24=0,this._31=l*a+e*n,this._32=l*n-e*a,this._33=i*s,this._34=0,this._41=0,this._42=0,this._43=0,this._44=1},translate:function(e,t,n){null==n&&(n=0),null==t&&(t=0),this._11+=(e=null==e?0:e)*this._14,this._12+=t*this._14,this._13+=n*this._14,this._21+=e*this._24,this._22+=t*this._24,this._23+=n*this._24,this._31+=e*this._34,this._32+=t*this._34,this._33+=n*this._34,this._41+=e*this._44,this._42+=t*this._44,this._43+=n*this._44},scale:function(e,t,n){null==n&&(n=1),null==t&&(t=1),this._11*=e=null==e?1:e,this._21*=e,this._31*=e,this._41*=e,this._12*=t,this._22*=t,this._32*=t,this._42*=t,this._13*=n,this._23*=n,this._33*=n,this._43*=n},prependScale:function(e,t,n){var i=Wr.tmp;i.initScale(e=null==e?1:e,t=null==t?1:t,n=null==n?1:n),this.multiply(i,this)},multiply3x4:function(e,t){var n=e._11,i=e._12,s=e._13,a=e._21,l=e._22,r=e._23,o=e._31,u=e._32,h=e._33,c=e._41,_=e._42,e=e._43,d=t._11,p=t._12,m=t._13,g=t._21,f=t._22,A=t._23,x=t._31,w=t._32,y=t._33;this._11=n*d+i*g+s*x,this._12=n*p+i*f+s*w,this._13=n*m+i*A+s*y,this._14=0,this._21=a*d+l*g+r*x,this._22=a*p+l*f+r*w,this._23=a*m+l*A+r*y,this._24=0,this._31=o*d+u*g+h*x,this._32=o*p+u*f+h*w,this._33=o*m+u*A+h*y,this._34=0,this._41=c*d+_*g+e*x+t._41,this._42=c*p+_*f+e*w+t._42,this._43=c*m+_*A+e*y+t._43,this._44=1},multiply:function(e,t){var n=e._11,i=e._12,s=e._13,a=e._14,l=e._21,r=e._22,o=e._23,u=e._24,h=e._31,c=e._32,_=e._33,d=e._34,p=e._41,m=e._42,g=e._43,e=e._44,f=t._11,A=t._12,x=t._13,w=t._14,y=t._21,b=t._22,v=t._23,C=t._24,S=t._31,k=t._32,M=t._33,I=t._34,B=t._41,T=t._42,E=t._43,t=t._44;this._11=n*f+i*y+s*S+a*B,this._12=n*A+i*b+s*k+a*T,this._13=n*x+i*v+s*M+a*E,this._14=n*w+i*C+s*I+a*t,this._21=l*f+r*y+o*S+u*B,this._22=l*A+r*b+o*k+u*T,this._23=l*x+r*v+o*M+u*E,this._24=l*w+r*C+o*I+u*t,this._31=h*f+c*y+_*S+d*B,this._32=h*A+c*b+_*k+d*T,this._33=h*x+c*v+_*M+d*E,this._34=h*w+c*C+_*I+d*t,this._41=p*f+m*y+g*S+e*B,this._42=p*A+m*b+g*k+e*T,this._43=p*x+m*v+g*M+e*E,this._44=p*w+m*C+g*I+e*t},getInverse:function(e){return(e=null==e?new Wr:e).initInverse(this),e},inverse3x4:function(e){var t=e._11,n=e._12,i=e._13,s=e._21,a=e._22,l=e._23,r=e._31,o=e._32,u=e._33,h=e._41,c=e._42,e=e._43,e=(this._11=a*u-l*o,this._12=i*o-n*u,this._13=n*l-i*a,this._14=0,this._21=l*r-s*u,this._22=t*u-i*r,this._23=i*s-t*l,this._24=0,this._31=s*o-a*r,this._32=n*r-t*o,this._33=t*a-n*s,this._34=0,this._41=-s*o*e+s*u*c+r*a*e-r*l*c-h*a*u+h*l*o,this._42=t*o*e-t*u*c-r*n*e+r*i*c+h*n*u-h*i*o,this._43=-t*a*e+t*l*c+s*n*e-s*i*c-h*n*l+h*i*a,this._44=t*a*u-t*l*o-s*n*u+s*i*o+r*n*l-r*i*a,this._44=1,t*this._11+n*this._21+i*this._31);(e<0?-e:e)<1e-10?this.zero():(this._11*=c=1/e,this._12*=c,this._13*=c,this._21*=c,this._22*=c,this._23*=c,this._31*=c,this._32*=c,this._33*=c,this._41*=c,this._42*=c,this._43*=c)},initInverse:function(e){var t=e._11,n=e._12,i=e._13,s=e._14,a=e._21,l=e._22,r=e._23,o=e._24,u=e._31,h=e._32,c=e._33,_=e._34,d=e._41,p=e._42,m=e._43,e=e._44,e=(this._11=l*c*e-l*_*m-h*r*e+h*o*m+p*r*_-p*o*c,this._12=-n*c*e+n*_*m+h*i*e-h*s*m-p*i*_+p*s*c,this._13=n*r*e-n*o*m-l*i*e+l*s*m+p*i*o-p*s*r,this._14=-n*r*_+n*o*c+l*i*_-l*s*c-h*i*o+h*s*r,this._21=-a*c*e+a*_*m+u*r*e-u*o*m-d*r*_+d*o*c,this._22=t*c*e-t*_*m-u*i*e+u*s*m+d*i*_-d*s*c,this._23=-t*r*e+t*o*m+a*i*e-a*s*m-d*i*o+d*s*r,this._24=t*r*_-t*o*c-a*i*_+a*s*c+u*i*o-u*s*r,this._31=a*h*e-a*_*p-u*l*e+u*o*p+d*l*_-d*o*h,this._32=-t*h*e+t*_*p+u*n*e-u*s*p-d*n*_+d*s*h,this._33=t*l*e-t*o*p-a*n*e+a*s*p+d*n*o-d*s*l,this._34=-t*l*_+t*o*h+a*n*_-a*s*h-u*n*o+u*s*l,this._41=-a*h*m+a*c*p+u*l*m-u*r*p-d*l*c+d*r*h,this._42=t*h*m-t*c*p-u*n*m+u*i*p+d*n*c-d*i*h,this._43=-t*l*m+t*r*p+a*n*m-a*i*p-d*n*r+d*i*l,this._44=t*l*c-t*r*h-a*n*c+a*i*h+u*n*r-u*i*l,t*this._11+n*this._21+i*this._31+s*this._41);(e<0?-e:e)<1e-10?this.zero():(this._11*=e=1/e,this._12*=e,this._13*=e,this._14*=e,this._21*=e,this._22*=e,this._23*=e,this._24*=e,this._31*=e,this._32*=e,this._33*=e,this._34*=e,this._41*=e,this._42*=e,this._43*=e,this._44*=e)},transpose:function(){var e=this._12;this._12=this._21,this._21=e,e=this._13,this._13=this._31,this._31=e,e=this._14,this._14=this._41,this._41=e,e=this._23,this._23=this._32,this._32=e,e=this._24,this._24=this._42,this._42=e,e=this._34,this._34=this._43,this._43=e},clone:function(){var e=new Wr;return e._11=this._11,e._12=this._12,e._13=this._13,e._14=this._14,e._21=this._21,e._22=this._22,e._23=this._23,e._24=this._24,e._31=this._31,e._32=this._32,e._33=this._33,e._34=this._34,e._41=this._41,e._42=this._42,e._43=this._43,e._44=this._44,e},load:function(e){this._11=e._11,this._12=e._12,this._13=e._13,this._14=e._14,this._21=e._21,this._22=e._22,this._23=e._23,this._24=e._24,this._31=e._31,this._32=e._32,this._33=e._33,this._34=e._34,this._41=e._41,this._42=e._42,this._43=e._43,this._44=e._44},loadValues:function(e){this._11=e[0],this._12=e[1],this._13=e[2],this._14=e[3],this._21=e[4],this._22=e[5],this._23=e[6],this._24=e[7],this._31=e[8],this._32=e[9],this._33=e[10],this._34=e[11],this._41=e[12],this._42=e[13],this._43=e[14],this._44=e[15]},getEulerAngles:function(){var e,t,n=this.clone(),i=0,s=0,a=0,i=Math.sqrt(this._11*this._11+this._12*this._12+this._13*this._13),s=Math.sqrt(this._21*this._21+this._22*this._22+this._23*this._23),a=Math.sqrt(this._31*this._31+this._32*this._32+this._33*this._33),i=(this._11*(this._22*this._33-this._23*this._32)+this._12*(this._23*this._31-this._21*this._33)+this._13*(this._21*this._32-this._22*this._31)<0&&(i*=-1,s*=-1,a*=-1),n.prependScale(1/i,1/s,1/a),Math.sqrt(n._11*n._11+n._12*n._12));return.01<i?(e=Math.atan2(n._23,n._33),t=Math.atan2(-n._13,i),s=Math.atan2(n._12,n._11),a=new Gr(e=null==e?0:e,t=null==t?0:t,s=null==s?0:s),e=Math.atan2(-n._23,-n._33),t=Math.atan2(-n._13,-i),s=Math.atan2(-n._12,-n._11),s=new Gr(e=null==e?0:e,t=null==t?0:t,s=null==s?0:s),a.x*a.x+a.y*a.y+a.z*a.z<s.x*s.x+s.y*s.y+s.z*s.z?a:s):(e=Math.atan2(-n._32,n._22),t=Math.atan2(-n._13,i),new Gr(e=null==e?0:e,t=null==t?0:t,0))},__class__:Wr},{}),Gr=(Nr.I=function(){var e=new Wr;return e.identity(),e},Nr.L=function(e){var t=new Wr;return t.loadValues(e),t},Nr.R=function(e,t,n){var i=new Wr;return i.initRotation(e,t,n),i},Nr.S=function(e,t,n){null==n&&(n=1),null==t&&(t=1),null==e&&(e=1);var i=new Wr;return i.initScale(e,t,n),i},Nr.lookAtX=function(e,t,n){null==t&&(t=new Gr(0,0,1)),null==n&&(n=new Wr);var i=e.x*e.x+e.y*e.y+e.z*e.z,s=(i=i<1e-20?0:1/Math.sqrt(i),e.x*i),a=e.y*i,l=e.z*i,r=s=null==s?0:s,o=a=null==a?0:a,u=l=null==l?0:l,h=r=null==r?0:r,c=o=null==o?0:o,_=u=null==u?0:u,t=r=null==(r=s=null==(s=(e=t).y*_-e.z*c)?0:s)?0:r,d=o=null==(o=a=null==(a=e.z*h-e.x*_)?0:a)?0:o,e=u=null==(u=l=null==(l=e.x*c-e.y*h)?0:l)?0:u,s=((t=r=null==(r=s=null==(s=t*(i=(i=t*t+d*d+e*e)<1e-20?0:1/Math.sqrt(i)))?0:s)?0:r)*t+(d=o=null==(o=a=null==(a=d*i)?0:a)?0:o)*d+(e=u=null==(u=l=null==(l=e*i)?0:l)?0:u)*e<1e-20&&(t=c,d=_,e=h),c*e-_*d);return null==(u=l=null==(l=h*d-c*t)?0:l)&&(u=0),null==(o=a=null==(a=_*t-h*e)?0:a)&&(o=0),null==(r=s=null==s?0:s)&&(r=0),n._11=h,n._12=c,n._13=_,n._14=0,n._21=t,n._22=d,n._23=e,n._24=0,n._31=r,n._32=o,n._33=u,n._34=0,n._41=0,n._42=0,n._43=0,n._44=1,n},(i["h3d.Quat"]=tn).__name__="h3d.Quat",tn.prototype={initMoveTo:function(e,t){var n=e.x+t.x,i=e.y+t.y,t=e.z+t.z;this.x=e.y*t-e.z*i,this.y=e.z*n-e.x*t,this.z=e.x*i-e.y*n,this.w=e.x*n+e.y*i+e.z*t,this.normalize()},initDirection:function(e,t){var n,i=e.x,s=e.y,e=e.z,a=e=null==e?0:e,l=(u=null==(u=i=null==i?0:i)?0:u,r=null==(r=s=null==s?0:s)?0:r),i=u*(d=(d=u*u+l*l+(o=a=null==a?0:a)*o)<1e-20?0:1/Math.sqrt(d)),r=s=null==(s=l*d)?0:s,o=a=null==(a=e=null==(e=o*d)?0:e)?0:a,s=null==(n=u=null==(u=i=null==i?0:i)?0:u)?0:n,u=i=null==(i=-(l=r=null==r?0:r))?0:i,h=u=null==u?0:u,c=r=null==(r=s)?0:r,_=0,d=(null!=t&&(h=u=null==(u=i=null==(i=t.y*o-t.z*l)?0:i)?0:u,c=r=null==(r=s=null==(s=t.z*n-t.x*o)?0:s)?0:r,_=a=null==(a=e=null==(e=t.x*l-t.y*n)?0:e)?0:a),h*h+c*c+_*_);(h*=d=d<1e-20?0:1/Math.sqrt(d))*h+(c*=d)*c+(_*=d)*_<1e-20&&(h=l,c=o,_=n);var p,m,t=u=null==(u=i=null==(i=l*_-o*c)?0:i)?0:u,d=r=null==(r=s=null==(s=o*h-n*_)?0:s)?0:r,i=a=null==(a=e=null==(e=n*c-l*h)?0:e)?0:a,u=n+c+i;0<u?(m=1/(p=2*Math.sqrt(u+1)),this.x=(_-d)*m,this.y=(t-o)*m,this.z=(l-h)*m,this.w=.25*p):c<n&&i<n?(m=1/(p=2*Math.sqrt(1+n-c-i)),this.x=.25*p,this.y=(h+l)*m,this.z=(t+o)*m,this.w=(_-d)*m):i<c?(m=1/(p=2*Math.sqrt(1+c-n-i)),this.x=(h+l)*m,this.y=.25*p,this.z=(d+_)*m,this.w=(t-o)*m):(m=1/(p=2*Math.sqrt(1+i-n-c)),this.x=(t+o)*m,this.y=(d+_)*m,this.z=.25*p,this.w=(l-h)*m)},initRotateAxis:function(e,t,n,i){var s=Math.sin(i/2),i=Math.cos(i/2);this.x=e*s,this.y=t*s,this.z=n*s,this.w=i*Math.sqrt(e*e+t*t+n*n),this.normalize()},initRotateMatrix:function(e){var t,n,i=e._11+e._22+e._33;0<i?(n=1/(t=2*Math.sqrt(i+1)),this.x=(e._23-e._32)*n,this.y=(e._31-e._13)*n,this.z=(e._12-e._21)*n,this.w=.25*t):e._11>e._22&&e._11>e._33?(n=1/(t=2*Math.sqrt(1+e._11-e._22-e._33)),this.x=.25*t,this.y=(e._21+e._12)*n,this.z=(e._31+e._13)*n,this.w=(e._23-e._32)*n):e._22>e._33?(n=1/(t=2*Math.sqrt(1+e._22-e._11-e._33)),this.x=(e._21+e._12)*n,this.y=.25*t,this.z=(e._32+e._23)*n,this.w=(e._31-e._13)*n):(n=1/(t=2*Math.sqrt(1+e._33-e._11-e._22)),this.x=(e._31+e._13)*n,this.y=(e._32+e._23)*n,this.z=.25*t,this.w=(e._12-e._21)*n)},normalize:function(){var e=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;e<1e-20?(this.x=this.y=this.z=0,this.w=1):(e=1/Math.sqrt(e),this.x*=e,this.y*=e,this.z*=e,this.w*=e)},initRotation:function(e,t,n){var i=Math.sin(.5*e),e=Math.cos(.5*e),s=Math.sin(.5*t),t=Math.cos(.5*t),a=Math.sin(.5*n),n=Math.cos(.5*n),l=t*n,r=s*a;this.x=i*l-e*r,this.y=e*s*n+i*t*a,this.z=e*t*a-i*s*n,this.w=e*l+i*r},multiply:function(e,t){var n=e.w*t.y-e.x*t.z+e.y*t.w+e.z*t.x,i=e.w*t.z+e.x*t.y-e.y*t.x+e.z*t.w,s=e.w*t.w-e.x*t.x-e.y*t.y-e.z*t.z;this.x=e.x*t.w+e.w*t.x+e.y*t.z-e.z*t.y,this.y=n,this.z=i,this.w=s},toEuler:function(){return this.toMatrix().getEulerAngles()},toMatrix:function(e){null==e&&(e=new Wr);var t=this.x*this.x,n=this.x*this.y,i=this.x*this.z,s=this.x*this.w,a=this.y*this.y,l=this.y*this.z,r=this.y*this.w,o=this.z*this.z,u=this.z*this.w;return e._11=1-2*(a+o),e._12=2*(n+u),e._13=2*(i-r),e._14=0,e._21=2*(n-u),e._22=1-2*(t+o),e._23=2*(l+s),e._24=0,e._31=2*(i+r),e._32=2*(l-s),e._33=1-2*(t+a),e._34=0,e._41=0,e._42=0,e._43=0,e._44=1,e},__class__:tn},function(e,t,n){null==n&&(n=0),null==t&&(t=0),this.x=e=null==e?0:e,this.y=t,this.z=n}),Ur=((i["h3d.VectorImpl"]=Gr).__name__="h3d.VectorImpl",Gr.prototype={__class__:Gr},(i["h3d.anim.AnimatedObject"]=nn).__name__="h3d.anim.AnimatedObject",(i["h3d.anim.Animation"]=sn).__name__="h3d.anim.Animation",sn.prototype={getPropValue:function(e,t){return null},sync:function(e){throw null==e&&(e=!1),tl.thrown("assert")},isPlaying:function(){return!this.pause&&1e-6<(this.speed<0?-this.speed:this.speed)},endFrame:function(){return this.frameCount},update:function(e){if(!this.isInstance)throw tl.thrown("You must instantiate this animation first");if(this.isPlaying()){if(null!=this.events&&null!=this.onEvent)for(var t=this.frame+e*this.speed*this.sampling|0,n=(t>=this.frameCount&&(t=this.frameCount-1),0|this.frame),i=t+1;n<i;){var s=n++;if(s!=this.lastEvent&&(this.lastEvent=s,null!=this.events[s])){for(var a=this.frame,l=e,r=(e-=(s-this.frame)/(this.speed*this.sampling),this.frame=s,0),o=this.events[s];r<o.length;)this.onEvent(o[r++]);if(this.frame!=s||s!=this.frameCount-1)return e;this.frame=a,e=l;break}}if(null!=this.onAnimEnd){var t=this.endFrame(),u=0==this.speed?0:(t-this.frame)/(this.speed*this.sampling);if(u<=e&&0<u)return this.frame=t,e-=u,this.onAnimEnd(),this.frame==t&&this.isPlaying()&&(this.loop?this.frame=0:e=0),e}this.frame+=e*this.speed*this.sampling,this.frame>=this.frameCount&&(this.loop?this.frame%=this.frameCount:this.frame=this.frameCount)}return 0},__class__:sn},(i["h3d.anim.Joint"]=an).__name__="h3d.anim.Joint",an.prototype={makeRuntimeData:function(){return new Mo},__class__:an},(i["h3d.anim.DynamicJoint"]=ln).__name__="h3d.anim.DynamicJoint",ln.__super__=an,ln.prototype=e(an.prototype,{makeRuntimeData:function(){return new Io},__class__:ln}),(i["h3d.anim._Skin.Influence"]=rn).__name__="h3d.anim._Skin.Influence",(i["h3d.anim.Skin"]=on).__name__="h3d.anim.Skin",on.prototype={__class__:on},(i["h3d.col.Collider"]=un).__name__="h3d.col.Collider",un.prototype={__class__:un},function(){this.xMin=1e20,this.xMax=-1e20,this.yMin=1e20,this.yMax=-1e20,this.zMin=1e20,this.zMax=-1e20}),Lr=((i["h3d.col.Bounds"]=Ur).__name__="h3d.col.Bounds",Ur.__super__=un,Ur.prototype=e(un.prototype,{inFrustum:function(e,t){if(null!=t)throw tl.thrown("Not implemented");return e.hasBounds(this)},rayIntersection:function(e,t){var n=(this.xMin-e.px)/e.lx,i=(this.yMin-e.py)/e.ly,s=(this.zMin-e.pz)/e.lz,a=(this.xMax-e.px)/e.lx,l=(this.yMax-e.py)/e.ly,e=(this.zMax-e.pz)/e.lz,r=a<n?a:n,o=l<i?l:i,u=e<s?e:s,a=n<a?a:n,n=i<l?l:i,l=s<e?e:s,i=n<a?n:a,e=r<o?o:r,s=e<u?u:e;return(l<i?l:i)<s?-1:s},transform:function(e){var t,n,i,s,a,l,r,o=this.xMin,u=this.yMin,h=this.zMin,c=this.xMax,_=this.yMax,d=this.zMax;this.xMin=1e20,this.xMax=-1e20,this.yMin=1e20,this.yMax=-1e20,this.zMin=1e20,this.zMax=-1e20,c<o&&_<u&&d<h||(i=n=t=0,n=a=null==(a=u)?0:a,i=null==h?0:h,l=(t=s=null==(s=o)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i),n=a=null==(a=u)?0:a,i=null==d?0:d,l=(t=s=null==(s=o)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i),n=a=null==(a=_)?0:a,i=null==h?0:h,l=(t=s=null==(s=o)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i),n=a=null==(a=_)?0:a,i=null==d?0:d,l=(t=s=null==(s=o)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i),n=a=null==(a=u)?0:a,i=null==h?0:h,l=(t=s=null==(s=c)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i),n=a=null==(a=u)?0:a,i=null==d?0:d,l=(t=s=null==(s=c)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i),n=a=null==(a=_)?0:a,i=null==h?0:h,l=(t=s=null==(s=c)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i),n=a=null==(a=_)?0:a,i=null==d?0:d,l=(t=s=null==(s=c)?0:s)*e._12+n*e._22+i*e._32+e._42,r=t*e._13+n*e._23+i*e._33+e._43,t=t*e._11+n*e._21+i*e._31+e._41,n=l,i=r,t<this.xMin&&(this.xMin=t),t>this.xMax&&(this.xMax=t),n<this.yMin&&(this.yMin=n),n>this.yMax&&(this.yMax=n),i<this.zMin&&(this.zMin=i),i>this.zMax&&(this.zMax=i))},contains:function(e){return e.x>=this.xMin&&e.x<this.xMax&&e.y>=this.yMin&&e.y<this.yMax&&e.z>=this.zMin&&e.z<this.zMax},intersection:function(e,t){var n=e.xMin,i=t.xMin,s=e.yMin,a=t.yMin,l=e.zMin,r=t.zMin,o=e.xMax,u=t.xMax,h=e.yMax,c=t.yMax,e=e.zMax,t=t.zMax;this.xMin=n<i?i:n,this.xMax=u<o?u:o,this.yMin=s<a?a:s,this.yMax=c<h?c:h,this.zMin=l<r?r:l,this.zMax=t<e?t:e},load:function(e){this.xMin=e.xMin,this.xMax=e.xMax,this.yMin=e.yMin,this.yMax=e.yMax,this.zMin=e.zMin,this.zMax=e.zMax},scaleCenter:function(e){var t=.5*(this.xMax-this.xMin)*e,n=.5*(this.yMax-this.yMin)*e,e=.5*(this.zMax-this.zMin)*e,i=.5*(this.xMax+this.xMin),s=.5*(this.yMax+this.yMin),a=.5*(this.zMax+this.zMin);this.xMin=i-t,this.yMin=s-n,this.zMin=a-e,this.xMax=i+t,this.yMax=s+n,this.zMax=a+e},__class__:Ur}),(i["h3d.col.OptimizedCollider"]=hn).__name__="h3d.col.OptimizedCollider",hn.__super__=un,hn.prototype=e(un.prototype,{rayIntersection:function(e,t){if(this.a.rayIntersection(e,!1)<0){if(!this.checkInside)return-1;var n=e.px+0*e.lx,i=e.py+0*e.ly,s=e.pz+0*e.lz;if(!this.a.contains(new Gr(n=null==n?0:n,i=null==i?0:i,s=null==s?0:s)))return-1}return this.b.rayIntersection(e,t)},contains:function(e){return!!this.a.contains(e)&&this.b.contains(e)},inFrustum:function(e,t){return!!this.a.inFrustum(e,t)&&this.b.inFrustum(e,t)},__class__:hn}),(i["h3d.col.GroupCollider"]=cn).__name__="h3d.col.GroupCollider",cn.__super__=un,cn.prototype=e(un.prototype,{rayIntersection:function(e,t){for(var n=-1,i=0,s=this.colliders;i<s.length;){var a=s[i++].rayIntersection(e,t);if(0<=a){if(!t)return a;(n<0||a<n)&&(n=a)}}return n},contains:function(e){for(var t=0,n=this.colliders;t<n.length;)if(n[t++].contains(e))return!0;return!1},inFrustum:function(e,t){for(var n=0,i=this.colliders;n<i.length;)if(i[n++].inFrustum(e,t))return!0;return!1},__class__:cn}),function(e){this.checkNearFar=!0,this.pleft=new jr(1,0,0,0),this.pright=new jr(1,0,0,0),this.ptop=new jr(1,0,0,0),this.pbottom=new jr(1,0,0,0),this.pnear=new jr(1,0,0,0),this.pfar=new jr(1,0,0,0),null!=e&&this.loadMatrix(e)}),jr=((i["h3d.col.Frustum"]=Lr).__name__="h3d.col.Frustum",Lr.prototype={loadMatrix:function(e){(t=this.pleft).nx=e._14+e._11,t.ny=e._24+e._21,t.nz=e._34+e._31,t.d=-(e._44+e._41),(t=this.pright).nx=e._14-e._11,t.ny=e._24-e._21,t.nz=e._34-e._31,t.d=e._41-e._44,(t=this.ptop).nx=e._14-e._12,t.ny=e._24-e._22,t.nz=e._34-e._32,t.d=e._42-e._44,(t=this.pbottom).nx=e._14+e._12,t.ny=e._24+e._22,t.nz=e._34+e._32,t.d=-(e._44+e._42),(t=this.pnear).nx=e._13,t.ny=e._23,t.nz=e._33,t.d=-e._43;(t=this.pfar).nx=e._14-e._13,t.ny=e._24-e._23,t.nz=e._34-e._33,t.d=e._43-e._44;var t=this.pleft,e=1/Math.sqrt(t.nx*t.nx+t.ny*t.ny+t.nz*t.nz),t=(t.nx*=e,t.ny*=e,t.nz*=e,t.d*=e,this.pright),e=1/Math.sqrt(t.nx*t.nx+t.ny*t.ny+t.nz*t.nz),t=(t.nx*=e,t.ny*=e,t.nz*=e,t.d*=e,this.ptop),e=1/Math.sqrt(t.nx*t.nx+t.ny*t.ny+t.nz*t.nz),t=(t.nx*=e,t.ny*=e,t.nz*=e,t.d*=e,this.pbottom),e=1/Math.sqrt(t.nx*t.nx+t.ny*t.ny+t.nz*t.nz),t=(t.nx*=e,t.ny*=e,t.nz*=e,t.d*=e,this.pnear),e=1/Math.sqrt(t.nx*t.nx+t.ny*t.ny+t.nz*t.nz),t=(t.nx*=e,t.ny*=e,t.nz*=e,t.d*=e,this.pfar),e=1/Math.sqrt(t.nx*t.nx+t.ny*t.ny+t.nz*t.nz);t.nx*=e,t.ny*=e,t.nz*=e,t.d*=e},hasSphere:function(e){var t=e.x,n=e.y,i=e.z,t=(t=null==t?0:t,n=null==n?0:n,i=null==i?0:i,null==t?0:t),n=null==n?0:n,i=null==i?0:i,s=this.pleft;if(s.nx*t+s.ny*n+s.nz*i-s.d<-e.r)return!1;if((s=this.pright).nx*t+s.ny*n+s.nz*i-s.d<-e.r)return!1;if((s=this.ptop).nx*t+s.ny*n+s.nz*i-s.d<-e.r)return!1;if((s=this.pbottom).nx*t+s.ny*n+s.nz*i-s.d<-e.r)return!1;if(this.checkNearFar){if((s=this.pnear).nx*t+s.ny*n+s.nz*i-s.d<-e.r)return!1;if((s=this.pfar).nx*t+s.ny*n+s.nz*i-s.d<-e.r)return!1}return!0},hasBounds:function(e){var t=(a=this.pleft).nx,n=a.ny,i=a.nz,s=t*(e.xMax+e.xMin)+n*(e.yMax+e.yMin)+i*(e.zMax+e.zMin);if((t=t<0?-t:t)*(e.xMax-e.xMin)+(n=n<0?-n:n)*(e.yMax-e.yMin)+(i=i<0?-i:i)*(e.zMax-e.zMin)+s-2*a.d<0)return!1;t=(a=this.pright).nx,n=a.ny,i=a.nz,s=t*(e.xMax+e.xMin)+n*(e.yMax+e.yMin)+i*(e.zMax+e.zMin);if((t=t<0?-t:t)*(e.xMax-e.xMin)+(n=n<0?-n:n)*(e.yMax-e.yMin)+(i=i<0?-i:i)*(e.zMax-e.zMin)+s-2*a.d<0)return!1;t=(a=this.ptop).nx,n=a.ny,i=a.nz,s=t*(e.xMax+e.xMin)+n*(e.yMax+e.yMin)+i*(e.zMax+e.zMin);if((t=t<0?-t:t)*(e.xMax-e.xMin)+(n=n<0?-n:n)*(e.yMax-e.yMin)+(i=i<0?-i:i)*(e.zMax-e.zMin)+s-2*a.d<0)return!1;t=(a=this.pbottom).nx,n=a.ny,i=a.nz,s=t*(e.xMax+e.xMin)+n*(e.yMax+e.yMin)+i*(e.zMax+e.zMin);if((t=t<0?-t:t)*(e.xMax-e.xMin)+(n=n<0?-n:n)*(e.yMax-e.yMin)+(i=i<0?-i:i)*(e.zMax-e.zMin)+s-2*a.d<0)return!1;if(this.checkNearFar){t=(a=this.pnear).nx,n=a.ny,i=a.nz,s=t*(e.xMax+e.xMin)+n*(e.yMax+e.yMin)+i*(e.zMax+e.zMin);if((t=t<0?-t:t)*(e.xMax-e.xMin)+(n=n<0?-n:n)*(e.yMax-e.yMin)+(i=i<0?-i:i)*(e.zMax-e.zMin)+s-2*a.d<0)return!1;var a,t=(a=this.pfar).nx,n=a.ny,i=a.nz,s=t*(e.xMax+e.xMin)+n*(e.yMax+e.yMin)+i*(e.zMax+e.zMin);if((t=t<0?-t:t)*(e.xMax-e.xMin)+(n=n<0?-n:n)*(e.yMax-e.yMin)+(i=i<0?-i:i)*(e.zMax-e.zMin)+s-2*a.d<0)return!1}return!0},__class__:Lr},(i["h3d.col.Ray"]=_n).__name__="h3d.col.Ray",_n.prototype={normalize:function(){var e=this.lx*this.lx+this.ly*this.ly+this.lz*this.lz;1!=e&&(e=e<1e-20?0:1/Math.sqrt(e),this.lx*=e,this.ly*=e,this.lz*=e)},__class__:_n},(i["h3d.col.ObjectCollider"]=dn).__name__="h3d.col.ObjectCollider",dn.__super__=un,dn.prototype=e(un.prototype,{rayIntersection:function(e,t){var n=dn.TMP_RAY,i=(dn.TMP_RAY=null,n.px=e.px,n.py=e.py,n.pz=e.pz,n.lx=e.lx,n.ly=e.ly,n.lz=e.lz,this.obj.getInvPos()),s=e.px,a=e.py,l=e.pz,r=s=null==s?0:s,o=a=null==a?0:a,u=l=null==l?0:l,h=o=null==o?0:o,c=u=null==u?0:u,_=(p=r=null==r?0:r)*i._12+h*i._22+c*i._32+i._42,d=p*i._13+h*i._23+c*i._33+i._43,p=p*i._11+h*i._21+c*i._31+i._41,h=_,c=d,s=(e.px=p,e.py=h,e.pz=c,e.lx),p=o=null==(o=a=null==(a=e.ly)?0:a)?0:o,h=u=null==(u=l=null==(l=e.lz)?0:l)?0:u,_=(c=r=null==(r=s=null==s?0:s)?0:r)*i._12+p*i._22+h*i._32,d=c*i._13+p*i._23+h*i._33,c=c*i._11+p*i._21+h*i._31,p=_,h=d,c=(e.lx=c,e.ly=p,e.lz=h,e.normalize(),this.collider.rayIntersection(e,t));return c<0?(e.px=n.px,e.py=n.py,e.pz=n.pz,e.lx=n.lx,e.ly=n.ly,e.lz=n.lz,dn.TMP_RAY=n,c):(s=e.px+c*e.lx,p=o=null==(o=a=null==(a=e.py+c*e.ly)?0:a)?0:o,h=u=null==(u=l=null==(l=e.pz+c*e.lz)?0:l)?0:u,_=(t=r=null==(r=s=null==s?0:s)?0:r)*(i=this.obj.absPos)._12+p*i._22+h*i._32+i._42,d=t*i._13+p*i._23+h*i._33+i._43,t=t*i._11+p*i._21+h*i._31+i._41,p=_,h=d,e.px=n.px,e.py=n.py,e.pz=n.pz,e.lx=n.lx,e.ly=n.ly,e.lz=n.lz,dn.TMP_RAY=n,a=t-e.px,o=p-e.py,null==(l=c=null==(c=h-e.pz)?0:c)&&(l=0),Math.sqrt(a*a+o*o+l*l))},contains:function(e){var t=e,n=t.x,i=t.y,s=t.z,a=n=null==n?0:n,l=i=null==i?0:i,r=s=null==s?0:s,s=(null==s&&(r=0),null==i&&(l=0),null==n&&(a=0),this.obj.getInvPos()),i=e.x*s._12+e.y*s._22+e.z*s._32+s._42,n=e.x*s._13+e.y*s._23+e.z*s._33+s._43,s=(e.x=e.x*s._11+e.y*s._21+e.z*s._31+s._41,e.y=i,e.z=n,this.collider.contains(e));return(t=e).x=a,t.y=l,t.z=r,s},inFrustum:function(e,t){var n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C;return null==t?this.collider.inFrustum(e,this.obj.getAbsPos()):(i=n=dn.TMP_MAT,s=this.obj.getAbsPos(),a=t._11,r=t._21,o=t._22,u=t._23,h=t._31,c=t._32,_=t._33,d=t._41,p=t._42,m=t._43,g=s._11,f=s._12,A=s._13,w=s._22,y=s._23,v=s._32,C=s._33,i._11=a*g+(l=t._12)*(x=s._21)+(t=t._13)*(b=s._31),i._12=a*f+l*w+t*v,i._13=a*A+l*y+t*C,i._14=0,i._21=r*g+o*x+u*b,i._22=r*f+o*w+u*v,i._23=r*A+o*y+u*C,i._24=0,i._31=h*g+c*x+_*b,i._32=h*f+c*w+_*v,i._33=h*A+c*y+_*C,i._34=0,i._41=d*g+p*x+m*b+s._41,i._42=d*f+p*w+m*v+s._42,i._43=d*A+p*y+m*C+s._43,i._44=1,this.collider.inFrustum(e,n))},__class__:dn}),function(e,t,n,i){this.nx=e,this.ny=t,this.nz=n,this.d=i}),Hr=((i["h3d.col.Plane"]=jr).__name__="h3d.col.Plane",jr.prototype={__class__:jr},(i["h3d.col.TriPlane"]=pn).__name__="h3d.col.TriPlane",pn.__super__=un,pn.prototype=e(un.prototype,{contains:function(e){var t=e.x-this.p0x,n=e.y-this.p0y,e=e.z-this.p0z,t=(t=null==t?0:t,n=null==n?0:n,e=null==e?0:e,null==t?0:t),n=null==n?0:n,e=null==e?0:e,i=this.d1x*t+this.d1y*n+this.d1z*e,t=this.d2x*t+this.d2y*n+this.d2z*e,n=(this.dot11*i-this.dot01*t)*this.invDenom,e=(this.dot00*t-this.dot01*i)*this.invDenom;return 0<=n&&0<=e&&n+e<1},inFrustum:function(e,t){throw tl.thrown("Not implemented")},rayIntersection:function(e,t){var n,i,s,a=e.lx*this.nx+e.ly*this.ny+e.lz*this.nz;return!(0<=a&&this.oriented)&&!((a=(this.d-(e.px*this.nx+e.py*this.ny+e.pz*this.nz))/a)<0&&this.oriented)&&(i=null==(i=e.px+e.lx*a-this.p0x)?0:i,s=null==(s=e.py+e.ly*a-this.p0y)?0:s,e=null==(e=e.pz+e.lz*a-this.p0z)?0:e,i=null==i?0:i,s=null==s?0:s,e=null==e?0:e,n=this.d1x*i+this.d1y*s+this.d1z*e,i=this.d2x*i+this.d2y*s+this.d2z*e,s=(this.dot11*n-this.dot01*i)*this.invDenom,e=(this.dot00*i-this.dot01*n)*this.invDenom,0<=s)&&0<=e&&s+e<1?a:-1},__class__:pn}),(i["h3d.col.Polygon"]=mn).__name__="h3d.col.Polygon",mn.fromPolygon2D=function(e,t,z){null==z&&(z=!0),null==t&&(t=0);var Q=new mn;if(Er.isConvex(e))for(var V=e[0],O=0,W=e.length-2;O<W;){var N=e[(Y=O++)+1],G=e[Y+2],n=new pn(z),i=c=null==(c=u=null==(u=V.x)?0:u)?0:c,s=_=null==(_=h=null==(h=V.y)?0:h)?0:_,a=d=null==(d=null==t?0:t)?0:d,l=N.x,r=(null==(f=null==t?0:t)&&(f=0),null==(g=p=null==(p=N.y)?0:p)&&(g=0),null==(m=l=null==l?0:l)&&(m=0),G.x),o=(null==(y=null==t?0:t)&&(y=0),null==(w=A=null==(A=G.y)?0:A)&&(w=0),null==(x=r=null==r?0:r)&&(x=0),m-(n.p0x=i)),U=ee=null==(ee=K=null==(K=(I=S=null==(S=b=null==(b=g-(n.p0y=s))?0:b)?0:S)*(P=q=null==(q=F=null==(F=y-(n.p0z=a))?0:F)?0:q)-(B=k=null==(k=v=null==(v=f-a)?0:v)?0:k)*(R=X=null==(X=E=null==(E=w-s)?0:E)?0:X))?0:K)?0:ee,L=te=null==(te=J=null==(J=B*(D=Z=null==(Z=T=null==(T=x-i)?0:T)?0:Z)-(M=C=null==(C=o=null==o?0:o)?0:C)*P)?0:J)?0:te,j=ne=null==(ne=$=null==($=M*R-I*D)?0:$)?0:ne;n.d=U*i+L*s+j*a,n.nx=U,n.ny=L,n.nz=j,n.d1x=M,n.d1y=I,n.d1z=B,n.d2x=D,n.d2y=R,n.d2z=P,n.dot00=M*M+I*I+B*B,n.dot01=M*D+I*R+B*P,n.dot11=D*D+R*R+P*P,n.invDenom=1/(n.dot00*n.dot11-n.dot01*n.dot01),n.next=Q.triPlanes,Q.triPlanes=n}else for(var H=Er.fastTriangulate(e),O=0,W=H.length/3|0;O<W;){var Y,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C,S,k,M,I,B,T,E,F,Z,X,q,D,R,P,K,J,$,ee,te,ne,V=e[H[3*(Y=O++)]],N=e[H[3*Y+1]],G=e[H[3*Y+2]],n=new pn(z),i=c=null==(c=u=null==(u=V.x)?0:u)?0:c,s=_=null==(_=h=null==(h=V.y)?0:h)?0:_,a=d=null==(d=null==t?0:t)?0:d,l=N.x,r=(null==(f=null==t?0:t)&&(f=0),null==(g=p=null==(p=N.y)?0:p)&&(g=0),null==(m=l=null==l?0:l)&&(m=0),G.x),o=(null==(y=null==t?0:t)&&(y=0),null==(w=A=null==(A=G.y)?0:A)&&(w=0),null==(x=r=null==r?0:r)&&(x=0),m-(n.p0x=i)),U=ee=null==(ee=K=null==(K=(I=S=null==(S=b=null==(b=g-(n.p0y=s))?0:b)?0:S)*(P=q=null==(q=F=null==(F=y-(n.p0z=a))?0:F)?0:q)-(B=k=null==(k=v=null==(v=f-a)?0:v)?0:k)*(R=X=null==(X=E=null==(E=w-s)?0:E)?0:X))?0:K)?0:ee,L=te=null==(te=J=null==(J=B*(D=Z=null==(Z=T=null==(T=x-i)?0:T)?0:Z)-(M=C=null==(C=o=null==o?0:o)?0:C)*P)?0:J)?0:te,j=ne=null==(ne=$=null==($=M*R-I*D)?0:$)?0:ne;n.d=U*i+L*s+j*a,n.nx=U,n.ny=L,n.nz=j,n.d1x=M,n.d1y=I,n.d1z=B,n.d2x=D,n.d2y=R,n.d2z=P,n.dot00=M*M+I*I+B*B,n.dot01=M*D+I*R+B*P,n.dot11=D*D+R*R+P*P,n.invDenom=1/(n.dot00*n.dot11-n.dot01*n.dot01),n.next=Q.triPlanes,Q.triPlanes=n}return Q},mn.__super__=un,mn.prototype=e(un.prototype,{addBuffers:function(e,t,n){null==n&&(n=3);for(var i=0,s=t.length/3|0;i<s;){var a=3*i++,l=new pn(this.oriented),r=t[a]*n,o=t[1+a]*n,a=t[2+a]*n,u=e[r],h=e[1+r],r=e[2+r],u=(u=null==u?0:u,h=null==h?0:h,r=null==r?0:r,null==u?0:u),h=null==h?0:h,r=null==r?0:r,c=e[o],_=e[1+o],o=e[2+o],c=c=null==c?0:c,d=_=null==_?0:_,p=o=null==o?0:o,o=(null==o&&(p=0),null==_&&(d=0),e[a]),_=e[1+a],a=e[2+a],m=o=null==o?0:o,g=_=null==_?0:_,f=a=null==a?0:a,a=(null==a&&(f=0),null==_&&(g=0),null==o&&(m=0),(c=null==c?0:c)-(l.p0x=u)),_=d-(l.p0y=h),o=p-(l.p0z=r),c=(a=null==a?0:a,_=null==_?0:_,o=null==o?0:o,null==a?0:a),d=null==_?0:_,p=null==o?0:o,a=m-u,_=g-h,o=f-r,m=(a=null==a?0:a,_=null==_?0:_,o=null==o?0:o,null==a?0:a),g=null==_?0:_,f=null==o?0:o,a=d*f-p*g,_=p*m-c*f,o=c*g-d*m,a=(a=null==a?0:a,_=null==_?0:_,o=null==o?0:o,null==a?0:a),_=null==_?0:_,o=null==o?0:o;l.d=a*u+_*h+o*r,l.nx=a,l.ny=_,l.nz=o,l.d1x=c,l.d1y=d,l.d1z=p,l.d2x=m,l.d2y=g,l.d2z=f,l.dot00=c*c+d*d+p*p,l.dot01=c*m+d*g+p*f,l.dot11=m*m+g*g+f*f,l.invDenom=1/(l.dot00*l.dot11-l.dot01*l.dot01),l.next=this.triPlanes,this.triPlanes=l}},isConvex:function(){return!0},getBounds:function(e){(e=null==e?new Ur:e).xMin=1e20,e.xMax=-1e20,e.yMin=1e20,e.yMax=-1e20,e.zMin=1e20,e.zMax=-1e20;for(var t=this.triPlanes;null!=t;){var n=t.p0x,i=t.p0y,s=t.p0z,n=(n<e.xMin&&(e.xMin=n),n>e.xMax&&(e.xMax=n),i<e.yMin&&(e.yMin=i),i>e.yMax&&(e.yMax=i),s<e.zMin&&(e.zMin=s),s>e.zMax&&(e.zMax=s),t.d1x+t.p0x),i=t.d1y+t.p0y,s=t.d1z+t.p0z,n=(n<e.xMin&&(e.xMin=n),n>e.xMax&&(e.xMax=n),i<e.yMin&&(e.yMin=i),i>e.yMax&&(e.yMax=i),s<e.zMin&&(e.zMin=s),s>e.zMax&&(e.zMax=s),t.d2x+t.p0x),i=t.d2y+t.p0y,s=t.d2z+t.p0z;n<e.xMin&&(e.xMin=n),n>e.xMax&&(e.xMax=n),i<e.yMin&&(e.yMin=i),i>e.yMax&&(e.yMax=i),s<e.zMin&&(e.zMin=s),s>e.zMax&&(e.zMax=s),t=t.next}return e},contains:function(e){if(!this.isConvex())throw tl.thrown("Not implemented for concave polygon");for(var t=this.triPlanes;null!=t;){if(0<=t.nx*e.x+t.ny*e.y+t.nz*e.z-t.d)return!1;t=t.next}return!0},rayIntersection:function(e,t){for(var n=this.triPlanes,i=-1;null!=n;){var s,a,l,r,o=e.lx*n.nx+e.ly*n.ny+e.lz*n.nz;if(0<=(r=!(0<=o&&n.oriented)&&!((o=(n.d-(e.px*n.nx+e.py*n.ny+e.pz*n.nz))/o)<0&&n.oriented)&&(r=null==(r=e.px+e.lx*o-n.p0x)?0:r,a=null==(a=e.py+e.ly*o-n.p0y)?0:a,l=null==(l=e.pz+e.lz*o-n.p0z)?0:l,r=null==r?0:r,a=null==a?0:a,l=null==l?0:l,s=n.d1x*r+n.d1y*a+n.d1z*l,r=n.d2x*r+n.d2y*a+n.d2z*l,a=(n.dot11*s-n.dot01*r)*n.invDenom,l=(n.dot00*r-n.dot01*s)*n.invDenom,0<=a)&&0<=l&&a+l<1?o:-1)){if(!t)return r;(i<0||r<i)&&(i=r)}n=n.next}return i},inFrustum:function(e,t){throw tl.thrown("Not implemented")},__class__:mn}),(i["h3d.col.PolygonBuffer"]=gn).__name__="h3d.col.PolygonBuffer",gn.__super__=un,gn.prototype=e(un.prototype,{setData:function(e,t,n,i){null==i&&(i=-1),null==n&&(n=0),this.buffer=e,this.indexes=t,this.startIndex=n,this.triCount=0<=i?i:(t.length-n)/3|0},contains:function(e){for(var t=this.startIndex,n=r=null==(r=e.x)?0:r,i=o=null==(o=e.y)?0:o,s=u=null==(u=e.z)?0:u,a=0,l=this.triCount;a<l;){++a;var r,o,u,h=3*this.indexes[t++],c=r=null==(r=this.buffer[h++])?0:r,_=o=null==(o=this.buffer[h++])?0:o,h=u=null==(u=this.buffer[h])?0:u,d=3*this.indexes[t++],p=this.buffer[d++],m=this.buffer[d++],d=this.buffer[d],g=(null==d&&(d=0),null==m&&(m=0),null==p&&(p=0),3*this.indexes[t++]),f=this.buffer[g++],A=this.buffer[g++],g=this.buffer[g],p=p-c,m=m-_,d=d-h,f=(p=null==p?0:p,(f=null==f?0:f)-c),A=(A=null==A?0:A)-_,g=(g=null==g?0:g)-h,x=(f=null==f?0:f,(m=null==m?0:m)*(g=null==g?0:g)-(d=null==d?0:d)*(A=null==A?0:A)),d=d*f-p*g,g=p*A-m*f;x=null==x?0:x;if(x*c+(d=null==d?0:d)*_+(g=null==g?0:g)*h<=x*n+d*i+g*s)return!1}return!0},inFrustum:function(e,t){throw tl.thrown("Not implemented")},rayIntersection:function(e,t){for(var n=this.startIndex,i=_=null==(_=e.lx)?0:_,s=d=null==(d=e.ly)?0:d,a=p=null==(p=e.lz)?0:p,l=_=null==(_=e.px)?0:_,r=d=null==(d=e.py)?0:d,o=p=null==(p=e.pz)?0:p,u=-1,h=0,c=this.triCount;h<c;){++h;var _,d,p,m=3*this.indexes[n++],g=_=null==(_=this.buffer[m++])?0:_,f=d=null==(d=this.buffer[m++])?0:d,m=p=null==(p=this.buffer[m])?0:p,A=3*this.indexes[n++],x=this.buffer[A++],w=this.buffer[A++],A=this.buffer[A],y=(null==A&&(A=0),null==w&&(w=0),null==x&&(x=0),3*this.indexes[n++]),b=this.buffer[y++],v=this.buffer[y++],y=this.buffer[y],x=x-g,w=w-f,A=A-m,x=x=null==x?0:x,w=w=null==w?0:w,A=A=null==A?0:A,b=(b=null==b?0:b)-g,v=(v=null==v?0:v)-f,y=(y=null==y?0:y)-m,b=b=null==b?0:b,v=v=null==v?0:v,y=y=null==y?0:y,C=s*y-a*v,S=a*b-i*y,k=i*v-s*b,C=C=null==C?0:C,S=S=null==S?0:S,k=k=null==k?0:k,M=x*C+w*S+A*k;if(!(M<1e-10)){M=1/M,g=l-g,f=r-f,m=o-m,g=g=null==g?0:g,f=f=null==f?0:f,m=m=null==m?0:m,C=(g*C+f*S+m*k)*M;if(!(C<0||1<C)){S=f*A-m*w,k=m*x-g*A,m=g*w-f*x,A=S=null==S?0:S,g=k=null==k?0:k,w=m=null==m?0:m,f=(i*A+s*g+a*w)*M;if(!(f<0||1<C+f)){x=(b*A+v*g+y*w)*M;if(!(x<1e-10)){if(!t)return x;(u<0||x<u)&&(u=x)}}}}}return u},__class__:gn}),(i["h3d.col.SkinCollider"]=fn).__name__="h3d.col.SkinCollider",fn.__super__=un,fn.prototype=e(un.prototype,{contains:function(e){this.checkBounds();var t=this.currentBounds;return e.x>=t.xMin&&e.x<t.xMax&&e.y>=t.yMin&&e.y<t.yMax&&e.z>=t.zMin&&e.z<t.zMax&&(this.applyTransform(),this.transform.contains(e))},inFrustum:function(e,t){this.checkBounds();var n=this.currentBounds;if(null!=t)throw tl.thrown("Not implemented");if(!e.hasBounds(n))return!1;if(null!=t)throw tl.thrown("Not implemented");return this.applyTransform(),this.transform.inFrustum(e)},rayIntersection:function(e,t){return this.checkBounds(),this.currentBounds.rayIntersection(e,!1)<0?-1:(this.applyTransform(),this.transform.rayIntersection(e,t))},checkBounds:function(){var e;!this.obj.jointsUpdated&&this.lastBoundsFrame==this.obj.lastFrame||(this.lastBoundsFrame=this.obj.lastFrame,this.obj.syncJoints(),(e=this.currentBounds).xMin=1e20,e.xMax=-1e20,e.yMin=1e20,e.yMax=-1e20,e.zMin=1e20,e.zMax=-1e20,this.obj.addBoundsRec(this.currentBounds,null))},applyTransform:function(){if(this.obj.jointsUpdated||this.lastFrame!=this.obj.lastFrame){this.lastFrame=this.obj.lastFrame,this.obj.syncJoints();for(var e=0,t=0,n=this.obj.skinData.bonesPerVertex,i=0,s=this.obj.skinData.vertexCount;i<s;){++i;for(var a=0,l=0,r=0,o=this.col.buffer[t],u=this.col.buffer[t+1],h=this.col.buffer[t+2],c=(o=null==o?0:o,u=null==u?0:u,h=null==h?0:h,null==o?0:o),_=null==u?0:u,d=null==h?0:h,p=0;p<n;){++p;var m,g,f,A,x,w,y=this.obj.skinData.vertexWeights[e];0==y?++e:(m=e++,A=null==(A=c)?0:A,x=null==(x=_)?0:x,x=null==x?0:x,w=null==(w=null==d?0:d)?0:w,g=(A=null==A?0:A)*(m=this.obj.currentPalette[this.obj.skinData.vertexJoints[m]])._12+x*m._22+w*m._32+m._42,f=A*m._13+x*m._23+w*m._33+m._43,a+=(A=A*m._11+x*m._21+w*m._31+m._41)*y,l+=(x=g)*y,r+=(w=f)*y)}this.transform.buffer[t++]=a,this.transform.buffer[t++]=l,this.transform.buffer[t++]=r}}},__class__:fn}),function(e){this.prevAbsPosFrame=-1,this.flags=32768,this.absPos=new Wr,this.absPos.identity(),this.x=0,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.y=0,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.z=0,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleX=1,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleY=1,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleZ=1,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.qRot=new tn;var t=null!=this.follow;t?this.flags|=1:this.flags&=-2,t&&0!=(131072&this.flags)&&(this.flags|=262144),this.flags|=2,this.children=[],null!=e&&e.addChild(this)}),Yr=((i["h3d.scene.Object"]=Hr).__name__="h3d.scene.Object",Hr.prototype={set_cullingCollider:function(e){return this.cullingCollider=e,this.flags&=-4097,e},stopAnimation:function(e){if(null==e&&(e=!1),this.currentAnimation=null,e)for(var t=0,n=this.children;t<n.length;)n[t++].stopAnimation(!0)},find:function(e){var t=e(this);if(null!=t)return t;for(var n=0,i=this.children;n<i.length;)if(null!=(t=i[n++].find(e)))return t;return null},getMaterials:function(e,t){if(null==e&&(e=[]),t=null==t?!0:t)for(var n=0,i=this.children;n<i.length;)i[n++].getMaterials(e);return e},localToGlobal:function(e){this.syncPos(),null==e&&(e=new Gr(0,0,0));var t=this.absPos,n=e.x*t._12+e.y*t._22+e.z*t._32+t._42,i=e.x*t._13+e.y*t._23+e.z*t._33+t._43;return e.x=e.x*t._11+e.y*t._21+e.z*t._31+t._41,e.y=n,e.z=i,e},globalToLocal:function(e){var t=this.getInvPos(),n=e.x*t._12+e.y*t._22+e.z*t._32+t._42,i=e.x*t._13+e.y*t._23+e.z*t._33+t._43;return e.x=e.x*t._11+e.y*t._21+e.z*t._31+t._41,e.y=n,e.z=i,e},getInvPos:function(){return this.syncPos(),null==this.invPos&&(this.invPos=new Wr,this.invPos._44=0),0==this.invPos._44&&this.invPos.inverse3x4(this.absPos),this.invPos},getBounds:function(e,t){return null==e&&(e=new Ur),null!=this.parent&&this.parent!=t&&this.parent.syncPos(),this.addBoundsRec(e,null==t?null:t.getInvPos()),e},addBoundsRec:function(e,t){if(0!=(1&this.flags)){for(var n=0,i=this.children;n<i.length;){var s=i[n];++n,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144)}var a=null!=this.follow;a?this.flags|=1:this.flags&=-2,a&&0!=(131072&this.flags)&&(this.flags|=262144),this.calcAbsPos()}for(n=0,i=this.children;n<i.length;){s=i[n];++n,0==(2&s.flags)&&0==(524288&s.flags)||s.addBoundsRec(e,t)}},getMeshes:function(e){null==e&&(e=[]);for(var t=this instanceof Co?this:null,n=(null!=t&&e.push(t),0),i=this.children;n<i.length;)i[n++].getMeshes(e);return e},getObjectByName:function(e){if(this.name==e)return this;for(var t=0,n=this.children;t<n.length;){var i=n[t++].getObjectByName(e);if(null!=i)return i}return null},clone:function(e){(e=null==e?new Hr:e).x=this.x,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.y=this.y,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.z=this.z,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleX=this.scaleX,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleY=this.scaleY,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleZ=this.scaleZ,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144);for(var t=e.qRot,n=this.qRot,i=(t.x=n.x,t.y=n.y,t.z=n.z,t.w=n.w,e.name=this.name,e.set_follow(this.follow),0!=(8&this.flags)?e.flags|=8:e.flags&=-9,0!=(2&this.flags)?e.flags|=2:e.flags&=-3,null!=this.defaultTransform&&(e.defaultTransform=this.defaultTransform.clone(),e.flags|=1,0!=(131072&e.flags))&&(e.flags|=262144),0),s=this.children;i<s.length;){var a=s[i++].clone();(a.parent=e).children.push(a)}return e},addChild:function(e){this.addChildAt(e,this.children.length)},addChildAt:function(e,t){(t=t<0?0:t)>this.children.length&&(t=this.children.length);for(var n,i=this;null!=i;){if(i==e)throw tl.thrown("Recursive addChild");i=i.parent}null!=e.parent&&(n=0!=(32&e.flags),e.flags&=-33,e.parent.removeChild(e),n?e.flags|=32:e.flags&=-33),this.children.splice(t,0,e),0==(32&this.flags)&&0!=(32&e.flags)&&e.onRemove(),e.parent=this,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),0!=(32&this.flags)&&(0==(32&e.flags)?e.onAdd():e.onParentChanged())},iterVisibleMeshes:function(e){if(0!=(2&this.flags)&&(0==(4&this.flags)||0==(128&this.flags))){0==(4&this.flags)&&null!=(t=this instanceof Co?this:null)&&e(t);for(var t,n=0,i=this.children;n<i.length;)i[n++].iterVisibleMeshes(e)}},onParentChanged:function(){for(var e=0,t=this.children;e<t.length;)t[e++].onParentChanged()},onAdd:function(){this.flags|=32;for(var e=0,t=this.children;e<t.length;)t[e++].onAdd()},onRemove:function(){this.flags&=-33;for(var e=this.children.length-1;0<=e;)this.children[e--].onRemove()},removeChild:function(e){Jn.remove(this.children,e)&&(0!=(32&e.flags)&&e.onRemove(),e.parent=null,e.flags|=1,0!=(131072&e.flags))&&(e.flags|=262144)},removeChildren:function(){for(;0<this.children.length;)this.removeChild(this.children[0])},remove:function(){null!=this.parent&&this.parent.removeChild(this)},getScene:function(){for(var e=this;null!=e.parent;)e=e.parent;return e instanceof ko?e:null},getAbsPos:function(){return this.syncPos(),this.absPos},getRelPos:function(e){if(null==e)return this.getAbsPos();this.syncPos();var t=new Wr;return t.multiply(this.absPos,e.getInvPos()),t},toMesh:function(){var e=this instanceof Co?this:null;if(null!=e)return e;throw tl.thrown(el.string(this)+" is not a Mesh")},getCollider:function(){if(0!=(1024&this.flags))return null;for(var e=[],t=this.getGlobalCollider(),n=(null!=t&&e.push(t),0),i=this.children;n<i.length;){var s=i[n++].getCollider();if(null!=s){var a=s instanceof cn?s:null;if(null!=a)for(var l=0,r=a.colliders;l<r.length;)e.push(r[l++]);else e.push(s)}}return 0==e.length?null:1==e.length?e[0]:new cn(e)},getGlobalCollider:function(){var e;return 0!=(1024&this.flags)||null==(e=this.getLocalCollider())?null:new dn(this,e)},getLocalCollider:function(){return null},draw:function(e){},set_follow:function(e){return this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.follow=e},computeVelocity:function(){return-1!=this.prevAbsPosFrame},calcPrevAbsPos:function(){this.computeVelocity()?this.prevAbsPosFrame<l0.frameCount&&(this.prevAbsPosFrame=l0.frameCount,null==this.prevAbsPos?this.prevAbsPos=this.absPos.clone():this.prevAbsPos.load(this.absPos)):this.prevAbsPos=null},calcAbsPos:function(){var e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v;this.calcPrevAbsPos(),this.qRot.toMatrix(this.absPos),this.absPos._11*=this.scaleX,this.absPos._12*=this.scaleX,this.absPos._13*=this.scaleX,this.absPos._21*=this.scaleY,this.absPos._22*=this.scaleY,this.absPos._23*=this.scaleY,this.absPos._31*=this.scaleZ,this.absPos._32*=this.scaleZ,this.absPos._33*=this.scaleZ,this.absPos._41=this.x,this.absPos._42=this.y,this.absPos._43=this.z,null!=this.follow?(this.follow.syncPos(),0!=(8&this.flags)?(e=this.absPos,t=this.absPos,n=this.parent.absPos,i=t._11,l=t._21,r=t._22,o=t._23,u=t._31,h=t._32,c=t._33,_=t._41,d=t._42,p=t._43,m=n._11,g=n._12,f=n._13,x=n._22,w=n._23,b=n._32,v=n._33,e._11=i*m+(s=t._12)*(A=n._21)+(a=t._13)*(y=n._31),e._12=i*g+s*x+a*b,e._13=i*f+s*w+a*v,e._14=0,e._21=l*m+r*A+o*y,e._22=l*g+r*x+o*b,e._23=l*f+r*w+o*v,e._24=0,e._31=u*m+h*A+c*y,e._32=u*g+h*x+c*b,e._33=u*f+h*w+c*v,e._34=0,e._41=_*m+d*A+p*y+n._41,e._42=_*g+d*x+p*b+n._42,e._43=_*f+d*w+p*v+n._43,e._44=1,this.absPos._41=this.x+this.follow.absPos._41,this.absPos._42=this.y+this.follow.absPos._42,this.absPos._43=this.z+this.follow.absPos._43):this.absPos.multiply3x4(this.absPos,this.follow.absPos)):null!=this.parent&&0==(2048&this.flags)&&(e=this.absPos,t=this.absPos,n=this.parent.absPos,i=t._11,l=t._21,r=t._22,o=t._23,u=t._31,h=t._32,c=t._33,_=t._41,d=t._42,p=t._43,m=n._11,g=n._12,f=n._13,x=n._22,w=n._23,b=n._32,v=n._33,e._11=i*m+(s=t._12)*(A=n._21)+(a=t._13)*(y=n._31),e._12=i*g+s*x+a*b,e._13=i*f+s*w+a*v,e._14=0,e._21=l*m+r*A+o*y,e._22=l*g+r*x+o*b,e._23=l*f+r*w+o*v,e._24=0,e._31=u*m+h*A+c*y,e._32=u*g+h*x+c*b,e._33=u*f+h*w+c*v,e._34=0,e._41=_*m+d*A+p*y+n._41,e._42=_*g+d*x+p*b+n._42,e._43=_*f+d*w+p*v+n._43,e._44=1),null!=this.defaultTransform&&(e=this.absPos,t=this.defaultTransform,n=this.absPos,i=t._11,l=t._21,r=t._22,o=t._23,u=t._31,h=t._32,c=t._33,_=t._41,d=t._42,p=t._43,m=n._11,g=n._12,f=n._13,x=n._22,w=n._23,b=n._32,v=n._33,e._11=i*m+(s=t._12)*(A=n._21)+(a=t._13)*(y=n._31),e._12=i*g+s*x+a*b,e._13=i*f+s*w+a*v,e._14=0,e._21=l*m+r*A+o*y,e._22=l*g+r*x+o*b,e._23=l*f+r*w+o*v,e._24=0,e._31=u*m+h*A+c*y,e._32=u*g+h*x+c*b,e._33=u*f+h*w+c*v,e._34=0,e._41=_*m+d*A+p*y+n._41,e._42=_*g+d*x+p*b+n._42,e._43=_*f+d*w+p*v+n._43,e._44=1),null!=this.invPos&&(this.invPos._44=0)},sync:function(e){},syncRec:function(e){if(null!=this.currentAnimation){for(var t=this.parent,n=e.elapsedTime;0<n&&null!=this.currentAnimation;)n=this.currentAnimation.update(n);if(null!=this.currentAnimation&&(e.visibleFlag&&0!=(2&this.flags)&&0==(4&this.flags)||0!=(64&this.flags))&&this.currentAnimation.sync(),null==this.parent&&null!=t)return}if(0!=(32768&this.flags)||0==(4&this.flags)&&0!=(2&this.flags)&&e.visibleFlag){var t=e.visibleFlag,i=((0==(2&this.flags)||0!=(4&this.flags)&&0!=(128&this.flags))&&(e.visibleFlag=!1),null==e.cullingCollider||null!=this.cullingCollider&&0==(4096&this.flags)?0!=(4096&this.flags)&&this.set_cullingCollider(null):(this.set_cullingCollider(e.cullingCollider),this.flags|=4096),e.cullingCollider),s=(0!=(128&this.flags)&&(e.cullingCollider=this.cullingCollider),0!=(1&this.flags));if(s&&this.calcAbsPos(),0!=(8192&this.flags)){if(0!=(16384&this.flags)&&!s&&!e.wasContextLost)return e.visibleFlag=t,void(e.cullingCollider=i);this.flags|=16384}this.flags&=-262145,this.flags|=131072,this.sync(e),this.flags&=-131073,s=s||0!=(262144&this.flags),0!=(262144&this.flags)&&this.calcAbsPos();for(var a=null!=this.follow,l=(a?this.flags|=1:this.flags&=-2,a&&0!=(131072&this.flags)&&(this.flags|=262144),this.lastFrame=e.frame,0),r=this.children.length;l<r;){var o=this.children[l];if(null==o)break;o.lastFrame!=e.frame&&(s&&(o.flags|=1,0!=(131072&o.flags))&&(o.flags|=262144),o.syncRec(e)),this.children[l]!=o?(l=0,r=this.children.length):++l}e.visibleFlag=t,e.cullingCollider=i}},syncPos:function(){if(null!=this.parent&&this.parent.syncPos(),0!=(1&this.flags))for(var e=null!=this.follow,t=(e?this.flags|=1:this.flags&=-2,e&&0!=(131072&this.flags)&&(this.flags|=262144),this.calcAbsPos(),0),n=this.children;t<n.length;){var i=n[t];++t,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144)}},emit:function(e){},emitRec:function(e){if(0!=(2&this.flags)&&(0==(4&this.flags)||0==(128&this.flags)||e.computingStatic)){if(0!=(1&this.flags)){null!=this.currentAnimation&&this.currentAnimation.sync();for(var t=null!=this.follow,n=(t?this.flags|=1:this.flags&=-2,t&&0!=(131072&this.flags)&&(this.flags|=262144),this.calcAbsPos(),0),i=this.children;n<i.length;){var s=i[n];++n,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144)}}for(t=e.forcedScreenRatio,n=(0!=(65536&this.flags)&&e.computeVelocity&&0==(8192&this.flags)&&0==(4&this.flags)?this.computeVelocity()||(this.prevAbsPosFrame=0):this.prevAbsPosFrame=-1,this.calcPrevAbsPos(),0!=(4&this.flags)&&!e.computingStatic||(this.emit(e),this.flags&=-65537),0),i=this.children;n<i.length;)i[n++].emitRec(e);e.forcedScreenRatio=t}},setTransform:function(e){var t=e,n=0,i=0,s=0,n=Math.sqrt(t._11*t._11+t._12*t._12+t._13*t._13),i=Math.sqrt(t._21*t._21+t._22*t._22+t._23*t._23),s=Math.sqrt(t._31*t._31+t._32*t._32+t._33*t._33);t._11*(t._22*t._33-t._23*t._32)+t._12*(t._23*t._31-t._21*t._33)+t._13*(t._21*t._32-t._22*t._31)<0&&(n*=-1,i*=-1,s*=-1),this.x=e._41,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.y=e._42,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.z=e._43,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleX=n,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleY=i,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleZ=s,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),Hr.tmpMat.load(e),Hr.tmpMat.prependScale(1/n,1/i,1/s),this.qRot.initRotateMatrix(Hr.tmpMat),this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144)},getTransform:function(e){return(e=null==e?new Wr:e).initScale(this.scaleX,this.scaleY,this.scaleZ),this.qRot.toMatrix(Hr.tmpMat),e.multiply3x4(e,Hr.tmpMat),e._41=this.x,e._42=this.y,e._43=this.z,e},rotate:function(e,t,n,i){(i=null==i?new tn:i).initRotation(e,t,n),this.qRot.multiply(i,this.qRot),this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144)},setRotation:function(e,t,n){this.qRot.initRotation(e,t,n),this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144)},getRotationQuat:function(){return this.qRot},setRotationQuat:function(e){this.qRot=e,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144)},toString:function(){return nl.getClass(this).__name__.split(".").pop()+(null==this.name?"":"("+this.name+")")},__class__:Hr,__properties__:{set_follow:"set_follow",set_cullingCollider:"set_cullingCollider"}},(i["h3d.col.Sphere"]=An).__name__="h3d.col.Sphere",An.__super__=un,An.prototype=e(un.prototype,{contains:function(e){var t=e.x-this.x,n=e.y-this.y,e=e.z-this.z;return t*t+n*n+e*e-this.r*this.r<0},rayIntersection:function(e,t){var n=e.px-this.x,i=e.py-this.y,s=e.pz-this.z,e=n*e.lx+i*e.ly+s*e.lz,n=n*n+i*i+s*s-this.r*this.r;return 0<n&&0<e||(i=e*e-n)<0?-1:(s=-e-Math.sqrt(i))<0?0:s},inFrustum:function(e,t){return null!=t?this.inFrustumMatrix(e,t):e.hasSphere(this)},inFrustumMatrix:function(e,t){var n=this.x,i=this.y,s=this.z,a=this.r,l=this.x,r=this.y,o=this.z,r=(l=null==l?0:l,r=null==r?0:r,o=null==o?0:o,null==r?0:r),o=null==o?0:o,u=(l=null==l?0:l)*t._12+r*t._22+o*t._32+t._42,h=l*t._13+r*t._23+o*t._33+t._43,l=l*t._11+r*t._21+o*t._31+t._41,r=u,o=h,u=(this.x=l,this.y=r,this.z=o,t),h=0,l=0,r=0,h=Math.sqrt(u._11*u._11+u._12*u._12+u._13*u._13),l=Math.sqrt(u._21*u._21+u._22*u._22+u._23*u._23),r=Math.sqrt(u._31*u._31+u._32*u._32+u._33*u._33),o=(u._11*(u._22*u._33-u._23*u._32)+u._12*(u._23*u._31-u._21*u._33)+u._13*(u._21*u._32-u._22*u._31)<0&&(h*=-1,l*=-1,r*=-1),this.r*=Math.abs(Math.max(Math.max(h,l),r)),e.hasSphere(this));return this.x=n,this.y=i,this.z=s,this.r=a,o},__class__:An}),(i["h3d.col.TransformCollider"]=xn).__name__="h3d.col.TransformCollider",xn.__super__=un,xn.prototype=e(un.prototype,{set_mat:function(e){return this.mat=e,this.invMat.initInverse(e),e},rayIntersection:function(e,t){var n=xn.TMP_RAY,i=(xn.TMP_RAY=null,n.px=e.px,n.py=e.py,n.pz=e.pz,n.lx=e.lx,n.ly=e.ly,n.lz=e.lz,this.invMat),s=e.px,a=e.py,l=e.pz,r=s=null==s?0:s,o=a=null==a?0:a,u=l=null==l?0:l,h=o=null==o?0:o,c=u=null==u?0:u,_=(p=r=null==r?0:r)*i._12+h*i._22+c*i._32+i._42,d=p*i._13+h*i._23+c*i._33+i._43,p=p*i._11+h*i._21+c*i._31+i._41,h=_,c=d,s=(e.px=p,e.py=h,e.pz=c,e.lx),p=o=null==(o=a=null==(a=e.ly)?0:a)?0:o,h=u=null==(u=l=null==(l=e.lz)?0:l)?0:u,_=(c=r=null==(r=s=null==s?0:s)?0:r)*i._12+p*i._22+h*i._32,d=c*i._13+p*i._23+h*i._33,c=c*i._11+p*i._21+h*i._31,p=_,h=d,c=(e.lx=c,e.ly=p,e.lz=h,e.normalize(),this.collider.rayIntersection(e,t));return c<0?(e.px=n.px,e.py=n.py,e.pz=n.pz,e.lx=n.lx,e.ly=n.ly,e.lz=n.lz,xn.TMP_RAY=n,c):(s=e.px+c*e.lx,p=o=null==(o=a=null==(a=e.py+c*e.ly)?0:a)?0:o,h=u=null==(u=l=null==(l=e.pz+c*e.lz)?0:l)?0:u,_=(t=r=null==(r=s=null==s?0:s)?0:r)*(i=this.mat)._12+p*i._22+h*i._32+i._42,d=t*i._13+p*i._23+h*i._33+i._43,t=t*i._11+p*i._21+h*i._31+i._41,p=_,h=d,e.px=n.px,e.py=n.py,e.pz=n.pz,e.lx=n.lx,e.ly=n.ly,e.lz=n.lz,xn.TMP_RAY=n,a=t-e.px,o=p-e.py,null==(l=c=null==(c=h-e.pz)?0:c)&&(l=0),Math.sqrt(a*a+o*o+l*l))},contains:function(e){var t=e,n=t.x,i=t.y,s=t.z,a=n=null==n?0:n,l=i=null==i?0:i,r=s=null==s?0:s,s=(null==s&&(r=0),null==i&&(l=0),null==n&&(a=0),this.invMat),i=e.x*s._12+e.y*s._22+e.z*s._32+s._42,n=e.x*s._13+e.y*s._23+e.z*s._33+s._43,s=(e.x=e.x*s._11+e.y*s._21+e.z*s._31+s._41,e.y=i,e.z=n,this.collider.contains(e));return(t=e).x=a,t.y=l,t.z=r,s},inFrustum:function(e,t){var n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C;return null==t?this.collider.inFrustum(e,this.mat):(s=this.mat,a=t._11,r=t._21,o=t._22,u=t._23,h=t._31,c=t._32,_=t._33,d=t._41,p=t._42,m=t._43,g=s._11,f=s._12,A=s._13,w=s._22,y=s._23,v=s._32,C=s._33,(i=n=xn.TMP_MAT)._11=a*g+(l=t._12)*(x=s._21)+(t=t._13)*(b=s._31),i._12=a*f+l*w+t*v,i._13=a*A+l*y+t*C,i._14=0,i._21=r*g+o*x+u*b,i._22=r*f+o*w+u*v,i._23=r*A+o*y+u*C,i._24=0,i._31=h*g+c*x+_*b,i._32=h*f+c*w+_*v,i._33=h*A+c*y+_*C,i._34=0,i._41=d*g+p*x+m*b+s._41,i._42=d*f+p*w+m*v+s._42,i._43=d*A+p*y+m*C+s._43,i._44=1,this.collider.inFrustum(e,n))},__class__:xn,__properties__:{set_mat:"set_mat"}}),fe["h3d.impl.Feature"]={__ename__:!0,__constructs__:null,StandardDerivatives:{_hx_name:"StandardDerivatives",_hx_index:0,__enum__:"h3d.impl.Feature",toString:o},FloatTextures:{_hx_name:"FloatTextures",_hx_index:1,__enum__:"h3d.impl.Feature",toString:o},AllocDepthBuffer:{_hx_name:"AllocDepthBuffer",_hx_index:2,__enum__:"h3d.impl.Feature",toString:o},HardwareAccelerated:{_hx_name:"HardwareAccelerated",_hx_index:3,__enum__:"h3d.impl.Feature",toString:o},MultipleRenderTargets:{_hx_name:"MultipleRenderTargets",_hx_index:4,__enum__:"h3d.impl.Feature",toString:o},Queries:{_hx_name:"Queries",_hx_index:5,__enum__:"h3d.impl.Feature",toString:o},SRGBTextures:{_hx_name:"SRGBTextures",_hx_index:6,__enum__:"h3d.impl.Feature",toString:o},ShaderModel3:{_hx_name:"ShaderModel3",_hx_index:7,__enum__:"h3d.impl.Feature",toString:o},BottomLeftCoords:{_hx_name:"BottomLeftCoords",_hx_index:8,__enum__:"h3d.impl.Feature",toString:o},Wireframe:{_hx_name:"Wireframe",_hx_index:9,__enum__:"h3d.impl.Feature",toString:o},InstancedRendering:{_hx_name:"InstancedRendering",_hx_index:10,__enum__:"h3d.impl.Feature",toString:o}}),Zr=(Yr.__constructs__=[Yr.StandardDerivatives,Yr.FloatTextures,Yr.AllocDepthBuffer,Yr.HardwareAccelerated,Yr.MultipleRenderTargets,Yr.Queries,Yr.SRGBTextures,Yr.ShaderModel3,Yr.BottomLeftCoords,Yr.Wireframe,Yr.InstancedRendering],Yr.__empty_constructs__=[Yr.StandardDerivatives,Yr.FloatTextures,Yr.AllocDepthBuffer,Yr.HardwareAccelerated,Yr.MultipleRenderTargets,Yr.Queries,Yr.SRGBTextures,Yr.ShaderModel3,Yr.BottomLeftCoords,Yr.Wireframe,Yr.InstancedRendering],fe["h3d.impl.RenderFlag"]={__ename__:!0,__constructs__:null,CameraHandness:{_hx_name:"CameraHandness",_hx_index:0,__enum__:"h3d.impl.RenderFlag",toString:o}}),Xr=(Zr.__constructs__=[Zr.CameraHandness],Zr.__empty_constructs__=[Zr.CameraHandness],(i["h3d.impl.Driver"]=wn).__name__="h3d.impl.Driver",wn.prototype={hasFeature:function(e){return!1},setRenderFlag:function(e,t){},isSupportedFormat:function(e){return!1},isDisposed:function(){return!0},begin:function(e){},generateMipMaps:function(e){throw tl.thrown("Mipmaps auto generation is not supported on this platform")},clear:function(e,t,n){},init:function(e,t){},resize:function(e,t){},selectShader:function(e){return!1},selectMaterial:function(e){},uploadShaderBuffers:function(e,t){},flushShaderBuffers:function(){},selectBuffer:function(e){},selectMultiBuffers:function(e,t){},draw:function(e,t,n){},drawInstanced:function(e,t){},setRenderZone:function(e,t,n,i){},setRenderTarget:function(e,t,n,i){null==i&&(i=Qr.ReadWrite),null==n&&(n=0)},setRenderTargets:function(e,t){null==t&&Qr.ReadWrite},setDepth:function(e){},allocDepthBuffer:function(e){return null},getDefaultDepthBuffer:function(){return null},end:function(){},setDebug:function(e){},allocTexture:function(e){return null},allocBuffer:function(e){return null},disposeTexture:function(e){},disposeBuffer:function(e){},uploadIndexData:function(e,t,n,i,s){},uploadBufferData:function(e,t,n,i,s){},uploadBufferBytes:function(e,t,n,i,s){},uploadTextureBitmap:function(e,t,n,i){},uploadTexturePixels:function(e,t,n,i){},copyTexture:function(e,t){return!1},__class__:wn},(i["h3d.impl._GlDriver.CompiledShader"]=yn).__name__="h3d.impl._GlDriver.CompiledShader",yn.prototype={__class__:yn},(i["h3d.impl._GlDriver.CompiledAttribute"]=bn).__name__="h3d.impl._GlDriver.CompiledAttribute",bn.prototype={__class__:bn},(i["h3d.impl._GlDriver.CompiledProgram"]=vn).__name__="h3d.impl._GlDriver.CompiledProgram",vn.prototype={__class__:vn},function(e){null==e&&(e=0),this.features=new PA,this.maxCompressedTexturesSupport=0,this.rightHanded=!1,this.firstShader=!0,this.boundTextures=[],this.curTargets=[];var t=[],t=(t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),this.currentDivisor=t,this.curColorMask=-1,this.lastActiveIndex=0,this.curStEnabled=!1,this.curStMaskBits=-1,this.curStOpBits=-1,this.curMatBits=-1,this.maxIdxCurAttribs=0,this.curAttribs=[],wn.call(this),this.canvas=r0.getInstance().canvas,{alpha:!1,stencil:!0,antialias:0<e});if(Xr.ALLOW_WEBGL2&&(this.gl=this.canvas.getContext("webgl2",t)),null==this.gl&&(this.gl=Mw.getContextWebGL(this.canvas,t)),null==this.gl)throw tl.thrown("Could not acquire GL context");"undefined"!=typeof WebGLDebugUtils&&(this.gl=WebGLDebugUtils.makeDebugContext(this.gl),this.glDebug=!0),this.commonFB=this.gl.createFramebuffer(),this.programs=new Je,this.defStencil=new co,this.frame=l0.frameCount;var e=this.gl.getParameter(7938),t=((t=new ot("ES ([0-9]+\\.[0-9]+)","")).match(e)&&(this.glES=parseFloat(t.matched(1))),new ot("[0-9]+\\.[0-9]+","")),e=this.gl.getParameter(35724);t.match(e)&&(this.glES=parseFloat(t.matched(0)),this.shaderVersion=Math.round(100*parseFloat(t.matched(0)))),this.drawMode=4,this.makeFeatures(),this.hasFeature(Yr.InstancedRendering)&&this.glES<3&&(e=this.gl.getExtension("ANGLE_instanced_arrays"),this.gl.vertexAttribDivisor=Cn(e,e.vertexAttribDivisorANGLE),this.gl.drawElementsInstanced=Cn(e,e.drawElementsInstancedANGLE)),Sw.UNROLL_LOOPS=!this.hasFeature(Yr.ShaderModel3),this.gl.pixelStorei(3333,1),this.gl.pixelStorei(3317,1)}),qr=((i["h3d.impl.GlDriver"]=Xr).__name__="h3d.impl.GlDriver",Xr.__super__=wn,Xr.prototype=e(wn.prototype,{setRenderFlag:function(e,t){this.rightHanded=0<t},setDebug:function(e){this.debug=e},begin:function(e){this.frame=e,this.resetStream(),this.gl.useProgram(null),this.curShader=null,this.curBuffer=null},makeCompiler:function(){var e=new pw;return e.glES=this.glES,e.version=this.shaderVersion,e.intelDriverFix=this.isIntelGpu,e},getDriverName:function(e){var t=this.gl.getParameter(7937);return e?t+=" GLv"+el.string(this.gl.getParameter(7938)):t=t.split("/").shift(),"OpenGL "+(t=t.split("WebGL ").join(""))},compileShader:function(e,t){var n;switch(t.kind._hx_index){case 0:n=35633;break;case 1:n=35632;break;case 4:throw tl.thrown("Compute shader is not supported");default:throw tl.thrown("assert")}var i=this.gl.createShader(n);if(null==t.code&&(t.code=e.run(t.data),t.data.funs=null),this.gl.shaderSource(i,t.code),this.gl.compileShader(i),1==this.gl.getShaderParameter(i,35713))return new yn(i,t.kind,t);for(var e=this.gl.getShaderInfoLog(i),i=el.parseInt(Jn.substr(e,9,null)),i=null==(i=null==i?null:t.code.split("\n")[i-1])?"":"("+Ae.trim(i)+")",s=t.code.split("\n"),a=0,l=s.length;a<l;){var r=a++;s[r]=1+r+"\t"+s[r]}throw tl.thrown("An error occurred compiling the shaders: "+e+i+"\n\n"+s.join("\n"))},initShader:function(e,t,n,i){var s;switch(t.kind._hx_index){case 0:s="vertex";break;case 1:s="fragment";break;default:s="compute"}t.globals=this.gl.getUniformLocation(e.p,s+"Globals"),t.params=this.gl.getUniformLocation(e.p,s+"Params"),t.textures=[];for(var a=0,l=null,r=0,o="",u=n.textures;null!=u;){var h=u.type,c=1;switch(h._hx_index){case 15:0==(x=h.size)._hx_index&&(h=h.t,c=x.v);break;case 17:h=Le.TSampler(q0.T2D,!1)}if(null==l||!U.enumEq(h,l)){switch((l=h)._hx_index){case 10:var _=h.dim,d=h.isArray;switch(_._hx_index){case 1:r=d?35866:3553;break;case 2:if(0!=d)throw tl.thrown("Texture not supported "+el.string(h));r=32879;break;case 3:if(0!=d)throw tl.thrown("Texture not supported "+el.string(h));r=34067;break;default:throw tl.thrown("Texture not supported "+el.string(h))}o="Textures"+(_==q0.T2D?"":Jn.substr(fe[_.__enum__].__constructs__[_._hx_index]._hx_name,1,null))+(d?"Array":"");break;case 11:throw tl.thrown("Texture not supported "+el.string(h));default:throw tl.thrown("Unsupported texture type "+el.string(h))}a=0}for(var p=0,m=c;p<m;){++p;var g=this.gl.getUniformLocation(e.p,s+o+"["+a+"]");if(null==g)throw tl.thrown("Texture "+i.spec.instances[u.instance].shader.data.name+"."+u.name+" is missing from generated shader");t.textures.push({u:g,t:l,mode:r}),++a}u=u.next}if(0<n.bufferCount){t.bufferTypes=[];for(var f,A=t.shader.buffers;null!=A;){if(16!=(x=A.type)._hx_index)throw tl.thrown("assert");f=x.kind,t.bufferTypes.push(f),A=A.next}for(var x=[],_=0,d=n.bufferCount;_<d;){var w,y=_++;switch(t.bufferTypes[y]._hx_index){case 0:w=this.gl.getUniformBlockIndex(e.p,(n.kind==iw.Vertex?"vertex_":"")+"uniform_buffer"+y);break;case 1:throw tl.thrown("Storage buffer not supported in WebGL");case 2:throw tl.thrown("RW buffer not supported in WebGL");default:throw tl.thrown("assert")}x.push(w)}t.buffers=x;for(var b=0,x=(t.kind==iw.Fragment&&(b=i.vertex.bufferCount),0),_=n.bufferCount;x<_;){y=x++;switch(t.bufferTypes[y]._hx_index){case 0:this.gl.uniformBlockBinding(e.p,t.buffers[y],y+b);break;case 1:case 2:break;default:throw tl.thrown("assert")}}}},selectShader:function(e){if(null==(t=this.programs.h[e.id])){var t=new vn,n=this.makeCompiler(),i=(t.vertex=this.compileShader(n,e.vertex),null!=e.fragment&&(t.fragment=this.compileShader(n,e.fragment)),t.p=this.gl.createProgram(),this.gl.attachShader(t.p,t.vertex.s),null!=t.fragment&&this.gl.attachShader(t.p,t.fragment.s),null);try{this.gl.linkProgram(t.p),1!=this.gl.getProgramParameter(t.p,35714)&&(i=this.gl.getProgramInfoLog(t.p))}catch(a){throw CA.lastError=a,tl.thrown("Shader linkage error: "+el.string(tl.caught(a).unwrap())+" ("+this.getDriverName(!1)+")")}if(this.gl.deleteShader(t.vertex.s),null!=t.fragment&&this.gl.deleteShader(t.fragment.s),null!=i)throw this.gl.deleteProgram(t.p),tl.thrown("Program linkage failure: "+i+"\nVertex=\n"+e.vertex.code+(null==e.fragment?"":"\n\nFragment=\n"+e.fragment.code));this.firstShader=!1,this.initShader(t,t.vertex,e.vertex,e),null!=t.fragment&&this.initShader(t,t.fragment,e.fragment,e),t.attribs=[];for(var s=[],a=t.hasAttribIndex=0,l=e.vertex.data.vars;a<l.length;){var r=l[a];if(++a,1==r.kind._hx_index){var o=Nx.fromHXSL(r.type),u=this.gl.getAttribLocation(t.p,n.varNames.h.hasOwnProperty(r.id)?n.varNames.h[r.id]:r.name);if(!(u<0)){if(32<=u)throw tl.thrown("assert");var h=new bn,u=(h.type=5126,h.index=u,h.size=o==nl.__cast(9,A1)?1:o,r.type);if(9==u._hx_index&&(h.type=5120,h.size=u.size),h.divisor=0,null!=r.qualifiers)for(var c=0,_=r.qualifiers;c<_.length;){var d=_[c];++c,9==d._hx_index&&(h.divisor=d.v)}t.attribs.push(h),t.hasAttribIndex|=1<<h.index,s.push(new Gx(r.name,o,0))}}}t.format=Lx.make(s),this.programs.h[e.id]=t}return this.curShader!=t&&(this.setProgram(t),!0)},setProgram:function(e){this.gl.useProgram(e.p);for(var t=0,n=e.attribs;t<n.length;){var i=n[t];++t,this.curAttribs[i.index]||(this.gl.enableVertexAttribArray(i.index),this.curAttribs[i.index]=!0,this.maxIdxCurAttribs<i.index&&(this.maxIdxCurAttribs=i.index))}for(var s=0,t=0,n=this.maxIdxCurAttribs+1;t<n;){var a=t++;this.curAttribs[a]&&0==(e.hasAttribIndex&1<<a)?(this.gl.disableVertexAttribArray(a),this.curAttribs[a]=!1):this.curAttribs[a]&&(s=a)}this.maxIdxCurAttribs=s,this.curShader=e,this.curBuffer=null;for(t=0,n=this.boundTextures.length;t<n;)this.boundTextures[t++]=null},uploadShaderBuffers:function(e,t){this.uploadBuffer(e,this.curShader.vertex,e.vertex,t),null!=this.curShader.fragment&&this.uploadBuffer(e,this.curShader.fragment,e.fragment,t)},uploadBuffer:function(e,t,n,i){switch(i){case 0:null!=t.globals&&this.gl.uniform4fv(t.globals,n.globals.subarray(0,4*t.shader.globalsSize));break;case 1:null!=t.params&&this.gl.uniform4fv(t.params,n.params.subarray(0,4*t.shader.paramsSize));break;case 2:for(var s=0,a=t.textures.length;s<a;){var l=s++,r=n.tex[l],o=t.textures[l];if(null==r||null==r.t&&(r.isDepth()||null==r.realloc)){var u=o.t;if(10!=u._hx_index)throw tl.thrown("Missing texture");var h=u.isArray;switch(u.dim._hx_index){case 2:if(0!=h)throw tl.thrown("Missing texture");r=po.default3DTexture();break;case 3:if(0!=h)throw tl.thrown("Missing texture");r=_o.defaultCubeTexture();break;default:if(0!=h)throw tl.thrown("Missing texture");var c=oo.loadingTextureColor,r=_o.fromColor(c,(c>>>24)/255)}}if(null!=r&&null==r.t&&null!=r.realloc){u=this.curShader;if(r.alloc(),r.realloc(),this.curShader!=u)return this.setProgram(u),this.uploadShaderBuffers(e,0),this.uploadShaderBuffers(e,1),void this.uploadShaderBuffers(e,2)}if(r.set_lastFrame(this.frame),null!=o.u){var _=t.kind==iw.Fragment?this.curShader.vertex.textures.length+l:l;if(this.boundTextures[_]!=r.t){this.boundTextures[_]=r.t;var d=this.getBindType(r);if(d!=o.mode)throw tl.thrown("Texture format mismatch: "+el.string(r)+" should be "+el.string(o.t));this.gl.activeTexture(33984+_),this.gl.uniform1i(o.u,_),this.gl.bindTexture(d,r.t.t),this.lastActiveIndex=_}var d=r.mipMap._hx_index,_=r.filter._hx_index,p=r.wrap._hx_index,m=d|_<<3|p<<6;m!=r.t.bits&&(r.t.bits=m,m=Xr.TFILTERS[d][_],_=o.mode,this.gl.texParameteri(_,10240,m[0]),this.gl.texParameteri(_,10241,m[1]),this.gl.texParameteri(_,34892,0),m=Xr.TWRAP[p],this.gl.texParameteri(_,10242,m),this.gl.texParameteri(_,10243,m),this.gl.texParameteri(_,32882,m)),r.t.startMip!=r.startingMip&&(this.gl.texParameteri(o.mode,33084,r.startingMip),r.t.startMip=r.startingMip)}}break;case 3:if(null!=t.buffers)for(var g=0,s=(t.kind==iw.Fragment&&null!=this.curShader.vertex.buffers&&(g=this.curShader.vertex.buffers.length),0),a=t.buffers.length;s<a;){l=s++;switch(t.bufferTypes[l]._hx_index){case 0:this.gl.bindBufferBase(35345,l+g,n.buffers[l].vbuf);break;case 1:this.gl.bindBufferBase(37074,l+g,n.buffers[l].vbuf);break;case 2:if(0==(8&n.buffers[l].flags))throw tl.thrown("Buffer was allocated without ReadWriteBuffer flag");this.gl.bindBufferBase(37074,l+g,n.buffers[l].vbuf);break;default:throw tl.thrown("assert")}}}},selectMaterial:function(e){var t=e.bits;if(null==this.curTarget==this.rightHanded)switch(e.culling._hx_index){case 1:t=-4&t|2;break;case 2:t=-4&t|1}if(this.selectMaterialBits(t),this.curColorMask!=e.colorMask){var n=e.colorMask;if(this.gl.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n)),0<n>>4)throw tl.thrown("GL ColorMaski support requires hlsdl 1.14+");this.curColorMask=n}n=this.defStencil;null==e.stencil?this.curStEnabled&&(this.gl.disable(2960),this.curStEnabled=!1):(n=e.stencil,this.curStEnabled||(this.gl.enable(2960),this.curStEnabled=!0)),this.selectStencilBits(n.opBits,n.maskBits)},selectMaterialBits:function(e){var t,n,i,s,a=e^this.curMatBits;0!=(a=this.curMatBits<0?-1:a)&&(this.drawMode=0!=(536870912&e)?3:4,0!=(3&a)&&(0==(i=3&e)?this.gl.disable(2884):((this.curMatBits<0||0==(3&this.curMatBits))&&this.gl.enable(2884),this.gl.cullFace(Xr.FACES[i]))),0!=(8388480&a)&&(i=e>>11&15,t=e>>19&15,(n=e>>7&15)==(s=e>>15&15)&&i==t?0==n&&1==i?this.gl.disable(3042):((this.curMatBits<0||0==(this.curMatBits>>7&15)&&1==(this.curMatBits>>11&15))&&this.gl.enable(3042),this.gl.blendFunc(Xr.BLEND[n],Xr.BLEND[i])):((this.curMatBits<0||0==(this.curMatBits>>7&15)&&1==(this.curMatBits>>11&15))&&this.gl.enable(3042),this.gl.blendFuncSeparate(Xr.BLEND[n],Xr.BLEND[i],Xr.BLEND[s],Xr.BLEND[t]))),0!=(528482304&a)&&((n=e>>23&7)==(i=e>>26&7)?this.gl.blendEquation(Xr.OP[n]):this.gl.blendEquationSeparate(Xr.OP[n],Xr.OP[i])),0!=(4&a)&&this.gl.depthMask(0!=(e>>2&1)),0!=(112&a)&&(0==(s=e>>4&7)?this.gl.disable(2929):((this.curMatBits<0||0==(this.curMatBits>>4&7))&&this.gl.enable(2929),this.gl.depthFunc(Xr.COMPARE[s]))),this.curMatBits=e)},selectStencilBits:function(e,t){var n=e^this.curStOpBits,i=t^this.curStMaskBits;0!=(n|i)&&(0!=(4088&n)&&this.gl.stencilOpSeparate(Xr.FACES[2],Xr.STENCIL_OP[e>>6&7],Xr.STENCIL_OP[e>>9&7],Xr.STENCIL_OP[e>>3&7]),0!=(16744448&n)&&this.gl.stencilOpSeparate(Xr.FACES[1],Xr.STENCIL_OP[e>>18&7],Xr.STENCIL_OP[e>>21&7],Xr.STENCIL_OP[e>>15&7]),0!=(7&n|16711935&i)&&this.gl.stencilFuncSeparate(Xr.FACES[2],Xr.COMPARE[7&e],t>>16&255,255&t),0!=(28672&n|16711935&i)&&this.gl.stencilFuncSeparate(Xr.FACES[1],Xr.COMPARE[e>>12&7],t>>16&255,255&t),0!=(65280&i)&&(this.gl.stencilMaskSeparate(Xr.FACES[2],n=t>>8&255),this.gl.stencilMaskSeparate(Xr.FACES[1],n)),this.curStOpBits=e,this.curStMaskBits=t)},clear:function(e,t,n){var i=0;null!=e&&(this.gl.colorMask(!0,!0,!0,!0),this.curColorMask=15,this.gl.clearColor(e.x,e.y,e.z,e.w),i=16384),null!=t&&(this.gl.depthMask(!0),0<=this.curMatBits&&(this.curMatBits|=4),this.gl.clearDepth(t),i|=256),null!=n&&(this.selectStencilBits(this.defStencil.opBits,this.defStencil.maskBits),this.gl.clearStencil(n),i|=1024),0!=i&&this.gl.clear(i),null!=this.curTarget&&(this.curTarget.flags|=256)},resize:function(e,t){var n;""==this.canvas.style.width&&(n=e/window.devicePixelRatio|0,this.canvas.style.width=n+"px",this.canvas.style.height=(n=t/window.devicePixelRatio|0)+"px"),this.canvas.width=e,this.canvas.height=t,this.bufferWidth=e,this.bufferHeight=t,this.gl.viewport(0,0,e,t),null!=this.defaultDepth&&(this.disposeDepthBuffer(this.defaultDepth),this.defaultDepth.width=this.bufferWidth,this.defaultDepth.height=this.bufferHeight,this.defaultDepth.t=this.allocDepthBuffer(this.defaultDepth))},getChannels:function(e){switch(e.internalFmt){case 6407:return 6407;case 6408:case 32857:return 6408;case 6403:case 33321:case 33322:case 33325:case 33326:return 6403;case 33319:case 33323:case 33324:case 33327:case 33328:return 33319;case 34836:case 34842:return 6408;case 35898:return 6407;case 35904:case 35905:return 6407;case 32852:case 34837:case 34843:case 36196:case 36495:return 6407;case 32859:case 33777:case 33778:case 33779:case 36492:case 37808:return 6408;default:throw tl.thrown("Invalid format "+e.internalFmt)}},isSupportedFormat:function(e){switch(e._hx_index){case 2:return!0;case 3:case 4:return this.hasFeature(Yr.FloatTextures);case 14:case 15:return this.hasFeature(Yr.SRGBTextures);case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 16:case 17:return 3<=this.glES;case 24:return e.v<=this.maxCompressedTexturesSupport;default:return!1}},getBindType:function(e){return 0!=(32768&e.flags)?32879:0!=(2&e.flags)?34067:0!=(2048&e.flags)?35866:3553},allocTexture:function(e){Xr.outOfMemoryCheck&&this.gl.getError();var t=this.gl.createTexture(),n=this.getBindType(e),i={t:t,width:e.width,height:e.height,internalFmt:6408,pixelFmt:5121,bits:-1,bind:n,bias:0,startMip:e.startingMip},s=e.format;switch(s._hx_index){case 1:i.internalFmt=32856;break;case 2:break;case 3:if(!this.hasFeature(Yr.FloatTextures))throw tl.thrown("Unsupported texture format "+el.string(e.format));i.pixelFmt=5131,i.internalFmt=34842;break;case 4:if(!this.hasFeature(Yr.FloatTextures))throw tl.thrown("Unsupported texture format "+el.string(e.format));i.internalFmt=34836,i.pixelFmt=5126;break;case 5:i.internalFmt=33321;break;case 6:i.internalFmt=33325,i.pixelFmt=5131;break;case 7:i.internalFmt=33326,i.pixelFmt=5126;break;case 8:i.internalFmt=33323;break;case 9:i.internalFmt=33327,i.pixelFmt=5131;break;case 10:i.internalFmt=33328,i.pixelFmt=5126;break;case 11:i.internalFmt=6407;break;case 12:i.internalFmt=34843,i.pixelFmt=5131;break;case 13:i.internalFmt=34837,i.pixelFmt=5126;break;case 14:i.internalFmt=35905;break;case 16:i.internalFmt=32857,i.pixelFmt=33640;break;case 17:i.internalFmt=35898,i.pixelFmt=35899;break;case 18:i.internalFmt=33322,i.pixelFmt=5123;break;case 19:i.internalFmt=33324,i.pixelFmt=5123;break;case 20:i.internalFmt=32852,i.pixelFmt=5123;break;case 21:i.internalFmt=32859,i.pixelFmt=5123;break;case 22:if(0!=(3&e.width)||0!=(3&e.height))throw tl.thrown("Compressed texture "+el.string(e)+" has size "+e.width+"x"+e.height+" - must be a multiple of 4");if(10!=s.v)throw tl.thrown("Unsupported texture format "+el.string(e.format));i.internalFmt=37808;break;case 23:if(0!=(3&e.width)||0!=(3&e.height))throw tl.thrown("Compressed texture "+el.string(e)+" has size "+e.width+"x"+e.height+" - must be a multiple of 4");switch(s.v){case 0:i.internalFmt=36196;break;case 1:i.internalFmt=37496}break;case 24:var a=s.v;if(!(a<=this.maxCompressedTexturesSupport))throw tl.thrown("Unsupported texture format "+el.string(e.format));if(0!=(3&e.width)||0!=(3&e.height))throw tl.thrown("Compressed texture "+el.string(e)+" has size "+e.width+"x"+e.height+" - must be a multiple of 4");switch(a){case 1:i.internalFmt=33777;break;case 2:i.internalFmt=33778;break;case 3:i.internalFmt=33779;break;case 6:i.internalFmt=36495;break;case 7:i.internalFmt=36492;break;default:throw tl.thrown("Unsupported texture format "+el.string(e.format))}break;default:throw tl.thrown("Unsupported texture format "+el.string(e.format))}if(5123==i.pixelFmt&&!this.has16Bits)throw tl.thrown("16 bit textures requires EXT_texture_norm16 extension");e.set_lastFrame(this.frame),e.flags&=-257,this.gl.bindTexture(n,i.t);var l,t=!1,r=(this.gl.texParameteri(n,33084,e.startingMip),this.gl.texParameteri(n,33085,e.get_mipLevels()-1),6408==i.internalFmt?32856:i.internalFmt);if(0==(2048&e.flags)&&0==(32768&e.flags)||0!=(2&e.flags)){if(this.gl.texStorage2D(n,e.get_mipLevels(),r,i.width,i.height),Xr.outOfMemoryCheck)if(1285==(l=this.gl.getError()))t=!0;else if(0!=l)throw tl.thrown("Failed to alloc texture "+el.string(e.format)+"(error "+l+")")}else if(this.gl.texStorage3D(n,e.get_mipLevels(),r,i.width,i.height,e.get_layerCount()),Xr.outOfMemoryCheck)if(1285==(l=this.gl.getError()))t=!0;else if(0!=l)throw tl.thrown("Failed to alloc texture "+el.string(e.format)+"(error "+l+")");return this.restoreBind(),t?(this.gl.deleteTexture(i.t),null):i},restoreBind:function(){var e=this.boundTextures[this.lastActiveIndex];null==e?this.gl.bindTexture(3553,null):this.gl.bindTexture(e.bind,e.t)},allocDepthBuffer:function(e){var t={t:this.gl.createTexture(),width:e.width,height:e.height,internalFmt:6408,pixelFmt:5121,bits:-1,bind:3553,bias:0,startMip:0},n=6402;switch(e.format._hx_index){case 25:t.internalFmt=33189;break;case 26:if(!(3<=this.glES))throw tl.thrown("Unsupported depth format "+el.string(e.format));t.internalFmt=6402;break;case 27:t.internalFmt=35056,t.pixelFmt=34042,n=34041;break;case 28:t.internalFmt=36012,t.pixelFmt=5126;break;default:throw tl.thrown("Unsupported depth format "+el.string(e.format))}return e.set_lastFrame(this.frame),e.flags&=-257,this.gl.bindTexture(t.bind,t.t),this.gl.texParameteri(t.bind,10241,9728),this.gl.texParameteri(t.bind,10240,9728),this.gl.texParameteri(t.bind,10242,33071),this.gl.texParameteri(t.bind,10243,33071),this.gl.texImage2D(t.bind,0,t.internalFmt,t.width,t.height,0,n,t.pixelFmt,null),this.restoreBind(),t},disposeDepthBuffer:function(e){null!=e.t&&null!=e.t.t&&(this.gl.deleteTexture(e.t.t),e.t=null)},getDefaultDepthBuffer:function(){return null==this.defaultDepth&&(this.defaultDepth=new _o(0,0,null,C.Depth24Stencil8),this.defaultDepth.name="defaultDepthBuffer",this.defaultDepth.width=this.bufferWidth,this.defaultDepth.height=this.bufferHeight,this.defaultDepth.t=this.allocDepthBuffer(this.defaultDepth)),this.defaultDepth},allocBuffer:function(e){Xr.outOfMemoryCheck&&this.gl.getError();var t=this.gl.createBuffer(),n=0!=(16&e.flags)?34963:34962;if(this.gl.bindBuffer(n,t),e.vertices*e.format.stride==0)throw tl.thrown("assert");this.gl.bufferData(n,e.vertices*e.format.strideBytes,0!=(1&e.flags)?35048:35044);var i=Xr.outOfMemoryCheck&&1285==this.gl.getError();return this.gl.bindBuffer(n,null),0!=(16&e.flags)&&(this.curIndexBuffer=null),i?(this.gl.deleteBuffer(t),null):t},disposeTexture:function(e){var t=e.t;if(null!=t){e.t=null;for(var n=0,i=this.boundTextures.length;n<i;){var s=n++;this.boundTextures[s]==t&&(this.boundTextures[s]=null)}this.gl.deleteTexture(t.t)}},disposeBuffer:function(e){this.gl.deleteBuffer(e.vbuf)},generateMipMaps:function(e){var t=this.getBindType(e);this.gl.bindTexture(t,e.t.t),this.gl.generateMipmap(t),this.restoreBind()},uploadTextureBitmap:function(e,t,n,i){var s;e.format!=C.RGBA||1!=e.get_layerCount()?(s=t.getPixels(),this.uploadTexturePixels(e,s,n,i),s.dispose()):(i=t.ctx,this.gl.bindTexture(3553,e.t.t),this.gl.texSubImage2D(3553,n,0,0,this.getChannels(e.t),e.t.pixelFmt,i.getImageData(0,0,t.ctx.canvas.width,t.ctx.canvas.height)),this.restoreBind())},resetStream:function(){},uploadTexturePixels:function(e,t,n,i){var s,a,l=3553,r=(0!=(2&e.flags)&&(l=Xr.CUBE_FACES[i]),0!=(2048&e.flags)?l=35866:0!=(32768&e.flags)&&(l=32879),this.getBindType(e)),o=(this.gl.bindTexture(r,e.t.t),t.convert(e.format),t.dataSize);switch(e.format._hx_index){case 4:case 7:case 10:case 13:s=new Float32Array(t.bytes.b.buffer,t.offset,o>>2);break;case 16:case 17:s=new Uint32Array(t.bytes.b.buffer,t.offset,o>>2);break;case 3:case 6:case 9:case 12:case 18:case 19:case 20:case 21:s=new Uint16Array(t.bytes.b.buffer,t.offset,o>>1);break;default:s=new Uint8Array(t.bytes.b.buffer,t.offset,o)}switch(e.format._hx_index){case 22:case 23:case 24:a=!0;break;default:a=!1}a?0!=(2048&e.flags)||0!=(32768&e.flags)?this.gl.compressedTexSubImage3D(l,n,0,0,i,t.width,t.height,1,e.t.internalFmt,s):this.gl.compressedTexSubImage2D(l,n,0,0,t.width,t.height,e.t.internalFmt,s):0!=(2048&e.flags)||0!=(32768&e.flags)?this.gl.texSubImage3D(l,n,0,0,i,t.width,t.height,1,this.getChannels(e.t),e.t.pixelFmt,s):this.gl.texSubImage2D(l,n,0,0,t.width,t.height,this.getChannels(e.t),e.t.pixelFmt,s),e.flags|=256,this.restoreBind()},uploadBufferData:function(e,t,n,i,s){var a=e.format.strideBytes,e=(this.gl.bindBuffer(34962,e.vbuf),new Float32Array(i.array.buffer,4*s,n*a>>2));this.gl.bufferSubData(34962,t*a,e),this.gl.bindBuffer(34962,null)},uploadBufferBytes:function(e,t,n,i,s){var a=e.format.strideBytes,l=0!=(16&e.flags)?34963:34962;this.gl.bindBuffer(l,e.vbuf),this.gl.bufferSubData(l,t*a,new Uint8Array(i.b.bufferValue,s,n*a)),this.gl.bindBuffer(l,null),0!=(16&e.flags)&&(this.curIndexBuffer=null)},uploadIndexData:function(e,t,n,i,s){var a=e.format.strideBytes>>1,e=(this.gl.bindBuffer(34963,e.vbuf),new Uint16Array(new Uint16Array(i).buffer,s<<a,n));this.gl.bufferSubData(34963,t<<a,e),this.gl.bindBuffer(34963,null),this.curIndexBuffer=null},selectBuffer:function(e){if(e!=this.curBuffer){if(null==this.curShader)throw tl.thrown("No shader selected");this.gl.bindBuffer(34962,e.vbuf);for(var t=(this.curBuffer=e).format.strideBytes,n=e.format.resolveMapping(this.curShader.format),i=this.curShader.attribs,s=0;s<i.length;){var a,l=i[s],r=n[s++],o=!1,u=this.gl,h=l.index,c=l.size;switch(7&r){case 0:a=l.type;break;case 1:a=5131;break;case 2:o=!0,a=5121;break;case 3:o=!0,a=5120}u.vertexAttribPointer(h,c,a,o,t,r>>16),this.currentDivisor[l.index]!=l.divisor&&(this.currentDivisor[l.index]=l.divisor,this.gl.vertexAttribDivisor(l.index,l.divisor))}}},selectMultiBuffers:function(e,t){for(var n=this.curShader.format,i=e.mappings[n.uid],s=i=null==i?e.makeMapping(n):i,a=this.curShader.attribs,l=0;l<a.length;){var r,o=a[l],u=s[l++],h=t[u>>3&255],c=(this.curBuffer!=h&&(this.gl.bindBuffer(34962,h.vbuf),this.curBuffer=h),!1),_=this.gl,d=o.index,p=o.size;switch(7&u){case 0:r=o.type;break;case 1:r=5131;break;case 2:c=!0,r=5121;break;case 3:c=!0,r=5120}_.vertexAttribPointer(d,p,r,c,h.format.strideBytes,u>>16),this.currentDivisor[o.index]!=o.divisor&&(this.currentDivisor[o.index]=o.divisor,this.gl.vertexAttribDivisor(o.index,o.divisor))}},draw:function(e,t,n){e!=this.curIndexBuffer&&(this.curIndexBuffer=e,this.gl.bindBuffer(34963,e.vbuf)),4==e.format.strideBytes?this.gl.drawElements(this.drawMode,3*n,5125,4*t):this.gl.drawElements(this.drawMode,3*n,5123,2*t)},drawInstanced:function(e,t){e!=this.curIndexBuffer&&(this.curIndexBuffer=e,this.gl.bindBuffer(34963,e.vbuf)),i=4==e.format.strideBytes?(n=5125,4):(n=5123,2);var n,i,s=t.data;if(null!=s)for(var a=0,l=0,r=s.length/3|0;l<r;)++l,this.gl.drawElementsInstanced(this.drawMode,s[a++],n,s[a++]*i,s[a++]);else this.gl.drawElementsInstanced(this.drawMode,t.indexCount,n,t.startIndex*i,t.commandCount)},end:function(){},isDisposed:function(){return this.gl.isContextLost()},setRenderZone:function(e,t,n,i){0==e&&0==t&&n<0&&i<0?this.gl.disable(3089):(this.gl.enable(3089),null==this.curTarget&&(t=this.bufferHeight-(t+i)),this.gl.scissor(e,t,n,i))},setDrawBuffers:function(e){3<=this.glES?this.gl.drawBuffers(Xr.CBUFFERS[e]):null!=this.mrtExt&&this.mrtExt.drawBuffersWEBGL(Xr.CBUFFERS[e])},unbindTargets:function(){if(null!=this.curTarget&&1<this.numTargets){for(;1<this.numTargets;)this.gl.framebufferTexture2D(36160,36064+--this.numTargets,3553,null,0),this.curTargets[this.numTargets]=null;this.setDrawBuffers(1)}},setRenderTarget:function(e,t,n,i){if(null==i&&(i=Qr.ReadWrite),null==n&&(n=0),null==t&&(t=0),this.unbindTargets(),null==(this.curTarget=e))this.gl.bindFramebuffer(36160,null),this.gl.viewport(0,0,this.bufferWidth,this.bufferHeight);else{if(null!=e.depthBuffer&&(e.depthBuffer.width!=e.width||e.depthBuffer.height!=e.height))throw tl.thrown("Invalid depth buffer size : does not match render target size");if(0<n&&1==this.glES)throw tl.thrown("Cannot render to mipLevel in WebGL1, use upload() instead");null==e.t&&e.alloc(),0!=(4&e.flags)&&0==(256&e.flags)&&(s=this.getBindType(e),this.gl.bindTexture(s,e.t.t),this.gl.generateMipmap(s),this.restoreBind()),e.set_lastFrame(this.frame),this.curTargetLayer=t,this.curTargetMip=n,this.gl.bindFramebuffer(36160,this.commonFB),0!=(2048&e.flags)||0!=(32768&e.flags)?this.gl.framebufferTextureLayer(36160,36064,e.t.t,n,t):this.gl.framebufferTexture2D(36160,36064,0!=(2&e.flags)?Xr.CUBE_FACES[t]:3553,e.t.t,n),null!=e.depthBuffer&&i!=Qr.NotBound?e.depthBuffer.hasStencil()&&e.depthBuffer.format==C.Depth24Stencil8?this.gl.framebufferTexture2D(36160,33306,3553,e.depthBuffer.t.t,0):(this.gl.framebufferTexture2D(36160,33306,3553,null,0),this.gl.framebufferTexture2D(36160,36096,3553,e.depthBuffer.t.t,0),this.gl.framebufferTexture2D(36160,36128,3553,e.depthBuffer.hasStencil()?e.depthBuffer.t.t:null,0)):(this.gl.framebufferTexture2D(36160,33306,3553,null,0),this.gl.framebufferTexture2D(36160,36096,3553,null,0),this.gl.framebufferTexture2D(36160,36128,3553,null,0));for(var s=e.width>>n,t=e.height>>n,a=(this.gl.viewport(0,0,s=0==s?1:s,t=0==t?1:t),0),l=this.boundTextures.length;a<l;)this.boundTextures[a++]=null;if(0==(256&e.flags)&&(e.flags|=256,this.clear(Xr.BLACK)),this.glDebug){i=this.gl.checkFramebufferStatus(36160);if(36053!=i)throw tl.thrown("Invalid frame buffer: "+i)}}},setRenderTargets:function(e,t){if(null==t&&(t=Qr.ReadWrite),this.unbindTargets(),this.setRenderTarget(e[0],null,null,t),!(e.length<2)){this.numTargets=e.length;for(var n=!1,i=1,s=e.length;i<s;){var a=i++,l=e[a];null==l.t&&l.alloc(),this.gl.framebufferTexture2D(36160,36064+a,3553,l.t.t,0),(this.curTargets[a]=l).set_lastFrame(this.frame),0==(256&l.flags)&&(l.flags|=256,n=!0)}this.setDrawBuffers(e.length),n&&this.clear(Xr.BLACK)}},setDepth:function(e){this.unbindTargets(),(this.curTarget=e).set_lastFrame(this.frame),this.curTargetLayer=0,this.curTargetMip=0,this.gl.bindFramebuffer(36160,this.commonFB),this.gl.framebufferTexture2D(36160,36064,3553,null,0),e.hasStencil()&&e.format==C.Depth24Stencil8?this.gl.framebufferTexture2D(36160,33306,3553,e.t.t,0):(this.gl.framebufferTexture2D(36160,33306,3553,null,0),this.gl.framebufferTexture2D(36160,36096,3553,e.t.t,0),this.gl.framebufferTexture2D(36160,36128,3553,e.hasStencil()?e.t.t:null,0));for(var t=e.width,e=e.height,n=(this.gl.viewport(0,0,t=0==t?1:t,e=0==e?1:e),0),i=this.boundTextures.length;n<i;)this.boundTextures[n++]=null;if(this.glDebug){t=this.gl.checkFramebufferStatus(36160);if(36053!=t)throw tl.thrown("Invalid frame buffer: "+t)}},init:function(e,t){var n,i;null==t&&(t=!1),"complete"==window.document.readyState?(n=e,SA.delay(function(){n(!1)},1)):(i=function(){window.removeEventListener("load",i),e(!1)},window.addEventListener("load",i))},hasFeature:function(e){return this.features.get(e)},checkTextureSupport:function(){function e(e){return null!=t.gl.getExtension(e)}var t=this;return{astc:e("WEBGL_compressed_texture_astc"),astcHDR:e("WEBGL_compressed_texture_astc")&&this.gl.getExtension("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1:!1,etc2:e("WEBGL_compressed_texture_etc"),dxt:e("WEBGL_compressed_texture_s3tc"),bptc:e("EXT_texture_compression_bptc")}},makeFeatures:function(){for(var e=0,t=Yr.__empty_constructs__.slice();e<t.length;){var n=t[e];++e,this.features.set(n,this.checkFeature(n))}this.textureSupport=this.checkTextureSupport(),this.maxCompressedTexturesSupport=(this.textureSupport.dxt||this.textureSupport.etc1||this.textureSupport.etc2||this.textureSupport.astc)&&null!=this.gl.getExtension("EXT_texture_compression_bptc")?7:3,this.glES<3&&this.gl.getExtension("WEBGL_depth_texture"),this.has16Bits=null!=this.gl.getExtension("EXT_texture_norm16")},checkFeature:function(e){switch(e._hx_index){case 0:return 3<=this.glES||null!=this.gl.getExtension("OES_standard_derivatives");case 1:return 3<=this.glES?null!=this.gl.getExtension("EXT_color_buffer_float")&&null!=this.gl.getExtension("OES_texture_float_linear"):null!=this.gl.getExtension("OES_texture_float")&&null!=this.gl.getExtension("OES_texture_float_linear")&&null!=this.gl.getExtension("OES_texture_half_float")&&null!=this.gl.getExtension("OES_texture_half_float_linear");case 4:return 3<=this.glES||null!=this.mrtExt||null!=(this.mrtExt=this.gl.getExtension("WEBGL_draw_buffers"));case 6:return 3<=this.glES||null!=this.gl.getExtension("EXT_sRGB");case 7:return 3<=this.glES;case 2:case 3:case 8:case 9:return!0;case 10:return 3<=this.glES||null!=this.gl.getExtension("ANGLE_instanced_arrays");default:return!1}},__class__:Xr}),(i["h3d.impl.InstanceBuffer"]=Sn).__name__="h3d.impl.InstanceBuffer",Sn.prototype={setCommand:function(e,t,n){null==n&&(n=0),this.commandCount=e,this.indexCount=t,this.triCount=e*t/3|0,this.startIndex=n},__class__:Sn},function(e){this.lastAutoDispose=0,this.autoDisposeCooldown=60,this.texMemory=0,this.usedMemory=0,this.driver=e}),Kr=((i["h3d.impl.MemoryManager"]=qr).__name__="h3d.impl.MemoryManager",qr.prototype={init:function(){this.textures=[],this.buffers=[],this.initIndexes()},initIndexes:function(){for(var e=new Array(0),t=0;t<65532;)e.push(t++);this.triIndexes16=Or.alloc(e);for(e=new Array(0),t=0;t<10922;){var n=t++<<2;e.push(n),e.push(1+n),e.push(2+n),e.push(2+n),e.push(1+n),e.push(3+n)}e.push(65532),this.quadIndexes16=Or.alloc(e)},garbage:function(){},getTriIndexes:function(e){if(e<=65532)return this.triIndexes16;if(null==this.triIndexes32||this.triIndexes32.vertices<e){for(var t=131072;t<e;)t<<=1;for(var n=new IA(new ArrayBuffer(t<<2)),i=0,s=t;i<s;){var a=i++;n.setInt32(a<<2,a)}null!=this.triIndexes32&&this.triIndexes32.dispose(),this.triIndexes32=Or._new(t,!0),this.triIndexes32.uploadBytes(n,0,t)}return this.triIndexes32},getQuadIndexes:function(e){var t=6*(e+3>>2);if(t<=65532)return this.quadIndexes16;if(null==this.quadIndexes32||this.quadIndexes32.vertices<e){for(var n=131072;n<t;)n<<=1;for(var i=new IA(new ArrayBuffer(n<<2)),s=0,a=0,l=n/6|0;a<l;){var r=a++<<2;i.setInt32(s++<<2,r),i.setInt32(s++<<2,1+r),i.setInt32(s++<<2,2+r),i.setInt32(s++<<2,2+r),i.setInt32(s++<<2,1+r),i.setInt32(s++<<2,3+r)}null!=this.quadIndexes32&&this.quadIndexes32.dispose(),this.quadIndexes32=Or._new(n,!0),this.quadIndexes32.uploadBytes(i,0,n)}return this.quadIndexes32},allocBuffer:function(e){if(null==e.vbuf){var t=e.vertices*e.format.strideBytes;if(0!=t){for(;6442450944<this.usedMemory+t||null==(e.vbuf=this.driver.allocBuffer(e));){if(this.driver.isDisposed())return;var n=this.usedMemory;if(this.garbage(),this.usedMemory==n)throw tl.thrown("Memory full ("+Math.ceil(n/1024)+" KB,"+this.buffers.length+" buffers)")}this.usedMemory+=t,this.buffers.push(e)}}},freeBuffer:function(e){null!=e.vbuf&&(this.driver.disposeBuffer(e),e.vbuf=null,Jn.remove(this.buffers,e))&&(this.usedMemory-=e.vertices*e.format.strideBytes)},memSize:function(e){if(0!=(4096&e.flags)&&0!=(512&e.flags))return 4;var t=e0.calcDataSize(e.width,e.height,e.format);if(0<e.get_mipLevels())for(var n=1,i=e.get_mipLevels();n<i;){var s=n++,a=e.width>>s,s=(0==a&&(a=1),e.height>>s);0==s&&(s=1),t+=e0.calcDataSize(a,s,e.format)}return t*e.get_layerCount()},cleanTextures:function(e){null==e&&(e=!0),this.textures.sort(Cn(this,this.sortByLRU));for(var t=0,n=this.textures;t<n.length;){var i=n[t];if(++t,null!=i.realloc&&(null!=i.t||!i.isDepth()&&null!=i.realloc)&&((e||i._lastFrame<l0.frameCount-3600)&&i._lastFrame!=_o.PREVENT_AUTO_DISPOSE))return i.dispose(),!0}return!1},sortByLRU:function(e,t){return e._lastFrame-t._lastFrame},deleteTexture:function(e){Jn.remove(this.textures,e)&&(this.driver.disposeTexture(e),this.texMemory-=this.memSize(e))},allocTexture:function(e){for(;;){var t=!0;if(l0.frameCount>this.lastAutoDispose+this.autoDisposeCooldown&&(t=this.cleanTextures(!1),this.lastAutoDispose=l0.frameCount),e.t=e.isDepth()?this.driver.allocDepthBuffer(e):this.driver.allocTexture(e),null!=e.t)break;if(this.driver.isDisposed())return;for(;this.cleanTextures(!1););if(!t&&!this.cleanTextures(!0))throw tl.thrown("Maximum texture memory reached")}this.textures.push(e),this.texMemory+=this.memSize(e)},onContextLost:function(){this.dispose(),this.initIndexes()},dispose:function(){null!=this.triIndexes16&&this.triIndexes16.dispose(),null!=this.quadIndexes16&&this.quadIndexes16.dispose(),null!=this.triIndexes32&&this.triIndexes32.dispose(),null!=this.quadIndexes32&&this.quadIndexes32.dispose(),this.triIndexes16=null,this.quadIndexes16=null,this.triIndexes32=null,this.quadIndexes32=null;for(var e=0,t=this.textures.slice();e<t.length;)t[e++].dispose();for(e=0,t=this.buffers.slice();e<t.length;)t[e++].dispose();this.buffers=[],this.textures=[],this.usedMemory=0,this.texMemory=0},__class__:qr},function(){wn.call(this)}),Jr=((i["h3d.impl.NullDriver"]=Kr).__name__="h3d.impl.NullDriver",Kr.__super__=wn,Kr.prototype=e(wn.prototype,{hasFeature:function(e){return!0},isSupportedFormat:function(e){return!0},isDisposed:function(){return!1},init:function(e,t){null==t&&(t=!1),e(!1)},selectShader:function(e){return this.cur!=e&&(this.cur=e,!0)},allocTexture:function(e){return{}},allocBuffer:function(e){return{}},__class__:Kr}),(i["h3d.impl.RendererFX"]=kn).__name__="h3d.impl.RendererFX",kn.__isInterface__=!0,kn.prototype={__class__:kn},function(){if(this.position=0,this.cache=[],this.defaultFormat=_o.nativeFormat,this.defaultDepthBuffer=_o.getDefaultDepth(),Jr.checkFlags<0){for(var e=0,t=[ro.Cube,ro.MipMapped,ro.ManualMipMapGen,ro.Dynamic,ro.IsArray],n=0;n<t.length;)e|=1<<t[n++]._hx_index;Jr.checkFlags=e}}),$r=((i["h3d.impl.TextureCache"]=Jr).__name__="h3d.impl.TextureCache",Jr.prototype={begin:function(){for(;this.cache.length>this.position;){var e=this.cache.pop();null!=e&&e.dispose()}this.position=0},lookupTarget:function(e,t,n,i,s){for(var a=this.cache[this.position],l=this.position+1,r=this.cache.length;l<r;){var o=l++,u=this.cache[o];if(null!=u&&(null!=u.t||!u.isDepth()&&null!=u.realloc)&&u.width==t&&u.height==n&&u.format==i){var h=0;if(null!=s)for(var c=0;c<s.length;)h|=1<<s[c++]._hx_index;if((u.flags&Jr.checkFlags)==(h&Jr.checkFlags))return this.cache[this.position]=u,this.cache[o]=a,u}}null!=a&&a.name==e&&(a.dispose(),a=null),-1==(s=null==s?[]:s).indexOf(ro.Target)&&s.push(ro.Target);e=new _o(t,n,s,i);return e.realloc=function(){},null!=a?this.cache.splice(this.position,0,e):this.cache[this.position]=e,e},allocTarget:function(e,t,n,i,s,a){null==i&&(i=!0);var l=this.cache[this.position],r=(null==s&&(s=this.defaultFormat),!1);if(null==l||null==l.t&&(l.isDepth()||null==l.realloc)||l.width!=t||l.height!=n||l.format!=s)r=!0;else{var o=0;if(null!=a)for(var u=0;u<a.length;)o|=1<<a[u++]._hx_index;r=(l.flags&Jr.checkFlags)!=(o&Jr.checkFlags)}return(l=r?this.lookupTarget(e,t,n,s,a):l).depthBuffer=i?this.defaultDepthBuffer:null,l.setName(e),this.position++,l},allocTileTarget:function(e,t,n,i){return null==n&&(n=!1),this.allocTarget(e,Math.ceil(t.width+t.x)-Math.floor(t.x),Math.ceil(t.height+t.y)-Math.floor(t.y),n,i)},dispose:function(){for(var e=0,t=this.cache;e<t.length;)t[e++].dispose();this.cache=[]},__class__:Jr},(i["hxd.impl.AnyProps"]=Mn).__name__="hxd.impl.AnyProps",Mn.prototype={set_props:function(e){return this.props=e,this.refreshProps(),e},getDefaultProps:function(e){return{}},refreshProps:function(){},__class__:Mn,__properties__:{set_props:"set_props"}},(i["h3d.mat.BaseMaterial"]=In).__name__="h3d.mat.BaseMaterial",In.__super__=Mn,In.prototype=e(Mn.prototype,{addPass:function(e){for(var t=null,n=this.passes;null!=n;)n=(t=n).nextPass;return null==t?this.passes=e:t.nextPass=e,e.nextPass=null,e},removePass:function(e){for(var t=null,n=this.passes;null!=n;){if(n==e)return null==t?this.passes=e.nextPass:t.nextPass=e.nextPass,!(e.nextPass=null);n=(t=n).nextPass}return!1},getPass:function(e){for(var t=this.passes;null!=t;){if(t.name==e)return t;t=t.nextPass}return null},clone:function(e){return(e=null==e?new In:e).passes.load(this.passes),e.name=this.name,e.set_props(this.props),e},__class__:In}),fe["h3d.mat.Face"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.mat.Face",toString:o},Back:{_hx_name:"Back",_hx_index:1,__enum__:"h3d.mat.Face",toString:o},Front:{_hx_name:"Front",_hx_index:2,__enum__:"h3d.mat.Face",toString:o},Both:{_hx_name:"Both",_hx_index:3,__enum__:"h3d.mat.Face",toString:o}}),eo=($r.__constructs__=[$r.None,$r.Back,$r.Front,$r.Both],$r.__empty_constructs__=[$r.None,$r.Back,$r.Front,$r.Both],fe["h3d.mat.Blend"]={__ename__:!0,__constructs__:null,One:{_hx_name:"One",_hx_index:0,__enum__:"h3d.mat.Blend",toString:o},Zero:{_hx_name:"Zero",_hx_index:1,__enum__:"h3d.mat.Blend",toString:o},SrcAlpha:{_hx_name:"SrcAlpha",_hx_index:2,__enum__:"h3d.mat.Blend",toString:o},SrcColor:{_hx_name:"SrcColor",_hx_index:3,__enum__:"h3d.mat.Blend",toString:o},DstAlpha:{_hx_name:"DstAlpha",_hx_index:4,__enum__:"h3d.mat.Blend",toString:o},DstColor:{_hx_name:"DstColor",_hx_index:5,__enum__:"h3d.mat.Blend",toString:o},OneMinusSrcAlpha:{_hx_name:"OneMinusSrcAlpha",_hx_index:6,__enum__:"h3d.mat.Blend",toString:o},OneMinusSrcColor:{_hx_name:"OneMinusSrcColor",_hx_index:7,__enum__:"h3d.mat.Blend",toString:o},OneMinusDstAlpha:{_hx_name:"OneMinusDstAlpha",_hx_index:8,__enum__:"h3d.mat.Blend",toString:o},OneMinusDstColor:{_hx_name:"OneMinusDstColor",_hx_index:9,__enum__:"h3d.mat.Blend",toString:o},ConstantColor:{_hx_name:"ConstantColor",_hx_index:10,__enum__:"h3d.mat.Blend",toString:o},ConstantAlpha:{_hx_name:"ConstantAlpha",_hx_index:11,__enum__:"h3d.mat.Blend",toString:o},OneMinusConstantColor:{_hx_name:"OneMinusConstantColor",_hx_index:12,__enum__:"h3d.mat.Blend",toString:o},OneMinusConstantAlpha:{_hx_name:"OneMinusConstantAlpha",_hx_index:13,__enum__:"h3d.mat.Blend",toString:o},SrcAlphaSaturate:{_hx_name:"SrcAlphaSaturate",_hx_index:14,__enum__:"h3d.mat.Blend",toString:o}}),to=(eo.__constructs__=[eo.One,eo.Zero,eo.SrcAlpha,eo.SrcColor,eo.DstAlpha,eo.DstColor,eo.OneMinusSrcAlpha,eo.OneMinusSrcColor,eo.OneMinusDstAlpha,eo.OneMinusDstColor,eo.ConstantColor,eo.ConstantAlpha,eo.OneMinusConstantColor,eo.OneMinusConstantAlpha,eo.SrcAlphaSaturate],eo.__empty_constructs__=[eo.One,eo.Zero,eo.SrcAlpha,eo.SrcColor,eo.DstAlpha,eo.DstColor,eo.OneMinusSrcAlpha,eo.OneMinusSrcColor,eo.OneMinusDstAlpha,eo.OneMinusDstColor,eo.ConstantColor,eo.ConstantAlpha,eo.OneMinusConstantColor,eo.OneMinusConstantAlpha,eo.SrcAlphaSaturate],fe["h3d.mat.Compare"]={__ename__:!0,__constructs__:null,Always:{_hx_name:"Always",_hx_index:0,__enum__:"h3d.mat.Compare",toString:o},Never:{_hx_name:"Never",_hx_index:1,__enum__:"h3d.mat.Compare",toString:o},Equal:{_hx_name:"Equal",_hx_index:2,__enum__:"h3d.mat.Compare",toString:o},NotEqual:{_hx_name:"NotEqual",_hx_index:3,__enum__:"h3d.mat.Compare",toString:o},Greater:{_hx_name:"Greater",_hx_index:4,__enum__:"h3d.mat.Compare",toString:o},GreaterEqual:{_hx_name:"GreaterEqual",_hx_index:5,__enum__:"h3d.mat.Compare",toString:o},Less:{_hx_name:"Less",_hx_index:6,__enum__:"h3d.mat.Compare",toString:o},LessEqual:{_hx_name:"LessEqual",_hx_index:7,__enum__:"h3d.mat.Compare",toString:o}}),no=(to.__constructs__=[to.Always,to.Never,to.Equal,to.NotEqual,to.Greater,to.GreaterEqual,to.Less,to.LessEqual],to.__empty_constructs__=[to.Always,to.Never,to.Equal,to.NotEqual,to.Greater,to.GreaterEqual,to.Less,to.LessEqual],fe["h3d.mat.StencilOp"]={__ename__:!0,__constructs__:null,Keep:{_hx_name:"Keep",_hx_index:0,__enum__:"h3d.mat.StencilOp",toString:o},Zero:{_hx_name:"Zero",_hx_index:1,__enum__:"h3d.mat.StencilOp",toString:o},Replace:{_hx_name:"Replace",_hx_index:2,__enum__:"h3d.mat.StencilOp",toString:o},Increment:{_hx_name:"Increment",_hx_index:3,__enum__:"h3d.mat.StencilOp",toString:o},IncrementWrap:{_hx_name:"IncrementWrap",_hx_index:4,__enum__:"h3d.mat.StencilOp",toString:o},Decrement:{_hx_name:"Decrement",_hx_index:5,__enum__:"h3d.mat.StencilOp",toString:o},DecrementWrap:{_hx_name:"DecrementWrap",_hx_index:6,__enum__:"h3d.mat.StencilOp",toString:o},Invert:{_hx_name:"Invert",_hx_index:7,__enum__:"h3d.mat.StencilOp",toString:o}}),io=(no.__constructs__=[no.Keep,no.Zero,no.Replace,no.Increment,no.IncrementWrap,no.Decrement,no.DecrementWrap,no.Invert],no.__empty_constructs__=[no.Keep,no.Zero,no.Replace,no.Increment,no.IncrementWrap,no.Decrement,no.DecrementWrap,no.Invert],fe["h3d.mat.MipMap"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.mat.MipMap",toString:o},Nearest:{_hx_name:"Nearest",_hx_index:1,__enum__:"h3d.mat.MipMap",toString:o},Linear:{_hx_name:"Linear",_hx_index:2,__enum__:"h3d.mat.MipMap",toString:o}}),so=(io.__constructs__=[io.None,io.Nearest,io.Linear],io.__empty_constructs__=[io.None,io.Nearest,io.Linear],fe["h3d.mat.Filter"]={__ename__:!0,__constructs__:null,Nearest:{_hx_name:"Nearest",_hx_index:0,__enum__:"h3d.mat.Filter",toString:o},Linear:{_hx_name:"Linear",_hx_index:1,__enum__:"h3d.mat.Filter",toString:o}}),ao=(so.__constructs__=[so.Nearest,so.Linear],so.__empty_constructs__=[so.Nearest,so.Linear],fe["h3d.mat.Wrap"]={__ename__:!0,__constructs__:null,Clamp:{_hx_name:"Clamp",_hx_index:0,__enum__:"h3d.mat.Wrap",toString:o},Repeat:{_hx_name:"Repeat",_hx_index:1,__enum__:"h3d.mat.Wrap",toString:o}}),lo=(ao.__constructs__=[ao.Clamp,ao.Repeat],ao.__empty_constructs__=[ao.Clamp,ao.Repeat],fe["h3d.mat.Operation"]={__ename__:!0,__constructs__:null,Add:{_hx_name:"Add",_hx_index:0,__enum__:"h3d.mat.Operation",toString:o},Sub:{_hx_name:"Sub",_hx_index:1,__enum__:"h3d.mat.Operation",toString:o},ReverseSub:{_hx_name:"ReverseSub",_hx_index:2,__enum__:"h3d.mat.Operation",toString:o},Min:{_hx_name:"Min",_hx_index:3,__enum__:"h3d.mat.Operation",toString:o},Max:{_hx_name:"Max",_hx_index:4,__enum__:"h3d.mat.Operation",toString:o}}),ro=(lo.__constructs__=[lo.Add,lo.Sub,lo.ReverseSub,lo.Min,lo.Max],lo.__empty_constructs__=[lo.Add,lo.Sub,lo.ReverseSub,lo.Min,lo.Max],fe["h3d.mat.TextureFlags"]={__ename__:!0,__constructs__:null,Target:{_hx_name:"Target",_hx_index:0,__enum__:"h3d.mat.TextureFlags",toString:o},Cube:{_hx_name:"Cube",_hx_index:1,__enum__:"h3d.mat.TextureFlags",toString:o},MipMapped:{_hx_name:"MipMapped",_hx_index:2,__enum__:"h3d.mat.TextureFlags",toString:o},ManualMipMapGen:{_hx_name:"ManualMipMapGen",_hx_index:3,__enum__:"h3d.mat.TextureFlags",toString:o},IsNPOT:{_hx_name:"IsNPOT",_hx_index:4,__enum__:"h3d.mat.TextureFlags",toString:o},NoAlloc:{_hx_name:"NoAlloc",_hx_index:5,__enum__:"h3d.mat.TextureFlags",toString:o},Dynamic:{_hx_name:"Dynamic",_hx_index:6,__enum__:"h3d.mat.TextureFlags",toString:o},AlphaPremultiplied:{_hx_name:"AlphaPremultiplied",_hx_index:7,__enum__:"h3d.mat.TextureFlags",toString:o},WasCleared:{_hx_name:"WasCleared",_hx_index:8,__enum__:"h3d.mat.TextureFlags",toString:o},Loading:{_hx_name:"Loading",_hx_index:9,__enum__:"h3d.mat.TextureFlags",toString:o},Serialize:{_hx_name:"Serialize",_hx_index:10,__enum__:"h3d.mat.TextureFlags",toString:o},IsArray:{_hx_name:"IsArray",_hx_index:11,__enum__:"h3d.mat.TextureFlags",toString:o},AsyncLoading:{_hx_name:"AsyncLoading",_hx_index:12,__enum__:"h3d.mat.TextureFlags",toString:o},LazyLoading:{_hx_name:"LazyLoading",_hx_index:13,__enum__:"h3d.mat.TextureFlags",toString:o},Writable:{_hx_name:"Writable",_hx_index:14,__enum__:"h3d.mat.TextureFlags",toString:o},Is3D:{_hx_name:"Is3D",_hx_index:15,__enum__:"h3d.mat.TextureFlags",toString:o}}),oo=(ro.__constructs__=[ro.Target,ro.Cube,ro.MipMapped,ro.ManualMipMapGen,ro.IsNPOT,ro.NoAlloc,ro.Dynamic,ro.AlphaPremultiplied,ro.WasCleared,ro.Loading,ro.Serialize,ro.IsArray,ro.AsyncLoading,ro.LazyLoading,ro.Writable,ro.Is3D],ro.__empty_constructs__=[ro.Target,ro.Cube,ro.MipMapped,ro.ManualMipMapGen,ro.IsNPOT,ro.NoAlloc,ro.Dynamic,ro.AlphaPremultiplied,ro.WasCleared,ro.Loading,ro.Serialize,ro.IsArray,ro.AsyncLoading,ro.LazyLoading,ro.Writable,ro.Is3D],function(){}),uo=((i["h3d.mat.Defaults"]=oo).__name__="h3d.mat.Defaults",oo.__properties__={set_shadowShader:"set_shadowShader",get_shadowShader:"get_shadowShader"},oo.shadowShader=null,oo.get_shadowShader=function(){var e=oo.shadowShader;return null==e&&(e=new No,oo.set_shadowShader(e),oo.shadowShader.setPriority(-1)),e},oo.set_shadowShader=function(e){return oo.shadowShader=e},(i["h3d.mat.Material"]=Bn).__name__="h3d.mat.Material",Bn.create=function(e){var t=uo.current.createMaterial();return t.set_texture(e),t.set_props(t.getDefaultProps()),t},Bn.__super__=In,Bn.prototype=e(In.prototype,{set_castShadows:function(e){return this.castShadows==e?e:(null!=this.passes&&(e?this.addPass(new ho("shadow",null,this.passes)).set_isStatic(this.staticShadows):this.removePass(this.getPass("shadow"))),this.castShadows=e)},set_receiveShadows:function(e){var t;return e==this.receiveShadows?e:(null!=this.passes&&(t=oo.get_shadowShader(),e?this.passes.addShader(t):this.passes.removeShader(t)),this.receiveShadows=e)},clone:function(e){var e=null==e?new Bn:e,t=(In.prototype.clone.call(this,e),e.set_castShadows(this.castShadows),e.set_receiveShadows(this.receiveShadows),e.set_texture(this.get_texture()),e.set_specularTexture(this.get_specularTexture()),e.set_normalMap(this.get_normalMap()),null!=this.textureShader&&((t=e.textureShader).constModified=!0,t.additive__=this.textureShader.additive__,(t=e.textureShader).constModified=!0,t.killAlpha__=this.textureShader.killAlpha__,e.textureShader.killAlphaThreshold__=this.textureShader.killAlphaThreshold__),this.mshader.color__),n=t.x,i=t.y,s=t.z,t=t.w;return e.mshader.color__=new q(n=null==n?0:n,i=null==i?0:i,s=null==s?0:s,t=null==t?1:t),e.set_blendMode(this.blendMode),e},set_blendMode:function(e){if(null!=this.passes)switch(this.passes.setBlendMode(e),e._hx_index){case 0:this.passes.set_depthWrite(!0),this.passes.setPassName("default");break;case 1:this.passes.set_depthWrite(!0),this.passes.setPassName("alpha");break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:this.passes.set_depthWrite(!1),this.passes.setPassName("additive")}return this.blendMode=e},get_specularTexture:function(){return null==this.specularShader?null:this.specularShader.texture__},get_texture:function(){return null==this.textureShader?null:this.textureShader.texture__},set_texture:function(e){return null==e?null!=this.textureShader&&(this.passes.removeShader(this.textureShader),this.textureShader=null):(null==this.textureShader&&(this.textureShader=new Ho,this.passes.addShader(this.textureShader)),this.textureShader.texture__=e),e},get_normalMap:function(){return null==this.normalShader?null:this.normalShader.texture__},set_normalMap:function(e){return null==e?null!=this.normalShader&&(this.passes.removeShader(this.normalShader),this.normalShader=null):(null==this.normalShader&&(this.normalShader=new Wo,null!=this.textureShader?this.passes.addShaderAtIndex(this.normalShader,this.passes.getShaderIndex(this.textureShader)+1):this.passes.addShader(this.normalShader)),this.normalShader.texture__=e),e},set_specularTexture:function(e){return null==e?null!=this.specularShader&&(this.passes.removeShader(this.specularShader),this.specularShader=null):(null==this.specularShader&&(this.specularShader=new jo,this.passes.addShader(this.specularShader)),this.specularShader.texture__=e),e},getDefaultModelProps:function(){var e=this.getDefaultProps();switch(this.blendMode._hx_index){case 0:break;case 1:e.kind="Alpha";break;case 2:e.kind="Add",e.culling=!1,e.shadows=!1,e.light=!1;break;default:throw tl.thrown("Unsupported HMD material "+el.string(this.blendMode))}return e},getDefaultProps:function(e){var t;if(null==e)t={kind:"Opaque",shadows:!0,culling:!0,light:!0};else switch(e){case"particles3D":case"trail3D":t={kind:"Alpha",shadows:!1,culling:!1,light:!0};break;case"ui":t={kind:"Alpha",shadows:!1,culling:!1,light:!1};break;default:t={kind:"Opaque",shadows:!0,culling:!0,light:!0}}return t},refreshProps:function(){if(null!=this.props&&null!=this.passes){var e=this.props;switch(e.kind){case"Add":this.set_blendMode(wr.Add);break;case"Alpha":this.set_blendMode(wr.Alpha);break;case"AlphaKill":case"Hidden":case"Opaque":this.set_blendMode(wr.None);break;case"SoftAdd":this.set_blendMode(wr.SoftAdd)}var t=this.textureShader,t=(null!=t&&(t.constModified=!0,t.killAlpha__="AlphaKill"==e.kind,t.killAlphaThreshold__=.5),this.passes.set_culling("Hidden"==e.kind?$r.Both:e.culling?$r.Back:$r.None),this.passes.set_enableLights(e.light),e.shadows);this.set_castShadows(t),this.set_receiveShadows(t),this.castShadows&&this.receiveShadows&&this.getPass("shadow").set_culling(this.passes.culling)}},__class__:Bn,__properties__:e(In.prototype.__properties__,{set_blendMode:"set_blendMode",set_normalMap:"set_normalMap",get_normalMap:"get_normalMap",set_specularTexture:"set_specularTexture",get_specularTexture:"get_specularTexture",set_texture:"set_texture",get_texture:"get_texture",set_receiveShadows:"set_receiveShadows",set_castShadows:"set_castShadows"})}),(i["h3d.mat.MaterialDatabase"]=Tn).__name__="h3d.mat.MaterialDatabase",Tn.prototype={getFilePath:function(e){var t=e.entry.get_directory();return null==t||""==t?"materials.props":e.entry.get_directory()+"/materials.props"},getModelData:function(e){if(null==e)return null;var t=this.db,n=e.entry.get_directory(),i=t.h[n];if(null!=i)return i.v;var s,i=this.getFilePath(e);try{s=JSON.parse(N0.currentInstance.load(i).toText())}catch(e){if(CA.lastError=e,!(tl.caught(e).unwrap()instanceof v0))throw e;s={}}t=this.db,n=e.entry.get_directory();return t.h[n]={v:s},s},loadMatProps:function(e,t){var n=this.getModelData(e.model);if(null==n)return n;if(null==(n=n.materials))return n;if(null==(n=X.field(n,t.name)))return n;if(null!=e.model){t=X.field(n,e.name+"/"+e.model.entry.name);if(null!=t)return t}return X.field(n,e.name)},__class__:Tn},function(e){null==this.database&&(this.database=new Tn),this.name=e}),ho=((i["h3d.mat.MaterialSetup"]=uo).__name__="h3d.mat.MaterialSetup",uo.prototype={createRenderer:function(){return new Eo},createLightSystem:function(){return new To},createMaterial:function(){return new Bn},loadMaterialProps:function(e){return this.database.loadMatProps(e,this)},__class__:uo},function(e,t,n){this.layer=0,this.rendererFlags=0,this.bits=0,this.parentPass=n,this.shaders=t,this.setPassName(e),this.set_culling($r.Back);n=eo.One,t=eo.Zero;this.set_blendSrc(n),this.set_blendAlphaSrc(n),this.set_blendDst(t),this.set_blendAlphaDst(t),this.depth(!0,to.Less),this.set_blendOp(this.set_blendAlphaOp(lo.Add)),this.colorMask=15}),co=((i["h3d.mat.Pass"]=ho).__name__="h3d.mat.Pass",ho.prototype={load:function(e){this.name=e.name,this.passId=e.passId,this.bits=e.bits,this.set_enableLights(e.enableLights),this.set_dynamicParameters(e.dynamicParameters),this.set_culling(e.culling),this.set_depthWrite(e.depthWrite),this.set_depthClamp(e.depthClamp),this.set_depthTest(e.depthTest),this.set_blendSrc(e.blendSrc),this.set_blendDst(e.blendDst),this.set_blendOp(e.blendOp),this.set_blendAlphaSrc(e.blendAlphaSrc),this.set_blendAlphaDst(e.blendAlphaDst),this.set_blendAlphaOp(e.blendAlphaOp),this.colorMask=e.colorMask,null!=e.stencil&&(null==this.stencil&&(this.stencil=new co),this.stencil.load(e.stencil))},setPassName:function(e){this.name=e,this.passId=dw.allocID(e)},setBlendMode:function(e){switch(this.set_blendOp(lo.Add),this.set_blendAlphaOp(lo.Add),e._hx_index){case 0:var t=eo.One,n=eo.Zero;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 1:t=eo.SrcAlpha,n=eo.OneMinusSrcAlpha;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc(eo.One);break;case 2:t=eo.SrcAlpha,n=eo.One;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc(eo.One);break;case 3:t=eo.One,n=eo.OneMinusSrcAlpha;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 4:t=eo.OneMinusDstColor,n=eo.One;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc(eo.One);break;case 5:t=eo.DstColor,n=eo.Zero;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaSrc(eo.One);break;case 6:t=eo.DstColor,n=eo.OneMinusSrcAlpha;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 7:t=eo.Zero,n=eo.OneMinusSrcColor;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 8:t=eo.One,n=eo.OneMinusSrcColor;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n);break;case 9:t=eo.SrcAlpha,n=eo.One;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendOp(lo.ReverseSub),this.set_blendAlphaOp(lo.ReverseSub);break;case 10:t=eo.One,n=eo.One;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaOp(lo.Max),this.set_blendOp(lo.Max);break;case 11:t=eo.One,n=eo.One;this.set_blendSrc(t),this.set_blendAlphaSrc(t),this.set_blendDst(n),this.set_blendAlphaDst(n),this.set_blendAlphaOp(lo.Min),this.set_blendOp(lo.Min)}},depth:function(e,t,n){null==n&&(n=!1),this.set_depthWrite(e),this.set_depthTest(t),this.set_depthClamp(n)},resetRendererFlags:function(){this.rendererFlags=0},addShader:function(e){return null==e?null:(this.shaders=Cw.addSort(e,this.shaders),this.resetRendererFlags(),e)},addShaderAtIndex:function(e,t){for(var n=null,i=this.shaders;0<t&&i!=this.parentShaders;)i=(n=i).next,--t;return null==n?this.shaders=new Cw(e,i):n.next=new Cw(e,i),e},getShaderIndex:function(e){for(var t=0,n=this.shaders;n!=this.parentShaders;){if(n.s==e)return t;n=n.next,++t}return-1},removeShader:function(e){for(var t=this.shaders,n=null,i=!1;null!=t;){if(t.s==e){this.resetRendererFlags(),this.selfShadersCache==t&&(this.selfShadersCache=this.selfShadersCache.next),null==n?this.shaders=t.next:n.next=t.next,i=!0;break}t=(n=t).next}for(t=this.selfShaders,n=null;null!=t;){if(t.s==e)return this.resetRendererFlags(),this.selfShadersCache==t&&(this.selfShadersCache=this.selfShadersCache.next),null==n?this.selfShaders=t.next:n.next=t.next,!0;t=(n=t).next}return i},getShader:function(e){var t=this._getShader(e,this.shaders);return null!=t?t:this._getShader(e,this.selfShaders)},_getShader:function(e,t){for(;null!=t&&t!=this.parentShaders;){var n=t.s,n=nl.__downcastCheck(n,e)?n:null;if(null!=n)return n;t=t.next}return null},selfShadersRec:function(e){if(null==this.selfShaders)return this.shaders;if(this.selfShadersChanged||e||this.shaders!=this.selfShadersCache){for(var t=this.selfShaders,n=null;null!=t&&t!=this.selfShadersCache;)t=(n=t).next;this.selfShadersCache=this.shaders,null!=n?n.next=this.selfShadersCache:this.selfShaders=this.shaders}return this.selfShaders},getShadersRec:function(){if(null==this.parentPass||this.parentShaders==this.parentPass.shaders)return this.selfShadersRec(!1);for(var e=this.shaders,t=null;null!=e&&e!=this.parentShaders;)e=(t=e).next;return e!=this.parentShaders&&(t=null),this.parentShaders=this.parentPass.shaders,null==t?this.shaders=this.parentShaders:t.next=this.parentShaders,this.selfShadersRec(!0)},reverseDepthTest:function(){var e;switch(this.depthTest._hx_index){case 4:e=to.Less;break;case 5:e=to.LessEqual;break;case 6:e=to.Greater;break;case 7:e=to.GreaterEqual;break;default:e=this.depthTest}this.set_depthTest(e)},set_enableLights:function(e){return this.flags=-2&this.flags|(e?1:0),this.enableLights=e},set_dynamicParameters:function(e){return this.flags=-3&this.flags|(e?1:0)<<1,this.dynamicParameters=e},set_isStatic:function(e){return this.flags=-5&this.flags|(e?1:0)<<2,this.isStatic=e},set_culling:function(e){return this.bits=-4&this.bits|e._hx_index,this.culling=e},set_depthWrite:function(e){return this.bits=-5&this.bits|(e?1:0)<<2,this.depthWrite=e},set_depthClamp:function(e){return this.bits=-9&this.bits|(e?1:0)<<3,this.depthClamp=e},set_depthTest:function(e){return this.bits=-113&this.bits|e._hx_index<<4,this.depthTest=e},set_blendSrc:function(e){return this.bits=-1921&this.bits|e._hx_index<<7,this.blendSrc=e},set_blendDst:function(e){return this.bits=-30721&this.bits|e._hx_index<<11,this.blendDst=e},set_blendAlphaSrc:function(e){return this.bits=-491521&this.bits|e._hx_index<<15,this.blendAlphaSrc=e},set_blendAlphaDst:function(e){return this.bits=-7864321&this.bits|e._hx_index<<19,this.blendAlphaDst=e},set_blendOp:function(e){return this.bits=-58720257&this.bits|e._hx_index<<23,this.blendOp=e},set_blendAlphaOp:function(e){return this.bits=-469762049&this.bits|e._hx_index<<26,this.blendAlphaOp=e},__class__:ho,__properties__:{set_blendAlphaOp:"set_blendAlphaOp",set_blendOp:"set_blendOp",set_blendAlphaDst:"set_blendAlphaDst",set_blendAlphaSrc:"set_blendAlphaSrc",set_blendDst:"set_blendDst",set_blendSrc:"set_blendSrc",set_depthTest:"set_depthTest",set_depthClamp:"set_depthClamp",set_depthWrite:"set_depthWrite",set_culling:"set_culling",set_isStatic:"set_isStatic",set_dynamicParameters:"set_dynamicParameters",set_enableLights:"set_enableLights"}},function(){this.opBits=0,this.maskBits=0,this.setOp(no.Keep,no.Keep,no.Keep),this.setFunc(to.Always)}),C=((i["h3d.mat.Stencil"]=co).__name__="h3d.mat.Stencil",co.prototype={setFront:function(e,t,n){this.set_frontSTfail(e),this.set_frontDPfail(t),this.set_frontPass(n)},setBack:function(e,t,n){this.set_backSTfail(e),this.set_backDPfail(t),this.set_backPass(n)},setOp:function(e,t,n){this.setFront(e,t,n),this.setBack(e,t,n)},setFunc:function(e,t,n,i){null==i&&(i=255),null==n&&(n=255),null==t&&(t=0),this.set_frontTest(this.set_backTest(e)),this.set_reference(t),this.set_readMask(n),this.set_writeMask(i)},load:function(e){this.opBits=e.opBits,this.maskBits=e.maskBits,this.set_readMask(e.readMask),this.set_writeMask(e.writeMask),this.set_reference(e.reference),this.set_frontTest(e.frontTest),this.set_frontPass(e.frontPass),this.set_frontSTfail(e.frontSTfail),this.set_frontDPfail(e.frontDPfail),this.set_backTest(e.backTest),this.set_backPass(e.backPass),this.set_backSTfail(e.backSTfail),this.set_backDPfail(e.backDPfail)},set_readMask:function(e){return this.maskBits=-256&this.maskBits|255&e,this.readMask=e},set_writeMask:function(e){return this.maskBits=-65281&this.maskBits|(255&e)<<8,this.writeMask=e},set_reference:function(e){return this.maskBits=-16711681&this.maskBits|(255&e)<<16,this.reference=e},set_frontTest:function(e){return this.opBits=-8&this.opBits|e._hx_index,this.frontTest=e},set_frontPass:function(e){return this.opBits=-57&this.opBits|e._hx_index<<3,this.frontPass=e},set_frontSTfail:function(e){return this.opBits=-449&this.opBits|e._hx_index<<6,this.frontSTfail=e},set_frontDPfail:function(e){return this.opBits=-3585&this.opBits|e._hx_index<<9,this.frontDPfail=e},set_backTest:function(e){return this.opBits=-28673&this.opBits|e._hx_index<<12,this.backTest=e},set_backPass:function(e){return this.opBits=-229377&this.opBits|e._hx_index<<15,this.backPass=e},set_backSTfail:function(e){return this.opBits=-1835009&this.opBits|e._hx_index<<18,this.backSTfail=e},set_backDPfail:function(e){return this.opBits=-14680065&this.opBits|e._hx_index<<21,this.backDPfail=e},__class__:co,__properties__:{set_backDPfail:"set_backDPfail",set_backSTfail:"set_backSTfail",set_backPass:"set_backPass",set_backTest:"set_backTest",set_frontDPfail:"set_frontDPfail",set_frontSTfail:"set_frontSTfail",set_frontPass:"set_frontPass",set_frontTest:"set_frontTest",set_reference:"set_reference",set_writeMask:"set_writeMask",set_readMask:"set_readMask"}},fe["hxd.PixelFormat"]={__ename__:!0,__constructs__:null,ARGB:{_hx_name:"ARGB",_hx_index:0,__enum__:"hxd.PixelFormat",toString:o},BGRA:{_hx_name:"BGRA",_hx_index:1,__enum__:"hxd.PixelFormat",toString:o},RGBA:{_hx_name:"RGBA",_hx_index:2,__enum__:"hxd.PixelFormat",toString:o},RGBA16F:{_hx_name:"RGBA16F",_hx_index:3,__enum__:"hxd.PixelFormat",toString:o},RGBA32F:{_hx_name:"RGBA32F",_hx_index:4,__enum__:"hxd.PixelFormat",toString:o},R8:{_hx_name:"R8",_hx_index:5,__enum__:"hxd.PixelFormat",toString:o},R16F:{_hx_name:"R16F",_hx_index:6,__enum__:"hxd.PixelFormat",toString:o},R32F:{_hx_name:"R32F",_hx_index:7,__enum__:"hxd.PixelFormat",toString:o},RG8:{_hx_name:"RG8",_hx_index:8,__enum__:"hxd.PixelFormat",toString:o},RG16F:{_hx_name:"RG16F",_hx_index:9,__enum__:"hxd.PixelFormat",toString:o},RG32F:{_hx_name:"RG32F",_hx_index:10,__enum__:"hxd.PixelFormat",toString:o},RGB8:{_hx_name:"RGB8",_hx_index:11,__enum__:"hxd.PixelFormat",toString:o},RGB16F:{_hx_name:"RGB16F",_hx_index:12,__enum__:"hxd.PixelFormat",toString:o},RGB32F:{_hx_name:"RGB32F",_hx_index:13,__enum__:"hxd.PixelFormat",toString:o},SRGB:{_hx_name:"SRGB",_hx_index:14,__enum__:"hxd.PixelFormat",toString:o},SRGB_ALPHA:{_hx_name:"SRGB_ALPHA",_hx_index:15,__enum__:"hxd.PixelFormat",toString:o},RGB10A2:{_hx_name:"RGB10A2",_hx_index:16,__enum__:"hxd.PixelFormat",toString:o},RG11B10UF:{_hx_name:"RG11B10UF",_hx_index:17,__enum__:"hxd.PixelFormat",toString:o},R16U:{_hx_name:"R16U",_hx_index:18,__enum__:"hxd.PixelFormat",toString:o},RG16U:{_hx_name:"RG16U",_hx_index:19,__enum__:"hxd.PixelFormat",toString:o},RGB16U:{_hx_name:"RGB16U",_hx_index:20,__enum__:"hxd.PixelFormat",toString:o},RGBA16U:{_hx_name:"RGBA16U",_hx_index:21,__enum__:"hxd.PixelFormat",toString:o},ASTC:((R=function(e){return{_hx_index:22,v:e,__enum__:"hxd.PixelFormat",toString:o}})._hx_name="ASTC",R.__params__=["v"],R),ETC:((R=function(e){return{_hx_index:23,v:e,__enum__:"hxd.PixelFormat",toString:o}})._hx_name="ETC",R.__params__=["v"],R),S3TC:((R=function(e){return{_hx_index:24,v:e,__enum__:"hxd.PixelFormat",toString:o}})._hx_name="S3TC",R.__params__=["v"],R),Depth16:{_hx_name:"Depth16",_hx_index:25,__enum__:"hxd.PixelFormat",toString:o},Depth24:{_hx_name:"Depth24",_hx_index:26,__enum__:"hxd.PixelFormat",toString:o},Depth24Stencil8:{_hx_name:"Depth24Stencil8",_hx_index:27,__enum__:"hxd.PixelFormat",toString:o},Depth32:{_hx_name:"Depth32",_hx_index:28,__enum__:"hxd.PixelFormat",toString:o}}),_o=(C.__constructs__=[C.ARGB,C.BGRA,C.RGBA,C.RGBA16F,C.RGBA32F,C.R8,C.R16F,C.R32F,C.RG8,C.RG16F,C.RG32F,C.RGB8,C.RGB16F,C.RGB32F,C.SRGB,C.SRGB_ALPHA,C.RGB10A2,C.RG11B10UF,C.R16U,C.RG16U,C.RGB16U,C.RGBA16U,C.ASTC,C.ETC,C.S3TC,C.Depth16,C.Depth24,C.Depth24Stencil8,C.Depth32],C.__empty_constructs__=[C.ARGB,C.BGRA,C.RGBA,C.RGBA16F,C.RGBA32F,C.R8,C.R16F,C.R32F,C.RG8,C.RG16F,C.RG32F,C.RGB8,C.RGB16F,C.RGB32F,C.SRGB,C.SRGB_ALPHA,C.RGB10A2,C.RG11B10UF,C.R16U,C.RG16U,C.RGB16U,C.RGBA16U,C.Depth16,C.Depth24,C.Depth24Stencil8,C.Depth32],function(e,t,n,i){if(this.startingMip=0,null==i&&(i=_o.nativeFormat),this.id=++_o.UID,this.format=i,this.flags=0,null!=n)for(var s=0;s<n.length;)this.flags|=1<<n[s++]._hx_index;this.mem=Vr.CURRENT.mem;for(var a=1,l=1;a<e;)a<<=1;for(;l<t;)l<<=1;a==e&&l==t||(this.flags|=16),this.width=e,this.height=t,0!=(4&this.flags)?this.set_mipMap(_o.TRILINEAR_FILTERING_ENABLED?io.Linear:io.Nearest):this.set_mipMap(io.None),this.set_filter(so.Linear),this.set_wrap(_o.DEFAULT_WRAP),this.bits&=32767,this.allocPos=C0.make(),0==(32&this.flags)&&0<this.width&&this.alloc()}),po=((i["h3d.mat.Texture"]=_o).__name__="h3d.mat.Texture",_o.getDefaultDepth=function(){return Vr.CURRENT.driver.getDefaultDepthBuffer()},_o.fromColor=function(e,t){null==t&&(t=1);var n=Vr.CURRENT,i=255*t|0,i=(i<0?i=0:255<i&&(i=255),16777215&e|i<<24),s=n.textureColorCache.h[i];return null==s&&((s=new _o(1,1,null)).clear(e,t),s.realloc=function(){s.clear(e,t)},n.textureColorCache.h[i]=s),s},_o.defaultCubeTexture=function(){var e=Vr.CURRENT,t=e.resCache.h[_o.__id__];return null==t&&((t=new _o(1,1,[ro.Cube])).clear(2105376),t.realloc=function(){t.clear(2105376)},e.resCache.set(_o,t)),t},_o.genNoise=function(e){var t,n,i=Vr.CURRENT,s=_o.noiseTextureKeys.h[e],a=null==s?null:i.resCache.h[s.__id__];return null!=a&&(null!=a.t||!a.isDepth()&&null!=a.realloc)||(null==s&&(_o.noiseTextureKeys.h[e]=s={}),t=a=new _o(e,e,[ro.NoAlloc]),n=e,a.realloc=function(){_o.allocNoise(t,n)},i.resCache.set(s,a)),a},_o.allocNoise=function(e,t){for(var n=new Ox(t,t),i=0;i<t;)for(var s=i++,a=0;a<t;){var l=el.random(256);n.setPixel(s,a++,-16777216|l|l<<8|l<<16)}e.uploadBitmap(n),n.ctx=null,n.pixel=null},_o.prototype={set_lastFrame:function(e){return this._lastFrame!=_o.PREVENT_AUTO_DISPOSE&&(this._lastFrame=e),this._lastFrame},get_mipLevels:function(){if(0==(4&this.flags))return 1;if(0<this.customMipLevels)return this.customMipLevels;for(var e=1,t=this.width,n=this.height;1<=t>>e||1<=n>>e;)++e;return e},get_layerCount:function(){return 0!=(2&this.flags)?6:1},alloc:function(){null==this.t&&this.mem.allocTexture(this)},preventAutoDispose:function(){this.set_lastFrame(_o.PREVENT_AUTO_DISPOSE)},toString:function(){var e=this.name;return null==this.name&&(e="Texture_"+this.id,null!=this.allocPos)&&(e+="("+this.allocPos.position+")"),0!=(32768&this.flags)?e+="("+this.width+"x"+this.height+"x"+this.get_layerCount()+")":e+="("+this.width+"x"+this.height+")",e},setName:function(e){this.name=e},set_mipMap:function(e){return this.bits=-4&this.bits|e._hx_index,this.mipMap=e},set_filter:function(e){return this.bits=-25&this.bits|e._hx_index<<3,this.filter=e},set_wrap:function(e){return this.bits=-193&this.bits|e._hx_index<<6,this.wrap=e},resize:function(e,t){this.dispose();for(var n=1,i=1;n<e;)n<<=1;for(;i<t;)i<<=1;n!=e||i!=t?this.flags|=16:this.flags&=-17,this.width=e,this.height=t,0==(32&this.flags)&&this.alloc()},clear:function(e,t,n){if(null==n&&(n=-1),null==t&&(t=1),this.alloc(),0!=this.width&&0!=this.height)if(1!=this.width||1!=this.height){var i=Vr.CURRENT;if(e|=(255*(t<0?0:1<t?1:t)|0)<<24,n<0)for(var s=0,a=this.get_layerCount();s<a;)i.pushTarget(this,s++),i.clear(e),i.popTarget();else i.pushTarget(this,n),i.clear(e),i.popTarget()}else{var l=e0.alloc(this.width,this.height,_o.nativeFormat),r=0,o=255&e,u=e>>8&255,h=e>>16&255,c=255*t|0;switch(c<0?c=0:255<c&&(c=255),_o.nativeFormat._hx_index){case 1:var _=h,h=o,o=_;break;case 2:break;default:throw tl.thrown("TODO")}for(s=0,a=this.width*this.height;s<a;)++s,l.bytes.b[r++]=h,l.bytes.b[r++]=u,l.bytes.b[r++]=o,l.bytes.b[r++]=c;if(n<0)for(s=0,a=this.get_layerCount();s<a;)this.uploadPixels(l,0,s++);else this.uploadPixels(l,0,n);l.dispose()}},checkSize:function(e,t,n){var i=this.width>>n,n=this.height>>n;if(0==n&&(n=1),e!=(i=0==i?1:i)||t!=n)throw tl.thrown("Invalid upload size : "+e+"x"+t+" should be "+i+"x"+n)},checkMipMapGen:function(e,t){0==e&&0!=(4&this.flags)&&0==(8&this.flags)&&t==this.get_layerCount()-1&&this.mem.driver.generateMipMaps(this)},uploadBitmap:function(e,t,n){null==n&&(n=0),null==t&&(t=0),this.alloc(),this.checkSize(e.ctx.canvas.width,e.ctx.canvas.height,t),this.mem.driver.uploadTextureBitmap(this,e,t,n),this.flags|=256,this.checkMipMapGen(t,n)},uploadPixels:function(e,t,n){null==n&&(n=0),null==t&&(t=0),this.alloc(),this.checkSize(e.width,e.height,t),this.mem.driver.uploadTexturePixels(this,e,t,n),this.flags|=256,this.checkMipMapGen(t,n)},dispose:function(){null!=this.t&&this.mem.deleteTexture(this)},hasStencil:function(){return 27==this.format._hx_index},isDepth:function(){switch(this.format._hx_index){case 25:case 26:case 27:case 28:return!0;default:return!1}},__class__:_o,__properties__:{set_lastFrame:"set_lastFrame",get_mipLevels:"get_mipLevels",get_layerCount:"get_layerCount",set_wrap:"set_wrap",set_filter:"set_filter",set_mipMap:"set_mipMap"}},function(e,t,n,i,s){this.depth=n,(i=null==i?[]:i).push(ro.Is3D),_o.call(this,e,t,i,s)}),mo=((i["h3d.mat.Texture3D"]=po).__name__="h3d.mat.Texture3D",po.default3DTexture=function(){var e=Vr.CURRENT,t=e.resCache.h[po.__id__];return null==t&&((t=new po(1,1,1,null,C.R8)).setName("default3DTexture"),e.resCache.set(po,t)),t},po.__super__=_o,po.prototype=e(_o.prototype,{get_layerCount:function(){return this.depth},toString:function(){return _o.prototype.toString.call(this)+"x("+this.depth+")"},__class__:po}),(i["h3d.mat.TextureArray"]=En).__name__="h3d.mat.TextureArray",En.__super__=_o,En.prototype=e(_o.prototype,{get_layerCount:function(){return this.layers},toString:function(){return _o.prototype.toString.call(this)+"["+this.layers+"]"},__class__:En}),function(e,t){this.shader=e,this.output=new fo(t),this.pass=new ho("screenfx",new Cw(e)),this.pass.set_culling($r.None),this.pass.depth(!1,to.Always)}),go=((i["h3d.pass.ScreenFx"]=mo).__name__="h3d.pass.ScreenFx",mo.prototype={get_engine:function(){return null==this._engine&&(this._engine=Vr.CURRENT),this._engine},render:function(){null==this.primitive&&(this.primitive=bo.get()),this.shader.flipY__=this.get_engine().driver.hasFeature(Yr.BottomLeftCoords)&&null!=this.get_engine().getCurrentTarget()?-1:1;var e=this.pass.shaders,t=jt.get(),n=!1,i=(null==t&&(n=!0,(t=new jt).setCurrent()),this.output.compileShaders(t.globals,e)),s=(this.get_engine().selectMaterial(this.pass),this.get_engine().selectShader(i),t.shaderBuffers);s.vertex.grow(i.vertex),null!=i.fragment&&s.fragment.grow(i.fragment),t.fillGlobals(s,i),t.fillParams(s,i,e),this.get_engine().uploadShaderBuffers(s,0),this.get_engine().uploadInstanceShaderBuffers(s),this.primitive.render(this.get_engine()),n&&t.clearCurrent()},dispose:function(){},__class__:mo,__properties__:{get_engine:"get_engine"}},(i["h3d.pass.Blur"]=Fn).__name__="h3d.pass.Blur",Fn.__super__=mo,Fn.prototype=e(mo.prototype,{set_radius:function(e){return this.radius==e?e:(this.values=null,this.radius=e)},set_quality:function(e){return this.quality==e?e:(this.values=null,this.quality=e)},set_gain:function(e){return this.gain==e?e:(this.values=null,this.gain=e)},set_linear:function(e){return this.linear==e?e:(this.values=null,this.linear=e)},gauss:function(e,t){return t<=0?0==e?1:0:(t=t*t,Math.pow(2.718281828459,-e*e/(2*t))/Math.sqrt(2*Math.PI*t))},calcValues:function(){this.values=[],this.offsets=[];for(var e=0,t=this.quality,n=.7*(t<0?0:1<t?1:t)+.3,i=(t=0<this.radius?(m=this.radius-1,Math.ceil((m<1?1:m)*n/2)):0,Math.sqrt(this.radius)),s=0,a=t+1;s<a;){var l=2*(p=s++),r=0==p?0:2*p-1,o=this.gauss(l,i),u=this.gauss(r,i),h=o+u;this.values[p]=h,this.offsets[p]=0==p?0:(o*l+u*r)/(h*p*Math.sqrt(n)),e+=h,0<p&&(e+=h)}for(var c=this.values[0]*(.01/n);2<this.values.length;){var _=this.values[this.values.length-1];if(c<_)break;e-=2*_,this.values.pop()}e/=this.gain;for(s=0,a=this.values.length;s<a;)this.values[s++]/=e;if(0<this.linear)for(var d=this.gain/(2*this.values.length-1),s=0,a=this.values.length;s<a;){var p=s++,m=this.values[p],g=(this.values[p]=m+this.linear*(d-m),this.offsets[p]);this.offsets[p]=g+this.linear*((0==p?0:(2*p-.5)/(p*n))-g)}},apply:function(e,t,n){if(this.radius<=0&&null==this.shader.fixedColor__)null!=n&&go.run(t,n);else{null==n&&(n=t),null==this.values&&this.calcValues();for(var i=0!=(2&t.flags),s=i?6:1,a=e.textures.allocTarget(t.name+"BlurTmp",t.width,t.height,!1,t.format,i?[ro.Cube]:null),e=((e=this.shader).constModified=!0,e.Quality__=this.values.length,this.shader.values__=this.values,this.shader.offsets__=this.offsets,i?(this.shader.cubeTexture__=t,(e=this.shader).constModified=!0,e.isCube__=!0):(this.shader.texture__=t,(e=this.shader).constModified=!0,e.isCube__=!1),this.shader.pixel__),l=1/t.width,r=(e.x=l=null==l?0:l,e.y=0,e.z=0),o=s;r<o;){var u=r++;this.get_engine().pushTarget(a,u),i&&(this.shader.cubeDir__=this.cubeDir[u]),this.render(),this.get_engine().popTarget()}i?this.shader.cubeTexture__=a:this.shader.texture__=a;for(e=this.shader.pixel__,l=1/t.height,t=(null==l&&(l=0),e.x=0,e.y=l,e.z=0,n.depthBuffer),r=(n.depthBuffer=null,0),o=s;r<o;){u=r++;this.get_engine().pushTarget(n,u),i&&(this.shader.cubeDir__=this.cubeDir[u]),this.render(),this.get_engine().popTarget()}n.depthBuffer=t}},__class__:Fn,__properties__:e(mo.prototype.__properties__,{set_quality:"set_quality",set_linear:"set_linear",set_gain:"set_gain",set_radius:"set_radius"})}),(i["h3d.pass._Copy.ArrayCopyShader"]=Dn).__name__="h3d.pass._Copy.ArrayCopyShader",Dn._SHADER=null,Dn.__super__=W,Dn.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_layer:function(){return this.layer__},set_layer:function(e){return this.layer__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.layer__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 2:return this.layer__}return 0},__class__:Dn,__properties__:e(W.prototype.__properties__,{set_layer:"set_layer",get_layer:"get_layer",set_texture:"set_texture",get_texture:"get_texture"})}),(i["h3d.pass._Copy.CopyShader"]=Rn).__name__="h3d.pass._Copy.CopyShader",Rn._SHADER=null,Rn.__super__=W,Rn.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:Rn,__properties__:e(W.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})}),function(){mo.call(this,new Rn)}),fo=((i["h3d.pass.Copy"]=go).__name__="h3d.pass.Copy",go.run=function(e,t,n,i,s){var a,l=Vr.CURRENT;null!=t&&null!=e&&(null==n||n==wr.None)&&null==i&&null==s&&l.driver.copyTexture(e,t)||(null==(a=l.resCache.h[go.__id__])&&(a=new go,l.resCache.set(go,a)),a.apply(e,t,n,i,s))},go.__super__=mo,go.prototype=e(mo.prototype,{apply:function(e,t,n,i,s){if(null!=t&&this.get_engine().pushTarget(t,null!=s?s:0,null,Qr.NotBound),this.shader.texture__=e,null!=i){null!=n&&i.setBlendMode(n);for(var a=i.shaders;null!=a.next;)a=a.next;a.next=this.pass.shaders;s=this.pass;this.pass=i,this.render(),this.pass=s,a.next=null}else this.pass.setBlendMode(null==n?wr.None:n),this.render();(this.shader.texture__=null)!=t&&this.get_engine().popTarget()},__class__:go}),(i["h3d.pass._CubeCopy.CubeCopyShader"]=Pn).__name__="h3d.pass._CubeCopy.CubeCopyShader",Pn._SHADER=null,Pn.__super__=W,Pn.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_mat:function(){return this.mat__},set_mat:function(e){return this.mat__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.mat__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:Pn,__properties__:e(W.prototype.__properties__,{set_mat:"set_mat",get_mat:"get_mat",set_texture:"set_texture",get_texture:"get_texture"})}),(i["h3d.pass.Output"]=zn).__name__="h3d.pass.Output",zn.onShaderError=null,zn.prototype={setContext:function(e){this.ctx=e},dispose:function(){},processShaders:function(e,t){for(e=this.ctx.extraShaders;null!=e;)t=this.ctx.allocShaderList(e.s,t),e=e.next;return t},setupShaders:function(e){for(var t=!1,n=e.current;null!=n;){var i=n,n=n.next,s=i.pass.getShadersRec(),s=this.processShaders(i,s),a=(i.pass.enableLights&&null!=this.ctx.lightSystem&&(t||(this.ctx.lightSystem.initGlobals(this.ctx.globals),t=!0),s=this.ctx.lightSystem.computeLight(i.obj,s)),i.shader=this.output.compileShaders(this.ctx.globals,s,i.pass.batchMode?Aw.Batch:Aw.Default),i.shaders=s,i.shader.fragment.textures);if(null==a||15==a.type._hx_index)i.texture=0;else{var l=this.ctx;if(null!=a.perObjectGlobal){var r=l.globals.map.h[a.perObjectGlobal.gid];if(null==r)throw tl.thrown("Missing global value "+a.perObjectGlobal.path+" for shader "+l.shaderInfo(s,a.perObjectGlobal.path));r=17==a.type._hx_index?r.texture:r}else{for(var o=s,u=a.instance;0<--u;)o=o.next;r=o.s.getParamValue(a.index)}i.texture=null==r?0:r.id}}},drawObject:function(e){this.ctx.drawPass=e,this.ctx.useReverseDepth?(e.pass.reverseDepthTest(),this.ctx.engine.selectMaterial(e.pass),e.pass.reverseDepthTest()):this.ctx.engine.selectMaterial(e.pass),e.obj.flags|=65536,e.obj.draw(this.ctx)},draw:function(e,t){if(null!=e.current){this.ctx.setupTarget(),this.setupShaders(e),null==t?this.defaultSort(e):t(e);for(var n=this.ctx.shaderBuffers,i=null,s=e.current;null!=s;){var a=s,s=s.next,l=this.ctx,r=a.obj.prevAbsPos,r=(l.globals.map.h[l.globalPreviousModelView_id]=null!=r?r:a.obj.absPos,this.ctx);if(r.globals.map.h[r.globalModelView_id]=a.obj.absPos,a.shader.globals.h.hasOwnProperty(this.ctx.globalModelViewInverse_id)&&(r=this.ctx,o=a.obj.getInvPos(),r.globals.map.h[r.globalModelViewInverse_id]=o),i!=a.shader){if(i=a.shader,null!=zn.onShaderError)try{this.ctx.engine.selectShader(a.shader)}catch(e){CA.lastError=e;r=tl.caught(e).unwrap();zn.onShaderError(r,a);continue}else this.ctx.engine.selectShader(a.shader);var o=a.shader;n.vertex.grow(o.vertex),null!=o.fragment&&n.fragment.grow(o.fragment),this.ctx.fillGlobals(n,a.shader),this.ctx.engine.uploadShaderBuffers(n,0)}a.pass.dynamicParameters||(this.ctx.fillParams(n,a.shader,a.shaders),this.ctx.engine.uploadInstanceShaderBuffers(n)),this.drawObject(a)}(l=this.ctx).cachedPos=0,l.drawPass=null}},__class__:zn},(i["h3d.pass.Shadows"]=Qn).__name__="h3d.pass.Shadows",Qn.__super__=zn,Qn.prototype=e(zn.prototype,{set_size:function(e){return e!=this.size&&null!=this.staticTexture&&(this.staticTexture.dispose(),this.staticTexture=null),this.size=e},dispose:function(){zn.prototype.dispose.call(this),this.blur.dispose(),null!=this.staticTexture&&this.staticTexture.dispose()},getShadowProj:function(){return this.lightCamera.m},isUsingWorldDist:function(){return!1},getOutputs:function(){return this.isUsingWorldDist()?[gw.Swiz(gw.Value("output.worldDist",1),[aw.X,aw.X,aw.X,aw.X])]:this.format==_o.nativeFormat?[gw.PackFloat(gw.Value("output.depth"))]:[gw.Swiz(gw.Value("output.depth",1),[aw.X,aw.X,aw.X,aw.X])]},createDefaultShadowMap:function(){var e=_o.fromColor(16777215);return e.name="defaultShadowMap",e},syncEarlyExit:function(){this.syncShader(null==this.staticTexture?this.createDefaultShadowMap():this.staticTexture)},syncShader:function(e){},filterPasses:function(e){if(this.ctx.computingStatic||this.updateStatic)switch(this.mode._hx_index){case 0:return!1;case 1:for(var t=null,n=null,i=e.discarded,s=e.lastDisc,a=e.current;null!=a;)1==a.pass.isStatic?null==t?t=n=a:(n.next=a,n=a):null==i?i=s=a:(s.next=a,s=a),a=a.next;return null!=n&&(n.next=null),null!=s&&(s.next=null),e.current=t,e.discarded=i,e.lastDisc=s,!0;case 2:return!1;case 3:for(t=null,n=null,i=e.discarded,s=e.lastDisc,a=e.current;null!=a;)1==a.pass.isStatic?null==t?t=n=a:(n.next=a,n=a):null==i?i=s=a:(s.next=a,s=a),a=a.next;return null!=n&&(n.next=null),null!=s&&(s.next=null),e.current=t,e.discarded=i,e.lastDisc=s,!0}else switch(this.mode._hx_index){case 0:return!1;case 1:return this.syncEarlyExit(),!1;case 2:return!0;case 3:for(t=null,n=null,i=e.discarded,s=e.lastDisc,a=e.current;null!=a;)0==a.pass.isStatic?null==t?t=n=a:(n.next=a,n=a):null==i?i=s=a:(s.next=a,s=a),a=a.next;return null!=n&&(n.next=null),null!=s&&(s.next=null),e.current=t,e.discarded=i,e.lastDisc=s,!0}},__class__:Qn,__properties__:{set_size:"set_size"}}),(i["h3d.pass.DirShadowMap"]=Vn).__name__="h3d.pass.DirShadowMap",Vn.__super__=Qn,Vn.prototype=e(Qn.prototype,{set_mode:function(e){var t=this.dshader;return t.constModified=!0,t.enable__=e!=Ao.None,this.mode=e},dispose:function(){Qn.prototype.dispose.call(this),null!=this.depth&&this.depth.dispose()},calcShadowBounds:function(_){var d,p,m,e,t,n,i,s,a,l,r,o,u,h,c,g,f,A,x,w,y,b,v,C,S,k,M,I,B,T,E,F=this,D=_.orthoBounds,R=-1e9,P=1e9;this.autoShrink?(d=new Wr,p=Nr.I(),m=this.autoZPlanes?new Ur:null,(null!=this.boundingObject?this.boundingObject:this.ctx.scene).iterVisibleMeshes(function(e){var t,n,i,s,a,l,r,o,u,h,c;null==e.primitive||!e.material.castShadows||(t=e.primitive.getBounds()).xMin>t.xMax||(e=e.primitive instanceof yo?p:e.getAbsPos(),F.autoZPlanes&&(m.load(t),m.transform(e),m.zMax>R&&(R=m.zMax),m.zMin<P)&&(P=m.zMin),d.multiply3x4(e,_.mcam),e=t.xMin,o=a=null==(a=n=null==(n=t.yMin)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMin)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u),e=t.xMin,o=a=null==(a=n=null==(n=t.yMin)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMax)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u),e=t.xMin,o=a=null==(a=n=null==(n=t.yMax)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMin)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u),e=t.xMin,o=a=null==(a=n=null==(n=t.yMax)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMax)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u),e=t.xMax,o=a=null==(a=n=null==(n=t.yMin)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMin)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u),e=t.xMax,o=a=null==(a=n=null==(n=t.yMin)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMax)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u),e=t.xMax,o=a=null==(a=n=null==(n=t.yMax)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMin)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u),e=t.xMax,o=a=null==(a=n=null==(n=t.yMax)?0:n)?0:a,u=l=null==(l=i=null==(i=t.zMax)?0:i)?0:l,h=(r=s=null==(s=e=null==e?0:e)?0:s)*d._12+o*d._22+u*d._32+d._42,c=r*d._13+o*d._23+u*d._33+d._43,r=r*d._11+o*d._21+u*d._31+d._41,o=h,u=c,r<D.xMin&&(D.xMin=r),r>D.xMax&&(D.xMax=r),o<D.yMin&&(D.yMin=o),o>D.yMax&&(D.yMax=o),u<D.zMin&&(D.zMin=u),u>D.zMax&&(D.zMax=u))})):this.mode==Ao.Dynamic&&(D.xMin=-1e20,D.xMax=1e20,D.yMin=-1e20,D.yMax=1e20,D.zMin=-1e20,D.zMax=1e20),this.mode==Ao.Dynamic&&(e=new Ur,n=this.minDist<0?this.ctx.camera.zNear:this.minDist,i=this.maxDist<0?this.ctx.camera.zFar:this.maxDist,u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(-1,-1,F.ctx.camera.distanceToDepth(c=n))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&c<r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(-1,1,F.ctx.camera.distanceToDepth(c=n))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&c<r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(1,-1,F.ctx.camera.distanceToDepth(c=n))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&c<r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(1,1,F.ctx.camera.distanceToDepth(c=n))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&c<r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(-1,-1,F.ctx.camera.distanceToDepth(c=i))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=P,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&-1*c<-1*r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(-1,1,F.ctx.camera.distanceToDepth(c=i))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=P,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&-1*c<-1*r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(1,-1,F.ctx.camera.distanceToDepth(c=i))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=P,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&-1*c<-1*r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),u=y=null==(y=A=null==(A=(o=F.ctx.camera.unproject(1,1,F.ctx.camera.distanceToDepth(c=i))).x)?0:A)?0:y,E=b=null==(b=x=null==(x=o.y)?0:x)?0:b,t=v=null==(v=w=null==(w=o.z)?0:w)?0:v,F.autoShrink&&F.autoZPlanes&&(s=y=null==(y=A=null==(A=(o=F.ctx.camera.pos).x)?0:A)?0:y,a=b=null==(b=x=null==(x=o.y)?0:x)?0:b,l=v=null==(v=w=null==(w=o.z)?0:w)?0:v,(C=new _n).px=s,C.py=a,C.pz=l,C.lx=u-s,C.ly=E-a,C.lz=t-l,C.normalize(),S=P,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),0<(r=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B))&&-1*c<-1*r&&(u=y=null==(y=A=null==(A=C.px+r*C.lx)?0:A)?0:y,E=b=null==(b=x=null==(x=C.py+r*C.ly)?0:x)?0:b,t=v=null==(v=w=null==(w=C.pz+r*C.lz)?0:w)?0:v),g=u*(h=_.mcam)._12+E*h._22+t*h._32+h._42,f=u*h._13+E*h._23+t*h._33+h._43,A=u=u*h._11+E*h._21+t*h._31+h._41,x=E=g,w=t=f,A<e.xMin&&(e.xMin=A),A>e.xMax&&(e.xMax=A),x<e.yMin&&(e.yMin=x),x>e.yMax&&(e.yMax=x),w<e.zMin&&(e.zMin=w),w>e.zMax&&(e.zMax=w),this.autoShrink?(e.zMin=D.zMin,D.intersection(D,e),this.autoZPlanes&&(n=(u=y=null==(y=A=null==(A=(o=_.target).x-(S=_.pos).x)?0:A)?0:y)*u+(E=b=null==(b=x=null==(x=o.y-S.y)?0:x)?0:b)*E+(t=v=null==(v=w=null==(w=o.z-S.z)?0:w)?0:v)*t,i=y=null==(y=A=null==(A=u*(n=n<1e-20?0:1/Math.sqrt(n)))?0:A)?0:y,s=b=null==(b=x=null==(x=E*n)?0:x)?0:b,a=v=null==(v=w=null==(w=t*n)?0:w)?0:v,l=1e9,c=D.xMin,x=g=D.yMin,r=y=null==(y=A=null==(A=c)?0:A)?0:y,o=b=null==(b=x=null==g?0:x)?0:b,u=v=null==(v=w=null==(w=D.zMin)?0:w)?0:v,A=c=r*(h=_.getInverseView())._11+o*h._21+u*h._31+h._41,x=g=r*h._12+o*h._22+u*h._32+h._42,y=A=null==c?0:A,null==(v=w=null==(f=r*h._13+o*h._23+u*h._33+h._43)?0:f)&&(v=0),null==(b=x=null==g?0:x)&&(b=0),(C=new _n).px=y=null==y?0:y,C.py=b,C.pz=v,C.lx=i,C.ly=s,C.lz=a,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),(E=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B)<1e9&&(l=E),A=c=D.xMin,x=g=D.yMax,o=b=null==(b=x=null==g?0:x)?0:b,u=v=null==(v=w=null==(w=D.zMin)?0:w)?0:v,A=c=(r=y=null==(y=A=null==c?0:A)?0:y)*(h=_.getInverseView())._11+o*h._21+u*h._31+h._41,x=g=r*h._12+o*h._22+u*h._32+h._42,y=A=null==c?0:A,null==(v=w=null==(f=r*h._13+o*h._23+u*h._33+h._43)?0:f)&&(v=0),null==(b=x=null==g?0:x)&&(b=0),(C=new _n).px=y=null==y?0:y,C.py=b,C.pz=v,C.lx=i,C.ly=s,C.lz=a,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),(E=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B)<l&&(l=E),A=c=D.xMax,x=g=D.yMin,o=b=null==(b=x=null==g?0:x)?0:b,u=v=null==(v=w=null==(w=D.zMin)?0:w)?0:v,A=c=(r=y=null==(y=A=null==c?0:A)?0:y)*(h=_.getInverseView())._11+o*h._21+u*h._31+h._41,x=g=r*h._12+o*h._22+u*h._32+h._42,y=A=null==c?0:A,null==(v=w=null==(f=r*h._13+o*h._23+u*h._33+h._43)?0:f)&&(v=0),null==(b=x=null==g?0:x)&&(b=0),(C=new _n).px=y=null==y?0:y,C.py=b,C.pz=v,C.lx=i,C.ly=s,C.lz=a,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),(E=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B)<l&&(l=E),A=c=D.xMax,x=g=D.yMax,o=b=null==(b=x=null==g?0:x)?0:b,u=v=null==(v=w=null==(w=D.zMin)?0:w)?0:v,A=c=(r=y=null==(y=A=null==c?0:A)?0:y)*(h=_.getInverseView())._11+o*h._21+u*h._31+h._41,x=g=r*h._12+o*h._22+u*h._32+h._42,y=A=null==c?0:A,null==(v=w=null==(f=r*h._13+o*h._23+u*h._33+h._43)?0:f)&&(v=0),null==(b=x=null==g?0:x)&&(b=0),(C=new _n).px=y=null==y?0:y,C.py=b,C.pz=v,C.lx=i,C.ly=s,C.lz=a,C.normalize(),S=R,B=C.lx*(k=0)+C.ly*(M=0)+C.lz*(I=1),T=(S=null==S?0:S)-(C.px*k+C.py*M+C.pz*I),D.zMin+=l=(E=(B<0?-B:B)<1e-10?(T<0?-T:T)<1e-10?0:-1:T/B)<l?E:l)):D.load(e)),D.scaleCenter(1.01)},syncShader:function(e){(t=this.dshader).constModified=!0,t.shadowMap__=e,(t=this.dshader).constModified=!0,t.shadowMapChannel__=this.format==_o.nativeFormat?rw.PackedFloat:rw.R,this.dshader.shadowBias__=this.bias,this.dshader.shadowPower__=this.power,this.dshader.shadowProj__=this.getShadowProj(),(t=this.dshader).constModified=!0,t.USE_ESM__=this.samplingKind==xo.ESM,this.dshader.shadowPower__=this.power;(t=this.dshader).constModified=!0,t.USE_PCF__=this.samplingKind==xo.PCF;var t=this.dshader.shadowRes__,n=e.width,e=e.height;null==e&&(e=0),t.x=n=null==n?0:n,t.y=e,t.z=0,this.dshader.pcfScale__=this.pcfScale,this.dshader.set_pcfQuality(this.pcfQuality)},processShadowMap:function(e,t,n){var i=(s=this.ctx).globals.map.h[s.cameraViewProj_id],s=this.ctx,a=this.getShadowProj(),a=(s.globals.map.h[s.cameraViewProj_id]=a,t.isDepth()?(this.ctx.engine.pushDepth(t),this.ctx.engine.clear(null,1)):(this.ctx.engine.pushTarget(t),this.ctx.engine.clear(16777215,1)),Qn.prototype.draw.call(this,e,n),this.ctx.computingStatic||this.updateStatic),e=0<this.blur.radius&&(this.mode!=Ao.Mixed||!a);if(this.ctx.engine.popTarget(),n=!(this.mode!=Ao.Mixed||a||null==this.staticTexture||null==(s=this.staticTexture).t&&(s.isDepth()||null==s.realloc))){if(this.staticTexture.width!=t.width)throw tl.thrown("Static shadow map doesnt match dynamic shadow map");a=this.ctx.textures.allocTarget("mergedDirShadowMap",this.size,this.size,!1,this.format);this.mergePass.shader.texA__=t,this.mergePass.shader.texB__=this.staticTexture,this.ctx.engine.pushTarget(a),this.mergePass.render(),this.ctx.engine.popTarget(),t=a}return e&&(t.isDepth()&&(n=this.ctx.textures.allocTarget("dirShadowMapFloat",this.size,this.size,!1,this.format),go.run(t,n),t=n),this.blur.apply(this.ctx,t)),(s=this.ctx).globals.map.h[s.cameraViewProj_id]=i,t},draw:function(e,t){var n=this;if(this.enabled&&this.filterPasses(e)){(this.mode!=Ao.Mixed||this.ctx.computingStatic||this.updateStatic)&&(i=this.ctx.camera.target,null==(s=null==(s=null==this.light?this.ctx.lightSystem.shadowLight:this.light)?null:s.getShadowDirection())?((l=this.lightCamera.target).x=0,l.y=0,l.z=-1):(l=this.lightCamera.target,a=s.x,m=s.y,null==(s=s.z)&&(s=0),null==m&&(m=0),l.x=a=null==a?0:a,l.y=m,l.z=s,a=(a=(l=this.lightCamera.target).x*l.x+l.y*l.y+l.z*l.z)<1e-20?0:1/Math.sqrt(a),l.x*=a,l.y*=a,l.z*=a),this.lightCamera.target.x+=i.x,this.lightCamera.target.y+=i.y,this.lightCamera.target.z+=i.z,(l=this.lightCamera.pos).x=i.x,l.y=i.y,l.z=i.z,this.lightCamera.update(),(l=this.lightCamera.orthoBounds).xMin=1e20,l.xMax=-1e20,l.yMin=1e20,l.yMax=-1e20,l.zMin=1e20,l.zMax=-1e20,null!=e.current&&this.calcShadowBounds(this.lightCamera),this.lightCamera.update());for(var i,s,a,l,r=null,o=!0,u=null,h=null,c=e.discarded,_=e.lastDisc,d=e.current;null!=d;){var p=d.obj.cullingCollider,p=null==p||(o=p!=r?(r=p).inFrustum(n.lightCamera.frustum):o);p?null==u?u=h=d:(h.next=d,h=d):null==c?c=_=d:(_.next=d,_=d),d=d.next}null!=h&&(h.next=null),null!=_&&(_.next=null),e.current=u,e.discarded=c,e.lastDisc=_,this.depth=this.ctx.textures.allocTarget("dirShadowMap",this.size,this.size,!1,C.Depth32);var m=this.depth;m.set_filter(so.Nearest),m=this.processShadowMap(e,m,t),this.syncShader(m),this.updateStatic=!1}},__class__:Vn}),(i["h3d.pass.DefaultShadowMap"]=On).__name__="h3d.pass.DefaultShadowMap",On.__super__=Vn,On.prototype=e(Vn.prototype,{draw:function(e,t){Vn.prototype.draw.call(this,e,t),this.ctx.globals.map.h[this.shadowMapId]={texture:this.dshader.shadowMap__,channel:this.format==_o.nativeFormat?rw.PackedFloat:rw.R};var e=this.ctx.globals,t=this.shadowProjId,n=this.getShadowProj();e.map.h[t]=n,this.ctx.globals.map.h[this.shadowColorId]=this.color,this.ctx.globals.map.h[this.shadowPowerId]=this.power,this.ctx.globals.map.h[this.shadowBiasId]=this.bias},__class__:On}),function(e){this.shaderCache=lw.get(),this.currentOutput=new Cw(null),this.setOutput(e)}),Ao=((i["h3d.pass.OutputShader"]=fo).__name__="h3d.pass.OutputShader",fo.prototype={setOutput:function(e){null==e&&(e=[gw.Value("output.color")]),this.currentOutput.s=this.shaderCache.getLinkShader(e)},compileShaders:function(e,t,n){null==n&&(n=Aw.Default),e.maxChannels=0;for(var i=t;null!=i;){var s=i.s,i=i.next;s.updateConstants(e)}this.currentOutput.next=t;s=this.shaderCache.link(this.currentOutput,n);return this.currentOutput.next=null,s},__class__:fo},(i["h3d.pass.PassList"]=Wn).__name__="h3d.pass.PassList",Wn.prototype={__class__:Wn},(i["h3d.pass.PassObject"]=Nn).__name__="h3d.pass.PassObject",Nn.prototype={__class__:Nn},fe["h3d.pass.RenderMode"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.pass.RenderMode",toString:o},Static:{_hx_name:"Static",_hx_index:1,__enum__:"h3d.pass.RenderMode",toString:o},Dynamic:{_hx_name:"Dynamic",_hx_index:2,__enum__:"h3d.pass.RenderMode",toString:o},Mixed:{_hx_name:"Mixed",_hx_index:3,__enum__:"h3d.pass.RenderMode",toString:o}}),xo=(Ao.__constructs__=[Ao.None,Ao.Static,Ao.Dynamic,Ao.Mixed],Ao.__empty_constructs__=[Ao.None,Ao.Static,Ao.Dynamic,Ao.Mixed],fe["h3d.pass.ShadowSamplingKind"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"h3d.pass.ShadowSamplingKind",toString:o},PCF:{_hx_name:"PCF",_hx_index:1,__enum__:"h3d.pass.ShadowSamplingKind",toString:o},ESM:{_hx_name:"ESM",_hx_index:2,__enum__:"h3d.pass.ShadowSamplingKind",toString:o}}),wo=(xo.__constructs__=[xo.None,xo.PCF,xo.ESM],xo.__empty_constructs__=[xo.None,xo.PCF,xo.ESM],function(){this.textureCount=1,this.shaderCount=1,this.shaderIdMap=[],this.textureIdMap=[]}),yo=((i["h3d.pass.SortByMaterial"]=wo).__name__="h3d.pass.SortByMaterial",wo.prototype={sort:function(e){for(var t=this.shaderCount,n=this.textureCount,i=e.current;null!=i;){var s=i,i=i.next;(this.shaderIdMap[s.shader.id]<t||null==this.shaderIdMap[s.shader.id])&&(this.shaderIdMap[s.shader.id]=this.shaderCount++),(this.textureIdMap[s.texture]<n||null==this.textureIdMap[s.shader.id])&&(this.textureIdMap[s.texture]=this.textureCount++)}var a=e.current;if(null==a)s=null;else{for(var l,r,o,u,h=1,c=0,_=0;;){for(r=a,u=a=null,l=0;null!=r;){++l;for(var d,p=r,c=0,m=0,g=h;m<g&&(++m,++c,null!=(p=p.next)););for(_=h;0<c||0<_&&null!=p;)0!=c&&(0==_||null==p||(r.pass.layer!=p.pass.layer?r.pass.layer-p.pass.layer:0!=(d=this.shaderIdMap[r.shader.id]-this.shaderIdMap[p.shader.id])?d:this.textureIdMap[r.texture]-this.textureIdMap[p.texture])<=0)?(r=(o=r).next,--c):(p=(o=p).next,--_),null!=u?u.next=o:a=o,u=o;r=p}if(u.next=null,l<=1)break;h*=2}s=a}e.current=s},__class__:wo},(i["h3d.prim.BigPrimitive"]=Gn).__name__="h3d.prim.BigPrimitive",Gn.PREV_BUFFER=null,Gn.PREV_INDEX=null,Gn.__super__=Wt,Gn.prototype=e(Wt.prototype,{begin:function(e,t){if(this.startIndex=this.bufPos/this.format.stride|0,65535<=this.startIndex+e){if(65535<=e)throw tl.thrown("Too many vertices in begin()");this.flush()}if(null==this.tmpBuf&&(this.tmpBuf=Gn.PREV_BUFFER,null==this.tmpBuf?this.tmpBuf=qx._new(0):Gn.PREV_BUFFER=null,this.isStatic))for(var n=this.tmpBuf,i=65535*this.format.stride,s=n.pos;s<i;)++s,n.pos==n.array.length&&((a=n.array.length<<1)<128&&(a=128),(l=new Float32Array(a)).set(n.array),n.array=l),n.array[n.pos++]=0;if(!this.isStatic)for(var a,l,n=this.tmpBuf,i=e*this.format.stride+this.bufPos,s=n.pos;s<i;)++s,n.pos==n.array.length&&((a=n.array.length<<1)<128&&(a=128),(l=new Float32Array(a)).set(n.array),n.array=l),n.array[n.pos++]=0;if(null==this.tmpIdx&&(this.tmpIdx=Gn.PREV_INDEX,null==this.tmpIdx?this.tmpIdx=new Array(0):Gn.PREV_INDEX=null),this.idxPos+t>this.tmpIdx.length){for(var r=0==this.tmpIdx.length?1024:this.tmpIdx.length,o=this.idxPos+t;r<o;)r<<=1;for(n=this.tmpIdx;n.length<r;)n.push(0)}},triCount:function(){for(var e=0,t=0,n=this.allIndexes;t<n.length;)e+=n[t++].vertices;return(e+=this.idxPos)/3|0},vertexCount:function(){for(var e=0,t=0,n=this.buffers;t<n.length;)e+=n[t++].vertices;return e+=this.bufPos/this.format.stride|0},flush:function(){var e,t;null!=this.tmpBuf&&(0<this.bufPos&&0<this.idxPos&&(this.flushing=!0,e=(null!=this.allocator?this.allocator:zr).ofSubFloats(this.tmpBuf,this.bufPos/this.format.stride|0,this.format),this.buffers.push(e),t=null!=this.allocator?this.allocator.ofIndexes(this.tmpIdx,this.idxPos):Or.alloc(this.tmpIdx,0,this.idxPos),this.allIndexes.push(t),this.flushing=!1,e.allocPos=this.allocPos,t.allocPos=this.allocPos),(null==Gn.PREV_BUFFER||Gn.PREV_BUFFER.pos<this.tmpBuf.pos)&&(Gn.PREV_BUFFER=this.tmpBuf),(null==Gn.PREV_INDEX||Gn.PREV_INDEX.length<this.tmpIdx.length)&&(Gn.PREV_INDEX=this.tmpIdx),this.tmpBuf=null,this.tmpIdx=null,this.bufPos=0,this.idxPos=0,this.startIndex=0)},render:function(e){null!=this.tmpBuf&&this.flush();for(var t=0,n=this.buffers.length;t<n;){var i=t++;e.renderIndexed(this.buffers[i],this.allIndexes[i])}},getBounds:function(){return this.bounds},dispose:function(){this.clear()},clear:function(){if(this.flushing)throw tl.thrown("Cannot clear() BigPrimitive while it's flushing");for(var e=this.bounds,t=(e.xMin=1e20,e.xMax=-1e20,e.yMin=1e20,e.yMax=-1e20,e.zMin=1e20,e.zMax=-1e20,0),n=this.buffers;t<n.length;){var i=n[t];++t,null!=this.allocator?this.allocator.disposeBuffer(i):i.dispose()}for(t=0,n=this.allIndexes;t<n.length;){var s=n[t];++t,null!=this.allocator?this.allocator.disposeIndexBuffer(s):s.dispose()}this.buffers=[],this.allIndexes=[],this.bufPos=0,this.idxPos=0,this.tmpBuf=null,this.tmpIdx=null},__class__:Gn}),(i["h3d.prim.BlendshapeInstance"]=Un).__name__="h3d.prim.BlendshapeInstance",Un.prototype={dispose:function(){this.blendshape.decref(),S0.get().disposeBuffer(this.shader.weights__)},__class__:Un},(i["h3d.prim.Blendshape"]=Ln).__name__="h3d.prim.Blendshape",Ln.prototype={incref:function(){this.refCount++,1==this.refCount&&this.alloc()},decref:function(){this.refCount--,this.refCount<=0&&(this.refCount=0,this.dispose())},dispose:function(){S0.get().disposeFloats(this.offsetsBuffer),S0.get().disposeBuffer(this.gpuOffsets)},alloc:function(){this.offsetsBuffer=S0.get().allocFloats(3*this.hmdModel.get_data().vertexCount*this.shapes.length);for(var e=0,t=this.shapes.length;e<t;)for(var n=e++,i=this.shapesBytes[n],s=0,a=0;s<this.shapes[n].indexCount;){for(var l=i.remapBytes.getInt32(a<<2),r=!1;!r;){(r=l>>31!=0)&&(l^=-2147483648);for(var o=0,u=this.shapes[n].vertexFormat.inputs,h=0;h<u.length;){for(var c=u[h++],_=0,d=c.type,p=d==nl.__cast(9,A1)?1:d;_<p;){var m,g=_++;"position"==c.name&&(m=i.vertexBytes.getFloat(s*this.shapes[n].vertexFormat.stride+o+g<<2),g=n*this.hmdModel.get_data().vertexCount*3+3*l+g,this.offsetsBuffer.array[g]=m)}d=c.type;o+=d==nl.__cast(9,A1)?1:d}++a<this.hmdModel.get_data().vertexCount&&(l=i.remapBytes.getInt32(a<<2))}++s}this.gpuOffsets=S0.get().ofFloats(this.offsetsBuffer,Lx.get_POS3D(),3)},__class__:Ln},(i["h3d.prim.Collider"]=jn).__name__="h3d.prim.Collider",jn.fromHmd=function(e){for(var t=e.lib.header,n=0,i=t.models;n<i.length;){var s=i[n];if(++n,null!=s.collider&&t.geometries[s.geometry]==e.get_data())return new jn(e,t.colliders[s.collider])}return null},jn.prototype={getBuffers:function(){for(var e=this.hmdModel.dataPosition+this.data.vertexPosition,t=this.hmdModel.dataPosition+this.data.indexPosition,n=[],i=0,s=this.data.vertexCounts.length;i<s;){for(var a=i++,l=this.data.vertexCounts[a],r=this.data.indexCounts[a],a=65536<l,o=3*l*4,u=new IA(new ArrayBuffer(o)),h=(this.hmdModel.lib.resource.entry.readBytes(u,0,e,o),new f0),c=(h.vertexes=new Array(3*l),0),_=3*l;c<_;){var d=c++;h.vertexes[d]=u.getFloat(4*d)}var l=r*(a?4:2),p=new IA(new ArrayBuffer(l)),m=(this.hmdModel.lib.resource.entry.readBytes(p,0,t,l),h.indexes=new Array(r),a?4:2);if(a)for(var g=0;g<r;){var f=g++;h.indexes[f]=p.getInt32(f*m)}else for(var A=0;A<r;){var x=A++;h.indexes[x]=p.getUInt16(x*m)}n.push(h),e+=o,t+=l}return n},__class__:jn},(i["h3d.prim.MeshPrimitive"]=Hn).__name__="h3d.prim.MeshPrimitive",Hn.__super__=Wt,Hn.prototype=e(Wt.prototype,{hasInput:function(e){return null!=this.resolveBuffer(e)},resolveBuffer:function(e){if(null==this.buffers)return null!=this.buffer&&this.buffer.format.hasInput(e)?this.buffer:null;for(var t=0,n=this.buffers;t<n.length;){var i=n[t];if(++t,i.format.hasInput(e))return i}return null},addBuffer:function(e){if(null==this.buffer)this.buffer=e;else{if(null==this.buffers){if(e==this.buffer)throw tl.thrown("Duplicate addBuffer()");this.buffers=[this.buffer]}else if(0<=this.buffers.indexOf(e))throw tl.thrown("Duplicate addBuffer()");this.buffers.unshift(e);for(var t=[],n=0,i=this.buffers;n<i.length;)t.push(i[n++].format);this.formats=jx.make(t)}},dispose:function(){if(Wt.prototype.dispose.call(this),null!=this.buffers){for(var e=0,t=this.buffers;e<t.length;)t[e++].dispose();this.buffers=null,this.formats=null}},render:function(e){null!=this.indexes&&null!=this.indexes.vbuf&&null!=this.buffer&&null!=this.buffer.vbuf||this.alloc(e),null!=this.buffers?e.renderMultiBuffers(this.formats,this.buffers,this.indexes):e.renderIndexed(this.buffer,this.indexes)},__class__:Hn}),(i["h3d.prim.Polygon"]=Yn).__name__="h3d.prim.Polygon",Yn.__super__=Hn,Yn.prototype=e(Hn.prototype,{getBounds:function(){for(var e=new Ur,t=0,n=this.points;t<n.length;){var i=n[t];++t,i.x<e.xMin&&(e.xMin=i.x),i.x>e.xMax&&(e.xMax=i.x),i.y<e.yMin&&(e.yMin=i.y),i.y>e.yMax&&(e.yMax=i.y),i.z<e.zMin&&(e.zMin=i.z),i.z>e.zMax&&(e.zMax=i.z)}return e},alloc:function(e){this.dispose();for(var t=Lx.get_POS3D(),n=(null!=this.normals&&(t=t.append("normal",3)),null!=this.tangents&&(t=t.append("tangent",3)),null!=this.uvs&&(t=t.append("uv",2)),null!=this.colors&&(t=t.append("color",3)),qx._new(0)),i=0,s=this.points.length;i<s;){var a,l,r,o=i++,u=this.points[o],h=u.x,c=(n.pos==n.array.length&&((c=n.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(n.array),n.array=c),n.array[n.pos++]=h,u.y),h=(n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(n.array),n.array=h),n.array[n.pos++]=c,u.z);n.pos==n.array.length&&((u=n.array.length<<1)<128&&(u=128),(u=new Float32Array(u)).set(n.array),n.array=u),n.array[n.pos++]=h,null!=this.normals&&(h=(u=this.normals[o]).x,n.pos==n.array.length&&((a=n.array.length<<1)<128&&(a=128),(a=new Float32Array(a)).set(n.array),n.array=a),n.array[n.pos++]=h,a=u.y,n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(n.array),n.array=h),n.array[n.pos++]=a,h=u.z,n.pos==n.array.length&&((u=n.array.length<<1)<128&&(u=128),(u=new Float32Array(u)).set(n.array),n.array=u),n.array[n.pos++]=h),null!=this.tangents&&(h=(u=this.tangents[o]).x,n.pos==n.array.length&&((l=n.array.length<<1)<128&&(l=128),(l=new Float32Array(l)).set(n.array),n.array=l),n.array[n.pos++]=h,l=u.y,n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(n.array),n.array=h),n.array[n.pos++]=l,h=u.z,n.pos==n.array.length&&((u=n.array.length<<1)<128&&(u=128),(u=new Float32Array(u)).set(n.array),n.array=u),n.array[n.pos++]=h),null!=this.uvs&&(h=(u=this.uvs[o]).u,n.pos==n.array.length&&((r=n.array.length<<1)<128&&(r=128),(r=new Float32Array(r)).set(n.array),n.array=r),n.array[n.pos++]=h,r=u.v,n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(u=new Float32Array(h)).set(n.array),n.array=u),n.array[n.pos++]=r),null!=this.colors&&(u=(h=this.colors[o]).x,n.pos==n.array.length&&((o=n.array.length<<1)<128&&(o=128),(o=new Float32Array(o)).set(n.array),n.array=o),n.array[n.pos++]=u,o=h.y,n.pos==n.array.length&&((u=n.array.length<<1)<128&&(u=128),(u=new Float32Array(u)).set(n.array),n.array=u),n.array[n.pos++]=o,u=h.z,n.pos==n.array.length&&((o=n.array.length<<1)<128&&(o=128),(h=new Float32Array(o)).set(n.array),n.array=h),n.array[n.pos++]=u)}this.buffer=zr.ofFloats(n,t),null!=this.idx&&(this.indexes=Or.alloc(this.idx))},unindex:function(){if(null!=this.idx&&this.points.length!=this.idx.length){for(var e=[],t=0,n=this.idx.length;t<n;){var i=(o=this.points[this.idx[t++]]).x,s=o.y,a=o.z;e.push(new Gr(i=null==i?0:i,s=null==s?0:s,a=null==a?0:a))}if(null!=this.normals){for(var l=[],t=0,n=this.idx.length;t<n;){i=(o=this.normals[this.idx[t++]]).x,s=o.y;null==(a=o.z)&&(a=0),null==s&&(s=0),null==i&&(i=0),l.push(new Gr(i,s,a))}this.normals=l}if(null!=this.tangents){for(var r=[],t=0,n=this.idx.length;t<n;){i=(o=this.tangents[this.idx[t++]]).x,s=o.y;null==(a=o.z)&&(a=0),null==s&&(s=0),null==i&&(i=0),r.push(new Gr(i,s,a))}this.tangents=r}if(null!=this.colors){for(l=[],t=0,n=this.idx.length;t<n;){var o,i=(o=this.colors[this.idx[t++]]).x,s=o.y;null==(a=o.z)&&(a=0),null==s&&(s=0),null==i&&(i=0),l.push(new Gr(i,s,a))}this.colors=l}if(null!=this.uvs){for(r=[],t=0,n=this.idx.length;t<n;)r.push(this.uvs[this.idx[t++]].clone());this.uvs=r}this.points=e,this.idx=null}},translate:function(e,t,n){this.translatedX+=e,this.translatedY+=t,this.translatedZ+=n;for(var i=0,s=this.points;i<s.length;){var a=s[i];++i,a.x+=e,a.y+=t,a.z+=n}},addNormals:function(){this.normals=[];for(var e=0,t=this.points.length;e<t;)this.normals[e++]=new Gr(0,0,0);for(var n=0,e=0,t=this.triCount();e<t;){++e,a=null==this.idx?(i=++n-1,s=++n-1,++n-1):(i=this.idx[n++],s=this.idx[n++],this.idx[n++]);var i,s,a,l=this.points[i],r=this.points[s],o=this.points[a],u=r.x-l.x,h=r.y-l.y,r=r.z-l.z,u=(u=null==u?0:u,h=null==h?0:h,r=null==r?0:r,null==u?0:u),h=null==h?0:h,r=null==r?0:r,c=o.x-l.x,_=o.y-l.y,o=o.z-l.z,l=c=null==c?0:c,c=_=null==_?0:_,d=o=null==o?0:o,o=(l=null==l?0:l,h*(d=null==o?0:o)-r*(c=null==_?0:_)),_=r*l-u*d,r=u*c-h*l,d=(o=null==o?0:o,_=null==_?0:_,r=null==r?0:r,null==o?0:o),u=null==_?0:_,c=null==r?0:r;this.normals[i].x+=d,this.normals[i].y+=u,this.normals[i].z+=c,this.normals[s].x+=d,this.normals[s].y+=u,this.normals[s].z+=c,this.normals[a].x+=d,this.normals[a].y+=u,this.normals[a].z+=c}for(e=0,t=this.normals;e<t.length;){var p=t[e++],m=(m=p.x*p.x+p.y*p.y+p.z*p.z)<1e-20?0:1/Math.sqrt(m);p.x*=m,p.y*=m,p.z*=m}},addTangents:function(){null==this.normals&&this.addNormals(),null==this.uvs&&this.addUVs(),this.tangents=[];for(var e=0,t=this.points.length;e<t;)this.tangents[e++]=new Gr(0,0,0);for(var n=0,e=0,t=this.triCount();e<t;){++e,a=null==this.idx?(i=++n-1,s=++n-1,++n-1):(i=this.idx[n++],s=this.idx[n++],this.idx[n++]);var i,s,a,l=this.points[i],r=this.points[s],o=this.points[a],u=this.uvs[i],h=this.normals[i],c=r.x-l.x,_=r.y-l.y,r=r.z-l.z,c=(c=null==c?0:c,_=null==_?0:_,r=null==r?0:r,null==c?0:c),_=null==_?0:_,r=null==r?0:r,d=o.x-l.x,p=o.y-l.y,o=o.z-l.z,l=(d=null==d?0:d,p=null==p?0:p,o=null==o?0:o,null==d?0:d),d=null==p?0:p,p=null==o?0:o,o=this.uvs[a].v-u.v,o=(c*=o,_*=o,r*=o,this.uvs[s].v-u.v),u=c-(l*=o),c=_-(d*=o),l=r-(p*=o),_=new Gr(u=null==u?0:u,c=null==c?0:c,l=null==l?0:l),d=(m=h).y*_.z-m.z*_.y,r=m.z*_.x-m.x*_.z,o=m.x*_.y-m.y*_.x,p=(d=null==d?0:d,r=null==r?0:r,o=null==o?0:o,null==d?0:d),u=null==r?0:r,c=null==o?0:o,l=(p*=g=(g=p*p+u*u+c*c)<1e-20?0:1/Math.sqrt(g),c*=g,(u*=g)*h.z-c*h.y),d=c*h.x-p*h.z,r=p*h.y-u*h.x,o=_=new Gr(l=null==l?0:l,d=null==d?0:d,r=null==r?0:r),c=(c=o.x*o.x+o.y*o.y+o.z*o.z)<1e-20?0:1/Math.sqrt(c);o.x*=c,o.y*=c,o.z*=c,this.tangents[i].x+=_.x,this.tangents[i].y+=_.y,this.tangents[i].z+=_.z,this.tangents[s].x+=_.x,this.tangents[s].y+=_.y,this.tangents[s].z+=_.z,this.tangents[a].x+=_.x,this.tangents[a].y+=_.y,this.tangents[a].z+=_.z}for(var m,g,e=0,t=this.tangents;e<t.length;)g=(g=(m=t[e++]).x*m.x+m.y*m.y+m.z*m.z)<1e-20?0:1/Math.sqrt(g),m.x*=g,m.y*=g,m.z*=g},addUVs:function(){this.uvs=[];for(var e=0,t=this.points.length;e<t;){var n=e++;this.uvs[n]=new vo(this.points[n].x,this.points[n].y)}},triCount:function(){var e=Hn.prototype.triCount.call(this);return 0!=e?e:(null==this.idx?this.points:this.idx).length/3|0},vertexCount:function(){return this.points.length},getCollider:function(){for(var e=new Array(3*this.points.length),t=new Array(this.idx.length),n=0,i=0,s=this.points;i<s.length;){var a=s[i];++i,e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}for(i=0,s=this.idx.length;i<s;){var l=i++;t[l]=this.idx[l]}var r=new mn;return r.addBuffers(e,t),r},render:function(e){null!=this.buffer&&null!=this.buffer.vbuf||this.alloc(e);var t=this.indexes,n=this.triCount();null==t&&(t=e.mem.getTriIndexes(3*n)),null!=this.buffers?e.renderMultiBuffers(this.formats,this.buffers,t,0,n):e.renderIndexed(this.buffer,t,0,n)},__class__:Yn}),(i["h3d.prim.Cube"]=Zn).__name__="h3d.prim.Cube",Zn.__super__=Yn,Zn.prototype=e(Yn.prototype,{addUVs:function(){this.unindex();var e=new vo(0,1),t=new vo(1,1),n=new vo(0,0),i=new vo(1,0);this.uvs=[t,e,n,t,n,i,t,e,n,t,n,i,t,e,n,t,n,i,e,i,t,e,n,i,e,i,t,e,n,i,e,i,t,e,n,i]},getCollider:function(){var e=this.translatedX,t=this.translatedY,n=this.translatedZ,i=new Ur;return i.xMin=e,i.yMin=t,i.zMin=n,i.xMax=e+this.sizeX*this.scaled,i.yMax=t+this.sizeY*this.scaled,i.zMax=n+this.sizeZ*this.scaled,i},__class__:Zn}),(i["h3d.prim.HMDModel"]=Xn).__name__="h3d.prim.HMDModel",Xn.__super__=Hn,Xn.prototype=e(Hn.prototype,{get_data:function(){return this.lods[0]},hasInput:function(e){return!!Hn.prototype.hasInput.call(this,e)||this.get_data().vertexFormat.hasInput(e)},triCount:function(){return this.get_data().get_indexCount()/3|0},getBounds:function(){return this.get_data().bounds},selectMaterial:function(e,t){this.curMaterial=e+t*this.get_data().indexCounts.length},loadSkin:function(e){this.lib.loadSkin(this.get_data(),e)},alloc:function(e){this.dispose();for(var t=0,n=this.get_data().vertexFormat,i=(this.indexCount=0,this.indexesTriPos=[],0),s=this.lods;i<s.length;)for(var a=s[i],l=(++i,t+=a.vertexCount,0),r=a.indexCounts;l<r.length;){var o=r[l++];this.indexesTriPos.push(this.indexCount/3|0),this.indexCount+=o}this.buffer=new zr(t,n);for(var u,h=65536<t,c=(this.indexes=Or._new(this.indexCount,h),h?4:2),_=this.lib.resource.entry,d=0,p=0,m=this.lods,g=0;g<m.length;){var f=m[g],A=g++;if(f.vertexFormat!=n){for(var x="LOD"+A+" has a different vertex format, has ",w=f.vertexFormat.inputs,y=0;y<w.length;)x+=w[y++].name+" ";x+=", wants ";for(var b=n.inputs,v=0;v<b.length;)x+=b[v++].name+" ";throw tl.thrown(x)}var A=f.vertexCount*n.strideBytes,A=_.fetchBytes(this.dataPosition+f.vertexPosition,A),C=(e.driver.uploadBufferBytes(this.buffer,d,f.vertexCount,A,0),f.get_indexCount()),S=65536<f.vertexCount,k=_.fetchBytes(this.dataPosition+f.indexPosition,(S?4:2)*C),M=h!=S?new IA(new ArrayBuffer(C*c)):k;if(h)for(i=0;i<C;){var I=i++;S?M.setInt32(I<<2,k.getInt32(I<<2)+d):M.setInt32(I<<2,k.getUInt16(I<<1)+d)}else for(s=0;s<C;){var B=s++;S?M.setUInt16(B<<1,k.getInt32(B<<2)+d):M.setUInt16(B<<1,k.getUInt16(B<<1)+d)}e.driver.uploadBufferBytes(this.indexes,p,C,M,0),d+=f.vertexCount,p+=C}null!=this.normalsRecomputed&&(u=this.normalsRecomputed,this.normalsRecomputed=null,this.recomputeNormals(u))},recomputeNormals:function(e){if(null==this.normalsRecomputed&&(null==e||!this.get_data().vertexFormat.hasInput(e))){null==e&&(e="normal");for(var t=qx._new(0),n=0,i=this.lods;n<i.length;){for(var s=i[n],a=(++n,this.lib.getBuffers(s,Lx.get_POS3D())),l=[],r=[],o={},u=0,h=s.vertexCount;u<h;){var c=u++,_=!1,d=a.vertexes[3*c],p=a.vertexes[3*c+1],m=a.vertexes[3*c+2],c=10.01*(d+p+m)|0,g=o[c];if(null==g)o[c]=g=[];else for(var f=0;f<g.length;){var A=g[f],x=(++f,r[A]);if(x.x==d&&x.y==p&&x.z==m){l.push(A),_=!0;break}}_||(l.push(r.length),g.push(r.length),r.push(new Gr(null==d?0:d,null==p?0:p,null==m?0:m)))}for(var w=new Array(0),y=0,b=a.indexes;y<b.length;)w.push(l[b[y++]]);for(var v,C=new Yn(r,w),S=(C.addNormals(),t.pos),k=3*s.vertexCount,M=t.pos;M<k;)++M,t.pos==t.array.length&&((v=t.array.length<<1)<128&&(v=128),(v=new Float32Array(v)).set(t.array),t.array=v),t.array[t.pos++]=0;for(var I=0,B=0,T=s.vertexCount;B<T;){var E=C.normals[l[B++]];t.array[S+I++]=E.x,t.array[S+I++]=E.y,t.array[S+I++]=E.z}}this.addBuffer(zr.ofFloats(t,Lx.make([new Gx(e,3,0)]))),this.normalsRecomputed=e}},addTangents:function(){if(!this.hasInput("tangent")){for(var e=qx._new(0),t=0,n=this.lods;t<n.length;){for(var i=n[t],s=(++t,this.lib.getBuffers(i,Lx.get_POS3D())),a=[],l=[],r=0,o=i.vertexCount;r<o;){for(var u=r++,h=!1,c=s.vertexes[3*u],_=s.vertexes[3*u+1],d=s.vertexes[3*u+2],p=0,m=l.length;p<m;){var g=p++,f=l[g];if(f.x==c&&f.y==_&&f.z==d){a.push(g),h=!0;break}}h||(a.push(l.length),l.push(new Gr(null==c?0:c,null==_?0:_,null==d?0:d)))}for(var A=new Array(0),x=0,w=s.indexes;x<w.length;)A.push(a[w[x++]]);for(var y,b=new Yn(l,A),v=(b.addNormals(),b.addTangents(),e.pos),C=3*i.vertexCount,S=e.pos;S<C;)++S,e.pos==e.array.length&&((y=e.array.length<<1)<128&&(y=128),(y=new Float32Array(y)).set(e.array),e.array=y),e.array[e.pos++]=0;for(var k=0,M=0,I=i.vertexCount;M<I;){var B=b.tangents[a[M++]];e.array[v+k++]=B.x,e.array[v+k++]=B.y,e.array[v+k++]=B.z}}this.addBuffer(zr.ofFloats(e,Lx.make([new Gx("tangent",3,0)])))}},render:function(e){var t,n;this.curMaterial<0?Hn.prototype.render.call(this,e):(t=this.get_data().indexCounts.length,n=this.curMaterial/this.get_data().indexCounts.length|0,null!=this.indexes&&null!=this.indexes.vbuf||this.alloc(e),null==this.buffers?e.renderIndexed(this.buffer,this.indexes,this.indexesTriPos[this.curMaterial],this.lods[n].indexCounts[this.curMaterial%t]/3|0):e.renderMultiBuffers(this.formats,this.buffers,this.indexes,this.indexesTriPos[this.curMaterial],this.lods[n].indexCounts[this.curMaterial%t]/3|0),this.curMaterial=-1)},initCollider:function(e){var t=this.get_data().bounds,n=t.xMax-t.xMin,i=t.yMax-t.yMin,s=t.zMax-t.zMin,t=new An(.5*(t.xMin+t.xMax),.5*(t.yMin+t.yMax),.5*(t.zMin+t.zMax),.5*Math.sqrt(n*n+i*i+s*s));if(null==this.colliderData){n=this.lib.getBuffers(this.get_data(),Lx.get_POS3D());e.setData(n.vertexes,n.indexes),null==this.collider&&(this.collider=new hn(t,e))}else{for(var a=this.colliderData.getBuffers(),l=[],r=(l.length=a.length,0);r<a.length;){var o=a[r],u=new gn;u.source=e.source,u.setData(o.vertexes,o.indexes),l[r++]=u}this.collider=new hn(t,new cn(l))}},getCollider:function(){if(null==this.collider){for(var e=new gn,t=(e.source={entry:this.lib.resource.entry,geometryName:null},0),n=this.lib.header.models;t<n.length;){var i=n[t];if(++t,this.lib.header.geometries[i.geometry]==this.get_data()){e.source.geometryName=i.name;break}}this.initCollider(e)}return this.collider},lodCount:function(){return this.lods.length},screenRatioToLod:function(e){var t=this.lodCount();if(0<=this.forcedLod)return t<(i=this.forcedLod)?t:i;if(1==t)return 0;var n=this.getLodConfig();if(null==n)return 0;var i=n.length>t-1;if(i&&e<n[n.length-1])return t;for(var s=0,a=0,l=i?t-1:n.length;a<l;){var r=a++;if(0==n[r])return s;if(!(n[r]>e))break;++s}return s},getLodConfig:function(){return this.lodConfig},__class__:Xn,__properties__:{get_data:"get_data"}}),function(){Wt.call(this),this.bounds=new Ur;var e=this.bounds;0<e.xMin&&(e.xMin=0),e.xMax<0&&(e.xMax=0),0<e.yMin&&(e.yMin=0),e.yMax<0&&(e.yMax=0),0<e.zMin&&(e.zMin=0),e.zMax<0&&(e.zMax=0),this.tmpBounds=new Ur}),bo=((i["h3d.prim.Instanced"]=yo).__name__="h3d.prim.Instanced",yo.__super__=Wt,yo.prototype=e(Wt.prototype,{setMesh:function(e){0<this.refCount&&(null!=this.primitive&&this.primitive.decref(),e.incref()),this.primitive=e,this.baseBounds=e.getBounds(),null!=e.buffer&&null!=e.indexes||e.alloc(Vr.CURRENT)},dispose:function(){},incref:function(){0==this.refCount&&null!=this.primitive&&this.primitive.incref(),Wt.prototype.incref.call(this)},decref:function(){Wt.prototype.decref.call(this),0==this.refCount&&null!=this.primitive&&this.primitive.decref()},getBounds:function(){return this.bounds},screenRatioToLod:function(e){return this.primitive.screenRatioToLod(e)},render:function(e){null!=this.primitive.buffer&&null!=this.primitive.buffer.vbuf||this.primitive.alloc(e),e.needFlushTarget&&e.doFlushTarget(),null==this.primitive.buffers?e.driver.selectBuffer(this.primitive.buffer):e.driver.selectMultiBuffers(this.primitive.formats,this.primitive.buffers);var t=this.primitive.indexes;null==t&&(t=e.mem.getTriIndexes(3*this.triCount())),e.renderInstanced(t,this.commands)},__class__:yo}),(i["h3d.prim.ModelDatabase"]=qn).__name__="h3d.prim.ModelDatabase",qn.customizeLodConfig=function(e){return e},qn.prototype={getFilePath:function(e){return null==e||""==e?qn.FILE_NAME:e+"/"+qn.FILE_NAME},getRootData:function(e){if(null==e)return null;var t=qn.db.h[e];if(null!=t)return t;var t=this.getFilePath(e),n=N0.currentInstance.fs,i=n instanceof b0?n:null;null!=i&&KA.isAbsolute(t)&&(t=Jn.substr(t,i.baseDir.length,null));try{n=JSON.parse(N0.currentInstance.load(t).toText())}catch(e){if(CA.lastError=e,!(tl.caught(e).unwrap()instanceof v0))throw e;n={}}return qn.db.h[e]=n},getModelData:function(e,t,n){t=t+"/"+n,n=this.getRootData(e);return this.cleanOldModelData(n,t),X.field(n,t)},cleanOldModelData:function(e,t){var n=t+"_LOD0",i=X.field(e,qn.LOD_CONFIG);if(null!=i){for(var s=0,a=X.fields(i);s<a.length;){var l=a[s];++s,t.indexOf(l)<0&&n.indexOf(l)<0||(e[t]={lodConfig:X.field(i,l)},X.deleteField(i,l),e[qn.LOD_CONFIG]=i)}null!=i&&0!=X.fields(i).length||X.deleteField(e,qn.LOD_CONFIG)}null!=(i=X.field(e,n))&&(X.deleteField(e,n),e[t]=i)},loadLodConfig:function(e,t){t=X.field(t,qn.LOD_CONFIG);null!=t&&null!=e.hmd&&(e.hmd.lodConfig=t)},loadDynamicBonesConfig:function(e,t){var i=X.field(t,qn.DYN_BONES_CONFIG);if(null!=i&&null!=e.skin){for(var n=e.skin.getSkinData(),s=0,a=n.allJoints;s<a.length;){var l=a[s],r=(++s,(e=>{for(var t=0;t<i.length;){var n=i[t];if(++t,n.name==e.name)return n}return null})(l));if(null!=r){var o,u=new ln,h=(u.index=l.index,u.name=l.name,u.bindIndex=l.bindIndex,u.splitIndex=l.splitIndex,u.defMat=l.defMat,u.transPos=l.transPos,u.parent=l.parent,u.follow=l.follow,u.subs=l.subs,u.offsets=l.offsets,u.offsetRay=l.offsetRay,u.retargetAnim=l.retargetAnim,u.damping=r.damping,u.resistance=r.resistance,u.slackness=r.slackness,u.stiffness=r.stiffness,u.additive=r.additive,o=null==r.lockAxis?new Gr(0,0,0):(o=null!=(o=r.lockAxis)?o.x:null,h=null!=(h=r.lockAxis)?h.y:null,c=null!=(c=r.lockAxis)?c.z:null,new Gr(o=null==o?0:o,h=null==h?0:h,c=null==c?0:c)),u.lockAxis=o,r.globalForce.x),c=r.globalForce.y,r=r.globalForce.z,r=(u.globalForce=new Gr(h=null==h?0:h,c=null==c?0:c,r=null==r?0:r),n.allJoints[l.index]=u,l.parent),r=(null!=r&&r.subs.push(u),l.parent);if(null!=r&&Jn.remove(r.subs,l),null!=u.subs)for(var _=0,d=u.subs;_<d.length;)d[_++].parent=u}}e.skin.setSkinData(n)}},loadModelProps:function(e){var t=this.getModelData(e.resourceDirectory,e.resourceName,e.objectName);null!=t&&(this.loadLodConfig(e,t),this.loadDynamicBonesConfig(e,t))},__class__:qn},function(){Wt.call(this)}),vo=((i["h3d.prim.Plane2D"]=bo).__name__="h3d.prim.Plane2D",bo.get=function(){var e=Vr.CURRENT,t=e.resCache.h[bo.__id__];return null==t&&(t=new bo,e.resCache.set(bo,t)),t},bo.__super__=Wt,bo.prototype=e(Wt.prototype,{triCount:function(){return 2},alloc:function(e){var t,n,i=qx._new(0);i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=-1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=-1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=0,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=-1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=0,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=0,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=-1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=1,i.pos==i.array.length&&((t=i.array.length<<1)<128&&(t=128),(n=new Float32Array(t)).set(i.array),i.array=n),i.array[i.pos++]=0,this.buffer=zr.ofFloats(i,Lx.get_XY_UV())},render:function(e){null!=this.buffer&&null!=this.buffer.vbuf||this.alloc(e);var t=this.buffer;e.renderBuffer(t,e.mem.getQuadIndexes(t.vertices),2,0,-1)},__class__:bo}),function(e,t){this.u=e,this.v=t}),Co=((i["h3d.prim.UV"]=vo).__name__="h3d.prim.UV",vo.prototype={clone:function(){return new vo(this.u,this.v)},__class__:vo},function(e,t,n){this.curScreenRatio=1,this.inheritLod=!1,Hr.call(this,n),this.set_primitive(e),null==t&&(t=uo.current.createMaterial()).set_props(t.getDefaultProps()),this.material=t}),So=((i["h3d.scene.Mesh"]=Co).__name__="h3d.scene.Mesh",Co.screenRatio=function(e,t,n){var i=e._41,s=e._42,a=e._43,l=(g=i=null==i?0:i,f=s=null==s?0:s,A=a=null==a?0:a,0),r=0,o=0,l=Math.sqrt(e._11*e._11+e._12*e._12+e._13*e._13),r=Math.sqrt(e._21*e._21+e._22*e._22+e._23*e._23),o=Math.sqrt(e._31*e._31+e._32*e._32+e._33*e._33),e=(e._11*(e._22*e._33-e._23*e._32)+e._12*(e._23*e._31-e._21*e._33)+e._13*(e._21*e._32-e._22*e._31)<0&&(l*=-1,r*=-1,o*=-1),t.xMax-t.xMin),u=(u=t.yMax-t.yMin)<(t=t.zMax-t.zMin)?t:u,o=r<o?o:r,r=(e<u?u:e)*(l<o?o:l)/2;null==n.directions&&(n.directions=new Wr,n.directions._44=0),0==n.directions._44&&n.calcDirections(),u=n.directions._21,o=n.directions._22,l=n.directions._23;null==n.directions&&(n.directions=new Wr,n.directions._44=0),0==n.directions._44&&n.calcDirections();var u=i=null==(i=n.directions._31-u)?0:i,o=s=null==(s=n.directions._32-o)?0:s,l=a=null==(a=n.directions._33-l)?0:a,h=(u=null==u?0:u,o=null==o?0:o),c=l=null==l?0:l,_=u*u+h*h+c*c,d=u=null==(u=i=null==(i=u*(_=_<1e-20?0:1/Math.sqrt(_)))?0:i)?0:u,h=o=null==(o=s=null==(s=h*_)?0:s)?0:o,c=l=null==(l=a=null==(a=c*_)?0:a)?0:l,_=u=null==(u=i=null==(i=g+(u=null==(u=i=null==(i=d*r)?0:i)?0:u))?0:i)?0:u,p=o=null==(o=s=null==(s=f+(o=null==(o=s=null==(s=h*r)?0:s)?0:o))?0:s)?0:o,m=l=null==(l=a=null==(a=A+(l=null==(l=a=null==(a=c*r)?0:a)?0:l))?0:a)?0:l,g=u=null==(u=i=null==(i=g-(u=null==(u=i=null==(i=d*r)?0:i)?0:u))?0:i)?0:u,d=o=null==(o=s=null==(s=f-(o=null==(o=s=null==(s=h*r)?0:s)?0:o))?0:s)?0:o,u=l=null==(l=a=null==(a=A-(l=null==(l=a=null==(a=c*r)?0:a)?0:l))?0:a)?0:l,f=0,h=0,o=0,i=_,s=p,f=i=null==_?0:i,h=s=null==p?0:s,o=a=null==m?0:m,A=n.m,c=f*A._12+h*A._22+o*A._32+A._42,r=1/(f*A._14+h*A._24+o*A._34+A._44),l=(f=(f*A._11+h*A._21+o*A._31+A._41)*r,h=c*r,0),_=0,p=0,i=g,s=d,_=s=null==d?0:s,p=a=null==u?0:u,c=(l=i=null==g?0:i)*(A=n.m)._12+_*A._22+p*A._32+A._42,m=(e=(l=.5*(1+(l=(l*A._11+_*A._21+p*A._31+A._41)*(r=1/(l*A._14+_*A._24+p*A._34+A._44)))))-(f=.5*(1+f)))<(t=(_=.5*(1-(_=c*r)))-(h=.5*(1-h)))?t:e;return m*m},Co.__super__=Hr,Co.prototype=e(Hr.prototype,{addBoundsRec:function(e,t){var n,i;Hr.prototype.addBoundsRec.call(this,e,t),null!=this.primitive&&0==(512&this.flags)&&(n=this.primitive.getBounds(),null==t?((i=new Ur).xMin=n.xMin,i.xMax=n.xMax,i.yMin=n.yMin,i.yMax=n.yMax,i.zMin=n.zMin,i.zMax=n.zMax,i.transform(this.absPos)):(Co.tmpMat.multiply(this.absPos,t),(i=new Ur).xMin=n.xMin,i.xMax=n.xMax,i.yMin=n.yMin,i.yMax=n.yMax,i.zMin=n.zMin,i.zMax=n.zMax,i.transform(Co.tmpMat)),i.xMin<e.xMin&&(e.xMin=i.xMin),i.xMax>e.xMax&&(e.xMax=i.xMax),i.yMin<e.yMin&&(e.yMin=i.yMin),i.yMax>e.yMax&&(e.yMax=i.yMax),i.zMin<e.zMin&&(e.zMin=i.zMin),i.zMax>e.zMax)&&(e.zMax=i.zMax)},clone:function(e){e=null==e?new Co(null,this.material):e;return e.set_primitive(this.primitive),e.material=this.material.clone(),Hr.prototype.clone.call(this,e),e},getLocalCollider:function(){return this.primitive.getCollider()},draw:function(e){this.primitive.selectMaterial(0,this.primitive.screenRatioToLod(this.curScreenRatio)),this.primitive.render(e.engine)},calcScreenRatio:function(e){var t;null!=this.primitive&&1!=this.primitive.lodCount()&&(0<=e.forcedScreenRatio?this.curScreenRatio=e.forcedScreenRatio:null==(t=this.primitive.getBounds())?this.curScreenRatio=1:(this.curScreenRatio=Co.screenRatio(this.getAbsPos(),t,e.camera),this.inheritLod&&(e.forcedScreenRatio=this.curScreenRatio)))},emit:function(e){if(this.calcScreenRatio(e),!(this.primitive.screenRatioToLod(this.curScreenRatio)>=this.primitive.lodCount()))for(var t=this.material.passes;null!=t;)t.culled||(e.emitPass(t,this).index=0),t=t.nextPass},getMaterials:function(e,t){return null==t&&(t=!0),null==e&&(e=[]),null!=this.material&&e.indexOf(this.material)<0&&e.push(this.material),Hr.prototype.getMaterials.call(this,e,t)},onAdd:function(){Hr.prototype.onAdd.call(this),null!=this.primitive&&this.primitive.incref()},onRemove:function(){null!=this.primitive&&this.primitive.decref();var e=this.blendshapeInstance;null!=e&&e.dispose(),this.blendshapeInstance=null,Hr.prototype.onRemove.call(this)},set_primitive:function(e){return e!=this.primitive&&0!=(32&this.flags)&&(null!=this.primitive&&this.primitive.decref(),null!=e)&&e.incref(),this.primitive=e},__class__:Co,__properties__:e(Hr.prototype.__properties__,{set_primitive:"set_primitive"})}),(i["h3d.scene.Graphics"]=Kn).__name__="h3d.scene.Graphics",Kn.__super__=Co,Kn.prototype=e(Co.prototype,{onRemove:function(){Co.prototype.onRemove.call(this),this.bprim.clear()},flushLine:function(){for(var e,t=this.tmpPoints,n=t.length-1,i=t[n],s=t[0],a=s.x==i.x&&s.y==i.y&&s.z==i.z,l=t.length,r=(a?s!=i&&(--l,i=t[--n]):(null==(e=t[n-1])&&(e=s),t.push(new So(2*i.x-e.x,2*i.y-e.y,2*i.z-e.z,0,0,0,0)),null==(e=t[1])&&(e=s),i=new So(2*s.x-e.x,2*s.y-e.y,2*s.z-e.z,0,0,0,0)),this.bprim.vertexCount()),o=r,u=0,h=0,c=l;h<c;){var _=h++,d=t[(1+_)%t.length],p=i.y-s.y,m=s.x-i.x,g=1/Math.sqrt(p*p+m*m),f=s.y-d.y,A=d.x-s.x,x=1/Math.sqrt(f*f+A*A),f=p*g+f*x,A=m*g+A*x,x=1/Math.sqrt(f*f+A*A),x=(f*=x,A*=x,.5*this.lineSize/(f*p*g+A*m*g)),p=(f*=x,A*=x,_<l-1||a),m=(this.bprim.begin(2,p?6:0),this.bprim),g=(m.tmpBuf.array[m.bufPos++]=s.x+f,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=s.y+A,this.bprim),m=(x.tmpBuf.array[x.bufPos++]=s.z,this.bprim),g=(m.tmpBuf.array[m.bufPos++]=0,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=0,this.bprim),m=(x.tmpBuf.array[x.bufPos++]=1,this.bprim),g=(m.tmpBuf.array[m.bufPos++]=0,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=u,this.bprim),m=(x.tmpBuf.array[x.bufPos++]=s.r,this.bprim),g=(m.tmpBuf.array[m.bufPos++]=s.g,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=s.b,this.bprim),m=(x.tmpBuf.array[x.bufPos++]=s.a,this.bprim),g=(m.tmpBuf.array[m.bufPos++]=s.x-f,this.bprim),x=(g.tmpBuf.array[g.bufPos++]=s.y-A,this.bprim),m=(x.tmpBuf.array[x.bufPos++]=s.z,this.bprim),f=(m.tmpBuf.array[m.bufPos++]=0,this.bprim),g=(f.tmpBuf.array[f.bufPos++]=0,this.bprim),A=(g.tmpBuf.array[g.bufPos++]=1,this.bprim),x=(A.tmpBuf.array[A.bufPos++]=1,this.bprim),m=(x.tmpBuf.array[x.bufPos++]=u,this.bprim),f=(m.tmpBuf.array[m.bufPos++]=s.r,this.bprim),g=(f.tmpBuf.array[f.bufPos++]=s.g,this.bprim),A=(g.tmpBuf.array[g.bufPos++]=s.b,this.bprim);A.tmpBuf.array[A.bufPos++]=s.a,u=1-u,p&&(x=_==n?r-o:2,(m=this.bprim).tmpIdx[m.idxPos++]=m.startIndex,(f=this.bprim).tmpIdx[f.idxPos++]=1+f.startIndex,(g=this.bprim).tmpIdx[g.idxPos++]=x+g.startIndex,(A=this.bprim).tmpIdx[A.idxPos++]=x+A.startIndex,(p=this.bprim).tmpIdx[p.idxPos++]=1+p.startIndex,(_=this.bprim).tmpIdx[_.idxPos++]=1+x+_.startIndex),o+=2,i=s,s=d}},flush:function(){0!=this.tmpPoints.length&&this.is3D&&(this.flushLine(),this.tmpPoints=[])},sync:function(e){Co.prototype.sync.call(this,e),this.flush(),this.bprim.flush()},draw:function(e){this.flush(),this.bprim.flush(),Co.prototype.draw.call(this,e)},clear:function(){this.flush(),this.bprim.clear()},lineStyle:function(e,t,n){null==n&&(n=1),null==t&&(t=0),null==e&&(e=0),this.flush(),0<e&&this.lineSize!=e&&(this.lineSize=e,this.is3D||(this.lineShader.width__=this.lineSize)),this.setColor(t,n)},setColor:function(e,t){this.curA=t=null==t?1:t,this.curR=(e>>16&255)/255,this.curG=(e>>8&255)/255,this.curB=(255&e)/255},moveTo:function(e,t,n){this.is3D?(this.flush(),this.lineTo(e,t,n)):(this.curX=e,this.curY=t,this.curZ=n)},lineTo:function(e,t,n){if(this.is3D)l=this.curX,r=this.curY,o=this.curZ,l<(u=this.bprim.bounds).xMin&&(u.xMin=l),u.xMax<l&&(u.xMax=l),r<u.yMin&&(u.yMin=r),u.yMax<r&&(u.yMax=r),o<u.zMin&&(u.zMin=o),u.zMax<o&&(u.zMax=o),e<(u=this.bprim.bounds).xMin&&(u.xMin=e),u.xMax<e&&(u.xMax=e),t<u.yMin&&(u.yMin=t),u.yMax<t&&(u.yMax=t),n<u.zMin&&(u.zMin=n),u.zMax<n&&(u.zMax=n),this.tmpPoints.push(new So(e,t,n,this.curR,this.curG,this.curB,this.curA));else{this.bprim.begin(4,6);{var i=e-this.curX,s=t-this.curY,a=n-this.curZ,l=this.curX,r=this.curY,o=this.curZ,u=this.bprim.bounds,u=(l<u.xMin&&(u.xMin=l),u.xMax<l&&(u.xMax=l),r<u.yMin&&(u.yMin=r),u.yMax<r&&(u.yMax=r),o<u.zMin&&(u.zMin=o),u.zMax<o&&(u.zMax=o),this.bprim.bounds),u=(e<u.xMin&&(u.xMin=e),u.xMax<e&&(u.xMax=e),t<u.yMin&&(u.yMin=t),u.yMax<t&&(u.yMax=t),n<u.zMin&&(u.zMin=n),u.zMax<n&&(u.zMax=n),this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curX,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curY,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curZ,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=i,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=s,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=a,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=0,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=0,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curR,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curG,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curB,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curA,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curX,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curY,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curZ,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=i,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=s,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=a,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=0,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=1,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curR,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curG,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curB,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curA,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curX,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curY,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curZ,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=i,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=s,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=a,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=1,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=0,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curR,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curG,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curB,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curA,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curX,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curY,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=this.curZ,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=i,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=s,this.bprim),u=(u.tmpBuf.array[u.bufPos++]=a,this.bprim);u.tmpBuf.array[u.bufPos++]=1}(u=this.bprim).tmpBuf.array[u.bufPos++]=1,(u=this.bprim).tmpBuf.array[u.bufPos++]=this.curR,(u=this.bprim).tmpBuf.array[u.bufPos++]=this.curG,(u=this.bprim).tmpBuf.array[u.bufPos++]=this.curB,(u=this.bprim).tmpBuf.array[u.bufPos++]=this.curA,(u=this.bprim).tmpIdx[u.idxPos++]=u.startIndex,(u=this.bprim).tmpIdx[u.idxPos++]=1+u.startIndex,(u=this.bprim).tmpIdx[u.idxPos++]=2+u.startIndex,(u=this.bprim).tmpIdx[u.idxPos++]=2+u.startIndex,(u=this.bprim).tmpIdx[u.idxPos++]=3+u.startIndex,(u=this.bprim).tmpIdx[u.idxPos++]=1+u.startIndex,this.curX=e,this.curY=t,this.curZ=n}},__class__:Kn}),function(e,t,n,i,s,a,l){this.x=e,this.y=t,this.z=n,this.r=i,this.g=s,this.b=a,this.a=l}),ko=((i["h3d.scene._Graphics.GPoint"]=So).__name__="h3d.scene._Graphics.GPoint",So.prototype={__class__:So},(i["h3d.scene.Interactive"]=$n).__name__="h3d.scene.Interactive",$n.__interfaces__=[Ut],$n.__super__=Hr,$n.prototype=e(Hr.prototype,{onAdd:function(){this.scene=this.getScene(),null!=this.scene&&this.scene.addEventTarget(this),Hr.prototype.onAdd.call(this)},onRemove:function(){null!=this.scene&&(this.scene.removeEventTarget(this),this.scene=null),Hr.prototype.onRemove.call(this)},sync:function(e){Hr.prototype.sync.call(this,e),this.emittedLastFrame=!1},emit:function(e){Hr.prototype.emit.call(this,e),this.emittedLastFrame=!0},getInteractiveScene:function(){return this.scene},handleEvent:function(e){switch(this.propagateEvents&&(e.propagate=!0),this.cancelEvents&&(e.cancel=!0),e.kind._hx_index){case 0:(this.enableRightButton||0==e.button)&&(this.mouseDownButton=e.button,this.onPush(e),e.cancel)&&(this.mouseDownButton=-1);break;case 1:var t;!this.enableRightButton&&0!=e.button||(this.onRelease(e),t=l0.frameCount,this.mouseDownButton!=e.button)||this.lastClickFrame==t&&!this.allowMultiClick||(this.onClick(e),this.lastClickFrame=t),this.mouseDownButton=-1;break;case 2:this.onMove(e);break;case 3:this.onOver(e);break;case 4:this.onOut(e);break;case 5:this.onWheel(e);break;case 6:this.onFocus(e);break;case 7:this.onFocusLost(e);break;case 8:this.onKeyDown(e);break;case 9:this.onKeyUp(e);break;case 10:!this.enableRightButton&&0!=e.button||(this.onRelease(e),this.mouseDownButton!=e.button)||this.onReleaseOutside(e),this.mouseDownButton=-1;break;case 11:this.onTextInput(e);break;case 12:this.onCheck(e)}},set_cursor:function(e){return this.cursor=e,null!=this.scene&&null!=this.scene.events&&this.scene.events.updateCursor(this),e},onOver:function(e){},onOut:function(e){},onPush:function(e){},onRelease:function(e){},onReleaseOutside:function(e){},onClick:function(e){},onMove:function(e){},onWheel:function(e){},onFocus:function(e){},onFocusLost:function(e){},onKeyUp:function(e){},onKeyDown:function(e){},onCheck:function(e){},onTextInput:function(e){},__class__:$n,__properties__:e(Hr.prototype.__properties__,{set_cursor:"set_cursor"})}),(i["h3d.scene.Light"]=ei).__name__="h3d.scene.Light",ei.__super__=Hr,ei.prototype=e(Hr.prototype,{emit:function(e){e.emitLight(this)},getShadowDirection:function(){return null},__class__:ei}),(i["h3d.scene.LightSystem"]=ti).__name__="h3d.scene.LightSystem",ti.prototype={initGlobals:function(e){},initLights:function(e){if(this.ctx=e,null==this.shadowLight||0==(32&this.shadowLight.flags))for(var t=e.lights;null!=t;){if(null!=t.getShadowDirection()){this.shadowLight=t;break}t=t.next}},computeLight:function(e,t){return t},dispose:function(){},__class__:ti},(i["h3d.scene.MultiMaterial"]=ni).__name__="h3d.scene.MultiMaterial",ni.__super__=Co,ni.prototype=e(Co.prototype,{clone:function(e){for(var t=null==e?new ni(null,this.materials):e,n=(t.materials=[],0),i=this.materials;n<i.length;){var s=i[n];++n,t.materials.push(null==s?null:s.clone())}return Co.prototype.clone.call(this,t),t.material=t.materials[0],t},emit:function(e){if(this.calcScreenRatio(e),!(this.primitive.screenRatioToLod(this.curScreenRatio)>=this.primitive.lodCount()))for(var t=0,n=this.materials.length;t<n;){var i=t++,s=this.materials[i];if(null!=s)for(var a=i,l=(null==i&&(a=0),s.passes);null!=l;)l.culled||(e.emitPass(l,this).index=a),l=l.nextPass}},getMaterials:function(e,t){null==t&&(t=!0),null==e&&(e=[]);for(var n=0,i=this.materials;n<i.length;){var s=i[n];++n,null!=s&&e.indexOf(s)<0&&e.push(s)}if(t)for(n=0,i=this.children;n<i.length;)i[n++].getMaterials(e);return e},draw:function(e){1<this.materials.length&&this.primitive.selectMaterial(e.drawPass.index,this.primitive.screenRatioToLod(this.curScreenRatio)),this.primitive.render(e.engine)},__class__:ni}),(i["h3d.scene.RenderContext"]=ii).__name__="h3d.scene.RenderContext",ii.__super__=jt,ii.prototype=e(jt.prototype,{setCamera:function(e){this.camera.load(e),this.camera.reverseDepth=this.useReverseDepth,this.camera.update(),this.globals.map.h[this.cameraView_id]=this.camera.mcam,this.globals.map.h[this.cameraNear_id]=this.camera.zNear,this.globals.map.h[this.cameraFar_id]=this.camera.zFar,this.globals.map.h[this.cameraProj_id]=this.camera.mproj,this.globals.map.h[this.cameraPos_id]=this.camera.pos;var e=this.camera.mproj._11,t=this.camera.mproj._22,n=this.camera.mproj._33,i=this.camera.mproj._44,s=(this.globals.map.h[this.cameraProjDiag_id]=new q(e=null==e?0:e,t=null==t?0:t,n=null==n?0:n,i=null==i?1:i),null==this.globals.map.h[this.cameraPreviousViewProj_id]&&(s=this.camera.m.clone(),this.globals.map.h[this.cameraPreviousViewProj_id]=s),null==this.globals.map.h[this.cameraJitterOffsets_id]&&(this.globals.map.h[this.cameraJitterOffsets_id]=new q(0,0,0,0)),this.globals.map.h[this.cameraViewProj_id]=this.camera.m,this.camera.getInverseViewProj());this.globals.map.h[this.cameraInverseViewProj_id]=s,this.globals.map.h[this.cameraProjDepth_id]=this.useReverseDepth?-1:1},setupTarget:function(){var e=this.engine.driver.hasFeature(Yr.BottomLeftCoords)&&null!=this.engine.getCurrentTarget();this.globals.map.h[this.cameraProjFlip_id]=e?-1:1},getCurrentPixelSize:function(){var e=this.engine.getCurrentTarget(),t=2/(null==e?this.engine:e).width,e=2/(null==e?this.engine:e).height;return new Gr(t=null==t?0:t,e=null==e?0:e,0)},start:function(){this.drawPass=null,this.passes=[],this.lights=null,this.cachedPos=0,this.visibleFlag=!0,this.forcedScreenRatio=-1,this.time+=this.elapsedTime,this.frame++,this.setCurrent(),this.engine=Vr.CURRENT,this.globals.map.h[this.globalTime_id]=this.time,this.globals.map.h[this.globalFrame_id]=this.frame;var e=this.getCurrentPixelSize();this.globals.map.h[this.pixelSize_id]=e,this.setCamera(this.scene.camera)},emitPass:function(e,t){0==(1&e.rendererFlags)&&this.scene.renderer.setPassFlags(e);var n=this.allocPool;return null==n?((n=new Nn).nextAlloc=this.allocFirst,this.allocFirst=n):this.allocPool=n.nextAlloc,n.pass=e,n.obj=t,this.passes.length<=e.passId&&(this.passes.length=e.passId),n.next=this.passes[e.passId],this.passes[e.passId]=n},allocShaderList:function(e,t){var n=this.cachedShaderList[this.cachedPos++];return null==n&&(n=new Cw(null),this.cachedShaderList[this.cachedPos-1]=n),n.s=e,n.next=t,n},emitLight:function(e){e.next=this.lights,this.lights=e},uploadParams:function(){this.fillParams(this.shaderBuffers,this.drawPass.shader,this.drawPass.shaders),this.engine.uploadInstanceShaderBuffers(this.shaderBuffers)},done:function(){this.drawPass=null;for(var e=this.allocFirst;null!=e&&e!=this.allocPool;)e.obj=null,e.pass=null,e.shader=null,e.shaders=null,e.next=null,e.index=0,e.texture=0,e=e.nextAlloc;null!=this.allocPool&&(this.allocFirst=this.allocFirst.nextAlloc),this.allocPool=this.allocFirst;for(var t=0,n=this.cachedShaderList;t<n.length;){var i=n[t];++t,i.s=null,i.next=null}this.passes=[],this.lights=null,this.cameraFrustumUploaded=!1,this.globals.map.h[this.cameraPreviousViewProj_id].load(this.globals.map.h[this.cameraViewProj_id]),this.computeVelocity=!1,this.clearCurrent()},dispose:function(){jt.prototype.dispose.call(this),null!=this.cameraFrustumBuffer&&S0.get().disposeBuffer(this.cameraFrustumBuffer)},initGlobals:function(){this.cameraView_id=dw.allocID("camera.view"),this.cameraNear_id=dw.allocID("camera.zNear"),this.cameraFar_id=dw.allocID("camera.zFar"),this.cameraProj_id=dw.allocID("camera.proj"),this.cameraPos_id=dw.allocID("camera.position"),this.cameraProjDiag_id=dw.allocID("camera.projDiag"),this.cameraProjFlip_id=dw.allocID("camera.projFlip"),this.cameraProjDepth_id=dw.allocID("camera.projDepth"),this.cameraViewProj_id=dw.allocID("camera.viewProj"),this.cameraInverseViewProj_id=dw.allocID("camera.inverseViewProj"),this.cameraPreviousViewProj_id=dw.allocID("camera.previousViewProj"),this.cameraJitterOffsets_id=dw.allocID("camera.jitterOffsets"),this.globalTime_id=dw.allocID("global.time"),this.pixelSize_id=dw.allocID("global.pixelSize"),this.globalModelView_id=dw.allocID("global.modelView"),this.globalModelViewInverse_id=dw.allocID("global.modelViewInverse"),this.globalPreviousModelView_id=dw.allocID("global.previousModelView"),this.globalFrame_id=dw.allocID("global.frame")},__class__:ii}),(i["h3d.scene.PassObjects"]=si).__name__="h3d.scene.PassObjects",si.prototype={__class__:si},(i["h3d.scene.Renderer"]=ai).__name__="h3d.scene.Renderer",ai.__super__=Mn,ai.prototype=e(Mn.prototype,{dispose:function(){for(var e=0,t=this.allPasses;e<t.length;)t[e++].dispose();for(e=0,t=this.effects;e<t.length;)t[e++].dispose();null!=this.ctx.lightSystem&&this.ctx.lightSystem.dispose(),this.passObjects=new at},mark:function(e){},depthSort:function(e,t){for(var n,i=this.ctx.camera.m,s=t.current;null!=s;){var a=s,s=s.next,l=a.obj.absPos._41*i._13+a.obj.absPos._42*i._23+a.obj.absPos._43*i._33+i._43,r=a.obj.absPos._41*i._14+a.obj.absPos._42*i._24+a.obj.absPos._43*i._34+i._44;a.depth=0<r?l/r:-l/r}if(e&&!this.ctx.camera.reverseDepth||!e&&this.ctx.camera.reverseDepth)if(null==(n=t.current))a=null;else{for(var o=1,u=0,h=0;;){for(p=n,f=n=null,d=0;null!=p;){++d,m=p;for(var c=u=0,_=o;c<_&&(++c,++u,null!=(m=m.next)););for(h=o;0<u||0<h&&null!=m;)0!=u&&(0==h||null==m||(p.pass.layer!=m.pass.layer?p.pass.layer-m.pass.layer:p.depth==m.depth?0:p.depth>m.depth?1:-1)<=0)?(p=(g=p).next,--u):(m=(g=m).next,--h),null!=f?f.next=g:n=g,f=g;p=m}if(f.next=null,d<=1)break;o*=2}a=n}else if(null==(n=t.current))a=null;else{for(var d,p,m,g,f,o=1,u=0,h=0;;){for(p=n,f=n=null,d=0;null!=p;){++d,m=p;for(c=u=0,_=o;c<_&&(++c,++u,null!=(m=m.next)););for(h=o;0<u||0<h&&null!=m;)0!=u&&(0==h||null==m||(p.pass.layer!=m.pass.layer?p.pass.layer-m.pass.layer:p.depth==m.depth?0:p.depth<m.depth?1:-1)<=0)?(p=(g=p).next,--u):(m=(g=m).next,--h),null!=f?f.next=g:n=g,f=g;p=m}if(f.next=null,d<=1)break;o*=2}a=n}t.current=a},resetTarget:function(){this.hasSetTarget&&(this.ctx.engine.popTarget(),this.hasSetTarget=!1)},has:function(e){return null!=this.passObjects.h[e]},setPassFlags:function(e){e.rendererFlags|=1},get:function(e){e=this.passObjects.h[e];return null==e?this.emptyPasses:(e.rendered=!0,e.passes)},render:function(){throw tl.thrown("Not implemented")},computeStatic:function(){throw tl.thrown("Not implemented")},start:function(){},startEffects:function(){for(var e=0,t=this.effects;e<t.length;){var n=t[e];++e,n.enabled&&n.start(this)}},process:function(e){this.hasSetTarget=!1;for(var t=0,n=this.allPasses;t<n.length;)n[t++].setContext(this.ctx);for(t=0;t<e.length;){var i=e[t];++t,this.passObjects.h[i.name]=i}this.ctx.textures.begin(),this.ctx.computingStatic?this.computeStatic():this.render(),this.resetTarget();for(t=0;t<e.length;)this.passObjects.h[e[t++].name]=null},__class__:ai}),function(e,t){null==t&&(t=!0),null==e&&(e=!0),this.interactiveOffset=0,this.ratioY=1,this.ratioX=1,this.offsetY=0,this.offsetX=0,Hr.call(this,null),this.window=r0.getInstance(),this.eventListeners=[],this.hitInteractives=[],this.interactives=[],this.camera=new $t;var n=Vr.CURRENT;null!=n&&(this.camera.screenRatio=n.width/n.height),this.ctx=new ii(this),e&&this.set_renderer(uo.current.createRenderer()),t&&(this.lightSystem=uo.current.createLightSystem())}),Mo=((i["h3d.scene.Scene"]=ko).__name__="h3d.scene.Scene",ko.__interfaces__=[Sr,x],ko.__super__=Hr,ko.prototype=e(Hr.prototype,{setEvents:function(e){this.events=e},dispatchListeners:function(e){for(var t=0,n=this.eventListeners;t<n.length&&(n[t++](e),e.propagate););},set_renderer:function(e){return null!=(this.renderer=e)&&(e.ctx=this.ctx),e},sortHitPointByCameraDistance:function(e,t){return e.hitPoint.w>t.hitPoint.w?-1:1},dispatchEvent:function(e,t){t.handleEvent(e)},isInteractiveVisible:function(e){for(var t=e;t!=this;){if(null==t||0==(2&t.flags))return!1;t=t.parent}return!0},handleEvent:function(e,z){if(0!=this.interactives.length){if(0==this.hitInteractives.length){for(var t=e.relY-this.offsetY,n=2*((e.relX-this.offsetX)/(this.ratioX*this.window.get_width())-.5),Q=2*-(t/(this.ratioY*this.window.get_height())-.5),i=this.camera.unproject(n,Q,0),n=this.camera.unproject(n,Q,1),Q=_=null==(_=s=null==(s=i.x)?0:s)?0:_,V=d=null==(d=t=null==(t=i.y)?0:t)?0:d,i=p=null==(p=c=null==(c=i.z)?0:c)?0:p,s=n.x,t=n.y,a=(null==(p=c=null==(c=n.z)?0:c)&&(p=0),null==(d=t=null==t?0:t)&&(d=0),null==(_=s=null==s?0:s)&&(_=0),new _n),O=(a.px=Q,a.py=V,a.pz=i,a.lx=_-Q,a.ly=d-V,a.lz=p-i,a.normalize(),0!=this.interactiveOffset&&(a.px+=a.lx*this.interactiveOffset,a.py+=a.ly*this.interactiveOffset,a.pz+=a.lz*this.interactiveOffset),a.px),W=a.py,N=a.pz,G=a.lx,U=a.ly,L=a.lz,j=-2147483648,l=0,H=this.interactives;l<H.length;){var r=H[l];if(++l,!(r.priority<j)){for(var o,Y=r;null!=Y&&0!=(2&Y.flags);)Y=Y.parent;if(null==Y)if(r.isAbsoluteShape||(o=r.getInvPos(),s=a.px,g=d=null==(d=t=null==(t=a.py)?0:t)?0:d,f=p=null==(p=c=null==(c=a.pz)?0:c)?0:p,Z=(m=_=null==(_=s=null==s?0:s)?0:_)*o._12+g*o._22+f*o._32+o._42,X=m*o._13+g*o._23+f*o._33+o._43,m=m*o._11+g*o._21+f*o._31+o._41,g=Z,f=X,a.px=m,a.py=g,a.pz=f,A=a.lx,S=b=null==(b=x=null==(x=a.ly)?0:x)?0:b,k=v=null==(v=w=null==(w=a.lz)?0:w)?0:v,q=(C=y=null==(y=A=null==A?0:A)?0:y)*o._12+S*o._22+k*o._32,K=C*o._13+S*o._23+k*o._33,C=C*o._11+S*o._21+k*o._31,S=q,k=K,a.lx=C,a.ly=S,a.lz=k,a.normalize()),a.lx!=a.lx)a.px=O,a.py=W,a.pz=N,a.lx=G,a.ly=U,a.lz=L;else if((M=r.shape.rayIntersection(a,r.bestMatch))<0)a.px=O,a.py=W,a.pz=N,a.lx=G,a.ly=U,a.lz=L;else{var u=a.px+M*a.lx,h=a.py+M*a.ly;if(null==(E=I=null==(I=a.pz+M*a.lz)?0:I)&&(E=0),null==(T=h=null==h?0:h)&&(T=0),null==(B=u=null==u?0:u)&&(B=0),a.px=O,a.py=W,a.pz=N,a.lx=G,a.ly=U,a.lz=L,r.hitPoint.x=B,r.hitPoint.y=T,r.hitPoint.z=E,r.priority>j){for(;0<this.hitInteractives.length;)this.hitInteractives.pop();j=r.priority}this.hitInteractives.push(r)}}}if(0==this.hitInteractives.length)return null;if(1<this.hitInteractives.length){for(l=0,H=this.hitInteractives;l<H.length;){var c,_,d,p,m,g,f,Z,X,A,x,w,y,b,v,C,S,k,q,K,M,I,B,T,E,J,$,r=H[l],F=(++l,r.invPos),ee=0,F=(null==r.preciseShape&&r.bestMatch||(r.isAbsoluteShape||(s=a.px,g=d=null==(d=t=null==(t=a.py)?0:t)?0:d,f=p=null==(p=c=null==(c=a.pz)?0:c)?0:p,Z=(m=_=null==(_=s=null==s?0:s)?0:_)*F._12+g*F._22+f*F._32+F._42,X=m*F._13+g*F._23+f*F._33+F._43,m=m*F._11+g*F._21+f*F._31+F._41,g=Z,f=X,a.px=m,a.py=g,a.pz=f,A=a.lx,S=b=null==(b=x=null==(x=a.ly)?0:x)?0:b,k=v=null==(v=w=null==(w=a.lz)?0:w)?0:v,q=(C=y=null==(y=A=null==A?0:A)?0:y)*F._12+S*F._22+k*F._32,K=C*F._13+S*F._23+k*F._33,C=C*F._11+S*F._21+k*F._31,S=q,k=K,a.lx=C,a.ly=S,a.lz=k,a.normalize()),0<(M=(null!=(F=r.preciseShape)?F:r.shape).rayIntersection(a,!0))?(u=a.px+M*a.lx,h=a.py+M*a.ly,null==(E=I=null==(I=a.pz+M*a.lz)?0:I)&&(E=0),null==(T=h=null==h?0:h)&&(T=0),null==(B=u=null==u?0:u)&&(B=0),r.hitPoint.x=B,r.hitPoint.y=T,r.hitPoint.z=E):ee=1,a.px=O,a.py=W,a.pz=N,a.lx=G,a.ly=U,a.lz=L),r.hitPoint),D=F.x,R=F.y,P=F.z,F=F.w,F=(D=null==D?0:D,R=null==R?0:R,P=null==P?0:P,F=null==F?1:F,null==D?0:D),D=null==R?0:R,R=null==P?0:P,P=(r.isAbsoluteShape||(J=F*(P=r.absPos)._12+D*P._22+R*P._32+ +P._42,$=F*P._13+D*P._23+R*P._33+ +P._43,F=F*P._11+D*P._21+R*P._31+ +P._41,D=J,R=$),this.camera.m);R=(F*P._13+D*P._23+R*P._33+ +P._43)*(1/(F*P._14+D*P._24+R*P._34+ +P._44)),r.hitPoint.w=R+ee}this.hitInteractives.sort(Cn(this,this.sortHitPointByCameraDistance))}this.hitInteractives.unshift(null)}for(;0<this.hitInteractives.length;){if(null==(r=this.hitInteractives.pop()))return null;if(e.relX=r.hitPoint.x,e.relY=r.hitPoint.y,e.relZ=r.hitPoint.z,r.handleEvent(e),!e.cancel){if(!e.propagate)for(;0<this.hitInteractives.length;)this.hitInteractives.pop();return r}e.cancel=!1,e.propagate=!1}}return null},clone:function(e){e=null==e?new ko:e;return e.camera=this.camera.clone(),Hr.prototype.clone.call(this,e),e},dispose:function(){0!=(32&this.flags)&&this.onRemove(),this.ctx.dispose(),null!=this.renderer&&(this.renderer.dispose(),this.set_renderer(new ai))},addEventTarget:function(e){if(0<=this.interactives.indexOf(e))throw tl.thrown("assert");this.interactives.push(e)},removeEventTarget:function(e){Jn.remove(this.interactives,e)&&(null!=this.events&&this.events.onRemove(e),Jn.remove(this.hitInteractives,e))},setElapsedTime:function(e){this.ctx.elapsedTime=e},syncOnly:function(e){var t=Vr.CURRENT,e=(this.setElapsedTime(e),t.getCurrentTarget());this.camera.screenRatio=null==e?t.width/t.height:e.width/e.height,this.camera.update(),this.ctx.start(),this.syncRec(this.ctx),this.ctx.done()},onContextLost:function(){this.ctx.wasContextLost=!0},render:function(e){0==(32&this.flags)&&this.onAdd();for(var t=e.getCurrentTarget(),n=(this.camera.screenRatio=null==t?e.width/e.height:t.width/t.height,this.camera.update(),this.camera.rightHanded&&e.driver.setRenderFlag(Zr.CameraHandness,1),this.ctx.start(),this.renderer.start(),this.renderer.startEffects(),this.mark("sync"),this.syncRec(this.ctx),this.mark("emit"),this.emitRec(this.ctx),[]),i=-1,s=0,a=this.ctx.passes.length;s<a;){var l,r=this.ctx.passes[s++];null!=r&&(null==(l=this.ctx.cachedPassObjects[++i])&&(l=new si,this.ctx.cachedPassObjects[i]=l),l.name=r.pass.name,(o=l.passes).current=r,o.discarded=o.lastDisc=null,n.push(l))}null!=this.lightSystem&&(this.ctx.lightSystem=this.lightSystem,this.lightSystem.initLights(this.ctx)),this.renderer.process(n),this.camera.rightHanded&&e.driver.setRenderFlag(Zr.CameraHandness,0),this.ctx.done(),this.ctx.wasContextLost=!1;for(s=0,a=i;s<a;){var o,u=this.ctx.cachedPassObjects[s++];u.name=null,(o=u.passes).current=null,o.discarded=o.lastDisc=null}},mark:function(e){this.renderer.mark(e)},__class__:ko,__properties__:e(Hr.prototype.__properties__,{set_renderer:"set_renderer"})}),(i["h3d.scene.Joint"]=li).__name__="h3d.scene.Joint",li.__super__=Hr,li.prototype=e(Hr.prototype,{getObjectByName:function(e){var t=this.skin.getSkinData(),n=t.namedJoints.h[e];if(null!=n){var i=t.allJoints[this.index];if(i.index!=this.index)throw tl.thrown("assert");for(var s,a=n.parent;null!=a;){if(a==i)return(s=new li(this.skin,n)).parent=this,s;a=a.parent}}return null},syncPos:function(){for(var e=this.skin;null!=e;){if(0!=(1&e.flags)){this.update();break}e=e.parent}this.lastFrame!=this.skin.lastFrame&&(this.lastFrame=this.skin.lastFrame,this.absPos.load(this.skin.jointsData[this.index].currentAbsPos))},update:function(){this.skin.getAbsPos(),this.skin.syncJoints(),this.lastFrame=-1},__class__:li}),function(){this.originMat=Nr.I(),this.targetMat=Nr.I(),this.currentAbsPos=Nr.I()}),Io=((i["h3d.scene.JointData"]=Mo).__name__="h3d.scene.JointData",Mo.prototype={sync:function(e,t,n){var i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C,S,k,M,I;null!=t.follow||(i=this.currentAbsPos,x=this.currentRelPos,s=t.bindIndex,null==x?x=t.defMat:t.retargetAnim&&e.enableRetargeting&&(Bo.TMP_MAT.load(x),(x=Bo.TMP_MAT)._41=t.defMat._41,x._42=t.defMat._42,x._43=t.defMat._43),I=(M=(S=(C=(b=(y=(w=(x=(A=(f=(g=(m=(p=(d=(_=(c=(h=(u=(o=(a=null==t.parent?e.absPos:e.jointsData[t.parent.index].currentAbsPos,x._11),x._12),x._13),x._21),x._22),x._23),x._31),x._32),x._33),x._41),x._42),x._43),a._11),a._12),a._13),a._22),a._23),a._32),a._33),(l=i)._11=o*w+u*(v=a._21)+h*(k=a._31),l._12=o*y+u*C+h*M,l._13=o*b+u*S+h*I,l._14=0,l._21=c*w+_*v+d*k,l._22=c*y+_*C+d*M,l._23=c*b+_*S+d*I,l._24=0,l._31=p*w+m*v+g*k,l._32=p*y+m*C+g*M,l._33=p*b+m*S+g*I,l._34=0,l._41=f*w+A*v+x*k+a._41,l._42=f*y+A*C+x*M+a._42,l._43=f*b+A*S+x*I+a._43,l._44=1,null!=this.additivePose&&(o=(r=this.additivePose)._11,c=r._21,_=r._22,d=r._23,p=r._31,m=r._32,g=r._33,f=r._41,A=r._42,x=r._43,w=(l=i)._11,y=i._12,b=i._13,v=i._21,C=i._22,S=i._23,k=i._31,M=i._32,I=i._33,l._11=o*w+(u=r._12)*v+(h=r._13)*k,l._12=o*y+u*C+h*M,l._13=o*b+u*S+h*I,l._14=0,l._21=c*w+_*v+d*k,l._22=c*y+_*C+d*M,l._23=c*b+_*S+d*I,l._24=0,l._31=p*w+m*v+g*k,l._32=p*y+m*C+g*M,l._33=p*b+m*S+g*I,l._34=0,l._41=f*w+A*v+x*k+i._41,l._42=f*y+A*C+x*M+i._42,l._43=f*b+A*S+x*I+i._43,l._44=1),0<=s&&(l=e.currentPalette[s],o=(r=t.transPos)._11,c=r._21,_=r._22,d=r._23,p=r._31,m=r._32,g=r._33,f=r._41,A=r._42,x=r._43,w=i._11,y=i._12,b=i._13,v=i._21,C=i._22,S=i._23,k=i._31,M=i._32,I=i._33,l._11=o*w+(u=r._12)*v+(h=r._13)*k,l._12=o*y+u*C+h*M,l._13=o*b+u*S+h*I,l._14=0,l._21=c*w+_*v+d*k,l._22=c*y+_*C+d*M,l._23=c*b+_*S+d*I,l._24=0,l._31=p*w+m*v+g*k,l._32=p*y+m*C+g*M,l._33=p*b+m*S+g*I,l._34=0,l._41=f*w+A*v+x*k+i._41,l._42=f*y+A*C+x*M+i._42,l._43=f*b+A*S+x*I+i._43,l._44=1),this instanceof Io)||(this.targetMat.load(i),this.originMat.load(i))},__class__:Mo},function(){this.f=-1,Mo.call(this),this.speed=new Gr(0,0,0)}),Bo=((i["h3d.scene.DynamicJointData"]=Io).__name__="h3d.scene.DynamicJointData",Io.__super__=Mo,Io.prototype=e(Mo.prototype,{load:function(e){null!=e.currentRelPos&&(null==this.currentRelPos&&(this.currentRelPos=new Wr),this.currentRelPos.load(e.currentRelPos)),null!=e.currentAbsPos&&(null==this.currentAbsPos&&(this.currentAbsPos=new Wr),this.currentAbsPos.load(e.currentAbsPos)),null!=e.additivePose&&(null==this.additivePose&&(this.additivePose=new Wr),this.additivePose.load(e.additivePose)),null!=e.absPos&&(null==this.absPos&&(this.absPos=new Wr),this.absPos.load(e.absPos));var t=this.speed,e=e.speed;t.x=e.x,t.y=e.y,t.z=e.z},sync:function(e,t,n){Mo.prototype.sync.call(this,e,t,n),this.f!=l0.frameCount?(this.f=l0.frameCount,null==this.initialState&&(this.initialState=new Io),this.initialState.load(this)):this.load(this.initialState);var i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C,S,k,M=e.jointsData[t.index],I=M instanceof Io?M:null,M=(M=e.jointsData[t.parent.index])instanceof Mo?M:null;n&&(I.originMat.load(I.targetMat),this.computeDyn(e,t),this.computeRotationDyn(e,t.parent)),null!=I.originMat&&null!=I.targetMat&&(n=e.accumulator/Bo.FIXED_DT,this.lerpMatrixTerms(I.originMat,I.targetMat,n=n<0?0:1<n?1:n,Bo.TMP_MAT),0<=t.bindIndex&&(k=e.currentPalette[t.bindIndex],s=Bo.TMP_MAT,a=(i=t.transPos)._11,o=i._21,u=i._22,h=i._23,c=i._31,_=i._32,d=i._33,p=i._41,m=i._42,g=i._43,f=s._11,A=s._12,x=s._13,y=s._22,b=s._23,C=s._32,S=s._33,k._11=a*f+(l=i._12)*(w=s._21)+(r=i._13)*(v=s._31),k._12=a*A+l*y+r*C,k._13=a*x+l*b+r*S,k._14=0,k._21=o*f+u*w+h*v,k._22=o*A+u*y+h*C,k._23=o*x+u*b+h*S,k._24=0,k._31=c*f+_*w+d*v,k._32=c*A+_*y+d*C,k._33=c*x+_*b+d*S,k._34=0,k._41=p*f+m*w+g*v+s._41,k._42=p*A+m*y+g*C+s._42,k._43=p*x+m*b+g*S+s._43,k._44=1),0<=t.parent.bindIndex&&(this.lerpMatrixTerms(M.originMat,M.targetMat,n,Bo.TMP_MAT),k=e.currentPalette[t.parent.bindIndex],i=t.parent.transPos,s=Bo.TMP_MAT,a=i._11,o=i._21,u=i._22,h=i._23,c=i._31,_=i._32,d=i._33,p=i._41,m=i._42,g=i._43,f=s._11,A=s._12,x=s._13,y=s._22,b=s._23,C=s._32,S=s._33,k._11=a*f+(l=i._12)*(w=s._21)+(r=i._13)*(v=s._31),k._12=a*A+l*y+r*C,k._13=a*x+l*b+r*S,k._14=0,k._21=o*f+u*w+h*v,k._22=o*A+u*y+h*C,k._23=o*x+u*b+h*S,k._24=0,k._31=c*f+_*w+d*v,k._32=c*A+_*y+d*C,k._33=c*x+_*b+d*S,k._34=0,k._41=p*f+m*w+g*v+s._41,k._42=p*A+m*y+g*C+s._42,k._43=p*x+m*b+g*S+s._43,k._44=1),k=I.speed,0!=Math.sqrt(k.x*k.x+k.y*k.y+k.z*k.z))&&(e.forceJointsUpdateOnFrame=l0.frameCount+1)},computeDyn:function(e,t){var n=e.jointsData[t.index],n=n instanceof Io?n:null,i=null==n.absPos?n.currentAbsPos:n.absPos,s=t.defMat,a=Io.newWorldPos,l=i._41,r=i._42,o=i._43,a=(v=l=null==l?0:l,C=r=null==r?0:r,S=o=null==o?0:o,a.x=v,a.y=C,a.z=S,Io.expectedPos),u=(v=l=null==(l=i._41)?0:l,C=r=null==(r=i._42)?0:r,S=o=null==(o=i._43)?0:o,a.x=v,a.y=C,a.z=S,t.globalForce),a=this.speed,h=this.speed,c=1-t.resistance,_=l=null==(l=u.x*c)?0:l,d=r=null==(r=u.y*c)?0:r,u=o=null==(o=u.z*c)?0:o,l=h.x+(_=null==_?0:_),r=h.y+(d=null==d?0:d),_=l=null==l?0:l,h=(null==(u=o=null==(o=h.z+(u=null==u?0:u))?0:o)&&(u=0),null==(d=r=null==r?0:r)&&(d=0),a.x=_=null==_?0:_,a.y=d,a.z=u,n.speed),c=1-t.damping;h.x*=c,h.y*=c,h.z*=c,(a=n.speed).x*a.x+a.y*a.y+a.z*a.z>ln.SLEEP_THRESHOLD&&(a=Io.newWorldPos,h=Io.newWorldPos,k=n.speed,c=Bo.FIXED_DT,_=l=null==(l=k.x*c)?0:l,d=r=null==(r=k.y*c)?0:r,u=o=null==(o=k.z*c)?0:o,l=h.x+(_=null==_?0:_),r=h.y+(d=null==d?0:d),_=l=null==l?0:l,null==(u=o=null==(o=h.z+(u=null==u?0:u))?0:o)&&(u=0),null==(d=r=null==r?0:r)&&(d=0),a.x=_=null==_?0:_,a.y=d,a.z=u);(a=n.speed).x*a.x+a.y*a.y+a.z*a.z>ln.MAX_THRESHOLD&&((a=n.speed).x=0,a.y=0,a.z=0),Bo.TMP_MAT.multiply(s,e.jointsData[t.parent.index].currentAbsPos);var a=Io.expectedPos,a=(v=l=null==(l=(b=Bo.TMP_MAT)._41)?0:l,C=r=null==(r=b._42)?0:r,S=o=null==(o=b._43)?0:o,a.x=v,a.y=C,a.z=S,Io.newWorldPos),p=Io.newWorldPos,m=Io.expectedPos,g=t.stiffness,f=p.x,f=(a.x=f+g*(m.x-f),p.y),f=(a.y=f+g*(m.y-f),p.z),h=(a.z=f+g*(m.z-f),Io.newWorldPos);v=l=null==(l=(a=e.jointsData[t.parent.index].currentAbsPos)._41)?0:l,C=r=null==(r=a._42)?0:r,S=o=null==(o=a._43)?0:o;_=null==(_=l=null==(l=h.x-v)?0:l)?0:_;l=_*(g=(g=_*_+(A=d=null==(d=r=null==(r=h.y-C)?0:r)?0:d)*A+(x=u=null==(u=o=null==(o=h.z-S)?0:o)?0:u)*x)<1e-20?0:1/Math.sqrt(g));null==(u=o=null==(o=x*g)?0:o)&&(u=0),null==(d=r=null==(r=A*g)?0:r)&&(d=0),null==(_=l=null==l?0:l)&&(_=0);var A=0,x=0,w=(s=l=null==(l=(a=s)._41)?0:l,A=r=null==(r=a._42)?0:r,x=o=null==(o=a._43)?0:o,Math.sqrt(s*s+A*A+x*x)),a=e.jointsData[t.parent.index].currentAbsPos,y=0,y=Math.sqrt(a._11*a._11+a._12*a._12+a._13*a._13),a=(a._11*(a._22*a._33-a._23*a._32)+a._12*(a._23*a._31-a._21*a._33)+a._13*(a._21*a._32-a._22*a._31)<0&&(y*=-1),Io.expectedPos),A=0,x=0,l=(b=e.jointsData[t.parent.index].currentAbsPos)._41,r=b._42,l=(s=l=null==l?0:l,_*w),_=l=null==(l=s+(_=null==(_=l=null==(l=(_=null==(_=l=null==l?0:l)?0:_)*(c=y))?0:l)?0:_))?0:l,a=(null==(u=o=null==(o=(x=o=null==(o=b._43)?0:o)+(u=null==(u=o=null==(o=(u=null==(u=o=null==(o=u*w)?0:o)?0:u)*c)?0:o)?0:u))?0:o)&&(u=0),null==(d=r=null==(r=(A=r=null==r?0:r)+(d=null==(d=r=null==(r=(d=null==(d=r=null==(r=d*w)?0:r)?0:d)*c)?0:r)?0:d))?0:r)&&(d=0),a.x=_=null==_?0:_,a.y=d,a.z=u,Io.newWorldPos),p=Io.expectedPos,m=Io.newWorldPos,g=t.slackness,f=p.x,f=(a.x=f+g*(m.x-f),p.y),f=(a.y=f+g*(m.y-f),p.z),a=(a.z=f+g*(m.z-f),e.jointsData[t.parent.index].currentAbsPos.getInverse(Bo.TMP_MAT),Io.tmpVec),c=Io.newWorldPos,h=(a.x=c.x,a.y=c.y,a.z=c.z,Io.tmpVec),s=Bo.TMP_MAT,y=h.x*s._12+h.y*s._22+h.z*s._32+s._42,x=h.x*s._13+h.y*s._23+h.z*s._33+s._43,a=(h.x=h.x*s._11+h.y*s._21+h.z*s._31+s._41,h.y=y,h.z=x,Io.tmpVec2);v=l=null==(l=(b=n.currentAbsPos)._41)?0:l,C=r=null==(r=b._42)?0:r,S=o=null==(o=b._43)?0:o,a.x=v,a.y=C,a.z=S;var b,v,C,S,y=(h=Io.tmpVec2).x*(s=Bo.TMP_MAT)._12+h.y*s._22+h.z*s._32+s._42,x=h.x*s._13+h.y*s._23+h.z*s._33+s._43,h=(h.x=h.x*s._11+h.y*s._21+h.z*s._31+s._41,h.y=y,h.z=x,0<t.lockAxis.x&&(Io.tmpVec.x=Io.tmpVec2.x),0<t.lockAxis.y&&(Io.tmpVec.y=Io.tmpVec2.y),0<t.lockAxis.z&&(Io.tmpVec.z=Io.tmpVec2.z),Io.tmpVec),s=e.jointsData[t.parent.index].currentAbsPos,y=h.x*s._12+h.y*s._22+h.z*s._32+s._42,x=h.x*s._13+h.y*s._23+h.z*s._33+s._43,a=(h.x=h.x*s._11+h.y*s._21+h.z*s._31+s._41,h.y=y,h.z=x,Io.newWorldPos),c=Io.tmpVec,a=(a.x=c.x,a.y=c.y,a.z=c.z,n.speed),h=n.speed,k=Io.newWorldPos,l=(v=l=null==(l=i._41)?0:l,C=r=null==(r=i._42)?0:r,S=o=null==(o=i._43)?0:o,k.x-v),d=r=null==(r=k.y-C)?0:r,u=o=null==(o=k.z-S)?0:o,_=l=null==(l=(_=null==(_=l=null==l?0:l)?0:_)*(c=1/Bo.FIXED_DT))?0:l,d=r=null==(r=(d=null==d?0:d)*c)?0:r,u=o=null==(o=(u=null==u?0:u)*c)?0:o,l=h.x+(_=null==_?0:_),r=h.y+(d=null==d?0:d),_=l=null==(l=.5*(_=null==(_=l=null==l?0:l)?0:_))?0:l,a=(null==(u=o=null==(o=.5*(u=null==(u=o=null==(o=h.z+(u=null==u?0:u))?0:o)?0:u))?0:o)&&(u=0),null==(d=r=null==(r=.5*(d=null==(d=r=null==r?0:r)?0:d))?0:r)&&(d=0),a.x=_=null==_?0:_,a.y=d,a.z=u,n.currentAbsPos),c=Io.newWorldPos;a._41=c.x,a._42=c.y,a._43=c.z,null==n.absPos&&(n.absPos=new Wr),n.absPos.load(n.currentAbsPos),null==n.relPos&&(n.relPos=new Wr),e.jointsData[t.parent.index].currentAbsPos.getInverse(Bo.TMP_MAT),n.relPos.multiply(n.absPos,Bo.TMP_MAT),n.targetMat.load(n.currentAbsPos)},computeRotationDyn:function(e,t){if(null==t.follow){var n=e.jointsData[t.index];if(1==t.subs.length){var t=t.subs[0],i=t instanceof ln?t:null;if(null==i)return;var e=(t=e.jointsData[i.index])instanceof Io?t:null,t=Io.tmpVec,i=i.defMat,s=0,a=0,l=i._41,r=i._42,o=i._43,u=(l=null==l?0:l)*l+(s=r=null==r?0:r)*s+(a=o=null==o?0:o)*a,h=l=null==(l=l*(u=u<1e-20?0:1/Math.sqrt(u)))?0:l,c=r=null==(r=s*u)?0:r,_=o=null==(o=a*u)?0:o,t=(null==_&&(_=0),null==c&&(c=0),t.x=h=null==h?0:h,t.y=c,t.z=_,Io.tmpVec2),s=0,a=0,u=(l=null==(l=(i=e.relPos)._41)?0:l)*l+(s=r=null==(r=i._42)?0:r)*s+(a=o=null==(o=i._43)?0:o)*a,h=l=null==(l=l*(u=u<1e-20?0:1/Math.sqrt(u)))?0:l;null==(_=o=null==(o=a*u)?0:o)&&(_=0),null==(c=r=null==(r=s*u)?0:r)&&(c=0),t.x=h=null==h?0:h,t.y=c,t.z=_,Io.tmpQ.initMoveTo(Io.tmpVec,Io.tmpVec2),Io.tmpQ.toMatrix(Bo.TMP_MAT),n.currentAbsPos.multiply(Bo.TMP_MAT,n.currentAbsPos)}n.targetMat.load(n.currentAbsPos)}},lerpMatrixTerms:function(e,t,n,i){var s=e._11,s=(i._11=s+n*(t._11-s),e._12),s=(i._12=s+n*(t._12-s),e._13),s=(i._13=s+n*(t._13-s),e._14),s=(i._14=s+n*(t._14-s),e._21),s=(i._21=s+n*(t._21-s),e._22),s=(i._22=s+n*(t._22-s),e._23),s=(i._23=s+n*(t._23-s),e._24),s=(i._24=s+n*(t._24-s),e._31),s=(i._31=s+n*(t._31-s),e._32),s=(i._32=s+n*(t._32-s),e._33),s=(i._33=s+n*(t._33-s),e._34),s=(i._34=s+n*(t._34-s),e._41),s=(i._41=s+n*(t._41-s),e._42),s=(i._42=s+n*(t._42-s),e._43),s=(i._43=s+n*(t._43-s),e._44);return i._44=s+n*(t._44-s),i},__class__:Io}),function(e,t,n){this.prevEnableRetargeting=!0,this.enableRetargeting=!0,this.forceJointsUpdateOnFrame=-1,this.prevJointsFrame=-1,this.accumulator=Bo.FIXED_DT,ni.call(this,null,t,n),null!=e&&this.setSkinData(e)}),To=((i["h3d.scene.Skin"]=Bo).__name__="h3d.scene.Skin",Bo.__super__=ni,Bo.prototype=e(ni.prototype,{clone:function(e){for(var t=null==e?new Bo(null,this.materials.slice()):e,n=(ni.prototype.clone.call(this,t),t.setSkinData(this.skinData),t.jointsData=[],0),i=this.jointsData;n<i.length;)t.jointsData.push(X.copy(i[n++]));return t},addBoundsRec:function(e,t){var n=this.primitive;if(this.set_primitive(null),ni.prototype.addBoundsRec.call(this,e,t),this.set_primitive(n),0==(512&this.flags)){this.syncJoints(),null==this.skinData.vertexWeights&&nl.__cast(this.primitive,Xn).loadSkin(this.skinData);var i=this.getAbsPos(),n=0,s=0,a=0,n=Math.sqrt(i._11*i._11+i._12*i._12+i._13*i._13),s=Math.sqrt(i._21*i._21+i._22*i._22+i._23*i._23),a=Math.sqrt(i._31*i._31+i._32*i._32+i._33*i._33);i._11*(i._22*i._33-i._23*i._32)+i._12*(i._23*i._31-i._21*i._33)+i._13*(i._21*i._32-i._22*i._31)<0&&(n*=-1,s*=-1,a*=-1);for(var l=Math.max(Math.max(n,s),a),r=0,o=this.skinData.allJoints;r<o.length;){var u,h,c,_,d,p,m=o[r];++r,m.offsetRay<0||(d=this.currentPalette[m.bindIndex],h=null==(h=(i=m.offsets).xMin)?0:h,_=null==(_=i.yMin)?0:_,p=null==(p=i.zMin)?0:p,h=null==h?0:h,_=null==_?0:_,p=null==p?0:p,null!=d&&(u=h*d._12+_*d._22+p*d._32+d._42,c=h*d._13+_*d._23+p*d._33+d._43,h=h*d._11+_*d._21+p*d._31+d._41,_=u,p=c,null!=t&&(u=h*t._12+_*t._22+p*t._32+t._42,c=h*t._13+_*t._23+p*t._33+t._43,h=h*t._11+_*t._21+p*t._31+t._41,_=u,p=c),u=_,c=p,(_=h)-(p=m.offsetRay*l)<e.xMin&&(e.xMin=_-p),e.xMax<_+p&&(e.xMax=_+p),u-p<e.yMin&&(e.yMin=u-p),e.yMax<u+p&&(e.yMax=u+p),c-p<e.zMin&&(e.zMin=c-p),e.zMax<c+p&&(e.zMax=c+p),_=null==(_=(h=m.offsets).xMax)?0:_,u=null==(u=h.yMax)?0:u,c=null==(c=h.zMax)?0:c,p=null==u?0:u,h=null==c?0:c,c=(u=null==_?0:_)*d._12+p*d._22+h*d._32+d._42,_=u*d._13+p*d._23+h*d._33+d._43,u=u*d._11+p*d._21+h*d._31+d._41,p=c,h=_,null!=t&&(d=u*t._12+p*t._22+h*t._32+t._42,c=u*t._13+p*t._23+h*t._33+t._43,u=u*t._11+p*t._21+h*t._31+t._41,p=d,h=c),_=p,d=h,(c=u)-(p=m.offsetRay*l)<e.xMin&&(e.xMin=c-p),e.xMax<c+p&&(e.xMax=c+p),_-p<e.yMin&&(e.yMin=_-p),e.yMax<_+p&&(e.yMax=_+p),d-p<e.zMin&&(e.zMin=d-p),e.zMax<d+p)&&(e.zMax=d+p))}}},getObjectByName:function(e){if(null!=this.skinData&&this.skinData.name==e)return this;var t=ni.prototype.getObjectByName.call(this,e);if(null!=t)return t;if(null!=this.skinData){t=this.skinData.namedJoints.h[e];if(null!=t)return new li(this,t)}return null},getLocalCollider:function(){throw tl.thrown("Not implemented")},getGlobalCollider:function(){var e=nl.__cast(this.primitive.getCollider(),hn),t=e.b,t=t instanceof gn?t:null;return null==t?new xn(this.skinData.rootJoints[0].defMat.clone(),e):(nl.__cast(this.primitive,Xn).loadSkin(this.skinData),new fn(this,t))},calcAbsPos:function(){ni.prototype.calcAbsPos.call(this),this.jointsUpdated=!0},getSkinData:function(){return this.skinData},setSkinData:function(e,t){if(null==t&&(t=!0),this.skinData=e,this.jointsUpdated=!0,this.set_primitive(e.primitive),t){for(var n=!1,i=0,s=this.materials;i<s.length;){var a=s[i];if(++i,null!=a&&null!=a.get_normalMap()){n=!0;break}}this.skinShader=new(n?Lo:Uo);var t=this.skinShader,l=(t.constModified=!0,t.fourBonesByVertex__=4==this.skinData.bonesPerVertex,0);if(null!=this.skinData.splitJoints)for(i=0,s=this.skinData.splitJoints;i<s.length;){e=s[i];++i,e.joints.length>l&&(l=e.joints.length)}else l=this.skinData.boundJoints.length;this.skinShader.MaxBones__<l&&((t=this.skinShader).constModified=!0,t.MaxBones__=l);for(i=0,s=this.materials;i<s.length;){a=s[i];++i,null!=a&&(null!=(e=a.passes.getShader(Lo))&&a.passes.removeShader(e),null!=a.get_normalMap()?a.passes.addShaderAtIndex(this.skinShader,a.passes.getShaderIndex(a.normalShader)+1):a.passes.addShader(this.skinShader),null!=this.skinData.splitJoints)&&a.passes.set_dynamicParameters(!0)}}this.jointsData=[],this.currentPalette=[],this.prevPalette=null,this.prevSplitPalette=null,this.paletteChanged=!0,this.makeJointsData();for(i=0,s=this.skinData.boundJoints.length;i<s;)++i,this.currentPalette.push(Nr.I());if(null!=this.skinData.splitJoints){this.splitPalette=[];for(i=0,s=this.skinData.splitJoints;i<s.length;){for(var r=this.splitPalette,o=[],u=0,h=s[i++].joints;u<h.length;)o.push(this.currentPalette[h[u++].bindIndex]);r.push(o)}}else this.splitPalette=null},makeJointsData:function(){for(var e=0,t=this.skinData.allJoints;e<t.length;){var n=t[e];++e,this.jointsData[n.index]=n.makeRuntimeData()}},sync:function(e){!e.visibleFlag&&0==(64&this.flags)||this.syncJoints()},syncJoints:function(){if(this.jointsUpdated||!(this.forceJointsUpdateOnFrame>=l0.frameCount)){this.computeVelocity()?(this.syncPrevJoints(),(e=this.skinShader).constModified=!0,e.calcPrevPos__=!0):(this.prevSplitPalette=null,this.prevPalette=null,(e=this.skinShader).constModified=!0,e.calcPrevPos__=!1);for(var e=this.skinShader,t=this.computeVelocity(),n=(e.constModified=!0,e.calcPrevPos__=t,!1),i=(this.accumulator+=l0.dt,this.accumulator>=Bo.FIXED_DT&&(n=!0,this.accumulator-=Bo.FIXED_DT),0),s=this.skinData.allJoints;i<s.length;){var a=s[i];++i,this.jointsData[a.index].sync(this,a,n)}this.skinShader.bonesMatrixes__=this.currentPalette,this.jointsUpdated=!1,this.prevEnableRetargeting=this.enableRetargeting}},syncPrevJoints:function(){if(this.prevJointsFrame!=l0.frameCount){if(this.prevJointsFrame=l0.frameCount,null==this.prevPalette){this.prevPalette=[];for(var e=0,t=this.currentPalette.length;e<t;)++e,this.prevPalette.push(Nr.I());if(null!=this.splitPalette){this.prevSplitPalette=[];for(e=0,t=this.skinData.splitJoints;e<t.length;){for(var n=this.prevSplitPalette,i=[],s=0,a=t[e++].joints;s<a.length;)i.push(this.prevPalette[a[s++].bindIndex]);n.push(i)}}}for(var l=this.currentPalette,r=0;r<l.length;){var o=l[r++];this.prevPalette[r-1].load(o)}this.skinShader.prevBonesMatrixes__=this.prevPalette}},emit:function(e){if(this.calcScreenRatio(e),this.syncJoints(),null==this.splitPalette)ni.prototype.emit.call(this,e);else for(var t=0,n=this.splitPalette.length;t<n;){var i=t++;if(null!=(u=this.materials[this.skinData.splitJoints[i].material]))for(var s=i,a=(null==i&&(s=0),u.passes);null!=a;)a.culled||(e.emitPass(a,this).index=s),a=a.nextPass}if(this.showJoints){for(var l=this;null!=l.parent;)l=l.parent;null==this.jointsGraphics&&(this.jointsGraphics=new Kn(l),this.jointsGraphics.material.passes.depth(!1,to.Always),this.jointsGraphics.material.passes.setPassName("alpha")),this.jointsGraphics.set_follow(l);for(var r=this.jointsGraphics,t=(r.clear(),0),n=this.skinData.allJoints;t<n.length;){var o=n[t],u=(++t,this.jointsData[o.index].currentAbsPos),h=null==o.parent?this.absPos:this.jointsData[o.parent.index].currentAbsPos;r.lineStyle(1,null==o.parent?-16776961:-256),r.moveTo(h._41,h._42,h._43),r.lineTo(u._41,u._42,u._43)}}else{var c;null!=this.jointsGraphics&&(null!=(c=this.jointsGraphics)&&null!=c.parent&&c.parent.removeChild(c),this.jointsGraphics=null)}},draw:function(e){var t;null==this.splitPalette?ni.prototype.draw.call(this,e):(t=e.drawPass.index,this.skinShader.bonesMatrixes__=this.splitPalette[t],null!=this.prevSplitPalette&&(this.skinShader.prevBonesMatrixes__=this.prevSplitPalette[t]),this.primitive.selectMaterial(t,this.primitive.screenRatioToLod(this.curScreenRatio)),e.uploadParams(),this.primitive.render(e.engine))},__class__:Bo}),(i["h3d.scene.fwd.Light"]=ri).__name__="h3d.scene.fwd.Light",ri.__super__=ei,ri.prototype=e(ei.prototype,{__class__:ri}),function(){this.perPixelLighting=!0,this.maxLightsPerObject=6,ti.call(this),this.ambientLight=new Gr(.5,.5,.5),this.ambientShader=new Fo,this.set_additiveLighting(!0)}),Eo=((i["h3d.scene.fwd.LightSystem"]=To).__name__="h3d.scene.fwd.LightSystem",To.__super__=ti,To.prototype=e(ti.prototype,{set_additiveLighting:function(e){var t=this.ambientShader,t=t instanceof Fo?t:null;return t.constModified=!0,t.additive__=e},initLights:function(e){if(this.lightCount=0,this.ctx=e,this.cullLights(),ti.prototype.initLights.call(this,e),this.lightCount<=this.maxLightsPerObject){var t,n=e.lights,i=Cn(this,this.sortLight);if(null==n)t=null;else{for(var s,a,l,r,o=1,u=0,h=0;;){for(a=n,r=n=null,s=0;null!=a;){++s;for(var c=a,u=0,_=0,d=o;_<d&&(++_,++u,null!=(c=c.next)););for(h=o;0<u||0<h&&null!=c;)0!=u&&(0==h||null==c||i(a,c)<=0)?(a=(l=a).next,--u):(c=(l=c).next,--h),null!=r?r.next=l:n=l,r=l;a=c}if(r.next=null,s<=1)break;o*=2}t=n}e.lights=t}},initGlobals:function(e){e.set("global.ambientLight",this.ambientLight),e.set("global.perPixelLighting",this.perPixelLighting)},cullLights:function(){for(var e=this.ctx.lights,t=null,n=new An;null!=e;){var i=e instanceof ri?e:null;null!=i&&(n.x=i.absPos._41,n.y=i.absPos._42,n.z=i.absPos._43,n.r=i.cullingDistance),null==i||0<i.cullingDistance&&!this.ctx.computingStatic&&!this.ctx.camera.frustum.hasSphere(n)?(null==t?this.ctx.lights=e.next:t.next=e.next,e=e.next):(this.lightCount++,i.objectDistance=0,e=(t=e).next)}},sortLight:function(e,t){var n=e.priority-t.priority;return 0!=n?-n:e.objectDistance<t.objectDistance?-1:1},computeLight:function(e,t){if(this.lightCount>this.maxLightsPerObject){for(var n=this.ctx.lights;null!=n;){var i,s,a,l=n instanceof ri?n:null;0!=(16&e.flags)?(i=l.absPos._41-this.ctx.camera.target.x,s=l.absPos._42-this.ctx.camera.target.y,null==(a=l.absPos._43-this.ctx.camera.target.z)&&(a=0),l.objectDistance=i*i+s*s+a*a):(i=l.absPos._41-e.absPos._41,s=l.absPos._42-e.absPos._42,null==(a=l.absPos._43-e.absPos._43)&&(a=0),l.objectDistance=i*i+s*s+a*a),n=n.next}var r,o=this.ctx.lights,u=Cn(this,this.sortLight);if(null==o)r=null;else{for(var h,c,_,d,p=1,m=0,g=0;;){for(c=o,d=o=null,h=0;null!=c;){++h;for(var f=c,m=0,A=0,x=p;A<x&&(++A,++m,null!=(f=f.next)););for(g=p;0<m||0<g&&null!=f;)0!=m&&(0==g||null==f||u(c,f)<=0)?(c=(_=c).next,--m):(f=(_=f).next,--g),null!=d?d.next=_:o=_,d=_;c=f}if(d.next=null,h<=1)break;p*=2}r=o}this.ctx.lights=r}t=this.ctx.allocShaderList(this.ambientShader,t);for(var l=this.ctx.lights,w=0;null!=l&&w++!=this.maxLightsPerObject;)t=this.ctx.allocShaderList(l.shader,t),l=l.next;return t},__class__:To,__properties__:{set_additiveLighting:"set_additiveLighting"}}),(i["h3d.scene.fwd.DepthPass"]=oi).__name__="h3d.scene.fwd.DepthPass",oi.__super__=zn,oi.prototype=e(zn.prototype,{draw:function(e,t){var n=this.ctx.textures.allocTarget("depthMap",this.ctx.engine.width,this.ctx.engine.height,!0);this.ctx.engine.pushTarget(n),this.ctx.engine.clear(this.enableSky?0:16711680,1),zn.prototype.draw.call(this,e,t),this.ctx.engine.popTarget(),this.ctx.globals.map.h[this.depthMapId]={texture:n}},__class__:oi}),(i["h3d.scene.fwd.NormalPass"]=ui).__name__="h3d.scene.fwd.NormalPass",ui.__super__=zn,ui.prototype=e(zn.prototype,{draw:function(e,t){var n=this.ctx.textures.allocTarget("normalMap",this.ctx.engine.width,this.ctx.engine.height);this.ctx.engine.pushTarget(n),this.ctx.engine.clear(8421504,1),zn.prototype.draw.call(this,e,t),this.ctx.engine.popTarget(),this.ctx.globals.map.h[this.normalMapId]=n},__class__:ui}),function(){this.shadow=new On(1024),this.normal=new ui,this.depth=new oi,ai.call(this),this.defaultPass=new zn("default"),this.allPasses=[this.defaultPass,this.depth,this.normal,this.shadow]}),Fo=((i["h3d.scene.fwd.Renderer"]=Eo).__name__="h3d.scene.fwd.Renderer",Eo.__super__=ai,Eo.prototype=e(ai.prototype,{renderPass:function(e,t,n){e.draw(t,n)},render:function(){this.has("shadow")&&this.renderPass(this.shadow,this.get("shadow")),this.has("depth")&&this.renderPass(this.depth,this.get("depth")),this.has("normal")&&this.renderPass(this.normal,this.get("normal")),this.renderPass(this.defaultPass,this.get("default")),this.renderPass(this.defaultPass,this.get("alpha"),this.backToFront),this.renderPass(this.defaultPass,this.get("additive"))},__class__:Eo}),function(){O.call(this)}),Do=((i["h3d.shader.AmbientLight"]=Fo).__name__="h3d.shader.AmbientLight",Fo._SHADER=null,Fo.__super__=O,Fo.prototype=e(O.prototype,{get_additive:function(){return this.additive__},set_additive:function(e){return this.constModified=!0,this.additive__=e},updateConstants:function(e){this.constBits=0,this.additive__&&(this.constBits|=2),this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.additive__:null},getParamFloatValue:function(e){return 0},__class__:Fo,__properties__:{set_additive:"set_additive",get_additive:"get_additive"}}),function(){this.viewportB__=new Gr(0,0,0),this.viewportA__=new Gr(0,0,0),this.halfPixelInverse__=new Gr(0,0,0),this.uvPos__=new q(0,0,0,1),this.filterMatrixB__=new Gr(0,0,0),this.filterMatrixA__=new Gr(0,0,0),this.absoluteMatrixB__=new Gr(0,0,0),this.absoluteMatrixA__=new Gr(0,0,0),this.color__=new q(0,0,0,1),this.zValue__=0,O.call(this)}),Ro=((i["h3d.shader.Base2d"]=Do).__name__="h3d.shader.Base2d",Do._SHADER=null,Do.__super__=O,Do.prototype=e(O.prototype,{get_zValue:function(){return this.zValue__},set_zValue:function(e){return this.zValue__=e},get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_isRelative:function(){return this.isRelative__},set_isRelative:function(e){return this.constModified=!0,this.isRelative__=e},get_color:function(){return this.color__},set_color:function(e){return this.color__=e},get_absoluteMatrixA:function(){return this.absoluteMatrixA__},set_absoluteMatrixA:function(e){return this.absoluteMatrixA__=e},get_absoluteMatrixB:function(){return this.absoluteMatrixB__},set_absoluteMatrixB:function(e){return this.absoluteMatrixB__=e},get_filterMatrixA:function(){return this.filterMatrixA__},set_filterMatrixA:function(e){return this.filterMatrixA__=e},get_filterMatrixB:function(){return this.filterMatrixB__},set_filterMatrixB:function(e){return this.filterMatrixB__=e},get_hasUVPos:function(){return this.hasUVPos__},set_hasUVPos:function(e){return this.constModified=!0,this.hasUVPos__=e},get_uvPos:function(){return this.uvPos__},set_uvPos:function(e){return this.uvPos__=e},get_killAlpha:function(){return this.killAlpha__},set_killAlpha:function(e){return this.constModified=!0,this.killAlpha__=e},get_pixelAlign:function(){return this.pixelAlign__},set_pixelAlign:function(e){return this.constModified=!0,this.pixelAlign__=e},get_halfPixelInverse:function(){return this.halfPixelInverse__},set_halfPixelInverse:function(e){return this.halfPixelInverse__=e},get_viewportA:function(){return this.viewportA__},set_viewportA:function(e){return this.viewportA__=e},get_viewportB:function(){return this.viewportB__},set_viewportB:function(e){return this.viewportB__=e},updateConstants:function(e){this.constBits=0,this.isRelative__&&(this.constBits|=1),this.hasUVPos__&&(this.constBits|=2),this.killAlpha__&&(this.constBits|=4),this.pixelAlign__&&(this.constBits|=8),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.zValue__;case 1:return this.texture__;case 2:return this.isRelative__;case 3:return this.color__;case 4:return this.absoluteMatrixA__;case 5:return this.absoluteMatrixB__;case 6:return this.filterMatrixA__;case 7:return this.filterMatrixB__;case 8:return this.hasUVPos__;case 9:return this.uvPos__;case 10:return this.killAlpha__;case 11:return this.pixelAlign__;case 12:return this.halfPixelInverse__;case 13:return this.viewportA__;case 14:return this.viewportB__}return null},getParamFloatValue:function(e){return 0==e?this.zValue__:0},__class__:Do,__properties__:{set_viewportB:"set_viewportB",get_viewportB:"get_viewportB",set_viewportA:"set_viewportA",get_viewportA:"get_viewportA",set_halfPixelInverse:"set_halfPixelInverse",get_halfPixelInverse:"get_halfPixelInverse",set_pixelAlign:"set_pixelAlign",get_pixelAlign:"get_pixelAlign",set_killAlpha:"set_killAlpha",get_killAlpha:"get_killAlpha",set_uvPos:"set_uvPos",get_uvPos:"get_uvPos",set_hasUVPos:"set_hasUVPos",get_hasUVPos:"get_hasUVPos",set_filterMatrixB:"set_filterMatrixB",get_filterMatrixB:"get_filterMatrixB",set_filterMatrixA:"set_filterMatrixA",get_filterMatrixA:"get_filterMatrixA",set_absoluteMatrixB:"set_absoluteMatrixB",get_absoluteMatrixB:"get_absoluteMatrixB",set_absoluteMatrixA:"set_absoluteMatrixA",get_absoluteMatrixA:"get_absoluteMatrixA",set_color:"set_color",get_color:"get_color",set_isRelative:"set_isRelative",get_isRelative:"get_isRelative",set_texture:"set_texture",get_texture:"get_texture",set_zValue:"set_zValue",get_zValue:"get_zValue"}}),function(){this.specularColor__=new Gr(0,0,0),this.specularAmount__=0,this.specularPower__=0,this.color__=new q(0,0,0,1),O.call(this);var e=this.color__;e.x=1,e.y=1,e.z=1,e.w=1,(e=this.specularColor__).x=1,e.y=1,e.z=1,this.specularPower__=50,this.specularAmount__=1}),Po=((i["h3d.shader.BaseMesh"]=Ro).__name__="h3d.shader.BaseMesh",Ro._SHADER=null,Ro.__super__=O,Ro.prototype=e(O.prototype,{get_color:function(){return this.color__},set_color:function(e){return this.color__=e},get_specularPower:function(){return this.specularPower__},set_specularPower:function(e){return this.specularPower__=e},get_specularAmount:function(){return this.specularAmount__},set_specularAmount:function(e){return this.specularAmount__=e},get_specularColor:function(){return this.specularColor__},set_specularColor:function(e){return this.specularColor__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.color__;case 1:return this.specularPower__;case 2:return this.specularAmount__;case 3:return this.specularColor__}return null},getParamFloatValue:function(e){switch(e){case 1:return this.specularPower__;case 2:return this.specularAmount__}return 0},__class__:Ro,__properties__:{set_specularColor:"set_specularColor",get_specularColor:"get_specularColor",set_specularAmount:"set_specularAmount",get_specularAmount:"get_specularAmount",set_specularPower:"set_specularPower",get_specularPower:"get_specularPower",set_color:"set_color",get_color:"get_color"}}),(i["h3d.shader.Blendshape"]=hi).__name__="h3d.shader.Blendshape",hi._SHADER=null,hi.__super__=O,hi.prototype=e(O.prototype,{get_shapeCount:function(){return this.shapeCount__},set_shapeCount:function(e){return this.shapeCount__=e},get_vcount:function(){return this.vcount__},set_vcount:function(e){return this.vcount__=e},get_offsets:function(){return this.offsets__},set_offsets:function(e){return this.offsets__=e},get_weights:function(){return this.weights__},set_weights:function(e){return this.weights__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.shapeCount__;case 1:return this.vcount__;case 2:return this.offsets__;case 3:return this.weights__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.shapeCount__;case 1:return this.vcount__}return 0},__class__:hi,__properties__:{set_weights:"set_weights",get_weights:"get_weights",set_offsets:"set_offsets",get_offsets:"get_offsets",set_vcount:"set_vcount",get_vcount:"get_vcount",set_shapeCount:"set_shapeCount",get_shapeCount:"get_shapeCount"}}),function(){this.cubeDir__=new Wr,this.depthThresholdMaxDist__=0,this.depthThreshold__=1,this.fixedColor__=new q(0,0,0,1),this.pixel__=new Gr(0,0,0),this.offsets__=[],this.values__=[],this.Quality__=0,this.inverseProj__=new Wr,W.call(this)}),zo=((i["h3d.shader.Blur"]=Po).__name__="h3d.shader.Blur",Po._SHADER=null,Po.__super__=W,Po.prototype=e(W.prototype,{get_inverseProj:function(){return this.inverseProj__},set_inverseProj:function(e){return this.inverseProj__=e},get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_depthTexture:function(){return this.depthTexture__},set_depthTexture:function(e){return this.depthTexture__=e},get_Quality:function(){return this.Quality__},set_Quality:function(e){return this.constModified=!0,this.Quality__=e},get_isDepth:function(){return this.isDepth__},set_isDepth:function(e){return this.constModified=!0,this.isDepth__=e},get_values:function(){return this.values__},set_values:function(e){return this.values__=e},get_offsets:function(){return this.offsets__},set_offsets:function(e){return this.offsets__=e},get_pixel:function(){return this.pixel__},set_pixel:function(e){return this.pixel__=e},get_hasFixedColor:function(){return this.hasFixedColor__},set_hasFixedColor:function(e){return this.constModified=!0,this.hasFixedColor__=e},get_smoothFixedColor:function(){return this.smoothFixedColor__},set_smoothFixedColor:function(e){return this.constModified=!0,this.smoothFixedColor__=e},get_fixedColor:function(){return this.fixedColor__},set_fixedColor:function(e){return this.fixedColor__=e},get_isDepthDependant:function(){return this.isDepthDependant__},set_isDepthDependant:function(e){return this.constModified=!0,this.isDepthDependant__=e},get_depthThreshold:function(){return this.depthThreshold__},set_depthThreshold:function(e){return this.depthThreshold__=e},get_depthThresholdMaxDist:function(){return this.depthThresholdMaxDist__},set_depthThresholdMaxDist:function(e){return this.depthThresholdMaxDist__=e},get_isCube:function(){return this.isCube__},set_isCube:function(e){return this.constModified=!0,this.isCube__=e},get_cubeTexture:function(){return this.cubeTexture__},set_cubeTexture:function(e){return this.cubeTexture__=e},get_cubeDir:function(){return this.cubeDir__},set_cubeDir:function(e){return this.cubeDir__=e},updateConstants:function(e){this.constBits=0;var t=this.Quality__;if(t>>>8!=0)throw tl.thrown("Quality is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t,this.isDepth__&&(this.constBits|=256),this.hasFixedColor__&&(this.constBits|=512),this.smoothFixedColor__&&(this.constBits|=1024),this.isDepthDependant__&&(this.constBits|=2048),this.isCube__&&(this.constBits|=4096),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.inverseProj__;case 2:return this.texture__;case 3:return this.depthTexture__;case 4:return this.Quality__;case 5:return this.isDepth__;case 6:return this.values__;case 7:return this.offsets__;case 8:return this.pixel__;case 9:return this.hasFixedColor__;case 10:return this.smoothFixedColor__;case 11:return this.fixedColor__;case 12:return this.isDepthDependant__;case 13:return this.depthThreshold__;case 14:return this.depthThresholdMaxDist__;case 15:return this.isCube__;case 16:return this.cubeTexture__;case 17:return this.cubeDir__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 4:return this.Quality__;case 13:return this.depthThreshold__;case 14:return this.depthThresholdMaxDist__}return 0},__class__:Po,__properties__:e(W.prototype.__properties__,{set_cubeDir:"set_cubeDir",get_cubeDir:"get_cubeDir",set_cubeTexture:"set_cubeTexture",get_cubeTexture:"get_cubeTexture",set_isCube:"set_isCube",get_isCube:"get_isCube",set_depthThresholdMaxDist:"set_depthThresholdMaxDist",get_depthThresholdMaxDist:"get_depthThresholdMaxDist",set_depthThreshold:"set_depthThreshold",get_depthThreshold:"get_depthThreshold",set_isDepthDependant:"set_isDepthDependant",get_isDepthDependant:"get_isDepthDependant",set_fixedColor:"set_fixedColor",get_fixedColor:"get_fixedColor",set_smoothFixedColor:"set_smoothFixedColor",get_smoothFixedColor:"get_smoothFixedColor",set_hasFixedColor:"set_hasFixedColor",get_hasFixedColor:"get_hasFixedColor",set_pixel:"set_pixel",get_pixel:"get_pixel",set_offsets:"set_offsets",get_offsets:"get_offsets",set_values:"set_values",get_values:"get_values",set_isDepth:"set_isDepth",get_isDepth:"get_isDepth",set_Quality:"set_Quality",get_Quality:"get_Quality",set_depthTexture:"set_depthTexture",get_depthTexture:"get_depthTexture",set_texture:"set_texture",get_texture:"get_texture",set_inverseProj:"set_inverseProj",get_inverseProj:"get_inverseProj"})}),(i["h3d.shader.ShaderBuffers"]=ci).__name__="h3d.shader.ShaderBuffers",ci.prototype={grow:function(e){var t=e.globalsSize<<2,n=e.paramsSize<<2,i=e.texturesCount,e=e.bufferCount;this.globals.length<t&&(this.globals=new Float32Array(t)),this.params.length<n&&(this.params=new Float32Array(n)),this.tex.length<i&&(this.tex=new Array(i)),0<e&&(null==this.buffers||this.buffers.length<e)&&(this.buffers=new Array(e))},__class__:ci},function(){this.vertex=new ci,this.fragment=new ci}),Qo=((i["h3d.shader.Buffers"]=zo).__name__="h3d.shader.Buffers",zo.prototype={__class__:zo},(i["h3d.shader.ColorAdd"]=_i).__name__="h3d.shader.ColorAdd",_i._SHADER=null,_i.__super__=O,_i.prototype=e(O.prototype,{get_color:function(){return this.color__},set_color:function(e){return this.color__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.color__:null},getParamFloatValue:function(e){return 0},__class__:_i,__properties__:{set_color:"set_color",get_color:"get_color"}}),(i["h3d.shader.ColorKey"]=di).__name__="h3d.shader.ColorKey",di._SHADER=null,di.__super__=O,di.prototype=e(O.prototype,{get_colorKey:function(){return this.colorKey__},set_colorKey:function(e){return this.colorKey__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.colorKey__:null},getParamFloatValue:function(e){return 0},__class__:di,__properties__:{set_colorKey:"set_colorKey",get_colorKey:"get_colorKey"}}),(i["h3d.shader.ColorMatrix"]=pi).__name__="h3d.shader.ColorMatrix",pi._SHADER=null,pi.__super__=O,pi.prototype=e(O.prototype,{get_matrix:function(){return this.matrix__},set_matrix:function(e){return this.matrix__=e},get_enabled:function(){return this.enabled__},set_enabled:function(e){return this.constModified=!0,this.enabled__=e},updateConstants:function(e){this.constBits=0,this.enabled__&&(this.constBits|=1),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.matrix__;case 1:return this.enabled__}return null},getParamFloatValue:function(e){return 0},__class__:pi,__properties__:{set_enabled:"set_enabled",get_enabled:"get_enabled",set_matrix:"set_matrix",get_matrix:"get_matrix"}}),function(){this.poissonDisk__=[],this.shadowBias__=0,this.shadowProj__=new Wr,this.shadowMapChannel__=rw.Unknown,this.shadowRes__=new Gr(0,0,0),this.pcfScale__=0,this.PCF_SAMPLES__=0,this.shadowPower__=0,this.CHECK_OUT_OF_BOUNDS__=!0,O.call(this),this.set_pcfQuality(1)}),Vo=((i["h3d.shader.DirShadow"]=Qo).__name__="h3d.shader.DirShadow",Qo._SHADER=null,Qo.__super__=O,Qo.prototype=e(O.prototype,{set_pcfQuality:function(e){var t;switch(e){case 2:t=[new q(-.326,-.406,0,1),new q(-.84,-.074,0,1),new q(-.696,.457,0,1),new q(-.203,.621,0,1),new q(.962,-.195,0,1),new q(.473,-.48,0,1),new q(.519,.767,0,1),new q(.185,-.893,0,1),new q(.507,.064,0,1),new q(.896,.412,0,1),new q(-.322,-.933,0,1),new q(-.792,-.598,0,1)];break;case 3:t=[new q(-.613392,.617481,0,1),new q(.170019,-.040254,0,1),new q(-.299417,.791925,0,1),new q(.64568,.49321,0,1),new q(-.651784,.717887,0,1),new q(.421003,.02707,0,1),new q(-.817194,-.271096,0,1),new q(-.705374,-.668203,0,1),new q(.97705,-.108615,0,1),new q(.063326,.142369,0,1),new q(.203528,.214331,0,1),new q(-.667531,.32609,0,1),new q(-.098422,-.295755,0,1),new q(-.885922,.215369,0,1),new q(.566637,.605213,0,1),new q(.039766,-.3961,0,1),new q(.751946,.453352,0,1),new q(.078707,-.715323,0,1),new q(-.075838,-.529344,0,1),new q(.724479,-.580798,0,1),new q(.222999,-.215125,0,1),new q(-.467574,-.405438,0,1),new q(-.248268,-.814753,0,1),new q(.354411,-.88757,0,1),new q(.175817,.382366,0,1),new q(.487472,-.063082,0,1),new q(-.084078,.898312,0,1),new q(.488876,-.783441,0,1),new q(.470016,.217933,0,1),new q(-.69689,-.549791,0,1),new q(-.149693,.605762,0,1),new q(.034211,.97998,0,1),new q(.503098,-.308878,0,1),new q(-.016205,-.872921,0,1),new q(.385784,-.393902,0,1),new q(-.146886,-.859249,0,1),new q(.643361,.164098,0,1),new q(.634388,-.049471,0,1),new q(-.688894,.007843,0,1),new q(.464034,-.188818,0,1),new q(-.44084,.137486,0,1),new q(.364483,.511704,0,1),new q(.034028,.325968,0,1),new q(.099094,-.308023,0,1),new q(.69396,-.366253,0,1),new q(.678884,-.204688,0,1),new q(.001801,.780328,0,1),new q(.145177,-.898984,0,1),new q(.062655,-.611866,0,1),new q(.315226,-.604297,0,1),new q(-.780145,.486251,0,1),new q(-.371868,.882138,0,1),new q(.200476,.49443,0,1),new q(-.494552,-.711051,0,1),new q(.612476,.705252,0,1),new q(-.578845,-.768792,0,1),new q(-.772454,-.090976,0,1),new q(.50444,.372295,0,1),new q(.155736,.065157,0,1),new q(.391522,.849605,0,1),new q(-.620106,-.328104,0,1),new q(.789239,-.419965,0,1),new q(-.545396,.538133,0,1),new q(-.178564,-.596057,0,1)];break;default:t=[new q(-.942,-.399,0,1),new q(.945,-.768,0,1),new q(-.094,-.929,0,1),new q(.344,.293,0,1)]}return this.poissonDisk__=t,this.constModified=!0,this.PCF_SAMPLES__=this.poissonDisk__.length,e},get_enable:function(){return this.enable__},set_enable:function(e){return this.constModified=!0,this.enable__=e},get_CHECK_OUT_OF_BOUNDS:function(){return this.CHECK_OUT_OF_BOUNDS__},set_CHECK_OUT_OF_BOUNDS:function(e){return this.constModified=!0,this.CHECK_OUT_OF_BOUNDS__=e},get_USE_ESM:function(){return this.USE_ESM__},set_USE_ESM:function(e){return this.constModified=!0,this.USE_ESM__=e},get_shadowPower:function(){return this.shadowPower__},set_shadowPower:function(e){return this.shadowPower__=e},get_USE_PCF:function(){return this.USE_PCF__},set_USE_PCF:function(e){return this.constModified=!0,this.USE_PCF__=e},get_PCF_SAMPLES:function(){return this.PCF_SAMPLES__},set_PCF_SAMPLES:function(e){return this.constModified=!0,this.PCF_SAMPLES__=e},get_pcfScale:function(){return this.pcfScale__},set_pcfScale:function(e){return this.pcfScale__=e},get_shadowRes:function(){return this.shadowRes__},set_shadowRes:function(e){return this.shadowRes__=e},get_shadowMap:function(){return this.shadowMap__},set_shadowMap:function(e){return this.constModified=!0,this.shadowMap__=e},get_shadowProj:function(){return this.shadowProj__},set_shadowProj:function(e){return this.shadowProj__=e},get_shadowBias:function(){return this.shadowBias__},set_shadowBias:function(e){return this.shadowBias__=e},get_poissonDisk:function(){return this.poissonDisk__},set_poissonDisk:function(e){return this.poissonDisk__=e},updateConstants:function(e){this.constBits=0,this.enable__&&(this.constBits|=1),this.CHECK_OUT_OF_BOUNDS__&&(this.constBits|=2),this.USE_ESM__&&(this.constBits|=4),this.USE_PCF__&&(this.constBits|=8);var t=this.PCF_SAMPLES__;if(t>>>8!=0)throw tl.thrown("PCF_SAMPLES is out of range "+t+">255, consider using @const(MAX_VALUE)");if(this.constBits|=t<<4,null==this.shadowMap__)this.shadowMapChannel__=rw.Unknown;else if(this.shadowMapChannel__==rw.Unknown){if(this.shadowMap__.format!=_o.nativeFormat)throw tl.thrown("shadowMapChannel is not set");this.shadowMapChannel__=rw.PackedFloat}this.constBits|=(e.allocChannelID(this.shadowMap__)<<3|this.shadowMapChannel__._hx_index)<<12,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.enable__;case 1:return this.CHECK_OUT_OF_BOUNDS__;case 2:return this.USE_ESM__;case 3:return this.shadowPower__;case 4:return this.USE_PCF__;case 5:return this.PCF_SAMPLES__;case 6:return this.pcfScale__;case 7:return this.shadowRes__;case 8:return this.shadowMap__;case 9:return this.shadowProj__;case 10:return this.shadowBias__;case 11:return this.poissonDisk__}return null},getParamFloatValue:function(e){switch(e){case 3:return this.shadowPower__;case 5:return this.PCF_SAMPLES__;case 6:return this.pcfScale__;case 10:return this.shadowBias__}return 0},__class__:Qo,__properties__:{set_poissonDisk:"set_poissonDisk",get_poissonDisk:"get_poissonDisk",set_shadowBias:"set_shadowBias",get_shadowBias:"get_shadowBias",set_shadowProj:"set_shadowProj",get_shadowProj:"get_shadowProj",set_shadowMap:"set_shadowMap",get_shadowMap:"get_shadowMap",set_shadowRes:"set_shadowRes",get_shadowRes:"get_shadowRes",set_pcfScale:"set_pcfScale",get_pcfScale:"get_pcfScale",set_PCF_SAMPLES:"set_PCF_SAMPLES",get_PCF_SAMPLES:"get_PCF_SAMPLES",set_USE_PCF:"set_USE_PCF",get_USE_PCF:"get_USE_PCF",set_shadowPower:"set_shadowPower",get_shadowPower:"get_shadowPower",set_USE_ESM:"set_USE_ESM",get_USE_ESM:"get_USE_ESM",set_CHECK_OUT_OF_BOUNDS:"set_CHECK_OUT_OF_BOUNDS",get_CHECK_OUT_OF_BOUNDS:"get_CHECK_OUT_OF_BOUNDS",set_enable:"set_enable",get_enable:"get_enable",set_pcfQuality:"set_pcfQuality"}}),(i["h3d.shader.GenTexture"]=mi).__name__="h3d.shader.GenTexture",mi._SHADER=null,mi.__super__=W,mi.prototype=e(W.prototype,{get_mode:function(){return this.mode__},set_mode:function(e){return this.constModified=!0,this.mode__=e},get_color:function(){return this.color__},set_color:function(e){return this.color__=e},updateConstants:function(e){this.constBits=0;var t=this.mode__;if(t>>>8!=0)throw tl.thrown("mode is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.mode__;case 2:return this.color__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.mode__}return 0},__class__:mi,__properties__:e(W.prototype.__properties__,{set_color:"set_color",get_color:"get_color",set_mode:"set_mode",get_mode:"get_mode"})}),function(e,t){null==t&&(t=1),null==e&&(e=1.5),this.width__=0,this.lengthScale__=0,O.call(this),this.width__=e,this.lengthScale__=t}),Oo=((i["h3d.shader.LineShader"]=Vo).__name__="h3d.shader.LineShader",Vo._SHADER=null,Vo.__super__=O,Vo.prototype=e(O.prototype,{get_lengthScale:function(){return this.lengthScale__},set_lengthScale:function(e){return this.lengthScale__=e},get_width:function(){return this.width__},set_width:function(e){return this.width__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.lengthScale__;case 1:return this.width__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.lengthScale__;case 1:return this.width__}return 0},__class__:Vo,__properties__:{set_width:"set_width",get_width:"get_width",set_lengthScale:"set_lengthScale",get_lengthScale:"get_lengthScale"}}),function(){W.call(this)}),Wo=((i["h3d.shader.MinMaxShader"]=Oo).__name__="h3d.shader.MinMaxShader",Oo._SHADER=null,Oo.__super__=W,Oo.prototype=e(W.prototype,{get_texA:function(){return this.texA__},set_texA:function(e){return this.texA__=e},get_texB:function(){return this.texB__},set_texB:function(e){return this.texB__=e},get_isMax:function(){return this.isMax__},set_isMax:function(e){return this.constModified=!0,this.isMax__=e},updateConstants:function(e){this.constBits=0,this.isMax__&&(this.constBits|=1),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texA__;case 2:return this.texB__;case 3:return this.isMax__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:Oo,__properties__:e(W.prototype.__properties__,{set_isMax:"set_isMax",get_isMax:"get_isMax",set_texB:"set_texB",get_texB:"get_texB",set_texA:"set_texA",get_texA:"get_texA"})}),(i["h3d.shader.CubeMinMaxShader"]=gi).__name__="h3d.shader.CubeMinMaxShader",gi._SHADER=null,gi.__super__=W,gi.prototype=e(W.prototype,{get_texA:function(){return this.texA__},set_texA:function(e){return this.texA__=e},get_texB:function(){return this.texB__},set_texB:function(e){return this.texB__=e},get_isMax:function(){return this.isMax__},set_isMax:function(e){return this.constModified=!0,this.isMax__=e},get_mat:function(){return this.mat__},set_mat:function(e){return this.mat__=e},updateConstants:function(e){this.constBits=0,this.isMax__&&(this.constBits|=1),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texA__;case 2:return this.texB__;case 3:return this.isMax__;case 4:return this.mat__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:gi,__properties__:e(W.prototype.__properties__,{set_mat:"set_mat",get_mat:"get_mat",set_isMax:"set_isMax",get_isMax:"get_isMax",set_texB:"set_texB",get_texB:"get_texB",set_texA:"set_texA",get_texA:"get_texA"})}),function(e){O.call(this),this.texture__=e}),No=((i["h3d.shader.NormalMap"]=Wo).__name__="h3d.shader.NormalMap",Wo._SHADER=null,Wo.__super__=O,Wo.prototype=e(O.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.texture__:null},getParamFloatValue:function(e){return 0},__class__:Wo,__properties__:{set_texture:"set_texture",get_texture:"get_texture"}}),(i["h3d.shader.Outline2D"]=fi).__name__="h3d.shader.Outline2D",fi._SHADER=null,fi.__super__=W,fi.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_size:function(){return this.size__},set_size:function(e){return this.size__=e},get_samples:function(){return this.samples__},set_samples:function(e){return this.constModified=!0,this.samples__=e},get_color:function(){return this.color__},set_color:function(e){return this.color__=e},get_multiplyAlpha:function(){return this.multiplyAlpha__},set_multiplyAlpha:function(e){return this.constModified=!0,this.multiplyAlpha__=e},updateConstants:function(e){this.constBits=0;var t=this.samples__;if(t>>>8!=0)throw tl.thrown("samples is out of range "+t+">255, consider using @const(MAX_VALUE)");if(this.constBits|=t,(t=this.multiplyAlpha__)>>>8!=0)throw tl.thrown("multiplyAlpha is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t<<8,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.size__;case 3:return this.samples__;case 4:return this.color__;case 5:return this.multiplyAlpha__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 3:return this.samples__;case 5:return this.multiplyAlpha__}return 0},__class__:fi,__properties__:e(W.prototype.__properties__,{set_multiplyAlpha:"set_multiplyAlpha",get_multiplyAlpha:"get_multiplyAlpha",set_color:"set_color",get_color:"get_color",set_samples:"set_samples",get_samples:"get_samples",set_size:"set_size",get_size:"get_size",set_texture:"set_texture",get_texture:"get_texture"})}),function(){O.call(this)}),Go=((i["h3d.shader.Shadow"]=No).__name__="h3d.shader.Shadow",No._SHADER=null,No.__super__=O,No.prototype=e(O.prototype,{updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return null},getParamFloatValue:function(e){return 0},__class__:No}),function(){this.smoothing__=.041666666666666664,this.alphaCutoff__=.5,this.autoSmoothing__=!1,this.channel__=0,O.call(this)}),Uo=((i["h3d.shader.SignedDistanceField"]=Go).__name__="h3d.shader.SignedDistanceField",Go._SHADER=null,Go.__super__=O,Go.prototype=e(O.prototype,{get_channel:function(){return this.channel__},set_channel:function(e){return this.constModified=!0,this.channel__=e},get_autoSmoothing:function(){return this.autoSmoothing__},set_autoSmoothing:function(e){return this.constModified=!0,this.autoSmoothing__=e},get_alphaCutoff:function(){return this.alphaCutoff__},set_alphaCutoff:function(e){return this.alphaCutoff__=e},get_smoothing:function(){return this.smoothing__},set_smoothing:function(e){return this.smoothing__=e},updateConstants:function(e){this.constBits=0;var t=this.channel__;if(t>>>8!=0)throw tl.thrown("channel is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t,this.autoSmoothing__&&(this.constBits|=256),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.channel__;case 1:return this.autoSmoothing__;case 2:return this.alphaCutoff__;case 3:return this.smoothing__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.channel__;case 2:return this.alphaCutoff__;case 3:return this.smoothing__}return 0},__class__:Go,__properties__:{set_smoothing:"set_smoothing",get_smoothing:"get_smoothing",set_alphaCutoff:"set_alphaCutoff",get_alphaCutoff:"get_alphaCutoff",set_autoSmoothing:"set_autoSmoothing",get_autoSmoothing:"get_autoSmoothing",set_channel:"set_channel",get_channel:"get_channel"}}),(i["h3d.shader.Utils"]=Ai).__name__="h3d.shader.Utils",Ai._SHADER=null,Ai.__super__=O,Ai.prototype=e(O.prototype,{updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return null},getParamFloatValue:function(e){return 0},__class__:Ai}),(i["h3d.shader.SkinBase"]=xi).__name__="h3d.shader.SkinBase",xi._SHADER=null,xi.__super__=O,xi.prototype=e(O.prototype,{get_MaxBones:function(){return this.MaxBones__},set_MaxBones:function(e){return this.constModified=!0,this.MaxBones__=e},get_fourBonesByVertex:function(){return this.fourBonesByVertex__},set_fourBonesByVertex:function(e){return this.constModified=!0,this.fourBonesByVertex__=e},get_calcPrevPos:function(){return this.calcPrevPos__},set_calcPrevPos:function(e){return this.constModified=!0,this.calcPrevPos__=e},get_bonesMatrixes:function(){return this.bonesMatrixes__},set_bonesMatrixes:function(e){return this.bonesMatrixes__=e},get_prevBonesMatrixes:function(){return this.prevBonesMatrixes__},set_prevBonesMatrixes:function(e){return this.prevBonesMatrixes__=e},updateConstants:function(e){this.constBits=0;var t=this.MaxBones__;if(t>>>8!=0)throw tl.thrown("MaxBones is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t,this.fourBonesByVertex__&&(this.constBits|=256),this.calcPrevPos__&&(this.constBits|=512),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.MaxBones__;case 1:return this.fourBonesByVertex__;case 2:return this.calcPrevPos__;case 3:return this.bonesMatrixes__;case 4:return this.prevBonesMatrixes__}return null},getParamFloatValue:function(e){return 0==e?this.MaxBones__:0},__class__:xi,__properties__:{set_prevBonesMatrixes:"set_prevBonesMatrixes",get_prevBonesMatrixes:"get_prevBonesMatrixes",set_bonesMatrixes:"set_bonesMatrixes",get_bonesMatrixes:"get_bonesMatrixes",set_calcPrevPos:"set_calcPrevPos",get_calcPrevPos:"get_calcPrevPos",set_fourBonesByVertex:"set_fourBonesByVertex",get_fourBonesByVertex:"get_fourBonesByVertex",set_MaxBones:"set_MaxBones",get_MaxBones:"get_MaxBones"}}),function(){xi.call(this)}),Lo=((i["h3d.shader.Skin"]=Uo).__name__="h3d.shader.Skin",Uo._SHADER=null,Uo.__super__=xi,Uo.prototype=e(xi.prototype,{updateConstants:function(e){this.constBits=0;var t=this.MaxBones__;if(t>>>8!=0)throw tl.thrown("MaxBones is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t,this.fourBonesByVertex__&&(this.constBits|=256),this.calcPrevPos__&&(this.constBits|=512),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.MaxBones__;case 1:return this.fourBonesByVertex__;case 2:return this.calcPrevPos__;case 3:return this.bonesMatrixes__;case 4:return this.prevBonesMatrixes__}return null},getParamFloatValue:function(e){return 0==e?this.MaxBones__:0},__class__:Uo}),function(){xi.call(this)}),jo=((i["h3d.shader.SkinTangent"]=Lo).__name__="h3d.shader.SkinTangent",Lo._SHADER=null,Lo.__super__=xi,Lo.prototype=e(xi.prototype,{updateConstants:function(e){this.constBits=0;var t=this.MaxBones__;if(t>>>8!=0)throw tl.thrown("MaxBones is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t,this.fourBonesByVertex__&&(this.constBits|=256),this.calcPrevPos__&&(this.constBits|=512),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.MaxBones__;case 1:return this.fourBonesByVertex__;case 2:return this.calcPrevPos__;case 3:return this.bonesMatrixes__;case 4:return this.prevBonesMatrixes__}return null},getParamFloatValue:function(e){return 0==e?this.MaxBones__:0},__class__:Lo}),function(e){O.call(this),this.texture__=e}),Ho=((i["h3d.shader.SpecularTexture"]=jo).__name__="h3d.shader.SpecularTexture",jo._SHADER=null,jo.__super__=O,jo.prototype=e(O.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.texture__:null},getParamFloatValue:function(e){return 0},__class__:jo,__properties__:{set_texture:"set_texture",get_texture:"get_texture"}}),function(e){this.killAlphaThreshold__=0,O.call(this),this.texture__=e,this.killAlphaThreshold__=oo.defaultKillAlphaThreshold}),Yo=((i["h3d.shader.Texture"]=Ho).__name__="h3d.shader.Texture",Ho._SHADER=null,Ho.__super__=O,Ho.prototype=e(O.prototype,{get_additive:function(){return this.additive__},set_additive:function(e){return this.constModified=!0,this.additive__=e},get_killAlpha:function(){return this.killAlpha__},set_killAlpha:function(e){return this.constModified=!0,this.killAlpha__=e},get_specularAlpha:function(){return this.specularAlpha__},set_specularAlpha:function(e){return this.constModified=!0,this.specularAlpha__=e},get_killAlphaThreshold:function(){return this.killAlphaThreshold__},set_killAlphaThreshold:function(e){return this.killAlphaThreshold__=e},get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},updateConstants:function(e){this.constBits=0,this.additive__&&(this.constBits|=1),this.killAlpha__&&(this.constBits|=2),this.specularAlpha__&&(this.constBits|=4),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.additive__;case 1:return this.killAlpha__;case 2:return this.specularAlpha__;case 3:return this.killAlphaThreshold__;case 4:return this.texture__}return null},getParamFloatValue:function(e){return 3==e?this.killAlphaThreshold__:0},__class__:Ho,__properties__:{set_texture:"set_texture",get_texture:"get_texture",set_killAlphaThreshold:"set_killAlphaThreshold",get_killAlphaThreshold:"get_killAlphaThreshold",set_specularAlpha:"set_specularAlpha",get_specularAlpha:"get_specularAlpha",set_killAlpha:"set_killAlpha",get_killAlpha:"get_killAlpha",set_additive:"set_additive",get_additive:"get_additive"}}),(i["h3d.shader.UVDelta"]=wi).__name__="h3d.shader.UVDelta",wi._SHADER=null,wi.__super__=O,wi.prototype=e(O.prototype,{get_uvDelta:function(){return this.uvDelta__},set_uvDelta:function(e){return this.uvDelta__=e},get_uvScale:function(){return this.uvScale__},set_uvScale:function(e){return this.uvScale__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.uvDelta__;case 1:return this.uvScale__}return null},getParamFloatValue:function(e){return 0},__class__:wi,__properties__:{set_uvScale:"set_uvScale",get_uvScale:"get_uvScale",set_uvDelta:"set_uvDelta",get_uvDelta:"get_uvDelta"}}),(i["h3d.shader.VertexColor"]=yi).__name__="h3d.shader.VertexColor",yi._SHADER=null,yi.__super__=O,yi.prototype=e(O.prototype,{get_additive:function(){return this.additive__},set_additive:function(e){return this.constModified=!0,this.additive__=e},updateConstants:function(e){this.constBits=0,this.additive__&&(this.constBits|=1),this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.additive__:null},getParamFloatValue:function(e){return 0},__class__:yi,__properties__:{set_additive:"set_additive",get_additive:"get_additive"}}),function(){O.call(this)}),Zo=((i["h3d.shader.VertexColorAlpha"]=Yo).__name__="h3d.shader.VertexColorAlpha",Yo._SHADER=null,Yo.__super__=O,Yo.prototype=e(O.prototype,{get_additive:function(){return this.additive__},set_additive:function(e){return this.constModified=!0,this.additive__=e},updateConstants:function(e){this.constBits=0,this.additive__&&(this.constBits|=1),this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.additive__:null},getParamFloatValue:function(e){return 0},__class__:Yo,__properties__:{set_additive:"set_additive",get_additive:"get_additive"}}),(i["h3d.shader.VolumeDecal"]=bi).__name__="h3d.shader.VolumeDecal",bi._SHADER=null,bi.__super__=O,bi.prototype=e(O.prototype,{get_scale:function(){return this.scale__},set_scale:function(e){return this.scale__=e},get_normal:function(){return this.normal__},set_normal:function(e){return this.normal__=e},get_tangent:function(){return this.tangent__},set_tangent:function(e){return this.tangent__=e},get_isCentered:function(){return this.isCentered__},set_isCentered:function(e){return this.constModified=!0,this.isCentered__=e},updateConstants:function(e){this.constBits=0,this.isCentered__&&(this.constBits|=64),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.scale__;case 1:return this.normal__;case 2:return this.tangent__;case 3:return this.isCentered__}return null},getParamFloatValue:function(e){return 0},__class__:bi,__properties__:{set_isCentered:"set_isCentered",get_isCentered:"get_isCentered",set_tangent:"set_tangent",get_tangent:"get_tangent",set_normal:"set_normal",get_normal:"get_normal",set_scale:"set_scale",get_scale:"get_scale"}}),{}),Xo=(Zo.toString=function(e){return e},(i["hacksaw.common.api.GameInfoCallbackData"]=vi).__name__="hacksaw.common.api.GameInfoCallbackData",vi.prototype={__class__:vi},(i["hacksaw.common.api.GameLoadedData"]=Ci).__name__="hacksaw.common.api.GameLoadedData",Ci.prototype={__class__:Ci},fe["hacksaw.common.enums.UiCustomSetting"]={__ename__:!0,__constructs__:null,RevealBehavior:((R=function(e){return{_hx_index:0,behavior:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="RevealBehavior",R.__params__=["behavior"],R),UiTheme:((R=function(e){return{_hx_index:1,theme:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="UiTheme",R.__params__=["theme"],R),SuperTurbo:((R=function(e){return{_hx_index:2,available:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="SuperTurbo",R.__params__=["available"],R),FeatureBuy:((R=function(e,t){return{_hx_index:3,items:e,uiConfig:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="FeatureBuy",R.__params__=["items","uiConfig"],R),ItemCount:((R=function(e,t,n,i,s){return{_hx_index:4,name:e,initial:t,triggers:n,availableDuringPlay:i,uiElementType:s,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="ItemCount",R.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],R),GridSize:((R=function(e,t,n,i,s){return{_hx_index:5,name:e,initial:t,triggers:n,availableDuringPlay:i,uiElementType:s,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="GridSize",R.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],R),Difficulty:((R=function(e,t,n,i,s){return{_hx_index:6,name:e,initial:t,triggers:n,availableDuringPlay:i,uiElementType:s,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="Difficulty",R.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],R),Appearance:((R=function(e,t,n,i,s){return{_hx_index:7,name:e,initial:t,triggers:n,availableDuringPlay:i,uiElementType:s,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="Appearance",R.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],R),WinFieldStyle:((R=function(e){return{_hx_index:8,style:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="WinFieldStyle",R.__params__=["style"],R),Autoplay:((R=function(e,t){return{_hx_index:9,available:e,delays:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="Autoplay",R.__params__=["available","delays"],R),CollectableWins:((R=function(e){return{_hx_index:10,available:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="CollectableWins",R.__params__=["available"],R),Turbo:((R=function(e){return{_hx_index:11,available:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="Turbo",R.__params__=["available"],R),Audio:((R=function(e,t){return{_hx_index:12,sound:e,music:t,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="Audio",R.__params__=["sound","music"],R),UiLayouts:((R=function(e){return{_hx_index:13,layouts:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="UiLayouts",R.__params__=["layouts"],R),TotalBetAmount:((R=function(e){return{_hx_index:14,available:e,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="TotalBetAmount",R.__params__=["available"],R),LimitsRange:((R=function(e,t,n,i,s){return{_hx_index:15,name:e,initial:t,triggers:n,availableDuringPlay:i,uiElementType:s,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="LimitsRange",R.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],R),AutoplayPattern:((R=function(e,t,n,i,s){return{_hx_index:16,name:e,initial:t,triggers:n,availableDuringPlay:i,uiElementType:s,__enum__:"hacksaw.common.enums.UiCustomSetting",toString:o}})._hx_name="AutoplayPattern",R.__params__=["name","initial","triggers","availableDuringPlay","uiElementType"],R)}),qo=(Xo.__constructs__=[Xo.RevealBehavior,Xo.UiTheme,Xo.SuperTurbo,Xo.FeatureBuy,Xo.ItemCount,Xo.GridSize,Xo.Difficulty,Xo.Appearance,Xo.WinFieldStyle,Xo.Autoplay,Xo.CollectableWins,Xo.Turbo,Xo.Audio,Xo.UiLayouts,Xo.TotalBetAmount,Xo.LimitsRange,Xo.AutoplayPattern],Xo.__empty_constructs__=[],(i["hacksaw.common.enums.ItemCountData"]=Si).__name__="hacksaw.common.enums.ItemCountData",(i["hacksaw.common.enums.AppearanceData"]=ki).__name__="hacksaw.common.enums.AppearanceData",(i["hacksaw.common.enums.GridSizeData"]=Mi).__name__="hacksaw.common.enums.GridSizeData",(i["hacksaw.common.enums.DifficultyData"]=Ii).__name__="hacksaw.common.enums.DifficultyData",(i["hacksaw.common.enums.LimitsRangeData"]=Bi).__name__="hacksaw.common.enums.LimitsRangeData",(i["hacksaw.common.enums.AutoplayDelays"]=Ti).__name__="hacksaw.common.enums.AutoplayDelays",fe["hacksaw.common.enums.UiRevealBehavior"]={__ename__:!0,__constructs__:null,SPIN:{_hx_name:"SPIN",_hx_index:0,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:o},DROP:{_hx_name:"DROP",_hx_index:1,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:o},TWIST:{_hx_name:"TWIST",_hx_index:2,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:o},ROTATE:{_hx_name:"ROTATE",_hx_index:3,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:o},Custom:((R=function(e){return{_hx_index:4,behaviorName:e,__enum__:"hacksaw.common.enums.UiRevealBehavior",toString:o}})._hx_name="Custom",R.__params__=["behaviorName"],R)}),n=(qo.__constructs__=[qo.SPIN,qo.DROP,qo.TWIST,qo.ROTATE,qo.Custom],qo.__empty_constructs__=[qo.SPIN,qo.DROP,qo.TWIST,qo.ROTATE],fe["hacksaw.common.enums.UiWinFieldStyle"]={__ename__:!0,__constructs__:null,STANDALONE:{_hx_name:"STANDALONE",_hx_index:0,__enum__:"hacksaw.common.enums.UiWinFieldStyle",toString:o},TICKER:{_hx_name:"TICKER",_hx_index:1,__enum__:"hacksaw.common.enums.UiWinFieldStyle",toString:o}});n.__constructs__=[n.STANDALONE,n.TICKER],n.__empty_constructs__=[n.STANDALONE,n.TICKER],(i["hacksaw.common.enums.AutoplayPatternData"]=Ei).__name__="hacksaw.common.enums.AutoplayPatternData";(n=fe["hacksaw.common.enums.UiLayoutSetting"]={__ename__:!0,__constructs__:null,Desktop:((R=function(e){return{_hx_index:0,landscape:e,__enum__:"hacksaw.common.enums.UiLayoutSetting",toString:o}})._hx_name="Desktop",R.__params__=["landscape"],R),Mobile:((R=function(e,t){return{_hx_index:1,landscape:e,portrait:t,__enum__:"hacksaw.common.enums.UiLayoutSetting",toString:o}})._hx_name="Mobile",R.__params__=["landscape","portrait"],R)}).__constructs__=[n.Desktop,n.Mobile],n.__empty_constructs__=[],(i["hacksaw.common.types.CentsRangeBacking"]=Fi).__name__="hacksaw.common.types.CentsRangeBacking",Fi.prototype={__class__:Fi},(i["hacksaw.common.types.FeatureBuyItem"]=Di).__name__="hacksaw.common.types.FeatureBuyItem",Di.fromDynamic=function(e){var t;return null==e?null:new Di((t=function(e){return null==e?null:el.string(e)})(e.bonusGameId),t(e.name),t(e.betCostMultiplier),parseFloat(t(e.expectedRtp)),t(e.image),t(e.description),t(e.volatility),t(e.volatility2),"true"==t(e.betCostMultiplierBaseGameEffect),t(e.featureBuyItemType),t(e.customClassName))},Di.prototype={get_featureBuyItemType:function(){var e=this.featureBuyItemType;return null==e?Ae.startsWith(this.bonusGameId,"mod_")?"FeatureSpinItem":Ae.startsWith(this.bonusGameId,"bob_")?"BestOfBonusItem":"BonusBuyItem":e},__class__:Di,__properties__:{get_featureBuyItemType:"get_featureBuyItemType"}},(i["hacksaw.common.types.FeatureBuyUiConfig"]=Ri).__name__="hacksaw.common.types.FeatureBuyUiConfig",(i["hacksaw.common.types.FloatRangeBacking"]=Pi).__name__="hacksaw.common.types.FloatRangeBacking",Pi.prototype={__class__:Pi},(i["hacksaw.common.types.LayoutOrientationSettings"]=zi).__name__="hacksaw.common.types.LayoutOrientationSettings",(i["hacksaw.common.types.IntRange"]=Qi).__name__="hacksaw.common.types.IntRange",Qi.prototype={__class__:Qi},(i["hacksaw.common.utils.Log"]=Vi).__name__="hacksaw.common.utils.Log",Vi.warn=function(e){console.warn("Hacksaw-Warning: ",e)},Vi.message=function(e){console.log("Hacksaw-Message: ",e)},(i["hacksaw.core.Atlas_backgrounds_bonus_one"]=Oi).__name__="hacksaw.core.Atlas_backgrounds_bonus_one",(i["hacksaw.core.Atlas_backgrounds_bonus_one_info"]=Wi).__name__="hacksaw.core.Atlas_backgrounds_bonus_one_info",(i["hacksaw.core.Atlas_backgrounds_bonus_two"]=Ni).__name__="hacksaw.core.Atlas_backgrounds_bonus_two",(i["hacksaw.core.Atlas_backgrounds_bonus_two_info"]=Gi).__name__="hacksaw.core.Atlas_backgrounds_bonus_two_info",(i["hacksaw.core.Atlas_backgrounds"]=Ui).__name__="hacksaw.core.Atlas_backgrounds",(i["hacksaw.core.Atlas_backgrounds_info"]=Li).__name__="hacksaw.core.Atlas_backgrounds_info",(i["hacksaw.core.Atlas_coin_animation_info"]=ji).__name__="hacksaw.core.Atlas_coin_animation_info",(i["hacksaw.core.Atlas_digits_bronze_info"]=Hi).__name__="hacksaw.core.Atlas_digits_bronze_info",(i["hacksaw.core.Atlas_digits_bullets_info"]=Yi).__name__="hacksaw.core.Atlas_digits_bullets_info",(i["hacksaw.core.Atlas_digits_clover_info"]=Zi).__name__="hacksaw.core.Atlas_digits_clover_info",(i["hacksaw.core.Atlas_digits_countup_info"]=Xi).__name__="hacksaw.core.Atlas_digits_countup_info",(i["hacksaw.core.Atlas_digits_diamond_info"]=qi).__name__="hacksaw.core.Atlas_digits_diamond_info",(i["hacksaw.core.Atlas_digits_gold_info"]=Ki).__name__="hacksaw.core.Atlas_digits_gold_info",(i["hacksaw.core.Atlas_digits_info"]=Ji).__name__="hacksaw.core.Atlas_digits_info",(i["hacksaw.core.Atlas_digits_silver_info"]=$i).__name__="hacksaw.core.Atlas_digits_silver_info",(i["hacksaw.core.Atlas_misc_bonus"]=es).__name__="hacksaw.core.Atlas_misc_bonus",(i["hacksaw.core.Atlas_misc_bonus_info"]=ts).__name__="hacksaw.core.Atlas_misc_bonus_info",(i["hacksaw.core.Atlas_misc"]=ns).__name__="hacksaw.core.Atlas_misc",(i["hacksaw.core.Atlas_misc_info"]=is).__name__="hacksaw.core.Atlas_misc_info",(i["hacksaw.core.Atlas_splash"]=ss).__name__="hacksaw.core.Atlas_splash",(i["hacksaw.core.Atlas_splash_info"]=as).__name__="hacksaw.core.Atlas_splash_info";var J=function(){U.typeof(J.backgrounds),U.typeof(J.misc_bonus),U.typeof(J.backgrounds_bonus_two),U.typeof(J.splash),U.typeof(J.misc),U.typeof(J.backgrounds_bonus_one),U.typeof(J.digits_countup),U.typeof(J.digits_silver),U.typeof(J.digits_diamond),U.typeof(J.digits_clover),U.typeof(J.digits_bronze),U.typeof(J.digits_gold),U.typeof(J.digits_bullets),U.typeof(J.digits),U.typeof(J.coin_animation)},at=((i["hacksaw.core.Atlases"]=J).__name__="hacksaw.core.Atlases",J.backgrounds=null,J.misc_bonus=null,J.backgrounds_bonus_two=null,J.splash=null,J.misc=null,J.backgrounds_bonus_one=null,J.digits_countup=null,J.digits_silver=null,J.digits_diamond=null,J.digits_clover=null,J.digits_bronze=null,J.digits_gold=null,J.digits_bullets=null,J.digits=null,J.coin_animation=null,J.prototype={__class__:J},function(){this.h=Object.create(null)}),Ko=((i["haxe.ds.StringMap"]=at).__name__="haxe.ds.StringMap",at.__interfaces__=[z],at.createCopy=function(e){var t,n=new at;for(t in e)n.h[t]=e[t];return n},at.prototype={exists:function(e){return Object.prototype.hasOwnProperty.call(this.h,e)},get:function(e){return this.h[e]},set:function(e,t){this.h[e]=t},keys:function(){return new WA(this.h)},iterator:function(){return new NA(this.h)},__class__:at},(i["hacksaw.core.Configs"]=ls).__name__="hacksaw.core.Configs",ls.prototype={__class__:ls},(i["hacksaw.core.Gradients"]=rs).__name__="hacksaw.core.Gradients",rs.prototype={__class__:rs},(i["hacksaw.core.Images"]=os).__name__="hacksaw.core.Images",os.prototype={__class__:os},(i["hacksaw.core.Models"]=us).__name__="hacksaw.core.Models",us.prototype={__class__:us},(i["hacksaw.core.Sounds"]=t).__name__="hacksaw.core.Sounds",t.wintier_1=null,t.music_bonus_level_2=null,t.update_sweep_2=null,t.bag_zipper_ding=null,t.symdrop_3=null,t.spurs_wood_1=null,t.bush_hawk_transit=null,t.pop_glitter_1=null,t.infuriated_3=null,t.delighted_1=null,t.music_level_2=null,t.music_bonus_level_1=null,t.spurs_wood_2=null,t.diamond=null,t.dropgrid_out=null,t.delighted_3=null,t.win_end_bet_high=null,t.fuming_1=null,t.suspense_drums=null,t.arrow=null,t.western_bonus_3=null,t.impact_gun_spin=null,t.raccoon_welcome_3=null,t.symdrop_1=null,t.western_vignette_1=null,t.bugle_cannon_1=null,t.update_sweep_6=null,t.holster_gun_faster=null,t.gunshot_clicks_2=null,t.click_drop_5=null,t.bass_hit_5=null,t.coins_pour=null,t.music_bonus_3_level_0=null,t.ping_3=null,t.whistle_downer=null,t.wintier_2=null,t.plastic_click=null,t.pop_glitter_2=null,t.reeldrop_1=null,t.medium_coin_3=null,t.drumroll=null,t.holster_gun=null,t.delighted_4=null,t.ricochet_3=null,t.flute_vignette_whip_3=null,t.ping_1=null,t.western_bonus_1=null,t.update_sweep_1=null,t.infuriated_2=null,t.pling=null,t.update_sweep_3=null,t.music_bonus_level_3=null,t.ping_2=null,t.update_sweep_5=null,t.click_open=null,t.medium_coin_2=null,t.big_coin_2=null,t.music_bonus_2_level_2=null,t.spin_crunchy_3=null,t.click_drop_3=null,t.plink_1=null,t.plink_3=null,t.lecowboy_intro=null,t.plink_4=null,t.cymbal_crash=null,t.click_sweep=null,t.wintier_3=null,t.music_bonus_2_level_0=null,t.pistol_boing_whistle=null,t.music_bonus_2_level_1=null,t.fountain_start=null,t.raccoon_welcome_2=null,t.small_coin_3=null,t.bugle_cannon_2=null,t.bass_hit_4=null,t.spur_whistle=null,t.gun_draw=null,t.medium_coin_1=null,t.cartoon_move=null,t.small_coin_2=null,t.pop_guncock=null,t.dropswoosh_in=null,t.fuming_2=null,t.heavy_poof=null,t.spin_crunchy_1=null,t.big_coin_1=null,t.click_close=null,t.symdrop_4=null,t.win_end_bet_over=null,t.happy_1=null,t.update_sweep_4=null,t.nail_board_shimmer=null,t.click_drop_4=null,t.whirl_1=null,t.happy_2=null,t.western_vignette_3=null,t.success_2=null,t.music_bonus_level_0=null,t.spurs_wood_3=null,t.spurs_wood_4=null,t.bass_hit_1=null,t.spin_crunchy_2=null,t.count_blip=null,t.raccoon_welcome_1=null,t.music_level_3=null,t.gunshot_clicks_1=null,t.win_end_bet_low=null,t.poof=null,t.bugle_wet_1=null,t.wintier_4=null,t.coins_swoosh_new=null,t.swoosh=null,t.gunshot_clicks_3=null,t.music_bonus_2_level_3=null,t.click_drop_2=null,t.win_count_1=null,t.symdrop_2=null,t.coin_swoosh=null,t.fuming_3=null,t.music_level_0=null,t.poof_metallic=null,t.dropgrid_in=null,t.western_bonus_2=null,t.western_vignette_2=null,t.flute_vignette_whip_1=null,t.delighted_2=null,t.ricochet_2=null,t.cork_pop=null,t.bass_hit_3=null,t.desert_ambience=null,t.small_coin_1=null,t.ricochet_1=null,t.ping_clicks_reload=null,t.shotgun_cock=null,t.plink_2=null,t.big_coin_3=null,t.loud_ping=null,t.vibraslap=null,t.success_1=null,t.music_level_1=null,t.flute_vignette_whip_2=null,t.bass_hit_2=null,t.scratch=null,t.bugle_wet_2=null,t.pop_weapon=null,t.ricochet_4=null,t.infuriated_1=null,t.click_drop_1=null,t.prototype={__class__:t},(i["hacksaw.core.Spine_bullet_indicator_Animation"]=hs).__name__="hacksaw.core.Spine_bullet_indicator_Animation",(i["hacksaw.core.Spine_bullet_indicator_info"]=cs).__name__="hacksaw.core.Spine_bullet_indicator_info",(i["hacksaw.core.Spine_coin_Animation"]=_s).__name__="hacksaw.core.Spine_coin_Animation",(i["hacksaw.core.Spine_coin_info"]=ds).__name__="hacksaw.core.Spine_coin_info",(i["hacksaw.core.Spine_coin_reveal_Animation"]=ps).__name__="hacksaw.core.Spine_coin_reveal_Animation",(i["hacksaw.core.Spine_coin_reveal_info"]=ms).__name__="hacksaw.core.Spine_coin_reveal_info",(i["hacksaw.core.Spine_countup_tiers_Animation"]=gs).__name__="hacksaw.core.Spine_countup_tiers_Animation",(i["hacksaw.core.Spine_countup_tiers_info"]=fs).__name__="hacksaw.core.Spine_countup_tiers_info",(i["hacksaw.core.Spine_range_reveal_Animation"]=As).__name__="hacksaw.core.Spine_range_reveal_Animation",(i["hacksaw.core.Spine_range_reveal_info"]=xs).__name__="hacksaw.core.Spine_range_reveal_info",(i["hacksaw.core.Spine_shooting_range_Animation"]=ws).__name__="hacksaw.core.Spine_shooting_range_Animation",(i["hacksaw.core.Spine_shooting_range_info"]=ys).__name__="hacksaw.core.Spine_shooting_range_info",(i["hacksaw.core.Spine_smokey_Animation"]=bs).__name__="hacksaw.core.Spine_smokey_Animation",(i["hacksaw.core.Spine_smokey_info"]=vs).__name__="hacksaw.core.Spine_smokey_info",(i["hacksaw.core.Spine_symbols_Animation"]=Cs).__name__="hacksaw.core.Spine_symbols_Animation",(i["hacksaw.core.Spine_symbols_info"]=Ss).__name__="hacksaw.core.Spine_symbols_info",(i["hacksaw.core.Spines"]=K).__name__="hacksaw.core.Spines",K.coin_reveal=null,K.symbols=null,K.range_reveal=null,K.bullet_indicator=null,K.coin=null,K.countup_tiers=null,K.shooting_range=null,K.smokey=null,K.prototype={__class__:K},(i["hacksaw.core.Assets"]=ks).__name__="hacksaw.core.Assets",ks.init=function(){t()},(i["hacksaw.core.Context"]=Ms).__name__="hacksaw.core.Context",Ms.__super__=sl,Ms.prototype=e(sl.prototype,{render:function(e){sl.prototype.render.call(this,e)},update:function(e){sl.prototype.update.call(this,e),null!=this._soundEngine&&this._soundEngine.update(e)},init:function(){var t=this;if(sl.prototype.init.call(this),$.tweenFunc1(function(e){},0,100,.05,null,null,null,null,null,null,null,{fileName:"hacksaw/core/Context.hx",lineNumber:130,className:"hacksaw.core.Context",methodName:"init"}).onFinish(function(){}),this.setupFSM(),this.parseBranding(),null!=this._config.shaderConfigs)for(var e=0,n=this._config.shaderConfigs;e<n.length;){var i=n[e];++e,null!=i.enabledDevices?this.appModel.enableShaderDevices.h[i.name]=i.enabledDevices:null!=i.disabledDevices&&(this.appModel.disableShaderDevices.h[i.name]=i.disabledDevices)}this.appModel.freezeSignal.connect(function(e){e?t._soundEngine.pause():t._soundEngine.resume()}),this.s2d.addEventListener(function(e){switch(e.kind._hx_index){case 0:case 2:e.propagate=!1,t.appModel.stageMouseX=e.relX,t.appModel.stageMouseY=e.relY}}),this.s2d.ctx.defaultSmooth=!0,this.appModel.customRenderCallback=function(e){t.s2d.render(e)},this.get_baseEntity().add(this._casinoModel),this.get_baseEntity().add(this._soundTriggers)},addSoundEventHandler:function(t){var n=this;this._gameChannel.subscribe(t.id,function(e){n._soundEngine.handleEvent(t,e)})},loadAssets:function(e){var t,n,i=this;null==this._casinoChannel||null==this._gameChannel?pc.delay(function(){i.loadAssets(e)},50):(dc.ensureMipmap(this.preloaderTile.innerTex),(t=new xr(this.preloaderTile)).smooth=!0,(n=null)!=this.preloaderBackplateTile&&(dc.ensureMipmap(this.preloaderBackplateTile.innerTex),(n=new xr(this.preloaderBackplateTile)).smooth=!0),this._preloader=new Ko(t,n,this.s2d,this._config.preloader),this._assetsDone=e,this.subscribe(),this._casinoChannel.publish("gameReady"))},setBackgroundColor:function(e){var t=this;null==this.engine?SA.delay(function(){t.setBackgroundColor(e)},100):this.engine.backgroundColor=e},loadComplete:function(){for(var e=0,t=U.getClassFields(Qu);e<t.length;){var n=t[e];++e,X.field(this._config.assets,"fonts").h[n]=this._assetContainers.fonts.h[n]}for(e=0,t=U.getClassFields(yu);e<t.length;){n=t[e];++e,X.field(this._config.assets,"bitmapFonts").h[n]=this._assetContainers.bitmapFonts.h[n]}this._assetsDone(),this._config.onLoaded()},mapInjections:function(){sl.prototype.mapInjections.call(this);var e=this._injector.map(_u);e.provider=new kx(this._casinoModel,e._injector),(e=this._injector.map(uu)).provider=new kx(this._soundTriggers,e._injector)},setupFSM:function(){this._fsm=new j0(new Z0(this._injector)),this._fsmController=new H0(this._fsm),this._casinoModel.fsmController=this._fsmController;var e=this._injector.map(H0);e.provider=new kx(this._fsmController,e._injector)},initSounds:function(){var u=this;return rt.irreversible(function(e){for(var t={sounds:u._config.soundConfigs.sounds,pools:u._config.soundConfigs.pools,groups:u._config.soundConfigs.groups,sequences:u._config.soundConfigs.sequences},n=0,i=X.fields(u._assetContainers.sounds);n<i.length;)for(var s=i[n],a=(++n,0),l=t.sounds;a<l.length;){var r=l[a];++a,s==r.id&&(r.data=X.field(u._assetContainers.sounds,s))}u._soundEventConfig={events:u._config.soundConfigs.events},u.addBaseSoundEvents(u._soundEventConfig),u._soundEngine=new tA(new eA(t,u._soundEventConfig),function(){e(null)},function(e){u._soundTriggers.handleEvent(e)},!1);for(n=0,i=u._soundEventConfig.events;n<i.length;){var o=[i[n]];++n,u._gameChannel.subscribe(o[0].id,(t=>function(e){u._soundEngine.handleEvent(t[0],e)})(o)),u._casinoChannel.subscribe(o[0].id,(t=>function(e){u._soundEngine.handleEvent(t[0],e)})(o))}})},startSounds:function(){var s=this;SA.delay(function(){for(var e=s._soundEventConfig.events,t=[],n=0;n<e.length;){var i=e[n];++n,"initPlay"==i.id&&t.push(i)}null!=t&&0<t.length&&s._soundEngine.handleEvent(t[0])},100),window.document.removeEventListener("touchstart",Cn(this,this.startSounds),!0),window.document.removeEventListener("touchend",Cn(this,this.startSounds),!0),window.document.removeEventListener("click",Cn(this,this.startSounds),!0)},addBaseSoundEvents:function(e){e.events.push({id:"muteSound",actions:[{type:"muteGroup",id:"master"}]}),e.events.push({id:"enableSound",actions:[{type:"unmuteGroup",id:"master"}]}),e.events.push({id:"muteMusic",actions:[{type:"muteGroup",id:"music"}]}),null!=il.find(nl.__cast(this._config.soundConfigs.groups,Array),function(e){return"music"==e.id})?e.events.push({id:"enableMusic",actions:[{type:"unmuteGroup",id:"music"}]}):this._casinoChannel.publish("noMusicSupport")},subscribe:function(){var o=this;this._casinoChannel.subscribe("initGame",function(e){var t,n=e.channel,n=(o._casinoModel.channel=null!=n?n:"desktop",o._casinoModel.mode=e.mode,o._casinoModel.currency=e.currency,e.useScreenPixels),i=e.maxPixelRatio,s=null==e.language?"en-us":el.string(e.language),a=(o._casinoModel.language=s,null),e=e.branding;o._assetConfig={pack:null!=e?e:"default",platform:"mobile"==o._casinoModel.channel?o._config.mobileAssetDir:o._config.desktopAssetDir,locale:s.toLowerCase(),formats:[{type:me.Sound,extension:".webm"}]},null==n||n?null!=i&&((t=r0.getInstance()).maxPixelRatio=i,o.engine.resize(t.get_width(),t.get_height())):((t=r0.getInstance()).useScreenPixels=!1,o.engine.resize(t.get_width(),t.get_height())),o.preload(function(e){null!=o._preloader&&(a!=e&&(o._casinoChannel.publish("preloaderProgress",{progress:e}),a=e),o._preloader.progress(e))},function(){o.initSounds().handle(function(){o.loadComplete(),window.document.addEventListener("touchstart",Cn(o,o.startSounds),!0),window.document.addEventListener("touchend",Cn(o,o.startSounds),!0),window.document.addEventListener("click",Cn(o,o.startSounds),!0)})})}),this._casinoChannel.subscribe("startGame",function(e){o.validatePaytable(e.gameInfoData),o._casinoModel.betLevels=e.betLevels,o._casinoModel.betLevelIndex=e.betLevelIndex,o._casinoModel.betAmount=o._casinoModel.betLevels[o._casinoModel.betLevelIndex];var t=null!=e.gameInfoData.baseBetLevel?bA.parseString(el.string(e.gameInfoData.baseBetLevel)):null;o._casinoModel.baseBetLevel=t,o._casinoModel.jurisdiction=e.jurisdiction,o._casinoModel.featureFlags=new du(e.disabledTurbo,e.disabledSuperTurbo,e.disabledSlamStop,e.disabledAutoplay),o._casinoModel.uiMargins={top:e.uiMargins.top,right:e.uiMargins.right,bottom:e.uiMargins.bottom,left:e.uiMargins.left}}),this._gameChannel.subscribe("removePreloader",function(e){o.appModel.customRenderCallback=function(e){for(var t=0,n=o.sceneModel.scenes;t<n.length;){var i=n[t];++t,(i.is3D?i.entity.getFromParentsByName(He.BASE_NAME,He):((i=i.entity.getFromParentsByName(je.BASE_NAME,je)).scene2d.ctx.defaultSmooth=!0,i)).render(e)}o.s2d.render(e)},SA.delay(function(){o.appModel.customRenderCallback=null,o._preloader.dispose(),o.setBackgroundColor(o._config.backgroundColor)},0);var t=document.createElement("div");t.id="PreloadIndicator",document.body.appendChild(t)}),this._casinoChannel.subscribe("betAccepted",function(e){var t,n,i,s,a,l,r;o._casinoModel.roundId!=el.string(e.roundId)&&(r=e.events[0],o._casinoModel.betAmount=e.betAmount,o._casinoModel.roundId=el.string(e.roundId),o._casinoModel.jackpotWin=e.jackpotWin,o._casinoModel.recieveNewBetData(e.events),o._casinoModel.betAccepted=!0,t=bA.parseString(el.string(r.wa)),r=bA.parseString(el.string(r.wc)),o._casinoModel.currentFeatureBuyData=Di.fromDynamic(e.activeFeatureBuyData),0==(e=0|+t.high)&&(e=xA.ucompare(t.low,0)),(r=!((t.high<0?-1:e)<=0)||(0==(e=0|+r.high)&&(e=xA.ucompare(r.low,0)),0<(r.high<0?-1:e)))?(o._casinoModel.win=t,e=o._casinoModel.betAmount,l=65535&t.low,s=t.low>>>16,a=xA._mul(l,100),n=xA._mul(s,100),l=xA._mul(l,0),i=a,s=(xA._mul(s,0)+(l>>>16)|0)+(n>>>16)|0,xA.ucompare(i=a+(l<<=16)|0,l)<0&&(++s,s|=0),xA.ucompare(i=i+(n<<=16)|0,n)<0&&(++s,s|=0),s=s+(xA._mul(t.low,0)+xA._mul(t.high,100)|0)|0,a=wA.divMod(wA.divMod(new yA(s,i),e).quotient,new yA(0,100)),l=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(a.modulus)),r=parseFloat((null==a.quotient?"null":wA.toString(a.quotient))+"."+l),o._casinoModel.winFactor=r):(o._casinoModel.win=null,o._casinoModel.winFactor=null))}),this._casinoChannel.subscribe("roundStarted",function(e){o._casinoModel.featureMode=!1;e=null!=e?e.featureBuyItemType:null;o._casinoModel.featureSpinActive=null!=e&&"FeatureSpinItem"==e}),this._casinoChannel.subscribe("resultDisplay",function(e){o._casinoModel.betAccepted=!1}),this._casinoChannel.subscribe("startAutoplay",function(e){o._casinoModel.featureFlags.disabledAutoplay||(o._casinoModel.autoplay=!0,e=e.stopAutoplayOnFeature,o._casinoModel.stopAutoplayOnFeature=null!=e&&e)}),this._casinoChannel.subscribe("stopAutoplay",function(e){o._casinoModel.autoplay=!1}),this._casinoChannel.subscribe("autoplayEnded",function(e){o._casinoModel.autoplay=!1}),this._casinoChannel.subscribe("enterFreeRoundMode",function(e){o._casinoModel.freeRoundMode=!0}),this._casinoChannel.subscribe("exitFreeRoundMode",function(e){o._casinoModel.freeRoundMode=!1}),this._casinoChannel.subscribe("featureEnter",function(e){e=null!=e?e.resetFeatureCount:null,null!=e&&!e||(o._casinoModel.featureRoundsPlayed=0),o._casinoModel.featureSpinActive=!1,o._casinoModel.featureMode=!0,e=o._casinoModel.currentFeatureBuyData;null!=e&&(e.betCostMultiplierBaseGameEffect=!1)}),this._casinoChannel.subscribe("featureRoundStarted",function(e){o._casinoModel.featureRoundsPlayed+=1}),this._casinoChannel.subscribe("scaleResize",function(e){o._casinoModel.uiMargins=e.uiMargins,o._casinoModel.uiWinFieldPos=e.uiWinFieldPos;e=r0.getInstance();o.engine.resize(e.get_width(),e.get_height())}),this._casinoChannel.subscribe("logError",function(e){o.appModel.freezeSignal.emit(!0)}),this._casinoChannel.subscribe("enableTurbo",function(e){o._casinoModel.featureFlags.disabledTurbo||(o._casinoModel.turbospin=!0)}),this._casinoChannel.subscribe("disableTurbo",function(e){o._casinoModel.turbospin=!1}),this._casinoChannel.subscribe("enableSuperTurbo",function(e){o._casinoModel.featureFlags.disabledTurbo||o._casinoModel.featureFlags.disabledSuperTurbo||(o._casinoModel.superTurbospin=!0)}),this._casinoChannel.subscribe("disableSuperTurbo",function(e){o._casinoModel.superTurbospin=!1}),this._gameChannel.subscribe("enterMode",function(e){o._casinoModel.gameMode=e.gameMode})},parseBranding:function(){for(var e=0,t=X.fields(this._assetContainers.brandingConfigs);e<t.length;)for(var n=X.field(this._assetContainers.brandingConfigs,t[e++]),i=0,s=X.fields(n);i<s.length;)for(var a=s[i],l=(++i,X.field(n,a)),r=0,o=X.fields(l);r<o.length;)for(var u=o[r],h=(++r,X.field(l,u)),c=0,_=X.fields(h);c<_.length;){var d=_[c],p=(++c,X.field(h,d));if("style"==a&&null!=this._config.styleData)for(var m=0,g=X.fields(p);m<g.length;){var f=g[m],A=(++m,X.field(p,f));switch(u){case"animations":X.field(this._config.styleData.animations,d)[f]=A;break;case"images":X.field(this._config.styleData.images,d)[f]=A;break;case"text":X.field(this._config.styleData.text,d)[f]=A}}else"game"==a&&null!=this._config.gameData&&(X.field(this._config.gameData,u)[d]=p)}},validatePaytable:function(e){},__class__:Ms}),(i["hacksaw.core.ShaderConfig"]=Is).__name__="hacksaw.core.ShaderConfig",Is.prototype={__class__:Is},function(e,t,n,i){this._resizeFinished=!1,this._nextBoundsSize={x:0,y:0},this._lastBoundsSize={x:0,y:0},this._backplateHolder=null,window.document.getElementById("ProgressIndicator").classList.remove("is-visible"),null==i&&(i={offset:{x:0,y:0},width:290,height:20,color:-1}),null!=t&&(this._backplateImage=t,this._backplateHolder=new kt(n),this._backplateHolder.addChild(this._backplateImage),this._backplateHolder.set_visible(!1)),this._holder=new kt(n),this._config=i;t=this._config.marg,this._config.marg=null!=t?t:{x:100,y:100},this._scene=n,this._holder.addChild(e),t=new Gt(this._holder),t.beginFill(i.color,1),t.drawRect(0,0,1,i.height),t.endFill(),t.set_visible(!1),n=e.getSize();e.alpha=this._config.alphaTween?.8:1,t.posChanged=!0,t.x=(n.xMax-n.xMin-i.width)/2+i.offset.x,t.posChanged=!0,t.y=e.y+(n.yMax-n.yMin)/2+i.offset.y,this._bar=t,this._image=e,this._start=Jn.now()/1e3,this._holder.set_visible(!1),this._lastSceneSize={x:0,y:0},this.scale(),this._lastSceneSize={x:0,y:0},this._scene.ctx.defaultSmooth=!0,SA.delay(Cn(this,this.show),300)}),Jo=((i["hacksaw.core.Preloader"]=Ko).__name__="hacksaw.core.Preloader",Ko.prototype={show:function(){this._resizeFinished?(null!=this._backplateHolder&&this._backplateHolder.set_visible(!0),null!=this._holder&&this._holder.set_visible(!0)):SA.delay(Cn(this,this.show),10)},progress:function(e){var t=e/100,t=((Jn.now()/1e3-this._start)/t*(1/t)<5&&!this._tweeningImage&&this._config.alphaTween&&(this._tweeningImage=!0,$.serial([$.to(this._image,{alpha:1},.5,o1.expoIn,null,null,null,null,null,null,{fileName:"hacksaw/core/Preloader.hx",lineNumber:104,className:"hacksaw.core.Preloader",methodName:"progress"}),$.to(this._image,{alpha:.8},.5,o1.expoOut,null,null,null,null,null,null,{fileName:"hacksaw/core/Preloader.hx",lineNumber:105,className:"hacksaw.core.Preloader",methodName:"progress"})],null,{fileName:"hacksaw/core/Preloader.hx",lineNumber:103,className:"hacksaw.core.Preloader",methodName:"progress"})),this._bar.set_visible(!0),this._bar);t.posChanged=!0,t.scaleX=e/100*this._config.width,this.scale()},dispose:function(){var e=this._holder;null!=e&&null!=e.parent&&e.parent.removeChild(e),null!=(e=this._image)&&null!=e.parent&&e.parent.removeChild(e),this._holder=null,(this._image=null)!=this._backplateHolder&&(null!=(e=this._backplateHolder)&&null!=e.parent&&e.parent.removeChild(e),(this._backplateHolder=null)!=(e=this._backplateImage)&&null!=e.parent&&e.parent.removeChild(e),this._backplateImage=null)},scale:function(){var e=this;if(null==this._holder||this._lastBoundsSize.x==this._nextBoundsSize.x&&this._lastBoundsSize.y==this._nextBoundsSize.y&&this._lastSceneSize.x==this._scene.width&&this._lastSceneSize.y==this._scene.height)this._resizeFinished=!0;else{this._resizeFinished=!1;var t=this._scene.width-this._scene.width/sl.REFERENCE_SIZE*2*this._config.marg.x,n=this._scene.height-this._scene.height/sl.REFERENCE_SIZE*2*this._config.marg.y,i=this._holder.getBounds(),t=Math.min(t/(i.xMax-i.xMin),n/(i.yMax-i.yMin));if((r=this._holder).posChanged=!0,r.scaleX*=t,r.posChanged=!0,r.scaleY*=t,i=this._holder.getBounds(),(r=this._holder).posChanged=!0,r.x=.5*(this._scene.width-(i.xMax-i.xMin)),(r=this._holder).posChanged=!0,r.y=.5*(this._scene.height-(i.yMax-i.yMin)),null!=this._backplateHolder){var s,i=this._backplateHolder.getBounds(),a=function(){return Math.min(Math.min(e._scene.width,e._scene.height)/Math.max(i.xMax-i.xMin,i.yMax-i.yMin),window.devicePixelRatio)},n=this._config.backplate;if(null==n)s=null;else if(e._nextBoundsSize={x:i.xMax-i.xMin,y:i.yMax-i.yMin},null==(l=n.scaleMode))s=a();else switch(l){case"fill":s=Math.max(e._scene.width/(i.xMax-i.xMin),e._scene.height/(i.yMax-i.yMin));break;case"maxAxis":s=Math.max(e._scene.width,e._scene.height)/Math.max(i.xMax-i.xMin,i.yMax-i.yMin);break;default:s=a()}t=Fy.roundTo(null==s?a():s,6);(r=this._backplateHolder).posChanged=!0,r.scaleX*=t,r.posChanged=!0,r.scaleY*=t;(r=this._holder).posChanged=!0,r.scaleX*=t,r.posChanged=!0,r.scaleY*=t,i=this._backplateHolder.getBounds(),this._lastBoundsSize={x:i.xMax-i.xMin,y:i.yMax-i.yMin};var l,r=this._backplateHolder,o=.5*(this._scene.width-(i.xMax-i.xMin));if(r.posChanged=!0,r.x=o,null!=this._config.backplate&&null!=this._config.backplate.anchor)if(null==(l=this._config.backplate.anchor)){var r=this._backplateHolder,o=.5*(this._scene.height-(i.yMax-i.yMin));r.posChanged=!0,r.y=o}else switch(l){case"bottom":r=this._backplateHolder,o=this._scene.height-(i.yMax-i.yMin);r.posChanged=!0,r.y=o;break;case"center":r=this._backplateHolder,o=.5*(this._scene.height-(i.yMax-i.yMin));r.posChanged=!0,r.y=o;break;case"right":r=this._backplateHolder,o=this._scene.width-(i.xMax-i.xMin),r=(r.posChanged=!0,r.x=o,this._backplateHolder),o=.5*(this._scene.height-(i.yMax-i.yMin));r.posChanged=!0,r.y=o;break;case"top":(r=this._backplateHolder).posChanged=!0,r.y=0;break;default:r=this._backplateHolder,o=.5*(this._scene.height-(i.yMax-i.yMin));r.posChanged=!0,r.y=o}else{r=this._backplateHolder,o=.5*(this._scene.height-(i.yMax-i.yMin));r.posChanged=!0,r.y=o}}this._lastSceneSize={x:this._scene.width,y:this._scene.height}}},__class__:Ko},(i["hacksaw.core.components.actor.AmbientLightFadeComponent"]=Bs).__name__="hacksaw.core.components.actor.AmbientLightFadeComponent",Bs.__super__=d,Bs.prototype=e(d.prototype,{init:function(){var l=this,e=this.owner._compMap,e=null!=e?e.h[He.BASE_NAME]:null,r=(this._scene=e instanceof He?e:null,nl.__cast(this._scene.scene3d.lightSystem,To)),e=r.ambientLight;this._tweenVector=new Et(e.x,e.y,e.z,1),Tt.tween(this._tweenVector,new nt(st.fromBacking(new it(this._config.color.x,this._config.color.y,this._config.color.z,this._config.color.w)),null,this._config.delay,this._config.duration,null,this._config.curve,null,null,null,null,null)).handle(function(){var e=r.ambientLight,t=l._tweenVector,n=t.x,i=t.y,t=t.z,n=n=null==n?0:n,s=i=null==i?0:i,a=t=null==t?0:t;null==t&&(a=0),null==i&&(s=0),e.x=n=null==n?0:n,e.y=s,e.z=a,l._tweenDoneTrigger.trigger(null)})},update:function(e){var t,n,i,s,a=this._tweenVector;null!=a&&Tt.update(a,e),null!=this._scene&&(a=nl.__cast(this._scene.scene3d.lightSystem,To).ambientLight,n=n=null==(n=(e=this._tweenVector).x)?0:n,i=t=null==(t=e.y)?0:t,s=e=null==(e=e.z)?0:e,null==e&&(s=0),null==t&&(i=0),a.x=n=null==n?0:n,a.y=i,a.z=s)},dispose:function(){d.prototype.dispose.call(this),this._scene=null;var e=this._removeHandle;null!=e&&e.cancel(),Tt.cancel(this._tweenVector),this._tweenVector=null},get_baseName:function(){return"hacksaw.core.components.actor.AmbientLightFadeComponent"},__class__:Bs}),(i["hacksaw.core.components.actor.AmbientLightFadeComponentConfig"]=Ts).__name__="hacksaw.core.components.actor.AmbientLightFadeComponentConfig",Ts.prototype={__class__:Ts},(i["hacksaw.core.components.actor.Button"]=Es).__name__="hacksaw.core.components.actor.Button",Es.__super__=d,Es.prototype=e(d.prototype,{setup:function(){var t=this,e=this.owner._compMap,n=null!=e?e.h[B.BASE_NAME]:null,n=(this.interact=new Jo(null,(null!=(e=n instanceof B?n:null)?e.object:null).object),this.interact);1!=(0!=(2048&n.flags))&&(n.flags|=1,0!=(131072&n.flags))&&(n.flags|=262144),n.flags|=2048,this.interact.flags|=1024,this.interact.flags|=512,this.interact.onPosChanged=function(){t.interact.shape=t._config.getCollider(t.interact)},this.interact.onClick=function(e){t.get_enabled()&&(t._selected=!0)},this.interact.onPush=function(e){t.get_enabled()&&(t._nextRepeat=t.holdDuration,t.currentStates|=2)},this.interact.onRelease=this.interact.onReleaseOutside=function(e){t.get_enabled()&&(t.currentStates&=-3)},this.interact.onOut=function(e){t.get_enabled()&&(t.currentStates&=-2)},this.interact.onOver=function(e){t.get_enabled()&&(t.currentStates|=1)}},init:function(){var t=this;d.prototype.init.call(this),this._resizeConnection=this.owner.getFromParentsByName(ee.BASE_NAME,ee).resizeSignal.connect(function(e){t.interact.onPosChanged()}),this.interact.onPosChanged(),this.set_enabled(!0)},dispose:function(){this._resizeConnection.dispose();var e=this.interact;null!=e&&null!=e.parent&&e.parent.removeChild(e),this.interact.onRelease=null,this.interact.onPush=null,this.interact.onOut=null,this.interact.onOver=null,this.interact.onClick=null,d.prototype.dispose.call(this)},update:function(e){null!=this._config.repeatDelay&&0!=(2&this.currentStates)&&(this._nextRepeat<=0&&(this._selected=!0,this._nextRepeat=this._config.repeatDelay),this._nextRepeat-=e),this._lastStates!=this.currentStates&&this.runStateActions(this.currentStates,this._lastStates),this._selected&&(this._selected=!1,this._config.selectAction(this.currentStates)),this._lastStates=this.currentStates,d.prototype.update.call(this,e)},runStateActions:function(n,e){for(var i=this,t=e^n,s=[],a=0,l=$o.__empty_constructs__.slice();a<l.length;){var r=l[a];++a,0!=(t&1<<r._hx_index)&&i._config.stateActions.exists(r)&&s.push(r)}il.each(s,function(e){var t=i._config.stateActions.get(e);0!=(n&1<<e._hx_index)?t.onEnter(n):t.onExit(n)})},get_enabled:function(){return 0!=(4&this.currentStates)},set_enabled:function(e){return 0!=(4&this.currentStates)!=e&&(this._nextRepeat=this.holdDuration,e?this.currentStates|=4:this.currentStates&=-5,this.interact.set_cursor(e?Yx.Button:Yx.Default),this.interact.onPosChanged()),e},get_baseName:function(){return"hacksaw.core.components.actor.Button"},__class__:Es}),function(e,t){this.onPosChanged=Dy.noop,$n.call(this,e,t)}),$o=((i["hacksaw.core.components.actor._Button.ButtonInteractive"]=Jo).__name__="hacksaw.core.components.actor._Button.ButtonInteractive",Jo.__super__=$n,Jo.prototype=e($n.prototype,{sync:function(e){0!=(1&this.flags)&&this.onPosChanged()},__class__:Jo}),fe["hacksaw.core.components.actor.ButtonState"]={__ename__:!0,__constructs__:null,Hover:{_hx_name:"Hover",_hx_index:0,__enum__:"hacksaw.core.components.actor.ButtonState",toString:o},Down:{_hx_name:"Down",_hx_index:1,__enum__:"hacksaw.core.components.actor.ButtonState",toString:o},Enabled:{_hx_name:"Enabled",_hx_index:2,__enum__:"hacksaw.core.components.actor.ButtonState",toString:o}}),eu=($o.__constructs__=[$o.Hover,$o.Down,$o.Enabled],$o.__empty_constructs__=[$o.Hover,$o.Down,$o.Enabled],(i["hacksaw.core.components.actor.ButtonStateActions"]=Fs).__name__="hacksaw.core.components.actor.ButtonStateActions",Fs.prototype={__class__:Fs},(i["hacksaw.core.components.actor.ButtonConfig"]=Ds).__name__="hacksaw.core.components.actor.ButtonConfig",Ds.prototype={__class__:Ds},(i["hacksaw.core.components.actor.CountupControllerComponent"]=Rs).__name__="hacksaw.core.components.actor.CountupControllerComponent",Rs.__super__=d,Rs.prototype=e(d.prototype,{init:function(){var i=this,e=this.owner._compMap,e=null!=e?e.h[B.BASE_NAME]:null,e=e instanceof B?e:null;null==e&&(e=new B,this.owner.add(e)),this._tweenContainer.addChild(this._posContainer),this.owner.addChild(this._tweenContainer),e.object.setPosition(this._config.position.x,this._config.position.y,this._config.position.z),this._onClickScreenToken=hacksawCasino.PubSub.getChannel("casino").subscribe("clickScreen",function(e){null!=i._countup&&i.skip()}),null!=this._config.getFitBounds||this._config.disableFitting||(this._config.getFitBounds=function(e){var t=i.owner.getFromParentsByName(He.BASE_NAME,He).scene3d,n=i._posContainer._compMap,n=null!=n?n.h[B.BASE_NAME]:null;return null!=(n instanceof B?n:null).object.get_parent()?((n=Jh.getBounds(t.camera,e.zMin)).scaleCenter(.95),n):null}),null==this._config.getAddedBounds&&(this._config.getAddedBounds=function(){return null}),null!=this._startArgs&&(this.inited=!0,this.show(this._startArgs.step,this._startArgs.instant,this._startArgs.fit,this._startArgs.showTrigger,this._startArgs.multiplied,this._startArgs.onMaxSizeFetch)),d.prototype.init.call(this)},showSteps:function(i,a,l,s){null==a&&(a=!1);var r=this,e=(this._skip=!1,this._stepSequence=new hc(!1),this._cancelled=!1,this.addCountup(),this.addMultiplier(),this._currEnd=i[i.length-1],this._showTrigger),t=new lu(il.reduce(i,function(e,t){var n=t.style;switch(n._hx_index){case 0:case 1:case 2:return e+n.duration;case 3:return e+Math.max(n.duration,n.countupDuration);case 4:return 0}},0),i[i.length-1].value,il.reduce(i,function(e,t){return null!=t.multipliers||e},!1)),o=(e.handlers.invoke(t),i[0]),e=this._posContainer._compMap,t=null!=e?e.h[B.BASE_NAME]:null,u=(t instanceof B?t:null).object,h=u.object.getTransform(),e=(this.getMaxSize(i).handle(function(e){var t;switch(e._hx_index){case 0:t=e.data;break;case 1:throw new tl("Cannot get countup bounds: "+el.string(e.failure))}r._maxSize=t,u.object.setTransform(h);for(var n=0;n<i.length;)r._stepSequence.add((s=>function(){var e,t,n,i;t=s[0],(0==o.value||r._cancelled?new Zy(new Yy(null)):(n=null!=t.multipliers,r._wait=new qy,a?r._wait.trigger(null):r.after(t.pauseDuration).handle(function(){r._wait.trigger(null)}),i=new qy,r._wait.handle(function(){(null!=l?l(o):new Zy(new Yy(!1))).handle(function(e){e&&!n&&o.skip&&r._skip&&(t.style=iu.Instant(0)),r.show(t,!1,!1,!0,n).handle(function(){i.trigger(null)})})}),i)).handle((e=s,function(){o=e[0],null!=r._stepSequence&&r._stepSequence.next()}))})([i[n++]]));null!=s&&s(),r._stepSequence.run()}),rt.irreversible(function(e){r._stepSequence.onComplete(function(){r._maxSize=null,r._stepSequence=null,e(null)})}));return e.eager(),e},show:function(s,a,i,e,l,r){null==l&&(l=!1),null==e&&(e=!0),null==i&&(i=!0),null==a&&(a=!1);var o=this,t=this._doneTriggers.h[s.__id__],t=null!=t?(null!=this._countup&&this._countup.cancel(),null!=this._multiplierCountup&&this._multiplierCountup.cancel(),null!=this._addedMultiplierCountup&&this._addedMultiplierCountup.cancel(),null==this._startArgs?(t.trigger(null),this._doneTriggers.remove(s),new qy):t):new qy;if(this._doneTriggers.set(s,t),this.inited){if((this._startArgs=null)==this._stepSequence&&(this.addCountup(),this.addMultiplier(),this._currEnd=s,this._cancelled=!1,e)&&!a){var n,u,h=this._showTrigger,c=s.style;switch(c._hx_index){case 0:case 1:case 2:n=c.duration;break;case 3:n=Math.max(c.duration,c.countupDuration);break;case 4:n=0}switch(s.style._hx_index){case 0:case 1:u=!0;break;case 2:case 3:u=l;break;case 4:u=!1}h.handlers.invoke(new lu(n,s.value,u))}a&&this._countup.skip(),this._currStep=s,this.owner.getFromParentsByName(He.BASE_NAME,He).scene3d.camera.update(),(null!=this._maxSize?new Zy(new Yy(t1.Success(this._maxSize))):this.getStepBounds(s)).handle(function(e){var t,n;if(null==e)t=null;else switch(e._hx_index){case 0:t=e.data;break;case 1:t=null}o._currSize=t,o._countup.object.set_visible(!l),(!a&&0<s.pauseDuration?o.after(s.pauseDuration):rt.NOISE).handle(function(){o._countup.object.set_visible(!a);var e,t=s.style;switch(t._hx_index){case 0:var n=i=t.args;n=null==i?new eu(null,null,null,null,null,null,null,null,null):i,e=o.showMultiplyStep(s,n,t.duration,a,n.preMultiplyPause);break;case 1:var i,n=i=t.args;n=null==i?new eu(null,null,null,null,null,null,null,null,null):i,e=o.showMultiplyStep(s,n,t.duration,a,n.preMultiplyPause,!0);break;case 2:e=o.showInstantStep(s,t.args,t.duration,a);break;case 3:e=o.showCountingStep(s,t.args,t.countupDuration,t.duration,a);break;case 4:e=rt.NOISE}e.handle(function(){null!=o._doneTriggers&&null!=o._doneTriggers.h[s.__id__]&&(o._doneTriggers.h[s.__id__].trigger(null),o._doneTriggers.remove(s))})}),i&&!o._config.disableFitting&&(n=o._config.getFitBounds(o._currSize),o.fitToBounds(n,o._currSize),o._currSize=null),null!=r&&r()})}else this._startArgs={step:s,instant:a,fit:i,showTrigger:e,multiplied:l,onMaxSizeFetch:r};return t},skip:function(e){null==e&&(e=!0);var t=this;null!=this._countup&&this._countup.skip(),this.onSkip().handle(function(){t._skip=!0,e&&t.after(0).handle(function(){var e;null!=t._currStep&&null==t._currStep.multipliers&&null!=(e=t._doneTriggers.h[t._currStep.__id__])&&e.trigger(null)})})},getDuration:function(){return Math.max(null!=this._countup?this._countup.getDuration():0,null!=this._multiplierCountup?this._multiplierCountup.getDuration():0)},update:function(e){d.prototype.update.call(this,e),null==this._currSize||this._config.disableFitting||(this.fitToBounds(this._config.getFitBounds(this._currSize),this._currSize),this._currSize=null)},dispose:function(){null!=this._onClickScreenToken&&(hacksawCasino.PubSub.getChannel("casino").unsubscribe(this._onClickScreenToken),this._onClickScreenToken=null);for(var e=il.filterNull([this._countup,this._multiplierCountup,this._addedMultiplierCountup]),t=0;t<e.length;){var n=e[t];++t,null!=n.owner&&n.owner.remove(n)}this.owner.removeChild(this._tweenContainer),d.prototype.dispose.call(this)},addCountup:function(){var e,i=this;null==this._countup&&(e=hacksawCasino.MoneyHelper.getDecimalDigits(),this._countup=new pu(new Hu(null,!0,null,null,hacksawCasino.MoneyHelper.getDecimalSeparator(),e,null),new xu(this._config.amount.resource,null,this._config.amount.scale,this._config.amount.space,this._config.amount.depthTest,this._config.amount.blendMode,this._config.amount.shadows,this._config.amount.rotation,null,null)),this._posContainer.addChild((new ge).add(this._countup)),this._countup.updateSignal.listen(function(e){var t=i._updateTrigger,n=new au(i._countup.get_value());t.handlers.invoke(n)}))},addMultiplier:function(){var e;null!=this._config.multiplier&&(null!=this._multiplierCountup&&null!=(e=this._multiplierCountup).owner&&e.owner.remove(e),this._multiplierCountup=new pu(new Hu(null,!1,null,"x",null,null,null),new xu(this._config.multiplier.resource,null,this._config.multiplier.scale,this._config.amount.space,this._config.multiplier.depthTest,this._config.multiplier.blendMode,this._config.multiplier.shadows,this._config.multiplier.rotation,null,null)),this._posContainer.addChild((new ge).add(this._multiplierCountup)),this._multiplierCountup.object.set_visible(!1),null!=this._addedMultiplierCountup&&null!=(e=this._addedMultiplierCountup).owner&&e.owner.remove(e),this._addedMultiplierCountup=new pu(new Hu(null,!1,null,"x",null,null,null),new xu(this._config.multiplier.resource,null,this._config.multiplier.scale,this._config.amount.space,this._config.multiplier.depthTest,this._config.multiplier.blendMode,this._config.multiplier.shadows,this._config.multiplier.rotation,null,null)),this._posContainer.addChild((new ge).add(this._addedMultiplierCountup)),this._addedMultiplierCountup.object.set_visible(!1))},fitToBounds:function(e,t){var n,i,s,a,l,r,o,u,h,c,_,d,p;null==e||(n=((n=null!=(n=this._posContainer._compMap)?n.h[B.BASE_NAME]:null)instanceof B?n:null).object,(i=new Ur).xMin=t.xMin,i.xMax=t.xMax,i.yMin=t.yMin,i.yMax=t.yMax,i.zMin=t.zMin,i.zMax=t.zMax,t=i,null!=(c=this._config.getAddedBounds())&&(c.xMin<i.xMin&&(i.xMin=c.xMin),c.xMax>i.xMax&&(i.xMax=c.xMax),c.yMin<i.yMin&&(i.yMin=c.yMin),c.yMax>i.yMax&&(i.yMax=c.yMax),c.zMin<i.zMin&&(i.zMin=c.zMin),c.zMax>i.zMax)&&(i.zMax=c.zMax),e.xMin<=i.xMin&&e.yMin<=i.yMin&&e.zMin<=i.zMin&&e.xMax>=i.xMax&&e.yMax>=i.yMax&&e.zMax>=i.zMax)||(c=i.xMax-i.xMin,_=i.yMax-i.yMin,null==(d=i.zMax-i.zMin)&&(d=0),s=r=null==(r=c=null==c?0:c)?0:r,a=o=null==(o=_=null==_?0:_)?0:o,c=e.xMax-e.xMin,null==(d=e.zMax-e.zMin)&&(d=0),r=c=null==c?0:c,null==(o=_=null==(_=e.yMax-e.yMin)?0:_)&&(o=0),null==(d=.5*(e.zMin+e.zMax))&&(d=0),u=c=null==(c=.5*(e.xMin+e.xMax))?0:c,h=_=null==(_=.5*(e.yMin+e.yMax))?0:_,p=u=null==c?0:c,l=h=null==_?0:_,(r=null==r?0:r)<s&&(i.xMax=p+.5*s,i.xMin=p-.5*s),o<a&&(i.yMax=l+.5*a,i.yMin=l-.5*a),p=Math.max(e.xMin-i.xMin,0)+Math.min(e.xMax-i.xMax,0),s=Math.min(e.yMax-i.yMax,0)+Math.max(e.yMin-i.yMin,0),i.xMin+=p,i.xMax+=p,i.yMin+=s,i.yMax+=s,i.zMin+=0,i.zMax+=0,a=e.xMin<=i.xMin&&e.yMin<=i.yMin&&e.zMin<=i.zMin&&e.xMax>=i.xMax&&e.yMax>=i.yMax&&e.zMax>=i.zMax?1:((l=new Ur).intersection(i,e),c=l.xMax-l.xMin,_=l.yMax-l.yMin,null==(d=l.zMax-l.zMin)&&(d=0),null==(o=_=null==_?0:_)&&(o=0),null==(r=c=null==c?0:c)&&(r=0),c=i.xMax-i.xMin,_=i.yMax-i.yMin,null==(d=i.zMax-i.zMin)&&(d=0),null==(h=_=null==_?0:_)&&(h=0),null==(u=c=null==c?0:c)&&(u=0),t=l,Math.min(r/u,o/h)),c=.5*(t.xMin+t.xMax),_=.5*(t.yMin+t.yMax),d=.5*(t.zMin+t.zMax),p=n.object.parent.globalToLocal(new Gr(c=null==c?0:c,_=null==_?0:_,d=null==d?0:d)),n.setScale(a),n.set_x(p.x),n.set_y(p.y))},showMultiplyStep:function(l,r,i,o,t,e){null==e&&(e=!1);for(var u=this,n=(o&&(i=0),new qy),s=[],a=l.multipliers,h=new Array(a.length),c=0,_=a.length;c<_;){var d=c++,p=a[d];h[d]=parseFloat(null==p?"null":""+p)}for(var m=h,g=(this._multiplierCountup.object.set_visible(!1),this._multiplierCountup.object.set_z(0==this._multiplierCountup.object.get_z()?this._countup.object.get_z()+.01:this._multiplierCountup.object.get_z()),this._addedMultiplierCountup.object.set_visible(!1),this._addedMultiplierCountup.object.set_z(0==this._addedMultiplierCountup.object.get_z()?this._countup.object.get_z()+.01:this._addedMultiplierCountup.object.get_z()),function(){return new Zy(new Yy(null))}),e=r.baseCountup,f=(s.push(new ru(l.baseValue,null==e?iu.Counting(i,i):e,null,null,null,null,null,null,null,null,null)),r.multiplicative?il.reduce(m,function(e,t){return t*e},1):by.sum(m)),A=(s.push(new ru(l.baseValue,l.style,null,"0",function(){var a=new qy,e=l.beforeEnter;return(null==e?g:e)().handle(function(){null!=m?u.after(t).handle(function(){switch((n=l.style)._hx_index){case 0:var e=n.args;u.showMultiplier(l,m,o,(null==e?new eu(null,null,null,null,null,null,null,null,null):e).multiplicative).handle(function(){a.trigger(null)});break;case 1:for(var t=[],n=0,e=m.length;n<e;){var i=m.slice(0,1+n++),i=r.multiplicative?il.reduce(i,function(e,t){return e*t},1):by.sum(i);t.push(u.showMultiplier(l,[i],o,r.multiplicative))}for(n=[],e=0;e<t.length;){var s=rt.irreversible((t=>function(e){t[0].handle(function(){e(null)})})([t[e++]]));s.eager(),n.push(s)}rt.inParallel(n).handle(function(){a.trigger(null)})}}):a.trigger(null)}),a},function(){var n=new qy,e=u._multiplyRemoveTrigger,t=f,t=new su(qh.findIndexi(m,function(e,t){t=m.slice(0,t+1);return(r.multiplicative?il.reduce(t,function(e,t){return t*e},1):by.sum(t))==f}),t,l.value),e=(e.handlers.invoke(t),l.onComplete);return(null==e?g:e)().handle(function(){u.after(i).handle(function(){var e=u._multiplyResultTrigger,t=f,t=new su(qh.findIndexi(m,function(e,t){t=m.slice(0,t+1);return(r.multiplicative?il.reduce(t,function(e,t){return t*e},1):by.sum(t))==f}),t,l.value);e.handlers.invoke(t),u.tweenMultiplyCountups(l,{countup:u._countup,multiplier:u._multiplierCountup},null,o).handle(function(){n.trigger(null)})})}),n},null,null,null,null,null)),l.countToSum&&(e=r.sumCountup,s.push(new ru(l.value,null==e?iu.Instant(0):e,null,null,function(){if(!o){var e=r.sumCountup;if(null==e)i=null;else switch(e._hx_index){case 2:var t,n,i=(null==(n=(null==(t=e.args)?new tu(null):t).tweens)?new fu(null,null):n).start;break;case 3:i=(null==(n=(null==(t=e.args)?new nu(null):t).tweens)?new fu(null,null):n).start;break;default:i=null}tt.tween(u._countup.object,i)}return new Zy(new Yy(null))},function(){if(o)return new Zy(new Yy(null));var e=r.sumCountup;if(null==e)i=null;else switch(e._hx_index){case 2:var t,n,i=(null==(n=(null==(t=e.args)?new tu(null):t).tweens)?new fu(null,null):n).remove;break;case 3:i=(null==(n=(null==(t=e.args)?new nu(null):t).tweens)?new fu(null,null):n).remove;break;default:i=null}return rt.noise(tt.tween(u._countup.object,i))},null,null,null,null,null))),new hc(!1)),c=0;c<s.length;)A.add((t=>function(){var l,e=t[0].beforeEnter;(null==e?g:e)().handle((l=t,function(){var e,t,n=l[0].style;switch(n._hx_index){case 0:var i=null==(s=n.duration)?0:s;break;case 1:case 2:i=null==(s=n.duration)?0:s;break;case 3:var s=n.duration,a=n.countupDuration;i=Math.max(null==s?0:s,null==a?0:a);break;case 4:i=0}switch(l[0].style._hx_index){case 2:u._countup.countTo(l[0].value),e=u.after(i);break;case 4:e=new Zy(new Yy(null));break;default:e=rt.map(u._countup.countTo(l[0].value,o?0:i),function(e){return null})}e.handle((t=l,function(){t[0].onComplete().handle(function(){A.next()})}))}))})([s[c++]]));return A.onComplete(function(){var e,t=l.style;switch(t._hx_index){case 0:case 1:null!=(null==(e=t.args)?new eu(null,null,null,null,null,null,null,null,null):e).endTweens?tt.tween(u._countup.object,e.endTweens).handle(function(){n.trigger(null)}):n.trigger(null)}}),A.run(),n},tweenMultiplyCountups:function(a,e,t,c){null==c&&(c=!1);var _=this,d=null==t;switch((u=a.style)._hx_index){case 0:h=u.args;var n=null!=(h=(null==h?new eu(null,null,null,null,null,null,null,null,null):h).sumCountup)&&4==h._hx_index;break;case 1:h=u.args;n=null!=(u=(null==h?new eu(null,null,null,null,null,null,null,null,null):h).sumCountup)&&4==u._hx_index;break;default:throw new tl("Wrong step style for sumCountup")}if(!d||!n){var l=0,i=function(e){var t=a.style;switch(t._hx_index){case 0:case 1:var n,i=s=t.args;switch(l=t.duration,i=null==s?new eu(null,null,null,null,null,null,null,null,null):s,e){case"amount":n=i.amountTweens;break;case"countup":n=i.countupTweens;break;case"multiplier":n=i.multiplierTweens;break;default:n=null}var s=null==n?new fu(null,null):n,s=d?s.remove:s.start;return _.makeTweensInstant(null==s?[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.06,null,null,null,null,null,null,null))]:s,!c);default:throw new tl("Wrong step style for showing multiply step")}},s=function(e,t,n){for(var i=_,s=(null==e?[]:e).concat(0<n?[]:[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.1,null,null,null,null,null,null,null))]),a=new Array(s.length),l=0,r=s.length;l<r;){var o=l++,u=s[o],h=0==u._hx_index?((h=(h=u.v).clone()).from=null,h.to.x=d?0:t.x+h.to.x,h.to.y=d?0:t.y+h.to.y,et.Position(h)):u;a[o]=h}return i.makeTweensInstant(il.filterNull(a),!c)},r=i("multiplier"),o=i("amount"),i=i("countup");if(0<il.reduce(r.concat(o).concat(i),function(e,t){var n;switch(t._hx_index){case 0:case 1:case 2:case 3:n=t.v.duration}return Math.max(e,n)},l)){e.multiplier.object.set_visible(!c);for(var u=[],h=0,p=null==r?[]:r;h<p.length;){var m=p[h];++h,0==m._hx_index&&u.push(m)}for(var r=s(r,(null==t?{countup:null,multiplier:st.fromBacking(new it(0,0,null,null))}:t).multiplier,u.length),r=tt.tween(e.multiplier.object,r),g=(d&&r.handle(function(){e.multiplier.object.set_visible(!1)}),this._tweenContainer._compMap),g=null!=g?g.h[B.BASE_NAME]:null,g=tt.tween((g instanceof B?g:null).object,i),u=[],h=0,p=null==o?[]:o;h<p.length;){m=p[h];++h,0==m._hx_index&&u.push(m)}i=s(o,(null==t?{countup:st.fromBacking(new it(0,0,null,null)),multiplier:null}:t).countup,u.length);return rt.map(rt.and(rt.and(r,tt.tween(e.countup.object,i)),g),function(e){return null})}}return rt.NOISE},showInstantStep:function(i,s,a,e){var l=this,t=(null==s&&(s=new tu(null)),new qy);return!e&&null!=a||(a=0),this._countup.set_suffix(i.suffix),rt.irreversible(function(n){var e=i.beforeEnter;(null==e?function(){return new Zy(new Yy(null))}:e)().handle(function(){var e=new qy,t=(l._countup.countTo(i.value,0,!0).handle(function(){e.trigger(null)}),(null==s?new tu(null):s).tweens),t=tt.tween(l._countup.object,(null==t?new fu(null,null):t).start);rt.and(rt.and(l.after(a),e),t).handle(function(){var e=(null==s?new tu(null):s).tweens;tt.tween(l._countup.object,(null==e?new fu(null,null):e).remove).handle(function(){null!=l._doneTriggers&&(l._doneTriggers.h[i.__id__].trigger(null),l._doneTriggers.remove(i)),n(null)})})})}).eager(),t},showCountingStep:function(a,l,r,o,u){var h=this,e=(null==l&&(l=new nu(null)),new qy);return o=u?r=0:(null==r&&(r=o),Math.max(null==o?0:o,r)),this._countup.set_suffix(a.suffix),rt.irreversible(function(s){var e=a.beforeEnter;(null==e?function(){return new Zy(new Yy(null))}:e)().handle(function(){var e=h._skip&&a.skip,t=(n=u?0:(i=a.pauseDuration,Math.max(o-r,0)+(null==i?0:i)),new qy),n=(h.after(n).handle(function(){h._countup.countTo(a.value,r,!0).handle(function(){t.trigger(null)})}),e?0:Math.max(o,r)),i=(null==l?new nu(null):l).tweens,e=tt.tween(h._countup.object,(null==i?new fu(null,null):i).start);rt.and(rt.and(h.after(n),t),e).handle(function(){var e=(null==l?new nu(null):l).tweens;tt.tween(h._countup.object,(null==e?new fu(null,null):e).remove).handle(function(){null!=h._doneTriggers&&(h._doneTriggers.h[a.__id__].trigger(null),h._doneTriggers.remove(a)),s(null)})})})}).eager(),e},showMultiplier:function(u,h,c,e){null==e&&(e=!1),null==c&&(c=!1);for(var _=this,d=new qy,t=new Array(h.length),n=0,i=h.length;n<i;){var s=n++,a=h[s];t[s]=parseFloat(null==a?"null":""+a)}switch((n=u.style)._hx_index){case 0:var l=null==(r=(null==(i=n.args)?new eu(null,null,null,null,null,null,null,null,null):i).anchor)?Me.RIGHT:r;break;case 1:var r=(null==(i=n.args)?new eu(null,null,null,null,null,null,null,null,null):i).anchor;l=null==r?Me.RIGHT:r;break;default:throw new tl("Wrong step style for showing multiply step")}this._multiplierCountup.object.set_visible(!1),this._multiplierCountup.object.set_z(this._countup.object.get_z()+.01),this._multiplierCountup.cancel(),this._multiplierCountup.clear(),this._multiplierCountup.object.setPosition(0,0,0),this._addedMultiplierCountup.object.set_visible(!1),this._addedMultiplierCountup.object.set_z(this._countup.object.get_z()+.01),this._addedMultiplierCountup.cancel(),this._addedMultiplierCountup.clear(),this._addedMultiplierCountup.object.setPosition(0,0,0);e=e?il.reduce(h,function(e,t){return nl.__cast(t,w1)*e},1):by.sum(h);return rt.map(this._multiplierCountup.countTo(e),function(e){return null}).handle(function(){function e(e){c||(e=e?il.reduce(h,function(e,t){return t*e},1):by.sum(h),_._multiplyStartTrigger.handlers.invoke(new su(h.length-1,e,u.value)))}var t,n=_._countup.object.getBounds(),i=_._multiplierCountup.object.getBounds(),s=u.style;switch(s._hx_index){case 0:e((null==(t=s.args)?new eu(null,null,null,null,null,null,null,null,null):t).multiplicative);break;case 1:e((null==(t=s.args)?new eu(null,null,null,null,null,null,null,null,null):t).multiplicative),_._multiplierCountup.countTo(h[0])}n=_.getMultiplierTargets(n,i,l);_.tweenMultiplyCountups(u,{countup:_._countup,multiplier:_._multiplierCountup},n,c).handle(function(){var e;switch((o=u.style)._hx_index){case 0:var t=o.args;c||(n=(null==t?new eu(null,null,null,null,null,null,null,null,null):t).multiplicative?il.reduce(h,function(e,t){return t*e},1):by.sum(h),_._multiplyTrigger.handlers.invoke(new su(h.length-1,n,u.value))),e=new Zy(new Yy(null));break;case 1:for(var n,t=o.multiplyIncrementTweens,i=o.args,s=new hc(!1),a=(n=null==t?new fu(null,null):t).start,l=_.makeTweensInstant(null==a?[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,null,.1,null,null,null,null,null,null,null))]:a,!c),a=n.remove,r=_.makeTweensInstant(null==a?[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(.85,.85,null,null)),null,null,.1,null,null,null,null,null,null,null))]:a,!c),o=0,t=h.length;o<t;)s.add((n=>function(){var e=h.slice(0,n[0]+1),t=(null==i?new eu(null,null,null,null,null,null,null,null,null):i).multiplicative?il.reduce(e,function(e,t){return t*e},1):by.sum(e);c||_._multiplyTrigger.handlers.invoke(new su(n[0],t,u.value)),rt.map(tt.tween(_._multiplierCountup.object,l),function(e){return null}).handle(function(){_._multiplierCountup.countTo(t).handle(function(){rt.map(tt.tween(_._multiplierCountup.object,r),function(e){return null}).handle(function(){s.next()})})})})([o++]));e=s.run();break;default:e=new Zy(new Yy(null))}e.handle(function(){d.trigger(null)})})}),d},getMultiplierTargets:function(e,t,n){var i,s,a,l,r,o,u=this.owner._compMap,u=null!=u?u.h[B.BASE_NAME]:null,u=u instanceof B?u:null;return{countup:n==Me.RIGHT||n==Me.LEFT?(o=u.object.object.getAbsPos(),s=0,s=Math.sqrt(o._11*o._11+o._12*o._12+o._13*o._13),o._11*(o._22*o._33-o._23*o._32)+o._12*(o._23*o._31-o._21*o._33)+o._13*(o._21*o._32-o._22*o._31)<0&&(s*=-1),i=.5*(l=t.xMax-t.xMin),r=.5*(a=e.xMax-e.xMin),l=.5*(l+a),i=st.fromBacking(new it((n==Me.RIGHT?l-i:-(l-i))/(a=s),null,null,null)),st.fromBacking(new it((n==Me.RIGHT?-(l-r):l-r)/a,null,null,null))):(o=u.object.object.getAbsPos(),s=0,s=Math.sqrt(o._21*o._21+o._22*o._22+o._23*o._23),o._11*(o._22*o._33-o._23*o._32)+o._12*(o._23*o._31-o._21*o._33)+o._13*(o._21*o._32-o._22*o._31)<0&&(s*=-1),r=.5*(l=t.yMax-t.yMin),o=.5*(u=e.yMax-e.yMin),t=.5*(l+u),i=st.fromBacking(new it(null,(n==Me.TOP?t-r:-(t-r))/(a=s),null,null)),st.fromBacking(new it(null,(n==Me.TOP?-(t-o):t-o)/a,null,null))),multiplier:i}},makeTweensInstant:function(e,t){if((t=null==t?!1:t)||null==e)return e;for(var n=new Array(e.length),i=0,s=e.length;i<s;){var a,l=i++,r=e[l];switch(r._hx_index){case 0:var o=r.v.clone();o.duration=0,o.delay=0,a=et.Position(o);break;case 1:o=r.v.clone();o.duration=0,o.delay=0,a=et.Rotate(o);break;case 2:var u=r.v.clone();u.duration=0,u.delay=0,a=et.Scale(u);break;case 3:u=r.v.clone();u.duration=0,u.delay=0,a=et.Color(u)}n[l]=a}return il.filterNull(n)},getMaxSize:function(_){var d=this;return rt.async(function(l){for(var r=new Gr(0,0,0),o=new Gr(0,0,0),e=[],t=0,n=_;t<n.length;){var i,s=n[t];switch(++t,s.style._hx_index){case 0:case 1:i=!0;break;default:i=!1}i&&e.push(s)}var u,a=0,h=_=0<e.length?e:_,c=0;(u=function(){var e,t;if(a<h.length){if((c+=1)-1==0)for(;a+=1,d.getStepBounds(h[a-1]).handle(function(e){var t,n=Uy.getOutcome(e);switch(n._hx_index){case 0:t=n.data;break;case 1:return void l(t1.Failure(n.failure))}var e=t,i=Math.min(r.x,e.xMin),s=Math.min(r.y,e.yMin),a=Math.min(r.z,e.zMin),i=(r=new Gr(i=null==i?0:i,s=null==s?0:s,a=null==a?0:a),Math.max(o.x,e.xMax)),s=Math.max(o.y,e.yMax),a=Math.max(o.z,e.zMax);o=new Gr(i=null==i?0:i,s=null==s?0:s,a=null==a?0:a),u()}),0!=--c;);}else e=l,(t=new Ur).xMin=r.x,t.yMin=r.y,t.zMin=r.z,t.xMax=o.x,t.yMax=o.y,t.zMax=o.z,e(t1.Success(t))})()})},getStepBounds:function(w){var y=this;return rt.async(function(A){var e=y._posContainer._compMap,e=null!=e?e.h[B.BASE_NAME]:null,x=e instanceof B?e:null;y.when(function(){return null!=x.object.getScene()}).handle(function(e){var t=Uy.getOutcome(null,e);switch(t._hx_index){case 0:break;case 1:return void A(t1.Failure(t.failure))}var _=x.object.getScene(),d=null!=w.multipliers,p=new ge,m=new ge,g=y._countup.clone(),f=(g.object.set_visible(!1),p.add(g),y._countup.owner.addChild(p),null);null!=y._multiplierCountup&&((f=y._multiplierCountup.clone()).object.set_visible(!1),m.add(f),y._multiplierCountup.owner.addChild(m)),_.syncOnly(0),g.countTo(d?w.baseValue:w.value).handle(function(e){switch((i=Uy.getOutcome(null,e))._hx_index){case 0:break;case 1:return void A(t1.Failure(i.failure))}function o(){_.syncOnly(0);var e=x.object.getBounds();p.dispose(),m.dispose(),A(t1.Success(e))}if(d){for(var t=w.multipliers,n=new Array(t.length),i=0,s=t.length;i<s;){var a=i++,l=t[a];n[a]=parseFloat(null==l?"null":""+l)}switch((i=w.style)._hx_index){case 0:var r=(null==(s=i.args)?new eu(null,null,null,null,null,null,null,null,null):s).multiplicative;break;case 1:r=(null==(s=i.args)?new eu(null,null,null,null,null,null,null,null,null):s).multiplicative;break;default:r=null}e=r?il.reduce(n,function(e,t){return nl.__cast(t,w1)*e},1):by.sum(n);f.countTo(e).handle(function(e){var t=Uy.getOutcome(null,e);switch(t._hx_index){case 0:break;case 1:return void A(t1.Failure(t.failure))}var e=g.object.getBounds(),n=f.object.getBounds();switch((t=w.style)._hx_index){case 0:var i,s=null==(a=(null==(i=t.args)?new eu(null,null,null,null,null,null,null,null,null):i).anchor)?Me.RIGHT:a;break;case 1:s=null==(a=(null==(i=t.args)?new eu(null,null,null,null,null,null,null,null,null):i).anchor)?Me.RIGHT:a;break;default:s=null}var a,e=y.getMultiplierTargets(e,n,s),n=y.owner._compMap,n=((a=null!=n?n.h[B.BASE_NAME]:null)instanceof B?a:null).object.object.getAbsPos(),l=0,r=0,l=Math.sqrt(n._11*n._11+n._12*n._12+n._13*n._13),r=Math.sqrt(n._21*n._21+n._22*n._22+n._23*n._23);n._11*(n._22*n._33-n._23*n._32)+n._12*(n._23*n._31-n._21*n._33)+n._13*(n._21*n._32-n._22*n._31)<0&&(l*=-1,r*=-1),e.countup.x*=l,e.countup.y*=r,e.multiplier.x*=l,e.multiplier.y*=r,y.tweenMultiplyCountups(w,{countup:g,multiplier:f},e,!0).handle(function(e){var t=Uy.getOutcome(null,e);switch(t._hx_index){case 0:break;case 1:return void A(t1.Failure(t.failure))}o()})})}else{switch((i=w.style)._hx_index){case 2:var u=(null==(c=(null==(s=i.args)?new tu(null):s).tweens)?new fu(null,null):c).remove,h=y.makeTweensInstant(null==u?[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,0,null,null,null,null,null,null,null))]:u);break;case 3:var c,u=(null==(c=(null==(s=i.args)?new nu(null):s).tweens)?new fu(null,null):c).start;h=y.makeTweensInstant(null==u?[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,0,null,null,null,null,null,null,null))]:u);break;default:h=null}tt.tween(g.object,h).handle(function(e){var t=Uy.getOutcome(null,e);switch(t._hx_index){case 0:break;case 1:return void A(t1.Failure(t.failure))}o()})}})})})},get_baseName:function(){return"hacksaw.core.components.actor.CountupControllerComponent"},__class__:Rs}),function(e,t,n,i,s,a,l,r,o){this.multiplicative=!1,this.sumCountup=null,this.baseCountup=iu.Instant(.01),this.preMultiplyPause=0,this.endTweens=null,this.countupTweens=null,this.amountTweens=null,this.multiplierTweens=null,this.anchor=Me.RIGHT,null!=e&&(this.anchor=e),null!=t&&(this.multiplierTweens=t),null!=n&&(this.amountTweens=n),null!=i&&(this.countupTweens=i),null!=s&&(this.endTweens=s),null!=a&&(this.preMultiplyPause=a),null!=l&&(this.baseCountup=l),null!=r&&(this.sumCountup=r),null!=o&&(this.multiplicative=o)}),tu=((i["hacksaw.core.components.actor.MultiplyArgs"]=eu).__name__="hacksaw.core.components.actor.MultiplyArgs",eu.prototype={__class__:eu},function(e){(this.tweens=null)!=e&&(this.tweens=e)}),nu=((i["hacksaw.core.components.actor.InstantArgs"]=tu).__name__="hacksaw.core.components.actor.InstantArgs",tu.prototype={__class__:tu},function(e){(this.tweens=null)!=e&&(this.tweens=e)}),iu=((i["hacksaw.core.components.actor.CountingArgs"]=nu).__name__="hacksaw.core.components.actor.CountingArgs",nu.prototype={__class__:nu},fe["hacksaw.core.components.actor.CountupStyle"]={__ename__:!0,__constructs__:null,MultiplyAdd:((R=function(e,t){return{_hx_index:0,duration:e,args:t,__enum__:"hacksaw.core.components.actor.CountupStyle",toString:o}})._hx_name="MultiplyAdd",R.__params__=["duration","args"],R),MultiplySequence:((R=function(e,t,n){return{_hx_index:1,duration:e,args:t,multiplyIncrementTweens:n,__enum__:"hacksaw.core.components.actor.CountupStyle",toString:o}})._hx_name="MultiplySequence",R.__params__=["duration","args","multiplyIncrementTweens"],R),Instant:((R=function(e,t){return{_hx_index:2,duration:e,args:t,__enum__:"hacksaw.core.components.actor.CountupStyle",toString:o}})._hx_name="Instant",R.__params__=["duration","args"],R),Counting:((R=function(e,t,n){return{_hx_index:3,duration:e,countupDuration:t,args:n,__enum__:"hacksaw.core.components.actor.CountupStyle",toString:o}})._hx_name="Counting",R.__params__=["duration","countupDuration","args"],R),None:{_hx_name:"None",_hx_index:4,__enum__:"hacksaw.core.components.actor.CountupStyle",toString:o}}),su=(iu.__constructs__=[iu.MultiplyAdd,iu.MultiplySequence,iu.Instant,iu.Counting,iu.None],iu.__empty_constructs__=[iu.None],(i["hacksaw.core.components.actor.CountupShowArgs"]=Ps).__name__="hacksaw.core.components.actor.CountupShowArgs",Ps.prototype={__class__:Ps},(i["hacksaw.core.components.actor.MultiplyShowArgs"]=zs).__name__="hacksaw.core.components.actor.MultiplyShowArgs",zs.prototype={__class__:zs},function(e,t,n){this.multiplierIndex=e,this.multiplier=t,this.value=n}),au=((i["hacksaw.core.components.actor.MultipliedSignalData"]=su).__name__="hacksaw.core.components.actor.MultipliedSignalData",su.prototype={__class__:su},function(e){this.size=e}),lu=((i["hacksaw.core.components.actor.UpdateSignalData"]=au).__name__="hacksaw.core.components.actor.UpdateSignalData",au.prototype={__class__:au},function(e,t,n){this.duration=e,this.value=t,this.multiplied=n}),ru=((i["hacksaw.core.components.actor.ShowSignalData"]=lu).__name__="hacksaw.core.components.actor.ShowSignalData",lu.prototype={__class__:lu},function(e,t,n,i,s,a,l,r,o,u,h){this.countToSum=!0,this.skipPauseDuration=1,this.pauseDuration=0,this.skip=!0,this.multipliers=null,this.onComplete=function(){return new Zy(new Yy(null))},this.beforeEnter=function(){return new Zy(new Yy(null))},this.suffix=null,this.baseValue=null,this.value=e,this.style=t,null!=n&&(this.baseValue=n),null!=i&&(this.suffix=i),null!=s&&(this.beforeEnter=s),null!=a&&(this.onComplete=a),null!=l&&(this.multipliers=l),null!=r&&(this.skip=r),null!=o&&(this.pauseDuration=o),null!=u&&(this.skipPauseDuration=u),null!=h&&(this.countToSum=h)}),ou=((i["hacksaw.core.components.actor.CountupStepDef"]=ru).__name__="hacksaw.core.components.actor.CountupStepDef",ru.prototype={__class__:ru},(i["hacksaw.core.components.actor.CountupControllerConfig"]=Qs).__name__="hacksaw.core.components.actor.CountupControllerConfig",Qs.prototype={__class__:Qs},(i["hacksaw.core.components.actor.DelayComponent"]=Vs).__name__="hacksaw.core.components.actor.DelayComponent",Vs.__super__=d,Vs.prototype=e(d.prototype,{setup:function(){this.timedOut=this.after(this._delay),this.timedOut.handle(Cn(this,this.remove))},get_baseName:function(){return"hacksaw.core.components.actor.DelayComponent"},__class__:Vs}),(i["hacksaw.core.components.actor.Dialog"]=Os).__name__="hacksaw.core.components.actor.Dialog",Os.__super__=d,Os.prototype=e(d.prototype,{setup:function(){for(var t=this,e=zy.mapValues(this._config.displayables,function(e){return new mu(new gu(e,null))},new PA),n=zy.values(e),i=new Array(n.length),s=0,a=n.length;s<a;)i[d=s++]=(new ge).add(n[d]);il.each(i,function(e){t.owner.addChild(e)});for(var l=this._config.buttons.copy(),s=this,r=l,o=function(e){s.determineCloseBehavior(e,r)},a=(il.each(this._config.closeBehaviors,o),[]),u=l,h=u.keys();h.hasNext();){var c=h.next(),_=u.get(c);a.push({entity:e.get(c).owner,buttonComponent:new Es(_)})}il.each(a,function(e){e.entity.add(e.buttonComponent)});for(var d,o=this._buttons,i=new Array(a.length),p=0,m=a.length;p<m;)i[d=p++]=a[d].buttonComponent;this._buttons=o.concat(i)},close:function(t){var e;if(null!=this._dialogClosing)e=this._dialogClosing;else{this.set_enabled(!1);for(var n=this._onCloseFunctions,i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++;i[l]=n[l](t)}var r=rt.map(rt.inParallel(i),function(e){return t});this._onCloseFunctions=[],r.handle(Cn(this,this.dispose)),e=rt.noise(r)}return this._dialogClosing=e},layout:function(t){this.inited&&il.each(zy.values(this._config.displayables),function(e){e.layout(t)})},dispose:function(){il.each(il.zip(this._pubSubChannels,this._pubSubTokens),function(e){hacksawCasino.PubSub.getChannel(e._0).unsubscribe(e._1)}),d.prototype.dispose.call(this)},determineCloseBehavior:function(e,t){var i=this;switch(e._hx_index){case 0:this.after(e.delay).handle(function(){i.close()});break;case 1:var n,s=new Es(new Ds(function(e){var t=new mn,e=e.getScene(),e=null!=e?e.camera:null;return null!=e&&t.addBuffers(il.reduce([e.unproject(-1.01,1.01,.01),e.unproject(1.01,1.01,.01),e.unproject(1.01,-1.01,.01),e.unproject(-1.01,-1.01,.01)],function(e,t){return e.push(t.x),e.push(t.y),e.push(t.z),e},[]).slice(0),[0,3,2,2,1,0].slice(0)),t},function(e){i.close()},null,null)),a=this.owner._compMap,l=null!=a?a.h[B.BASE_NAME]:null,l=null!=(a=l instanceof B?l:null)?a:new B;null==l.owner&&this.owner.add(l),this.owner.add(s),this._buttons.push(s),l.inited||(n=Cn(l,l.onAdded),l.onAdded=function(){n(),s.interact.onPosChanged()}),s.interact.propagateEvents=!0;break;case 2:for(var r=e.displayableIds,o=new PA,u=0;u<r.length;){var h=[r[u]],c=(++u,[this._config.buttons.get(h[0])]),c=new Ds(c[0].getCollider,((t,n)=>function(e){t[0].selectAction(e),i.close(n[0])})(c,h),c[0].stateActions,c[0].repeatDelay);o.set(h[0],c)}zy.merge(t,[o]);break;case 3:var r=e.channel,_=e.displayableId,a=hacksawCasino.PubSub.getChannel(r).subscribe(e.message,function(e){i.close(_)});this._pubSubChannels.push(r),this._pubSubTokens.push(a)}},set_enabled:function(t){return il.each(this._buttons,function(e){e.set_enabled(t)}),t},set_onClose:function(e){return this._onCloseFunctions.push(e),e},get_baseName:function(){return"hacksaw.core.components.actor.Dialog"},__class__:Os,__properties__:e(d.prototype.__properties__,{set_onClose:"set_onClose"})}),fe["hacksaw.core.components.actor.DialogCloseBehavior"]={__ename__:!0,__constructs__:null,Timer:((R=function(e){return{_hx_index:0,delay:e,__enum__:"hacksaw.core.components.actor.DialogCloseBehavior",toString:o}})._hx_name="Timer",R.__params__=["delay"],R),FullScreenButton:{_hx_name:"FullScreenButton",_hx_index:1,__enum__:"hacksaw.core.components.actor.DialogCloseBehavior",toString:o},Buttons:((R=function(e){return{_hx_index:2,displayableIds:e,__enum__:"hacksaw.core.components.actor.DialogCloseBehavior",toString:o}})._hx_name="Buttons",R.__params__=["displayableIds"],R),Message:((R=function(e,t,n){return{_hx_index:3,channel:e,message:t,displayableId:n,__enum__:"hacksaw.core.components.actor.DialogCloseBehavior",toString:o}})._hx_name="Message",R.__params__=["channel","message","displayableId"],R)}),uu=(ou.__constructs__=[ou.Timer,ou.FullScreenButton,ou.Buttons,ou.Message],ou.__empty_constructs__=[ou.FullScreenButton],(i["hacksaw.core.components.actor.DialogConfig"]=Ws).__name__="hacksaw.core.components.actor.DialogConfig",Ws.prototype={__class__:Ws},function(e){this._elapsed=0,this._queued=[],d.call(this),this._addEventHandler=e,this.componentType=Ie.Actor}),hu=((i["hacksaw.core.components.actor.SoundTriggerComponent"]=uu).__name__="hacksaw.core.components.actor.SoundTriggerComponent",uu.__super__=d,uu.prototype=e(d.prototype,{init:function(){this._casinoModel=this.owner.getFromParentsByName(_u.BASE_NAME,_u)},nextBeat:function(e,t,n){null==e&&(e=1);var i,s,a=new qy;return null==e?a.trigger(null):(e=Vu.OnBeat(e,!1,t,n),i=hu.FutureTrig(a),s=e,this._queued.push({type:e,handler:function(){var e;switch(s._hx_index){case 0:case 1:case 2:e={cancel:null};break;case 3:e={cancel:null,data:{bpm:s.bpm,signature:s.signature}};break;case 4:e={cancel:null};break;case 5:e={cancel:null,data:{group:s.group,levels:s.levels}}}switch(i._hx_index){case 0:i.trigger.trigger(e);break;case 1:var t=i.trigger;t.handlers.invoke(e),t.handlers.clear()}},once:!0,start:this._elapsed})),a},getDuration:function(e){return null==e&&(e=1),null==this._currentBar?null:60/this._currentBar.bpm*e},handleEvent:function(e){switch(e._hx_index){case 0:this._syncStart=null!=this._syncStart?this._syncStart:this._elapsed,this._currentBar={start:this._elapsed,bar:e.bar,bpm:e.bpm,signature:e.signature};break;case 1:for(var n=e.id,i=e.instance,t=function(e){var t,e=e.type;return 1==e._hx_index&&(t=e.instance,e.id==n)&&(null==t||t==i)},s=[],a=0,l=(m=this._queued).length;a<l;){var r=a++;s.push({v:m[r],i:r})}for(a=[],l=0;l<s.length;){var o=s[l];++l,t(o.v)&&a.push(o)}for(var u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].i;for(;0<u.length;)m.splice(u.pop(),1);for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].v;il.each(u,function(e){Ly.invoke(e.handler,null)});for(var c=this._queued,a=[],l=0;l<u.length;){o=u[l];++l,o.once||a.push(o)}this._queued=c.concat(a);break;case 2:for(var _=e.id,d=e.instance,t=function(e){var t,e=e.type;return 2==e._hx_index&&(t=e.instance,e.id==_)&&(null==t||t==d)},s=[],a=0,l=(m=this._queued).length;a<l;){r=a++;s.push({v:m[r],i:r})}for(a=[],l=0;l<s.length;){o=s[l];++l,t(o.v)&&a.push(o)}for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].i;for(;0<u.length;)m.splice(u.pop(),1);for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].v;il.each(u,function(e){Ly.invoke(e.handler,null)});for(c=this._queued,a=[],l=0;l<u.length;){o=u[l];++l,o.once||a.push(o)}this._queued=c.concat(a);break;case 7:for(t=function(e){return 3==e.type._hx_index},s=[],a=0,l=(m=this._queued).length;a<l;){r=a++;s.push({v:m[r],i:r})}for(a=[],l=0;l<s.length;){o=s[l];++l,t(o.v)&&a.push(o)}for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].i;for(;0<u.length;)m.splice(u.pop(),1);for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].v;il.each(u,function(e){Ly.invoke(e.handler,null)});for(c=this._queued,a=[],l=0;l<u.length;){o=u[l];++l,o.once||a.push(o)}this._queued=c.concat(a);break;case 8:for(t=function(e){return 4==e.type._hx_index},s=[],a=0,l=(m=this._queued).length;a<l;){r=a++;s.push({v:m[r],i:r})}for(a=[],l=0;l<s.length;){o=s[l];++l,t(o.v)&&a.push(o)}for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].i;for(;0<u.length;)m.splice(u.pop(),1);for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].v;il.each(u,function(e){Ly.invoke(e.handler,null)});for(c=this._queued,a=[],l=0;l<u.length;){o=u[l];++l,o.once||a.push(o)}this._queued=c.concat(a);break;case 9:var p=e.group;this._currLevels=e.levels;for(var m,t=function(e){e=e.type;return 5==e._hx_index&&e.group==p},s=[],a=0,l=(m=this._queued).length;a<l;){r=a++;s.push({v:m[r],i:r})}for(a=[],l=0;l<s.length;){o=s[l];++l,t(o.v)&&a.push(o)}for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].i;for(;0<u.length;)m.splice(u.pop(),1);for(u=new Array(a.length),l=0,h=a.length;l<h;)u[r=l++]=a[r].v;il.each(u,function(e){Ly.invoke(e.handler,null)});for(c=this._queued,a=[],l=0;l<u.length;){o=u[l];++l,o.once||a.push(o)}this._queued=c.concat(a)}},update:function(e){var i=this;if(null!=this._currentBar){for(var t=this._queued,n=[],s=0;s<t.length;){var a=t[s];switch(++s,(h=a.type)._hx_index){case 0:var l=h.count,r=i._elapsed-i._syncStart,o=i.getDuration(h.division)*(null==l?1:l),u=o-r%o<l0.dt;break;case 5:u=!0;break;default:u=!1}u&&n.push(a)}il.each(n,function(e){var t=e.type;switch(t._hx_index){case 0:var n=t.delay;0<n?i.after(n).handle(function(){Ly.invoke(e.handler,null)}):Ly.invoke(e.handler,null);break;case 5:Ly.invoke(e.handler,null)}});for(var t=this._queued,s=[],h=0;h<t.length;){var c,a=t[h],_=(++h,-1!=n.indexOf(a));switch((l=a.type)._hx_index){case 0:c=l.repeat;break;case 5:c=!0;break;default:c=!1}_&&!c||s.push(a)}this._queued=s,this._elapsed+=e}d.prototype.update.call(this,e)},get_baseName:function(){return"hacksaw.core.components.actor.SoundTriggerComponent"},__class__:uu}),fe["hacksaw.core.components.actor.TriggerType"]={__ename__:!0,__constructs__:null,FutureTrig:((R=function(e){return{_hx_index:0,trigger:e,__enum__:"hacksaw.core.components.actor.TriggerType",toString:o}})._hx_name="FutureTrig",R.__params__=["trigger"],R),SignalTrig:((R=function(e){return{_hx_index:1,trigger:e,__enum__:"hacksaw.core.components.actor.TriggerType",toString:o}})._hx_name="SignalTrig",R.__params__=["trigger"],R)}),cu=(hu.__constructs__=[hu.FutureTrig,hu.SignalTrig],hu.__empty_constructs__=[],(i["hacksaw.core.components.actor.h3d.TileTargetAnimatorComponent"]=Ns).__name__="hacksaw.core.components.actor.h3d.TileTargetAnimatorComponent",Ns.__super__=d,Ns.prototype=e(d.prototype,{init:function(){var e=this.owner._compMap,e=null!=e?e.h[Au.BASE_NAME]:null;this._tileTargetComp=e instanceof Au?e:null,this._animator=this._tileTargetComp.tileElement.get_animator()},play:function(t,n,i){null==i&&(i=Qh.Original);var s=this,a=new qy;return this.when(function(){return null!=s._tileTargetComp}).handle(function(){s._animator=new zh(s._tileTargetComp.get_mesh().material);var e=s._config.animations.h[t];null!=e.blendMode&&s._animator.material.set_blendMode(e.blendMode),null!=e.depthTest&&s._animator.material.passes.set_depthTest(e.depthTest),s._animator.play(e,n,i).handle(function(){a.trigger(null)})}),a},stop:function(e,t){null==e&&(e=Vh.Default);var n=this;return null==this._animator?new Zy(new Yy(null)):((e=this._animator.stop(e,t)).handle(function(){n._animator=null}),rt.noise(e))},update:function(e){d.prototype.update.call(this,e),null!=this._animator&&(null==this._tileTargetComp.get_mesh()&&null!=this._animator.get_currentFrame()&&this._tileTargetComp.setTile(this._animator.get_currentFrame()),this._animator.update(e))},get_baseName:function(){return"hacksaw.core.components.actor.h3d.TileTargetAnimatorComponent"},__class__:Ns}),(i["hacksaw.core.components.actor.h3d.TileTargetAnimatorComponentConfig"]=Gs).__name__="hacksaw.core.components.actor.h3d.TileTargetAnimatorComponentConfig",Gs.prototype={__class__:Gs},(i["hacksaw.core.components.actor.render.BlurChainComponent"]=Us).__name__="hacksaw.core.components.actor.render.BlurChainComponent",Us.__super__=P,Us.prototype=e(P.prototype,{setupChain:function(){var e=[],t=(this._shaderY=new fh(!0),this._processor),n=this._shaderY,i=new PA,t=(i.set(ht.COLOR,ut.Base),e.push(t.createPass(new _t(n,i,null,null,.5,.5,null))),this._shaderX=new fh(!1),this._processor),n=this._shaderX;return(i=new PA).set(ht.COLOR,ut.LastPass(0)),e.push(t.createPass(new _t(n,i,null,null,null,null,null))),this._processor.createChain(e)},update:function(e){Tt.update(this._tweenVector,e),null!=this._shaderX&&(this._shaderX.amount__=this._tweenVector.x),null!=this._shaderY&&(this._shaderY.amount__=this._tweenVector.x)},set:function(e,t){return Tt.tween(this._tweenVector,new nt(st.fromBacking(new it(e,null,null,null)),null,null,t,null,null,null,null,null,null,null))},get_baseName:function(){return"gasm.heaps.components.actor.render.PostProcessingChainComponent"},__class__:Us}),fe["hacksaw.core.components.model.DeviceClassSelector"]={__ename__:!0,__constructs__:null,CHANNEL:{_hx_name:"CHANNEL",_hx_index:0,__enum__:"hacksaw.core.components.model.DeviceClassSelector",toString:o},DEVICE:{_hx_name:"DEVICE",_hx_index:1,__enum__:"hacksaw.core.components.model.DeviceClassSelector",toString:o}}),_u=(cu.__constructs__=[cu.CHANNEL,cu.DEVICE],cu.__empty_constructs__=[cu.CHANNEL,cu.DEVICE],function(){this.featureMode=!1,this.featureCounter=0,this.gameMode="base",this.superTurbospin=!1,this.turbospin=!1,this.autoplay=!1,this.language=null,this.currentFeatureBuyData=null,this.featureRoundsPlayed=0,this.featureRoundCurrentWin=new yA(0,0),this.jackpotWin=null,this.betAccepted=!1,this.lastEvent=null,this.currentEvent=null,this.betEvents=[],d.call(this),this.componentType=Ie.Model}),du=((i["hacksaw.core.components.model.CasinoModel"]=_u).__name__="hacksaw.core.components.model.CasinoModel",_u.__super__=d,_u.prototype=e(d.prototype,{updateFeatureCounter:function(){this.featureCounter--,this.featureRoundCurrentWin=new yA(0,0),hacksawCasino.PubSub.getChannel("casino").publish("updateFeatureCounter",{counterValue:this.featureCounter})},recieveNewBetData:function(e){this.hasPendingEvents(),this.featureRoundCurrentWin=new yA(0,0),this.betEvents=e.slice(),this.popEvent()},hasPendingEvents:function(){return 0!=this.betEvents.length},popEvent:function(){return 0==this.betEvents.length?(this.currentEvent=null,this.eventData=null,hacksawCasino.PubSub.getChannel("casino").publish("popEvent",{eventsLeft:0,roundPresentationComplete:!0}),null):(this.currentWin=new yA(0,0),this.lastEvent=this.currentEvent,this.currentEvent=this.betEvents.shift(),this.updateWinData(),this.eventData=this.currentEvent.c,hacksawCasino.PubSub.getChannel("casino").publish("popEvent",{eventsLeft:this.betEvents.length,roundPresentationComplete:!1}),this.currentEvent)},getEventData:function(){return this.eventData},get_featureRoundCurrentWinFactor:function(){var e=wA.divMod(this.featureRoundCurrentWin,new yA(0,100)),t=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(e.modulus)),n=parseFloat((null==e.quotient?"null":wA.toString(e.quotient))+"."+t),e=wA.divMod(this.betAmount,new yA(0,100)),t=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(e.modulus));return n/parseFloat((null==e.quotient?"null":wA.toString(e.quotient))+"."+t)},get_turboMode:function(){return this.currentTurboValue({normal:null,turbo:"turbo",superTurbo:"superTurbo"})},get_winFactorTierOffset:function(){var e=this.currentFeatureBuyData,t=parseFloat(null!=e?e.betCostMultiplier:null),e=isNaN(t)?null:t,t=this.currentFeatureBuyData;return null!=t&&t.betCostMultiplierBaseGameEffect&&null!=e?e:0},get_featureSpinActive:function(){var e=this.currentFeatureBuyData,e=null!=e?e.get_featureBuyItemType():null;return null!=e&&"FeatureSpinItem"==e},isMobile:function(e){switch((e=null==e?cu.CHANNEL:e)._hx_index){case 0:return"mobile"==this.channel;case 1:return null!=window.orientation&&window.matchMedia("(any-pointer:coarse)").matches}},currentTurboValue:function(e){return this.superTurbospin?e.superTurbo:this.turbospin?e.turbo:e.normal},updateWinData:function(){var e,t,n,i=this.currentEvent,s=bA.parseString(el.string(i.wa)),a=bA.parseString(el.string(i.wc)),i=bA.parseString(el.string(i.awa)),l=0|+s.high;0==l&&(l=xA.ucompare(s.low,0)),!((s.high<0?-1:l)<=0)||(0==(l=0|+a.high)&&(l=xA.ucompare(a.low,0)),0<(a.high<0?-1:l))?(a=65535&(this.win=s).low,l=s.low>>>16,n=xA._mul(a,100),e=xA._mul(l,100),a=xA._mul(a,0),t=n,l=(xA._mul(l,0)+(a>>>16)|0)+(e>>>16)|0,xA.ucompare(t=n+(a<<=16)|0,a)<0&&(++l,l|=0),xA.ucompare(t=t+(e<<=16)|0,e)<0&&(++l,l|=0),l=l+(xA._mul(s.low,0)+xA._mul(s.high,100)|0)|0,n=wA.divMod(wA.divMod(new yA(l,t),this.betAmount).quotient,new yA(0,100)),a=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(n.modulus)),this.winFactor=parseFloat((null==n.quotient?"null":wA.toString(n.quotient))+"."+a)):(this.win=null,this.winFactor=0),this.accumulatedWin=i},get_baseName:function(){return"hacksaw.core.components.model.CasinoModel"},__class__:_u,__properties__:e(d.prototype.__properties__,{get_turboMode:"get_turboMode",get_featureSpinActive:"get_featureSpinActive",get_featureRoundCurrentWinFactor:"get_featureRoundCurrentWinFactor",get_winFactorTierOffset:"get_winFactorTierOffset"})}),function(e,t,n,i){this.disabledAutoplay=!1,this.disabledSlamStop=!1,this.disabledSuperTurbo=!1,this.disabledTurbo=!1,null!=e&&(this.disabledTurbo=e),null!=t&&(this.disabledSuperTurbo=t),null!=n&&(this.disabledSlamStop=n),null!=i&&(this.disabledAutoplay=i)}),pu=((i["hacksaw.core.components.model.FeatureFlags"]=du).__name__="hacksaw.core.components.model.FeatureFlags",du.prototype={__class__:du},(i["hacksaw.core.components.model.ExcitementModel"]=Ls).__name__="hacksaw.core.components.model.ExcitementModel",Ls.__super__=d,Ls.prototype=e(d.prototype,{init:function(){function e(e){t._wins.push({factor:e.winFactor,when:t._elapsed}),t._winChecked=.1,t._reducedLevel=e.reducedLevel,0<e.duration&&(t._stickDelay=SA.delay(function(){t.stick=!0},300))}var t=this;hacksawCasino.PubSub.getChannel("game").subscribe("win",e),hacksawCasino.PubSub.getChannel("game").subscribe("lineWin",e),hacksawCasino.PubSub.getChannel("game").subscribe("winCountComplete",function(e){null!=t._stickDelay&&(t._stickDelay.stop(),t._stickDelay=null),t.stick=!1,t._winChecked=0}),hacksawCasino.PubSub.getChannel("game").subscribe("enterMode",function(e){t.reset(e.gameMode)}),d.prototype.init.call(this)},update:function(e){if(this.get_enabled()&&!this.stick&&(this._winChecked+=e,this._elapsed+=e,.1<=this._winChecked)){for(var e=be.fold(this._wins,function(e,t){return t>e.factor?t:e.factor},0),t=(e!=this.excitement&&(this.excitement=e,e=this._reducedLevel?.5:1,hacksawCasino.PubSub.getChannel("casino").publish("excitement_"+this._mode,{excitement:Math.max(this.floor,this.excitement*e)})),this._wins),n=[],i=0;i<t.length;){var s=t[i];++i,this._elapsed-s.when<17&&n.push(s)}this._wins=n,this._winChecked=0}},reset:function(e){this._wins=[],this._mode=e,this._winChecked=0,this.stick=!1,this.excitement=0},get_enabled:function(){return this._enabled},get_baseName:function(){return"hacksaw.core.components.model.ExcitementModel"},__class__:Ls}),function(e,t){B.call(this),this._config=e,this._textConfig=t,this._element=new ju(e,t),this.updateSignal=this._element.updateSignal,this.object.object.flags|=524288,this.object.addChild(this._element)}),mu=((i["hacksaw.core.components.view.NumberCountupComponent"]=pu).__name__="hacksaw.core.components.view.NumberCountupComponent",pu.__super__=B,pu.prototype=e(B.prototype,{countTo:function(e,t,n,i){return this._element.countTo(e,t=null==t?0:t,n=null==n?!0:n,i)},cancel:function(e){this._element.cancel(e=null==e?!1:e)},skip:function(){this._element.skip()},clone:function(){var e=new pu(this._config,this._textConfig);return e.object.object.setTransform(this.object.object.getTransform().clone()),e},getDuration:function(){return this._element.getDuration()},clear:function(){this._element.clear()},update:function(e){B.prototype.update.call(this,e),this._element.update(e)},dispose:function(){this._element.dispose(),B.prototype.dispose.call(this)},get_value:function(){return this._element.get_value()},set_suffix:function(e){return this._element.suffix=e},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:pu,__properties__:e(B.prototype.__properties__,{set_suffix:"set_suffix",get_value:"get_value"})}),(i["hacksaw.core.components.view.SplashComponent"]=js).__name__="hacksaw.core.components.view.SplashComponent",js.__super__=B,js.prototype=e(B.prototype,{init:function(){for(var e=this.owner._compMap,e=null!=e?e.h[T.BASE_NAME]:null,t=(this._fit=e instanceof T?e:null,this._appModel=this.owner.getFromParentsByName(ee.BASE_NAME,ee),0),n=this._config.splashes;t<n.length;){var i=n[t],s=(++t,new It(new Hr(this.object.object))),a=(tt.init(s,null),s),l=(null!=i.header&&(l=new bu(i.header),this._displayables.push(l),a.addChild(l.toObject())),new bu(i.body)),i=(this._displayables.push(l),a.addChild(l.toObject()),new bu(i.background));this._displayables.push(i),a.addChild(i.toObject()),this._splashes.push(a)}var e=new bu(this._config.logo),s=(this._displayables.push(e),new It(new Hr(this.object.object)));tt.init(s,null),this.logo=s,this.logo.addChild(e.toObject()),null!=this._config.volatility&&(e=new bu(this._config.volatility),this._displayables.push(e),s=new It(new Hr(this.object.object)),tt.init(s,null),this.volatility=s,this.volatility.addChild(e.toObject())),null!=this._config.topHeader&&(e=new bu(this._config.topHeader),this._displayables.push(e),s=new It(e.toObject()),tt.init(s,null),this.topHeader=s,this.object.addChild(this.topHeader.object)),null!=this._config.clickToContinue&&(e=new bu(this._config.clickToContinue),this._displayables.push(e),s=new It(new Hr(this.object.object)),tt.init(s,null),this.clickToContinue=s,this.clickToContinue.addChild(e.toObject())),null!=this._config.epicSticker&&(e=new bu(this._config.epicSticker),this._displayables.push(e),s=new It(new Hr(this.object.object)),tt.init(s,null),this.epicSticker=s,this.epicSticker.addChild(e.toObject())),this.layout(),this._timeLeft=this._config.splashTimeout},dispose:function(){this.object.object.removeChildren(),B.prototype.dispose.call(this)},update:function(t){for(var e=this,n=(tt.update(this.object,t),0),i=this._splashes;n<i.length;)tt.update(i[n++],t);tt.update(this.logo,t);var s=this.clickToContinue;null!=s&&tt.update(s,t),null!=(s=this.volatility)&&tt.update(s,t),null!=(s=this.epicSticker)&&tt.update(s,t),0<this._timeLeft&&(this._timeLeft-=t,this._timeLeft<=0)&&(this._activeSplashIndex=(this._activeSplashIndex+1)%this._splashes.length,this._onSplashFocused=this.onSplashFocus(this._activeSplashIndex),this._onSplashFocused.handle(function(){e._timeLeft=e._config.splashTimeout,e._onSplashFocused=null})),il.each(this._displayables,function(e){e.update(t)})},layout:function(){var n=this;if(this.inited)if(il.each(this._displayables,function(e){e.layout(n._appModel.orientation)}),null!=this._onSplashFocused)il.each(this._tweeningCards,function(e){e.cancel()}),this._onSplashFocused=null,this.layout();else{switch(this._timeLeft=this._config.splashTimeout,this._appModel.orientation){case"landscape":il.eachi(this._splashes,function(e,t){e.setPosition((t/(n._splashes.length-1)*2-1)*n._config.xSpacing,n._config.splashes[t].yOffset,0),e.set_visible(!0)});break;case"portrait":il.eachi(this._splashes,function(e,t){e.set_visible(t==n._activeSplashIndex),e.setPosition(0,0,0)})}this._fit.set_enabled(!0)}},onSplashFocus:function(e){var t=this;switch(this._appModel.orientation){case"landscape":return rt.NOISE;case"portrait":this._fit.set_enabled(!1);var n=this._splashes.length,i=this._splashes[e],s=this._splashes[((e-1)%n+n)%n],n=(this._tweeningCards=[i,s],i.set_visible(!0),s.set_visible(!0),rt.inParallel([tt.tween(i,[et.Position(new nt(st.fromBacking(new it(0,null,null,null)),st.fromBacking(new it(-10,null,null,null)),null,1,null,function(e){return-e*(e-2)},null,null,null,null,null))]),tt.tween(s,[et.Position(new nt(st.fromBacking(new it(10,null,null,null)),st.fromBacking(new it(0,null,null,null)),null,1,null,function(e){return e*e},null,null,null,null,null))])]));return n.handle(function(){"portrait"==t._appModel.orientation&&(i.set_visible(!0),s.set_visible(!1),t._fit.set_enabled(!0),s.setPosition(0,0,0))}),rt.noise(n)}},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:js}),(i["hacksaw.core.components.view.SplashCardConfig"]=Hs).__name__="hacksaw.core.components.view.SplashCardConfig",Hs.prototype={__class__:Hs},(i["hacksaw.core.components.view.SplashComponentConfig"]=Ys).__name__="hacksaw.core.components.view.SplashComponentConfig",Ys.prototype={__class__:Ys},(i["hacksaw.core.components.view.TextDisplayComponent"]=Zs).__name__="hacksaw.core.components.view.TextDisplayComponent",Zs.__super__=B,Zs.prototype=e(B.prototype,{init:function(){null!=this._showTextArgs&&this._textElement.showText(this._showTextArgs.text,this._showTextArgs.centerReset),B.prototype.init.call(this)},update:function(e){B.prototype.update.call(this,e);var t=this._textElement;null!=t&&t.update(e)},dispose:function(){var e=this._textElement;null!=e&&e.dispose(),B.prototype.dispose.call(this)},showText:function(e,t){null==t&&(t=!1),null==this._textElement&&(this._textElement=this.addTextElement()),null!=e&&this._textElement.showText(e,t)},addTextElement:function(){var e=Fh.create(this._config);return this.object.addChild(e),e.set_anchor(this._anchor),e},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Zs}),function(e){this._config=e,B.call(this)}),gu=((i["hacksaw.core.components.view.h3d.DisplayComponent"]=mu).__name__="hacksaw.core.components.view.h3d.DisplayComponent",mu.__super__=B,mu.prototype=e(B.prototype,{setup:function(){this._instance=this._config.displayable.get_instance(),this.object.addChild(this._config.displayable.toObject()),this.get_displayable().update(0)},update:function(e){this.get_displayable().update(e),B.prototype.update.call(this,e)},get_displayable:function(){return this._config.displayable},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:mu,__properties__:e(B.prototype.__properties__,{get_displayable:"get_displayable"})}),function(e,t){this.start=null,this.displayable=e,null!=t&&(this.start=t)}),fu=((i["hacksaw.core.components.view.h3d.DisplayConfig"]=gu).__name__="hacksaw.core.components.view.h3d.DisplayConfig",gu.prototype={__class__:gu},(i["hacksaw.core.components.view.h3d.MainCountupComponent"]=Xs).__name__="hacksaw.core.components.view.h3d.MainCountupComponent",Xs.__super__=Ne,Xs.prototype=e(Ne.prototype,{init:function(){var t=this;this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),this._casinoChannel.subscribe("cancelWinAnimation",function(e){t.cancel()}),Ne.prototype.init.call(this)},show:function(e,t,n,i){null==i&&(i=!1),null==n&&(n=!0);var s=this,a=wA.divMod(this.owner.getFromParentsByName(_u.BASE_NAME,_u).betAmount,new yA(0,100)),l=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(a.modulus)),r=parseFloat((null==a.quotient?"null":wA.toString(a.quotient))+"."+l),a=wA.divMod(e.totalAmount,new yA(0,100)),l=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(a.modulus)),o=parseFloat((null==a.quotient?"null":wA.toString(a.quotient))+"."+l)/r,u=il.findIndex(this._allTiers,function(e){var t=s.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();return(0<e.duration?e.val+t:e.val)>o})+1,h=this._allTiers.slice(0,u),a=h.length-2;if(!n)return this._gameChannel.publish("winCountComplete",{winFactor:o,tier:a}),new Zy(new Yy(null));this._counting=!0,this._skipFromTier=null,this._currentText=null,this.clear(),this._countupEnt=new ge,this._countup=new B,this.owner.addChild(this._countupEnt.add(this._countup)),this.addController(this._countupEnt,h[a]);for(var c=[],_=0,d=h.length;_<d;){var p=_++,m=h[p],p=h[p-1],p=null==p?m:p,g=s.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset(),g=0<p.duration?p.val+g:p.val,p=s.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();p=(0<m.duration?m.val+p:m.val)!=1/0?(p=s.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset(),0<m.duration?m.val+p:m.val):2*g,c.push(m.duration/1e3*Math.min((o-g)/(p-g),1))}this.totalDuration=il.reduce(c,function(e,t){return e+t},0),this._gameChannel.publish("win",{winFactor:o,tier:a,duration:this.totalDuration,show:n,reducedLevel:0<this.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset()});var f=null==e.multiplied?this.countup(e,u,h,c,o,r,i):this.countupMultiplied(e,u,h,c,o,r,i),A=new qy;return this.when(function(){return null!=s._countup.object.get_parent()}).handle(function(){var e=s.showSteps(f,u,h,r,o);tt.tween(s._countup.object,s._countupConfig.amountTweens.start),e.handle(function(){if(null!=s._tierText){var e=s._tierText.get_displayable().get_instance();switch(e._hx_index){case 0:e.triggers.remove.handlers.invoke(null);break;case 1:throw new tl("Object displayable type not implemented for main countup tiers");case 2:case 3:case 4:e.triggers.remove.handlers.invoke(null)}}s._counting=!1,A.trigger(null),s.clear()})}),A},cancel:function(){var e=this._controller;null!=e&&e.skip()},update:function(e){Ne.prototype.update.call(this,e)},clear:function(){null!=this._countupEnt&&(this._countupEnt.dispose(),this._countupEnt=null,(this._countup=null)!=(e=this._controller).owner&&e.owner.remove(e),this._controller=null);var e=this._tierText;null!=e&&e.owner.dispose(),this._tierText=null},addTierText:function(){this._countupConfig.tier.config.shadows=this._countupConfig.shadows,this._countupConfig.tier.config.anchor=this._countupConfig.tierAnchor,this._tierText=new mu(new gu(new bu(this._countupConfig.tier.config),null));var e=this._countupConfig.tierPos;this._tierText.object.setPosition(e.x,e.y,e.z),this.owner.addChild((new ge).add(this._tierText))},addController:function(e,i){var s=this,t=this.owner._compMap,t=null!=t?t.h[Rs.BASE_NAME]:null;this._controller=t instanceof Rs?t:null,null==this._controller&&(this._controller=new Rs(new Qs(this._countupConfig.amount,this._countupConfig.multiplier,null,!0,function(){return s._tierText.object.getBounds()},null,this._countupConfig.amount.pos,null)),e.add(this._controller)),this._controller.onSkip=function(){var e=Jn.now()/1e3-s._tierChangedAt,t=new qy;if(s._counting&&e>s._pauseDuration){if(il.findIndex(s._tiers,function(e){return e==s._currentTier}),s._skipFromTier=s._currentTier,s._currentTier==i){var n=s._tierText.get_displayable().get_instance();switch(n._hx_index){case 0:case 1:break;case 2:n.triggers.stop.handlers.invoke(Yh.Named(i.id,Zh.End(i.pauseAfterSkip)))}}s.after(0).handle(function(){t.trigger(null)})}else t.trigger(null);return t},this._controller.updateSignal.listen(function(e){s._gameChannel.publish("updateWinAmount",{size:e.size})})},showSteps:function(c,e,_,d,n){var p=this,m=(this._tierSequence=new hc(!1),_[e-1]),g=!0,i=(this._currentTier=_[0],new qy),f=!1;return this._controller.showSteps(c,!1,function(e){return f||!(f=il.reduce(c,function(e,t){return!!t.skip&&e},!0))&&c[c.length-1]!=e||p._casinoChannel.publish("winAnimationStarted"),i=e,e=il.find(_,function(e){var t=i.value/d,n=p.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();return t-(0<e.duration?e.val+n:e.val)<=1e-6}),n=null!=i.multipliers,s=c[c.indexOf(i)+1],a=_[_.indexOf(e)+1]==m,l=""!=e.text&&null!=e&&!e.skip,p._pauseDuration=l?i.skipPauseDuration:e.tierPause,r=!n&&e.skip&&null!=p._skipFromTier,o=!n&&e.skip&&null!=p._skipFromTier,s=!o&&(null!=s&&null==s.multipliers||(s=i.value,u=p.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset(),s==(0<e.duration?e.val+u:e.val)))&&!n,g=!s,u=il.find(_,function(e){return null!=e.text&&""!=e.text}),h=null!=u?u.text:null,u=null!=h&&p._stepTexts.h[i.__id__]==h&&null!=p._skipFromTier,t=a?il.findLast(c,function(e){return null!=p._stepTexts.h[e.__id__]}):u?il.find(c,function(e){return p._stepTexts.h[e.__id__]==h}):null==(t=c[c.indexOf(i)+1])?i:t,(s=(s||a||u)&&(!o||a))&&p.presentTier(e,p._stepTexts.h[i.__id__],t.style,r,g,s),a=l?((u=rt.irreversible(function(e){p.after(p._pauseDuration).handle(function(){e(o)})})).eager(),u):new Zy(new Yy(o)),s&&(p._currentText=p._stepTexts.h[t.__id__]),n&&(p._skipFromTier=null),p._currentTier=e,a;var i,t,n,s,a,l,r,o,u,h}).handle(function(){var e=_[_.length-1],t=p.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();p._gameChannel.publish("winCountComplete",{winFactor:n,tier:_.length-((0<e.duration?e.val+t:e.val)<n?1:2)}),p.after(p._countupConfig.endDuration).handle(function(){var e=p._currentTier.amountTweens.remove,t=tt.tween(p._countup.object,null==e?p._countupConfig.amountTweens.remove:e),e=p._currentTier.tierTweens.remove;rt.and(t,null==p._tierText?new Zy(new Yy(!0)):tt.tween(p._tierText.object,null==e?p._countupConfig.tierTweens.remove:e)).handle(function(){p.clear(),i.trigger(null)})})}),i},countup:function(e,t,n,i,s,a,l,r){for(var o=n.slice(r=null==r?0:r),u=[],h=0,c=o.length;h<c;){var _=h++,d=o[_];if(_<=t){var p,m=i[_+r],_=e.style,g=null==_?iu.Counting(m):_;switch(g._hx_index){case 2:p=iu.Instant(m,g.args);break;case 3:p=iu.Counting(m,m,g.args);break;default:p=null}var _=d.tierPause,f=d.skip,A=d.pauseAfterSkip,x=this.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset(),x=new ru(Math.min(0<d.duration?d.val+x:d.val,s)*a,p,null,null,null,null,null,f,_,A,null),f=this._stepTexts,_=this.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();f.set(x,(0<d.duration?d.val+_:d.val)>s?null:d.text),A=x}else A=null;u.push(A)}return il.filterNull(u)},countupMultiplied:function(e,t,n,i,s,a,l){for(var r=this,o=n[0],u=[],h=0;h<n.length;){var c=n[h],_=(++h,r.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset()),d=bA.fromFloat(Math.round(Math.min(0<o.duration?o.val+_:o.val,s)*a*100)),p=e.multiplied.baseAmount,m=p.high-d.high|0,p=(0==m&&(m=xA.ucompare(p.low,d.low)),0<=(p.high<0?d.high<0?m:-1:0<=d.high?m:1));p&&(o=c),p&&u.push(c)}for(var g=u,f=[],u=0,h=g.length;u<h;){var A=u++,x=g[A],w=i[A],y=wA.divMod(e.multiplied.baseAmount,new yA(0,100)),b=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(y.modulus)),A=parseFloat((null==y.quotient?"null":wA.toString(y.quotient))+"."+b)/a,_=r.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset(),A=Math.min(0<x.duration?x.val+_:x.val,A),v=e.style,v=(null==v&&(v=iu.Counting(w)),new ru(A,v,null,null,null,null,null,null,x.tierPause,x.pauseAfterSkip,null)),C=r._stepTexts,S=r.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();C.set(v,A==(0<x.duration?x.val+S:x.val)?x.text:null),f.push(v)}var k=il.filterNull(f);if(null!=e.multiplied.multipliers){this._tiers.slice(this._tiers.indexOf(o)+1);var M,y=wA.divMod(e.multiplied.baseAmount,new yA(0,100)),b=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(y.modulus)),I=parseFloat((null==y.quotient?"null":wA.toString(y.quotient))+"."+b),y=wA.divMod(e.multiplied.baseAmount,new yA(0,100)),b=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(y.modulus)),u=(parseFloat((null==y.quotient?"null":wA.toString(y.quotient))+"."+b),o.pauseAfterSkip),h=o.tierPause,y=wA.divMod(e.totalAmount,new yA(0,100)),b=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(y.modulus)),B=parseFloat((null==y.quotient?"null":wA.toString(y.quotient))+"."+b),g=this._tiers,w=(k.push(new ru(B,e.multiplied.style,I,null,null,null,e.multiplied.multipliers,null,h,u,o==g[g.length-1])),o.duration/1e3),u=o.pauseAfterSkip,h=o.tierPause,y=wA.divMod(e.totalAmount,new yA(0,100)),b=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(y.modulus)),B=parseFloat((null==y.quotient?"null":wA.toString(y.quotient))+"."+b),_=this.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset(),I=Math.min(B,(0<o.duration?o.val+_:o.val)/a);if(null==e.style)M=iu.Counting(w);else switch(e.style._hx_index){case 2:M=iu.Instant(w);break;case 3:M=iu.Counting(w);break;default:throw new tl('Unsupported style for countup. "style" in CountupShowArgs has to be Instant or Counting.')}B=new ru(I,M,null,null,function(){return r._pauseDuration=w,new Zy(new Yy(null))},null,null,null,h,u,null);this._stepTexts.set(B,o.text),B.value<1/0&&k.push(B),k=k.concat(this.countup(e,t,n,i,s,a,l,n.indexOf(o)))}return k},presentTier:function(l,r,o,u,e,t){null==t&&(t=!0),null==e&&(e=!1),null==u&&(u=!1);var h=this,c=[],_=new qy,e=(null==this._tierText&&this.addTierText(),this._tierChangedAt=Jn.now()/1e3,this._tierText.object.set_visible(!1),t&&(this._tierText.object.cancel(!0),this._tierText.get_displayable().displayableReady.handle(function(){switch((i=h._tierText.get_displayable().get_instance())._hx_index){case 0:i.triggers.show.handlers.invoke(new ku(r,null));break;case 1:throw tl.thrown("Only Text displayable implemented for main countup tiers");case 2:var e=i.triggers;u?(t=""+l.id+h._countupConfig.skipSuffix,null!=h._countupConfig.skipSuffix&&Object.prototype.hasOwnProperty.call(i.animator.animations.h,t)?e.play.handlers.invoke(new Hh(t,null,null,null)):(e.play.handlers.invoke(new Hh(l.id,null,null,null)),e.stop.handlers.invoke(Yh.Named(l.id,Zh.End(l.pauseAfterSkip))))):e.play.handlers.invoke(new Hh(l.id,null,null,null));break;case 3:i.triggers.show.handlers.invoke(new Mu(l.id));break;case 4:var t=i.triggers.show,e=new Iu(l.id,i.element.get_value());t.handlers.invoke(e)}var n=l.tierTweens.start,n=null!=n?n:h._countupConfig.tierTweens.start;if(null==o)a=null;else switch(o._hx_index){case 0:case 1:a=null;break;case 2:var i,s,a=(null==(s=(null==(i=o.args)?new tu(null):i).tweens)?new fu(null,null):s).start;break;case 3:a=(null==(s=(null==(i=o.args)?new nu(null):i).tweens)?new fu(null,null):s).start;break;case 4:a=null}null==a&&(a=l.amountTweens.start),h._tierText.object.set_visible(!0),u?(tt.tween(h._tierText.object,n),tt.tween(h._countup.object,a),_.trigger(null)):(c.push(tt.tween(h._tierText.object,n)),c.push(tt.tween(h._countup.object,a)),rt.inParallel(c).handle(function(){_.trigger(null)}))})),this._gameChannel),n=il.findIndex(this._countupConfig.tiers,function(e){var t=h.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset(),e=0<e.duration?e.val+t:e.val,t=h.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();return e==(0<l.duration?l.val+t:l.val)}),i=this.owner.getFromParentsByName(_u.BASE_NAME,_u).get_winFactorTierOffset();return e.publish("enterWinTier",{level:n,val:0<l.duration?l.val+i:l.val,skipped:u,gameMode:this.owner.getFromParentsByName(_u.BASE_NAME,_u).gameMode}),t?rt.flatMap(rt.inParallel(c),function(e){return new Zy(new Yy(!0))}):new Zy(new Yy(!1))},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Xs}),(i["hacksaw.core.components.view.h3d.CountupTier"]=qs).__name__="hacksaw.core.components.view.h3d.CountupTier",qs.prototype={__class__:qs},function(e,t){this.remove=null,(this.start=null)!=e&&(this.start=e),null!=t&&(this.remove=t)}),Au=((i["hacksaw.core.components.view.h3d.StartRemoveTweens"]=fu).__name__="hacksaw.core.components.view.h3d.StartRemoveTweens",fu.prototype={__class__:fu},(i["hacksaw.core.components.view.h3d.MainCountupConfig"]=Ks).__name__="hacksaw.core.components.view.h3d.MainCountupConfig",Ks.prototype={__class__:Ks},(i["hacksaw.core.components.view.h3d.SpineComponent"]=Js).__name__="hacksaw.core.components.view.h3d.SpineComponent",Js.__super__=B,Js.prototype=e(B.prototype,{createElement:function(e){return bh.create(new Sh(this._config.spine,null,this._config.scale,this._config.blendMode,this._config.depthTest,this._config.culling,this._config.shadows,this._config.enableLights,null,this._config.exposedClippingAttachments,this._config.useDarkTint,this._config.usePremultipliedAlpha,null,this._config.pointAttachmentTransformSetting))},play:function(e,t,n,i){e=this._config.animations.h[e];return e.attachmentOverrides=null==i?e.attachmentOverrides:i,this.animator.play(e,t,n)},stop:function(e,t,n){return this.animator.stop(e,null==t?null:this._config.animations.h[t].animationName,n)},dispose:function(){this.spineElement.dispose(),B.prototype.dispose.call(this)},update:function(e){B.prototype.update.call(this,e);var t=this.spineElement;null!=t&&t.update(e)},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Js}),(i["hacksaw.core.components.view.h3d.SpineComponentConfig"]=$s).__name__="hacksaw.core.components.view.h3d.SpineComponentConfig",$s.prototype={__class__:$s},function(e){B.call(this);var t=Ir.fromColor(0,1,1,0);this.setTile(e=null==e?t:e)}),xu=((i["hacksaw.core.components.view.h3d.TileTargetComponent"]=Au).__name__="hacksaw.core.components.view.h3d.TileTargetComponent",Au.__super__=B,Au.prototype=e(B.prototype,{setTile:function(e,t){null!=e&&(null==this.tileElement?(this.tileElement=this.createElement(e),this.object.addChild(this.tileElement)):this.tileElement.setTile(e,t))},dispose:function(){this.tileElement.dispose(),B.prototype.dispose.call(this)},update:function(e){B.prototype.update.call(this,e),null!=this.tileElement&&this.tileElement.update(e)},get_mesh:function(){return null!=this.tileElement?this.tileElement.get_mesh():null},createElement:function(e){throw tl.thrown("Implement this in subclass")},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:Au,__properties__:e(B.prototype.__properties__,{get_mesh:"get_mesh"})}),(i["hacksaw.core.components.view.h3d.TilePlaneComponent"]=ea).__name__="hacksaw.core.components.view.h3d.TilePlaneComponent",ea.__super__=Au,ea.prototype=e(Au.prototype,{createElement:function(e){return Dh.create(new Rh(e,null,null,this._config.scale,this._config.blendMode,this._config.depthTest,null,null,this._config.shadows,this._config.shadows,this._config.fixedWidth,this._config.fixedHeight,null,null))},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:ea}),(i["hacksaw.core.components.view.h3d.TilePlaneComponentConfig"]=ta).__name__="hacksaw.core.components.view.h3d.TilePlaneComponentConfig",ta.prototype={__class__:ta},(i["hacksaw.core.components.view.particles.ParticleEmitterComponent"]=na).__name__="hacksaw.core.components.view.particles.ParticleEmitterComponent",na.__super__=B,na.prototype=e(B.prototype,{setup:function(){for(var e=this._config.groups,t=new Array(e.length),n=0,i=e.length;n<i;){var s=n++;t[s]=new $u(e[s])}this._particleSystem=new nh(new ih(t),this.object.object),this._config.autoStart&&this._inited.handle(Cn(R=this._particleSystem,R.start))},init:function(){this._inited.trigger(null)},start:function(n,a){var l=this,e=new qy;return s1.nextTime(this._stop).handle(function(){e.trigger(!1)}),Rt([function(e){var t=null==n?null:l.after(n);return rt.map(rt.and(l._inited,null!=t?t:rt.NOISE),function(e){return!0})},function(e){var t,n,i,s=l._particleSystem.start();return null!=a?(t=(n=rt.map(l.after(a),function(e){return!0})).handle(Cn(R=l._particleSystem,R.stop)),n=rt.or(rt.map(l._particleSystem.getNextEmitInterruption(),function(e){return!1}),n),i=t,n.handle(function(){null!=i&&i.cancel()}),n):s}],null,new Xe(e,null,null))},stop:function(n){var i=this;return Rt([function(e){var t=null==n?null:i.after(n);return rt.map(rt.and(i._inited,null!=t?t:rt.NOISE),function(e){return!0})},function(e){return i._stop.handlers.invoke(null),i._particleSystem.stop()}])},update:function(e){B.prototype.update.call(this,e),this._particleSystem.update(e*this.timescale)},dispose:function(){var e=this._particleSystem;null!=e&&e.dispose(),B.prototype.dispose.call(this)},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:na}),(i["hacksaw.core.components.view.particles.EmitterConfig"]=ia).__name__="hacksaw.core.components.view.particles.EmitterConfig",ia.prototype={__class__:ia},(i["hacksaw.core.config.BackgroundData"]=sa).__name__="hacksaw.core.config.BackgroundData",sa.prototype={__class__:sa},(i["hacksaw.core.config.BackgroundObject"]=aa).__name__="hacksaw.core.config.BackgroundObject",(i["hacksaw.core.config.ParticleDef"]=la).__name__="hacksaw.core.config.ParticleDef",(i["hacksaw.core.config.CountupData"]=ra).__name__="hacksaw.core.config.CountupData",ra.prototype={__class__:ra},(i["hacksaw.core.config.CountupText"]=oa).__name__="hacksaw.core.config.CountupText",(i["hacksaw.core.config.PreloaderData"]=ua).__name__="hacksaw.core.config.PreloaderData",ua.prototype={__class__:ua},(i["hacksaw.core.config.SplashData"]=ha).__name__="hacksaw.core.config.SplashData",ha.prototype={__class__:ha},function(e,t,n,i,s,a,l,r,o,u){this.addStencil=!1,this.anchor=Me.NONE,this.rotation=st.fromBacking(new it(0,0,0,null)),this.shadows=!1,this.blendMode=null,this.depthTest=to.LessEqual,this.space=null,this.scale=1,this.strings=null,this.resource=e,null!=t&&(this.strings=t),null!=n&&(this.scale=n),null!=i&&(this.space=i),null!=s&&(this.depthTest=s),null!=a&&(this.blendMode=a),null!=l&&(this.shadows=l),null!=r&&(this.rotation=r),null!=o&&(this.anchor=o),null!=u&&(this.addStencil=u)}),wu=((i["hacksaw.core.config.TextDisplayConfig"]=xu).__name__="hacksaw.core.config.TextDisplayConfig",xu.prototype={__class__:xu},fe["hacksaw.core.data.AnimationType"]={__ename__:!0,__constructs__:null,Tile:((R=function(e){return{_hx_index:0,anim:e,__enum__:"hacksaw.core.data.AnimationType",toString:o}})._hx_name="Tile",R.__params__=["anim"],R),Skin:((R=function(e){return{_hx_index:1,anim:e,__enum__:"hacksaw.core.data.AnimationType",toString:o}})._hx_name="Skin",R.__params__=["anim"],R),Spine:((R=function(e){return{_hx_index:2,anim:e,__enum__:"hacksaw.core.data.AnimationType",toString:o}})._hx_name="Spine",R.__params__=["anim"],R)}),yu=(wu.__constructs__=[wu.Tile,wu.Skin,wu.Spine],wu.__empty_constructs__=[],(i["hacksaw.core.data.SpineAnim"]=ca).__name__="hacksaw.core.data.SpineAnim",ca.prototype={__class__:ca},(i["hacksaw.core.data.TileAnim"]=_a).__name__="hacksaw.core.data.TileAnim",_a.prototype={__class__:_a},(i["hacksaw.core.data.SkinAnim"]=da).__name__="hacksaw.core.data.SkinAnim",da.prototype={__class__:da},(i["hacksaw.core.data.AtlasInfo"]=pa).__name__="hacksaw.core.data.AtlasInfo",pa.prototype={__class__:pa},function(){}),bu=((i["hacksaw.core.data.BitmapFontList"]=yu).__name__="hacksaw.core.data.BitmapFontList",function(e){if(this._inited=!1,this._initDone=new qy,this.displayableReady=this._initDone,7==e.type._hx_index){var t=e.landscapeType;if(null==t)throw new tl("Displayable requires at least one renderable type");if(7==t._hx_index)throw new tl("Displayable requires at least one renderable type")}this.config=e}),vu=((i["hacksaw.core.data.Displayable"]=bu).__name__="hacksaw.core.data.Displayable",bu.prototype={toObject:function(){var e=this.get_instance();switch(e._hx_index){case 0:return nl.__cast(e.element,Hr);case 1:return e.object;case 2:return e.animator.get_object();case 3:case 4:return nl.__cast(e.element,Hr)}},toElement:function(){var e,t=this.get_instance();switch(t._hx_index){case 0:e=t.element;break;case 1:e=t.object;break;case 2:e=t.animator.get_object();break;case 3:case 4:e=t.element}return nl.__cast(e,Lu)},update:function(e){this._inited||(this._initDone.trigger(null),this._inited=!0);var t=this.get_instance();switch(t._hx_index){case 0:t.element.update(e);break;case 1:throw new tl("Object Displayable not implemented");case 2:t.animator.update(e);break;case 3:case 4:t.element.update(e)}},create:function(e,t){null==t&&(t=!0);var n,i,s=this,e=null!=e?e:Vr.CURRENT.width>Vr.CURRENT.height?"landscape":"portrait",a="landscape"==e,l=new qy;if(this._orientation=e,7==this.config.type._hx_index)r=this.config.landscapeType;else switch(this._orientation){case"landscape":var r=null==(o=this.config.landscapeType)||7==o._hx_index?this.config.type:this.config.landscapeType;break;case"portrait":r=this.config.type}switch(n=a&&null!=(i=this.config.landscapeScale)?i:this.config.scale,r._hx_index){case 0:switch(r._hx_index){case 0:var o=r.atlas,u=r.defaultTile;A=r.info.animation?o.animation.frames[0]:null!=u?Kh.getTile(o,u):Ir.fromColor(0,0);break;case 3:A=r.tile;break;case 4:var o=r.style,u=r.size;A=$h.toTile(r.gradients,o.id,o.resolution,u.x,u.y);break;default:A=null}var h=Dh.create(new Rh(nl.__cast(A,Ir),null,null,n,this.config.blendMode,this.config.depthTest,null,null,this.config.shadows,this.config.shadows,null,null,null,this.config.anchor));4==(o=this.config.type)._hx_index&&h.get_material().setUVRotation(3.141592653589793*o.style.rotation/180,!0),i=Su.Tile(h,new Eu(s1.trigger(),s1.trigger()),new Fu(function(){},function(){}));break;case 1:var c=r.defaultState,h=Dh.create(new Rh(Ir.fromColor(0,0),null,null,n,this.config.blendMode,this.config.depthTest,null,null,this.config.shadows,this.config.shadows,null,null,null,this.config.anchor)),_=new Yu(new Xu(h,zy.mapValues(r.atlases,function(e){return wu.Tile(new _a("tmp",null,null,null,new Oh(e.atlas.animation,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null),!1))},new at))),d=new Du(s1.trigger(),s1.trigger(),s1.trigger());s1.nextTime(d.play,function(e){return null!=_.animations.h[e.name]}).handle(function(e){var t,n,e=_.animations.h[e.name];null!=e&&0===e._hx_index&&(t=(e=e.anim.animation).animationData.width*e.scale|0,e=e.animationData.height*e.scale|0,(n=h.get_mesh()).scaleX=t/sl.REFERENCE_SIZE,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),(n=h.get_mesh()).scaleY=e/sl.REFERENCE_SIZE,n.flags|=1,0!=(131072&n.flags))&&(n.flags|=262144)}),null!=c&&rt.and(l,this.displayableReady).handle(function(){d.play.handlers.invoke(c)}),i=Su.Animation(_,d,new Ru(function(){},function(){},function(){}));break;case 2:var o=r.skin,p=r.defaultState,m=bh.create(new Sh(r.spine,null,n,this.config.blendMode,this.config.depthTest,null,this.config.shadows,null,null,null,r.useDarkTint,r.usePremultipliedAlpha,r.replaceMeshBounds,null)),g=(null!=o&&m.skeleton.setSkin(o),new Yu(new Xu(m,zy.mapValues(r.animations,function(e){return wu.Spine(new ca("tmp",null,e[0],e.slice(1)))},new at)))),f=new Du(s1.trigger(),s1.trigger(),s1.trigger());null!=p&&rt.and(l,this.displayableReady).handle(function(){f.play.handlers.invoke(p)}),i=Su.Animation(g,f,new Ru(function(){},function(){},function(){}));break;case 3:case 4:switch(r._hx_index){case 0:o=r.atlas,u=r.defaultTile;A=r.info.animation?o.animation.frames[0]:null!=u?Kh.getTile(o,u):Ir.fromColor(0,0);break;case 3:A=r.tile;break;case 4:o=r.style,u=r.size;A=$h.toTile(r.gradients,o.id,o.resolution,u.x,u.y);break;default:A=null}m=Dh.create(new Rh(nl.__cast(A,Ir),null,null,n,this.config.blendMode,this.config.depthTest,null,null,this.config.shadows,this.config.shadows,null,null,null,this.config.anchor));4==(o=this.config.type)._hx_index&&m.get_material().setUVRotation(3.141592653589793*o.style.rotation/180,!0),i=Su.Tile(m,new Eu(s1.trigger(),s1.trigger()),new Fu(function(){},function(){}));break;case 5:var A=r.tile;i=Su.Object(Gu.makeTileObject(r.model.toHmd(),function(e){return A.t},null,st.fromBacking(new it(0,0,0,null))));break;case 6:var x=r.defaultState,m=Fh.create(new xu(r.resource,r.strings,n,this.config.space,this.config.depthTest,this.config.blendMode,this.config.shadows,this.config.rotation,this.config.anchor,null)),w=s1.trigger(),y=Su.Text(m,new Bu(w,s1.trigger(),s1.trigger()),new Tu(function(){},function(){},function(){}));null!=x&&rt.and(l,this.displayableReady).handle(function(){w.handlers.invoke(x)}),i=y;break;case 7:throw new tl("Logic error, should not be able to create instance of an Empty type");case 8:i=Su.Counter(r.element,new Pu(s1.trigger(),s1.trigger(),s1.trigger()),new zu(function(){},function(){},function(){}))}switch(this._instance=i,(o=this._instance)._hx_index){case 0:u=o.triggers,m=o.element;u.show.listen(function(e){null!=e.id?m.show(e.id):null!=e.text&&m.showText(e.text)}),u.update.listen(function(e){null!=e&&m.changeTextStyle(e)}),u.remove.listen(function(){null!=m&&null!=m.parent&&m.parent.removeChild(m)});break;case 2:u=o.triggers,g=o.animator;u.play.listen(function(e){null!=e.name&&g.play(e)}),u.stop.listen(function(e){g.stop(e)}),u.remove.listen(Cn(g,g.dispose));break;case 3:var u=o.triggers,b=o.element;u.show.listen(function(e){var t=s.config.type,t=0==t._hx_index?""==e.id?Ir.fromColor(0,0):Kh.getTile(t.atlas,e.id):null;b.setTile(null==t?Ir.fromColor(0,0):t,n)}),u.remove.listen(Cn(b,b.remove));break;default:throw new tl("Displayable type not implemented")}o=this.config.landscapeType;if(7==this.config.type._hx_index||null==o||7==o._hx_index)this._portraitInstance=this._landscapeInstance=this._instance;else switch(e){case"landscape":this._landscapeInstance=this._instance;break;case"portrait":this._portraitInstance=this._instance}return t&&this.layout(e),l.trigger(null),this._instance},layout:function(e){var t=null!=e?e:Vr.CURRENT.width>Vr.CURRENT.height?"landscape":"portrait",n="landscape"==t,i=this.config.pos,s=null==i?st.fromBacking(new it(0,0,0,null)):i,a=null==(i=this.config.rotation)?st.fromBacking(new it(0,0,0,null)):i;switch(t){case"landscape":var l=this.config.landscapePos,r=this.config.landscapeRotation,o=this.config.landscapeScale,u={pos:null!=l?l:s,rotation:null!=r?r:a,scale:null!=o?o:this.config.scale,instance:this._landscapeInstance};break;case"portrait":u={pos:s,rotation:a,scale:this.config.scale,instance:this._portraitInstance}}var i=this._orientation!=t,h=this.toObject(),i=(i&&(h.flags&=-3,ec.ignoreAllBounds(h),null==u.instance?this.create(e,!1):this._instance=u.instance),this.toObject());this.showInstance(n)?i.flags|=2:i.flags&=-3,0!=(2&i.flags)&&ec.ignoreAllBounds(i,!1),i.x=u.pos.x,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.y=u.pos.y,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.z=u.pos.z,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.setRotation(u.rotation.x,u.rotation.y,u.rotation.z),this._orientation=t,null==i.parent&&null!=h.parent&&h.parent.addChild(i)},showInstance:function(e){var t;return 7==this.config.type._hx_index?e:null==(t=this.config.landscapeType)||7!=t._hx_index||!e},get_instance:function(){var e=this._instance;return this._instance=null==e?this.create(this._orientation,!0):e,this._instance},__class__:bu,__properties__:{get_instance:"get_instance"}},function(e,t,n,i,s,a,l,r,o,u,h,c,_){this.space=null,this.anchor=Me.NONE,this.shadows=!1,this.depthTest=to.LessEqual,this.blendMode=null,this.landscapeRotation=null,this.rotation=null,this.landscapeScale=null,this.scale=1,this.landscapePos=null,this.pos=null,this.landscapeType=null,this.type=e,null!=t&&(this.landscapeType=t),null!=n&&(this.pos=n),null!=i&&(this.landscapePos=i),null!=s&&(this.scale=s),null!=a&&(this.landscapeScale=a),null!=l&&(this.rotation=l),null!=r&&(this.landscapeRotation=r),null!=o&&(this.blendMode=o),null!=u&&(this.depthTest=u),null!=h&&(this.shadows=h),null!=c&&(this.anchor=c),null!=_&&(this.space=_)}),Cu=((i["hacksaw.core.data.DisplayConfig"]=vu).__name__="hacksaw.core.data.DisplayConfig",vu.prototype={__class__:vu},fe["hacksaw.core.data.DisplayableType"]={__ename__:!0,__constructs__:null,Atlas:((R=function(e,t,n,i){return{_hx_index:0,atlas:e,info:t,defaultTile:n,size:i,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="Atlas",R.__params__=["atlas","info","defaultTile","size"],R),AtlasAnimation:((R=function(e,t){return{_hx_index:1,atlases:e,defaultState:t,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="AtlasAnimation",R.__params__=["atlases","defaultState"],R),Spine:((R=function(e,t,n,i,s,a,l){return{_hx_index:2,spine:e,animations:t,useDarkTint:n,usePremultipliedAlpha:i,replaceMeshBounds:s,defaultState:a,skin:l,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="Spine",R.__params__=["spine","animations","useDarkTint","usePremultipliedAlpha","replaceMeshBounds","defaultState","skin"],R),Tile:((R=function(e){return{_hx_index:3,tile:e,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="Tile",R.__params__=["tile"],R),Gradient:((R=function(e,t,n){return{_hx_index:4,gradients:e,style:t,size:n,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="Gradient",R.__params__=["gradients","style","size"],R),Model:((R=function(e,t){return{_hx_index:5,model:e,tile:t,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="Model",R.__params__=["model","tile"],R),Text:((R=function(e,t,n){return{_hx_index:6,resource:e,defaultState:t,strings:n,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="Text",R.__params__=["resource","defaultState","strings"],R),Empty:{_hx_name:"Empty",_hx_index:7,__enum__:"hacksaw.core.data.DisplayableType",toString:o},Counter:((R=function(e){return{_hx_index:8,element:e,__enum__:"hacksaw.core.data.DisplayableType",toString:o}})._hx_name="Counter",R.__params__=["element"],R)}),Su=(Cu.__constructs__=[Cu.Atlas,Cu.AtlasAnimation,Cu.Spine,Cu.Tile,Cu.Gradient,Cu.Model,Cu.Text,Cu.Empty,Cu.Counter],Cu.__empty_constructs__=[Cu.Empty],fe["hacksaw.core.data.DisplayableInstance"]={__ename__:!0,__constructs__:null,Text:((R=function(e,t,n){return{_hx_index:0,element:e,triggers:t,handlers:n,__enum__:"hacksaw.core.data.DisplayableInstance",toString:o}})._hx_name="Text",R.__params__=["element","triggers","handlers"],R),Object:((R=function(e){return{_hx_index:1,object:e,__enum__:"hacksaw.core.data.DisplayableInstance",toString:o}})._hx_name="Object",R.__params__=["object"],R),Animation:((R=function(e,t,n){return{_hx_index:2,animator:e,triggers:t,handlers:n,__enum__:"hacksaw.core.data.DisplayableInstance",toString:o}})._hx_name="Animation",R.__params__=["animator","triggers","handlers"],R),Tile:((R=function(e,t,n){return{_hx_index:3,element:e,triggers:t,handlers:n,__enum__:"hacksaw.core.data.DisplayableInstance",toString:o}})._hx_name="Tile",R.__params__=["element","triggers","handlers"],R),Counter:((R=function(e,t,n){return{_hx_index:4,element:e,triggers:t,handlers:n,__enum__:"hacksaw.core.data.DisplayableInstance",toString:o}})._hx_name="Counter",R.__params__=["element","triggers","handlers"],R)}),ku=(Su.__constructs__=[Su.Text,Su.Object,Su.Animation,Su.Tile,Su.Counter],Su.__empty_constructs__=[],function(e,t){this.id=null,(this.text=null)!=e&&(this.text=e),null!=t&&(this.id=t)}),Mu=((i["hacksaw.core.data.TextState"]=ku).__name__="hacksaw.core.data.TextState",ku.prototype={__class__:ku},function(e){this.id=e}),Iu=((i["hacksaw.core.data.TileState"]=Mu).__name__="hacksaw.core.data.TileState",Mu.prototype={__class__:Mu},function(e,t){this.id=e,this.value=t}),Bu=((i["hacksaw.core.data.CounterState"]=Iu).__name__="hacksaw.core.data.CounterState",Iu.prototype={__class__:Iu},function(e,t,n){this.remove=s1.trigger(),this.update=s1.trigger(),this.show=s1.trigger(),null!=e&&(this.show=e),null!=t&&(this.update=t),null!=n&&(this.remove=n)}),Tu=((i["hacksaw.core.data.TextTriggers"]=Bu).__name__="hacksaw.core.data.TextTriggers",Bu.prototype={__class__:Bu},function(e,t,n){this.onShow=e,this.onUpdate=t,this.onRemove=n}),Eu=((i["hacksaw.core.data.TextHandlers"]=Tu).__name__="hacksaw.core.data.TextHandlers",Tu.prototype={__class__:Tu},function(e,t){this.remove=s1.trigger(),this.show=s1.trigger(),null!=e&&(this.show=e),null!=t&&(this.remove=t)}),Fu=((i["hacksaw.core.data.TileTriggers"]=Eu).__name__="hacksaw.core.data.TileTriggers",Eu.prototype={__class__:Eu},function(e,t){this.onShow=e,this.onRemove=t}),Du=((i["hacksaw.core.data.TileHandlers"]=Fu).__name__="hacksaw.core.data.TileHandlers",Fu.prototype={__class__:Fu},function(e,t,n){this.remove=s1.trigger(),this.stop=s1.trigger(),this.play=s1.trigger(),null!=e&&(this.play=e),null!=t&&(this.stop=t),null!=n&&(this.remove=n)}),Ru=((i["hacksaw.core.data.AnimationTriggers"]=Du).__name__="hacksaw.core.data.AnimationTriggers",Du.prototype={__class__:Du},function(e,t,n){this.onPlay=e,this.onStop=t,this.onRemove=n}),Pu=((i["hacksaw.core.data.AnimationHandlers"]=Ru).__name__="hacksaw.core.data.AnimationHandlers",Ru.prototype={__class__:Ru},function(e,t,n){this.remove=s1.trigger(),this.update=s1.trigger(),this.show=s1.trigger(),null!=e&&(this.show=e),null!=t&&(this.update=t),null!=n&&(this.remove=n)}),zu=((i["hacksaw.core.data.CounterTriggers"]=Pu).__name__="hacksaw.core.data.CounterTriggers",Pu.prototype={__class__:Pu},function(e,t,n){this.onShow=e,this.onUpdate=t,this.onRemove=n}),Qu=((i["hacksaw.core.data.CounterHandlers"]=zu).__name__="hacksaw.core.data.CounterHandlers",zu.prototype={__class__:zu},function(){});(i["hacksaw.core.data.FontList"]=Qu).__name__="hacksaw.core.data.FontList",(i["hacksaw.core.data.GradientStyle"]=ma).__name__="hacksaw.core.data.GradientStyle",ma.prototype={__class__:ma};(n=fe["hacksaw.core.data.SoundEngineMessage"]={__ename__:!0,__constructs__:null,EnterBar:((R=function(e,t,n){return{_hx_index:0,bar:e,bpm:t,signature:n,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="EnterBar",R.__params__=["bar","bpm","signature"],R),SoundPlaying:((R=function(e,t,n,i){return{_hx_index:1,id:e,volume:t,duration:n,instance:i,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="SoundPlaying",R.__params__=["id","volume","duration","instance"],R),SoundStopped:((R=function(e,t){return{_hx_index:2,id:e,instance:t,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="SoundStopped",R.__params__=["id","instance"],R),SequencePlaying:((R=function(e,t,n,i,s){return{_hx_index:3,id:e,pattern:t,bpm:n,signature:i,instance:s,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="SequencePlaying",R.__params__=["id","pattern","bpm","signature","instance"],R),SequenceStopped:((R=function(e,t){return{_hx_index:4,id:e,instance:t,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="SequenceStopped",R.__params__=["id","instance"],R),PoolPlaying:((R=function(e,t,n,i){return{_hx_index:5,id:e,volume:t,duration:n,instance:i,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="PoolPlaying",R.__params__=["id","volume","duration","instance"],R),PoolStopped:((R=function(e,t){return{_hx_index:6,id:e,instance:t,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="PoolStopped",R.__params__=["id","instance"],R),PhraseStart:((R=function(e,t){return{_hx_index:7,bpm:e,signature:t,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="PhraseStart",R.__params__=["bpm","signature"],R),PhraseEnd:{_hx_name:"PhraseEnd",_hx_index:8,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o},FrameUpdate:((R=function(e,t){return{_hx_index:9,group:e,levels:t,__enum__:"hacksaw.core.data.SoundEngineMessage",toString:o}})._hx_name="FrameUpdate",R.__params__=["group","levels"],R)}).__constructs__=[n.EnterBar,n.SoundPlaying,n.SoundStopped,n.SequencePlaying,n.SequenceStopped,n.PoolPlaying,n.PoolStopped,n.PhraseStart,n.PhraseEnd,n.FrameUpdate],n.__empty_constructs__=[n.PhraseEnd];var Vu=fe["hacksaw.core.data.SoundEvent"]={__ename__:!0,__constructs__:null,OnBeat:((R=function(e,t,n,i){return{_hx_index:0,division:e,repeat:t,count:n,delay:i,__enum__:"hacksaw.core.data.SoundEvent",toString:o}})._hx_name="OnBeat",R.__params__=["division","repeat","count","delay"],R),SoundPlaying:((R=function(e,t){return{_hx_index:1,id:e,instance:t,__enum__:"hacksaw.core.data.SoundEvent",toString:o}})._hx_name="SoundPlaying",R.__params__=["id","instance"],R),SoundStopped:((R=function(e,t){return{_hx_index:2,id:e,instance:t,__enum__:"hacksaw.core.data.SoundEvent",toString:o}})._hx_name="SoundStopped",R.__params__=["id","instance"],R),PhraseStart:((R=function(e,t){return{_hx_index:3,bpm:e,signature:t,__enum__:"hacksaw.core.data.SoundEvent",toString:o}})._hx_name="PhraseStart",R.__params__=["bpm","signature"],R),PhraseEnd:{_hx_name:"PhraseEnd",_hx_index:4,__enum__:"hacksaw.core.data.SoundEvent",toString:o},FrameUpdate:((R=function(e,t){return{_hx_index:5,group:e,levels:t,__enum__:"hacksaw.core.data.SoundEvent",toString:o}})._hx_name="FrameUpdate",R.__params__=["group","levels"],R)},Ou=(Vu.__constructs__=[Vu.OnBeat,Vu.SoundPlaying,Vu.SoundStopped,Vu.PhraseStart,Vu.PhraseEnd,Vu.FrameUpdate],Vu.__empty_constructs__=[Vu.PhraseEnd],(i["hacksaw.core.data.SymbolAttachment"]=ga).__name__="hacksaw.core.data.SymbolAttachment",ga.prototype={__class__:ga},{}),Wu=(Ou.__properties__={get_id:"get_id"},Ou.get_id=function(e){return e},(i["hacksaw.core.data.TextInstance"]=fa).__name__="hacksaw.core.data.TextInstance",fa.prototype={__class__:fa},fe["hacksaw.core.data.TextResource"]={__ename__:!0,__constructs__:null,Models:((R=function(e,t,n,i){return{_hx_index:0,models:e,charSpacing:t,tiles:n,align:i,__enum__:"hacksaw.core.data.TextResource",toString:o}})._hx_name="Models",R.__params__=["models","charSpacing","tiles","align"],R),TileCharacters:((R=function(e,t,n,i,s,a){return{_hx_index:1,atlas:e,charSpacing:t,charMap:n,align:i,maxWidth:s,maxHeight:a,__enum__:"hacksaw.core.data.TextResource",toString:o}})._hx_name="TileCharacters",R.__params__=["atlas","charSpacing","charMap","align","maxWidth","maxHeight"],R),FontCharacters:((R=function(e,t,n,i,s,a,l,r){return{_hx_index:2,font:e,style:t,strings:n,align:i,multiline:s,maxWidth:a,maxHeight:l,wordWrap:r,__enum__:"hacksaw.core.data.TextResource",toString:o}})._hx_name="FontCharacters",R.__params__=["font","style","strings","align","multiline","maxWidth","maxHeight","wordWrap"],R),Images:((R=function(e){return{_hx_index:3,tiles:e,__enum__:"hacksaw.core.data.TextResource",toString:o}})._hx_name="Images",R.__params__=["tiles"],R)}),Nu=(Wu.__constructs__=[Wu.Models,Wu.TileCharacters,Wu.FontCharacters,Wu.Images],Wu.__empty_constructs__=[],{}),Gu=(Nu.fromDynamic=function(e){return e},(i["hacksaw.core.data.TextStyleBacking"]=Aa).__name__="hacksaw.core.data.TextStyleBacking",Aa.prototype={__class__:Aa},(i["hacksaw.core.data.TierDef"]=xa).__name__="hacksaw.core.data.TierDef",xa.prototype={__class__:xa},{}),Uu=(Gu.makeTileObject=function(i,s,a,l){if(0==i.header.models.length)throw tl.thrown("This file does not contain any model");l=null==l?st.fromBacking(new it(0,0,0,null)):l;var r=i.header.models[0];return Dh.create(new Rh(null,null,null,null,null,null,function(e){var t=i.makePrimitive(r),n=new Co(t,Gu.makeTileMaterial(i,r,r.materials[0],s,a));return t.alloc(Vr.CURRENT),t.addTangents(),n.setRotation(l.x,l.y,l.z),n},!1,null,null,null,null,null,null))},Gu.makeTileMaterial=function(e,t,n,i,s){n=e.header.materials[n],i=Ku.create(i(n.diffuseTexture),null==s?null:s(n.normalMap));if(i.name=n.name,null!=n.specularTexture)throw tl.thrown("Specular texture not implemented for tile models");i.set_blendMode(n.blendMode),i.model=e.resource;s=uo.current.loadMaterialProps(i);return null==s&&(s=i.getDefaultModelProps()),i.set_props(s),i},(i["hacksaw.core.data.Win"]=wa).__name__="hacksaw.core.data.Win",wa.prototype={__class__:wa},{}),Lu=(Uu._new=function(e){return e},(i["hacksaw.core.filters.h2d.ColorFilter"]=ya).__name__="hacksaw.core.filters.h2d.ColorFilter",ya._SHADER=null,ya.__super__=W,ya.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_color:function(){return this.color__},set_color:function(e){return this.color__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.color__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:ya,__properties__:e(W.prototype.__properties__,{set_color:"set_color",get_color:"get_color",set_texture:"set_texture",get_texture:"get_texture"})}),(i["hacksaw.core.filters.h2d.MotionBlurShader"]=ba).__name__="hacksaw.core.filters.h2d.MotionBlurShader",ba._SHADER=null,ba.__super__=W,ba.prototype=e(W.prototype,{get_samples:function(){return this.samples__},set_samples:function(e){return this.constModified=!0,this.samples__=e},get_direction:function(){return this.direction__},set_direction:function(e){return this.direction__=e},get_intensity:function(){return this.intensity__},set_intensity:function(e){return this.intensity__=e},get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},updateConstants:function(e){this.constBits=0;var t=this.samples__;if(t>>>8!=0)throw tl.thrown("samples is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.samples__;case 2:return this.direction__;case 3:return this.intensity__;case 4:return this.texture__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.samples__;case 2:return this.direction__;case 3:return this.intensity__}return 0},__class__:ba,__properties__:e(W.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture",set_intensity:"set_intensity",get_intensity:"get_intensity",set_direction:"set_direction",get_direction:"get_direction",set_samples:"set_samples",get_samples:"get_samples"})}),function(e){Hr.call(this,e)}),ju=((i["hacksaw.core.h3d.Element"]=Lu).__name__="hacksaw.core.h3d.Element",Lu.__super__=Hr,Lu.prototype=e(Hr.prototype,{update:function(e){tt.update(this.tweenObject,e)},__class__:Lu}),function(e,t){this._endValue=0,this._startValue=0,this._valueTween=new Et(0,0,0,1),this._updateTrigger=s1.trigger(),Lu.call(this);var n=new It(this);tt.init(n,null),this.tweenObject=n,this.updateSignal=this._updateTrigger,this.prefix=e.prefix,this.suffix=e.suffix,this._countupConfig=e,this._textConfig=t,this._textElement=Fh.create(t),this.addChild(this._textElement),null!=this._countupConfig.initialValue?this.countTo(this._countupConfig.initialValue):this._textElement.flags&=-3}),Hu=((i["hacksaw.core.h3d.CountupElement"]=ju).__name__="hacksaw.core.h3d.CountupElement",ju.__super__=Lu,ju.prototype=e(Lu.prototype,{countTo:function(e,t,n,i){null==n&&(n=!0),null==t&&(t=0);var s=this;if(this._valueTween.get_isTweening()&&Tt.cancel(this._valueTween),this._countDoneTrigger=new qy,this._centerReset=n,this._startValue=this._endValue,this._endValue=e,0==t||this._valueTween.x==e){this._valueTween.x=e;var a=""+(null!=(m=this.prefix)?m:""),l=!this._countupConfig.showDecimals||this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue?0:this._countupConfig.decimalDigits,r=this._countupConfig.decimalSeparator,o=this._countupConfig.showDecimals&&this._countupConfig.showMinimumDecimals&&0<this._countupConfig.decimalDigits&&!(this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue),u=(null==o&&(o=!1),null==r&&(r="."),""+Math.round(this._valueTween.x*Math.pow(10,l<=0?0:l))),h=l-u.length;if(0<=h){for(var c=[],_=0;_<h;)c.push(_++);var d="0"+r+il.reduce(c,function(e,t){return"0"+e},u),p=o?Wy.trimCharsRight(Wy.trimCharsRight(d,"0"),r):d}else p=0<l?(d=""+Jn.substr(u,0,u.length-l)+r+Jn.substr(u,u.length-l,null),o?Wy.trimCharsRight(Wy.trimCharsRight(d,"0"),r):d):u;var m=this.suffix;this._textElement.showText(a+p+(null!=m?m:""),n),l=new Zy(new Yy(!0))}else l=Tt.tween(this._valueTween,new nt(st.fromBacking(new it(e,0,null,null)),null,null,t,null,i,null,null,null,null,null));return l.handle(function(e){s._countDoneTrigger.trigger(e)}),this._countDoneTrigger},cancel:function(e){Tt.cancel(this._valueTween,e=null==e?!1:e)},skip:function(){Tt.cancel(this._valueTween,!0);var e=this._countDoneTrigger;null!=e&&e.trigger(!0)},dispose:function(){this._textElement.dispose()},getDuration:function(){return Tt.getDuration(this._valueTween)},update:function(e){Lu.prototype.update.call(this,e);var t=this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue,n=!this._countupConfig.showDecimals||this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue?0:this._countupConfig.decimalDigits,i=this._countupConfig.decimalSeparator;if(null==(c=this._countupConfig.showMinimumDecimals)&&(c=!1),null==i&&(i="."),0<=(d=n-(_=""+Math.round(this._valueTween.x*Math.pow(10,n<=0?0:n))).length)){for(var s=[],a=0;a<d;)s.push(a++);var l="0"+i+il.reduce(s,function(e,t){return"0"+e},_),r=c?Wy.trimCharsRight(Wy.trimCharsRight(l,"0"),i):l}else r=0<n?(l=""+Jn.substr(_,0,_.length-n)+i+Jn.substr(_,_.length-n,null),c?Wy.trimCharsRight(Wy.trimCharsRight(l,"0"),i):l):_;if(Tt.update(this._valueTween,e),this._countupConfig.showDecimals&&this._countupConfig.showMinimumDecimals&&!t){if(null==(i=this._countupConfig.decimalSeparator)&&(i="."),0<=(d=n-(_=""+Math.round(this._valueTween.x*Math.pow(10,n<=0?0:n))).length)){for(s=[],a=0;a<d;)s.push(a++);h="0"+i+il.reduce(s,function(e,t){return"0"+e},_)}else h=0<n?""+Jn.substr(_,0,_.length-n)+i+Jn.substr(_,_.length-n,null):_;if(null==(i=this._countupConfig.decimalSeparator)&&(i="."),0<=(d=n-(_=""+Math.round(this._endValue*Math.pow(10,n<=0?0:n))).length)){for(s=[],a=0;a<d;)s.push(a++);u="0"+i+il.reduce(s,function(e,t){return"0"+e},_)}else u=0<n?""+Jn.substr(_,0,_.length-n)+i+Jn.substr(_,_.length-n,null):_;h=h==u}else h=!1;n=!this._countupConfig.showDecimals||this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue?0:this._countupConfig.decimalDigits,i=this._countupConfig.decimalSeparator;if(null==(c=this._countupConfig.showDecimals&&this._countupConfig.showMinimumDecimals&&0<this._countupConfig.decimalDigits&&!(this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue))&&(c=!1),null==i&&(i="."),0<=(d=n-(_=""+Math.round(this._valueTween.x*Math.pow(10,n<=0?0:n))).length)){for(s=[],a=0;a<d;)s.push(a++);var l="0"+i+il.reduce(s,function(e,t){return"0"+e},_),o=c?Wy.trimCharsRight(Wy.trimCharsRight(l,"0"),i):l}else o=0<n?(l=""+Jn.substr(_,0,_.length-n)+i+Jn.substr(_,_.length-n,null),c?Wy.trimCharsRight(Wy.trimCharsRight(l,"0"),i):l):_;t=this._textElement;if(null!=t&&t.update(e),r!=o){var u=this._centerReset&&(h||r.length!=o.length),t=this._textElement,h=""+(null!=(e=this.prefix)?e:"");if(null!=o)p=o;else{var c,_,d,n=!this._countupConfig.showDecimals||this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue?0:this._countupConfig.decimalDigits,i=this._countupConfig.decimalSeparator;if(null==(c=this._countupConfig.showDecimals&&this._countupConfig.showMinimumDecimals&&0<this._countupConfig.decimalDigits&&!(this._countupConfig.showMinimumDecimals&&Math.floor(this._startValue)==this._startValue&&Math.floor(this._endValue)==this._endValue))&&(c=!1),null==i&&(i="."),0<=(d=n-(_=""+Math.round(this._valueTween.x*Math.pow(10,n<=0?0:n))).length)){for(s=[],a=0;a<d;)s.push(a++);var l="0"+i+il.reduce(s,function(e,t){return"0"+e},_),p=c?Wy.trimCharsRight(Wy.trimCharsRight(l,"0"),i):l}else p=0<n?(l=""+Jn.substr(_,0,_.length-n)+i+Jn.substr(_,_.length-n,null),c?Wy.trimCharsRight(Wy.trimCharsRight(l,"0"),i):l):_}e=this.suffix;t.showText(h+p+(null!=e?e:""),u),this._updateTrigger.handlers.invoke(o)}},clear:function(){var e=this._valueTween;Tt.cancel(e),e._active=[],e._scheduled=[]},clone:function(e){var t=this._countupConfig.clone();return t.initialValue=this._valueTween.x,new ju(t,this._textConfig)},get_value:function(){return this._valueTween.x},__class__:ju,__properties__:e(Lu.prototype.__properties__,{get_value:"get_value"})}),function(e,t,n,i,s,a,l){this.showMinimumDecimals=!1,this.decimalDigits=2,this.decimalSeparator=".",this.prefix=null,this.suffix=null,this.showDecimals=!1,(this.initialValue=null)!=e&&(this.initialValue=e),null!=t&&(this.showDecimals=t),null!=n&&(this.suffix=n),null!=i&&(this.prefix=i),null!=s&&(this.decimalSeparator=s),null!=a&&(this.decimalDigits=a),null!=l&&(this.showMinimumDecimals=l)}),Yu=((i["hacksaw.core.h3d.NumberCountupConfig"]=Hu).__name__="hacksaw.core.h3d.NumberCountupConfig",Hu.prototype={clone:function(){return new Hu(this.initialValue,this.showDecimals,this.suffix,this.prefix,this.decimalSeparator,this.decimalDigits,this.showMinimumDecimals)},__class__:Hu},function(e){this._queue=[],this._activeAnimations=new at,this._doneSignal=s1.trigger(),this.duration=null,this._config=e,this.animations=this._config.animations}),Zu=((i["hacksaw.core.h3d.OverlayAnimator"]=Yu).__name__="hacksaw.core.h3d.OverlayAnimator",Yu.prototype={play:function(e,t){null==t&&(t=0);var n,i=e.name;if(!Object.prototype.hasOwnProperty.call(this.animations.h,i)){for(var s='Cannot play animation "'+i+'". Make sure animation is configured. Available animations: ',a=zy.tuples(this.animations),l=new Array(a.length),r=0,o=a.length;r<o;){var u=r++;l[u]=a[u]._0}return Vi.message(s+JSON.stringify(l,null," ")),new Zy(new Yy(!0))}switch((r=this.animations.h[i])._hx_index){case 0:n=wu.Tile(r.anim);break;case 1:n=wu.Skin(r.anim);break;case 2:n=wu.Spine(r.anim)}s=s1.nextTime(this._doneSignal,function(e){return null==e||e.type==n});switch(n._hx_index){case 0:(r=n.anim).tile=r.animation.animationData.frames[0],r.name=null!=i?i:"default";break;case 1:throw new tl("Skin animation not implemented for Animator");case 2:n.anim.name=null!=i?i:"default"}if(0<t)this._queue.push(new Zu(t,n,e));else{var h=this.obtainAnimationObject(n);switch((r=h.animationType)._hx_index){case 0:this.playTileAnimation(r.anim,n,e,h.scaleBefore);break;case 1:throw new tl("Skin animation not implemented for Animator");case 2:this.playSpineAnimation(r.anim,n,e,h.scaleBefore)}}return rt.map(s,function(e){e=null!=e?e.animationCompleted:null;return null!=e&&e})},stop:function(e){var t,r,o=this;switch((e=null==e?Yh.All(null):e)._hx_index){case 0:break;case 1:if(Object.prototype.hasOwnProperty.call(this._activeAnimations.h,e.name))break;return rt.NOISE}switch(e._hx_index){case 0:case 1:t=e.stopBehavior}switch(e._hx_index){case 0:r=at.createCopy(this._activeAnimations.h);break;case 1:var n=e.name;(d=new at).h[n]=this._activeAnimations.h[n],r=d}for(var n=[],i=r.h,s=Object.keys(i),a=s.length,l=0;l<a;){var u,h=i[s[l++]];switch(h._hx_index){case 0:var c,_,d=h.anim;if(null==t)c=Vh.Default;else switch(t._hx_index){case 1:c=Vh.Default;break;case 0:case 2:c=Vh.Immediate}if(null==t)_=null;else switch(t._hx_index){case 0:_=Qh.CurrentFrame;break;case 1:case 2:_=Qh.LastFrame}u=d.animator.stop(c,_);break;case 1:throw new tl("Skin animation not implemented for Animator");case 2:var p,m=h.anim;if(null==t)p=yh.Immediate;else switch(t._hx_index){case 0:p=yh.Immediate;break;case 1:p=yh.End(t.duration);break;case 2:p=yh.SkipToEnd}u=m.element.get_animator().stop(null,m.animation.animationName,p)}n.push(u)}var g=rt.inParallel(n);return g.handle(function(){for(var e=zy.tuples(r),t=[],n=0;n<e.length;){var i=e[n];++n,o._activeAnimations.h[i._0]==i._1&&t.push(i)}for(var s=new Array(t.length),n=0,a=t.length;n<a;){var l=n++;s[l]=t[l]._0}il.each(s,function(e){var t=o._activeAnimations;Object.prototype.hasOwnProperty.call(t.h,e)&&delete t.h[e]})}),rt.noise(g)},cancel:function(){for(var e=this._activeAnimations.h,t=Object.keys(e),n=t.length,i=0;i<n;){var s=e[t[i++]];if(null!=s)switch(s._hx_index){case 0:s.anim.animator.cancel();break;case 1:throw new tl("Skin animation not implemented for Animator");case 2:var a=s.anim;a.element.get_animator().cancel(a.element.skeleton)}}var l=this._config.object.parent;if(null!=l)for(var r=l.children,o=0,u=r.length;o<u;){var h=r[o++],c=null!=h?h.name:null;null!=c&&Ae.startsWith(c,"Anim|")&&null!=h&&null!=h.parent&&h.parent.removeChild(h)}this.duration=0,this._queue=[],this._activeAnimations.h=Object.create(null),this._doneSignal.handlers.invoke(null)},update:function(t){for(var e=this._queue,n=[],i=0;i<e.length;){var s,a=e[i];if(++i,a.delay-=t,a.delay<=0){var l=a.animationType,r=a.animationState,o=this.obtainAnimationObject(l),u=o.animationType;switch(u._hx_index){case 0:this.playTileAnimation(u.anim,l,r,o.scaleBefore);break;case 1:throw new tl("Skin animation not implemented for Animator");case 2:this.playSpineAnimation(u.anim,l,r,o.scaleBefore)}s=!1}else s=!0;s&&n.push(a)}if(this._queue=n,0<Object.keys(this._activeAnimations.h).length){for(var n=[],h=this._activeAnimations.h,c=Object.keys(h),_=c.length,d=0;d<_;){switch((p=h[c[d++]])._hx_index){case 0:m=p.anim.animator;break;case 1:case 2:m=null}n.push(m)}for(var p,m=il.distinct(il.filterNull(n)),n=[],h=this._activeAnimations.h,_=(c=Object.keys(h)).length,d=0;d<_;){switch((p=h[c[d++]])._hx_index){case 0:case 1:g=null;break;case 2:g=p.anim.element}n.push(g)}var g=il.distinct(il.filterNull(n));il.each(m,function(e){e.update(t)}),il.each(g,function(e){e.update(t)})}},dispose:function(){this.cancel(),this.animations.h=Object.create(null),this.animations=null,this._activeAnimations.h=Object.create(null)},setSpeed:function(e){for(var t=this._activeAnimations.h,n=Object.keys(t),i=n.length,s=0;s<i;){var a=t[n[s++]];switch(a._hx_index){case 0:a.anim.animation.fps=e;break;case 1:throw new tl("Skin animation not implemented for Animator");case 2:a.anim.element.get_animator().setTimescale(e)}}},stencilActiveAnimations:function(e){null==e&&(e=!0);for(var t=this._config.object.getMeshes()[0],n=e&&null!=t?t.material.passes.stencil:null,i=this._activeAnimations.h,s=Object.keys(i),a=s.length,l=0;l<a;){var r=i[s[l++]];switch(r._hx_index){case 0:r.anim.element.get_mesh().material.passes.stencil=n;break;case 1:throw new UA(null,null,{fileName:"hacksaw/core/h3d/OverlayAnimator.hx",lineNumber:310,className:"hacksaw.core.h3d.OverlayAnimator",methodName:"stencilActiveAnimations"});case 2:r.anim.element.mesh.material.passes.stencil=n}}},get_activeAnimations:function(){return this._activeAnimations},get_object:function(){return this._config.object},playTileAnimation:function(i,s,a,l){var r=this._config.object,o=i.name,u=i.animation,e=(u.replace&&(r.flags&=-3),i.element.flags|=2,u.overlay&&(e=u.offset,(t=i.element).x=(e=null!=e?e:{x:0,y:0,z:.01}).x,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.y=e.y,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.z=e.z,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags))&&(t.flags|=262144),i.animator),h=(this.setTileAnimationPlaybackArgs(u,a),u.remainAfterReplace||!u.replace),t=rt.map(e.play(u),function(e){var t=u.overlay&&!u.loop?h:null,n=u.overlay&&!u.keepOverlayVisible;return{id:s,animationName:o,baseElement:r,animationElement:nl.__cast(i.element,Hr),animationMesh:nl.__cast(i.element.get_mesh(),Hr),shouldLoop:u.loop,scaleBefore:l,baseVisibility:t,removeOverlay:n,animationCompleted:e}});return this.duration=e.get_duration(),this._activeAnimations.h[o]=wu.Tile(i),t.handle(function(e){if(e.animationCompleted&&e.shouldLoop){var t=a.loopStartPos;switch(t._hx_index){case 0:i=0;break;case 1:i=u.animationData.frames.length-1;break;case 2:var n=t.rate,i=0*(1-(n=n<=0?0:.99<=n?.99:n))+u.animationData.frames.length*n|0;break;case 3:throw new tl("Start animation pos at current rate not implemented");case 4:case 5:i=u.startFrame}u.startFrame=i}}),t.handle(Cn(this,this.handleAnimationComplete)),rt.noise(t)},playSpineAnimation:function(t,n,e,i){for(var s=this._config.object,a=t.animation,l=t.name,r=(a.replace&&(s.flags&=-3),t.element.flags|=2,a.overlay&&(u=null!=(c=a.offset)?c:{x:0,y:0,z:.01},(_=t.element).x=u.x,_.flags|=1,0!=(131072&_.flags)&&(_.flags|=262144),_.y=u.y,_.flags|=1,0!=(131072&_.flags)&&(_.flags|=262144),_.z=u.z,_.flags|=1,0!=(131072&_.flags)&&(_.flags|=262144),_.flags|=1,0!=(131072&_.flags))&&(_.flags|=262144),t.element.get_animator()),o=a.remainAfterReplace||!a.replace,u=r.play(a),h=r.getLastQueuedTrackEntry(a.trackIndex),c=(this.setSpineAnimationPlaybackArgs(h,e),t.extraAnimations),_=null!=c?il.filterNull(c):null,d=null!=_?_:[],p=(il.each(d,function(e){r.play(e)}),new Array(d.length)),m=0,g=d.length;m<g;){var f=m++;p[f]=d[f].loop}var A=-1!=p.indexOf(!0),e=rt.map(u,function(e){return{id:n,animationName:l,baseElement:s,animationElement:nl.__cast(t.element,Hr),animationMesh:nl.__cast(t.element.mesh,Hr),shouldLoop:h.loop||A,scaleBefore:i,baseVisibility:a.overlay&&!h.loop?o:null,removeOverlay:a.overlay&&!a.keepOverlayVisible,animationCompleted:e}});return this.duration=r.getCurrentDuration(),this._activeAnimations.h[l]=wu.Spine(t),e.handle(Cn(this,this.handleAnimationComplete)),rt.noise(u)},handleAnimationComplete:function(e){var t,n;null!=e.baseVisibility&&(n=e.baseElement,e.baseVisibility?n.flags|=2:n.flags&=-3),e.removeOverlay&&null!=(n=e.animationElement)&&null!=n.parent&&n.parent.removeChild(n),null!=e.scaleBefore&&(n=e.animationMesh,t=e.scaleBefore.x,n.scaleX=null!=t?t:e.animationMesh.scaleX,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),t=e.scaleBefore.y,(n=e.animationMesh).scaleY=null!=t?t:e.animationMesh.scaleY,n.flags|=1,0!=(131072&n.flags))&&(n.flags|=262144),e.shouldLoop||(t=e.animationName,n=this._activeAnimations,Object.prototype.hasOwnProperty.call(n.h,t)&&delete n.h[t]),this._doneSignal.handlers.invoke({type:e.id,animationCompleted:e.animationCompleted})},obtainAnimationObject:function(e){var t;switch(e._hx_index){case 0:case 1:case 2:t=e.anim.name}var n=this._activeAnimations.h[t];if(null!=n)return{animationType:n,scaleBefore:null};switch(e._hx_index){case 0:var i=this.setupTileAnimation(e.anim);return{animationType:wu.Tile(i.anim),scaleBefore:i.scaleBefore};case 1:throw new tl("Skin animation not implemented");case 2:i=this.setupSpineAnimation(e.anim);return{animationType:wu.Spine(i.anim),scaleBefore:i.scaleBefore}}},setupSpineAnimation:function(e){var t=this._config.object,n=e.animation,i=e.name,s="Anim|"+i,a=nl.__cast(t.parent.getObjectByName(s),bh),a=(null!=a&&null!=a.parent&&a.parent.removeChild(a),s=n.overlay?(a=null!=(a=null!=(a=e.element)?a.clone():null)?a:nl.__cast(t.clone(),bh),this.initializeOverlayElement(a,s,n.replace,n.keepStencil),a):nl.__cast(t,bh),n.overlay?null:st.fromBacking(new it(s.mesh.scaleX,s.mesh.scaleY,null,null)));return s.scaleX=n.scale,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.scaleY=n.scale,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),{anim:new ca(i,s,n,e.extraAnimations),scaleBefore:a}},setupTileAnimation:function(e){var t,n,i=this._config.object,s=i.parent,a=e.animation.clone(),l=e.name,r=(s=a.overlay||!e.isSymbol?null!=(r=nl.__cast(s.getObjectByName(s="Anim|"+l),Dh))?r:(r=Dh.create(new Rh(e.tile,null,null,null,a.blendMode,a.depthTest,null,null,a.shadows,a.shadows,a.animationData.width,a.animationData.height,null,null)),this.initializeOverlayElement(r,s,a.replace,a.keepStencil),r):nl.__cast(i,Dh),a.overlay?null:st.fromBacking(new it(s.get_mesh().scaleX,s.get_mesh().scaleY,null,null)));return(a.resetScale||a.overlay)&&(i=a.animationData.width*a.scale|0,t=a.animationData.height*a.scale|0,(n=s.get_mesh()).scaleX=i/sl.REFERENCE_SIZE,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),(n=s.get_mesh()).scaleY=t/sl.REFERENCE_SIZE,n.flags|=1,0!=(131072&n.flags))&&(n.flags|=262144),{anim:new _a(l,new zh(nl.__cast(s.getMaterials()[0],Ku)),e.tile,s,a,!1),scaleBefore:r}},initializeOverlayElement:function(e,t,n,i){var s=this._config.object,a=s.parent,l=e.getMeshes()[0],t=(e.name=t,a.addChild(e),s.getMeshes()[0]),a=null!=t?t.material.passes.stencil:null;i&&null!=a&&(l.material.passes.stencil=a)},setSpineAnimationPlaybackArgs:function(e,t){var n,i=t.endPos;switch(i._hx_index){case 0:e.animationEnd=0;break;case 1:e.animationEnd=e.animation.duration;break;case 2:var s=i.rate;e.animationEnd=0*(1-s)+e.animation.duration*s;break;case 3:throw new tl("End animation pos at current rate not implemented");case 4:break;case 5:e.trackEnd=e.animationEnd}switch(t.loopStartPos._hx_index){case 0:case 1:case 2:n=!0;break;case 3:throw new tl("Start animation pos at current rate not implemented");case 4:n=e.loop;break;case 5:n=!1}switch(e.loop=n,(i=t.loopStartPos)._hx_index){case 2:n=0*(1-(s=i.rate))+e.animation.duration*s;break;case 3:throw new tl("Start animation pos at current rate not implemented");case 0:case 1:case 4:case 5:n=0}switch(e.animationStart=n,(i=t.startPos)._hx_index){case 2:var a=0*(1-(s=i.rate))+e.animation.duration*s,l=e.animationEnd;null==l&&(l=1),n=a<=0?0:l<=a?l:a;break;case 3:throw new tl("Start animation pos at current rate not implemented");case 0:case 4:n=0;break;case 1:case 5:n=e.animationEnd}e.trackTime=n,e.trackTime-=e.animationStart},setTileAnimationPlaybackArgs:function(e,t){var n=t.startPos;switch(n._hx_index){case 0:s=e.startFrame=0;break;case 1:s=e.startFrame=e.animationData.frames.length-1;break;case 2:var i=a=n.rate,s=e.startFrame=0*(1-(i=a<=0?0:.99<=a?.99:a))+e.animationData.frames.length*i|0;break;case 3:throw new tl("Start animation pos at current rate not implemented");case 4:s=e.startFrame;break;case 5:e.resetFrame=Qh.Original,s=e.startFrame=-1}switch(t.loopStartPos._hx_index){case 0:case 1:e.loop=!0;break;case 2:throw new tl("Loop animation start pos at rate not implemented");case 3:throw new tl("Loop animation start pos at current rate not implemented");case 4:break;case 5:e.loop=!1}switch((n=t.endPos)._hx_index){case 0:e.endFrame=0,e.resetFrame=Qh.FirstFrame;break;case 1:e.endFrame=e.animationData.frames.length-1,e.resetFrame=Qh.LastFrame;break;case 2:var a,i=a=n.rate;e.endFrame=0*(1-(i=a<=0?0:.99<=a?.99:a))+e.animationData.frames.length*i|0,e.resetFrame=Qh.AtFrame(e.endFrame);break;case 3:throw new tl("End animation pos at current rate not implemented");case 4:break;case 5:e.resetFrame=Qh.Original}-1==s&&(e.startFrame=e.endFrame+1)},__class__:Yu,__properties__:{get_object:"get_object",get_activeAnimations:"get_activeAnimations"}},function(e,t,n){this.delay=e,this.animationType=t,this.animationState=n}),Xu=((i["hacksaw.core.h3d.AnimationQueueItem"]=Zu).__name__="hacksaw.core.h3d.AnimationQueueItem",Zu.prototype={__class__:Zu},function(e,t){this.animations=null,this.object=e,null!=t&&(this.animations=t)}),qu=((i["hacksaw.core.h3d.AnimatorConfig"]=Xu).__name__="hacksaw.core.h3d.AnimatorConfig",Xu.prototype={__class__:Xu},(i["hacksaw.core.h3d.SymbolBase"]=va).__name__="hacksaw.core.h3d.SymbolBase",va.prototype={getFirstMaterial:function(){var e=this.object.object.getMaterials()[0];return null!=e?e:null},getTarget:function(e){var t;switch(e._hx_index){case 0:t=this.object;break;case 1:t=this.symbolObject;break;case 2:t=this.getLayer(e.id)}return t},getLayer:function(t){var e=this.object.object.find(function(e){return e.name=="Anim|"+t?e:null}),e=null!=e?(e=new It(e),tt.init(e,null),e):null;return e},attach:function(e){var t=this._attachments.get(e.id),n=null!=t?t.element:null;null!=n&&null!=n.parent&&n.parent.removeChild(n);n=null!=(t=e.element)?t:e.createElement(),t=e.pos;null!=t&&(n.x=t.x,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.y=t.y,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.z=t.z,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.flags|=1,0!=(131072&n.flags))&&(n.flags|=262144),this.object.addChild(n),this._attachments.set(e.id,new ga(null,n,e.id,e.pos))},moveAttachments:function(e){il.each(zy.values(this._attachments),Cn(e,e.attach)),this._attachments.clear()},getAttachment:function(e){return this._attachments.get(e)},reset:function(){this.resetBlur(),tt.resetTween(this.object),this.object.set_visible(!0),this.flags=0,this.velocity=0,this._lastSpeed=0,il.each(zy.values(this._attachments),function(e){e=e.element;null!=e&&null!=e.parent&&e.parent.removeChild(e)}),this._attachments.clear()},resetBlur:function(){var e;null!=this._preBlurTile&&null!=(e=this.getFirstMaterial())&&(e.setDiffuse(this._preBlurTile),this._preBlurTile=null,this.velocity=0,this._lastSpeed=0)},update:function(e){for(var t=this.animator,n=(null!=t&&t.update(e),tt.update(this.object,e),tt.update(this.symbolObject,e),this._attachments.iterator());n.hasNext();)n.next().element.update(e);this.updateBlur()},updateBlur:function(){var e,t=Math.abs(this.velocity)/this.maxBlurSpeed,t=Math.floor(this.blurTiles.length*(t<0?0:1<t?1:t)),n=this.blurTiles.length-1,n=t<0?0:n<t?n:t;0<n?null!=(t=this.getFirstMaterial())&&(e=this._preBlurTile,this._preBlurTile=null==e?this.tile:e,null!=(e=this.blurTiles[n]))&&t.setDiffuse(e):null!=this._preBlurTile&&this.resetBlur(),this._lastSpeed=this.velocity},get_attachments:function(){return this._attachments},__class__:va,__properties__:{get_attachments:"get_attachments"}},fe["hacksaw.core.h3d.PresentationTarget"]={__ename__:!0,__constructs__:null,All:{_hx_name:"All",_hx_index:0,__enum__:"hacksaw.core.h3d.PresentationTarget",toString:o},Symbol:{_hx_name:"Symbol",_hx_index:1,__enum__:"hacksaw.core.h3d.PresentationTarget",toString:o},Layer:((R=function(e){return{_hx_index:2,id:e,__enum__:"hacksaw.core.h3d.PresentationTarget",toString:o}})._hx_name="Layer",R.__params__=["id"],R)}),Ku=(qu.__constructs__=[qu.All,qu.Symbol,qu.Layer],qu.__empty_constructs__=[qu.All,qu.Symbol],(i["hacksaw.core.h3d.SymbolObject"]=Ca).__name__="hacksaw.core.h3d.SymbolObject",Ca.fromSpine=function(e,t,n,i,s,a,l,r){e=bh.create(new Sh(e,null,i=null==i?1:i,wr.Alpha,null,null,null,null,null,s,a=null==a?!1:a,l=null==l?!1:l,null,null)),i=new It(e);return tt.init(i,null),new Ca(i,null,t,n,{x:0|e.skeleton.data.width,y:0|e.skeleton.data.height},r)},Ca.addStencil=function(e){var e=e.passes,t=new co;t.setFunc(to.Equal,1,1,0),e.stencil=t},Ca.__super__=va,Ca.prototype=e(va.prototype,{reset:function(){va.prototype.reset.call(this),this.presented=[],this.set_stenciled(!1),this.animator.cancel(),this.restingZPosition=0,this.object.setPosition(0,0,0),this.object.setRotation(0,0,0),this.object.setScale(1);for(var e=0,t=this.symbolObject.getMaterials();e<t.length;){var n=t[e];++e,n.mshader.color__.x=1,n.mshader.color__.y=1,n.mshader.color__.z=1,n.mshader.color__.w=1}tt.returnHome(this.symbolObject),this.symbolObject.set_visible(!0);for(e=0,t=this.object.getMeshes();e<t.length;)t[e++].flags&=-513;var i,s=this.symbolObject.object,s=s instanceof Dh?s:null;null!=s&&(s.get_material().setDiffuse(this.tile,0),s.get_material().setDiffuse(this.tile2,1),null!=this._tileDimensions)&&(s.get_material().setFixedWidth(this._tileDimensions.x),s.get_material().setFixedHeight(this._tileDimensions.y),(i=s.get_mesh()).scaleX=this._tileDimensions.x/sl.REFERENCE_SIZE,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),(i=s.get_mesh()).scaleY=this._tileDimensions.y/sl.REFERENCE_SIZE,i.flags|=1,0!=(131072&i.flags))&&(i.flags|=262144)},clone:function(){for(var e=this.symbolObject.clone(),t=this.getFirstMaterial(),n=0,i=e.getMaterials();n<i.length;){var s,a=i[n];++n,null!=a.name&&-1!=a.name.indexOf("SpineClippingMat")||(null!=t.passes.stencil&&Ca.addStencil(a),s=t.castShadows&&t.receiveShadows,a.set_castShadows(s),a.set_receiveShadows(s),a.set_blendMode(t.blendMode),a.passes.set_depthTest(t.passes.depthTest),a.passes.set_culling(t.passes.culling),a.set_normalMap(t.get_normalMap()),a.mshader.specularAmount__=t.mshader.specularAmount__,a.mshader.specularPower__=t.mshader.specularPower__)}e=new Ca(e,this.tile,this.id,this.animator.animations,this._tileDimensions);return e.flags=this.flags,e.tile2=this.tile2,e.blurTiles=this.blurTiles,e.maxBlurSpeed=this.maxBlurSpeed,e.restingZPosition=this.restingZPosition,e.size=this.size,e},setAlpha:function(e){for(var t=this.object.getMaterials(),n=0;n<t.length;){var i=t[n++].mshader.color__;null!=i&&(i.w=e)}},set_stenciled:function(e){for(var t=0,n=this.object.getMaterials();t<n.length;){var i=n[t];++t,e?this.stenciled||Ca.addStencil(i):i.passes.stencil=null}return this.stenciled=e},__class__:Ca,__properties__:e(va.prototype.__properties__,{set_stenciled:"set_stenciled"})}),(i["hacksaw.core.h3d.ModelTile"]=Sa).__name__="hacksaw.core.h3d.ModelTile",Sa.prototype={__class__:Sa},function(e){this._uvRotationFit=0,this._uvRotation=0,this._diffuseTileProps=new Je,this.noShader=!1,Bn.call(this,e)}),Ju=((i["hacksaw.core.h3d.mat.TileMaterial"]=Ku).__name__="hacksaw.core.h3d.mat.TileMaterial",Ku.create=function(e,t){var n=new Ku;return null!=e&&n.setDiffuse(e),null!=t&&n.set_normalMap(t.innerTex),n.set_props(n.getDefaultProps()),n},Ku.__super__=Bn,Ku.prototype=e(Bn.prototype,{setDiffuse:function(e,t){null==t&&(t=0);var n=this.textureShader,t=(null==e?this._diffuseTileProps.remove(t):null==this._diffuseTileProps.h[t]?this._diffuseTileProps.h[t]=new Ju(e,null,null,null,null,null,null,null):this._diffuseTileProps.h[t].tile=e,zy.values(this._diffuseTileProps).length);return null==this.textureShader||t==n.NbTiles__&&!this.noShader||(this.passes.removeShader(this.textureShader),this.textureShader=null),null!=this.textureShader||0==t||this.noShader||(this.textureShader=new Ah(t),this.passes.addShader(this.textureShader)),this.calculateUV(),this.updateShaderValues(this.textureShader),e},getDiffuse:function(e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].tile},setFixedWidth:function(e,t){return null==this._diffuseTileProps.h[t=null==t?0:t]&&(this._diffuseTileProps.h[t]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[t].fixedWidth=e,this.calculateUV(),this.updateShaderValues(this.textureShader),e},setFixedHeight:function(e,t){return null==this._diffuseTileProps.h[t=null==t?0:t]&&(this._diffuseTileProps.h[t]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[t].fixedHeight=e,this.calculateUV(),this.updateShaderValues(this.textureShader),e},getFixedHeight:function(e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].fixedHeight},getFixedWidth:function(e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].fixedWidth},getUVPosition:function(e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].uvPosition},getUVOffset:function(e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].uvOffset},getUVScale:function(e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].uvScale},getUVMargin:function(e){return null==this._diffuseTileProps.h[e=null==e?0:e]&&(this._diffuseTileProps.h[e]=new Ju(null,null,null,null,null,null,null,null)),this._diffuseTileProps.h[e].uvMargin},setUVRotation:function(e,t){null==t&&(t=!1),this._uvRotation=e,this._uvRotationFit=t?1:0,this.updateShaderValues(this.textureShader)},calculateUV:function(){for(var e=this._diffuseTileProps,t=e.keys();t.hasNext();){var n,i,s,a,l,r=e.get(t.next()),o=r.tile;null!=o&&(n=o.innerTex,l=r.uvScale,i=r.uvMargin,s=r.uvOffset,(a=r.uvPosition).x=o.x/n.width,a.y=o.y/n.height,l.x=o.width/n.width,l.y=o.height/n.height,a=null!=r.fixedWidth?r.fixedWidth:o.width,l=null!=r.fixedHeight?r.fixedHeight:o.height,i.x=null!=r.fixedWidth?(a-o.width)/a:0,i.y=null!=r.fixedHeight?(l-o.height)/l:0,s.x=null!=r.fixedWidth?o.dx/n.width:0,s.y=null!=r.fixedHeight?o.dy/n.height:0)}},updateShaderValues:function(e){if(null!=e){e.uvRotation__=this._uvRotation,e.uvRotationFit__=this._uvRotationFit;for(var t=this._diffuseTileProps,n=t.keys();n.hasNext();){var i=n.next(),s=t.get(i),a=s.tile;if(null!=a){var l,r=a.innerTex;switch(i){case 0:e.texture__=r;break;case 1:e.texture2__=r;break;default:throw tl.thrown("diffuse map index "+i+" not supported")}if(e.uvMargin__[i]=st.to3dPoint(s.uvMargin),e.uvOffset__[i]=st.to3dPoint(s.uvOffset),e.uvPosition__[i]=st.to3dPoint(s.uvPosition),e.uvScale__[i]=st.to3dPoint(s.uvScale),e.uvRepeat__[i]=st.to3dPoint(s.uvRepeat),1!=s.uvRepeat.x||1!=s.uvRepeat.y)e.uvRepeatEnable__[i]=1;else{switch(e.uvRepeatEnable__[i]=0,r.wrap._hx_index){case 0:l=0;break;case 1:l=1}e.uvRepeatEnable__[i]=l}}}}},clone:function(e){for(var t,n=null==e?new Ku:e,i=(Bn.prototype.clone.call(this,n),n.set_props(n.getDefaultProps()),e=null!=(e instanceof Bn?e:null)?(t=(e=(e instanceof Bn?e:null).mshader.color__).x,new q(t=null==t?0:t,t=null==(t=e.y)?0:t,t=null==(t=e.z)?0:t,t=null==(t=e.w)?1:t)):new q(1,1,1,1),n.mshader.color__=e,n.noShader=this.noShader,this._diffuseTileProps),s=i.keys();s.hasNext();){var a=s.next(),l=i.get(a);n._diffuseTileProps.h[a]=new Ju(l.tile,st.clone(l.uvOffset),st.clone(l.uvPosition),st.clone(l.uvScale),st.clone(l.uvMargin),st.clone(l.uvRepeat),l.fixedWidth,l.fixedHeight),n.setDiffuse(l.tile,a)}return n},__class__:Ku}),function(e,t,n,i,s,a,l,r){this.fixedHeight=null,this.fixedWidth=null,this.uvRepeat=st.fromBacking(new it(1,1,0,null)),this.uvMargin=st.fromBacking(new it(0,0,0,null)),this.uvScale=st.fromBacking(new it(0,0,0,null)),this.uvPosition=st.fromBacking(new it(0,0,0,null)),this.uvOffset=st.fromBacking(new it(0,0,0,null)),this.tile=e,null!=t&&(this.uvOffset=t),null!=n&&(this.uvPosition=n),null!=i&&(this.uvScale=i),null!=s&&(this.uvMargin=s),null!=a&&(this.uvRepeat=a),null!=l&&(this.fixedWidth=l),null!=r&&(this.fixedHeight=r)}),$u=((i["hacksaw.core.h3d.mat._TileMaterial.TileRenderProperties"]=Ju).__name__="hacksaw.core.h3d.mat._TileMaterial.TileRenderProperties",Ju.prototype={__class__:Ju},(i["hacksaw.core.h3d.particles.Particle"]=ka).__name__="hacksaw.core.h3d.particles.Particle",ka.__super__=Hr,ka.prototype=e(Hr.prototype,{__class__:ka}),function(e,t){null==t&&(t=!1),this._maxParticlesReached=!1,this._emittedParticles=0,this.activeSubEmitterCount=0,this._emissionSignal=new r1,this.isSubEmitter=!1,this.activeParticleCount=0,this.currentVelocity=st.fromBacking(new it(0,0,0,null)),this.enabled=!1,Hr.call(this,null),this.isSubEmitter=t,this.config=e,this.exposedModules=e.exposedModules;for(var n=e.modules,i=[],s=0;s<n.length;){var a=n[s];++s,a instanceof _h&&i.push(a)}var l,t=[new uh];switch(e.particleSpace._hx_index){case 0:l=[new hh(this.getAbsPos())];break;case 1:l=[]}this.modules=l.concat(e.modules).concat(t),this.sortModules();for(var i=[],s=0,r=this.get_maxParticles();s<r;)i.push(new ka(this,s++));this.particles=i,il.each(this.particles,function(e){e.dead=!0})}),eh=((i["hacksaw.core.h3d.particles.ParticleGroup"]=$u).__name__="hacksaw.core.h3d.particles.ParticleGroup",$u.__super__=Hr,$u.prototype=e(Hr.prototype,{sortModules:function(){for(var e=il.order(this.modules,function(e,t){return e.updateOrder-t.updateOrder}),t=il.order(this.modules,function(e,t){return e.spawnOrder-t.spawnOrder}),n=[],i=0;i<t.length;){var s=t[i];++i,nl.__implements(s,rh)&&n.push(s)}this._spawnModules=n;for(n=[],i=0;i<t.length;){s=t[i];++i,nl.__implements(s,oh)&&n.push(s)}this._deathModules=n;for(n=[],i=0;i<e.length;){s=e[i];++i,nl.__implements(s,sh)&&n.push(s)}this._particleUpdateModules=n;for(n=[],i=0;i<t.length;){s=t[i];++i,nl.__implements(s,ah)&&n.push(s)}this._groupInitModules=n;for(n=[],i=0;i<e.length;){s=e[i];++i,nl.__implements(s,lh)&&2!=s.updateOrder&&n.push(s)}for(var a=n,n=[],i=0;i<e.length;){s=e[i];++i,nl.__implements(s,lh)&&2==s.updateOrder&&n.push(s)}this._groupUpdateModules={preMotion:a,postMotion:n}},setup:function(){var t=this,e=(this.config.autoRemove&&s1.nextTime(this._emissionSignal,function(e){return U.enumEq(e,th.Disable)}).handle(function(){var e=t.parent;(e instanceof nh?e:null).removeGroup(t)}),this.config.onDone);null!=e&&s1.filter(t._emissionSignal,function(e){return U.enumEq(e,th.Disable)}).listen(e),il.each(this._groupInitModules,function(e){e.onInit(t)})},start:function(){var e,t,n,i,s;return this._maxParticlesReached&&this.enabled?new Zy(new Yy(!0)):(this.enabled||(this._emittedParticles=0,this._maxParticlesReached=!1,this.enabled=!0,s=this.getAbsPos(),e=new Gr(0,0,0),n=s._41,i=s._42,null==(s=s._43)&&(s=0),null==i&&(i=0),(t=e).x=n=null==n?0:n,t.y=i,t.z=s,this.lastPos=st.fromVector3(e),il.each(this.modules,function(e){e.reset()}),this.triggerEvent(th.Start)),rt.map(s1.nextTime(this._emissionSignal,function(e){switch(e._hx_index){case 0:return!1;case 1:case 2:case 3:case 4:return!0}}),function(e){switch(e._hx_index){case 0:case 2:case 3:case 4:return!1;case 1:return!0}}))},stop:function(){return this.enabled&&(this.enabled=!1,this.triggerEvent(th.Stop)),0==this.activeParticleCount?new Zy(new Yy(!0)):rt.map(s1.nextTime(this._emissionSignal,function(e){switch(e._hx_index){case 0:case 3:case 4:return!0;case 1:case 2:return!1}}),function(e){switch(e._hx_index){case 0:case 1:case 2:case 4:return!1;case 3:return!0}})},update:function(n){var t=this;if(0!=this.activeParticleCount||this.enabled){!this._maxParticlesReached&&this._emittedParticles>=this.config.maxParticles&&(this._maxParticlesReached=!0,this.config.loop||(this.enabled=!1),this.triggerEvent(th.Complete));var e,i=this.getAbsPos(),s=r=new Gr(0,0,0),a=i._41,l=i._42,i=i._43,a=(null==i&&(i=0),null==l&&(l=0),s.x=a=null==a?0:a,s.y=l,s.z=i,st.fromVector3(r)),r=this.lastPos,l=a.x;s=null==l||null==(o=r.x)?null:l-o,i=null==(l=a.y)||null==(o=r.y)?null:l-o,e=null==(l=a.z)||null==(o=r.z)?null:l-o;r=null==(l=a.w)||null==(o=r.w)?null:l-o,this.currentVelocity=st.fromBacking(new it(null!=s?s:a.x,null!=i?i:a.y,null!=e?e:a.z,null!=r?r:a.w)),st.multiply(this.get_currentVelocity(),1/n),il.each(this._groupUpdateModules.preMotion,function(e){e.onGroupUpdate(t,n)});for(var o,u=0;u<this.activeParticleCount;){var h=[this.particles[u]];if(++u,h[0].life+=n,h[0].life>h[0].ttl)for(var c=!0;c;)c=this.removeParticle(h[0]);h[0].scaleX=h[0].baseScale.x,h[0].flags|=1,0!=(131072&h[0].flags)&&(h[0].flags|=262144),h[0].scaleY=h[0].baseScale.y,h[0].flags|=1,0!=(131072&h[0].flags)&&(h[0].flags|=262144),h[0].scaleZ=h[0].baseScale.z,h[0].flags|=1,0!=(131072&h[0].flags)&&(h[0].flags|=262144),h[0].setRotation(h[0].baseRotation.x,h[0].baseRotation.y,h[0].baseRotation.z),il.each(this._particleUpdateModules,(t=>function(e){e.onUpdate(t[0],n)})(h))}il.each(this._groupUpdateModules.postMotion,function(e){e.onGroupUpdate(t,n)}),this.lastPos=a}else 0<this._emittedParticles&&0==this.activeSubEmitterCount&&(this._emittedParticles=0,this.triggerEvent(th.Disable))},getEmissionEventSignal:function(){return this._emissionSignal},removeParticle:function(t){if(0==this.activeParticleCount)return!1;this.activeParticleCount--,il.each(this._deathModules,function(e){e.onDeath(t)});var e=this.particles[this.activeParticleCount],n=(t.dead=e.dead,e.dead=!0,t.baseScale),i=e.baseScale;n.x=i.x,n.y=i.y,n.z=i.z,n.w=i.w,(n=t.baseRotation).x=(i=e.baseRotation).x,n.y=i.y,n.z=i.z,n.w=i.w,t.frameIndex=e.frameIndex,(n=t.color).x=(i=e.color).x,n.y=i.y,n.z=i.z,n.w=i.w,t.speed=e.speed,t.life=e.life,t.ttl=e.ttl;(n=t.velocity).x=(i=e.velocity).x,n.y=i.y,n.z=i.z,n.w=i.w;n=0!=(2048&e.flags),n!=(0!=(2048&t.flags))&&(t.flags|=1,0!=(131072&t.flags))&&(t.flags|=262144),n?t.flags|=2048:t.flags&=-2049,t.x=e.x,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.y=e.y,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.z=e.z,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleX=e.scaleX,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY=e.scaleY,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ=e.scaleZ,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),i=t.qRot,n=e.qRot;return i.x=n.x,i.y=n.y,i.z=n.z,i.w=n.w,0!=(2&e.flags)?t.flags|=2:t.flags&=-3,t.ttl<t.life},emitParticle:function(){var t;this.activeParticleCount!=this.get_maxParticles()&&(t=this.particles[this.activeParticleCount],this.activeParticleCount++,this._emittedParticles++,t.dead=!1,t.life=0,t.ttl=0,t.x=0,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.y=0,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.z=0,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleX=1,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY=1,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ=1,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.setRotation(0,0,0),0!=(0!=(2048&t.flags))&&(t.flags|=1,0!=(131072&t.flags))&&(t.flags|=262144),t.flags&=-2049,st.set(t.velocity,st.fromBacking(new it(0,0,0,null))),st.set(t.baseScale,st.fromBacking(new it(1,1,1,null))),st.set(t.baseRotation,st.fromBacking(new it(0,0,0,null))),il.each(this._spawnModules,function(e){e.onSpawn(t)}))},triggerEvent:function(e){0<this._emissionSignal.handlers.used&&this._emissionSignal.handlers.invoke(e)},onRemove:function(){this.triggerEvent(th.Remove),Hr.prototype.onRemove.call(this)},get_maxParticles:function(){return this.config.maxParticles},get_currentVelocity:function(){return this.currentVelocity},__class__:$u,__properties__:e(Hr.prototype.__properties__,{get_currentVelocity:"get_currentVelocity",get_maxParticles:"get_maxParticles"})}),fe["hacksaw.core.h3d.particles.ParticleSpace"]={__ename__:!0,__constructs__:null,World:{_hx_name:"World",_hx_index:0,__enum__:"hacksaw.core.h3d.particles.ParticleSpace",toString:o},Local:{_hx_name:"Local",_hx_index:1,__enum__:"hacksaw.core.h3d.particles.ParticleSpace",toString:o}}),th=(eh.__constructs__=[eh.World,eh.Local],eh.__empty_constructs__=[eh.World,eh.Local],fe["hacksaw.core.h3d.particles.EmissionEvent"]={__ename__:!0,__constructs__:null,Start:{_hx_name:"Start",_hx_index:0,__enum__:"hacksaw.core.h3d.particles.EmissionEvent",toString:o},Complete:{_hx_name:"Complete",_hx_index:1,__enum__:"hacksaw.core.h3d.particles.EmissionEvent",toString:o},Stop:{_hx_name:"Stop",_hx_index:2,__enum__:"hacksaw.core.h3d.particles.EmissionEvent",toString:o},Disable:{_hx_name:"Disable",_hx_index:3,__enum__:"hacksaw.core.h3d.particles.EmissionEvent",toString:o},Remove:{_hx_name:"Remove",_hx_index:4,__enum__:"hacksaw.core.h3d.particles.EmissionEvent",toString:o}}),nh=(th.__constructs__=[th.Start,th.Complete,th.Stop,th.Disable,th.Remove],th.__empty_constructs__=[th.Start,th.Complete,th.Stop,th.Disable,th.Remove],(i["hacksaw.core.h3d.particles.ParticleGroupConfig"]=Ma).__name__="hacksaw.core.h3d.particles.ParticleGroupConfig",Ma.prototype={__class__:Ma},function(e,t){this._groupsPendingRemoval=[],this.subGroups=[],this.groups=[];var n=this,t=(Lu.call(this,t),new It(this)),t=(tt.init(t,null),this.tweenObject=t,this.config=e,this.flags|=2,this.unsupported=!Vr.CURRENT.driver.hasFeature(Yr.InstancedRendering),e.groups);null!=t&&il.each(t,function(e){n.addGroup(e)})}),ih=((i["hacksaw.core.h3d.particles.ParticleSystem"]=nh).__name__="hacksaw.core.h3d.particles.ParticleSystem",nh.__super__=Lu,nh.prototype=e(Lu.prototype,{addGroup:function(e){this.unsupported||(e.setup(),(e.isSubEmitter?this.subGroups:this.groups).push(e),this.addChild(e))},removeGroup:function(e){this.unsupported||this._groupsPendingRemoval.push(e)},start:function(){var e=this.groups;if(null!=e&&0<e.length){for(var t=this.groups,n=new Array(t.length),i=0,s=t.length;i<s;){var a=i++;n[a]=t[a].start()}return rt.map(rt.inParallel(n),function(e){return-1==e.indexOf(!1)})}return new Zy(new Yy(!0))},stop:function(){var e=this.groups;if(null!=e&&0<e.length){for(var t=this.groups,n=new Array(t.length),i=0,s=t.length;i<s;){var a=i++;n[a]=t[a].stop()}return rt.map(rt.inParallel(n),function(e){return-1==e.indexOf(!1)})}return new Zy(new Yy(!0))},getNextEmitInterruption:function(){for(var e=this.groups,t=[],n=0;n<e.length;){var i=e[n];++n,(i.enabled||0<i.activeParticleCount)&&t.push(i)}if(null!=t&&0<t.length){for(var s=new Array(t.length),n=0,a=t.length;n<a;){var l=n++;s[l]=s1.nextTime(t[l].getEmissionEventSignal(),function(e){switch(e._hx_index){case 0:case 1:return!1;case 2:case 3:case 4:return!0}})}return rt.noise(rt.inParallel(s))}return rt.NOISE},update:function(t){var e,n=this;Lu.prototype.update.call(this,t),0==(2&this.flags)||this.unsupported||(il.each(this.groups,function(e){e.update(t)}),il.each(this.subGroups,function(e){e.update(t)}),null!=(e=this._groupsPendingRemoval)&&0!=e.length&&(il.each(il.distinct(this._groupsPendingRemoval),function(t){il.each(t.modules,function(e){e.onDispose(t)}),n.removeChild(t),t.isSubEmitter?Jn.remove(n.subGroups,t):Jn.remove(n.groups,t)}),this._groupsPendingRemoval.length=0),null==this.parent&&il.each(this.groups.concat(this.subGroups),function(t){il.each(t.modules,function(e){e.onDispose(t)})}))},dispose:function(){var t=this;il.each(this.groups.slice(),function(e){Jn.remove(t.groups,e),t.removeChild(e)}),il.each(this.subGroups.slice(),function(e){Jn.remove(t.subGroups,e),t.removeChild(e)})},__class__:nh}),function(e){(this.groups=null)!=e&&(this.groups=e)}),sh=((i["hacksaw.core.h3d.particles.ParticleSystemConfig"]=ih).__name__="hacksaw.core.h3d.particles.ParticleSystemConfig",ih.prototype={__class__:ih},(i["hacksaw.core.h3d.particles.behaviorModules.ParticleModule"]=Ia).__name__="hacksaw.core.h3d.particles.behaviorModules.ParticleModule",Ia.prototype={reset:function(){},onDispose:function(e){},__class__:Ia},function(){}),ah=((i["hacksaw.core.h3d.particles.behaviorModules.ParticleUpdate"]=sh).__name__="hacksaw.core.h3d.particles.behaviorModules.ParticleUpdate",sh.__isInterface__=!0,sh.prototype={__class__:sh},(i["hacksaw.core.h3d.particles.behaviorModules.ConstAcceleration"]=Ba).__name__="hacksaw.core.h3d.particles.behaviorModules.ConstAcceleration",Ba.__interfaces__=[sh],Ba.__super__=Ia,Ba.prototype=e(Ia.prototype,{onUpdate:function(e,t){e.velocity.x+=this.vector.x*t,e.velocity.y+=this.vector.y*t,e.velocity.z+=this.vector.z*t},__class__:Ba}),function(){}),lh=((i["hacksaw.core.h3d.particles.behaviorModules.GroupInit"]=ah).__name__="hacksaw.core.h3d.particles.behaviorModules.GroupInit",ah.__isInterface__=!0,ah.prototype={__class__:ah},function(){}),rh=((i["hacksaw.core.h3d.particles.behaviorModules.GroupUpdate"]=lh).__name__="hacksaw.core.h3d.particles.behaviorModules.GroupUpdate",lh.__isInterface__=!0,lh.prototype={__class__:lh},function(){}),oh=((i["hacksaw.core.h3d.particles.behaviorModules.ParticleSpawn"]=rh).__name__="hacksaw.core.h3d.particles.behaviorModules.ParticleSpawn",rh.__isInterface__=!0,rh.prototype={__class__:rh},function(){}),uh=((i["hacksaw.core.h3d.particles.behaviorModules.ParticleDeath"]=oh).__name__="hacksaw.core.h3d.particles.behaviorModules.ParticleDeath",oh.__isInterface__=!0,oh.prototype={__class__:oh},function(e,t){Ia.call(this,e,t)}),hh=((i["hacksaw.core.h3d.particles.behaviorModules.MoveParticle"]=uh).__name__="hacksaw.core.h3d.particles.behaviorModules.MoveParticle",uh.__interfaces__=[sh],uh.__super__=Ia,uh.prototype=e(Ia.prototype,{onUpdate:function(e,t){e.x+=e.velocity.x*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.y+=e.velocity.y*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.z+=e.velocity.z*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144);t=e.velocity;e.speed=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},__class__:uh}),function(e){this.rotationMatrix=new Wr,Ia.call(this,2,null),this.transformMatrix=e}),ch=((i["hacksaw.core.h3d.particles.behaviorModules.TransformToWorldSpace"]=hh).__name__="hacksaw.core.h3d.particles.behaviorModules.TransformToWorldSpace",hh.__interfaces__=[rh],hh.__super__=Ia,hh.prototype=e(Ia.prototype,{onSpawn:function(e){var t=e.getAbsPos(),t=(1!=(0!=(2048&e.flags))&&(e.flags|=1,0!=(131072&e.flags))&&(e.flags|=262144),e.flags|=2048,e.setTransform(t),e.velocity),e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),n=t.x*t.x+t.y*t.y+t.z*t.z,i=n<1e-20?0:1/Math.sqrt(n),s=(t.x*=i,t.y*=i,t.z*=i,this.rotationMatrix.initRotation(t.x,t.y,t.z),this.rotationMatrix.multiply(this.rotationMatrix,this.transformMatrix),t),a=this.rotationMatrix,l=s.x*a._12+s.y*a._22+s.z*a._32,r=s.x*a._13+s.y*a._23+s.z*a._33;s.x=s.x*a._11+s.y*a._21+s.z*a._31,s.y=l,s.z=r;i=(n=t.x*t.x+t.y*t.y+t.z*t.z)<1e-20?0:1/Math.sqrt(n);t.x*=i,t.y*=i,t.z*=i,st.multiply(t,e)},__class__:hh}),(i["hacksaw.core.h3d.particles.behaviorModules.ColorByLife"]=Ta).__name__="hacksaw.core.h3d.particles.behaviorModules.ColorByLife",Ta.__interfaces__=[sh],Ta.__super__=Ia,Ta.prototype=e(Ia.prototype,{onUpdate:function(e,t){var n=e.life/e.ttl,i=this.curve(n),i=(this._tmpVector.x=this.atBirth.x*(1-i)+this.atDeath.x*i,this.curve(n)),i=(this._tmpVector.y=this.atBirth.y*(1-i)+this.atDeath.y*i,this.curve(n)),i=(this._tmpVector.z=this.atBirth.z*(1-i)+this.atDeath.z*i,this.curve(n)),n=(this._tmpVector.w=this.atBirth.w*(1-i)+this.atDeath.w*i,e.color),i=this._tmpVector;n.x=i.x,n.y=i.y,n.z=i.z,n.w=i.w},__class__:Ta}),(i["hacksaw.core.h3d.particles.behaviorModules.ColorBySpeed"]=Ea).__name__="hacksaw.core.h3d.particles.behaviorModules.ColorBySpeed",Ea.__interfaces__=[sh],Ea.__super__=Ia,Ea.prototype=e(Ia.prototype,{onUpdate:function(e,t){var n=Math.max(0,Math.min(1,(e.speed-this.min)/(this.max-this.min))),i=this.curve(n),i=(this._tmpVector.x=this.from.x*(1-i)+this.to.x*i,this.curve(n)),i=(this._tmpVector.y=this.from.y*(1-i)+this.to.y*i,this.curve(n)),i=(this._tmpVector.z=this.from.z*(1-i)+this.to.z*i,this.curve(n)),n=(this._tmpVector.w=this.from.w*(1-i)+this.to.w*i,e.color),i=this._tmpVector;n.x=i.x,n.y=i.y,n.z=i.z,n.w=i.w},__class__:Ea}),(i["hacksaw.core.h3d.particles.behaviorModules.InitialColor"]=Fa).__name__="hacksaw.core.h3d.particles.behaviorModules.InitialColor",Fa.__interfaces__=[rh],Fa.__super__=Ia,Fa.prototype=e(Ia.prototype,{onSpawn:function(e){var e=e.color,t=this.color;e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w},__class__:Fa}),(i["hacksaw.core.h3d.particles.behaviorModules.GenerateSpawnEvent"]=Da).__name__="hacksaw.core.h3d.particles.behaviorModules.GenerateSpawnEvent",Da.__interfaces__=[rh],Da.__super__=Ia,Da.prototype=e(Ia.prototype,{onSpawn:function(e){null!=this.callback&&this.callback(e)},__class__:Da}),(i["hacksaw.core.h3d.particles.behaviorModules.LifeTime"]=Ra).__name__="hacksaw.core.h3d.particles.behaviorModules.LifeTime",Ra.__interfaces__=[rh],Ra.__super__=Ia,Ra.prototype=e(Ia.prototype,{onSpawn:function(e){var t;t=null==this.maxDuration?null:(t=Math.random(),this.minDuration*(1-t)+this.maxDuration*t),e.ttl+=null!=t?t:this.minDuration},__class__:Ra}),(i["hacksaw.core.h3d.particles.behaviorModules.Point"]=Pa).__name__="hacksaw.core.h3d.particles.behaviorModules.Point",Pa.__interfaces__=[rh],Pa.__super__=Ia,Pa.prototype=e(Ia.prototype,{onSpawn:function(e){var t=st.fromBacking(new it(Jx.srand(),Jx.srand(),0,null)),n=t.x*t.x+t.y*t.y+t.z*t.z,n=n<1e-20?0:1/Math.sqrt(n),n=(t.x*=n,t.y*=n,t.z*=n,e.velocity);n.x+=t.x*this.speed,n.y+=t.y*this.speed,n.z+=t.z*this.speed},__class__:Pa}),(i["hacksaw.core.h3d.particles.behaviorModules.Edge"]=za).__name__="hacksaw.core.h3d.particles.behaviorModules.Edge",za.__interfaces__=[rh],za.__super__=Ia,za.prototype=e(Ia.prototype,{onSpawn:function(e){e.x+=Jx.srand(.5*this.length),e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.velocity.y+=this.speed},__class__:za}),(i["hacksaw.core.h3d.particles.behaviorModules.Rectangle"]=Qa).__name__="hacksaw.core.h3d.particles.behaviorModules.Rectangle",Qa.__interfaces__=[rh],Qa.__super__=Ia,Qa.prototype=e(Ia.prototype,{onSpawn:function(e){var t,n=this.emitFrom;2==n._hx_index?(null==(t=n=(n=n.thickness)<=.001?.001:1<=n?1:n)&&(t=1),n=1-n+Math.random()*t,null==(t=this.size.x+this.size.x+this.size.y+this.size.y)&&(t=1),t=(t=Math.random()*t)<this.size.x+this.size.y?t<this.size.x?{x:t,y:0}:{x:this.size.x,y:t-this.size.x}:(t-=this.size.x+this.size.y)<this.size.x?{x:this.size.x-t,y:this.size.y}:{x:0,y:this.size.y-(t-this.size.x)},e.x+=(t.x-.5*this.size.x)*n,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.z+=(t.y-.5*this.size.y)*n):(e.x+=Jx.srand(.5*this.size.x),e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.z+=Jx.srand(.5*this.size.y)),e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.velocity.y+=this.speed},__class__:Qa}),(i["hacksaw.core.h3d.particles.behaviorModules.Sphere"]=Va).__name__="hacksaw.core.h3d.particles.behaviorModules.Sphere",Va.__interfaces__=[rh],Va.__super__=Ia,Va.prototype=e(Ia.prototype,{onSpawn:function(e){var t,n=st.fromBacking(new it(Jx.srand(),Jx.srand(),Jx.srand(),null)),i=n.x*n.x+n.y*n.y+n.z*n.z,i=i<1e-20?0:1/Math.sqrt(i),s=(n.x*=i,n.y*=i,n.z*=i,this.emitFrom);switch(s._hx_index){case 0:null==(a=this.radius)&&(a=1),t=Math.random()*a;break;case 2:var a,l=s.thickness,l=l<=0?0:1<=l?1:l;null==(a=l)&&(a=1),t=this.radius*(1-l+Math.random()*a);break;default:t=0}e.x+=n.x*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.y+=n.y*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.z+=n.z*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.velocity.x+=n.x*this.speed,e.velocity.y+=n.y*this.speed,e.velocity.z+=n.z*this.speed},__class__:Va}),(i["hacksaw.core.h3d.particles.behaviorModules.Cone"]=Oa).__name__="hacksaw.core.h3d.particles.behaviorModules.Cone",Oa.__interfaces__=[rh],Oa.__super__=Ia,Oa.prototype=e(Ia.prototype,{onSpawn:function(e){var t=2*Math.PI,n=(null==t&&(t=1),Math.random()*t),t=(null==(t=this.radius)&&(t=1),Math.random()*t),n=(e.x+=Math.cos(n)*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.z+=Math.sin(n)*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),Math.tan(this.angle)),t=st.fromBacking(new it(Jx.srand(n),1,Jx.srand(n),null)),n=t.x*t.x+t.y*t.y+t.z*t.z,n=n<1e-20?0:1/Math.sqrt(n);t.x*=n,t.y*=n,t.z*=n,e.velocity.x+=t.x*this.speed,e.velocity.y+=t.y*this.speed,e.velocity.z+=t.z*this.speed},__class__:Oa}),(i["hacksaw.core.h3d.particles.behaviorModules.Cubic3DSpline"]=Wa).__name__="hacksaw.core.h3d.particles.behaviorModules.Cubic3DSpline",Wa.__interfaces__=[rh],Wa.__super__=Ia,Wa.prototype=e(Ia.prototype,{onSpawn:function(e){var t,n=this.emitFrom;switch(n._hx_index){case 0:null==(s=this.radius)&&(s=1),t=Math.random()*s;break;case 2:var i=n.thickness,i=i<=0?0:1<=i?1:i;null==(s=i)&&(s=1),t=this.radius*(1-i+Math.random()*s);break;default:t=0}this.currentRate=this.rateIncrement<=0?Math.random():this.currentRate+this.rateIncrement,1<this.currentRate&&--this.currentRate;null==(s=2*Math.PI)&&(s=1);var s,a=Math.random()*s,a=st.fromBacking(new it(Math.cos(a),0,Math.sin(a),null)),l=this.spline.getPointOnSpline(this.currentRate),r=this.spline.getTangentOnSpline(this.currentRate),a=st.toVector4(a),o=r.y*a.z-r.z*a.y,u=r.z*a.x-r.x*a.z,r=r.x*a.y-r.y*a.x,a=st.fromVector4(new q(o=null==o?0:o,u=null==u?0:u,r=null==r?0:r,1)),o=a.x*a.x+a.y*a.y+a.z*a.z,u=o<1e-20?0:1/Math.sqrt(o);a.x*=u,a.y*=u,a.z*=u,e.x+=l.x+a.x*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.y+=l.y+a.y*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.z+=l.z+a.z*t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.velocity.x+=a.x*this.speed,e.velocity.y+=a.y*this.speed,e.velocity.z+=a.z*this.speed},__class__:Wa}),fe["hacksaw.core.h3d.particles.behaviorModules.EmitFrom"]={__ename__:!0,__constructs__:null,Body:{_hx_name:"Body",_hx_index:0,__enum__:"hacksaw.core.h3d.particles.behaviorModules.EmitFrom",toString:o},EmitterDefined:{_hx_name:"EmitterDefined",_hx_index:1,__enum__:"hacksaw.core.h3d.particles.behaviorModules.EmitFrom",toString:o},Shell:((R=function(e){return{_hx_index:2,thickness:e,__enum__:"hacksaw.core.h3d.particles.behaviorModules.EmitFrom",toString:o}})._hx_name="Shell",R.__params__=["thickness"],R)}),_h=(ch.__constructs__=[ch.Body,ch.EmitterDefined,ch.Shell],ch.__empty_constructs__=[ch.Body,ch.EmitterDefined],(i["hacksaw.core.h3d.particles.behaviorModules.InitialRotation"]=Na).__name__="hacksaw.core.h3d.particles.behaviorModules.InitialRotation",Na.__interfaces__=[rh],Na.__super__=Ia,Na.prototype=e(Ia.prototype,{onSpawn:function(e){var t,n,i,s,a=e.baseRotation,l=this.rotation,r=a.x;t=null==r||null==(s=l.x)?null:r+s,n=null==(r=a.y)||null==(s=l.y)?null:r+s,i=null==(r=a.z)||null==(s=l.z)?null:r+s,l=null==(r=a.w)||null==(s=l.w)?null:r+s,e.baseRotation=st.fromBacking(new it(null!=t?t:a.x,null!=n?n:a.y,null!=i?i:a.z,null!=l?l:a.w))},__class__:Na}),(i["hacksaw.core.h3d.particles.behaviorModules.RotateByVelocity"]=Ga).__name__="hacksaw.core.h3d.particles.behaviorModules.RotateByVelocity",Ga.__interfaces__=[sh,rh],Ga.__super__=Ia,Ga.prototype=e(Ia.prototype,{onSpawn:function(e){var t,n,i,s,a,l;this.rotateOnEmitOnly&&(t=e.velocity,n=Math.PI,i=null==(l=t.x)?null:l*n,s=null==(l=t.y)?null:l*n,a=null==(l=t.z)?null:l*n,l=null==(l=t.w)?null:l*n,e.baseRotation=st.fromBacking(new it(null!=i?i:t.x,null!=s?s:t.y,null!=a?a:t.z,null!=l?l:t.w)))},onUpdate:function(e,t){var n;this.rotateOnEmitOnly||((n=new tn).initDirection(st.to3dPoint(e.velocity)),n.multiply(e.getRotationQuat(),n),e.setRotationQuat(n))},__class__:Ga}),(i["hacksaw.core.h3d.particles.behaviorModules.FixedRotationRate"]=Ua).__name__="hacksaw.core.h3d.particles.behaviorModules.FixedRotationRate",Ua.__interfaces__=[sh,rh],Ua.__super__=Ia,Ua.prototype=e(Ia.prototype,{onSpawn:function(e){var t,n,i,s,a,l,r;this.randomOnStart&&(r=(r=(t=this.rotationRate).x*t.x+t.y*t.y+t.z*t.z)<1e-20?0:1/Math.sqrt(r),a=r=st.fromBacking(new it(t.x*r,t.y*r,t.z*r,t.w*r)),n=2*Math.random()*Math.PI,a.x*=n,a.y*=n,a.z*=n,n=null==(a=(t=e.baseRotation).x)||null==(l=r.x)?null:a+l,i=null==(a=t.y)||null==(l=r.y)?null:a+l,s=null==(a=t.z)||null==(l=r.z)?null:a+l,r=null==(a=t.w)||null==(l=r.w)?null:a+l,e.baseRotation=st.fromBacking(new it(null!=n?n:t.x,null!=i?i:t.y,null!=s?s:t.z,null!=r?r:t.w)))},onUpdate:function(e,t){var n=this.rotationRate,i=e.life,s=n.x,a=null==s?null:s*i,l=null==(s=n.y)?null:s*i,r=null==(s=n.z)?null:s*i,s=null==(s=n.w)?null:s*i,i=st.fromBacking(new it(null!=a?a:n.x,null!=l?l:n.y,null!=r?r:n.z,null!=s?s:n.w));e.rotate(i.x,i.y,i.z)},__class__:Ua}),(i["hacksaw.core.h3d.particles.behaviorModules.InitialSize"]=La).__name__="hacksaw.core.h3d.particles.behaviorModules.InitialSize",La.__interfaces__=[rh],La.__super__=Ia,La.prototype=e(Ia.prototype,{onSpawn:function(e){var t=null!=(t=null==this.maxScale?null:(t=Math.random(),this.minScale*(1-t)+this.maxScale*t))?t:this.minScale;e.baseScale.x*=t,e.baseScale.y*=t,e.baseScale.z*=t},__class__:La}),(i["hacksaw.core.h3d.particles.behaviorModules.SizeByLife"]=ja).__name__="hacksaw.core.h3d.particles.behaviorModules.SizeByLife",ja.__interfaces__=[sh],ja.__super__=Ia,ja.prototype=e(Ia.prototype,{onUpdate:function(e,t){var n=this.curve(e.life/e.ttl),n=this.atBirth*(1-n)+this.atDeath*n;e.scaleX*=n,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleY*=n,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleZ*=n,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144)},__class__:ja}),(i["hacksaw.core.h3d.particles.behaviorModules.SizeBySpeed"]=Ha).__name__="hacksaw.core.h3d.particles.behaviorModules.SizeBySpeed",Ha.__interfaces__=[sh],Ha.__super__=Ia,Ha.prototype=e(Ia.prototype,{onUpdate:function(e,t){var n=this.curve(Math.max(0,Math.min(1,(e.speed-this.minSpeed)/(this.maxSpeed-this.minSpeed)))),n=this.fromScale*(1-n)+this.toScale*n;e.scaleX*=n,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleY*=n,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleZ*=n,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144)},__class__:Ha}),(i["hacksaw.core.h3d.particles.behaviorModules.ParticleSpawnOverTime"]=Ya).__name__="hacksaw.core.h3d.particles.behaviorModules.ParticleSpawnOverTime",Ya.__interfaces__=[lh],Ya.__super__=Ia,Ya.prototype=e(Ia.prototype,{onGroupUpdate:function(e,t){if(e.enabled)for(var n=this._rateProc,n=isFinite(n)?(this._timeSinceLastEmit+=t,this._timeSinceLastEmit*this._rateProc|0):(this._timeSinceLastEmit=0,e.get_maxParticles()-e.activeParticleCount),i=0,s=n;i<s;)++i,this._timeSinceLastEmit-=this.rate,e.emitParticle()},reset:function(){this._timeSinceLastEmit=0},set_rate:function(e){return this.rate=e,this._rateProc=1/e,e},__class__:Ya,__properties__:{set_rate:"set_rate"}}),(i["hacksaw.core.h3d.particles.behaviorModules.ParticleSpawnOverDistance"]=Za).__name__="hacksaw.core.h3d.particles.behaviorModules.ParticleSpawnOverDistance",Za.__interfaces__=[lh],Za.__super__=Ia,Za.prototype=e(Ia.prototype,{onGroupUpdate:function(e,t){var n=0,i=e.getAbsPos(),s=new Gr(0,0,0),a=s,l=i._41,r=i._42,i=i._43,l=(null==i&&(i=0),null==r&&(r=0),a.x=l=null==l?0:l,a.y=r,a.z=i,e.lastPos),r=st.fromVector3(s),a=r.x-l.x,i=r.y-l.y,s=r.z-l.z,r=Math.sqrt(a*a+i*i+s*s);if(this._distanceMoved+=r,r>=this.maxFrameDistance?this._distanceMoved=0:this._distanceMoved>=this.distance&&(n=this._distanceMoved/this.distance|0,this._distanceMoved-=n*this.distance),0<n&&e.enabled)for(var o=0,u=n;o<u;)++o,e.emitParticle()},reset:function(){this._distanceMoved=0},__class__:Za}),function(e,t,n,i){null==i&&(i=2),null==n&&(n=0),this._tmpMatrix=new Wr,Ia.call(this,n,i),this.initialTile=t,this.config=e}),dh=((i["hacksaw.core.h3d.particles.behaviorModules.TileRenderingModule"]=_h).__name__="hacksaw.core.h3d.particles.behaviorModules.TileRenderingModule",_h.__interfaces__=[ah,lh,rh],_h.__super__=Ia,_h.prototype=e(Ia.prototype,{onSpawn:function(e){var t;null==this.config.customMeshPrimitive&&((t=this._particleRenderer.group.parent).getAbsPos().getInverse(this._tmpMatrix),null!=(t=t.getScene())&&this._tmpMatrix.multiply(this._tmpMatrix,t.camera.mcam),e.getRotationQuat().initRotateMatrix(this._tmpMatrix)),this.config.scaleFollowsTileSize&&(t=this.materials[e.frameIndex],e.baseScale.x*=t.getFixedWidth()/sl.REFERENCE_SIZE,e.baseScale.y*=t.getFixedHeight()/sl.REFERENCE_SIZE)},onInit:function(e){this._particleRenderer=new Ph(e,this),this._particleRenderer.setup()},onGroupUpdate:function(e,t){this._particleRenderer.update(t)},onDispose:function(e){var t=this._particleRenderer;null!=t&&t.dispose(),this._particleRenderer=null},__class__:_h}),(i["hacksaw.core.h3d.particles.behaviorModules.StaticTile"]=Xa).__name__="hacksaw.core.h3d.particles.behaviorModules.StaticTile",Xa.__super__=_h,Xa.prototype=e(_h.prototype,{onInit:function(e){_h.prototype.onInit.call(this,e);e=Ku.create(this.initialTile);e.setFixedHeight(this.tileData.height),e.setFixedWidth(this.tileData.width),e.noShader=!0,this.materials=[e]},__class__:Xa}),(i["hacksaw.core.h3d.particles.behaviorModules.StaticTileGroup"]=qa).__name__="hacksaw.core.h3d.particles.behaviorModules.StaticTileGroup",qa.__super__=_h,qa.prototype=e(_h.prototype,{onInit:function(e){_h.prototype.onInit.call(this,e);for(var t=this.tileDataArray,n=new Array(t.length),i=0,s=t.length;i<s;){var a=i++,l=t[a],r=Ku.create(l.t);r.setFixedHeight(l.height),r.setFixedWidth(l.width),r.noShader=!0,n[a]=r}this.materials=n},onSpawn:function(e){e.frameIndex=el.random(this.tileDataArray.length),_h.prototype.onSpawn.call(this,e)},__class__:qa}),(i["hacksaw.core.h3d.particles.behaviorModules.TileAnimation"]=Ka).__name__="hacksaw.core.h3d.particles.behaviorModules.TileAnimation",Ka.__interfaces__=[sh],Ka.__super__=_h,Ka.prototype=e(_h.prototype,{onInit:function(e){_h.prototype.onInit.call(this,e);for(var t=this.animationData.frames,n=new Array(t.length),i=0,s=t.length;i<s;){var a=i++,l=Ku.create(t[a]);l.setFixedHeight(this.animationData.height),l.setFixedWidth(this.animationData.width),l.noShader=!0,n[a]=l}this.materials=n},onUpdate:function(e,t){var n=Fy.wrapCircular(e.life*this._loopsPerSecond,1);e.frameIndex=0*(1-n)+this._frames*n|0},set_fps:function(e){return this.fps=e,this._loopsPerSecond=this.fps/this.animationData.frames.length,this._frames=this.animationData.frames.length,e},__class__:Ka,__properties__:{set_fps:"set_fps"}}),function(e,t,n,i,s,a,l){this.stencil=null,this.scaleFollowsTileSize=!0,this.customMeshPrimitive=null,this.useShadows=!1,this.culling=$r.None,this.depthTest=to.Always,this.blendMode=wr.Alpha,null!=e&&(this.blendMode=e),null!=t&&(this.depthTest=t),null!=n&&(this.culling=n),null!=i&&(this.useShadows=i),null!=s&&(this.customMeshPrimitive=s),null!=a&&(this.scaleFollowsTileSize=a),null!=l&&(this.stencil=l)}),ph=((i["hacksaw.core.h3d.particles.behaviorModules.TileParticleRenderConfig"]=dh).__name__="hacksaw.core.h3d.particles.behaviorModules.TileParticleRenderConfig",dh.prototype={__class__:dh},(i["hacksaw.core.h3d.particles.behaviorModules.InitialSpeed"]=Ja).__name__="hacksaw.core.h3d.particles.behaviorModules.InitialSpeed",Ja.__interfaces__=[rh],Ja.__super__=Ia,Ja.prototype=e(Ia.prototype,{onSpawn:function(e){t=null==this.maxSpeed?null:(t=Math.random(),this.minSpeed*(1-t)+this.maxSpeed*t);var t,n=e.velocity,i=n.x*n.x+n.y*n.y+n.z*n.z,i=i<1e-20?0:1/Math.sqrt(i);n.x*=i,n.y*=i,n.z*=i,st.multiply(e.velocity,null!=t?t:this.minSpeed)},__class__:Ja}),(i["hacksaw.core.h3d.particles.behaviorModules.SpeedByLife"]=$a).__name__="hacksaw.core.h3d.particles.behaviorModules.SpeedByLife",$a.__interfaces__=[sh],$a.__super__=Ia,$a.prototype=e(Ia.prototype,{onUpdate:function(e,t){var n=e.life/e.ttl,i=e.velocity,s=i.x*i.x+i.y*i.y+i.z*i.z,s=s<1e-20?0:1/Math.sqrt(s);i.x*=s,i.y*=s,i.z*=s,st.multiply(e.velocity,this.atBirth*(1-n)+this.atDeath*n)},__class__:$a}),(i["hacksaw.core.h3d.particles.behaviorModules.SpherizeVelocity"]=al).__name__="hacksaw.core.h3d.particles.behaviorModules.SpherizeVelocity",al.__interfaces__=[rh],al.__super__=Ia,al.prototype=e(Ia.prototype,{onSpawn:function(e){var t=e.velocity,t=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),n=st.fromBacking(new it(e.x,e.y,e.z,null)),i=n.x*n.x+n.y*n.y+n.z*n.z,i=i<1e-20?0:1/Math.sqrt(i),s=(n.x*=i,n.y*=i,n.z*=i,e.velocity),e=st.toVector4(e.velocity),a=n.x,l=null==a?null:a*t,r=null==(a=n.y)?null:a*t,o=null==(a=n.z)?null:a*t,a=null==(a=n.w)?null:a*t,t=st.toVector4(st.fromBacking(new it(null!=l?l:n.x,null!=r?r:n.y,null!=o?o:n.z,null!=a?a:n.w))),i=this.amount,l=e.x,l=(s.x=l+i*(t.x-l),e.y),l=(s.y=l+i*(t.y-l),e.z),l=(s.z=l+i*(t.z-l),e.w);s.w=l+i*(t.w-l)},__class__:al}),(i["hacksaw.core.h3d.particles.behaviorModules.RandomizeVelocity"]=ll).__name__="hacksaw.core.h3d.particles.behaviorModules.RandomizeVelocity",ll.__interfaces__=[rh],ll.__super__=Ia,ll.prototype=e(Ia.prototype,{onSpawn:function(e){var t=e.velocity,t=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),n=st.fromBacking(new it(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1,null)),i=n.x*n.x+n.y*n.y+n.z*n.z,i=i<1e-20?0:1/Math.sqrt(i),s=(n.x*=i,n.y*=i,n.z*=i,e.velocity),e=st.toVector4(e.velocity),a=n.x,l=null==a?null:a*t,r=null==(a=n.y)?null:a*t,o=null==(a=n.z)?null:a*t,a=null==(a=n.w)?null:a*t,t=st.toVector4(st.fromBacking(new it(null!=l?l:n.x,null!=r?r:n.y,null!=o?o:n.z,null!=a?a:n.w))),i=this.amount,l=e.x,l=(s.x=l+i*(t.x-l),e.y),l=(s.y=l+i*(t.y-l),e.z),l=(s.z=l+i*(t.z-l),e.w);s.w=l+i*(t.w-l)},__class__:ll}),(i["hacksaw.core.h3d.particles.behaviorModules.InheritParentVelocity"]=rl).__name__="hacksaw.core.h3d.particles.behaviorModules.InheritParentVelocity",rl.__interfaces__=[lh,rh],rl.__super__=Ia,rl.prototype=e(Ia.prototype,{onSpawn:function(e){e.velocity.x+=this.groupVelocity.x*this.scale,e.velocity.y+=this.groupVelocity.y*this.scale,e.velocity.z+=this.groupVelocity.z*this.scale},onGroupUpdate:function(e,t){this.groupVelocity=e.get_currentVelocity()},__class__:rl}),(i["hacksaw.core.h3d.primitives.Plane"]=ol).__name__="hacksaw.core.h3d.primitives.Plane",ol.__super__=Yn,ol.prototype=e(Yn.prototype,{addUVs:function(){this.uvs=[];for(var e=new vo(0,this.uvT),t=new vo(this.uvS,this.uvT),n=new vo(0,0),i=new vo(this.uvS,0),s=0,a=this.points.length>>2;s<a;)++s,this.uvs.push(e),this.uvs.push(t),this.uvs.push(n),this.uvs.push(i)},__class__:ol}),(i["hacksaw.core.h3d.primitives.SpinePrimitive"]=ul).__name__="hacksaw.core.h3d.primitives.SpinePrimitive",ul.__super__=Hn,ul.prototype=e(Hn.prototype,{alloc:function(e){this.indexCount<=0||(this.dispose(),this.addBuffer(zr.ofFloats(this.vertexBuffer,this.bufferFormat)),this.indexes=Or.alloc(this.indexBuffer),this.uploadedVertices=this.verticesCount,this.uploadedIndices=this.indexCount)},render:function(e){this.indexCount<=0||(this.verticesCount>this.uploadedVertices||this.indexCount>this.uploadedIndices||null==this.buffer||null==this.indexes||null==this.buffer.vbuf||null==this.indexes.vbuf?(null!=this.buffer&&null!=this.buffer.vbuf&&this.buffer.dispose(),null!=this.indexes&&null!=this.indexes.vbuf&&this.indexes.dispose(),this.alloc(Vr.CURRENT)):(this.buffer.uploadFloats(this.vertexBuffer,0,this.verticesCount/this.vertexStride|0),Or.uploadIndexes(this.indexes,this.indexBuffer,0,this.indexCount)),e.renderIndexed(this.buffer,this.indexes,0,this.indexCount/3|0))},getCollider:function(){return null},getBounds:function(){for(var e=new Ur,t=0;t<this.vertexBuffer.pos;){var n=this.vertexBuffer.array[t],i=this.vertexBuffer.array[t+1],s=this.vertexBuffer.array[t+2],n=(n=null==n?0:n,i=null==i?0:i,s=null==s?0:s,null==n?0:n),i=null==i?0:i,s=null==s?0:s;n<e.xMin&&(e.xMin=n),n>e.xMax&&(e.xMax=n),i<e.yMin&&(e.yMin=i),i>e.yMax&&(e.yMax=i),s<e.zMin&&(e.zMin=s),s>e.zMax&&(e.zMax=s),t+=this.vertexStride}return e},__class__:ul}),(i["hacksaw.core.h3d.primitives.SplinePrimitive"]=hl).__name__="hacksaw.core.h3d.primitives.SplinePrimitive",hl.__super__=Yn,hl.prototype=e(Yn.prototype,{fillPolygon:function(e){for(var t=this.addUVSeams(this.extrusionShapeVertices=this.getShapeData()),n=t.positions,i=new Array(n.length),s=0,a=n.length;s<a;){var l=n[D=s++];i[D]=st.fromBacking(new it(0,l.y,l.x,null))}for(var n=t.normals,r=new Array(n.length),s=0,a=n.length;s<a;){var o=n[D=s++];r[D]=st.fromBacking(new it(0,o.y,o.x,null))}for(var u=il.zip3(i,r,t.uvs),h=this.generateExtrusionData(e),c=[],s=0,a=h.length;s<a;){for(var _=(E=h[s++])._0,d=E._1,p=[],m=0,g=u.length;m<g;){var f,A=M=(n=u[m++]._0).x*d._11+n.y*d._21+n.z*d._31+n.w*d._41,x=I=n.x*d._12+n.y*d._22+n.z*d._32+n.w*d._42,w=B=n.x*d._13+n.y*d._23+n.z*d._33+n.w*d._43,y=null==(T=n.x*d._14+n.y*d._24+n.z*d._34+n.w*d._44)?1:T,b=st.fromVector4(new q(A=null==M?0:A,x=null==I?0:x,w=null==B?0:w,y)),v=_.x,C=(v=null==v||null==(C=b.x)?null:v+C,_.y),S=(f=null==C||null==(f=b.y)?null:C+f,_.z),k=(S=null==S||null==(k=b.z)?null:S+k,_.w);b=null==k||null==(b=b.w)?null:k+b,p.push(st.to3dPoint(st.fromBacking(new it(null!=v?v:_.x,null!=f?f:_.y,null!=S?S:_.z,null!=b?b:_.w))))}c.push(p)}this.points=Array.prototype.concat.apply([],c);for(c=[],s=0,a=h.length;s<a;){for(d=h[s++]._1,p=[],m=0,g=u.length;m<g;){var M,I,B,T,A=M=(n=u[m++]._1).x*d._11+n.y*d._21+n.z*d._31+n.w*d._41,x=I=n.x*d._12+n.y*d._22+n.z*d._32+n.w*d._42,w=B=n.x*d._13+n.y*d._23+n.z*d._33+n.w*d._43,y=null==(T=n.x*d._14+n.y*d._24+n.z*d._34+n.w*d._44)?1:T;p.push(st.to3dPoint(st.fromVector4(new q(A=null==M?0:A,x=null==I?0:x,w=null==B?0:w,y))))}c.push(p)}this.normals=Array.prototype.concat.apply([],c);for(c=[],s=0,a=h.length;s<a;){for(var E=h[s++],p=[],m=0,g=u.length;m<g;)p.push(new vo(E._2,u[m++]._2.v));c.push(p)}this.uvs=Array.prototype.concat.apply([],c);for(var z=1/this.spline.get_totalArcLength(),i=new Array(e.length),s=0,a=e.length;s<a;)i[D=s++]=e[D]*z;for(c=[],s=0,a=i.length;s<a;){for(var Q=i[s++],p=[],m=0,g=u.length;m<g;){A=Q;null==(x=u[m++]._2.v)&&(x=0),p.push(new St(A=null==Q?0:A,x))}c.push(p)}this._curvePositions=Array.prototype.concat.apply([],c),this.extrusionEndPoints={start:h[0],end:h[h.length-1]};for(var V=h.length-1,F=u.length,O=F-(2<F?0:1),s=[],a=0;a<V;)s.push(a++*F);for(i=new Array(s.length),a=0,m=s.length;a<m;){for(var D,R=s[D=a++],g=[],W=0;W<O;)g.push(W++);for(var n=g,r=new Array(n.length),N=0,G=n.length;N<G;){var U=N++,P=n[U],L=R+P+F,j=R+(P+1)%F;r[U]=[L,R+P,j,j,R+(P+1)%F+F,L]}i[D]=Array.prototype.concat.apply([],r)}t=Array.prototype.concat.apply([],i);this.idx=t},createEndpointShape:function(e){for(var t=this.extrusionShapeVertices,n=t.positions,i=new Array(n.length),s=0,a=n.length;s<a;){var l=n[S=s++];i[S]=st.fromBacking(new it(0,l.y,l.x,null))}for(var n=t.normals,r=new Array(n.length),s=0,a=n.length;s<a;){var o=n[S=s++];r[S]=st.fromBacking(new it(0,o.y,o.x,null))}for(var u=il.zip3(i,r,t.uvs),t=e?this.extrusionEndPoints.end:this.extrusionEndPoints.start,l=t._0,h=t._1,o=st.fromBacking(new it(e?1:-1,null,null,null)),i=new Array(u.length),s=0,a=u.length;s<a;){var c,_=y=(n=u[S=s++]._0).x*h._11+n.y*h._21+n.z*h._31+n.w*h._41,d=b=n.x*h._12+n.y*h._22+n.z*h._32+n.w*h._42,p=v=n.x*h._13+n.y*h._23+n.z*h._33+n.w*h._43,m=null==(C=n.x*h._14+n.y*h._24+n.z*h._34+n.w*h._44)?1:C,g=st.fromVector4(new q(_=null==y?0:_,d=null==b?0:d,p=null==v?0:p,m)),f=l.x,A=(f=null==f||null==(A=g.x)?null:f+A,l.y),x=(c=null==A||null==(c=g.y)?null:A+c,l.z),w=(x=null==x||null==(w=g.z)?null:x+w,l.w);g=null==w||null==(g=g.w)?null:w+g,i[S]=st.to3dPoint(st.fromBacking(new it(null!=f?f:l.x,null!=c?c:l.y,null!=x?x:l.z,null!=g?g:l.w)))}for(r=new Array(u.length),s=0,a=u.length;s<a;){var y,b,v,C,S=s++,_=y=(n=o).x*h._11+n.y*h._21+n.z*h._31+n.w*h._41,d=b=n.x*h._12+n.y*h._22+n.z*h._32+n.w*h._42,p=v=n.x*h._13+n.y*h._23+n.z*h._33+n.w*h._43,m=null==(C=n.x*h._14+n.y*h._24+n.z*h._34+n.w*h._44)?1:C;r[S]=st.to3dPoint(st.fromVector4(new q(_=null==y?0:_,d=null==b?0:d,p=null==v?0:p,m)))}for(var k=new Array(u.length),s=0,a=u.length;s<a;)k[S=s++]=u[S]._2;for(var s=[],a=1,M=u.length-1;a<M;)s.push(a++);for(var n=s,I=new Array(n.length),s=0,a=n.length;s<a;){var B=n[S=s++];I[S]=[0,B+1,B]}t=Array.prototype.concat.apply([],I),e&&t.reverse(),e=new Yn(i,t);return e.normals=r,e.uvs=k,e},alloc:function(e){this.dispose();for(var t=Lx.get_POS3D(),n=(null!=this.normals&&(t=t.append("normal",3)),null!=this.tangents&&(t=t.append("tangent",3)),null!=this.uvs&&(t=t.append("uv",2)),null!=this.colors&&(t=t.append("color",3)),null!=this._curvePositions&&(t=t.append("curvePosition",2)),qx._new(0)),i=this.vertexCount(),s=0;s<i;){var a,l,r,o,u=s++,h=this.points[u],c=h.x,_=(n.pos==n.array.length&&((_=n.array.length<<1)<128&&(_=128),(_=new Float32Array(_)).set(n.array),n.array=_),n.array[n.pos++]=c,h.y),c=(n.pos==n.array.length&&((c=n.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(n.array),n.array=c),n.array[n.pos++]=_,h.z);n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(n.array),n.array=h),n.array[n.pos++]=c,null!=this.normals&&(c=(h=this.normals[u]).x,n.pos==n.array.length&&((a=n.array.length<<1)<128&&(a=128),(a=new Float32Array(a)).set(n.array),n.array=a),n.array[n.pos++]=c,a=h.y,n.pos==n.array.length&&((c=n.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(n.array),n.array=c),n.array[n.pos++]=a,c=h.z,n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(n.array),n.array=h),n.array[n.pos++]=c),null!=this.tangents&&(c=(h=this.tangents[u]).x,n.pos==n.array.length&&((l=n.array.length<<1)<128&&(l=128),(l=new Float32Array(l)).set(n.array),n.array=l),n.array[n.pos++]=c,l=h.y,n.pos==n.array.length&&((c=n.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(n.array),n.array=c),n.array[n.pos++]=l,c=h.z,n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(n.array),n.array=h),n.array[n.pos++]=c),null!=this.uvs&&(c=(h=this.uvs[u]).u,n.pos==n.array.length&&((r=n.array.length<<1)<128&&(r=128),(r=new Float32Array(r)).set(n.array),n.array=r),n.array[n.pos++]=c,r=h.v,n.pos==n.array.length&&((c=n.array.length<<1)<128&&(c=128),(h=new Float32Array(c)).set(n.array),n.array=h),n.array[n.pos++]=r),null!=this.colors&&(h=(c=this.colors[u]).x,n.pos==n.array.length&&((o=n.array.length<<1)<128&&(o=128),(o=new Float32Array(o)).set(n.array),n.array=o),n.array[n.pos++]=h,o=c.y,n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(h=new Float32Array(h)).set(n.array),n.array=h),n.array[n.pos++]=o,h=c.z,n.pos==n.array.length&&((c=n.array.length<<1)<128&&(c=128),(c=new Float32Array(c)).set(n.array),n.array=c),n.array[n.pos++]=h),null!=this._curvePositions&&(h=(c=this._curvePositions[u]).x,n.pos==n.array.length&&((u=n.array.length<<1)<128&&(u=128),(u=new Float32Array(u)).set(n.array),n.array=u),n.array[n.pos++]=h,u=c.y,n.pos==n.array.length&&((h=n.array.length<<1)<128&&(h=128),(c=new Float32Array(h)).set(n.array),n.array=c),n.array[n.pos++]=u)}this.addBuffer(zr.ofFloats(n,t)),null!=this.idx&&(this.indexes=Or.alloc(this.idx))},generateExtrusionData:function(e){for(var t=new Array(e.length),n=0,i=e.length;n<i;)t[w=n++]=this.spline.getSegmentDataByDistance(e[w]);for(var s=new Array(t.length),n=0,i=t.length;n<i;){var a=t[w=n++];s[w]=a.segment.getPoint(a.t)}for(var l,r=new Array(t.length),n=0,i=t.length;n<i;){a=t[w=n++];r[w]=a.segment.getOrientation(a.t)}switch((n=this.uvMode)._hx_index){case 0:u=1;break;case 1:u=n.rate;break;case 2:u=n.repeats;break;case 3:var o=(e[e.length-1]-e[0])/n.distance,u=n.clampTexture?Math.round(o):o}if(2==this.uvMode._hx_index){for(var n=[],i=0,h=this.spline.get_segmentCount();i<h;)n.push({range:this.spline.getSegmentEndPointsDistance(i++),distances:[]});for(var c=n,_=il.reduce(e,function(e,t){return e[Ry.wrapCircular(il.findIndex(c,function(e){e=e.range;return t>=e.start&&t<=e.end}),c.length)].distances.push(t),e},c),d=[],n=0,i=_.length;n<i;){for(var p=_[w=n++],m=p.range,g=p.distances,t=new Array(g.length),h=0,f=g.length;h<f;){var A=h++,x=m.start;t[A]=(w+(g[A]-x)*(w+1-w)/(m.end-x))*u}d.push(t)}l=Array.prototype.concat.apply([],d)}else{for(var w,y=e[0],b=e[e.length-1],t=new Array(e.length),n=0,i=e.length;n<i;)t[w=n++]=(e[w]-y)/(b-y)*u;l=t}return il.zip3(s,r,l)},getShapeData:function(){var e,t=this.extrusionShapeType;switch(t._hx_index){case 0:var n=i=.5*t.width;null==(l=-i)&&(l=0),e=new ph([new St(0,n=null==i?0:n),new St(0,l)],[new St(1,0),new St(1,0)],[new vo(0,0),new vo(1,1)]);break;case 1:var i=.5*t.width,s=.5*t.height,a=-i,l=null==s?0:s,r=(null==a&&(a=0),i),o=null==s?0:s,u=(null==i&&(r=0),i),h=-s;null==h&&(h=0),null==i&&(u=0),e=new ph([new St(g=null==(g=-i)?0:g,n=null==(n=-s)?0:n),new St(a,l),new St(r,o),new St(u,h)],[new St(-.5,-.5),new St(-.5,.5),new St(.5,.5),new St(.5,-.5)],[new vo(0,1),new vo(0,0),new vo(1,0),new vo(1,1)]);break;case 2:for(var c=t.radius,_=1/(x=t.segments)*Math.PI*2,d=[],p=0;p<x;){var m=p++,g=Math.sin(m*_)*c,n=Math.cos(m*_)*c;d.push(new St(g=null==g?0:g,n=null==n?0:n))}for(c=[],p=0;p<x;){m=p++;c.push(new vo(.5*(1+Math.cos(m*_)),.5*(1+Math.sin(m*_))))}for(var i=new ph(d,null,c),f=i.positions,A=new Array(f.length),c=0,x=f.length;c<x;){var w=f[m=c++],y=(y=w.x*w.x+w.y*w.y)<1e-20?0:1/Math.sqrt(y),g=w.x*y;null==(n=w.y*y)&&(n=0),null==g&&(g=0),A[m]=new St(g,n)}i.normals=A,e=i;break;case 3:e=t.shape}return e},addUVSeams:function(e){var t=this.extrusionShapeType;return 1==t._hx_index&&t.singleFaceTexture?(t=[new vo(0,1),new vo(0,0),new vo(0,1),new vo(0,0),new vo(1,1),new vo(1,0),new vo(1,1),new vo(1,0)],new ph(il.reduce(il.zip(e.positions,e.positions),function(e,t){return e.concat([t._0,t._1])},[]),il.reduce(il.zip(e.normals,e.normals),function(e,t){return e.concat([t._0,t._1])},[]),t)):e},__class__:hl}),function(e,t,n){this.uvs=[],this.normals=[],this.positions=[],null!=e&&(this.positions=e),null!=t&&(this.normals=t),null!=n&&(this.uvs=n)}),mh=((i["hacksaw.core.h3d.primitives.ShapeVertexData"]=ph).__name__="hacksaw.core.h3d.primitives.ShapeVertexData",ph.prototype={__class__:ph},fe["hacksaw.core.h3d.primitives.UVMode"]={__ename__:!0,__constructs__:null,Stretch:{_hx_name:"Stretch",_hx_index:0,__enum__:"hacksaw.core.h3d.primitives.UVMode",toString:o},Tile:((R=function(e){return{_hx_index:1,rate:e,__enum__:"hacksaw.core.h3d.primitives.UVMode",toString:o}})._hx_name="Tile",R.__params__=["rate"],R),RepeatPerSegment:((R=function(e){return{_hx_index:2,repeats:e,__enum__:"hacksaw.core.h3d.primitives.UVMode",toString:o}})._hx_name="RepeatPerSegment",R.__params__=["repeats"],R),RepeatByDistance:((R=function(e,t){return{_hx_index:3,distance:e,clampTexture:t,__enum__:"hacksaw.core.h3d.primitives.UVMode",toString:o}})._hx_name="RepeatByDistance",R.__params__=["distance","clampTexture"],R)}),gh=(mh.__constructs__=[mh.Stretch,mh.Tile,mh.RepeatPerSegment,mh.RepeatByDistance],mh.__empty_constructs__=[mh.Stretch],fe["hacksaw.core.h3d.primitives.ExtrusionShape"]={__ename__:!0,__constructs__:null,Line:((R=function(e){return{_hx_index:0,width:e,__enum__:"hacksaw.core.h3d.primitives.ExtrusionShape",toString:o}})._hx_name="Line",R.__params__=["width"],R),Rectangle:((R=function(e,t,n){return{_hx_index:1,width:e,height:t,singleFaceTexture:n,__enum__:"hacksaw.core.h3d.primitives.ExtrusionShape",toString:o}})._hx_name="Rectangle",R.__params__=["width","height","singleFaceTexture"],R),Circle:((R=function(e,t){return{_hx_index:2,radius:e,segments:t,__enum__:"hacksaw.core.h3d.primitives.ExtrusionShape",toString:o}})._hx_name="Circle",R.__params__=["radius","segments"],R),Custom:((R=function(e){return{_hx_index:3,shape:e,__enum__:"hacksaw.core.h3d.primitives.ExtrusionShape",toString:o}})._hx_name="Custom",R.__params__=["shape"],R)}),fh=(gh.__constructs__=[gh.Line,gh.Rectangle,gh.Circle,gh.Custom],gh.__empty_constructs__=[],(i["hacksaw.core.h3d.shaders.BitmapMaskShader"]=cl).__name__="hacksaw.core.h3d.shaders.BitmapMaskShader",cl._SHADER=null,cl.__super__=W,cl.prototype=e(W.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_mask:function(){return this.mask__},set_mask:function(e){return this.mask__=e},get_maskMatA:function(){return this.maskMatA__},set_maskMatA:function(e){return this.maskMatA__=e},get_maskMatB:function(){return this.maskMatB__},set_maskMatB:function(e){return this.maskMatB__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.texture__;case 2:return this.mask__;case 3:return this.maskMatA__;case 4:return this.maskMatB__}return null},getParamFloatValue:function(e){return 0==e?this.flipY__:0},__class__:cl,__properties__:e(W.prototype.__properties__,{set_maskMatB:"set_maskMatB",get_maskMatB:"get_maskMatB",set_maskMatA:"set_maskMatA",get_maskMatA:"get_maskMatA",set_mask:"set_mask",get_mask:"get_mask",set_texture:"set_texture",get_texture:"get_texture"})}),(i["hacksaw.core.h3d.shaders.ColorMultiplierShader"]=_l).__name__="hacksaw.core.h3d.shaders.ColorMultiplierShader",_l._SHADER=null,_l.__super__=O,_l.prototype=e(O.prototype,{get_multiplier:function(){return this.multiplier__},set_multiplier:function(e){return this.multiplier__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return 0==e?this.multiplier__:null},getParamFloatValue:function(e){return 0},__class__:_l,__properties__:{set_multiplier:"set_multiplier",get_multiplier:"get_multiplier"}}),function(e,t){null==t&&(t=0),this.amount__=0,this.weight__=[],this.offset__=[],this.direction__=new Gr(0,0,0),At.call(this),this.direction__=e?new Gr(1,0,0):new Gr(0,1,0),this.amount__=t,this.offset__=[0,4,8,12,16,20],this.weight__=[.19859610213125314,.17571363439579307,.12170274650962626,.06598396774984912,.028001560233780885,.009300040045324049]}),Ah=((i["hacksaw.core.h3d.shaders.GaussianBlurSingleAxisShader"]=fh).__name__="hacksaw.core.h3d.shaders.GaussianBlurSingleAxisShader",fh._SHADER=null,fh.__super__=At,fh.prototype=e(At.prototype,{get_direction:function(){return this.direction__},set_direction:function(e){return this.direction__=e},get_offset:function(){return this.offset__},set_offset:function(e){return this.offset__=e},get_weight:function(){return this.weight__},set_weight:function(e){return this.weight__=e},get_amount:function(){return this.amount__},set_amount:function(e){return this.amount__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.colorMap__;case 2:return this.colorMap2__;case 3:return this.normalMap__;case 4:return this.depthMap__;case 5:return this.noiseMap__;case 6:return this.resolution__;case 7:return this.time__;case 8:return this.direction__;case 9:return this.offset__;case 10:return this.weight__;case 11:return this.amount__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 7:return this.time__;case 11:return this.amount__}return 0},__class__:fh,__properties__:e(At.prototype.__properties__,{set_amount:"set_amount",get_amount:"get_amount",set_weight:"set_weight",get_weight:"get_weight",set_offset:"set_offset",get_offset:"get_offset",set_direction:"set_direction",get_direction:"get_direction"})}),function(e){this.uvRotationFit__=0,this.uvRotation__=0,this.uvRepeatEnable__=[],this.uvRepeat__=[],this.uvOffset__=[],this.uvMargin__=[],this.uvScale__=[],this.uvPosition__=[],this.NbTiles__=0,Ho.call(this,null),this.constModified=!0,this.NbTiles__=e}),xh=((i["hacksaw.core.h3d.shaders.MultiTileTextureShader"]=Ah).__name__="hacksaw.core.h3d.shaders.MultiTileTextureShader",Ah._SHADER=null,Ah.__super__=Ho,Ah.prototype=e(Ho.prototype,{get_NbTiles:function(){return this.NbTiles__},set_NbTiles:function(e){return this.constModified=!0,this.NbTiles__=e},get_uvPosition:function(){return this.uvPosition__},set_uvPosition:function(e){return this.uvPosition__=e},get_uvScale:function(){return this.uvScale__},set_uvScale:function(e){return this.uvScale__=e},get_uvMargin:function(){return this.uvMargin__},set_uvMargin:function(e){return this.uvMargin__=e},get_uvOffset:function(){return this.uvOffset__},set_uvOffset:function(e){return this.uvOffset__=e},get_uvRepeat:function(){return this.uvRepeat__},set_uvRepeat:function(e){return this.uvRepeat__=e},get_uvRepeatEnable:function(){return this.uvRepeatEnable__},set_uvRepeatEnable:function(e){return this.uvRepeatEnable__=e},get_texture2:function(){return this.texture2__},set_texture2:function(e){return this.texture2__=e},get_uvRotation:function(){return this.uvRotation__},set_uvRotation:function(e){return this.uvRotation__=e},get_uvRotationFit:function(){return this.uvRotationFit__},set_uvRotationFit:function(e){return this.uvRotationFit__=e},updateConstants:function(e){this.constBits=0,this.additive__&&(this.constBits|=1),this.killAlpha__&&(this.constBits|=2),this.specularAlpha__&&(this.constBits|=4);var t=this.NbTiles__;if(t>>>8!=0)throw tl.thrown("NbTiles is out of range "+t+">255, consider using @const(MAX_VALUE)");this.constBits|=t<<3,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.additive__;case 1:return this.killAlpha__;case 2:return this.specularAlpha__;case 3:return this.killAlphaThreshold__;case 4:return this.texture__;case 5:return this.NbTiles__;case 6:return this.uvPosition__;case 7:return this.uvScale__;case 8:return this.uvMargin__;case 9:return this.uvOffset__;case 10:return this.uvRepeat__;case 11:return this.uvRepeatEnable__;case 12:return this.texture2__;case 13:return this.uvRotation__;case 14:return this.uvRotationFit__}return null},getParamFloatValue:function(e){switch(e){case 3:return this.killAlphaThreshold__;case 5:return this.NbTiles__;case 13:return this.uvRotation__;case 14:return this.uvRotationFit__}return 0},__class__:Ah,__properties__:e(Ho.prototype.__properties__,{set_uvRotationFit:"set_uvRotationFit",get_uvRotationFit:"get_uvRotationFit",set_uvRotation:"set_uvRotation",get_uvRotation:"get_uvRotation",set_texture2:"set_texture2",get_texture2:"get_texture2",set_uvRepeatEnable:"set_uvRepeatEnable",get_uvRepeatEnable:"get_uvRepeatEnable",set_uvRepeat:"set_uvRepeat",get_uvRepeat:"get_uvRepeat",set_uvOffset:"set_uvOffset",get_uvOffset:"get_uvOffset",set_uvMargin:"set_uvMargin",get_uvMargin:"get_uvMargin",set_uvScale:"set_uvScale",get_uvScale:"get_uvScale",set_uvPosition:"set_uvPosition",get_uvPosition:"get_uvPosition",set_NbTiles:"set_NbTiles",get_NbTiles:"get_NbTiles"})}),(i["hacksaw.core.h3d.shaders.PremultiplyAlpha"]=dl).__name__="hacksaw.core.h3d.shaders.PremultiplyAlpha",dl._SHADER=null,dl.__super__=O,dl.prototype=e(O.prototype,{updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return null},getParamFloatValue:function(e){return 0},__class__:dl}),(i["hacksaw.core.h3d.shaders.SDFDepthWriteShader"]=pl).__name__="hacksaw.core.h3d.shaders.SDFDepthWriteShader",pl._SHADER=null,pl.__super__=O,pl.prototype=e(O.prototype,{updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return null},getParamFloatValue:function(e){return 0},__class__:pl}),(i["hacksaw.core.h3d.shaders.SignedDistanceField3D"]=ml).__name__="hacksaw.core.h3d.shaders.SignedDistanceField3D",ml._SHADER=null,ml.__super__=O,ml.prototype=e(O.prototype,{get_texture:function(){return this.texture__},set_texture:function(e){return this.texture__=e},get_distanceRange:function(){return this.distanceRange__},set_distanceRange:function(e){return this.distanceRange__=e},get_outlineColor:function(){return this.outlineColor__},set_outlineColor:function(e){return this.outlineColor__=e},get_shadowColor:function(){return this.shadowColor__},set_shadowColor:function(e){return this.shadowColor__=e},get_outlineWidth:function(){return this.outlineWidth__},set_outlineWidth:function(e){return this.outlineWidth__=e},get_outlineStrength:function(){return this.outlineStrength__},set_outlineStrength:function(e){return this.outlineStrength__=e},get_shadowMetrics:function(){return this.shadowMetrics__},set_shadowMetrics:function(e){return this.shadowMetrics__=e},get_fillColor:function(){return this.fillColor__},set_fillColor:function(e){return this.fillColor__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.texture__;case 1:return this.distanceRange__;case 2:return this.outlineColor__;case 3:return this.shadowColor__;case 4:return this.outlineWidth__;case 5:return this.outlineStrength__;case 6:return this.shadowMetrics__;case 7:return this.fillColor__}return null},getParamFloatValue:function(e){switch(e){case 1:return this.distanceRange__;case 4:return this.outlineWidth__;case 5:return this.outlineStrength__}return 0},__class__:ml,__properties__:{set_fillColor:"set_fillColor",get_fillColor:"get_fillColor",set_shadowMetrics:"set_shadowMetrics",get_shadowMetrics:"get_shadowMetrics",set_outlineStrength:"set_outlineStrength",get_outlineStrength:"get_outlineStrength",set_outlineWidth:"set_outlineWidth",get_outlineWidth:"get_outlineWidth",set_shadowColor:"set_shadowColor",get_shadowColor:"get_shadowColor",set_outlineColor:"set_outlineColor",get_outlineColor:"get_outlineColor",set_distanceRange:"set_distanceRange",get_distanceRange:"get_distanceRange",set_texture:"set_texture",get_texture:"get_texture"}}),(i["hacksaw.core.h3d.shaders.SpineClippingShader"]=gl).__name__="hacksaw.core.h3d.shaders.SpineClippingShader",gl._SHADER=null,gl.__super__=O,gl.prototype=e(O.prototype,{updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return null},getParamFloatValue:function(e){return 0},__class__:gl}),(i["hacksaw.core.h3d.shaders.VertexColorDarkTint"]=fl).__name__="hacksaw.core.h3d.shaders.VertexColorDarkTint",fl._SHADER=null,fl.__super__=O,fl.prototype=e(O.prototype,{updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return null},getParamFloatValue:function(e){return 0},__class__:fl}),(i["hacksaw.core.h3d.shaders.instancing.InstancedBaseMeshShader"]=Al).__name__="hacksaw.core.h3d.shaders.instancing.InstancedBaseMeshShader",Al._SHADER=null,Al.__super__=O,Al.prototype=e(O.prototype,{updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){return null},getParamFloatValue:function(e){return 0},__class__:Al}),(i["hacksaw.core.h3d.shaders.instancing.InstancedTileTextureShader"]=xl).__name__="hacksaw.core.h3d.shaders.instancing.InstancedTileTextureShader",xl._SHADER=null,xl.__super__=Ho,xl.prototype=e(Ho.prototype,{updateConstants:function(e){this.constBits=0,this.additive__&&(this.constBits|=1),this.killAlpha__&&(this.constBits|=2),this.specularAlpha__&&(this.constBits|=4),this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.additive__;case 1:return this.killAlpha__;case 2:return this.specularAlpha__;case 3:return this.killAlphaThreshold__;case 4:return this.texture__}return null},getParamFloatValue:function(e){return 3==e?this.killAlphaThreshold__:0},__class__:xl}),(i["hacksaw.core.h3d.shaders.tween.EdgeMixColorMultShader"]=wl).__name__="hacksaw.core.h3d.shaders.tween.EdgeMixColorMultShader",wl._SHADER=null,wl.__super__=G,wl.prototype=e(G.prototype,{get_x:function(){return this.rate__},set_x:function(e){return this.rate__=e},get_y:function(){return this.direction__.x},set_y:function(e){return this.direction__.x=Math.round(e<-1?-1:1<e?1:e)},get_z:function(){return this.direction__.y},set_z:function(e){return this.direction__.y=Math.round(e<-1?-1:1<e?1:e)},get_rate:function(){return this.rate__},set_rate:function(e){return this.rate__=e},get_colorMultiplier:function(){return this.colorMultiplier__},set_colorMultiplier:function(e){return this.colorMultiplier__=e},get_direction:function(){return this.direction__},set_direction:function(e){return this.direction__=e},get_blendFactor:function(){return this.blendFactor__},set_blendFactor:function(e){return this.blendFactor__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.time__;case 1:return this.rate__;case 2:return this.colorMultiplier__;case 3:return this.direction__;case 4:return this.blendFactor__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.time__;case 1:return this.rate__;case 4:return this.blendFactor__}return 0},__class__:wl,__properties__:e(G.prototype.__properties__,{set_blendFactor:"set_blendFactor",get_blendFactor:"get_blendFactor",set_direction:"set_direction",get_direction:"get_direction",set_colorMultiplier:"set_colorMultiplier",get_colorMultiplier:"get_colorMultiplier",set_rate:"set_rate",get_rate:"get_rate"})}),(i["hacksaw.core.h3d.shaders.tween.EdgeMixColorMultConfig"]=yl).__name__="hacksaw.core.h3d.shaders.tween.EdgeMixColorMultConfig",yl.prototype={__class__:yl},(i["hacksaw.core.h3d.spine.SpineAnimator"]=bl).__name__="hacksaw.core.h3d.spine.SpineAnimator",bl.prototype={play:function(e,t,z,n){null==t&&(t=e.loop),null==n&&(n=!e.interruptTrack),null==z&&(z=e.mixDuration);var Q=new xh,V=Q.entryDone;if(n){var i=this.animationState,s=e.trackIndex,a=e.animationName;if(null==(k=i.data.skeletonData.findAnimation(a)))throw tl.thrown(new Dw("Animation not found: "+a));var l,n=0;if(s<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));if(null==k)throw tl.thrown(new Dw("animation cannot be null."));if(null!=(l=s<i.tracks.length?i.tracks[s]:((B=s+1)<(T=(o=i.tracks).length)?o.splice(B,B-T):T<B&&(o[B-1]=null),null)))for(;null!=l.next;)l=l.next;if((M=i.trackEntryPool.obtain()).trackIndex=s,M.animation=k,M.loop=t,M.holdPrevious=!1,M.eventThreshold=0,M.attachmentThreshold=0,M.drawOrderThreshold=0,M.animationStart=0,M.animationEnd=k.getDuration(),M.animationLast=-1,M.nextAnimationLast=-1,M.delay=0,M.trackTime=0,M.trackLast=-1,M.nextTrackLast=-1,M.trackEnd=999999999,M.timeScale=1,M.alpha=1,M.interruptAlpha=1,M.mixTime=0,null==l)I=0;else{var r=i.data;if(null==(F=l.animation))throw tl.thrown(new Dw("from cannot be null."));if(null==k)throw tl.thrown(new Dw("to cannot be null."));r.tempAnimationStateDataKey.a1=F,r.tempAnimationStateDataKey.a2=k;var o=r.animationToMixTime,u=r.tempAnimationStateDataKey,O=(null==(D=r.defaultMix)&&(D=0),u.getHashCode()),h=D;if(null!=(R=o.h[O]))for(var c=0,_=R.length;c<_;)if((P=R[c++]).key.equals(u)){h=P.value;break}I=h}if(M.mixDuration=I,M.mixBlend=2,null==l){if(F=s<i.tracks.length?i.tracks[s]:((B=s+1)<(T=(o=i.tracks).length)?o.splice(B,B-T):T<B&&(o[B-1]=null),null),((i.tracks[s]=M).previous=null)!=F&&((r=i.queue).objects.push(1),r.objects.push(F),((M.mixingFrom=F).mixingTo=M).mixTime=0,null!=F.mixingFrom&&0<F.mixDuration&&(M.interruptAlpha*=Math.min(1,F.mixTime/F.mixDuration)),(o=F.timelinesRotation).splice(0,o.length)),(r=i.queue).objects.push(0),r.objects.push(M),r.AnimationState_this.animationsChanged=!0,!(r=i.queue).drainDisabled){r.drainDisabled=!0;for(var d=r.AnimationState_this.listeners,p=0;p<r.objects.length;){var m=r.objects[p],h=r.objects[p+1],g=d.array.length,f=d.begin();do{if(0==m){null!=h.listener&&h.listener.start(h);for(var A=0;A<g;)f[A].start(h),++A;break}if(1==m){null!=h.listener&&h.listener.interrupt(h);for(var x=0;x<g;)f[x].interrupt(h),++x;break}if(2==m){null!=h.listener&&h.listener.end(h);for(var w=0;w<g;)f[w].end(h),++w;null!=h.listener&&h.listener.dispose(h);for(var y=0;y<g;)f[y].dispose(h),++y;r.AnimationState_this.trackEntryPool.free(h);break}if(3==m){null!=h.listener&&h.listener.dispose(h);for(var b=0;b<g;)f[b].dispose(h),++b;r.AnimationState_this.trackEntryPool.free(h);break}if(4==m){null!=h.listener&&h.listener.complete(h);for(var v=0;v<g;)f[v].complete(h),++v;break}if(5==m){for(var C=r.objects[2+p++],S=(null!=h.listener&&h.listener.event(h,C),0);S<g;)f[S].event(h,C),++S;break}}while(0);d.end(),p+=2}(o=r.objects).splice(0,o.length),r.drainDisabled=!1}}else n=((l.next=M).previous=l).getTrackComplete()-M.mixDuration;M.delay=n}else{for(var W=this._tracks[e.trackIndex],c=[];null!=W;){var N=W.listener,W=W.next;c.push(N)}for(i=il.filterNull(c),h=new Array(i.length),c=0,_=i.length;c<_;)h[p=c++]=nl.__cast(i[p],xh);il.each(h,function(e){e.entryDone.trigger(!1)});var k,n=e.attachmentOverrides,i=(this._attachmentOverrides=null!=n?n:this._attachmentOverrides,this.animationState),s=e.trackIndex,a=e.animationName;if(null==(k=i.data.skeletonData.findAnimation(a)))throw tl.thrown(new Dw("Animation not found: "+a));if(s<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));if(null==k)throw tl.thrown(new Dw("animation cannot be null."));var M,I,B,T,n=!0,a=s<i.tracks.length?i.tracks[s]:((B=s+1)<(T=(o=i.tracks).length)?o.splice(B,B-T):T<B&&(o[B-1]=null),null);if(null!=a)if(-1==a.nextTrackLast){i.tracks[s]=a.mixingFrom,(r=i.queue).objects.push(1),r.objects.push(a);(r=i.queue).objects.push(2),r.objects.push(a),r.AnimationState_this.animationsChanged=!0;for(var E=a.next;null!=E;)(r=i.queue).objects.push(3),r.objects.push(E),E=E.next;a.next=null,a=a.mixingFrom,n=!1}else{for(E=a.next;null!=E;)(r=i.queue).objects.push(3),r.objects.push(E),E=E.next;a.next=null}if((M=i.trackEntryPool.obtain()).trackIndex=s,M.animation=k,M.loop=t,M.holdPrevious=!1,M.eventThreshold=0,M.attachmentThreshold=0,M.drawOrderThreshold=0,M.animationStart=0,M.animationEnd=k.getDuration(),M.animationLast=-1,M.nextAnimationLast=-1,M.delay=0,M.trackTime=0,M.trackLast=-1,M.nextTrackLast=-1,M.trackEnd=999999999,M.timeScale=1,M.alpha=1,M.interruptAlpha=1,M.mixTime=0,null==a)I=0;else{var F,r=i.data;if(null==(F=a.animation))throw tl.thrown(new Dw("from cannot be null."));if(null==k)throw tl.thrown(new Dw("to cannot be null."));r.tempAnimationStateDataKey.a1=F,r.tempAnimationStateDataKey.a2=k;var D,R,o=r.animationToMixTime,u=r.tempAnimationStateDataKey,O=(null==(D=r.defaultMix)&&(D=0),u.getHashCode()),h=D;if(null!=(R=o.h[O]))for(var P,c=0,_=R.length;c<_;)if((P=R[c++]).key.equals(u)){h=P.value;break}I=h}if(M.mixDuration=I,M.mixBlend=2,F=s<i.tracks.length?i.tracks[s]:((B=s+1)<(T=(o=i.tracks).length)?o.splice(B,B-T):T<B&&(o[B-1]=null),null),((i.tracks[s]=M).previous=null)!=F&&(n&&((r=i.queue).objects.push(1),r.objects.push(F)),((M.mixingFrom=F).mixingTo=M).mixTime=0,null!=F.mixingFrom&&0<F.mixDuration&&(M.interruptAlpha*=Math.min(1,F.mixTime/F.mixDuration)),(o=F.timelinesRotation).splice(0,o.length)),(r=i.queue).objects.push(0),r.objects.push(M),r.AnimationState_this.animationsChanged=!0,!(r=i.queue).drainDisabled){r.drainDisabled=!0;for(d=r.AnimationState_this.listeners,p=0;p<r.objects.length;){m=r.objects[p],h=r.objects[p+1],g=d.array.length,f=d.begin();do{if(0==m){null!=h.listener&&h.listener.start(h);for(A=0;A<g;)f[A].start(h),++A;break}if(1==m){null!=h.listener&&h.listener.interrupt(h);for(x=0;x<g;)f[x].interrupt(h),++x;break}if(2==m){null!=h.listener&&h.listener.end(h);for(w=0;w<g;)f[w].end(h),++w;null!=h.listener&&h.listener.dispose(h);for(y=0;y<g;)f[y].dispose(h),++y;r.AnimationState_this.trackEntryPool.free(h);break}if(3==m){null!=h.listener&&h.listener.dispose(h);for(b=0;b<g;)f[b].dispose(h),++b;r.AnimationState_this.trackEntryPool.free(h);break}if(4==m){null!=h.listener&&h.listener.complete(h);for(v=0;v<g;)f[v].complete(h),++v;break}if(5==m){for(C=r.objects[2+p++],S=(null!=h.listener&&h.listener.event(h,C),0);S<g;)f[S].event(h,C),++S;break}}while(0);d.end(),p+=2}(o=r.objects).splice(0,o.length),r.drainDisabled=!1}}return(t=M).mixDuration=z,t.timeScale=e.timeScale,t.listener=Q,V},playEmptyAnimation:function(e,t,n){null==n&&(n=!1);var z=new xh,Q=z.entryDone;if(n){var i,s=this.animationState,a=Rw.emptyAnimation,n=0;if(e<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));if(null==a)throw tl.thrown(new Dw("animation cannot be null."));if(null!=(i=e<s.tracks.length?s.tracks[e]:((I=e+1)<(B=(r=s.tracks).length)?r.splice(I,I-B):B<I&&(r[I-1]=null),null)))for(;null!=i.next;)i=i.next;if((k=s.trackEntryPool.obtain()).trackIndex=e,k.animation=a,k.loop=!1,k.holdPrevious=!1,k.eventThreshold=0,k.attachmentThreshold=0,k.drawOrderThreshold=0,k.animationStart=0,k.animationEnd=a.getDuration(),k.animationLast=-1,k.nextAnimationLast=-1,k.delay=0,k.trackTime=0,k.trackLast=-1,k.nextTrackLast=-1,k.trackEnd=999999999,k.timeScale=1,k.alpha=1,k.interruptAlpha=1,k.mixTime=0,null==i)M=0;else{var l=s.data;if(null==(F=i.animation))throw tl.thrown(new Dw("from cannot be null."));if(null==a)throw tl.thrown(new Dw("to cannot be null."));l.tempAnimationStateDataKey.a1=F,l.tempAnimationStateDataKey.a2=a;var r=l.animationToMixTime,o=l.tempAnimationStateDataKey,V=(null==(D=l.defaultMix)&&(D=0),o.getHashCode()),u=D;if(null!=(R=r.h[V]))for(var h=0,c=R.length;h<c;)if((P=R[h++]).key.equals(o)){u=P.value;break}M=u}if(k.mixDuration=M,k.mixBlend=2,null==i){if(F=e<s.tracks.length?s.tracks[e]:((I=e+1)<(B=(r=s.tracks).length)?r.splice(I,I-B):B<I&&(r[I-1]=null),null),((s.tracks[e]=k).previous=null)!=F&&((l=s.queue).objects.push(1),l.objects.push(F),((k.mixingFrom=F).mixingTo=k).mixTime=0,null!=F.mixingFrom&&0<F.mixDuration&&(k.interruptAlpha*=Math.min(1,F.mixTime/F.mixDuration)),(r=F.timelinesRotation).splice(0,r.length)),(l=s.queue).objects.push(0),l.objects.push(k),l.AnimationState_this.animationsChanged=!0,!(l=s.queue).drainDisabled){l.drainDisabled=!0;for(var _=l.AnimationState_this.listeners,d=0;d<l.objects.length;){var p=l.objects[d],u=l.objects[d+1],m=_.array.length,g=_.begin();do{if(0==p){null!=u.listener&&u.listener.start(u);for(var f=0;f<m;)g[f].start(u),++f;break}if(1==p){null!=u.listener&&u.listener.interrupt(u);for(var A=0;A<m;)g[A].interrupt(u),++A;break}if(2==p){null!=u.listener&&u.listener.end(u);for(var x=0;x<m;)g[x].end(u),++x;null!=u.listener&&u.listener.dispose(u);for(var w=0;w<m;)g[w].dispose(u),++w;l.AnimationState_this.trackEntryPool.free(u);break}if(3==p){null!=u.listener&&u.listener.dispose(u);for(var y=0;y<m;)g[y].dispose(u),++y;l.AnimationState_this.trackEntryPool.free(u);break}if(4==p){null!=u.listener&&u.listener.complete(u);for(var b=0;b<m;)g[b].complete(u),++b;break}if(5==p){for(var v=l.objects[2+d++],C=(null!=u.listener&&u.listener.event(u,v),0);C<m;)g[C].event(u,v),++C;break}}while(0);_.end(),d+=2}(r=l.objects).splice(0,r.length),l.drainDisabled=!1}}else n+=((i.next=k).previous=i).getTrackComplete()-k.mixDuration;k.delay=n,k.delay+=k.mixDuration-t}else{for(var S=this._tracks[e],h=[];null!=S;){var O=S.listener,S=S.next;h.push(O)}for(s=il.filterNull(h),u=new Array(s.length),h=0,c=s.length;h<c;)u[d=h++]=nl.__cast(s[d],xh);il.each(u,function(e){e.entryDone.trigger(!1)});s=this.animationState,a=Rw.emptyAnimation;if(e<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));if(null==a)throw tl.thrown(new Dw("animation cannot be null."));var k,M,I,B,n=!0,T=e<s.tracks.length?s.tracks[e]:((I=e+1)<(B=(r=s.tracks).length)?r.splice(I,I-B):B<I&&(r[I-1]=null),null);if(null!=T)if(-1==T.nextTrackLast){s.tracks[e]=T.mixingFrom,(l=s.queue).objects.push(1),l.objects.push(T);(l=s.queue).objects.push(2),l.objects.push(T),l.AnimationState_this.animationsChanged=!0;for(var E=T.next;null!=E;)(l=s.queue).objects.push(3),l.objects.push(E),E=E.next;T.next=null,T=T.mixingFrom,n=!1}else{for(E=T.next;null!=E;)(l=s.queue).objects.push(3),l.objects.push(E),E=E.next;T.next=null}if((k=s.trackEntryPool.obtain()).trackIndex=e,k.animation=a,k.loop=!1,k.holdPrevious=!1,k.eventThreshold=0,k.attachmentThreshold=0,k.drawOrderThreshold=0,k.animationStart=0,k.animationEnd=a.getDuration(),k.animationLast=-1,k.nextAnimationLast=-1,k.delay=0,k.trackTime=0,k.trackLast=-1,k.nextTrackLast=-1,k.trackEnd=999999999,k.timeScale=1,k.alpha=1,k.interruptAlpha=1,k.mixTime=0,null==T)M=0;else{var F,l=s.data;if(null==(F=T.animation))throw tl.thrown(new Dw("from cannot be null."));if(null==a)throw tl.thrown(new Dw("to cannot be null."));l.tempAnimationStateDataKey.a1=F,l.tempAnimationStateDataKey.a2=a;var D,R,r=l.animationToMixTime,o=l.tempAnimationStateDataKey,V=(null==(D=l.defaultMix)&&(D=0),o.getHashCode()),u=D;if(null!=(R=r.h[V]))for(var P,h=0,c=R.length;h<c;)if((P=R[h++]).key.equals(o)){u=P.value;break}M=u}if(k.mixDuration=M,k.mixBlend=2,F=e<s.tracks.length?s.tracks[e]:((I=e+1)<(B=(r=s.tracks).length)?r.splice(I,I-B):B<I&&(r[I-1]=null),null),((s.tracks[e]=k).previous=null)!=F&&(n&&((l=s.queue).objects.push(1),l.objects.push(F)),((k.mixingFrom=F).mixingTo=k).mixTime=0,null!=F.mixingFrom&&0<F.mixDuration&&(k.interruptAlpha*=Math.min(1,F.mixTime/F.mixDuration)),(r=F.timelinesRotation).splice(0,r.length)),(l=s.queue).objects.push(0),l.objects.push(k),l.AnimationState_this.animationsChanged=!0,!(l=s.queue).drainDisabled){l.drainDisabled=!0;for(_=l.AnimationState_this.listeners,d=0;d<l.objects.length;){p=l.objects[d],u=l.objects[d+1],m=_.array.length,g=_.begin();do{if(0==p){null!=u.listener&&u.listener.start(u);for(f=0;f<m;)g[f].start(u),++f;break}if(1==p){null!=u.listener&&u.listener.interrupt(u);for(A=0;A<m;)g[A].interrupt(u),++A;break}if(2==p){null!=u.listener&&u.listener.end(u);for(x=0;x<m;)g[x].end(u),++x;null!=u.listener&&u.listener.dispose(u);for(w=0;w<m;)g[w].dispose(u),++w;l.AnimationState_this.trackEntryPool.free(u);break}if(3==p){null!=u.listener&&u.listener.dispose(u);for(y=0;y<m;)g[y].dispose(u),++y;l.AnimationState_this.trackEntryPool.free(u);break}if(4==p){null!=u.listener&&u.listener.complete(u);for(b=0;b<m;)g[b].complete(u),++b;break}if(5==p){for(v=l.objects[2+d++],C=(null!=u.listener&&u.listener.event(u,v),0);C<m;)g[C].event(u,v),++C;break}}while(0);_.end(),d+=2}(r=l.objects).splice(0,r.length),l.drainDisabled=!1}}return k.mixDuration=t,k.trackEnd=t,k.listener=z,Q},stop:function(e,t,n){var i;if(null==n&&(n=yh.Immediate),null==(e=null==e?null==t?null:(i=t,il.findIndex(this._tracks,function(e){for(var t=e;null!=t&&t.animation.name!=i;)t=t.next;return null!=t})):e)&&null==t)return this.stopAllTracks(n);if(0<=e){t=this.animationState;if(e<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));return this.stopTrackByEntry(e>=t.tracks.length?null:t.tracks[e],n)}return new Zy(new Yy(!1))},stopAllTracks:function(e){null==e&&(e=yh.Immediate);for(var t=il.filterNull(this._tracks),n=[],i=0;i<t.length;)n.push(this.stopTrackByEntry(t[i++],e));var s=rt.map(rt.inParallel(n),function(e){return null!=t&&0<t.length});return s.eager(),s},setTimescale:function(n){null==n&&(n=1),il.each(this._tracks,function(e){for(var t=e;null!=t;)t.timeScale=n,t=t.next})},update:function(s,e){for(var t=this.animationState,n=e*t.timeScale,i=t.tracks,a=0,l=t.tracks.length;a<l;){if(null==(C=i[a]));else{C.animationLast=C.nextAnimationLast,C.trackLast=C.nextTrackLast;var r=n*C.timeScale;if(0<C.delay){if(C.delay-=r,0<C.delay){++a;continue}r=-C.delay,C.delay=0}var o,u,h,c,_,d=C.next;if(null!=d){var p=C.trackLast-d.delay;if(0<=p){d.delay=0,d.trackTime+=0==C.timeScale?0:(p/C.timeScale+n)*d.timeScale,C.trackTime+=r,m=a<t.tracks.length?t.tracks[a]:((p=a+1)<(m=(y=t.tracks).length)?y.splice(p,p-m):m<p&&(y[p-1]=null),null),((t.tracks[a]=d).previous=null)!=m&&((g=t.queue).objects.push(1),g.objects.push(m),((d.mixingFrom=m).mixingTo=d).mixTime=0,null!=m.mixingFrom&&0<m.mixDuration&&(d.interruptAlpha*=Math.min(1,m.mixTime/m.mixDuration)),(p=m.timelinesRotation).splice(0,p.length));var m,g,p=t.queue;for(p.objects.push(0),p.objects.push(d),p.AnimationState_this.animationsChanged=!0;null!=d.mixingFrom;)d.mixTime+=n,d=d.mixingFrom;++a;continue}}else if(C.trackLast>=C.trackEnd&&null==C.mixingFrom){i[a]=null;for(var p=t.queue,f=(p.objects.push(2),p.objects.push(C),p.AnimationState_this.animationsChanged=!0,C.next);null!=f;){var A=t.queue;A.objects.push(3),A.objects.push(f),f=f.next}C.next=null,++a;continue}if(o=null!=C.mixingFrom&&(null==(u=C.mixingFrom)||(_=null==(h=u.mixingFrom)||(c=t.updateMixingFrom(h,n),h.animationLast=h.nextAnimationLast,h.trackLast=h.nextTrackLast,0<u.mixTime&&u.mixTime>=u.mixDuration?(0!=h.totalAlpha&&0!=u.mixDuration||(u.mixingFrom=h.mixingFrom,null!=h.mixingFrom&&(h.mixingFrom.mixingTo=u),u.interruptAlpha=h.interruptAlpha,(_=t.queue).objects.push(2),_.objects.push(h),_.AnimationState_this.animationsChanged=!0),c):(h.trackTime+=n*h.timeScale,u.mixTime+=n,!1)),u.animationLast=u.nextAnimationLast,u.trackLast=u.nextTrackLast,0<C.mixTime&&C.mixTime>=C.mixDuration?(0!=u.totalAlpha&&0!=C.mixDuration||(C.mixingFrom=u.mixingFrom,null!=u.mixingFrom&&(u.mixingFrom.mixingTo=C),C.interruptAlpha=u.interruptAlpha,(c=t.queue).objects.push(2),c.objects.push(u),c.AnimationState_this.animationsChanged=!0),_):(u.trackTime+=n*u.timeScale,C.mixTime+=n,!1)))){var x=C.mixingFrom;for((C.mixingFrom=null)!=x&&(x.mixingTo=null);null!=x;){var w=t.queue;w.objects.push(2),w.objects.push(x),w.AnimationState_this.animationsChanged=!0,x=x.mixingFrom}}C.trackTime+=r}++a}if(!(g=t.queue).drainDisabled){g.drainDisabled=!0;for(var y,b=g.AnimationState_this.listeners,a=0;a<g.objects.length;){var v=g.objects[a],C=g.objects[a+1],S=b.array.length,k=b.begin();do{if(0==v){null!=C.listener&&C.listener.start(C);for(var M=0;M<S;)k[M].start(C),++M;break}if(1==v){null!=C.listener&&C.listener.interrupt(C);for(var I=0;I<S;)k[I].interrupt(C),++I;break}if(2==v){null!=C.listener&&C.listener.end(C);for(var B=0;B<S;)k[B].end(C),++B;null!=C.listener&&C.listener.dispose(C);for(var T=0;T<S;)k[T].dispose(C),++T;g.AnimationState_this.trackEntryPool.free(C);break}if(3==v){null!=C.listener&&C.listener.dispose(C);for(var E=0;E<S;)k[E].dispose(C),++E;g.AnimationState_this.trackEntryPool.free(C);break}if(4==v){null!=C.listener&&C.listener.complete(C);for(var F=0;F<S;)k[F].complete(C),++F;break}if(5==v){for(var D=g.objects[2+a++],R=(null!=C.listener&&C.listener.event(C,D),0);R<S;)k[R].event(C,D),++R;break}}while(0);b.end(),a+=2}(y=g.objects).splice(0,y.length),g.drainDisabled=!1}this.animationState.apply(s),null!=(o=this._attachmentOverrides)&&il.each(o,function(e){var t=e.slotName,e=e.attachmentName;if(null==t)throw tl.thrown(new Dw("slotName cannot be null."));var n=s.findSlot(t);if(null==n)throw tl.thrown(new Dw("Slot not found: "+t));var i=null;if(null!=e&&null==(i=s.getAttachment(n.data.index,e)))throw tl.thrown(new Dw("Attachment not found: "+e+", for slot: "+t));n.attachment!=i&&(i instanceof Xw&&n.attachment instanceof Xw&&(e=i,t=n.attachment,(null!=e.deformAttachment?e.deformAttachment:e)==(null!=t.deformAttachment?t.deformAttachment:t))||(e=n.deform).splice(0,e.length),n.attachment=i,n.attachmentTime=n.bone.skeleton.time)}),this._attachmentOverrides=null},getCurrentDuration:function(){return il.reduce(il.filterNull(this._tracks),function(e,t){return Math.max(t.animationEnd-t.animationStart,e)},0)},cancel:function(e){for(var t=il.filterNull(this._tracks),n=new Array(t.length),z=0,Q=t.length;z<Q;){for(var i=z++,V=this._tracks[t[i].trackIndex],O=[];null!=V;){var W=V.listener,V=V.next;O.push(W)}for(var s=il.filterNull(O),a=new Array(s.length),N=0,G=s.length;N<G;)a[d=N++]=nl.__cast(s[d],xh);n[i]=a}for(var U=Array.prototype.concat.apply([],n),L=(t=this.animationState).queue.drainDisabled,j=(t.queue.drainDisabled=!0,t.tracks),i=0,H=t.tracks.length;i<H;){if(null!=(n=j[i])){var l=n.trackIndex,r=Rw.emptyAnimation;if(l<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));if(null==r)throw tl.thrown(new Dw("animation cannot be null."));var Y,Z=!0;if(null!=(B=l<t.tracks.length?t.tracks[l]:((M=l+1)<(ae=(P=t.tracks).length)?P.splice(M,M-ae):ae<M&&(P[M-1]=null),null)))if(-1==B.nextTrackLast){t.tracks[l]=B.mixingFrom,(s=t.queue).objects.push(1),s.objects.push(B);(T=t.queue).objects.push(2),T.objects.push(B),T.AnimationState_this.animationsChanged=!0;for(var o=B.next;null!=o;)(F=t.queue).objects.push(3),F.objects.push(o),o=o.next;B.next=null,B=B.mixingFrom,Z=!1}else{for(var u=B.next;null!=u;)(D=t.queue).objects.push(3),D.objects.push(u),u=u.next;B.next=null}if((R=t.trackEntryPool.obtain()).trackIndex=l,R.animation=r,R.loop=!1,R.holdPrevious=!1,R.eventThreshold=0,R.attachmentThreshold=0,R.drawOrderThreshold=0,R.animationStart=0,R.animationEnd=r.getDuration(),R.animationLast=-1,R.nextAnimationLast=-1,R.delay=0,R.trackTime=0,R.trackLast=-1,R.nextTrackLast=-1,R.trackEnd=999999999,R.timeScale=1,R.alpha=1,R.interruptAlpha=1,R.mixTime=0,null==B)te=0;else{var h=t.data;if(null==(E=B.animation))throw tl.thrown(new Dw("from cannot be null."));if(null==r)throw tl.thrown(new Dw("to cannot be null."));h.tempAnimationStateDataKey.a1=E,h.tempAnimationStateDataKey.a2=r;var X=h.animationToMixTime,q=h.tempAnimationStateDataKey,r=h.defaultMix,K=(null==r&&(r=0),q.getHashCode()),J=X.h[K],a=r;if(null!=J)for(z=0,Q=J.length;z<Q;){var $=J[z++];if($.key.equals(q)){a=$.value;break}}te=a}R.mixDuration=te,R.mixBlend=2,k=l<t.tracks.length?t.tracks[l]:((K=l+1)<(Y=(r=t.tracks).length)?r.splice(K,K-Y):Y<K&&(r[K-1]=null),null),((t.tracks[l]=R).previous=null)!=k&&(Z&&((ne=t.queue).objects.push(1),ne.objects.push(k)),((R.mixingFrom=k).mixingTo=R).mixTime=0,null!=k.mixingFrom&&0<k.mixDuration&&(R.interruptAlpha*=Math.min(1,k.mixTime/k.mixDuration)),(Y=k.timelinesRotation).splice(0,Y.length));(le=t.queue).objects.push(0),le.objects.push(R),le.AnimationState_this.animationsChanged=!0;var c=t.queue;if(!c.drainDisabled){c.drainDisabled=!0;for(var _=c.AnimationState_this.listeners,d=0;d<c.objects.length;){var p=c.objects[d],m=c.objects[d+1],g=_.array.length,f=_.begin();do{if(0==p){null!=m.listener&&m.listener.start(m);for(var A=0;A<g;)f[A].start(m),++A;break}if(1==p){null!=m.listener&&m.listener.interrupt(m);for(var x=0;x<g;)f[x].interrupt(m),++x;break}if(2==p){null!=m.listener&&m.listener.end(m);for(var w=0;w<g;)f[w].end(m),++w;null!=m.listener&&m.listener.dispose(m);for(var y=0;y<g;)f[y].dispose(m),++y;c.AnimationState_this.trackEntryPool.free(m);break}if(3==p){null!=m.listener&&m.listener.dispose(m);for(var b=0;b<g;)f[b].dispose(m),++b;c.AnimationState_this.trackEntryPool.free(m);break}if(4==p){null!=m.listener&&m.listener.complete(m);for(var v=0;v<g;)f[v].complete(m),++v;break}if(5==p){for(var ee=c.objects[2+d++],C=(null!=m.listener&&m.listener.event(m,ee),0);C<g;)f[C].event(m,ee),++C;break}}while(0);_.end(),d+=2}r=c.objects;r.splice(0,r.length),c.drainDisabled=!1}R.mixDuration=0,R.trackEnd=0}++i}if(t.queue.drainDisabled=L,!(s=t.queue).drainDisabled){s.drainDisabled=!0;for(_=s.AnimationState_this.listeners,i=0;i<s.objects.length;){p=s.objects[i],n=s.objects[i+1],g=_.array.length,f=_.begin();do{if(0==p){null!=n.listener&&n.listener.start(n);for(A=0;A<g;)f[A].start(n),++A;break}if(1==p){null!=n.listener&&n.listener.interrupt(n);for(x=0;x<g;)f[x].interrupt(n),++x;break}if(2==p){null!=n.listener&&n.listener.end(n);for(w=0;w<g;)f[w].end(n),++w;null!=n.listener&&n.listener.dispose(n);for(y=0;y<g;)f[y].dispose(n),++y;s.AnimationState_this.trackEntryPool.free(n);break}if(3==p){null!=n.listener&&n.listener.dispose(n);for(b=0;b<g;)f[b].dispose(n),++b;s.AnimationState_this.trackEntryPool.free(n);break}if(4==p){null!=n.listener&&n.listener.complete(n);for(v=0;v<g;)f[v].complete(n),++v;break}if(5==p){for(a=s.objects[2+i++],C=(null!=n.listener&&n.listener.event(n,a),0);C<g;)f[C].event(n,a),++C;break}}while(0);_.end(),i+=2}(P=s.objects).splice(0,P.length),s.drainDisabled=!1}for(var S=0,j=(S*=(t=this.animationState).timeScale,t.tracks),i=0,H=t.tracks.length;i<H;){if(null==(n=j[i]));else{n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var te,k,ne,ie,se=S*n.timeScale;if(0<n.delay){if(n.delay-=se,0<n.delay){++i;continue}se=-n.delay,n.delay=0}if(null!=(o=n.next)){var M,ae,I=n.trackLast-o.delay;if(0<=I){for(o.delay=0,o.trackTime+=0==n.timeScale?0:(I/n.timeScale+S)*o.timeScale,n.trackTime+=se,E=i<t.tracks.length?t.tracks[i]:((M=i+1)<(ae=(P=t.tracks).length)?P.splice(M,M-ae):ae<M&&(P[M-1]=null),null),((t.tracks[i]=o).previous=null)!=E&&((s=t.queue).objects.push(1),s.objects.push(E),((o.mixingFrom=E).mixingTo=o).mixTime=0,null!=E.mixingFrom&&0<E.mixDuration&&(o.interruptAlpha*=Math.min(1,E.mixTime/E.mixDuration)),(X=E.timelinesRotation).splice(0,X.length)),(T=t.queue).objects.push(0),T.objects.push(o),T.AnimationState_this.animationsChanged=!0;null!=o.mixingFrom;)o.mixTime+=S,o=o.mixingFrom;++i;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){j[i]=null;for(u=((F=t.queue).objects.push(2),F.objects.push(n),F.AnimationState_this.animationsChanged=!0,n.next);null!=u;)(D=t.queue).objects.push(3),D.objects.push(u),u=u.next;n.next=null,++i;continue}if(te=null!=n.mixingFrom&&(null==(k=n.mixingFrom)||(ie=null==(I=k.mixingFrom)||(ie=t.updateMixingFrom(I,S),I.animationLast=I.nextAnimationLast,I.trackLast=I.nextTrackLast,0<k.mixTime&&k.mixTime>=k.mixDuration?(0!=I.totalAlpha&&0!=k.mixDuration||(k.mixingFrom=I.mixingFrom,null!=I.mixingFrom&&(I.mixingFrom.mixingTo=k),k.interruptAlpha=I.interruptAlpha,(h=t.queue).objects.push(2),h.objects.push(I),h.AnimationState_this.animationsChanged=!0),ie):(I.trackTime+=S*I.timeScale,k.mixTime+=S,!1)),k.animationLast=k.nextAnimationLast,k.trackLast=k.nextTrackLast,0<n.mixTime&&n.mixTime>=n.mixDuration?(0!=k.totalAlpha&&0!=n.mixDuration||(n.mixingFrom=k.mixingFrom,null!=k.mixingFrom&&(k.mixingFrom.mixingTo=n),n.interruptAlpha=k.interruptAlpha,(ne=t.queue).objects.push(2),ne.objects.push(k),ne.AnimationState_this.animationsChanged=!0),ie):(k.trackTime+=S*k.timeScale,n.mixTime+=S,!1)))){var le,re=n.mixingFrom;for((n.mixingFrom=null)!=re&&(re.mixingTo=null);null!=re;)(le=t.queue).objects.push(2),le.objects.push(re),le.AnimationState_this.animationsChanged=!0,re=re.mixingFrom}n.trackTime+=se}++i}if(!(s=t.queue).drainDisabled){s.drainDisabled=!0;for(_=s.AnimationState_this.listeners,i=0;i<s.objects.length;){p=s.objects[i],n=s.objects[i+1],g=_.array.length,f=_.begin();do{if(0==p){null!=n.listener&&n.listener.start(n);for(A=0;A<g;)f[A].start(n),++A;break}if(1==p){null!=n.listener&&n.listener.interrupt(n);for(x=0;x<g;)f[x].interrupt(n),++x;break}if(2==p){null!=n.listener&&n.listener.end(n);for(w=0;w<g;)f[w].end(n),++w;null!=n.listener&&n.listener.dispose(n);for(y=0;y<g;)f[y].dispose(n),++y;s.AnimationState_this.trackEntryPool.free(n);break}if(3==p){null!=n.listener&&n.listener.dispose(n);for(b=0;b<g;)f[b].dispose(n),++b;s.AnimationState_this.trackEntryPool.free(n);break}if(4==p){null!=n.listener&&n.listener.complete(n);for(v=0;v<g;)f[v].complete(n),++v;break}if(5==p){for(a=s.objects[2+i++],C=(null!=n.listener&&n.listener.event(n,a),0);C<g;)f[C].event(n,a),++C;break}}while(0);_.end(),i+=2}(P=s.objects).splice(0,P.length),s.drainDisabled=!1}this.animationState.apply(e);for(var oe=e.bones,i=0,H=e.bones.length;i<H;)(n=oe[i]).ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,++i;for(var ue=e.cache,i=0,H=e.cache.length;i<H;)ue[i].update(),++i;e.time+=0;for(var B,L=(t=this.animationState).queue.drainDisabled,i=(t.queue.drainDisabled=!0,0),H=t.tracks.length;i<H;){if(i<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));if(i<t.tracks.length)if(null!=(B=t.tracks[i])){(s=t.queue).objects.push(2),s.objects.push(B),s.AnimationState_this.animationsChanged=!0;for(var T,o=B.next;null!=o;)(T=t.queue).objects.push(3),T.objects.push(o),o=o.next;B.next=null;for(var E,F,D,R=B;;){if(null==(E=R.mixingFrom))break;(F=t.queue).objects.push(2),F.objects.push(E),F.AnimationState_this.animationsChanged=!0,R.mixingFrom=null,R.mixingTo=null,R=E}if(t.tracks[B.trackIndex]=null,!(D=t.queue).drainDisabled){D.drainDisabled=!0;for(_=D.AnimationState_this.listeners,d=0;d<D.objects.length;){p=D.objects[d],n=D.objects[d+1],g=_.array.length,f=_.begin();do{if(0==p){null!=n.listener&&n.listener.start(n);for(A=0;A<g;)f[A].start(n),++A;break}if(1==p){null!=n.listener&&n.listener.interrupt(n);for(x=0;x<g;)f[x].interrupt(n),++x;break}if(2==p){null!=n.listener&&n.listener.end(n);for(w=0;w<g;)f[w].end(n),++w;null!=n.listener&&n.listener.dispose(n);for(y=0;y<g;)f[y].dispose(n),++y;D.AnimationState_this.trackEntryPool.free(n);break}if(3==p){null!=n.listener&&n.listener.dispose(n);for(b=0;b<g;)f[b].dispose(n),++b;D.AnimationState_this.trackEntryPool.free(n);break}if(4==p){null!=n.listener&&n.listener.complete(n);for(v=0;v<g;)f[v].complete(n),++v;break}if(5==p){for(a=D.objects[2+d++],C=(null!=n.listener&&n.listener.event(n,a),0);C<g;)f[C].event(n,a),++C;break}}while(0);_.end(),d+=2}(P=D.objects).splice(0,P.length),D.drainDisabled=!1}}++i}if((P=t.tracks).splice(0,P.length),t.queue.drainDisabled=L,!(s=t.queue).drainDisabled){s.drainDisabled=!0;for(var P,_=s.AnimationState_this.listeners,i=0;i<s.objects.length;){p=s.objects[i],n=s.objects[i+1],g=_.array.length,f=_.begin();do{if(0==p){null!=n.listener&&n.listener.start(n);for(A=0;A<g;)f[A].start(n),++A;break}if(1==p){null!=n.listener&&n.listener.interrupt(n);for(x=0;x<g;)f[x].interrupt(n),++x;break}if(2==p){null!=n.listener&&n.listener.end(n);for(w=0;w<g;)f[w].end(n),++w;null!=n.listener&&n.listener.dispose(n);for(y=0;y<g;)f[y].dispose(n),++y;s.AnimationState_this.trackEntryPool.free(n);break}if(3==p){null!=n.listener&&n.listener.dispose(n);for(b=0;b<g;)f[b].dispose(n),++b;s.AnimationState_this.trackEntryPool.free(n);break}if(4==p){null!=n.listener&&n.listener.complete(n);for(v=0;v<g;)f[v].complete(n),++v;break}if(5==p){for(a=s.objects[2+i++],C=(null!=n.listener&&n.listener.event(n,a),0);C<g;)f[C].event(n,a),++C;break}}while(0);_.end(),i+=2}(P=s.objects).splice(0,P.length),s.drainDisabled=!1}il.each(U,function(e){e.entryDone.trigger(!1)})},getLastQueuedTrackEntry:function(e){for(var t=this._tracks[e];null!=t.next;)t=t.next;return t},stopTrackByEntry:function(e,t){if(null==t&&(t=yh.Immediate),null==e)return new Zy(new Yy(!1));for(var n=this._tracks[e.trackIndex],i=[];null!=n;){var s=n.listener,n=n.next;i.push(s)}for(var a=il.filterNull(i),l=new Array(a.length),i=0,r=a.length;i<r;){var o=i++;l[o]=nl.__cast(a[o],xh)}var u,h=l,c=(u=e.loop?0==(_=e.animationEnd-e.animationStart)?e.animationStart:e.trackTime%_+e.animationStart:Math.min(e.trackTime+e.animationStart,e.animationEnd),e.trackTime=u,e.loop);switch(e.loop=!1,t._hx_index){case 0:u=(e.loop?0==(_=e.animationEnd-e.animationStart)?e.animationStart:e.trackTime%_+e.animationStart:Math.min(e.trackTime+e.animationStart,e.animationEnd))+.001;break;case 1:u=e.getTrackComplete();break;case 2:var _=i=t.duration;_=null==i||0<i?i:.001;var d=e.getTrackComplete()-(e.loop?0==(d=e.animationEnd-e.animationStart)?e.animationStart:e.trackTime%d+e.animationStart:Math.min(e.trackTime+e.animationStart,e.animationEnd)),p=this.animationState.timeScale;_<d/(e.timeScale*p)&&(e.timeScale=d/_/p),u=e.animationEnd}switch(e.animationEnd=u,t._hx_index){case 0:u=e.trackTime;break;case 1:u=e.animationEnd-.001;break;case 2:u=e.trackTime}e.trackTime=u,e.next=null;c=3==(i=(s=nl.__cast(e.listener,xh)).entryDone.getStatus())._hx_index?s.entryDone=c&&Jy.get(i.result)?new qy:s.entryDone:s.entryDone;return c.handle(function(){il.each(h,function(e){e.entryDone.trigger(!1)})}),c},__class__:bl},(i["spine.AnimationStateListener"]=vl).__name__="spine.AnimationStateListener",vl.__isInterface__=!0,vl.prototype={__class__:vl},function(){this.entryDone=new qy}),wh=((i["hacksaw.core.h3d.spine.TrackEntryListener"]=xh).__name__="hacksaw.core.h3d.spine.TrackEntryListener",xh.__interfaces__=[vl],xh.prototype={start:function(e){},interrupt:function(e){},end:function(e){},dispose:function(e){this.entryDone.trigger(e.trackTime>=e.animationEnd-e.animationStart)},complete:function(e){this.entryDone.trigger(e.trackTime>=e.animationEnd-e.animationStart)},event:function(e,t){t=new wh(t.data.name,e,t,e.timeScale);hacksawCasino.PubSub.getChannel("game").publish("spineEvent",t)},__class__:xh},(i["hacksaw.core.h3d.spine.SpineAnimation"]=Cl).__name__="hacksaw.core.h3d.spine.SpineAnimation",Cl.prototype={__class__:Cl},function(e,t,n,i){this.name=e,this.trackEntry=t,this.event=n,this.speed=i}),yh=((i["hacksaw.core.h3d.spine.SpineEventData"]=wh).__name__="hacksaw.core.h3d.spine.SpineEventData",wh.prototype={__class__:wh},(i["hacksaw.core.h3d.spine.AttachmentOverride"]=Sl).__name__="hacksaw.core.h3d.spine.AttachmentOverride",Sl.prototype={__class__:Sl},fe["hacksaw.core.h3d.spine.StopAction"]={__ename__:!0,__constructs__:null,Immediate:{_hx_name:"Immediate",_hx_index:0,__enum__:"hacksaw.core.h3d.spine.StopAction",toString:o},SkipToEnd:{_hx_name:"SkipToEnd",_hx_index:1,__enum__:"hacksaw.core.h3d.spine.StopAction",toString:o},End:((R=function(e){return{_hx_index:2,duration:e,__enum__:"hacksaw.core.h3d.spine.StopAction",toString:o}})._hx_name="End",R.__params__=["duration"],R)}),bh=(yh.__constructs__=[yh.Immediate,yh.SkipToEnd,yh.End],yh.__empty_constructs__=[yh.Immediate,yh.SkipToEnd],function(e){this._activeBoxes=[],this._colliderIndexes=new at,this._activeBoxColliders=new cn([]),this._colliders=new at,this._pointAttachments=new at,this._config=e,Lu.call(this,e.parent);for(var e=e.spine.skeletonData,e=(this.animationState=new Rw(new Qw(e)),this.skeleton=new Ow(e),this.skeleton),t=e.bones,n=0,i=e.bones.length;n<i;)(u=t[n]).ax=u.x,u.ay=u.y,u.arotation=u.rotation,u.ascaleX=u.scaleX,u.ascaleY=u.scaleY,u.ashearX=u.shearX,u.ashearY=u.shearY,++n;for(var s=e.cache,n=0,i=e.cache.length;n<i;)s[n].update(),++n;this.mesh=this.createMesh(this.skeleton),this.set_animator(new bl(this.animationState)),this.addChild(this.mesh);for(var e=new It(this),a=(tt.init(e,null),this.tweenObject=e,this.skeleton.slots),l=[],r=0;r<a.length;){var o=a[r];++r,o.attachment instanceof ey&&l.push(o)}for(var u=new Array(l.length),r=0,h=l.length;r<h;){var c=l[n=r++];u[n]={name:c.data.name,object:new Hr(this),slot:c}}this._pointAttachments=zy.fromArray(u,function(e){return e.name},function(e){return new vh(e.object,nl.__cast(e.slot.attachment,ey),e.slot.bone)}),this.updateColliders()}),vh=((i["hacksaw.core.h3d.spine.SpineElement"]=bh).__name__="hacksaw.core.h3d.spine.SpineElement",bh.create=function(e){return new bh(e)},bh.__super__=Lu,bh.prototype=e(Lu.prototype,{createMesh:function(e){var t=uo.current.createMaterial(),n=(t.set_props(t.getDefaultProps()),t.passes.set_depthTest(this._config.depthTest),t.set_blendMode(this._config.blendMode),t.passes.set_culling(this._config.culling),t.passes.set_enableLights(this._config.enableLights),this._config.shadows),t=(t.set_castShadows(n),t.set_receiveShadows(n),t.set_texture(_o.fromColor(0,0)),new Mh(this._config.useDarkTint,t,this._config.parent,e,this._config.usePremultipliedAlpha)),e=(this._config.replaceMeshBounds?t.flags|=512:t.flags&=-513,t.setupMesh(),t.mapClippingAttachments(this._config.exposedClippingAttachments),1/sl.REFERENCE_SIZE),n=(t.scaleX=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ=e,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),this._config.scale);return t.scaleX*=n,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY*=n,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ*=n,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),null!=this._config.offset&&(e=this._config.offset.y,this.x=this._config.offset.x,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.y=this._config.offset.y,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.z=e,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.flags|=1,0!=(131072&this.flags))&&(this.flags|=262144),t},dispose:function(){var e=this.mesh;null!=e&&null!=e.parent&&e.parent.removeChild(e)},update:function(e){Lu.prototype.update.call(this,e),this.get_animator().update(this.skeleton,e);for(var t=this.skeleton,n=t.bones,i=0,s=t.bones.length;i<s;){var a=n[i];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,++i}for(var l=t.cache,i=0,s=t.cache.length;i<s;)l[i].update(),++i;this.skeleton.time+=e,this.updateColliders(),this.updatePointAttachments()},get_animator:function(){return this.animator},set_animator:function(e){return this.animator=e},getBoxCollider:function(e){return 0!=(1024&this.flags)||Object.keys(this._colliders.h).length<=0?null:null!=e?null==(e=this._colliderIndexes.h[e])?null:this._activeBoxColliders.colliders[e]:this._activeBoxColliders},getBoxBounds:function(e){var t=this,n=new Ur;return 0!=(512&this.flags)||Object.keys(this._colliders.h).length<=0||(e=null!=e?null!=(e=null!=(e=this._colliderIndexes.h[e])?il.fromItem(e):null)?e:[]:zy.values(this._colliderIndexes),il.each(e,function(e){e=t._activeBoxes[e].getBounds();e.transform(t.mesh.getAbsPos()),e.xMin<n.xMin&&(n.xMin=e.xMin),e.xMax>n.xMax&&(n.xMax=e.xMax),e.yMin<n.yMin&&(n.yMin=e.yMin),e.yMax>n.yMax&&(n.yMax=e.yMax),e.zMin<n.zMin&&(n.zMin=e.zMin),e.zMax>n.zMax&&(n.zMax=e.zMax)})),n},getGlobalCollider:function(){return this.getBoxCollider()},clone:function(e){var t=this._config.parent,n=(this._config.parent=null,bh.create(this._config)),i=(this._config.parent=t,n.x=this.x,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.y=this.y,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.z=this.z,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.scaleX=this.scaleX,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.scaleY=this.scaleY,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.scaleZ=this.scaleZ,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.qRot),t=this.qRot;i.x=t.x,i.y=t.y,i.z=t.z,i.w=t.w,n.name=this.name,n.set_follow(this.follow),0!=(8&this.flags)?n.flags|=8:n.flags&=-9,0!=(2&this.flags)?n.flags|=2:n.flags&=-3,t=null!=n.defaultTransform?n.defaultTransform:null!=(t=this.defaultTransform)?t.clone():null,n.defaultTransform=t,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),(i=n.mesh).scaleX=this.mesh.scaleX,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),(i=n.mesh).scaleY=this.mesh.scaleY,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144);(i=n.mesh).scaleZ=this.mesh.scaleZ,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144);for(var i=zy.values(this._pointAttachments),s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=i[r].object}for(a=0,l=this.children;a<l.length;){var o=l[a],u=(++a,o.clone());this.mesh!=o&&-1==s.indexOf(o)&&(u.parent=n).children.push(u)}return n},addBoundsRec:function(e,t){var n=this.mesh;0!=(512&this.flags)||this._config.replaceMeshBounds?n.flags|=512:n.flags&=-513,Lu.prototype.addBoundsRec.call(this,e,t),0==(512&this.flags)&&((n=this.getBoxBounds()).xMin<e.xMin&&(e.xMin=n.xMin),e.xMax<n.xMax&&(e.xMax=n.xMax),n.yMin<e.yMin&&(e.yMin=n.yMin),e.yMax<n.yMax&&(e.yMax=n.yMax),n.zMin<e.zMin&&(e.zMin=n.zMin),e.zMax<n.zMax)&&(e.zMax=n.zMax)},updatePointAttachments:function(){if(!(Object.keys(this._pointAttachments.h).length<=0))for(var e=this._pointAttachments.h,t=Object.keys(e),n=t.length,i=0;i<n;){var s=e[t[i++]],a=s.attachment,l=s.bone,r=s.object,s=(s=a.x*l.a+a.y*l.b+l.worldX,o=a.x*l.c+a.y*l.d+l.worldY,r.x=s*this.mesh.scaleX,r.flags|=1,0!=(131072&r.flags)&&(r.flags|=262144),r.y=o*this.mesh.scaleY,r.flags|=1,0!=(131072&r.flags)&&(r.flags|=262144),Math.cos(a.rotation*hy.degRad)),o=Math.sin(a.rotation*hy.degRad),u=Math.atan2(s*l.c+o*l.d,s*l.a+o*l.b)*hy.radDeg*(Math.PI/180),h=Math.sqrt(l.a*l.a+l.c*l.c),c=Math.sqrt(l.b*l.b+l.d*l.d);switch(this._config.pointAttachmentTransformSetting._hx_index){case 0:break;case 1:r.setRotation(0,0,u);break;case 2:r.scaleX=h,r.flags|=1,0!=(131072&r.flags)&&(r.flags|=262144),r.scaleY=c,r.flags|=1,0!=(131072&r.flags)&&(r.flags|=262144),r.setRotation(0,0,u)}}},updateColliders:function(){for(var e=this.skeleton.slots,t=[],n=0;n<e.length;){var i=e[n];++n,i.attachment instanceof qw&&t.push(i)}if(null==t||0==t.length)this._activeBoxes=[],this._activeBoxColliders.colliders=[],this._colliderIndexes.h=Object.create(null);else{for(var n=[],s=0;s<t.length;){var a,l=t[s];++s,a=Object.prototype.hasOwnProperty.call(this._colliders.h,l.data.name)?this._colliders.h[l.data.name]:(a=new dn(this.mesh,null),this._colliders.h[l.data.name]=a),n.push(a)}for(var r=new Array(t.length),s=0,z=t.length;s<z;){var o=s++,l=t[o],u=nl.__cast(l.attachment,qw),h=u.worldVerticesLength,Q=h>>1,c=[],_=2*(h>>1),d=l.deform,p=u.vertices,m=u.bones;if(null==m){0<d.length&&(p=d);for(var h=l.bone,V=h.worldX,O=h.worldY,W=h.a,N=h.b,G=h.c,U=h.d,i=0,g=0;g<_;){var f=p[i],A=p[i+1];c[g]=f*W+A*N+V,c[g+1]=f*G+A*U+O,i+=2,g+=2}}else{var x=0,w=(0,l.bone.skeleton.getBones());if(0==d.length)for(var y=0,b=0;y<_;){var v=0,C=0,S=m[x++];for(S+=x;x<S;){var k=w[m[x]],M=p[b],L=p[b+1],j=p[b+2];v+=(M*k.a+L*k.b+k.worldX)*j,C+=(M*k.c+L*k.d+k.worldY)*j,++x,b+=3}c[y]=v,c[y+1]=C,y+=2}else for(var I=0,B=0,T=0;I<_;){var H=0,Y=0,Z=m[x++];for(Z+=x;x<Z;){var E=w[m[x]],X=p[B]+d[T],q=p[B+1]+d[T+1],K=p[B+2];H+=(X*E.a+q*E.b+E.worldX)*K,Y+=(X*E.c+q*E.d+E.worldY)*K,++x,B+=3,T+=2}c[I]=H,c[I+1]=Y,I+=2}}for(var F=[],J=0;J<Q;){var D=2*J++,R=c[D],D=c[1+D];F.push(new St(R=null==R?0:R,D=null==D?0:D))}r[o]=mn.fromPolygon2D(null==F?[]:F)}il.each(il.zip(n,r),function(e){e._0.collider=e._1});for(var s=new at,P=0;P<t.length;)s.h[t[P++].data.name]=P-1;this._colliderIndexes=s;for(t=[],s=0;s<n.length;)t.push(n[s++]);this._activeBoxColliders.colliders=t,this._activeBoxes=r}},__class__:bh,__properties__:e(Lu.prototype.__properties__,{set_animator:"set_animator",get_animator:"get_animator"})}),function(e,t,n){this.object=e,this.attachment=t,this.bone=n}),Ch=((i["hacksaw.core.h3d.spine.PointAttachmentObject"]=vh).__name__="hacksaw.core.h3d.spine.PointAttachmentObject",vh.prototype={__class__:vh},fe["hacksaw.core.h3d.spine.PointAttachmentTransformSettings"]={__ename__:!0,__constructs__:null,PositionOnly:{_hx_name:"PositionOnly",_hx_index:0,__enum__:"hacksaw.core.h3d.spine.PointAttachmentTransformSettings",toString:o},IgnoreScaling:{_hx_name:"IgnoreScaling",_hx_index:1,__enum__:"hacksaw.core.h3d.spine.PointAttachmentTransformSettings",toString:o},All:{_hx_name:"All",_hx_index:2,__enum__:"hacksaw.core.h3d.spine.PointAttachmentTransformSettings",toString:o}}),Sh=(Ch.__constructs__=[Ch.PositionOnly,Ch.IgnoreScaling,Ch.All],Ch.__empty_constructs__=[Ch.PositionOnly,Ch.IgnoreScaling,Ch.All],function(e,t,n,i,s,a,l,r,o,u,h,c,_,d){this.pointAttachmentTransformSetting=Ch.All,this.replaceMeshBounds=!1,this.usePremultipliedAlpha=!1,this.useDarkTint=!1,this.exposedClippingAttachments=null,this.parent=null,this.enableLights=!0,this.shadows=!1,this.culling=$r.None,this.depthTest=to.Always,this.blendMode=wr.Alpha,this.scale=1,this.offset=null,this.spine=e,null!=t&&(this.offset=t),null!=n&&(this.scale=n),null!=i&&(this.blendMode=i),null!=s&&(this.depthTest=s),null!=a&&(this.culling=a),null!=l&&(this.shadows=l),null!=r&&(this.enableLights=r),null!=o&&(this.parent=o),null!=u&&(this.exposedClippingAttachments=u),null!=h&&(this.useDarkTint=h),null!=c&&(this.usePremultipliedAlpha=c),null!=_&&(this.replaceMeshBounds=_),null!=d&&(this.pointAttachmentTransformSetting=d)}),kh=((i["hacksaw.core.h3d.spine.SpineElementConfig"]=Sh).__name__="hacksaw.core.h3d.spine.SpineElementConfig",Sh.prototype={__class__:Sh},(i["spine.utils.SkeletonClipping"]=kl).__name__="spine.utils.SkeletonClipping",kl.prototype={clip:function(e,t,n,i,s,a,l,r){for(var o=r,u=!1,h=null,c=(2<=l.length%4?(h=r,r=this.scratch):h=this.scratch,h.splice(0,h.length),h.push(e),h.push(t),h.push(n),h.push(i),h.push(s),h.push(a),h.push(e),h.push(t),r.splice(0,r.length),l.length-4),_=0;;){for(var d=l[_],p=l[_+1],m=l[_+2],g=l[_+3],f=d-m,A=p-g,x=h,z=h.length-2,w=r.length,y=0;y<z;){var b=x[y],v=x[y+1],C=x[y+2],S=x[y+3],k=0<f*(S-g)-A*(C-m);if(0<f*(v-g)-A*(b-m)){if(k){r.push(C),r.push(S),y+=2;continue}var M=S-v,I=C-b,B=M*(m-d)-I*(g-p);1e-6<Math.abs(B)?(r.push(d+(m-d)*(I=(I*(p-v)-M*(d-b))/B)),r.push(p+(g-p)*I)):(r.push(d),r.push(p))}else k&&(I=(M=S-v)*(m-d)-(B=C-b)*(g-p),1e-6<Math.abs(I)?(r.push(d+(m-d)*(k=(B*(p-v)-M*(d-b))/I)),r.push(p+(g-p)*k)):(r.push(d),r.push(p)),r.push(C),r.push(S));u=!0,y+=2}if(w==r.length)return o.splice(0,o.length),!0;if(r.push(r[0]),r.push(r[1]),_==c)break;w=r;(r=h).splice(0,r.length),h=w,_+=2}if(o!=r){o.splice(0,o.length);var n=r,T=r.length-2;-1==(T=null==T?-1:T)&&(T=n.length);var E=(_=o.length)+n.length,F=o.length;if(E<F)o.splice(E,E-F);else if(F<E)for(;F<E;)o.push(0),++F;for(var D=0,R=n;D<R.length&&(o[_++]=R[D++],!(--T<=0)););}else{var P=o.length-2;if(P<(E=o.length))o.splice(P,P-E);else if(E<P)for(;E<P;)o.push(0),++E}return u},__class__:kl},function(){this.polygonIndicesPool=new yy,this.polygonPool=new wy,this.triangles=[],this.isConcaveArray=[],this.indicesArray=[],this.convexPolygonsIndices=[],this.convexPolygons=[]}),Mh=((i["spine.utils.Triangulator"]=kh).__name__="spine.utils.Triangulator",kh.prototype={__class__:kh},function(e,t,n,i,s){this._tempVerticesArray=[],this._meshes=[],this._useDarkColor=!0,this._quadTriangles=[0,1,2,2,3,0],this._usePremultipliedAlpha=!1,this.clippingMeshes=new at,Co.call(this,null,t,n),this._useDarkColor=e,this._usePremultipliedAlpha=s,this.skeleton=i}),Ih=((i["hacksaw.core.h3d.spine.SpineMesh"]=Mh).__name__="hacksaw.core.h3d.spine.SpineMesh",Mh.__super__=Co,Mh.prototype=e(Co.prototype,{emit:function(e){this.renderTriangles(),null!=this.primitive&&Co.prototype.emit.call(this,e)},setupMesh:function(){var e=new ul(this._useDarkColor),t=this._usePremultipliedAlpha?(t=new Co(e,nl.__cast(this.material.clone(),Bn),this),0!=(512&this.flags)?t.flags|=512:t.flags&=-513,t.name="SplineSubMesh",t.material.passes.load(this.material.passes),t):(this.set_primitive(e),this);t.material.passes.addShader(new(this._useDarkColor?fl:Yo)),this._usePremultipliedAlpha&&t.material.passes.addShader(new dl),this._meshes.push(t)},mapClippingAttachments:function(e){var t=this;if(null!=e){for(var n=new Array(e.length),i=0,s=e.length;i<s;){var a=i++,l=e[a],r=new ul(!1),o=Bn.create(_o.fromColor(0,0)),o=(o.name="SpineClippingMat|"+l,o.set_castShadows(!1),o.set_receiveShadows(!1),o.set_blendMode(wr.None),o.passes.set_culling($r.None),o.passes.set_enableLights(!1),o.passes.set_depthWrite(!1),new Co(r,o));o.name="SpineClippingMesh|"+l,0!=(512&t.flags)?o.flags|=512:o.flags&=-513,n[a]={key:l,mesh:o,content:r}}il.each(n,function(e){t.clippingMeshes.h[e.key]={mesh:e.mesh,content:e.content},t.addChild(e.mesh)})}},renderTriangles:function(){for(var z=this,e=Mh.clipper,Q=(null!=e.clipAttachment&&(e.clipAttachment=null,e.clippingPolygons=null,(X=e.clippedVertices).splice(0,X.length),(X=e.clippedTriangles).splice(0,X.length),(X=e.clippingPolygon).splice(0,X.length)),il.each(this._meshes,function(e){e=nl.__cast(e.primitive,ul);e.verticesCount=0,e.indexCount=0}),il.each(this._meshes,function(e){e.material!=z.material&&e.material.passes.load(z.material.passes),0!=(512&z.flags)?e.flags|=512:e.flags&=-513}),this.clippingMeshes.h),V=Object.keys(Q),O=V.length,W=0;W<O;)(Xe=Q[V[W++]].content).verticesCount=0,Xe.indexCount=0;for(var N=this._meshes[0],t=nl.__cast(N.primitive,ul),n=N,G=null,U=1,L=0,j=0,H=0,Y=0,Z=this.skeleton.drawOrder;Y<Z.length;){var X,i=Z[Y];if(++Y,null!=i.attachment&&i.bone.active){if(i.attachment instanceof ty){var s,a=i.attachment,l=i.bone,r=this._tempVerticesArray,o=a.offset,q=l.worldX,K=l.worldY,u=l.a,h=l.b,J=l.c,l=l.d,c=o[6];if(r[0]=c*u+(s=o[7])*h+q,r[1]=c*J+s*l+K,r[2]=(c=o[0])*u+(s=o[1])*h+q,r[3]=c*J+s*l+K,r[4]=(c=o[2])*u+(s=o[3])*h+q,r[5]=c*J+s*l+K,r[6]=(c=o[4])*u+(s=o[5])*h+q,r[7]=c*J+s*l+K,null==a.region)throw tl.thrown(new ny("Region has not been set: "+el.string(a)));u={atlasRegion:nl.__cast(a.region,oy),regionColor:a.color,uvs:a.uvs,triangles:this._quadTriangles,slotVerticesLength:4}}else{if(!(i.attachment instanceof Jw)){if(i.attachment instanceof Kw){o=i.attachment;if(null==e.clipAttachment){var $=o.worldVerticesLength;if(6<=$){e.clipAttachment=o;var ee=e.clippingPolygon,te=ee.length;if($<te)ee.splice($,$-te);else if(te<$)for(;te<$;)ee.push(0),++te;var ne=ee,ie=2*($>>1),se=i.deform,ae=o.vertices,le=o.bones;if(null==le){0<se.length&&(ae=se);for(var h=i.bone,re=h.worldX,oe=h.worldY,ue=h.a,he=h.b,ce=h.c,_e=h.d,de=0,pe=0;pe<ie;){var me=ae[de],ge=ae[de+1];ne[pe]=me*ue+ge*he+re,ne[pe+1]=me*ce+ge*_e+oe,de+=2,pe+=2}}else{var _=0,fe=(0,i.bone.skeleton.getBones());if(0==se.length)for(var Ae=0,xe=0;Ae<ie;){var we=0,ye=0,be=le[_++];for(be+=_;_<be;){var ve=fe[le[_]],Ce=ae[xe],Se=ae[xe+1],ke=ae[xe+2];we+=(Ce*ve.a+Se*ve.b+ve.worldX)*ke,ye+=(Ce*ve.c+Se*ve.d+ve.worldY)*ke,++_,xe+=3}ne[Ae]=we,ne[Ae+1]=ye,Ae+=2}else for(var Me=0,Ie=0,Be=0;Me<ie;){var Te=0,Ee=0,Fe=le[_++];for(Fe+=_;_<Fe;){var De=fe[le[_]],Re=ae[Ie]+se[Be],Pe=ae[Ie+1]+se[Be+1],ze=ae[Ie+2];Te+=(Re*De.a+Pe*De.b+De.worldX)*ze,Ee+=(Re*De.c+Pe*De.d+De.worldY)*ze,++_,Ie+=3,Be+=2}ne[Me]=Te,ne[Me+1]=Ee,Me+=2}}for(var Qe,Ve,Oe,d=e.clippingPolygon,q=d.length,We=d[q-2]*d[1]-d[0]*d[q-1],Ne=0,Ge=q-3;Ne<Ge;)Qe=d[Ne],Ve=d[Ne+1],Oe=d[Ne+2],We+=Qe*d[Ne+3]-Oe*Ve,Ne+=2;if(!(We<0))for(var Ue=0,Le=q-2,je=q>>1;Ue<je;){var He=d[Ue],Ye=d[Ue+1],Ze=Le-Ue;d[Ue]=d[Ze],d[Ue+1]=d[1+Ze],d[Ze]=He,d[1+Ze]=Ye,Ue+=2}var Xe=e.triangulator,p=e.clippingPolygon,m=p.length>>1,qe=Xe.indicesArray,Ke=(qe.splice(0,qe.length),qe.length);if(m<Ke)qe.splice(m,m-Ke);else if(Ke<m)for(;Ke<m;)qe.push(0),++Ke;for(var g=qe,Je=0;Je<m;)g[Je]=Je,++Je;var $e=Xe.isConcaveArray,et=$e.length;if(m<et)$e.splice(m,m-et);else if(et<m)for(;et<m;)$e.push(!1),++et;for(var tt=$e,nt=0,it=m;nt<it;){var st=g[(m+nt-1)%m]<<1,at=g[nt]<<1,lt=g[(nt+1)%m]<<1,rt=p[1+st],ot=p[1+at],ut=p[1+lt];tt[nt]=!(0<=p[st]*(ut-ot)+p[at]*(rt-ut)+p[lt]*(ot-rt)),++nt}var f=Xe.triangles;for(f.splice(0,f.length);3<m;){for(var ht,ct=m-1,A=0,_t=1;;){if(ht=!1,!tt[A]){for(var dt=g[ct]<<1,pt=g[A]<<1,mt=g[_t]<<1,gt=p[dt],ft=p[1+dt],At=p[pt],xt=p[1+pt],wt=p[mt],yt=p[1+mt],bt=(_t+1)%m;bt!=ct;){if(tt[bt]){var vt=g[bt]<<1,Ct=p[vt],vt=p[1+vt];if(0<=wt*(vt-ft)+gt*(yt-vt)+Ct*(ft-yt)&&0<=gt*(vt-xt)+At*(ft-vt)+Ct*(xt-ft)&&0<=At*(vt-yt)+wt*(xt-vt)+Ct*(yt-xt)){ht=!0;break}}bt=(bt+1)%m}if(!ht)break}if(0==_t){for(;tt[A]&&0<--A;);break}ct=A,_t=((A=_t)+1)%m}f.push(g[(m+A-1)%m]),f.push(g[A]),f.push(g[(A+1)%m]),qe.splice(A,1),$e.splice(A,1);var St=(--m+A-1)%m,kt=A==m?0:A,Mt=g[(m+St-1)%m]<<1,It=g[St]<<1,Bt=g[(1+St)%m]<<1,Tt=p[1+Mt],Et=p[1+It],Ft=p[1+Bt],St=(tt[St]=!(0<=p[Mt]*(Ft-Et)+p[It]*(Tt-Ft)+p[Bt]*(Et-Tt)),g[(m+kt-1)%m]<<1),Mt=g[kt]<<1,It=g[(kt+1)%m]<<1,Ft=p[1+St],Bt=p[1+Mt],Et=p[1+It];tt[kt]=!(0<=p[St]*(Et-Bt)+p[Mt]*(Ft-Et)+p[It]*(Bt-Ft))}3==m&&(f.push(g[2]),f.push(g[0]),f.push(g[1]));var x=e.triangulator,Dt=e.clippingPolygon,w=x.convexPolygons,Rt=(x.polygonPool.freeAll(w),w.splice(0,w.length),x.convexPolygonsIndices),y=(x.polygonIndicesPool.freeAll(Rt),Rt.splice(0,Rt.length),x.polygonIndicesPool.obtain());y.splice(0,y.length);(b=x.polygonPool.obtain()).splice(0,b.length);for(var Pt=-1,zt=0,Qt=0,Vt=f.length;Qt<Vt;){var Ot,Wt,Nt,Gt,Ut,Lt,jt,Ht=f[Qt]<<1,Yt=f[Qt+1]<<1,Zt=f[Qt+2]<<1,Xt=Dt[Ht],qt=Dt[1+Ht],Kt=Dt[Yt],Jt=Dt[1+Yt],$t=Dt[Zt],en=Dt[1+Zt],tn=!1;Pt==Ht&&(Wt=(Ot=b)[jt=b.length-4],Gt=Ot[0]-$t,Ut=Ot[1]-en,(0<=$t*(Nt=Ot[3+jt]-(Lt=Ot[1+jt]))-en*(jt=Ot[2+jt]-Wt)+jt*Lt-Wt*Nt?1:-1)==zt)&&(0<=Ot[2]*Ut-Ot[3]*Gt+Gt*en-$t*Ut?1:-1)==zt&&(b.push($t),b.push(en),y.push(Zt),tn=!0),tn||(0<b.length&&(w.push(b),Rt.push(y),b=x.polygonPool.obtain(),y=x.polygonIndicesPool.obtain()),b.splice(0,b.length),b.push(Xt),b.push(qt),b.push(Kt),b.push(Jt),b.push($t),b.push(en),y.splice(0,y.length),y.push(Ht),y.push(Yt),y.push(Zt),zt=0<=$t*(jt=Jt-qt)-en*(Lt=Kt-Xt)+Lt*qt-Xt*jt?1:-1,Pt=Ht),Qt+=3}0<b.length&&(w.push(b),Rt.push(y));for(var nn=0,sn=w.length;nn<sn;){if(0==(y=Rt[nn]).length);else for(var b,an,ln,rn,on,un,hn,cn,_n,dn,pn=y[0],mn=y[y.length-1],gn=(b=w[nn]).length-4,v=b,fn=v[gn],An=v[1+gn],xn=v[2+gn],wn=v[3+gn],yn=v[0],bn=v[1],vn=v[2],Cn=v[3],gn=xn-fn,v=wn-An,Sn=0<=yn*v-bn*gn+gn*An-fn*v?1:-1,kn=0;kn<sn;)kn==nn?++kn:(3==(an=Rt[kn]).length&&(ln=an[2],on=(rn=w[kn])[rn.length-2],un=rn[rn.length-1],an[0]==pn)&&an[1]==mn&&(_n=yn-on,dn=bn-un,(0<=on*(cn=wn-An)-un*(hn=xn-fn)+hn*An-fn*cn?1:-1)==Sn)&&(0<=vn*dn-Cn*_n+_n*un-on*dn?1:-1)==Sn&&(rn.splice(0,rn.length),an.splice(0,an.length),b.push(on),b.push(un),y.push(ln),fn=xn,An=wn,xn=on,wn=un,kn=0),++kn);++nn}for(var Mn,In=w.length-1;0<=In;)0==(b=w[In]).length&&(w.splice(In,1),x.polygonPool.free(b),Mn=Rt[In],Rt.splice(In,1),x.polygonIndicesPool.free(Mn)),--In;e.clippingPolygons=w;for(var Bn=0,Tn=e.clippingPolygons;Bn<Tn.length;){for(var En,Fn,Dn,C=Tn[Bn],Rn=(++Bn,C.length),Pn=C[Rn-2]*C[1]-C[0]*C[Rn-1],zn=0,Qn=Rn-3;zn<Qn;)En=C[zn],Fn=C[zn+1],Dn=C[zn+2],Pn+=En*C[zn+3]-Dn*Fn,zn+=2;if(!(Pn<0))for(var Vn=0,On=Rn-2,Wn=Rn>>1;Vn<Wn;){var Nn=C[Vn],Gn=C[Vn+1],Un=On-Vn;C[Vn]=C[Un],C[Vn+1]=C[1+Un],C[Un]=Nn,C[1+Un]=Gn,Vn+=2}C.push(C[0]),C.push(C[1])}}}var Ln=this.clippingMeshes.h[i.attachment.name];if(null!=Ln){var r=Ln.mesh,S=(0!=(512&z.flags)?r.flags|=512:r.flags&=-513,e.clippingPolygon),c=Mh.triangulator,k=S.length>>1,jn=c.indicesArray,Hn=(jn.splice(0,jn.length),jn.length);if(k<Hn)jn.splice(k,k-Hn);else if(Hn<k)for(;Hn<k;)jn.push(0),++Hn;for(var M=jn,Yn=0;Yn<k;)M[Yn]=Yn,++Yn;var Zn=c.isConcaveArray,Xn=Zn.length;if(k<Xn)Zn.splice(k,k-Xn);else if(Xn<k)for(;Xn<k;)Zn.push(!1),++Xn;for(var qn=Zn,Kn=0,Jn=k;Kn<Jn;){var $n=M[(k+Kn-1)%k]<<1,ei=M[Kn]<<1,ti=M[(Kn+1)%k]<<1,ni=S[1+$n],ii=S[1+ei],si=S[1+ti];qn[Kn]=!(0<=S[$n]*(si-ii)+S[ei]*(ni-si)+S[ti]*(ii-ni)),++Kn}var I=c.triangles;for(I.splice(0,I.length);3<k;){for(var ai,li=k-1,B=0,ri=1;;){if(ai=!1,!qn[B]){for(var oi=M[li]<<1,ui=M[B]<<1,hi=M[ri]<<1,ci=S[oi],_i=S[1+oi],di=S[ui],pi=S[1+ui],mi=S[hi],gi=S[1+hi],fi=(ri+1)%k;fi!=li;){if(qn[fi]){var Ai=M[fi]<<1,xi=S[Ai],Ai=S[1+Ai];if(0<=mi*(Ai-_i)+ci*(gi-Ai)+xi*(_i-gi)&&0<=ci*(Ai-pi)+di*(_i-Ai)+xi*(pi-_i)&&0<=di*(Ai-gi)+mi*(pi-Ai)+xi*(gi-pi)){ai=!0;break}}fi=(fi+1)%k}if(!ai)break}if(0==ri){for(;qn[B]&&0<--B;);break}li=B,ri=((B=ri)+1)%k}I.push(M[(k+B-1)%k]),I.push(M[B]),I.push(M[(B+1)%k]),jn.splice(B,1),Zn.splice(B,1);var wi=(--k+B-1)%k,yi=B==k?0:B,bi=M[(k+wi-1)%k]<<1,vi=M[wi]<<1,Ci=M[(1+wi)%k]<<1,Si=S[1+bi],ki=S[1+vi],Mi=S[1+Ci],wi=(qn[wi]=!(0<=S[bi]*(Mi-ki)+S[vi]*(Si-Mi)+S[Ci]*(ki-Si)),M[(k+yi-1)%k]<<1),bi=M[yi]<<1,vi=M[(yi+1)%k]<<1,Mi=S[1+wi],Ci=S[1+bi],ki=S[1+vi];qn[yi]=!(0<=S[wi]*(ki-Ci)+S[bi]*(Mi-ki)+S[vi]*(Ci-Mi))}3==k&&(I.push(M[2]),I.push(M[0]),I.push(M[1]));for(var Ii,Bi=S.length>>1,J=Ln.content,Ti=I.length,Ei=J.vertexBuffer,Fi=Bi*J.vertexStride,Di=Ei.pos;Di<Fi;)++Di,Ei.pos==Ei.array.length&&((Ii=Ei.array.length<<1)<128&&(Ii=128),(Ii=new Float32Array(Ii)).set(Ei.array),Ei.array=Ii),Ei.array[Ei.pos++]=0;for(var Ri=J.indexBuffer;Ri.length<Ti;)Ri.push(0);for(var Pi=0;Pi<Bi;){var zi=2*Pi++,T=Ln.content,Qi=S[zi],Qi=(T.vertexBuffer.array[T.verticesCount++]=Qi,S[1+zi]);T.vertexBuffer.array[T.verticesCount++]=Qi,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=1,T.vertexBuffer.array[T.verticesCount++]=1,T.vertexBuffer.array[T.verticesCount++]=1,T.vertexBuffer.array[T.verticesCount++]=1,T.useDarkColor&&(T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0,T.vertexBuffer.array[T.verticesCount++]=0)}for(var Vi=0,Oi=I;Vi<Oi.length;){var Wi=Ln.content;Wi.indexBuffer[Wi.indexCount]=Oi[Vi++],Wi.indexCount++}}continue}null!=e.clipAttachment&&e.clipAttachment.endSlot==i.data&&null!=e.clipAttachment&&(e.clipAttachment=null,e.clippingPolygons=null,(s=e.clippedVertices).splice(0,s.length),(l=e.clippedTriangles).splice(0,l.length),(K=e.clippingPolygon).splice(0,K.length));continue}var a=i.attachment,Ni=a.worldVerticesLength,Gi=this._tempVerticesArray,Ui=2*(Ni>>1),Li=i.deform,ji=a.vertices,Hi=a.bones;if(null==Hi){0<Li.length&&(ji=Li);for(var Yi=i.bone,Zi=Yi.worldX,Xi=Yi.worldY,qi=Yi.a,Ki=Yi.b,Ji=Yi.c,$i=Yi.d,es=0,ts=0;ts<Ui;){var ns=ji[es],is=ji[es+1];Gi[ts]=ns*qi+is*Ki+Zi,Gi[ts+1]=ns*Ji+is*$i+Xi,es+=2,ts+=2}}else{var ss=0,as=(0,i.bone.skeleton.getBones());if(0==Li.length)for(var ls=0,rs=0;ls<Ui;){var os=0,us=0,hs=Hi[ss++];for(hs+=ss;ss<hs;){var cs=as[Hi[ss]],_s=ji[rs],ds=ji[rs+1],ps=ji[rs+2];os+=(_s*cs.a+ds*cs.b+cs.worldX)*ps,us+=(_s*cs.c+ds*cs.d+cs.worldY)*ps,++ss,rs+=3}Gi[ls]=os,Gi[ls+1]=us,ls+=2}else for(var ms=0,gs=0,fs=0;ms<Ui;){var As=0,xs=0,ws=Hi[ss++];for(ws+=ss;ss<ws;){var ys=as[Hi[ss]],bs=ji[gs]+Li[fs],vs=ji[gs+1]+Li[fs+1],Cs=ji[gs+2];As+=(bs*ys.a+vs*ys.b+ys.worldX)*Cs,xs+=(bs*ys.c+vs*ys.d+ys.worldY)*Cs,++ss,gs+=3,fs+=2}Gi[ms]=As,Gi[ms+1]=xs,ms+=2}}u={atlasRegion:nl.__cast(a.getRegion(),oy),regionColor:a.color,uvs:a.uvs,triangles:a.triangles,slotVerticesLength:Ni>>1}}if(null!=e.clipAttachment){var Ss=u.triangles,ks=this._tempVerticesArray,Ms=Ss.length,Is=u.uvs,Bs=e.clipOutput,E=e.clippedVertices,F=e.clippedTriangles,Ts=e.clippingPolygons,Es=e.clippingPolygons.length,Fs=0;for(E.splice(0,E.length),F.splice(0,F.length);;){for(var Ds=0,Rs=0;Rs<Ms;){for(var D=Ss[Rs]<<1,Ps=ks[D],zs=ks[1+D],Qs=Is[D],Vs=Is[1+D],Os=ks[D=Ss[Rs+1]<<1],Ws=ks[1+D],Ns=Is[D],Gs=Is[1+D],Us=ks[D=Ss[Rs+2]<<1],Ls=ks[1+D],js=Is[D],Hs=Is[1+D],Ys=0;Ys<Es;){var R=E.length;if(!e.clip(Ps,zs,Os,Ws,Us,Ls,Ts[Ys],Bs)){var Zs=R+18,Xs=E.length;if(Zs<Xs)E.splice(Zs,Zs-Xs);else if(Xs<Zs)for(;Xs<Zs;)E.push(0),++Xs;E[R]=Ps,E[R+1]=zs,E[R+2]=1,E[R+3]=1,E[R+4]=Qs,E[R+5]=Vs,E[R+6]=Os,E[R+7]=Ws,E[R+8]=1,E[R+9]=1,E[R+10]=Ns,E[R+11]=Gs,E[R+12]=Us,E[R+13]=Ls,E[R+14]=1,E[R+15]=1,E[R+16]=js,E[R+17]=Hs;var qs=(R=F.length)+3,Ks=F.length;if(qs<Ks)F.splice(qs,qs-Ks);else if(Ks<qs)for(;Ks<qs;)F.push(0),++Ks;F[R]=Fs,F[R+1]=Fs+1|0,F[R+2]=Fs+2|0,Fs+=3,Ds=2;break}var Js=Bs.length;if(0==Js);else{var $s=Ws-Ls,ea=Us-Os,ta=Ps-Us,na=Ls-zs,ia=1/($s*ta+ea*(zs-Ls)),sa=Js>>1,aa=R+6*sa,la=E.length;if(aa<la)E.splice(aa,aa-la);else if(la<aa)for(;la<aa;)E.push(0),++la;for(var ra=0;ra<Js;){var oa=Bs[ra],ua=Bs[ra+1],oa=(E[R]=oa,E[R+1]=ua,E[R+2]=1,oa-Us),ua=ua-Ls,ha=($s*oa+ea*ua)*ia,oa=(na*oa+ta*ua)*ia,ua=(E[R+3]=1)-ha-oa;E[R+=4]=Qs*ha+Ns*oa+js*ua,E[R+1]=Vs*ha+Gs*oa+Hs*ua,R+=2,ra+=2}if(2==Ds)break;if(1<=Ds)break;var ca=(R=F.length)+3*(sa-2),_a=F.length;if(ca<_a)F.splice(ca,ca-_a);else if(_a<ca)for(;_a<ca;)F.push(0),++_a;--sa;for(var da=1;da<sa;)F[R]=Fs,F[R+1]=Fs+da|0,F[R+2]=Fs+da+1|0,R+=3,++da;if(2==Ds)break;if(1<=Ds)break;Fs+=1+sa}++Ys}if(2==Ds)Ds=0;else if(1<=Ds)break;Rs+=3}if(0==Ds)break}if(0==e.clippedTriangles.length){null!=e.clipAttachment&&e.clipAttachment.endSlot==i.data&&null!=e.clipAttachment&&(e.clipAttachment=null,e.clippingPolygons=null,(Yi=e.clippedVertices).splice(0,Yi.length),(Ni=e.clippedTriangles).splice(0,Ni.length),(wa=e.clippingPolygon).splice(0,wa.length));continue}for(var pa=e.clippedVertices,ma=Math.round(pa.length/6),ga=[],fa=0;fa<ma;){var Aa=6*fa++;ga.push([Aa,1+Aa,4+Aa,5+Aa])}for(var xa=Array.prototype.concat.apply([],ga),wa=e.clippedTriangles,ya=new Array(xa.length),ba=0,va=xa.length;ba<va;){var Ca=ba++;ya[Ca]=pa[xa[Ca]]}Ea={triangleIndices:wa,uvPositions:ya}}else{for(var Sa=u.uvs,ka=this._tempVerticesArray.length>>1,Ma=[],Ia=0;Ia<ka;){var Ba=2*Ia++;Ma.push([this._tempVerticesArray[Ba],this._tempVerticesArray[1+Ba],Sa[Ba],Sa[1+Ba]])}var Ta=Array.prototype.concat.apply([],Ma),Ea={triangleIndices:u.triangles,uvPositions:Ta}}Ta=i.data.blendMode;null==G&&this._usePremultipliedAlpha&&(1==Ta?(n.material.passes.set_depthWrite(!1),n.material.passes.set_blendSrc(eo.One),n.material.passes.set_blendDst(eo.One),n.material.passes.set_blendAlphaSrc(eo.One),n.material.passes.set_blendAlphaDst(eo.One)):(n.material.passes.set_depthWrite(!0),n.material.passes.set_blendSrc(eo.One),n.material.passes.set_blendDst(eo.OneMinusSrcAlpha),n.material.passes.set_blendAlphaSrc(eo.One),n.material.passes.set_blendAlphaDst(eo.OneMinusSrcAlpha)));var P,G=null!=G?G:Ta;this._usePremultipliedAlpha&&G!=Ta&&(++U,(P=this._meshes.length<U?(P=this.createSubMesh(),this._meshes.push(P),P):this._meshes[U-1]).z=(U-1)*sl.MIN_DEPTH_PRECISON,P.flags|=1,0!=(131072&P.flags)&&(P.flags|=262144),t=nl.__cast(P.primitive,ul),n=P,G=Ta,H=j=L=0,this._usePremultipliedAlpha)&&(1==Ta?(P.material.passes.set_depthWrite(!1),P.material.passes.set_blendSrc(eo.One),P.material.passes.set_blendDst(eo.One),P.material.passes.set_blendAlphaSrc(eo.One),P.material.passes.set_blendAlphaDst(eo.One)):(P.material.passes.set_depthWrite(!0),P.material.passes.set_blendSrc(eo.One),P.material.passes.set_blendDst(eo.OneMinusSrcAlpha),P.material.passes.set_blendAlphaSrc(eo.One),P.material.passes.set_blendAlphaDst(eo.OneMinusSrcAlpha))),n.material.set_texture(nl.__cast(u.atlasRegion.page.rendererObject,Ir).innerTex);for(var Fa,Da=i.color,Ra=u.regionColor,Pa=this.skeleton.color,za=Ra.r*Pa.r*Da.r,Qa=Ra.g*Pa.g*Da.g,Va=Ra.b*Pa.b*Da.b,Oa=Ra.a*Pa.a*Da.a,Ra=i.darkColor,Wa=null!=Ra?Ra:sy.CLEAR,Na=this._usePremultipliedAlpha?0:1,Ga=Ea.uvPositions,Ua=Ea.triangleIndices,La=Ga.length>>2,ja=Ua.length,Ha=(L+=La,j+=ja,t.vertexBuffer),Ya=L*t.vertexStride,Za=Ha.pos;Za<Ya;)++Za,Ha.pos==Ha.array.length&&((Fa=Ha.array.length<<1)<128&&(Fa=128),(Fa=new Float32Array(Fa)).set(Ha.array),Ha.array=Fa),Ha.array[Ha.pos++]=0;for(var Xa=t.indexBuffer;Xa.length<j;)Xa.push(0);for(var qa=0;qa<La;){var Ka=4*qa++,Ja=Ga[Ka],Ja=(t.vertexBuffer.array[t.verticesCount++]=Ja,Ga[1+Ka]),Ja=(t.vertexBuffer.array[t.verticesCount++]=Ja,t.vertexBuffer.array[t.verticesCount++]=0,Ga[2+Ka]),Ja=(t.vertexBuffer.array[t.verticesCount++]=Ja,Ga[3+Ka]);t.vertexBuffer.array[t.verticesCount++]=Ja,t.vertexBuffer.array[t.verticesCount++]=za,t.vertexBuffer.array[t.verticesCount++]=Qa,t.vertexBuffer.array[t.verticesCount++]=Va,t.vertexBuffer.array[t.verticesCount++]=Oa,t.useDarkColor&&(t.vertexBuffer.array[t.verticesCount++]=Wa.r,t.vertexBuffer.array[t.verticesCount++]=Wa.g,t.vertexBuffer.array[t.verticesCount++]=Wa.b,t.vertexBuffer.array[t.verticesCount++]=Na)}for(var $a=0;$a<ja;)t.indexBuffer[t.indexCount]=Ua[$a++]+H,t.indexCount++;H+=La,null!=e.clipAttachment&&e.clipAttachment.endSlot==i.data&&null!=e.clipAttachment&&(e.clipAttachment=null,e.clippingPolygons=null,(Pa=e.clippedVertices).splice(0,Pa.length),(Da=e.clippedTriangles).splice(0,Da.length),(Ra=e.clippingPolygon).splice(0,Ra.length))}else null!=e.clipAttachment&&e.clipAttachment.endSlot==i.data&&null!=e.clipAttachment&&(e.clipAttachment=null,e.clippingPolygons=null,(X=e.clippedVertices).splice(0,X.length),(Pa=e.clippedTriangles).splice(0,Pa.length),(Da=e.clippingPolygon).splice(0,Da.length))}il.each(this._meshes.slice(0,U),function(e){e.flags|=2}),il.each(this._meshes.slice(U),function(e){e.flags&=-3})},draw:function(e){null!=this.primitive&&Co.prototype.draw.call(this,e)},getLocalCollider:function(){return null},clone:function(e){for(var t=nl.__cast(this.material.clone(),Bn),e=null==e?new Mh(this._useDarkColor,t,null,this.skeleton,this._usePremultipliedAlpha):e,n=(Co.prototype.clone.call(this,e),e.children),i=[],s=0;s<n.length;){var a=n[s];++s,"SplineSubMesh"==a.name&&i.push(a)}for(var l=new Array(i.length),s=0,r=i.length;s<r;){var o=s++;l[o]=i[o].toMesh()}return this._meshes=l,null!=e.primitive&&this._meshes.push(e),e.material=t,e},addBoundsRec:function(e,t){0==(512&this.flags)&&Co.prototype.addBoundsRec.call(this,e,t)},createSubMesh:function(){var e=new Co(new ul(this._useDarkColor),nl.__cast(this.material.clone(),Bn),this);return 0!=(512&this.flags)?e.flags|=512:e.flags&=-513,e.name="SplineSubMesh",e.material.passes.load(this.material.passes),e.material.passes.addShader(new(this._useDarkColor?fl:Yo)),this._usePremultipliedAlpha&&e.material.passes.addShader(new dl),e},__class__:Mh}),(i["hacksaw.core.h3d.spline.SplineElement"]=Ml).__name__="hacksaw.core.h3d.spline.SplineElement",Ml.__super__=Lu,Ml.prototype=e(Lu.prototype,{dispose:function(){il.each(this.meshes,function(e){null!=e&&null!=e.parent&&e.parent.removeChild(e)}),this.meshes=[],this.materials=[],this.segmentDistanceRanges=[]},update:function(e){Lu.prototype.update.call(this,e)},createMesh:function(e,t){this.dispose(),this.spline=null==e?this.spline:e,t=null==t?this._config.smoothing:t;for(var e=this.calculateMeshSegments(t),n=e.meshSegments,i=Array.prototype.concat.apply([],e.splineVertexSegments),s=new Array(n.length),a=0,l=n.length;a<l;)s[h=a++]=n[h].range;this.segmentDistanceRanges=s;for(var r=this.segmentDistanceRanges,s=new Array(r.length),a=0,l=r.length;a<l;){var o=[r[h=a++]];s[h]=i.slice(il.findIndex(i,(t=>function(e){return e>=t[0].start})(o)),il.findIndex(i,(t=>function(e){return e>=t[0].end})(o))+1)}for(var u=new Array(n.length),a=0,l=n.length;a<l;)u[h=a++]=this.createMaterial(n[h]);this.materials=u;for(r=il.zip3(this.materials,n,s),s=new Array(r.length),a=0,l=r.length;a<l;){var h,c=r[h=a++];s[h]=this.createMeshSegment(c._2,c._0,c._1)}this.meshes=s},createMaterial:function(e){var e=Ku.create(e.tile),t=(e.set_blendMode(this._config.blendMode),e.passes.set_depthTest(this._config.depthTest),e.passes.set_culling(this._config.culling),this._config.shadows),t=(e.set_castShadows(t),e.set_receiveShadows(t),e.passes.set_enableLights(this._config.enableLights),e.mshader.color__);return t.x=1,t.y=1,t.z=1,t.w=1,e},calculateMeshSegments:function(e){for(var s=this,t=this._config.tilePatches,n=new Array(t.length),i=0,a=t.length;i<a;){var l=t[p=i++],r=se.getSizeByReference(l.tile).x,o=l.splineRate,u=Fy.interpolate(o<=0?0:1<=o?1:o,0,s.spline.get_totalArcLength()-r),o=l.tile;if((h=null==(h=u+r)?2147483647:h)<u)throw tl.thrown("Range needs to start before end. "+u+" > "+h+" but should be start <= end");n[p]=new Ih(o,new Pi(u,h),l.textureMode)}n.sort(function(e,t){e=e.range.start,t=t.range.start;return e<t?-1:t<e?1:0});var h,c=il.reduce(n,function(e,t){if(e.distance<t.range.start){var n=e.ranges,i=e.distance,s=t.range.start;if((s=null==s?2147483647:s)<i)throw tl.thrown("Range needs to start before end. "+i+" > "+s+" but should be start <= end");n.push(new Pi(i,s))}return e.distance=t.range.end,e},{ranges:[],distance:0}),_=c.ranges,d=!Fy.nearEquals(c.distance,this.spline.get_totalArcLength()),u=c.distance;if((h=null==(h=this.spline.get_totalArcLength())?2147483647:h)<u)throw tl.thrown("Range needs to start before end. "+u+" > "+h+" but should be start <= end");il.pushIf(_,d,new Pi(u,h));for(var p,t=c.ranges,m=new Array(t.length),i=0,a=t.length;i<a;)m[p=i++]=new Ih(s._config.tile,t[p],s._config.textureMode);return{meshSegments:n.concat(m),splineVertexSegments:this.sampleVertexOffsets(e,il.reduce(n,function(e,t){var n=Fy.nearEquals(t.range.start,0),i=Fy.nearEquals(t.range.end,s.spline.get_totalArcLength());return il.pushIf(e,!n,t.range.start),il.pushIf(e,!i,t.range.end),e},[]))}},sampleVertexOffsets:function(e,t){for(var n=this._config.vertexSamplesPerSegment,i=1/n,s=[],a=0,l=this.spline.get_segmentCount();a<l;){for(var r=this.spline.getSegmentEndPointsDistance(a++),o=r.start,u=r.end,h=[],c=1;c<n;){var _=c++*i,_=o*(1-_)+u*_,d=this.spline.getSegmentDataByDistance(_),d=st.fromVector4(d.segment.getCurvature(d.t));h.push({curvature:Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z),distance:_})}s.push(h)}for(var p=e*il.reduce(s,function(e,t){return e=Math.max(e,il.reduce(t,function(e,t){return e+=t.curvature},0))},1),m=[],a=0,l=s.length;a<l;){var g=a++,f=il.reducei(s[g],function(e,t,n){return e.angle+=t.curvature,p<=e.angle&&(e.angle=0,e.fractions.push(t.distance)),e},{fractions:[],angle:p}).fractions;f.push(this.spline.getSegmentEndPointsDistance(g).end),m.push(f)}var A=m;return il.each(t,function(t){for(var e=0;e<A.length;){var n=A[e],i=(++e,il.findIndex(n,function(e){return t<e}));if(-1!=i){n.splice(i,0,t);break}}}),A[0].splice(0,0,0),this.spline.endPointsConnected&&A[A.length-1].push(this.spline.get_totalArcLength()),A},createMeshSegment:function(e,t,n){var i,s=se.getSizeByReference(n.tile);switch((h=n.textureMode)._hx_index){case 0:l=mh.Stretch;break;case 1:var a=h.rate,l=mh.Tile(null==a?1:a);break;case 2:a=h.repeats;l=mh.RepeatPerSegment(null==a?1:a);break;case 3:a=h.clampTexture;l=mh.RepeatByDistance(h.distance,null!=a&&a);break;case 4:a=h.clampTexture;l=mh.RepeatByDistance(s.x,null!=a&&a)}switch((h=this._config.extrusionShape)._hx_index){case 0:r=gh.Line(s.y);break;case 1:r=gh.Line(h.width);break;case 2:var a=h.singleFaceTexture,r=gh.Rectangle(h.width,h.height,null!=a&&a);break;case 3:r=gh.Circle(h.radius,h.segments);break;case 4:r=gh.Custom(h.shape)}switch(r._hx_index){case 0:i=!1;break;case 1:case 2:i=!0;break;case 3:i=2<r.shape.positions.length}var o=new hl(this.spline,r,l),u=(o.fillPolygon(e),new Co(o,t,this));if(!this.spline.endPointsConnected&&i){var h,e=Math.abs(n.range.start)<=1e-9,t=Fy.nearEquals(n.range.end,this.spline.get_totalArcLength());if(e)switch((h=this._config.endCaps)._hx_index){case 0:break;case 1:a=h.material;new Co(o.createEndpointShape(!1),a,u)}if(t)switch((h=this._config.endCaps)._hx_index){case 0:break;case 1:a=h.material;new Co(o.createEndpointShape(!0),a,u)}}return u},__class__:Ml}),function(e,t,n){this.tile=e,this.range=t,this.textureMode=n}),Bh=((i["hacksaw.core.h3d.spline.MeshSegmentData"]=Ih).__name__="hacksaw.core.h3d.spline.MeshSegmentData",Ih.prototype={__class__:Ih},fe["hacksaw.core.h3d.spline.EndCapStyle"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"hacksaw.core.h3d.spline.EndCapStyle",toString:o},Flat:((R=function(e){return{_hx_index:1,material:e,__enum__:"hacksaw.core.h3d.spline.EndCapStyle",toString:o}})._hx_name="Flat",R.__params__=["material"],R)}),Th=(Bh.__constructs__=[Bh.None,Bh.Flat],Bh.__empty_constructs__=[Bh.None],fe["hacksaw.core.h3d.spline.TextureMode"]={__ename__:!0,__constructs__:null,Stretch:{_hx_name:"Stretch",_hx_index:0,__enum__:"hacksaw.core.h3d.spline.TextureMode",toString:o},Tile:((R=function(e){return{_hx_index:1,rate:e,__enum__:"hacksaw.core.h3d.spline.TextureMode",toString:o}})._hx_name="Tile",R.__params__=["rate"],R),RepeatPerSegment:((R=function(e){return{_hx_index:2,repeats:e,__enum__:"hacksaw.core.h3d.spline.TextureMode",toString:o}})._hx_name="RepeatPerSegment",R.__params__=["repeats"],R),RepeatByDistance:((R=function(e,t){return{_hx_index:3,distance:e,clampTexture:t,__enum__:"hacksaw.core.h3d.spline.TextureMode",toString:o}})._hx_name="RepeatByDistance",R.__params__=["distance","clampTexture"],R),RepeatByTextureWidth:((R=function(e){return{_hx_index:4,clampTexture:e,__enum__:"hacksaw.core.h3d.spline.TextureMode",toString:o}})._hx_name="RepeatByTextureWidth",R.__params__=["clampTexture"],R)}),Eh=(Th.__constructs__=[Th.Stretch,Th.Tile,Th.RepeatPerSegment,Th.RepeatByDistance,Th.RepeatByTextureWidth],Th.__empty_constructs__=[Th.Stretch],fe["hacksaw.core.h3d.spline.Shape"]={__ename__:!0,__constructs__:null,Texture:{_hx_name:"Texture",_hx_index:0,__enum__:"hacksaw.core.h3d.spline.Shape",toString:o},Line:((R=function(e){return{_hx_index:1,width:e,__enum__:"hacksaw.core.h3d.spline.Shape",toString:o}})._hx_name="Line",R.__params__=["width"],R),Rectangle:((R=function(e,t,n){return{_hx_index:2,width:e,height:t,singleFaceTexture:n,__enum__:"hacksaw.core.h3d.spline.Shape",toString:o}})._hx_name="Rectangle",R.__params__=["width","height","singleFaceTexture"],R),Circle:((R=function(e,t){return{_hx_index:3,radius:e,segments:t,__enum__:"hacksaw.core.h3d.spline.Shape",toString:o}})._hx_name="Circle",R.__params__=["radius","segments"],R),Custom:((R=function(e){return{_hx_index:4,shape:e,__enum__:"hacksaw.core.h3d.spline.Shape",toString:o}})._hx_name="Custom",R.__params__=["shape"],R)}),Fh=(Eh.__constructs__=[Eh.Texture,Eh.Line,Eh.Rectangle,Eh.Circle,Eh.Custom],Eh.__empty_constructs__=[Eh.Texture],(i["hacksaw.core.h3d.spline.TexturePatch"]=Il).__name__="hacksaw.core.h3d.spline.TexturePatch",Il.prototype={__class__:Il},(i["hacksaw.core.h3d.spline.SplineElementConfig"]=Bl).__name__="hacksaw.core.h3d.spline.SplineElementConfig",Bl.prototype={__class__:Bl},function(e,t){null==t&&(t=!1),this._textBounds=null,this._textFieldBounds=null,this._initialSize=null,this._lastW=0,this._avgCharW=0,this._charH=0,this._charW=0,this._fontSettings=null,this._strings=[],this._tiles=[],this._meshPools=new at,Lu.call(this),this._config=e,this._anchor=e.anchor,this.prepareResources();t=new It(this);tt.init(t,null),this.tweenObject=t}),Dh=((i["hacksaw.core.h3d.text.TextElement"]=Fh).__name__="hacksaw.core.h3d.text.TextElement",Fh.create=function(e){return new Fh(e)},Fh.__super__=Lu,Fh.prototype=e(Lu.prototype,{show:function(e,t){this.showText(this._config.strings.h[e],t=null==t?!1:t)},showText:function(e,t){if(null==t&&(t=!1),null!=e&&""!=e){this.flags|=2,this.clear();var n=this._config.resource;switch(n._hx_index){case 0:var i=n.align;this.showChars(e,t,n.charSpacing,null==i?Mr.Center:i);break;case 1:i=n.align;this.showChars(e,t,n.charSpacing,null==i?Mr.Center:i,n.maxWidth,n.maxHeight);break;case 2:this.showString(e);break;case 3:this.showImage(e)}this.currString=e,this._centerReset=t}},changeTextStyle:function(e,t){var n,i;null==t&&(t=!1),null!=e&&null!=this.currString&&(n=this.currString,i=this._initialSize,this._initialSize=null==i?this._fontSettings.style.size:i,i=(null==(i=e.size)?this._initialSize:i)/this._initialSize,this._fontSettings.style=e,this.flags|=2,this.clear(),this.addFontString(n,i),2==this._config.resource._hx_index?this.showString(n):new tl("Change text style is implemented only for FontCharacters"),this._centerReset=t)},clear:function(){var n=this;il.each(this._strings,function(e){e.object.set_visible(!1);var t=n._meshPools.h[e.char],e=e.object;t.size==t.maxSize?t.mDispose(e):(t.size==t.mCapacity&&t.resize(),t.mPool[t.size++]=e)}),this._strings=[],this.currString=null},dispose:function(){var t=this;for(this.clear(),il.each(this._strings,function(e){t._meshPools.h[e.char].free(),e.object.remove(),e.object.get_parent().removeChild(e.object.object)});0<this._tiles.length;)this._tiles.pop().dispose();this._meshPools.h=Object.create(null),null!=this.parent&&this.parent.removeChild(this)},tweenChars:function(e,t,n){null==t&&(t=0);for(var i=(n=null==n?!1:n)?t*(this._strings.length-1):0,s=[],a=0,l=this._strings;a<l.length;){for(var r=l[a],o=(++a,new Array(e.length)),u=0,h=e.length;u<h;){var c,_=u++,d=e[_];switch(d._hx_index){case 0:var p=d.v.clone();p.delay+=i,c=et.Position(p);break;case 1:p=d.v.clone();p.delay+=i,c=et.Rotate(p);break;case 2:var m=d.v.clone();m.delay+=i,c=et.Scale(m);break;case 3:m=d.v.clone();m.delay+=i,c=et.Color(m)}o[_]=c}r.object.cancel(),s.push(tt.tween(r.object,o)),n?i-=t:i+=t}return rt.inParallel(s)},update:function(e){tt.update(this.tweenObject,e);for(var t=0,n=this._strings;t<n.length;)tt.update(n[t++].object,e)},prepareResources:function(){var p=this,e=(this._meshPools.h=Object.create(null),this._config.resource);switch(e._hx_index){case 0:for(var c=e.tiles,t=e.models.h,n=(g=Object.keys(t)).length,i=0;i<n;){var s=g[i++],a=this._meshPools,l=new Fw((h=>function(){for(var e=h[0].toHmd().makeObject(function(t){var e=il.find(c,function(e){return 0<=t.indexOf(e.path)}).diffuse;return p._charW=0==p._charW?e.width:(p._charW+e.width)/2,se.getSubTexture(e)}),t=null!=(o=p._config.blendMode)?o:wr.Alpha,n=0,i=e.getMaterials();n<i.length;){var s=i[n],a=(++n,s.set_blendMode(t),s.passes.set_depthTest(p._config.depthTest),p._config.shadows),l=(s.set_castShadows(a),s.set_receiveShadows(a),s.get_texture().set_filter(so.Linear),p.getMaterials()[0]),r=p.color;null!=(r=null!=(o=null==r?null:r)?o:null==l?null:(255*((l=(r=l.mshader.color__).w)<0?0:1<l?1:l)+.499|0)<<24|(255*((l=r.x)<0?0:1<l?1:l)+.499|0)<<16|(255*((l=r.y)<0?0:1<l?1:l)+.499|0)<<8|255*((l=r.z)<0?0:1<l?1:l)+.499|0)&&(l=r,(r=s.mshader.color__).x=(l>>16&255)/255,r.y=(l>>8&255)/255,r.z=(255&l)/255,r.w=(l>>>24)/255)}a=p._config.scale;e.scaleX=a,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleY=a,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleZ=a,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.setRotation(p._config.rotation.x,p._config.rotation.y,p._config.rotation.z),p._config.addStencil&&ec.stencil(e);var o,u=null!=(o=p._textFieldBounds)?o:e.getBounds(),u=(e.name=u.xMin+":"+u.xMax+":"+u.yMin+":"+u.yMax,p.addChild(e),new It(e));return tt.init(u,null),u})([t[s]]),function(e){e.remove()});a.h[s]=l}break;case 1:for(var r=e.atlas,o=e.charMap,u=zy.values(r.contents).length,t=(this._avgCharW=zy.reduce(r.contents,function(e,t){return e+t._1[0].width},0)/u,r.contents.h),n=(g=Object.keys(t)).length,i=0;i<n;){var h=[t[s=g[i++]]],_=null!=o&&Object.prototype.hasOwnProperty.call(o.h,s)?o.h[s]:s,a=this._meshPools,l=new Fw((d=>function(){var e=d[0][0],t=Dh.create(new Rh(e.t,null,null,null,null,null,null,null,null,null,e.width,e.height,null,null)),n=(p._charH=0==p._charH?e.height:p._charH,p._charW=0==p._charW?e.width:(p._charW+e.width)/2,e.width/sl.REFERENCE_SIZE),i=e.height/sl.REFERENCE_SIZE;(r=t.get_mesh()).scaleX=n,r.flags|=1,0!=(131072&r.flags)&&(r.flags|=262144),(r=t.get_mesh()).scaleY=i,r.flags|=1,0!=(131072&r.flags)&&(r.flags|=262144);for(var s=null!=(_=p._config.blendMode)?_:wr.Alpha,a=0,l=t.getMaterials();a<l.length;){var r,o=l[a],u=(++a,o.set_blendMode(s),o.passes.set_depthTest(p._config.depthTest),p._config.shadows),h=(o.set_castShadows(u),o.set_receiveShadows(u),o.get_texture().set_filter(so.Linear),p.getMaterials()[0]),c=p.color;null!=(c=null!=(_=null==c?null:c)?_:null==h?null:(255*((c=(r=h.mshader.color__).w)<0?0:1<c?1:c)+.499|0)<<24|(255*((h=r.x)<0?0:1<h?1:h)+.499|0)<<16|(255*((c=r.y)<0?0:1<c?1:c)+.499|0)<<8|255*((h=r.z)<0?0:1<h?1:h)+.499|0)&&(e=c,(h=o.mshader.color__).x=(e>>16&255)/255,h.y=(e>>8&255)/255,h.z=(255&e)/255,h.w=(e>>>24)/255)}u=p._config.scale;t.scaleX=u,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY=u,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ=u,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.setRotation(p._config.rotation.x,p._config.rotation.y,p._config.rotation.z),p._config.addStencil&&ec.stencil(t);var _,n=null!=(_=p._textFieldBounds)?_:t.getBounds(),i=(t.name=n.xMin+":"+n.xMax+":"+n.yMin+":"+n.yMax,p.addChild(t),new It(t));return tt.init(i,null),i})(h),function(e){e.remove()});a.h[_]=l}break;case 2:var r=e.style,o=e.strings,u=e.maxWidth,d=e.maxHeight,m=e.wordWrap;if(this._fontSettings={font:e.font,style:r,align:e.align,multiline:e.multiline,maxWidth:null!=u?u:r.maxWidth,maxHeight:null!=d?d:r.maxHeight,wordWrap:null!=m&&m},null!=o)for(r=0;r<o.length;)this.addFontString(o[r++]);break;case 3:for(var g,t=e.tiles.h,n=(g=Object.keys(t)).length,i=0;i<n;){var f=t[g[i++]],a=this._meshPools,s=f.text,l=new Fw((h=>function(){for(var e=Dh.create(new Rh(h[0],null,null,null,null,null,null,null,null,null,null,null,null,null)),t=null!=(o=p._config.blendMode)?o:wr.Alpha,n=0,i=e.getMaterials();n<i.length;){var s=i[n],a=(++n,s.set_blendMode(t),s.passes.set_depthTest(p._config.depthTest),p._config.shadows),l=(s.set_castShadows(a),s.set_receiveShadows(a),s.get_texture().set_filter(so.Linear),p.getMaterials()[0]),r=p.color;null!=(r=null!=(o=null==r?null:r)?o:null==l?null:(255*((l=(r=l.mshader.color__).w)<0?0:1<l?1:l)+.499|0)<<24|(255*((l=r.x)<0?0:1<l?1:l)+.499|0)<<16|(255*((l=r.y)<0?0:1<l?1:l)+.499|0)<<8|255*((l=r.z)<0?0:1<l?1:l)+.499|0)&&(l=r,(r=s.mshader.color__).x=(l>>16&255)/255,r.y=(l>>8&255)/255,r.z=(255&l)/255,r.w=(l>>>24)/255)}a=p._config.scale;e.scaleX=a,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleY=a,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleZ=a,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.setRotation(p._config.rotation.x,p._config.rotation.y,p._config.rotation.z),p._config.addStencil&&ec.stencil(e);var o,u=null!=(o=p._textFieldBounds)?o:e.getBounds(),u=(e.name=u.xMin+":"+u.xMax+":"+u.yMin+":"+u.yMax,p.addChild(e),new It(e));return tt.init(u,null),u})([f.tile]),function(e){e.remove()});a.h[s]=l}}},createSdfTile:function(e,t){var n=this._fontSettings.font.size;this._fontSettings.font.resizeTo(n*t|0);var i=(null==(a=this._fontSettings.maxWidth)?0:a)*t,t=(null==(a=this._fontSettings.maxHeight)?0:a)*t,s=new ie(this._fontSettings.font),a=(s.set_text(e),this._fontSettings.align),l=this._fontSettings.multiline,i=cc.toSDFTile(s,new _c(this._fontSettings.style,0<i?i:null,0<t?t:null,null,null==a?this._fontSettings.multiline?Mr.MultilineCenter:Mr.Center:a,null,null!=l&&l,null,null,null,null,this._fontSettings.wordWrap));return s.dispose(),this._charW=i.tile.width/e.length,this._fontSettings.font.resizeTo(n),i},addFontString:function(w,y){var e,t,b=this;null!=w&&""!=w&&(e=this._meshPools,t=new Fw(function(){var e=b._fontSettings.style.sdfScaleFactor,t=b.createSdfTile(w,e),u=(b._tiles.push(t.tile),Dh.create(new Rh(t.tile,null,null,null,null,null,null,null,null,null,null,null,null,null))),n=new ml;n.texture__=u.get_material().get_texture(),n.distanceRange__=b._fontSettings.font.distanceRange,n.fillColor__=st.toVector4(Ft.toVector(b._fontSettings.style.color)),n.outlineWidth__=3*b._fontSettings.style.outlineWidth;var i=.00392156862745098*((p=b._fontSettings.style.outlineColor)>>16&255),s=.00392156862745098*(p>>8&255),a=.00392156862745098*(255&p),l=.00392156862745098*(p>>>24);n.outlineColor__=new q(i=null==i?0:i,s=null==s?0:s,a=null==a?0:a,l=null==l?1:l);var i=.00392156862745098*((p=b._fontSettings.style.shadowColor)>>16&255),s=.00392156862745098*(p>>8&255),a=.00392156862745098*(255&p),l=.00392156862745098*(p>>>24),r=(n.shadowColor__=new q(i=null==i?0:i,s=null==s?0:s,a=null==a?0:a,l=null==l?1:l),n.shadowMetrics__.x=Math.sin(b._fontSettings.style.shadowAngle)*b._fontSettings.style.shadowDistance*3,n.shadowMetrics__.y=Math.cos(b._fontSettings.style.shadowAngle+Math.PI)*b._fontSettings.style.shadowDistance*3,n.shadowMetrics__.z=3*b._fontSettings.style.shadowRadius,1-b._fontSettings.style.shadowHardness),i=(n.shadowMetrics__.w=r<0?0:1<r?1:r,u.get_material().passes.removeShader(u.get_material().textureShader),u.get_material().passes.addShader(n),u.get_material().passes.set_culling($r.None),u.getMaterials()[0].get_texture().preventAutoDispose(),t.tile.width/sl.REFERENCE_SIZE),s=t.tile.height/sl.REFERENCE_SIZE;(d=u.get_mesh()).scaleX=i/e,d.flags|=1,0!=(131072&d.flags)&&(d.flags|=262144);function o(e,t){var e=.5*e/sl.REFERENCE_SIZE,t=.5*t/sl.REFERENCE_SIZE,n=u.getBounds(),i=-e,s=-t,a=n.zMin,l=i=null==i?0:i,r=s=null==s?0:s,o=a=null==a?0:a,i=(null==a&&(o=0),null==s&&(r=0),null==i&&(l=0),e),s=t,e=i=null==e?0:i,t=s=null==t?0:s,n=a=null==(a=n.zMax)?0:a;return null==a&&(n=0),null==s&&(t=0),null==i&&(e=0),(a=new Ur).xMin=l,a.yMin=r,a.zMin=o,a.xMax=e,a.yMax=t,a.zMax=n,a}(d=u.get_mesh()).scaleY=s/e,d.flags|=1,0!=(131072&d.flags)&&(d.flags|=262144),b.set_color(-1);b._textFieldBounds=o(t.textFieldW,t.textFieldH),b._textBounds=o(t.textW,t.textH);for(var h=null!=(x=b._config.blendMode)?x:wr.AlphaAdd,c=0,_=u.getMaterials();c<_.length;){var d,p,m=_[c],g=(++c,m.set_blendMode(h),m.passes.set_depthTest(b._config.depthTest),b._config.shadows),f=(m.set_castShadows(g),m.set_receiveShadows(g),m.get_texture().set_filter(so.Linear),b.getMaterials()[0]),A=b.color;null!=(f=null!=(x=null==A?null:A)?x:null==f?null:(255*((r=(d=f.mshader.color__).w)<0?0:1<r?1:r)+.499|0)<<24|(255*((A=d.x)<0?0:1<A?1:A)+.499|0)<<16|(255*((f=d.y)<0?0:1<f?1:f)+.499|0)<<8|255*((A=d.z)<0?0:1<A?1:A)+.499|0)&&(p=f,(A=m.mshader.color__).x=(p>>16&255)/255,A.y=(p>>8&255)/255,A.z=(255&p)/255,A.w=(p>>>24)/255)}g=null==y?b._config.scale:y/b._config.scale;u.scaleX=g,u.flags|=1,0!=(131072&u.flags)&&(u.flags|=262144),u.scaleY=g,u.flags|=1,0!=(131072&u.flags)&&(u.flags|=262144),u.scaleZ=g,u.flags|=1,0!=(131072&u.flags)&&(u.flags|=262144),u.flags|=1,0!=(131072&u.flags)&&(u.flags|=262144),u.setRotation(b._config.rotation.x,b._config.rotation.y,b._config.rotation.z),b._config.addStencil&&ec.stencil(u);for(var x,a=null!=(x=b._textFieldBounds)?x:u.getBounds(),l=(u.name=a.xMin+":"+a.xMax+":"+a.yMin+":"+a.yMax,b.addChild(u),u),c=0,_=l.getMeshes();c<_.length;)_[c++].flags|=512;n=new It(l);return tt.init(n,null),n}),e.h[w]=t)},addBoundsRec:function(e,t){var n,i,s,a,l,r,o,u;Lu.prototype.addBoundsRec.call(this,e,t),null!=this._textFieldBounds&&0==(512&this.flags)&&(a=-(s=1e20),r=-(l=1e20),u=-(o=1e20),s=(n=this._textFieldBounds).xMin,a=n.xMax,l=n.yMin,r=n.yMax,o=n.zMin,u=n.zMax,null==t?((i=new Ur).xMin=s,i.xMax=a,i.yMin=l,i.yMax=r,i.zMin=o,i.zMax=u,i.transform(this.absPos)):(Fh.TMP_MAT.multiply(this.absPos,t),(i=new Ur).xMin=s,i.xMax=a,i.yMin=l,i.yMax=r,i.zMin=o,i.zMax=u,i.transform(Fh.TMP_MAT)),i.xMin<e.xMin&&(e.xMin=i.xMin),i.xMax>e.xMax&&(e.xMax=i.xMax),i.yMin<e.yMin&&(e.yMin=i.yMin),i.yMax>e.yMax&&(e.yMax=i.yMax),i.zMin<e.zMin&&(e.zMin=i.zMin),i.zMax>e.zMax)&&(e.zMax=i.zMax)},showChars:function(e,t,s,n,i,a){for(var l=this,r=(s=null!=(m=s)?m:0,this._lastW=t?0:this._lastW,e.split("")),o=[],u=0;u<r.length;){var h=r[u];++u,Object.prototype.hasOwnProperty.call(l._meshPools.h,h)||" "==h||o.push(h)}il.each(o,function(e){l.prepareResources(),Object.prototype.hasOwnProperty.call(l._meshPools.h,e)});for(var e=this._config.space,c=null==e?this._avgCharW/sl.REFERENCE_SIZE:e,_=new Array(r.length),o=0,u=r.length;o<u;){var d=r[y=o++];m=" "==d?null:0<(x=l._meshPools.h[d]).size?x.mPool[--x.size]:x.mFactory(),_[y]={char:d,object:m}}for(var e=il.reduce(_,function(e,t){var n,i;return" "==t.char?e+c:(i=t.object.get_name().split(":"),t.object.set_visible(!0),n=parseFloat(i[0]),i=parseFloat(i[1]),t.object.set_x(e-n),e+(i-n)+s)},0),p=e*sl.REFERENCE_SIZE,m=i,i=a,a=Math.min(Math.min(null!=m?m:p,p)/p,Math.min(null!=i?i:this._charH,this._charH)/this._charH),o=(this.scaleX=a,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleY=a,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.scaleZ=a,this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),this.flags|=1,0!=(131072&this.flags)&&(this.flags|=262144),[]),u=0;u<_.length;){h=_[u];++u," "!=h.char&&o.push(h)}for(var g,f,A=il.reduce(o,function(e,t){var t=t.object.get_name().split(":"),n=parseFloat(t[2]),t=parseFloat(t[3]);return Math.max(t-n,e)},0),x=this._strings.concat(il.filterNull(_)),o=[],u=0;u<x.length;){h=x[u];++u," "!=h.char&&o.push(h)}switch(this._strings=o,this._lastW=Math.max(e-s,this._lastW),n._hx_index){case 0:g=0;break;case 1:g=-this._lastW;break;case 2:g=.5*-this._lastW;break;case 3:case 4:throw tl.thrown("Multiline not implemented for tile and mesh text")}switch(this.get_anchor()._hx_index){case 0:f=A;break;case 1:f=-A;break;case 2:case 3:case 4:f=0}switch(this.get_anchor()._hx_index){case 2:var w=.5*-((x=this.getBounds()).xMax-x.xMin);break;case 3:w=.5*((x=this.getBounds()).xMax-x.xMin);break;case 0:case 1:case 4:w=0}for(x=this._strings,_=new Array(x.length),o=0,u=x.length;o<u;){var y,b=x[y=o++];_[y]={obj:b.object,pos:{x:b.object.get_x()+g+w,y:b.object.get_y()+f,z:b.object.get_z()}}}il.each(_,function(e){e.obj.setPosition(e.pos.x,e.pos.y,e.pos.z)}),t&&(this._lastW=0)},showString:function(e){Object.prototype.hasOwnProperty.call(this._meshPools.h,e)||this.addFontString(e),this.currString=e;var t=this._meshPools.h[e],n=0<t.size?t.mPool[--t.size]:t.mFactory();n.set_visible(!0);var i=(t=this._textFieldBounds).xMin,s=t.yMin,a=(null==t.zMin&&0,i=null==i?0:i),l=s=null==s?0:s,i=(t=this._textFieldBounds).xMax,s=t.yMax,r=(null==t.zMax&&0,i=null==i?0:i),o=s=null==s?0:s,u=(r=null==i?0:i)-(a=null==a?0:a),h=(o=null==s?0:s)-(l=null==l?0:l),i=(t=this._textBounds).xMin,s=t.yMin,a=(null==t.zMin&&0,i=null==i?0:i),l=s=null==s?0:s,i=(t=this._textBounds).xMax,s=t.yMax;t.zMax;var c=(r=null==(r=i=null==i?0:i)?0:r)-(a=null==a?0:a),_=(o=null==(o=s=null==s?0:s)?0:o)-(l=null==l?0:l);switch(this._strings.push({char:e,object:n}),this.get_anchor()._hx_index){case 0:n.setPosition(0,.5*h-.5*_,n.get_z());break;case 1:n.setPosition(0,.5*-h+.5*_,n.get_z());break;case 2:n.setPosition(.5*-u+.5*c,0,n.get_z());break;case 3:n.setPosition(.5*u-.5*c,0,n.get_z())}},showImage:function(e){if(Object.prototype.hasOwnProperty.call(this._meshPools.h,e)){this.currString=e;var t=this._meshPools.h[e],n=0<t.size?t.mPool[--t.size]:t.mFactory(),t=(n.set_visible(!0),n.get_name().split(":")),i=parseFloat(t[0]),s=parseFloat(t[1]),a=parseFloat(t[2]),l=s-i,r=parseFloat(t[3])-a;switch(this._strings.push({char:e,object:n}),this.get_anchor()._hx_index){case 0:n.setPosition(0,.5*r,n.get_z());break;case 1:n.setPosition(0,.5*-r,n.get_z());break;case 2:n.setPosition(.5*-l,0,n.get_z());break;case 3:n.setPosition(.5*l,0,n.get_z())}}},get_anchor:function(){return this._anchor},set_anchor:function(e){if(this._anchor=e,null!=this.currString){var t=this.currString,n=(this.clear(),this._config.resource);switch(n._hx_index){case 0:var i=n.align;this.showChars(t,this._centerReset,n.charSpacing,null==i?Mr.Center:i);break;case 1:var s,i=n.charSpacing,a=n.align;switch(e._hx_index){case 2:s=Mr.Left;break;case 3:s=Mr.Right;break;default:s=null==a?Mr.Center:a}this.showChars(t,this._centerReset,i,s);break;case 2:this.showString(t);break;case 3:this.showImage(t)}}return e},set_color:function(e){this.color=e;e=Ft.toVector(this.color);return this.tweenChars([et.Color(new nt(st.fromBacking(new it(e.x,e.y,e.z,e.w)),null,null,0,null,null,null,null,null,null,null))]),this.color},__class__:Fh,__properties__:e(Lu.prototype.__properties__,{set_color:"set_color",set_anchor:"set_anchor",get_anchor:"get_anchor"})}),function(e,t){null==t&&(t=!1),Lu.call(this,e.parent),this._config=e;var n=new It(this);tt.init(n,null),this.tweenObject=n,t||((n=Ku.create(e.tile,e.normalMap)).passes.set_depthTest(e.depthTest),n.set_blendMode(e.blendMode),n.set_receiveShadows(e.receiveShadows),n.set_castShadows(e.castShadows),n.setFixedWidth(e.fixedWidth),n.setFixedHeight(e.fixedHeight),this.set_mesh(null!=e.createMesh?e.createMesh(n):this.createMeshDefault(n)),t=this.get_mesh(),n=e.scale,t.scaleX*=n,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY*=n,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ*=n,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),this.position(),null!=e.offset&&((t=this.get_mesh()).x=e.offset.x,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.y=e.offset.y,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.z=e.offset.z,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.flags|=1,0!=(131072&t.flags))&&(t.flags|=262144),this.addChild(this.get_mesh()))}),Rh=((i["hacksaw.core.h3d.tile.TileElement"]=Dh).__name__="hacksaw.core.h3d.tile.TileElement",Dh.create=function(e){return new Dh(e)},Dh.__super__=Lu,Dh.prototype=e(Lu.prototype,{update:function(e){Lu.prototype.update.call(this,e),null!=this.get_animator()&&this.get_animator().update(e)},createMeshDefault:function(e){var t=new ol(1,1,!0),t=(t.addNormals(),t.addUVs(),new Co(t,e)),e=this.getSize(e);return t.scaleX=e.x,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY=e.y,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t},dispose:function(){var e;null!=this.get_mesh()&&null!=(e=this.get_mesh())&&null!=e.parent&&e.parent.removeChild(e)},get_animator:function(){return null==this.animator&&this.set_animator(new zh(this.get_material())),this.animator},set_animator:function(e){return this.animator=e},setTile:function(e,t,n){null==n&&(n=0),null==t&&(t=1),this.get_material().setDiffuse(e,n),null!=t&&(n=se.getSizeByReference(e),(e=this.get_mesh()).scaleX=n.x,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),(e=this.get_mesh()).scaleY=n.y,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),(e=this.get_mesh()).scaleZ=t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),(e=this.get_mesh()).scaleX*=t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleY*=t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleZ*=t,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.flags|=1,0!=(131072&e.flags))&&(e.flags|=262144),this.position(),this.update(0)},clone:function(e){for(var t=new Dh(this._config,!0),n=(t.x=this.x,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.y=this.y,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.z=this.z,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleX=this.scaleX,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleY=this.scaleY,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.scaleZ=this.scaleZ,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),t.qRot),i=this.qRot,s=(n.x=i.x,n.y=i.y,n.z=i.z,n.w=i.w,t.name=this.name,t.set_follow(this.follow),0!=(8&this.flags)?t.flags|=8:t.flags&=-9,0!=(2&this.flags)?t.flags|=2:t.flags&=-3,null!=this.defaultTransform&&(t.defaultTransform=this.defaultTransform.clone(),t.flags|=1,0!=(131072&t.flags))&&(t.flags|=262144),t.set_mesh(this.get_mesh().clone()),t.addChild(t.get_mesh()),0),a=this.children;s<a.length;){var l=a[s];++s,this.get_mesh()!=l&&t.addChild(l.clone())}return t},getSize:function(e){var t;return null!=this._config.fixedWidth&&null!=this._config.fixedHeight?{x:this._config.fixedWidth/sl.REFERENCE_SIZE,y:this._config.fixedHeight/sl.REFERENCE_SIZE}:(t=this.get_material(),se.getSizeByReference((null==e?t:e).getDiffuse()))},position:function(){var e,t,n=this.getSize();switch(this._config.anchor._hx_index){case 2:e=-n.x;break;case 3:e=n.x;break;default:e=0}switch(this._config.anchor._hx_index){case 0:t=n.y;break;case 1:t=-n.y;break;default:t=0}var i=this.get_mesh();i.x=e,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),(i=this.get_mesh()).y=t,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144)},get_material:function(){return null!=this.get_mesh()?this.get_mesh().material:null},get_mesh:function(){return this.mesh},set_mesh:function(e){return this.get_mesh(),this.mesh=e},__class__:Dh,__properties__:e(Lu.prototype.__properties__,{set_animator:"set_animator",get_animator:"get_animator",set_mesh:"set_mesh",get_mesh:"get_mesh",get_material:"get_material"})}),function(e,t,n,i,s,a,l,r,o,u,h,c,_,d){this.anchor=Me.NONE,this.parent=null,this.fixedHeight=null,this.fixedWidth=null,this.receiveShadows=!1,this.castShadows=!1,this.createAnimator=!1,this.createMesh=null,this.depthTest=to.LessEqual,this.blendMode=wr.Alpha,this.scale=1,this.offset=null,this.normalMap=null,(this.tile=null)!=e&&(this.tile=e),null!=t&&(this.normalMap=t),null!=n&&(this.offset=n),null!=i&&(this.scale=i),null!=s&&(this.blendMode=s),null!=a&&(this.depthTest=a),null!=l&&(this.createMesh=l),null!=r&&(this.createAnimator=r),null!=o&&(this.castShadows=o),null!=u&&(this.receiveShadows=u),null!=h&&(this.fixedWidth=h),null!=c&&(this.fixedHeight=c),null!=_&&(this.parent=_),null!=d&&(this.anchor=d)}),Ph=((i["hacksaw.core.h3d.tile.TileElementConfig"]=Rh).__name__="hacksaw.core.h3d.tile.TileElementConfig",Rh.prototype={__class__:Rh},function(e,t){this._tmpMatrix=new Wr,this.floatBuffer=qx._new(0),this._instanceTileShader=new xl,this._instanced=new yo,this.group=e,this._renderModule=t}),zh=((i["hacksaw.core.h3d.tile.TileParticleRenderer"]=Ph).__name__="hacksaw.core.h3d.tile.TileParticleRenderer",Ph.prototype={setup:function(){var e=this._renderModule.config,t=(this._instanced.commands=new Sn,e.customMeshPrimitive),t=null==t?this.createDefaultMeshPrimitive():t,n=(this._instanced.setMesh(t),this.buildBuffer()),t=(t.addBuffer(n),this._instanced.buffer=n,Ku.create(this._renderModule.initialTile)),n=(this.mesh=new Co(this._instanced,t,this.group),this.mesh.material.passes),i=(t.set_blendMode(e.blendMode),e.useShadows),i=(t.set_castShadows(i),t.set_receiveShadows(i),n.set_depthTest(e.depthTest),n.set_culling(e.culling),e.stencil),e=(n.stencil=null!=i?i:n.stencil,n.getShaderIndex(n.getShader(Ro)));n.addShaderAtIndex(new Al,e-1),n.removeShader(n.getShader(Ah)),this._instanceTileShader.texture__=t.getDiffuse().innerTex,n.addShader(this._instanceTileShader)},update:function(e){var r,o=this,t=this.group.particles.slice(0,this.group.activeParticleCount),n=t.length,i=(this._instanced.commands.setCommand(n,3*this._instanced.primitive.triCount()),this.mesh);0!=n?i.flags|=2:i.flags&=-3,0!=(2&this.mesh.flags)&&(r=this._renderModule.materials,il.reduce(t,function(e,t){o._tmpMatrix.load(t.getAbsPos()),o._tmpMatrix.transpose();var n=e,i=o._tmpMatrix,i=(o.floatBuffer.array[n++]=i._11,o.floatBuffer.array[n++]=i._12,o.floatBuffer.array[n++]=i._13,o.floatBuffer.array[n++]=i._14,o.floatBuffer.array[n++]=i._21,o.floatBuffer.array[n++]=i._22,o.floatBuffer.array[n++]=i._23,o.floatBuffer.array[n++]=i._24,o.floatBuffer.array[n++]=i._31,o.floatBuffer.array[n++]=i._32,o.floatBuffer.array[n++]=i._33,o.floatBuffer.array[n++]=i._34,o.floatBuffer.array[n++]=i._41,o.floatBuffer.array[n++]=i._42,o.floatBuffer.array[n++]=i._43,o.floatBuffer.array[n++]=i._44,e=n,r[t.frameIndex]),s=i.getUVScale(),a=i.getUVPosition(),l=i.getUVMargin(),i=i.getUVOffset(),t=t.color,n=e;return o.floatBuffer.array[n++]=s.x,o.floatBuffer.array[n++]=s.y,o.floatBuffer.array[n++]=a.x,o.floatBuffer.array[n++]=a.y,o.floatBuffer.array[n++]=l.x,o.floatBuffer.array[n++]=l.y,o.floatBuffer.array[n++]=i.x,o.floatBuffer.array[n++]=i.y,o.floatBuffer.array[n++]=t.x,o.floatBuffer.array[n++]=t.y,o.floatBuffer.array[n++]=t.z,o.floatBuffer.array[n++]=t.w,e=n},0),this._instanced.buffer.uploadFloats(this.floatBuffer,0,n))},dispose:function(){var e=this.mesh;null!=e&&null!=e.parent&&e.parent.removeChild(e),this._instanced.dispose()},buildBuffer:function(){for(var e,t=Lx.make([new Gx("worldMatrix0",4),new Gx("worldMatrix1",4),new Gx("worldMatrix2",4),new Gx("worldMatrix3",4),new Gx("uvScale",2),new Gx("uvPosition",2),new Gx("uvMargin",2),new Gx("uvOffset",2),new Gx("instanceColor",4)]),n=this.floatBuffer,i=this.group.get_maxParticles()*t.stride,s=n.pos;s<i;)++s,n.pos==n.array.length&&((e=n.array.length<<1)<128&&(e=128),(e=new Float32Array(e)).set(n.array),n.array=e),n.array[n.pos++]=0;return zr.ofFloats(this.floatBuffer,t,[Pr.Dynamic])},createDefaultMeshPrimitive:function(){var e=new ol(1,1,!0);return e.addUVs(),e.addNormals(),e},__class__:Ph},function(e){this._stopCallbacks=[],this._playCallback=null,this._fixedHeightBefore=null,this._fixedWidthBefore=null,this._endFrameOverride=null,this._loopIterations=0,this._duration=0,this._time=0,this._transitionAnimation=null,this._animation=null,this.currentFrameIndex=-1,this.material=e,this.set_origTile(e.getDiffuse())}),Qh=((i["hacksaw.core.h3d.tile.TileTargetAnimator"]=zh).__name__="hacksaw.core.h3d.tile.TileTargetAnimator",zh.prototype={play:function(i,s,a,l){null==a&&(a=Qh.Original);var r=this,e=(this.triggerCallbacks(!0,!0,!1),rt.irreversible(function(e){for(var t,n=0;null==r.origTile;)r.set_origTile(i.animationData.frames[n]),++n;if(i.loop=null!=s?s:i.loop,null!=i.resetFrame&&(a=i.resetFrame),null!=l){switch(l._hx_index){case 0:t=0|Math.max(r.currentFrameIndex,0);break;case 1:t=l.frame;break;case 2:t=r._animation.endFrame}r._transitionAnimation={animation:i,atFrame:t}}else r._animation=i,r.currentFrameIndex=-1,r.set_startFrame(r._animation.startFrame),r.set_endFrame(r._animation.endFrame);r._resetTile=r.determineResetTile(a),null==r._playCallback&&0==r._loopIterations&&(r._resetTile!=r.origTile?(r._fixedWidthBefore=r._animation.animationData.width,r._fixedHeightBefore=r._animation.animationData.height):(r._fixedWidthBefore=r.material.getFixedWidth(r._animation.target),r._fixedHeightBefore=r.material.getFixedHeight(r._animation.target))),r.material.setFixedWidth(r._animation.animationData.width,r._animation.target),r.material.setFixedHeight(r._animation.animationData.height,r._animation.target),r._time=1/i.fps*(r.endFrame-r.startFrame+1),r._duration=r._time,r._playCallback=e}));return e.eager(),e},stop:function(n,i){null==n&&(n=Vh.Default);var s=this,e=rt.irreversible(function(e){if(null==s._animation)e(!1);else{var t;switch(s._animation.loop=!1,s._resetTile=s.determineResetTile(i),n._hx_index){case 0:t=s.endFrame;break;case 1:t=s.currentFrameIndex;break;case 2:t=n.frame;break;case 3:t=s._animation.endFrame}s._endFrameOverride=t,s._stopCallbacks.push(e)}});return e.eager(),e},cancel:function(){this._time=1/0,this.reset(!1)},update:function(e){var t,n,i;null!=this._animation&&(this._time-=e,e=!1,1<=(t=1-this._time/this._duration)&&(t=1,e=!0),(t=this.startFrame*(1-t)+(this.endFrame+1)*t|0)!=this.currentFrameIndex&&(this.currentFrameIndex==this._endFrameOverride&&(e=!0),n=this.startFrame,i=this.endFrame,this.currentFrameIndex=t<n?n:i<t?i:t,n=this._transitionAnimation,this.currentFrameIndex==(null!=n?n.atFrame:null)&&(this._animation=this._transitionAnimation.animation,this._transitionAnimation=null),null!=(i=this._animation.animationData.frames[this.currentFrameIndex]))&&this.material.setDiffuse(i,this._animation.target),e)&&(this._animation.loop?(this.triggerCallbacks(!0,!1,!0),this._loopIterations++,null==this._playCallback&&this.play(this._animation)):this.reset(!0))},determineResetTile:function(e){if(null==e)return this._resetTile;switch(e._hx_index){case 0:return this._animation.animationData.frames[this.endFrame];case 1:return this._animation.animationData.frames[this.startFrame];case 2:return this._animation.animationData.frames[this.currentFrameIndex];case 3:var t=e.frame,n=this.endFrame;return this._animation.animationData.frames[t<0?0:n<t?n:t];case 4:return this.origTile}},triggerCallbacks:function(e,t,n){var i=this._playCallback,e=(null!=this._playCallback&&e&&(this._playCallback=null,Ly.invoke(i,n)),this._stopCallbacks);null!=e&&0<e.length&&t&&(n=this._stopCallbacks.slice(),this._stopCallbacks=[],il.each(n,function(e){Ly.invoke(e,null!=i)}))},reset:function(e){var t=this._animation,t=null!=t?t.target:null,t=null!=t?t:0;this.material.setDiffuse(this._resetTile,t),this.material.setFixedWidth(this._fixedWidthBefore,t),this.material.setFixedHeight(this._fixedHeightBefore,t),this._animation=null,this._transitionAnimation=null,this._endFrameOverride=null,this._loopIterations=0,this.triggerCallbacks(!0,!0,e)},get_currentFrame:function(){var e=this._animation;return null!=e?e.animationData.frames[this.currentFrameIndex]:null},set_startFrame:function(e){return this.startFrame=0|Math.max(e,0),this.startFrame},set_endFrame:function(e){var t=this._animation.animationData.frames.length-1;return this.endFrame=0|(null==e?t:Math.min(e,t)),this.endFrame},set_origTile:function(e){return this.origTile=e},get_duration:function(){return this._animation.animationData.frames.length/this._animation.fps},__class__:zh,__properties__:{get_duration:"get_duration",set_endFrame:"set_endFrame",set_startFrame:"set_startFrame",set_origTile:"set_origTile",get_currentFrame:"get_currentFrame"}},fe["hacksaw.core.h3d.tile.ResetFrame"]={__ename__:!0,__constructs__:null,LastFrame:{_hx_name:"LastFrame",_hx_index:0,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:o},FirstFrame:{_hx_name:"FirstFrame",_hx_index:1,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:o},CurrentFrame:{_hx_name:"CurrentFrame",_hx_index:2,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:o},AtFrame:((R=function(e){return{_hx_index:3,frame:e,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:o}})._hx_name="AtFrame",R.__params__=["frame"],R),Original:{_hx_name:"Original",_hx_index:4,__enum__:"hacksaw.core.h3d.tile.ResetFrame",toString:o}}),Vh=(Qh.__constructs__=[Qh.LastFrame,Qh.FirstFrame,Qh.CurrentFrame,Qh.AtFrame,Qh.Original],Qh.__empty_constructs__=[Qh.LastFrame,Qh.FirstFrame,Qh.CurrentFrame,Qh.Original],fe["hacksaw.core.h3d.tile.StopFrame"]={__ename__:!0,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"hacksaw.core.h3d.tile.StopFrame",toString:o},Immediate:{_hx_name:"Immediate",_hx_index:1,__enum__:"hacksaw.core.h3d.tile.StopFrame",toString:o},AtFrame:((R=function(e){return{_hx_index:2,frame:e,__enum__:"hacksaw.core.h3d.tile.StopFrame",toString:o}})._hx_name="AtFrame",R.__params__=["frame"],R),LastFrame:{_hx_name:"LastFrame",_hx_index:3,__enum__:"hacksaw.core.h3d.tile.StopFrame",toString:o}});Vh.__constructs__=[Vh.Default,Vh.Immediate,Vh.AtFrame,Vh.LastFrame],Vh.__empty_constructs__=[Vh.Default,Vh.Immediate,Vh.LastFrame];(n=fe["hacksaw.core.h3d.tile.TileAnimationTransition"]={__ename__:!0,__constructs__:null,Immediate:{_hx_name:"Immediate",_hx_index:0,__enum__:"hacksaw.core.h3d.tile.TileAnimationTransition",toString:o},AtFrame:((R=function(e){return{_hx_index:1,frame:e,__enum__:"hacksaw.core.h3d.tile.TileAnimationTransition",toString:o}})._hx_name="AtFrame",R.__params__=["frame"],R),LastFrame:{_hx_name:"LastFrame",_hx_index:2,__enum__:"hacksaw.core.h3d.tile.TileAnimationTransition",toString:o}}).__constructs__=[n.Immediate,n.AtFrame,n.LastFrame],n.__empty_constructs__=[n.Immediate,n.LastFrame];var Oh=function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w){this.resetScale=!0,this.keepStencil=!1,this.keepOverlayVisible=!1,this.remainAfterReplace=!1,this.target=0,this.replace=!1,this.castShadows=!1,this.shadows=!1,this.culling=$r.None,this.depthTest=to.Always,this.blendMode=wr.Alpha,this.rotation=st.fromBacking(new it(0,0,0,null)),this.offset=null,this.scale=1,this.overlay=!1,this.endFrame=null,this.resetFrame=null,this.startFrame=0,this.loop=!1,this.fps=30,this.animationData=e,null!=t&&(this.fps=t),null!=n&&(this.loop=n),null!=i&&(this.startFrame=i),null!=s&&(this.resetFrame=s),null!=a&&(this.endFrame=a),null!=l&&(this.overlay=l),null!=r&&(this.scale=r),null!=o&&(this.offset=o),null!=u&&(this.rotation=u),null!=h&&(this.blendMode=h),null!=c&&(this.depthTest=c),null!=_&&(this.culling=_),null!=d&&(this.shadows=d),null!=p&&(this.castShadows=p),null!=m&&(this.replace=m),null!=g&&(this.target=g),null!=f&&(this.remainAfterReplace=f),null!=A&&(this.keepOverlayVisible=A),null!=x&&(this.keepStencil=x),null!=w&&(this.resetScale=w)},Wh=((i["hacksaw.core.h3d.tile.TileTargetAnimation"]=Oh).__name__="hacksaw.core.h3d.tile.TileTargetAnimation",Oh.prototype={clone:function(){var e=this.offset,t=this.rotation;return new Oh(this.animationData,this.fps,this.loop,this.startFrame,this.resetFrame,this.endFrame,this.overlay,this.scale,null!=e?st.clone(e):null,null!=t?st.clone(t):null,this.blendMode,this.depthTest,this.culling,this.shadows,this.castShadows,this.replace,this.target,this.remainAfterReplace,this.keepOverlayVisible,this.keepStencil,this.resetScale)},__class__:Oh},(i["hacksaw.core.h3d.transform.CubicSpline"]=Tl).__name__="hacksaw.core.h3d.transform.CubicSpline",Tl.prototype={rebuildSpline:function(e){this._config=null==e?this._config:e,this.endPointsConnected=this._config.connectedSpline,this._points=this._config.points.slice(),this.segments=this.createSplineSegments(this._points),this._arcLengthLUT=this.createLengthTable(this.segments)},getCurveSegment:function(e){var t=this._points.length-1;return this.segments[e<0?0:t<e?t:e]},getSegmentEndPointsDistance:function(e){var t=this._arcLengthLUT.length-1,t=this._arcLengthLUT[e<0?0:t<e?t:e],e=t[0],t=t[t.length-1];if((t=null==t?2147483647:t)<e)throw tl.thrown("Range needs to start before end. "+e+" > "+t+" but should be start <= end");return new Pi(e,t)},getSegmentDataByDistance:function(e){var t=this.getSegmentIndex(e),e=this.distanceToT(t,e);return{segment:this.segments[t],t:e}},getPointOnSpline:function(e){e=this.getSplineSegmentData(e);return e.segment.getPoint(e.t)},getTangentOnSpline:function(e){e=this.getSplineSegmentData(e);return e.segment.getTangent(e.t)},getOrientationOnSpline:function(e,t){e=this.getSplineSegmentData(e);return e.segment.getOrientation(e.t,t)},projectPointOntoSpline:function(r){var o=this,e=il.reducei(this._arcLengthLUT,function(e,t,l){var n=o.get_totalArcLength();return e=t[0]<=n?il.reducei(t,function(e,t,n){var i=o.getSegmentPoint(l,t),s=r.x-i.x,a=r.y-i.y,i=r.z-i.z,s=Math.sqrt(s*s+a*a+i*i);return e=s<e.distance?{splineSegment:l,index:n,distance:s,roughDistance:t}:e},e):e},{splineSegment:0,index:0,distance:1/0,roughDistance:0}),t=e.index,n=e.splineSegment,e=e.roughDistance,i=this.get_totalArcLength(),s=this._arcLengthLUT[t<=0?(this._arcLengthLUT.length+n-1)%this._arcLengthLUT.length:n][t<=0?Math.round(Fy.wrapCircular(t-1,this._sizeLUT-1)):t-1],a=this._arcLengthLUT[t>=this._sizeLUT-1?(this._arcLengthLUT.length+n+1)%this._arcLengthLUT.length:n][t>=this._sizeLUT-1?Math.round(Fy.wrapCircular(t+1,this._sizeLUT-1)):t+1],l=e,s=Fy.wrapCircular(s+.5*Math.abs(e-s),i);(a=Fy.wrapCircular(a-.5*Math.abs(a-e),i))<(s=a<s?a:s)&&(a=s);for(var u=Math.abs(a-s),h=0,c=s,_=a,d=u;.001<u%i;){if(d%i<u%i)throw new tl("Search range larger than when started! beyond: cP:"+l+", startVT:"+d%this.get_totalArcLength()+", vT:"+u%this.get_totalArcLength());if(20<=h++)throw new tl("Too many iterations run to find a point! t1:"+c+", t2:"+_+", cP:"+l+", startVT:"+d+", vT:"+u);var p=this.getSegmentPoint(this.getSegmentIndex(s),s),m=p.x-r.x,g=p.y-r.y,p=p.z-r.z,m=Math.sqrt(m*m+g*g+p*p),g=this.getSegmentPoint(this.getSegmentIndex(a),a),p=g.x-r.x,f=g.y-r.y,g=g.z-r.z;m<Math.sqrt(p*p+f*f+g*g)?a=l:s=l,u=Math.abs(a-s),l=Fy.wrapCircular(s+.5*u,i)}return Fy.wrapCircular(l,this.get_totalArcLength())/this.get_totalArcLength()},createLengthTable:function(e){for(var t=0,n=new Array(e.length),i=0,s=e.length;i<s;){var a=i++,l=this.createSegmentDistanceTable(e[a],t),t=l[l.length-1];n[a]=l}return n},createSplineSegments:function(e){var t=this;if(!(null!=e&&3<e.length))throw new tl("Not enough points to construct spline");for(var n=[],i=il.groupByIndex_gasm_heaps_types_Vec_Int(e,function(e){return Math.floor(e/4)}),s=i.keys();s.hasNext();){var a=i.get(s.next());n.push(new Wh(a[0],a[1],a[2],a[3]))}return il.each(n,function(e){e.cacheCoefficents(t._config.splineType)}),n},createSegmentDistanceTable:function(e,t){null==t&&(t=0);for(var n=this._sizeLUT,i=1/(n-1),s=[],a=0;a<n;)s.push(e.getPoint(a++*i));return il.reduce(il.zip(s,s.slice(1)),function(e,t){var n=t._0,t=t._1,i=t.x-n.x,s=t.y-n.y,t=t.z-n.z;return e.push(e[e.length-1]+Math.sqrt(i*i+s*s+t*t)),e},[t])},getSegmentIndex:function(n){var i=-1;if(il.findi(this._arcLengthLUT,function(e,t){e=n<=e[e.length-1];return e&&(i=t),e}),-1!=i)return i;throw new tl("Could not find any match in lookup table for distance: "+n)},distanceToT:function(e,t){var n,i,s=this._arcLengthLUT[e],a=t/this.get_totalArcLength();return 0<=t&&t<=this.get_totalArcLength()&&(s=il.zip(s,s.slice(1)),0<=(e=il.findIndex(s,function(e){return t>=e._0&&t<=e._1})))&&(n=e/s.length,i=s[e]._0,a=n+(t-i)*((e+1)/s.length-n)/(s[e]._1-i)),a},getSplineSegmentData:function(e){var t=this.splineRateInterpolation.start;return e=t+e*(this.splineRateInterpolation.end-t),this.endPointsConnected?e=Fy.wrapCircular(e,1):e<=0?e=0:1<=e&&(e=1),this.getSegmentDataByDistance(e*this.get_totalArcLength())},getSegmentPoint:function(e,t){t=this.distanceToT(e,t);return this.segments[e].getPoint(t)},get_totalArcLength:function(){var e=this._arcLengthLUT,e=e[e.length-1],e=e[e.length-1];return null==e?0:e},get_segmentCount:function(){return this.segments.length},__class__:Tl,__properties__:{get_segmentCount:"get_segmentCount",get_totalArcLength:"get_totalArcLength"}},(i["hacksaw.core.h3d.transform.CubicSplineConfig"]=El).__name__="hacksaw.core.h3d.transform.CubicSplineConfig",El.prototype={__class__:El},function(e,t,n,i){this.coefficients=new Wr,this.p0=e,this.p1=t,this.p2=n,this.p3=i}),Nh=((i["hacksaw.core.h3d.transform.CubicCurveSegment"]=Wh).__name__="hacksaw.core.h3d.transform.CubicCurveSegment",Wh.prototype={cacheCoefficents:function(e){switch(e._hx_index){case 0:n=Gh.LINEAR;break;case 1:n=Gh.BEZIER;break;case 2:n=Gh.HERMITE;break;case 3:n=Gh.CATMULL_ROM;break;case 4:var t=e.looseness,n=Nr.L([0,1,0,0,-t,0,t,0,2*t,t-3,3-2*t,-t,-t,2-t,t-2,t]);break;case 5:n=Gh.BASIS}var i=Nr.L([this.p0.x,this.p0.y,this.p0.z,1,this.p1.x,this.p1.y,this.p1.z,1,this.p2.x,this.p2.y,this.p2.z,1,this.p3.x,this.p3.y,this.p3.z,1]);this.coefficients.multiply(n,i)},getPoint:function(e){var e=st.fromBacking(new it(1,e,e*e,e*e*e)),t=e,n=this.coefficients,i=t.x*n._12+t.y*n._22+t.z*n._32+t.w*n._42,s=t.x*n._13+t.y*n._23+t.z*n._33+t.w*n._43,a=t.x*n._14+t.y*n._24+t.z*n._34+t.w*n._44;return t.x=t.x*n._11+t.y*n._21+t.z*n._31+t.w*n._41,t.y=i,t.z=s,t.w=a,e},getVelocity:function(e){var e=st.fromBacking(new it(0,1,2*e,e*e*3)),t=e,n=this.coefficients,i=t.x*n._12+t.y*n._22+t.z*n._32+t.w*n._42,s=t.x*n._13+t.y*n._23+t.z*n._33+t.w*n._43,a=t.x*n._14+t.y*n._24+t.z*n._34+t.w*n._44;return t.x=t.x*n._11+t.y*n._21+t.z*n._31+t.w*n._41,t.y=i,t.z=s,t.w=a,e},getAcceleration:function(e){var e=st.fromBacking(new it(0,0,2,6*e)),t=e,n=this.coefficients,i=t.x*n._12+t.y*n._22+t.z*n._32+t.w*n._42,s=t.x*n._13+t.y*n._23+t.z*n._33+t.w*n._43,a=t.x*n._14+t.y*n._24+t.z*n._34+t.w*n._44;return t.x=t.x*n._11+t.y*n._21+t.z*n._31+t.w*n._41,t.y=i,t.z=s,t.w=a,e},getTangent:function(e){var e=this.getVelocity(e),t=e.x*e.x+e.y*e.y+e.z*e.z,t=t<1e-20?0:1/Math.sqrt(t);return e.x*=t,e.y*=t,e.z*=t,e},getOrientation:function(e,t){var e=this.getTangent(e),t=t=null==t?st.fromBacking(new it(0,0,1,null)):t,n=st.toVector4(e),i=t.y*n.z-t.z*n.y,s=t.z*n.x-t.x*n.z,a=t.x*n.y-t.y*n.x,l=st.fromVector4(new q(i=null==i?0:i,s=null==s?0:s,a=null==a?0:a,1)),t=e,r=l.x*l.x+l.y*l.y+l.z*l.z,r=r<1e-20?0:1/Math.sqrt(r),n=st.toVector4(st.fromBacking(new it(l.x*r,l.y*r,l.z*r,l.w*r))),i=t.y*n.z-t.z*n.y,s=t.z*n.x-t.x*n.z;return null==(a=t.x*n.y-t.y*n.x)&&(a=0),null==s&&(s=0),null==i&&(i=0),Nr.lookAtX(st.to3dPoint(e),st.to3dPoint(st.fromVector4(new q(i,s,a,1))))},getCurvature:function(e){var t=this.getVelocity(e),e=this.getAcceleration(e),n=Math.pow(Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),3),e=st.toVector4(e),i=t.y*e.z-t.z*e.y,s=t.z*e.x-t.x*e.z,t=t.x*e.y-t.y*e.x,e=new q(i=null==i?0:i,s=null==s?0:s,t=null==t?0:t,1);return Math.abs(n)<=1e-9||(e.x/=n,e.y/=n,e.z/=n),e},__class__:Wh},fe["hacksaw.core.h3d.transform.CubicCurveType"]={__ename__:!0,__constructs__:null,Linear:{_hx_name:"Linear",_hx_index:0,__enum__:"hacksaw.core.h3d.transform.CubicCurveType",toString:o},Bezier:{_hx_name:"Bezier",_hx_index:1,__enum__:"hacksaw.core.h3d.transform.CubicCurveType",toString:o},Hermite:{_hx_name:"Hermite",_hx_index:2,__enum__:"hacksaw.core.h3d.transform.CubicCurveType",toString:o},CatmullRom:{_hx_name:"CatmullRom",_hx_index:3,__enum__:"hacksaw.core.h3d.transform.CubicCurveType",toString:o},Cardinal:((R=function(e){return{_hx_index:4,looseness:e,__enum__:"hacksaw.core.h3d.transform.CubicCurveType",toString:o}})._hx_name="Cardinal",R.__params__=["looseness"],R),Basis:{_hx_name:"Basis",_hx_index:5,__enum__:"hacksaw.core.h3d.transform.CubicCurveType",toString:o}}),Gh=(Nh.__constructs__=[Nh.Linear,Nh.Bezier,Nh.Hermite,Nh.CatmullRom,Nh.Cardinal,Nh.Basis],Nh.__empty_constructs__=[Nh.Linear,Nh.Bezier,Nh.Hermite,Nh.CatmullRom,Nh.Basis],(i["hacksaw.core.h3d.transform.UniformCubicCurveGenerator"]=Fl).__name__="hacksaw.core.h3d.transform.UniformCubicCurveGenerator",Fl.buildLinearSplineConfig=function(e,t){return(t=null==t?!1:t)&&(e=e.concat([e[0]])),new El(il.reduce(il.zip(e,e.slice(1)),function(e,t){return e.push(t._0),e.push(t._1),e.push(t._0),e.push(t._1),e},[]),Nh.Linear,t)},Fl.buildCatmullRomSplineConfig=function(e,t,n){null==n&&(n=!1);var i=e[0],s=e[e.length-1],a=e[1],l=e[e.length-2];if(t=null==t?!1:t)e=[l,s].concat(e).concat([i]);else if(n){{n=i.x,n=(r=null==n||null==(p=a.x)?null:n-p,i.y),n=(o=null==n||null==(p=a.y)?null:n-p,i.z);u=null==n||null==(p=a.z)?null:n-p;a=null==(n=i.w)||null==(p=a.w)?null:n-p;var r,o,u,h=st.fromBacking(new it(null!=r?r:i.x,null!=o?o:i.y,null!=u?u:i.z,null!=a?a:i.w))}r=null==(n=i.x)||null==(p=h.x)?null:n+p,o=null==(n=i.y)||null==(p=h.y)?null:n+p,u=null==(n=i.z)||null==(p=h.z)?null:n+p,a=null==(n=i.w)||null==(p=h.w)?null:n+p,c=null==(n=s.x)||null==(p=l.x)?null:n-p,_=null==(n=s.y)||null==(p=l.y)?null:n-p,d=null==(n=s.z)||null==(p=l.z)?null:n-p;l=null==(n=s.w)||null==(p=l.w)?null:n-p;var c,_,d,h=st.fromBacking(new it(null!=c?c:s.x,null!=_?_:s.y,null!=d?d:s.z,null!=l?l:s.w));c=null==(n=s.x)||null==(p=h.x)?null:n+p,_=null==(n=s.y)||null==(p=h.y)?null:n+p,d=null==(n=s.z)||null==(p=h.z)?null:n+p;l=null==(n=s.w)||null==(p=h.w)?null:n+p;var p,h=st.fromBacking(new it(null!=c?c:s.x,null!=_?_:s.y,null!=d?d:s.z,null!=l?l:s.w));e=[st.fromBacking(new it(null!=r?r:i.x,null!=o?o:i.y,null!=u?u:i.z,null!=a?a:i.w))].concat(e).concat([h])}return new El(il.reduce(il.zip4(e,e.slice(1),e.slice(2),e.slice(3)),function(e,t){return e.push(t._0),e.push(t._1),e.push(t._2),e.push(t._3),e},[]),Nh.CatmullRom,t)},Fl.buildCardinalSplineConfig=function(e,t,n,i){null==t&&(t=.5);e=Fl.buildCatmullRomSplineConfig(e,n=null==n?!1:n,i=null==i?!1:i);return e.splineType=Nh.Cardinal(t),e},Fl.buildBSplineConfig=function(e,t,n){null==t&&(t=!1);var i=e[0],s=e[e.length-1],a=e[1],l=e[e.length-2],r=e[2],o=e[e.length-3],e=((n=null==n?!1:n)?t||(e=[i,i].concat(e).concat([s,s])):t&&(e=(e=e.slice(0,-3)).concat(e.slice(0,3))),il.reduce(il.zip4(e,e.slice(1),e.slice(2),e.slice(3)),function(e,t){return e.push(t._0),e.push(t._1),e.push(t._2),e.push(t._3),e},[]));return n&&t&&(e=[s,i,a,r].concat(e).concat([o,l,s,i]).concat([l,s,i,a])),new El(e,Nh.Basis,t)},function(){}),Uh=((i["hacksaw.core.h3d.transform.CurveCharacteristicMatrix"]=Gh).__name__="hacksaw.core.h3d.transform.CurveCharacteristicMatrix",(i["hacksaw.core.h3d.transform.VectorField"]=Dl).__name__="hacksaw.core.h3d.transform.VectorField",Dl.fromFunction=function(s,e){var a=e.cellCount,t=new Xh(a.x,a.y,a.z);return t.forEach(function(e,t,n,i){return s(1<a.x?t/a.x*2-1:0,1<a.y?n/a.y*2-1:0,1<a.z?i/a.z*2-1:0)}),new Dl(e,t)},Dl.fromGenerator=function(e,t){switch(e._hx_index){case 0:var i=e.x,s=e.y,a=e.z,n=function(e,t,n){e=i,t=s,n=a;return st.fromVector4(new q(e=null==e?0:e,t=null==t?0:t,n=null==n?0:n,1))};break;case 1:var l=e.exponent,r=e.length,o=e.point,u=e.minValue,h=e.maxValue,c=null==r?1:r,_=null==l?1:l;n=function(e,t,n){e-=o.x,t-=o.y,n-=o.z,e=st.fromVector4(new q(e=null==e?0:e,t=null==t?0:t,n=null==n?0:n,1)),t=Math.pow(Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),_)/c,n=t<=0?0:1<=t?1:t,t=u*(1-n)+h*n,n=e.x*e.x+e.y*e.y+e.z*e.z,n=n<1e-20?0:1/Math.sqrt(n),e.x*=n,e.y*=n,e.z*=n,n=e;return n.x*=t,n.y*=t,n.z*=t,e};break;case 2:var l=e.orientation,r=e.exponent,d=e.length,p=e.center,m=e.minValue,g=e.maxValue,f=null==d?1:d,A=null==r?1:r,d=Nr.R(l.x,l.y,l.z),x=st.fromVector4(new q(0,1,0,1)),r=x,l=r.x*d._12+r.y*d._22+r.z*d._32+r.w*d._42,w=r.x*d._13+r.y*d._23+r.z*d._33+r.w*d._43,y=r.x*d._14+r.y*d._24+r.z*d._34+r.w*d._44,d=(r.x=r.x*d._11+r.y*d._21+r.z*d._31+r.w*d._41,r.y=l,r.z=w,r.w=y,x.x*x.x+x.y*x.y+x.z*x.z),l=d<1e-20?0:1/Math.sqrt(d);x.x*=l,x.y*=l,x.z*=l,n=function(e,t,n){var i=e,s=t,n=null==n?0:n,e=st.fromVector4(new q(i=null==e?0:i,s=null==t?0:s,n,1)),i=p,t=e.x;s=null==t||null==(u=i.x)?null:t-u,n=null==(t=e.y)||null==(u=i.y)?null:t-u,r=null==(t=e.z)||null==(u=i.z)?null:t-u;o=null==(t=e.w)||null==(u=i.w)?null:t-u;var a=st.fromBacking(new it(null!=s?s:e.x,null!=n?n:e.y,null!=r?r:e.z,null!=o?o:e.w)),i=st.toVector4(x),l=st.toVector4(x),l=(a.x*i.x+a.y*i.y+a.z*i.z)/(x.x*l.x+x.y*l.y+x.z*l.z),s=null==(t=x.x)?null:t*l,n=null==(t=x.y)?null:t*l,r=null==(t=x.z)?null:t*l,o=null==(t=x.w)?null:t*l,a=st.fromBacking(new it(null!=s?s:x.x,null!=n?n:x.y,null!=r?r:x.z,null!=o?o:x.w)),i=p;s=null==(t=a.x)||null==(u=i.x)?null:t+u,n=null==(t=a.y)||null==(u=i.y)?null:t+u,r=null==(t=a.z)||null==(u=i.z)?null:t+u;o=null==(t=a.w)||null==(u=i.w)?null:t+u;l=st.fromBacking(new it(null!=s?s:a.x,null!=n?n:a.y,null!=r?r:a.z,null!=o?o:a.w));s=null==(t=e.x)||null==(u=l.x)?null:t-u,n=null==(t=e.y)||null==(u=l.y)?null:t-u,r=null==(t=e.z)||null==(u=l.z)?null:t-u;o=null==(t=e.w)||null==(u=l.w)?null:t-u;var i=st.fromBacking(new it(null!=s?s:e.x,null!=n?n:e.y,null!=r?r:e.z,null!=o?o:e.w)),a=(t=Math.pow(Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z),A)/f)<=0?0:1<=t?1:t,l=m*(1-a)+g*a,u=i.x*i.x+i.y*i.y+i.z*i.z,s=u<1e-20?0:1/Math.sqrt(u),n=(i.x*=s,i.y*=s,i.z*=s,i);return n.x*=l,n.y*=l,n.z*=l,i};break;case 3:var b=e.spline,v=e.attraction,C=e.flow,S=e.rotation,k=e.radius,M=e.radiusFade,I=null!=(I=e.normalizeAttraction)&&I;v<=-1?v=-1:1<=v&&(v=1),C<=-1?C=-1:1<=C&&(C=1),S<=-1?S=-1:1<=S&&(S=1),M<=0?M=0:1<=M&&(M=1),n=function(e,t,n){{var i=e,s=t,a=null==n?0:n,i=st.fromVector4(new q(i=null==e?0:i,s=null==t?0:s,a,1)),s=b.projectPointOntoSpline(i),a=b.getPointOnSpline(s),s,l=(s=b.getPointOnSpline(s+.001)).x,l,l,l;c=null==l||null==(m=a.x)?null:l-m,_=null==(l=s.y)||null==(m=a.y)?null:l-m,d=null==(l=s.z)||null==(m=a.z)?null:l-m,p=null==(l=s.w)||null==(m=a.w)?null:l-m;var s,r=(s=st.fromBacking(new it(null!=c?c:s.x,null!=_?_:s.y,null!=d?d:s.z,null!=p?p:s.w))).x*s.x+s.y*s.y+s.z*s.z,o=r<1e-20?0:1/Math.sqrt(r),u=st.fromBacking(new it(s.x*o,s.y*o,s.z*o,s.w*o)),l;c=null==(l=a.x)||null==(m=i.x)?null:l-m}_=null==(l=a.y)||null==(m=i.y)?null:l-m,d=null==(l=a.z)||null==(m=i.z)?null:l-m;p=null==(l=a.w)||null==(m=i.w)?null:l-m;var i=st.fromBacking(new it(null!=c?c:a.x,null!=_?_:a.y,null!=d?d:a.z,null!=p?p:a.w)),a=u,o=(r=i.x*i.x+i.y*i.y+i.z*i.z)<1e-20?0:1/Math.sqrt(r),h=st.toVector4(st.fromBacking(new it(i.x*o,i.y*o,i.z*o,i.w*o))),e=a.y*h.z-a.z*h.y,t=a.z*h.x-a.x*h.z,n=a.x*h.y-a.y*h.x,e=st.fromVector4(new q(e=null==e?0:e,t=null==t?0:t,n=null==n?0:n,1)),t=Math.max(k-Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z)*M,0),h=(I&&(o=(r=i.x*i.x+i.y*i.y+i.z*i.z)<1e-20?0:1/Math.sqrt(r),i.x*=o,i.y*=o,i.z*=o),C),c=null==(l=u.x)?null:l*h,_=null==(l=u.y)?null:l*h,d=null==(l=u.z)?null:l*h,p=null==(l=u.w)?null:l*h,s=st.fromBacking(new it(null!=c?c:u.x,null!=_?_:u.y,null!=d?d:u.z,null!=p?p:u.w)),h=v,c=null==(l=i.x)?null:l*h,_=null==(l=i.y)?null:l*h,d=null==(l=i.z)?null:l*h,p=null==(l=i.w)?null:l*h,h=st.fromBacking(new it(null!=c?c:i.x,null!=_?_:i.y,null!=d?d:i.z,null!=p?p:i.w));c=null==(l=s.x)||null==(m=h.x)?null:l+m,_=null==(l=s.y)||null==(m=h.y)?null:l+m,d=null==(l=s.z)||null==(m=h.z)?null:l+m;p=null==(l=s.w)||null==(m=h.w)?null:l+m;var m,n=st.fromBacking(new it(null!=c?c:s.x,null!=_?_:s.y,null!=d?d:s.z,null!=p?p:s.w)),h=S,c=null==(l=e.x)?null:l*h,_=null==(l=e.y)?null:l*h,d=null==(l=e.z)?null:l*h,p=null==(l=e.w)?null:l*h,h=st.fromBacking(new it(null!=c?c:e.x,null!=_?_:e.y,null!=d?d:e.z,null!=p?p:e.w));c=null==(l=n.x)||null==(m=h.x)?null:l+m,_=null==(l=n.y)||null==(m=h.y)?null:l+m,d=null==(l=n.z)||null==(m=h.z)?null:l+m,p=null==(l=n.w)||null==(m=h.w)?null:l+m;o=(r=(h=st.fromBacking(new it(null!=c?c:n.x,null!=_?_:n.y,null!=d?d:n.z,null!=p?p:n.w))).x*h.x+h.y*h.y+h.z*h.z)<1e-20?0:1/Math.sqrt(r);return h.x*=o,h.y*=o,h.z*=o,(a=h).x*=t,a.y*=t,a.z*=t,h};break;case 4:n=e.velocityCalculation}return Dl.fromFunction(n,t)},Dl.__super__=Hr,Dl.prototype=e(Hr.prototype,{sampleVelocity:function(e,t,n){var e=st.fromBacking(new it(e,t,n,null)),t=this._minBounds,n=this._maxBounds,i=t.x,s=t.y,a=t.z,t=t.w,i=st.fromBacking(new it((e.x-i)/(n.x-i),(e.y-s)/(n.y-s),(e.z-a)/(n.z-a),(e.w-t)/(n.w-t))),t=(i.x=Fy.wrapCircular(i.x,1),i.y=Fy.wrapCircular(i.y,1),i.z=Fy.wrapCircular(i.z,1),n=this._config.interpolate?this.interpolateVelocity(i):(s=this.velocityVectors,l=i.y/this._fieldSpacing.z,a=i.y/this._fieldSpacing.y,e=i.x/this._fieldSpacing.x,s.mData[(l<0?Math.ceil(l):Math.floor(l))*s.mW*s.mH+(a<0?Math.ceil(a):Math.floor(a))*s.mW+(e<0?Math.ceil(e):Math.floor(e))]),this._intensity),l=n.x,i=null==l?null:l*t,a=null==(l=n.y)?null:l*t,s=null==(l=n.z)?null:l*t,e=null==(l=n.w)?null:l*t;return st.fromBacking(new it(null!=i?i:n.x,null!=a?a:n.y,null!=s?s:n.z,null!=e?e:n.w))},interpolateVelocity:function(e){return this._hasDepth?this.trilinearInterpolation(e):this.bilinearInterpolation(e)},bilinearInterpolation:function(e){var t,n,i,s,a,l,r,o,u,h=new Tw(Math.round(e.x/this._fieldSpacing.x),Math.round(e.y/this._fieldSpacing.y),0),c=this._fieldSpacing.y*this._fieldSpacing.x,_=st.fromVector4(new q(0,0,0,1)),d=new Tw(h.x,h.y,h.z),p=this.velocityVectors,m=d.x,g=d.y,f=d.z,d=(0<=m&&m<p.mW&&0<=g&&g<p.mH&&0<=f&&f<p.mD&&(t=1-Math.abs(e.x-(d.x*this._fieldSpacing.x+.5*this._fieldSpacing.x))*Math.abs(e.y-(d.y*this._fieldSpacing.y+.5*this._fieldSpacing.y))/c,s=null==(r=(n=(p=this.velocityVectors).mData[d.z*p.mW*p.mH+d.y*p.mW+d.x]).x)?null:r*t,a=null==(r=n.y)?null:r*t,l=null==(r=n.z)?null:r*t,o=null==(r=n.w)?null:r*t,i=st.fromBacking(new it(null!=s?s:n.x,null!=a?a:n.y,null!=l?l:n.z,null!=o?o:n.w)),s=null==(r=_.x)||null==(u=i.x)?null:r+u,a=null==(r=_.y)||null==(u=i.y)?null:r+u,l=null==(r=_.z)||null==(u=i.z)?null:r+u,o=null==(r=_.w)||null==(u=i.w)?null:r+u,_=st.fromBacking(new it(null!=s?s:_.x,null!=a?a:_.y,null!=l?l:_.z,null!=o?o:_.w))),new Tw(h.x,h.y-1,h.z)),p=this.velocityVectors,m=d.x,g=d.y,f=d.z,d=(0<=m&&m<p.mW&&0<=g&&g<p.mH&&0<=f&&f<p.mD&&(t=1-Math.abs(e.x-(d.x*this._fieldSpacing.x+.5*this._fieldSpacing.x))*Math.abs(e.y-(d.y*this._fieldSpacing.y+.5*this._fieldSpacing.y))/c,s=null==(r=(n=(p=this.velocityVectors).mData[d.z*p.mW*p.mH+d.y*p.mW+d.x]).x)?null:r*t,a=null==(r=n.y)?null:r*t,l=null==(r=n.z)?null:r*t,o=null==(r=n.w)?null:r*t,i=st.fromBacking(new it(null!=s?s:n.x,null!=a?a:n.y,null!=l?l:n.z,null!=o?o:n.w)),s=null==(r=_.x)||null==(u=i.x)?null:r+u,a=null==(r=_.y)||null==(u=i.y)?null:r+u,l=null==(r=_.z)||null==(u=i.z)?null:r+u,o=null==(r=_.w)||null==(u=i.w)?null:r+u,_=st.fromBacking(new it(null!=s?s:_.x,null!=a?a:_.y,null!=l?l:_.z,null!=o?o:_.w))),new Tw(h.x-1,h.y,h.z)),p=this.velocityVectors,m=d.x,g=d.y,f=d.z,d=(0<=m&&m<p.mW&&0<=g&&g<p.mH&&0<=f&&f<p.mD&&(t=1-Math.abs(e.x-(d.x*this._fieldSpacing.x+.5*this._fieldSpacing.x))*Math.abs(e.y-(d.y*this._fieldSpacing.y+.5*this._fieldSpacing.y))/c,s=null==(r=(n=(p=this.velocityVectors).mData[d.z*p.mW*p.mH+d.y*p.mW+d.x]).x)?null:r*t,a=null==(r=n.y)?null:r*t,l=null==(r=n.z)?null:r*t,o=null==(r=n.w)?null:r*t,i=st.fromBacking(new it(null!=s?s:n.x,null!=a?a:n.y,null!=l?l:n.z,null!=o?o:n.w)),s=null==(r=_.x)||null==(u=i.x)?null:r+u,a=null==(r=_.y)||null==(u=i.y)?null:r+u,l=null==(r=_.z)||null==(u=i.z)?null:r+u,o=null==(r=_.w)||null==(u=i.w)?null:r+u,_=st.fromBacking(new it(null!=s?s:_.x,null!=a?a:_.y,null!=l?l:_.z,null!=o?o:_.w))),new Tw(h.x-1,h.y-1,h.z)),p=this.velocityVectors,m=d.x,g=d.y,f=d.z;return 0<=m&&m<p.mW&&0<=g&&g<p.mH&&0<=f&&f<p.mD&&(t=1-Math.abs(e.x-(d.x*this._fieldSpacing.x+.5*this._fieldSpacing.x))*Math.abs(e.y-(d.y*this._fieldSpacing.y+.5*this._fieldSpacing.y))/c,s=null==(r=(n=(p=this.velocityVectors).mData[d.z*p.mW*p.mH+d.y*p.mW+d.x]).x)?null:r*t,a=null==(r=n.y)?null:r*t,l=null==(r=n.z)?null:r*t,o=null==(r=n.w)?null:r*t,i=st.fromBacking(new it(null!=s?s:n.x,null!=a?a:n.y,null!=l?l:n.z,null!=o?o:n.w)),s=null==(r=_.x)||null==(u=i.x)?null:r+u,a=null==(r=_.y)||null==(u=i.y)?null:r+u,l=null==(r=_.z)||null==(u=i.z)?null:r+u,o=null==(r=_.w)||null==(u=i.w)?null:r+u,_=st.fromBacking(new it(null!=s?s:_.x,null!=a?a:_.y,null!=l?l:_.z,null!=o?o:_.w))),_},trilinearInterpolation:function(e){var t,n,i,s,a,l,r,o,u,h,c,_=new Tw(Math.round(e.x/this._fieldSpacing.x),Math.round(e.y/this._fieldSpacing.y),Math.round(e.z/this._fieldSpacing.z)),d=this._fieldSpacing.z*this._fieldSpacing.y*this._fieldSpacing.x,p=st.fromVector4(new q(0,0,0,1)),m=new Tw(_.x,_.y,_.z),g=this.velocityVectors,f=m.x,A=m.y,x=m.z,m=(0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),new Tw(_.x-1,_.y,_.z)),g=this.velocityVectors,f=m.x,A=m.y,x=m.z,m=(0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),new Tw(_.x,_.y-1,_.z)),g=this.velocityVectors,f=m.x,A=m.y,x=m.z,m=(0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),new Tw(_.x-1,_.y-1,_.z)),g=this.velocityVectors,f=m.x,A=m.y,x=m.z,m=(0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),new Tw(_.x,_.y,_.z-1)),g=this.velocityVectors,f=m.x,A=m.y,x=m.z,m=(0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),new Tw(_.x-1,_.y,_.z-1)),g=this.velocityVectors,f=m.x,A=m.y,x=m.z,m=(0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),new Tw(_.x,_.y-1,_.z-1)),g=this.velocityVectors,f=m.x,A=m.y,x=m.z,m=(0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),new Tw(_.x-1,_.y-1,_.z-1)),g=this.velocityVectors,f=m.x,A=m.y,x=m.z;return 0<=f&&f<g.mW&&0<=A&&A<g.mH&&0<=x&&x<g.mD&&(t=st.fromBacking(new it(m.x*this._fieldSpacing.x+.5*this._fieldSpacing.x,m.y*this._fieldSpacing.y+.5*this._fieldSpacing.y,m.z*this._fieldSpacing.z+.5*this._fieldSpacing.z,null)),l=null==(u=e.x)||null==(c=t.x)?null:u-c,r=null==(u=e.y)||null==(c=t.y)?null:u-c,o=null==(u=e.z)||null==(c=t.z)?null:u-c,h=null==(u=e.w)||null==(c=t.w)?null:u-c,n=st.fromBacking(new it(null!=l?l:e.x,null!=r?r:e.y,null!=o?o:e.z,null!=h?h:e.w)),i=1-Math.abs(n.x)*Math.abs(n.y)*Math.abs(n.z)/d,l=null==(u=(s=(g=this.velocityVectors).mData[m.z*g.mW*g.mH+m.y*g.mW+m.x]).x)?null:u*i,r=null==(u=s.y)?null:u*i,o=null==(u=s.z)?null:u*i,h=null==(u=s.w)?null:u*i,a=st.fromBacking(new it(null!=l?l:s.x,null!=r?r:s.y,null!=o?o:s.z,null!=h?h:s.w)),l=null==(u=p.x)||null==(c=a.x)?null:u+c,r=null==(u=p.y)||null==(c=a.y)?null:u+c,o=null==(u=p.z)||null==(c=a.z)?null:u+c,h=null==(u=p.w)||null==(c=a.w)?null:u+c,p=st.fromBacking(new it(null!=l?l:p.x,null!=r?r:p.y,null!=o?o:p.z,null!=h?h:p.w))),p},set_velocityVectors:function(e){return this._fieldSpacing=st.fromBacking(new it(1/e.mW,1/e.mH,1/e.mD,null)),this._hasDepth=1<e.mD,this.velocityVectors=e},__class__:Dl,__properties__:e(Hr.prototype.__properties__,{set_velocityVectors:"set_velocityVectors"})}),fe["hacksaw.core.h3d.transform.VectorFieldGenerator"]={__ename__:!0,__constructs__:null,Constant:((R=function(e,t,n){return{_hx_index:0,x:e,y:t,z:n,__enum__:"hacksaw.core.h3d.transform.VectorFieldGenerator",toString:o}})._hx_name="Constant",R.__params__=["x","y","z"],R),FadePoint:((R=function(e,t,n,i,s){return{_hx_index:1,point:e,minValue:t,maxValue:n,exponent:i,length:s,__enum__:"hacksaw.core.h3d.transform.VectorFieldGenerator",toString:o}})._hx_name="FadePoint",R.__params__=["point","minValue","maxValue","exponent","length"],R),FadeLine:((R=function(e,t,n,i,s,a){return{_hx_index:2,center:e,orientation:t,minValue:n,maxValue:i,exponent:s,length:a,__enum__:"hacksaw.core.h3d.transform.VectorFieldGenerator",toString:o}})._hx_name="FadeLine",R.__params__=["center","orientation","minValue","maxValue","exponent","length"],R),Spline:((R=function(e,t,n,i,s,a,l){return{_hx_index:3,spline:e,attraction:t,flow:n,rotation:i,radius:s,radiusFade:a,normalizeAttraction:l,__enum__:"hacksaw.core.h3d.transform.VectorFieldGenerator",toString:o}})._hx_name="Spline",R.__params__=["spline","attraction","flow","rotation","radius","radiusFade","normalizeAttraction"],R),Custom:((R=function(e){return{_hx_index:4,velocityCalculation:e,__enum__:"hacksaw.core.h3d.transform.VectorFieldGenerator",toString:o}})._hx_name="Custom",R.__params__=["velocityCalculation"],R)}),Lh=(Uh.__constructs__=[Uh.Constant,Uh.FadePoint,Uh.FadeLine,Uh.Spline,Uh.Custom],Uh.__empty_constructs__=[],(i["hacksaw.core.h3d.transform.VectorFieldConfig"]=Rl).__name__="hacksaw.core.h3d.transform.VectorFieldConfig",Rl.prototype={__class__:Rl},(i["hxfsm.IState"]=Pl).__name__="hxfsm.IState",Pl.__isInterface__=!0,(i["hxfsm.StateBase"]=zl).__name__="hxfsm.StateBase",zl.__interfaces__=[Pl],zl.prototype={__class__:zl},(i["hex.di.IInjectorAcceptor"]=Ql).__name__="hex.di.IInjectorAcceptor",Ql.__isInterface__=!0,Ql.prototype={__class__:Ql},(i["hex.di.IInjectorContainer"]=Vl).__name__="hex.di.IInjectorContainer",Vl.__isInterface__=!0,Vl.__interfaces__=[Ql],(i["hxfsm.integrations.injector.IInjectorState"]=Ol).__name__="hxfsm.integrations.injector.IInjectorState",Ol.__isInterface__=!0,Ol.__interfaces__=[Vl,Pl],Ol.prototype={__class__:Ol},(i["hacksaw.core.state.HacksawStateBase"]=Wl).__name__="hacksaw.core.state.HacksawStateBase",Wl.__interfaces__=[Ol],Wl.__super__=zl,Wl.prototype=e(zl.prototype,{subscribe:function(e,t,n,i){null==i&&(i=!1),null!=this._listeners&&(t=(e=hacksawCasino.PubSub.getChannel(e)).subscribe(t,n),i||this._listeners.push({sub:t,channel:e}))},subscribeOnce:function(e,t,n){var i;null!=this._listeners&&(e=hacksawCasino.PubSub.getChannel(e),i=null,i={sub:e.subscribe(t,function(e){n(e),null!=i&&i.channel.unsubscribe(i.sub)}),channel:e},this._listeners.push(i))},sub:function(e,t,n){null==n&&(n=!1);var i=s1.trigger();return this.subscribe(e,t,function(e){i.handlers.invoke(e)},n),i},subOnce:function(e,n){var i=this,t=rt.irreversible(function(t){i.subscribeOnce(e,n,function(e){t(e)})});return t.eager(),t},publish:function(e,t,n){hacksawCasino.PubSub.getChannel(e).publish(t,n)},after:function(e,t){var n,i;return null==t&&(t="default"),null==this._delays?rt.never():(n=X.field(this,"appModel"),e=new Vs(e),i=(new ge).add(e),n.owner.addChild(i),this._delays.push({timer:e,group:t}),e.timedOut.handle(Cn(i,i.dispose)),e.timedOut)},next:function(){return this.after(0)},enter:function(){},exit:function(){for(;0<this._listeners.length;){var e=this._listeners.pop();e.channel.unsubscribe(e.sub)}this._listeners=null;for(var t=this._delays,n=[],i=0;i<t.length;){var s=t[i];++i,null!=s.timer.owner&&n.push(s)}il.each(n,function(e){e.timer.owner.dispose()}),this._delays=null;var a=X.field(this,"appModel");null==a||null==this._renderCallback||Wl._renderCallbackPersistent||(a.customRenderCallback=this._renderCallback=null)},acceptInjector:function(e){},__class__:Wl}),fe["hacksaw.core.types.Action"]={__ename__:!0,__constructs__:null,Gridwin:((R=function(e){return{_hx_index:0,data:e,__enum__:"hacksaw.core.types.Action",toString:o}})._hx_name="Gridwin",R.__params__=["data"],R),Remove:((R=function(e){return{_hx_index:1,data:e,__enum__:"hacksaw.core.types.Action",toString:o}})._hx_name="Remove",R.__params__=["data"],R),Stick:((R=function(e){return{_hx_index:2,data:e,__enum__:"hacksaw.core.types.Action",toString:o}})._hx_name="Stick",R.__params__=["data"],R),Bonusfeaturewon:((R=function(e){return{_hx_index:3,data:e,__enum__:"hacksaw.core.types.Action",toString:o}})._hx_name="Bonusfeaturewon",R.__params__=["data"],R),Retrigger:((R=function(e){return{_hx_index:4,data:e,__enum__:"hacksaw.core.types.Action",toString:o}})._hx_name="Retrigger",R.__params__=["data"],R),GameSpecificAction:((R=function(e){return{_hx_index:5,gameEnum:e,__enum__:"hacksaw.core.types.Action",toString:o}})._hx_name="GameSpecificAction",R.__params__=["gameEnum"],R)}),jh=(Lh.__constructs__=[Lh.Gridwin,Lh.Remove,Lh.Stick,Lh.Bonusfeaturewon,Lh.Retrigger,Lh.GameSpecificAction],Lh.__empty_constructs__=[],fe["hacksaw.core.types.AnimationPos"]={__ename__:!0,__constructs__:null,Start:{_hx_name:"Start",_hx_index:0,__enum__:"hacksaw.core.types.AnimationPos",toString:o},End:{_hx_name:"End",_hx_index:1,__enum__:"hacksaw.core.types.AnimationPos",toString:o},Rate:((R=function(e){return{_hx_index:2,rate:e,__enum__:"hacksaw.core.types.AnimationPos",toString:o}})._hx_name="Rate",R.__params__=["rate"],R),CurrentRate:{_hx_name:"CurrentRate",_hx_index:3,__enum__:"hacksaw.core.types.AnimationPos",toString:o},Default:{_hx_name:"Default",_hx_index:4,__enum__:"hacksaw.core.types.AnimationPos",toString:o},None:{_hx_name:"None",_hx_index:5,__enum__:"hacksaw.core.types.AnimationPos",toString:o}}),Hh=(jh.__constructs__=[jh.Start,jh.End,jh.Rate,jh.CurrentRate,jh.Default,jh.None],jh.__empty_constructs__=[jh.Start,jh.End,jh.CurrentRate,jh.Default,jh.None],function(e,t,n,i){this.loopStartPos=jh.Default,this.endPos=jh.Default,this.startPos=jh.Default,this.name=e,null!=t&&(this.startPos=t),null!=n&&(this.endPos=n),null!=i&&(this.loopStartPos=i)}),Yh=((i["hacksaw.core.types.AnimationState"]=Hh).__name__="hacksaw.core.types.AnimationState",Hh.prototype={__class__:Hh},fe["hacksaw.core.types.AnimationStop"]={__ename__:!0,__constructs__:null,All:((R=function(e){return{_hx_index:0,stopBehavior:e,__enum__:"hacksaw.core.types.AnimationStop",toString:o}})._hx_name="All",R.__params__=["stopBehavior"],R),Named:((R=function(e,t){return{_hx_index:1,name:e,stopBehavior:t,__enum__:"hacksaw.core.types.AnimationStop",toString:o}})._hx_name="Named",R.__params__=["name","stopBehavior"],R)}),Zh=(Yh.__constructs__=[Yh.All,Yh.Named],Yh.__empty_constructs__=[],fe["hacksaw.core.types.StopBehavior"]={__ename__:!0,__constructs__:null,Immediate:{_hx_name:"Immediate",_hx_index:0,__enum__:"hacksaw.core.types.StopBehavior",toString:o},End:((R=function(e){return{_hx_index:1,duration:e,__enum__:"hacksaw.core.types.StopBehavior",toString:o}})._hx_name="End",R.__params__=["duration"],R),SkipToEnd:{_hx_name:"SkipToEnd",_hx_index:2,__enum__:"hacksaw.core.types.StopBehavior",toString:o}});Zh.__constructs__=[Zh.Immediate,Zh.End,Zh.SkipToEnd],Zh.__empty_constructs__=[Zh.Immediate,Zh.SkipToEnd],(n=fe["hacksaw.core.types.Direction"]={__ename__:!0,__constructs__:null,W:{_hx_name:"W",_hx_index:0,__enum__:"hacksaw.core.types.Direction",toString:o},NW:{_hx_name:"NW",_hx_index:1,__enum__:"hacksaw.core.types.Direction",toString:o},N:{_hx_name:"N",_hx_index:2,__enum__:"hacksaw.core.types.Direction",toString:o},NE:{_hx_name:"NE",_hx_index:3,__enum__:"hacksaw.core.types.Direction",toString:o},E:{_hx_name:"E",_hx_index:4,__enum__:"hacksaw.core.types.Direction",toString:o},SE:{_hx_name:"SE",_hx_index:5,__enum__:"hacksaw.core.types.Direction",toString:o},S:{_hx_name:"S",_hx_index:6,__enum__:"hacksaw.core.types.Direction",toString:o},SW:{_hx_name:"SW",_hx_index:7,__enum__:"hacksaw.core.types.Direction",toString:o}}).__constructs__=[n.W,n.NW,n.N,n.NE,n.E,n.SE,n.S,n.SW],n.__empty_constructs__=[n.W,n.NW,n.N,n.NE,n.E,n.SE,n.S,n.SW],(i["hacksaw.core.types.GameInfoSymbol"]=Nl).__name__="hacksaw.core.types.GameInfoSymbol",Nl.prototype={__class__:Nl},(i["hacksaw.core.types.SymPayouts"]=Gl).__name__="hacksaw.core.types.SymPayouts",(i["polygonal.ds.Hashable"]=Ul).__name__="polygonal.ds.Hashable",Ul.__isInterface__=!0,(i["polygonal.ds.Collection"]=Ll).__name__="polygonal.ds.Collection",Ll.__isInterface__=!0,Ll.__interfaces__=[Ul],(i["polygonal.ds.Array2"]=jl).__name__="polygonal.ds.Array2",jl.__interfaces__=[Ll],jl.prototype={setAll:function(e){for(var t=this.mData,n=0,i=this.mW*this.mH;n<i;)t[n++]=e;return this},getRow:function(e,t){for(var n=e*this.mW,i=this.mData,s=0,a=this.mW;s<a;){var l=s++;t[l]=i[n+l]}return t},getCol:function(e,t){for(var n=this.mData,i=0,s=this.mH;i<s;){var a=i++;t[a]=n[a*this.mW+e]}return t},setCol:function(e,t){for(var n=this.mData,i=0,s=this.mH;i<s;){var a=i++;n[a*this.mW+e]=t[a]}return this},transpose:function(){if(this.mW==this.mH)for(var e=0,t=this.mH;e<t;)for(var n=(u=e++)+1,i=this.mW;n<i;){var s=n++,a=u*this.mW+s,l=s*this.mW+u,r=this.mData,o=r[a];r[a]=r[l],r[l]=o}else{for(o=new Array(this.mW*this.mH),e=0,t=this.mH;e<t;)for(var u=e++,n=0,i=this.mW;n<i;)o[(s=n++)*this.mH+u]=this.mData[u*this.mW+s];this.mData=o,this.mW^=this.mH,this.mH^=this.mW,this.mW^=this.mH}return this},contains:function(e){for(var t=this.mData,n=0,i=this.mW*this.mH;n<i;)if(t[n++]==e)return!0;return!1},clear:function(e){null==e&&(e=!1),Ew.nullify(this.mData)},iterator:function(){var e,t;return this.reuseIterator?(null==this.mIterator?this.mIterator=new Iw(this):((e=this.mIterator).mData=e.mObject.mData,e.mS=(t=e.mObject).mW*t.mH,e.mI=0),this.mIterator):new Iw(this)},toArray:function(){return Ew.toArray(this.mData,0,this.mW*this.mH,[])},__class__:jl},(i["hacksaw.core.types.Grid"]=Hl).__name__="hacksaw.core.types.Grid",Hl.__super__=jl,Hl.prototype=e(jl.prototype,{getCenterResized:function(e,t,n){if(e==this.mW&&t==this.mH)return this;for(var i=(e-this.mW)/2|0,s=(t-this.mH)/2|0,t=new Hl(e,t),a=(t.set_dataGrid(this.get_dataGrid()),t.columnIndexes=this.columnIndexes,t.mData),e=t.mW,l=0,r=t.mW*t.mH;l<r;){var o=l++,u=o%e-i,h=(o/e|0)-s;a[o]=0<=h&&h<this.mH&&0<=u&&u<this.mW?this.mData[h*this.mW+u]:n}return t},collapseRow:function(e,t,n){null==n&&(n=!1);for(var i=[],s=(this.getRow(e,i),[]),a=0;a<i.length;){var l=i[a];++a,l!=t&&s.push(l)}var r=i.length-s.length;if(n){for(var a=[],o=0;o<r;)++o,a.push(null);return s.concat(a)}for(a=[],o=0;o<r;)++o,a.push(null);return a.concat(s)},collapseCol:function(e,t,n){null==n&&(n=!1);for(var i=[],s=(this.getCol(e,i),[]),a=0;a<i.length;){var l=i[a];++a,l!=t&&s.push(l)}var r=i.length-s.length;if(n){for(var a=[],o=0;o<r;)++o,a.push(null);return s.concat(a)}for(a=[],o=0;o<r;)++o,a.push(null);return a.concat(s)},getValArea:function(n){var i=this.mW-1,s=this.mH-1,a=0,l=0;return this.eachCells(function(e,t){e==n&&(i=0|Math.min(i,t.x),s=0|Math.min(s,t.y),a=0|Math.max(a,t.x),l=0|Math.max(l,t.y))}),new g(i,s,a-i+1,l-s+1)},position:function(e,t){for(var n=new Hl(this.mW,this.mH),i=n.mData,s=n.mW,a=0,l=n.mW*n.mH;a<l;){var r=a++;i[r]={x:.5*e+r%s*e-e*this.mW*.5,y:-(.5*t+(r/s|0)*t-t*this.mH*.5)}}return n.columnIndexes=this.columnIndexes,n},mapToGrid:function(e,t){for(var n=[],i=0,s=this.mW*this.mH;i<s;)n.push(i++);for(var t=null==t?null:this.filterDuplicates(n,t),a=null!=t?t:n,l=new Hl(this.mW,this.mH),n=0;n<a.length;){var r=a[n];++n,l.mData[r]=e(this.mData[r],new Bw(r%this.mW,r/this.mW|0))}return l},mapCells:function(e,t){for(var n=[],i=0,s=this.mW*this.mH;i<s;)n.push(i++);for(var t=null==t?null:this.filterDuplicates(n,t),a=null!=t?t:n,l=new Array(a.length),n=0,i=a.length;n<i;){var r=n++,o=a[r];l[r]=e(this.mData[o],new Bw(o%this.mW,o/this.mW|0))}return l},eachCells:function(t,e){for(var n=this,i=[],s=0,a=this.mW*this.mH;s<a;)i.push(s++);e=null==e?null:n.filterDuplicates(i,e);il.each(null!=e?e:i,function(e){t(n.mData[e],new Bw(e%n.mW,e/n.mW|0))})},mapToGridByMask:function(e,t,n){for(var i=[],s=0,a=this.mW*this.mH;s<a;)i.push(s++);for(s=[],a=0;a<i.length;){var l=i[a];++a,e.mData[l]&&s.push(l)}for(var n=null==n?null:this.filterDuplicates(s,n),r=null!=n?n:s,o=new Hl(this.mW,this.mH),i=0;i<r.length;){var u=r[i];++i,o.mData[u]=t(this.mData[u],new Bw(u%this.mW,u/this.mW|0))}return o},mapCellsByMask:function(e,t,n){for(var i=[],s=0,a=this.mW*this.mH;s<a;)i.push(s++);for(s=[],a=0;a<i.length;){var l=i[a];++a,e.mData[l]&&s.push(l)}for(var n=null==n?null:this.filterDuplicates(s,n),r=null!=n?n:s,o=new Array(r.length),i=0,s=r.length;i<s;){var u=i++,h=r[u];o[u]=t(this.mData[h],new Bw(h%this.mW,h/this.mW|0))}return il.filterNull(o)},eachCellsByMask:function(e,t,n){for(var i=this,s=[],a=0,l=this.mW*this.mH;a<l;)s.push(a++);for(a=[],l=0;l<s.length;){var r=s[l];++l,e.mData[r]&&a.push(r)}n=null==n?null:i.filterDuplicates(a,n);il.each(null!=n?n:a,function(e){t(i.mData[e],new Bw(e%i.mW,e/i.mW|0))})},setCellSize:function(e){var n=this;this._cellSize=e,this._hasData&&il.eachi(this.columnIndexes,function(e,t){n.setScrollPosition(t,ky.fromFloat(e*n._cellSize.y))})},setScrollPosition:function(e,t,n){for(var i,s=il.filterNull(this._dataGrid.getCol(e,[])).length,a=ky.fromFloat(this._cellSize.y),l=(t.toFloat(),t=Ty.equals(t,ky.fromFloat(0))?ky.fromFloat(0):t.modulo(a.multiply(Ty.fromInt(s))).ceilTo(15),Ty.equals(t,ky.fromFloat(0))?0:Math.round(t.negate().divide(a).toFloat())),r=(i=0==l?0:0<=(_=l%s)?_:_+s,this.columnIndexes[e]=i,t.negate().modulo(a)),o=this.mData,u=this.mW,h=0,c=this.mW*this.mH;h<c;){var _,d,p=h++,m=o[p],g=p%u;d=g==e&&null!=m&&null!=n?n((d=this._dataGrid).mData[(0<=(_=(i+(p/u|0))%s)?_:_+s)*d.mW+g],m,st.fromBacking(new it(0,r.toFloat(),0,null))):m,o[p]=d}},get_dataGrid:function(){return this._dataGrid},set_dataGrid:function(e){return this._hasData=null!=e,this._dataGrid=null!=e?e:this},filterDuplicates:function(e,n){var i=this;if(e.length<=1)return e;for(var t=[],s=0;s<e.length;){var a=e[s],l=(++s,[this.mData[a]]);il.pushIf(t,null==l[0]||!il.any(t,(t=>function(e){return n(i.mData[e],t[0])})(l)),a)}return t},__class__:Hl,__properties__:{set_dataGrid:"set_dataGrid",get_dataGrid:"get_dataGrid"}}),(i["hacksaw.core.types.GridSpread"]=Yl).__name__="hacksaw.core.types.GridSpread",Yl.prototype={__class__:Yl},(n=fe["hacksaw.core.types.GridProximitySelection"]={__ename__:!0,__constructs__:null,Direction:((R=function(e,t,n){return{_hx_index:0,direction:e,symmetry:t,cells:n,__enum__:"hacksaw.core.types.GridProximitySelection",toString:o}})._hx_name="Direction",R.__params__=["direction","symmetry","cells"],R),Rectangle:((R=function(e,t){return{_hx_index:1,width:e,height:t,__enum__:"hacksaw.core.types.GridProximitySelection",toString:o}})._hx_name="Rectangle",R.__params__=["width","height"],R)}).__constructs__=[n.Direction,n.Rectangle],n.__empty_constructs__=[],(n=fe["hacksaw.core.types.Symmetry"]={__ename__:!0,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"hacksaw.core.types.Symmetry",toString:o},Opposite:{_hx_name:"Opposite",_hx_index:1,__enum__:"hacksaw.core.types.Symmetry",toString:o},Cross:{_hx_name:"Cross",_hx_index:2,__enum__:"hacksaw.core.types.Symmetry",toString:o}}).__constructs__=[n.None,n.Opposite,n.Cross],n.__empty_constructs__=[n.None,n.Opposite,n.Cross];(n=fe["hacksaw.core.types.Rotation"]={__ename__:!0,__constructs__:null,Direction:((R=function(e,t){return{_hx_index:0,val:e,counterClockwise:t,__enum__:"hacksaw.core.types.Rotation",toString:o}})._hx_name="Direction",R.__params__=["val","counterClockwise"],R),Degrees:((R=function(e,t){return{_hx_index:1,val:e,relative:t,__enum__:"hacksaw.core.types.Rotation",toString:o}})._hx_name="Degrees",R.__params__=["val","relative"],R),Radians:((R=function(e,t){return{_hx_index:2,val:e,relative:t,__enum__:"hacksaw.core.types.Rotation",toString:o}})._hx_name="Radians",R.__params__=["val","relative"],R)}).__constructs__=[n.Direction,n.Degrees,n.Radians],n.__empty_constructs__=[],(i["polygonal.ds.Array3"]=Zl).__name__="polygonal.ds.Array3",Zl.__interfaces__=[Ll],Zl.prototype={forEach:function(e,t){for(var n,i,s=this.mW,a=s*this.mH,l=1/a,r=1/s,o=(t=null==t?-1:t)<0?(i=0,this.mW*this.mH*this.mD):(i=t*a,i=a),u=this.mData;i<o;)u[i]=e(u[i],(n=i%a)%s,n*r|0,i*l|0),++i;return this},__class__:Zl};var Xh=function(e,t,n,i){Zl.call(this,e,t,n,i)},qh=((i["hacksaw.core.types.VectorFieldVelocityArray"]=Xh).__name__="hacksaw.core.types.VectorFieldVelocityArray",Xh.__super__=Zl,Xh.prototype=e(Zl.prototype,{rotate:function(e,t,n){for(var i=new tn,s=(i.initRotateAxis(e,0,t,n),i.toMatrix()),a=this.mData,l=0,r=this.mW*this.mH*this.mD;l<r;){var o=a[l++],u=o.x*s._12+o.y*s._22+o.z*s._32+o.w*s._42,h=o.x*s._13+o.y*s._23+o.z*s._33+o.w*s._43,c=o.x*s._14+o.y*s._24+o.z*s._34+o.w*s._44;o.x=o.x*s._11+o.y*s._21+o.z*s._31+o.w*s._41,o.y=u,o.z=h,o.w=c}return this},__class__:Xh}),(i["hacksaw.core.utils.Array2Utils"]=Xl).__name__="hacksaw.core.utils.Array2Utils",Xl.patchCol=function(e,t,n,i,s){null==s&&(s=!0);for(var a=e.getCol(t,[]),l=(n%=a.length,(s?il.filterNull(a):a).length),r=n+i.length-1,o=r-l+1,u=[],h=0,c=a.length;h<c;){var _=h++;u.push(n<=_&&_<=r?l<1+_?null:i[_-n]:_<o?i[i.length-o+_]:a[_])}return e.setCol(t,u),e},function(){}),Kh=((i["hacksaw.core.utils.ArrayUtils"]=qh).__name__="hacksaw.core.utils.ArrayUtils",qh.zipWith=function(e,t,n){for(var i=e.length,s=t.length,a=[],l=0,r=i<s?i:s;l<r;){var o=l++;a.push(n(e[o],t[o]))}return a},qh.findIndexi=function(e,t){for(var n=0,i=e.length;n<i;){var s=n++;if(t(e[s],s))return s}return-1},function(){}),Jh=((i["hacksaw.core.utils.AtlasUtils"]=Kh).__name__="hacksaw.core.utils.AtlasUtils",Kh.getTile=function(e,t){e=e.contents.h[t];return null!=e?e[0].t:null},Kh.getContents=function(e,t){e=e.contents.h[t];return null!=e?e[0]:null},function(){}),$h=((i["hacksaw.core.utils.CameraUtils"]=Jh).__name__="hacksaw.core.utils.CameraUtils",Jh.getBounds=function(e,t){var n=Vr.CURRENT,n=e.project(0,0,t=null==t?0:t,n.width,n.height,!1).z,i=e.unproject(1,1,n),e=e.unproject(-1,-1,n),n=Math.abs(i.x-e.x),i=Math.abs(e.y-i.y),s=e.x,e=e.y,a=new Ur;return a.xMin=s,a.yMin=e,a.zMin=t,a.xMax=s+n,a.yMax=e+i,a.zMax=t,a},function(){}),ec=((i["hacksaw.core.utils.GradientUtils"]=$h).__name__="hacksaw.core.utils.GradientUtils",$h.toTile=function(e,t,n,i,s){e=e.toTextureMap(n).h[t],i=null==i?n:i,s=null==s?n:s,t=Ir.fromTexture(e);return t.scaleToSize(i,s),t},function(){}),tc=((i["hacksaw.core.utils.ObjectUtils"]=ec).__name__="hacksaw.core.utils.ObjectUtils",ec.stencil=function(e){var o;(o=function(e){for(var t=0,n=e.getMaterials();t<n.length;){var i=n[t++].passes,s=new co;s.setFunc(to.Equal,1,255,0),i.stencil=s}for(var a=e.children,l=0,r=a.length;l<r;)o(a[l++])})(e)},ec.ignoreAllBounds=function(e,s){null==s&&(s=!0);var a;(a=function(e){s?e.flags|=512:e.flags&=-513;for(var t=e.children,n=0,i=t.length;n<i;)a(t[n++])})(e)},(i["hacksaw.core.utils.ParticleModuleBuilder"]=ql).__name__="hacksaw.core.utils.ParticleModuleBuilder",ql.accelerationModule=function(e){return e.module},ql.particleColorModule=function(e){switch(e._hx_index){case 0:case 1:case 2:return e.module}},ql.lifeModule=function(e){return e.module},ql.locationModule=function(e){switch(e._hx_index){case 0:case 1:case 2:case 3:case 4:case 5:return e.module}},ql.rotationModule=function(e){switch(e._hx_index){case 0:case 1:case 2:return e.module}},ql.sizeModule=function(e){switch(e._hx_index){case 0:case 1:case 2:return e.module}},ql.spawnModule=function(e){switch(e._hx_index){case 0:case 1:return e.module}},ql.particleTileModule=function(e){switch(e._hx_index){case 0:case 1:case 2:return e.module}},ql.velocityModule=function(e){switch(e._hx_index){case 0:case 1:case 2:case 3:case 4:return e.module}},fe["hacksaw.core.utils.AccelerationModule"]={__ename__:!0,__constructs__:null,ConstAcceleration:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.AccelerationModule",toString:o}})._hx_name="ConstAcceleration",R.__params__=["module"],R)}),nc=(tc.__constructs__=[tc.ConstAcceleration],tc.__empty_constructs__=[],fe["hacksaw.core.utils.ParticleColorModule"]={__ename__:!0,__constructs__:null,BySpeed:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.ParticleColorModule",toString:o}})._hx_name="BySpeed",R.__params__=["module"],R),Initial:((R=function(e){return{_hx_index:1,module:e,__enum__:"hacksaw.core.utils.ParticleColorModule",toString:o}})._hx_name="Initial",R.__params__=["module"],R),ByLife:((R=function(e){return{_hx_index:2,module:e,__enum__:"hacksaw.core.utils.ParticleColorModule",toString:o}})._hx_name="ByLife",R.__params__=["module"],R)}),ic=(nc.__constructs__=[nc.BySpeed,nc.Initial,nc.ByLife],nc.__empty_constructs__=[],fe["hacksaw.core.utils.LifeModule"]={__ename__:!0,__constructs__:null,LifeTime:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.LifeModule",toString:o}})._hx_name="LifeTime",R.__params__=["module"],R)}),sc=(ic.__constructs__=[ic.LifeTime],ic.__empty_constructs__=[],fe["hacksaw.core.utils.LocationModule"]={__ename__:!0,__constructs__:null,Point:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.LocationModule",toString:o}})._hx_name="Point",R.__params__=["module"],R),Edge:((R=function(e){return{_hx_index:1,module:e,__enum__:"hacksaw.core.utils.LocationModule",toString:o}})._hx_name="Edge",R.__params__=["module"],R),Rectangle:((R=function(e){return{_hx_index:2,module:e,__enum__:"hacksaw.core.utils.LocationModule",toString:o}})._hx_name="Rectangle",R.__params__=["module"],R),Sphere:((R=function(e){return{_hx_index:3,module:e,__enum__:"hacksaw.core.utils.LocationModule",toString:o}})._hx_name="Sphere",R.__params__=["module"],R),Cone:((R=function(e){return{_hx_index:4,module:e,__enum__:"hacksaw.core.utils.LocationModule",toString:o}})._hx_name="Cone",R.__params__=["module"],R),CubicSpline:((R=function(e){return{_hx_index:5,module:e,__enum__:"hacksaw.core.utils.LocationModule",toString:o}})._hx_name="CubicSpline",R.__params__=["module"],R)}),ac=(sc.__constructs__=[sc.Point,sc.Edge,sc.Rectangle,sc.Sphere,sc.Cone,sc.CubicSpline],sc.__empty_constructs__=[],fe["hacksaw.core.utils.RotationModule"]={__ename__:!0,__constructs__:null,InitialRotation:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.RotationModule",toString:o}})._hx_name="InitialRotation",R.__params__=["module"],R),RotateByVelocity:((R=function(e){return{_hx_index:1,module:e,__enum__:"hacksaw.core.utils.RotationModule",toString:o}})._hx_name="RotateByVelocity",R.__params__=["module"],R),FixedRotationRate:((R=function(e){return{_hx_index:2,module:e,__enum__:"hacksaw.core.utils.RotationModule",toString:o}})._hx_name="FixedRotationRate",R.__params__=["module"],R)}),lc=(ac.__constructs__=[ac.InitialRotation,ac.RotateByVelocity,ac.FixedRotationRate],ac.__empty_constructs__=[],fe["hacksaw.core.utils.SizeModule"]={__ename__:!0,__constructs__:null,Initial:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.SizeModule",toString:o}})._hx_name="Initial",R.__params__=["module"],R),BySpeed:((R=function(e){return{_hx_index:1,module:e,__enum__:"hacksaw.core.utils.SizeModule",toString:o}})._hx_name="BySpeed",R.__params__=["module"],R),ByLife:((R=function(e){return{_hx_index:2,module:e,__enum__:"hacksaw.core.utils.SizeModule",toString:o}})._hx_name="ByLife",R.__params__=["module"],R)}),rc=(lc.__constructs__=[lc.Initial,lc.BySpeed,lc.ByLife],lc.__empty_constructs__=[],fe["hacksaw.core.utils.SpawnModule"]={__ename__:!0,__constructs__:null,OverTime:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.SpawnModule",toString:o}})._hx_name="OverTime",R.__params__=["module"],R),OverDistance:((R=function(e){return{_hx_index:1,module:e,__enum__:"hacksaw.core.utils.SpawnModule",toString:o}})._hx_name="OverDistance",R.__params__=["module"],R)}),oc=(rc.__constructs__=[rc.OverTime,rc.OverDistance],rc.__empty_constructs__=[],fe["hacksaw.core.utils.ParticleTileModule"]={__ename__:!0,__constructs__:null,Animated:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.ParticleTileModule",toString:o}})._hx_name="Animated",R.__params__=["module"],R),Static:((R=function(e){return{_hx_index:1,module:e,__enum__:"hacksaw.core.utils.ParticleTileModule",toString:o}})._hx_name="Static",R.__params__=["module"],R),StaticGroup:((R=function(e){return{_hx_index:2,module:e,__enum__:"hacksaw.core.utils.ParticleTileModule",toString:o}})._hx_name="StaticGroup",R.__params__=["module"],R)}),uc=(oc.__constructs__=[oc.Animated,oc.Static,oc.StaticGroup],oc.__empty_constructs__=[],fe["hacksaw.core.utils.VelocityModule"]={__ename__:!0,__constructs__:null,InitialSpeed:((R=function(e){return{_hx_index:0,module:e,__enum__:"hacksaw.core.utils.VelocityModule",toString:o}})._hx_name="InitialSpeed",R.__params__=["module"],R),SpeedByLife:((R=function(e){return{_hx_index:1,module:e,__enum__:"hacksaw.core.utils.VelocityModule",toString:o}})._hx_name="SpeedByLife",R.__params__=["module"],R),SpherizeVelocity:((R=function(e){return{_hx_index:2,module:e,__enum__:"hacksaw.core.utils.VelocityModule",toString:o}})._hx_name="SpherizeVelocity",R.__params__=["module"],R),RandomizeVelocity:((R=function(e){return{_hx_index:3,module:e,__enum__:"hacksaw.core.utils.VelocityModule",toString:o}})._hx_name="RandomizeVelocity",R.__params__=["module"],R),InheritParentVelocity:((R=function(e){return{_hx_index:4,module:e,__enum__:"hacksaw.core.utils.VelocityModule",toString:o}})._hx_name="InheritParentVelocity",R.__params__=["module"],R)}),hc=(uc.__constructs__=[uc.InitialSpeed,uc.SpeedByLife,uc.SpherizeVelocity,uc.RandomizeVelocity,uc.InheritParentVelocity],uc.__empty_constructs__=[],(i["hacksaw.core.utils.RotationUtils"]=Kl).__name__="hacksaw.core.utils.RotationUtils",Kl.getSymmetryDirections=function(e,t){var n=Kl.rotationToRadians(e);if(null==n)return[];if(null==t)return[n];switch(t._hx_index){case 0:return[n];case 1:return[n,(Math.PI+n)%(2*Math.PI)];case 2:for(var i=[n,.5*Math.PI+n],s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=(Math.PI+i[r])%(2*Math.PI)}return i.concat(s)}},Kl.rotationToRadians=function(e){if(null==e)return null;switch(e._hx_index){case 0:var t,n,i=e.counterClockwise;switch(e.val._hx_index){case 0:t=1.5*Math.PI;break;case 1:t=1.75*Math.PI;break;case 2:t=0;break;case 3:t=.25*Math.PI;break;case 4:t=.5*Math.PI;break;case 5:t=.75*Math.PI;break;case 6:t=Math.PI;break;case 7:t=1.25*Math.PI}return i?0<=(n=((i=Kl.doublePi)-t)%i)?n:n+i:-t;case 1:return 3.141592653589793*e.val/180;case 2:return e.val}},(i["hacksaw.core.utils.ScaleUtils"]=Jl).__name__="hacksaw.core.utils.ScaleUtils",Jl.scale=null,function(e){this._onCompleteCallbacks=[],this._clearFunctionsOnStop=!0,this._runUntilResolved=!1,this._timeUntilNextEvent=0,this._loop=!1,this._running=!1,this._index=0,this._funcs=[],this._autoupdate=null==e||e}),cc=((i["hacksaw.core.utils.Sequencer"]=hc).__name__="hacksaw.core.utils.Sequencer",hc.prototype={add:function(e){this._funcs.push(e)},run:function(t,n,i,s){null==s&&(s=!0),null==i&&(i=!0),null==t&&(t=!1);var a=this,e=rt.irreversible(function(e){a._loop=t,a._clearFunctionsOnStop=s,a._completeIfLoop=i,a._running=!0,null==a._index&&(a._index=0),a._autoProgressDelay=1e3*n|0,Re.gt(n,0)&&(a._autoupdate?a._timer=pc.interval(function(){a.next()},1e3*n|0):a._timeUntilNextEvent=n),a.onComplete(function(){e(null)}),a.next()});return e.eager(),e},update:function(e){0<this._timeUntilNextEvent&&(this._timeUntilNextEvent-=e,this._timeUntilNextEvent<=0)&&(this.next(),this._running)&&(this._timeUntilNextEvent=this._autoProgressDelay/1e3)},next:function(){if(this._running){if(this._index==this._funcs.length){if(!this._loop)return this.stop(),!0;this._completeIfLoop&&this.triggerOnCompleteCallbacks(),this._index=0}var e;this._running&&(e=this._funcs[this._index],this._index++,null!=e)&&e()}else if(this._runUntilResolved){if(this._index==this._funcs.length)return this.stop(),!0;this._index++}return!1},stop:function(){null!=this._timer&&pc.stopInterval(this._timer),this._timeUntilNextEvent=0,this._running=!1,this._index=null,this._loop=!1,this.triggerOnCompleteCallbacks(),this._clearFunctionsOnStop&&(this._funcs=[]),this._onCompleteCallbacks=[],this._runUntilResolved=!1},cancel:function(){this.set_loop(!1),this._running=!1},onComplete:function(e){this._onCompleteCallbacks.push(e)},destroy:function(){this.stop(),this._funcs=null},triggerOnCompleteCallbacks:function(){for(;0!=this._onCompleteCallbacks.length;)this._onCompleteCallbacks.shift()()},set_loop:function(e){return this._loop=e},__class__:hc,__properties__:{set_loop:"set_loop"}},(i["hacksaw.core.utils.ServerActionsUtils"]=$l).__name__="hacksaw.core.utils.ServerActionsUtils",$l.getTypedActions=function(e,t){for(var n=Lh.__constructs__,i=new Array(n.length),s=0,a=n.length;s<a;)i[c=s++]=n[c]._hx_name;for(var l=new Array(i.length),s=0,a=i.length;s<a;)l[c=s++]=i[c].toLowerCase();for(n=t.__constructs__,i=new Array(n.length),s=0,a=n.length;s<a;)i[c=s++]=n[c]._hx_name;for(var r=new Array(i.length),s=0,a=i.length;s<a;)r[c=s++]=i[c].toLowerCase();for(s=[],a=0;a<l.length;){var o=l[a];++a,-1==r.indexOf(o)&&s.push(o)}for(var i=new Array(e.length),a=0,u=e.length;a<u;){var h=e[c=a++];i[c]={action:h,isStandard:-1!=s.indexOf(h.at.toLowerCase())}}for(l=new Array(i.length),s=0,a=i.length;s<a;){var c,_=i[c=s++],d=_.action;_=_.isStandard?(_=d.at,U.createEnum(Lh,Jn.substr(_,0,1).toUpperCase()+Jn.substr(_,1,null),[d.data])):(_=d.at,Lh.GameSpecificAction(U.createEnum(t,Jn.substr(_,0,1).toUpperCase()+Jn.substr(_,1,null),[d.data]))),l[c]=_}return l},function(){}),_c=((i["hacksaw.core.utils.TextUtils"]=cc).__name__="hacksaw.core.utils.TextUtils",cc.scene=null,cc.toSDFTile=function(e,t){cc.scene=null==cc.scene?new kr:cc.scene;var n=t.style.letterSpacing;null!=n&&e.set_letterSpacing(n),null!=(n=t.style.lineSpacing)&&e.set_lineSpacing(n),null!=(n=t.style.spaceWidth)&&((l=null==(l=(r=e.font).glyphs.h[32])&&null==(l=r.charset.resolveChar(32,r.glyphs))?r.defaultChar:l).width=n),null!=(n=t.style.textureMargins)&&(e.set_xMarg(n.x),e.set_yMarg(n.y));null!=(n=t.style.wordWrap)&&e.set_wordWrap(n);var i,s=0,a=(null!=t.style.outlineColor&&(s=t.style.outlineWidth,null!=t.style.outlineColor2)&&(s+=t.style.outlineWidth2,null!=t.style.outlineColor3)&&(s+=t.style.outlineWidth3),t.align=null==t.align?Mr.Center:t.align,e.set_textAlign(t.align),e.set_textColor(t.style.color),e.set_wordWrap(t.wordWrap),null!=t.maxWidth&&(t.multiline&&e.set_maxWidth(t.maxWidth),c=t.maxWidth/e.get_textWidth(),l=t.maxWidth/e.calcTextWidth(e.text),(l=0|Math.min(e._origSize,e._origSize*l|0))!=e._size&&(e.font.resizeTo(l),e._size=l),_=(r=e.getBounds()).xMax-r.xMin,r=e.getBounds(),e.currSize={w:_,h:r.yMax-r.yMin},null!=(n=t.style.letterSpacing))&&e.set_letterSpacing(n*c),cc.scene.addChild(e),cc.scene.syncOnly(0),e.getBounds()),l=null!=t.maxWidth?0|t.maxWidth:Math.ceil(e.get_textWidth()),r=Math.ceil(a.yMax-a.yMin+2*s),o=Math.ceil(e.get_textWidth()+2*s),u=null!=t.dimensions?t.dimensions.x:l+(2*e.xMarg|0),h=0|(null==(n=t.maxHeight)?null!=t.dimensions?t.dimensions.y:Math.ceil(r):n),c=h<r?h/r:1,_=(h<r&&null!=e.maxWidth&&e.set_maxWidth(e.maxWidth/c),e.posChanged=!0,e.scaleX=c,e.posChanged=!0,e.scaleY=c,cc.scene.syncOnly(0),a=e.getBounds(),e.letterSpacing),d=null!=_?_:0,p=.5*e.xMarg;switch(t.align._hx_index){case 0:i=s;break;case 1:i=d+u-s;break;case 2:i=.5*(d+u);break;case 3:i=d+u-(a.xMax-a.xMin);break;case 4:i=.5*(d+u-(a.xMax-a.xMin))}if(e.posChanged=!0,e.x=p+i,t.multiline)switch(t.heightExpand){case"both":p=.5*(h-(a.yMax-a.yMin));break;case"down":p=s;break;case"up":p=h-(a.yMax-a.yMin)-s}else p=0;e.posChanged=!0,e.y=p;l=0==(u&u-1)?u:(p=u,--p,p=(p=(p=(p=(p|=p>>1)|p>>2)|p>>4)|p>>8)|p>>16,++p),n=0==(h&h-1)?h:(p=(p=h)-1,p=(p=(p=(p=(p|=p>>1)|p>>2)|p>>4)|p>>8)|p>>16,++p),c=new _o(l,n,[ro.Target],C.RGBA),c.preventAutoDispose(),c.depthBuffer=new _o(l,n,null,C.Depth24Stencil8),e.smooth=!0,e.posChanged=!0,e.x+=.5*(l-u),e.posChanged=!0,e.y+=.5*(n-h),e.removeShader(e.sdfShader),e.sdfShader=null,_=Vr.CURRENT,c.clear(0,0),_.pushTarget(c),_.pushDepth(c.depthBuffer),_.clear(0,0),_.popTarget(),cc.scene.get_renderer().pass.depth(!0,to.Greater),e.blendMode=wr.None,t=new pl;return e.addShader(t),cc.scene.drawTo(c),e.removeShader(t),cc.scene.get_renderer().pass.depth(!0,to.Always),e.blendMode=wr.Max,e.addShader(new _l(new q(0,0,0,1))),cc.scene.drawTo(c),cc.scene.removeChild(e),c.depthBuffer.dispose(),c.preventAutoDispose(),{tile:Ir.fromTexture(c),textFieldW:u,textFieldH:h,textH:r,textW:o}},function(e,t,n,i,s,a,l,r,o,u,h,c){this.wordWrap=!0,this.flipY=!1,this.textureColor=null,this.forcePOT=!1,this.background=null,this.multiline=null,this.dimensions=null,this.align=null,this.heightExpand="both",this.maxHeight=null,this.maxWidth=null,this.style=e,null!=t&&(this.maxWidth=t),null!=n&&(this.maxHeight=n),null!=i&&(this.heightExpand=i),null!=s&&(this.align=s),null!=a&&(this.dimensions=a),null!=l&&(this.multiline=l),null!=r&&(this.background=r),null!=o&&(this.forcePOT=o),null!=u&&(this.textureColor=u),null!=h&&(this.flipY=h),null!=c&&(this.wordWrap=c)}),dc=((i["hacksaw.core.utils.ApplyStyleConfig"]=_c).__name__="hacksaw.core.utils.ApplyStyleConfig",_c.prototype={__class__:_c},function(){}),pc=((i["hacksaw.core.utils.TextureUtils"]=dc).__name__="hacksaw.core.utils.TextureUtils",dc.ensureMipmap=function(e,t){null==t&&(t=!1),0==(16&e.flags)&&0==(4&e.flags)&&(Vr.CURRENT.driver.generateMipMaps(e),e.flags|=4,e.set_mipMap(io.Linear),e.set_filter(so.Linear))},function(){}),mc=((i["hacksaw.core.utils.TimerUtils"]=pc).__name__="hacksaw.core.utils.TimerUtils",pc.delay=function(e,t,n){null==n&&(n="none"),null==t&&(t=0),pc._delayId++;var i=pc._delayId,s=SA.delay(function(){pc._delays.remove(i),e()},t);return pc._delays.h[i]={timer:s,start:Jn.now()/1e3,remaining:.001*t,duration:.001*t,func:e,id:i,group:n},i},pc.interval=function(e,t,n){null==n&&(n="none"),null==t&&(t=0),pc._intervalId++;var i=new SA(t),s={timer:i,start:Jn.now()/1e3,remaining:.001*t,duration:.001*t,func:e,id:pc._intervalId,group:n};return i.run=function(){s.start=Jn.now()/1e3,e()},pc._intervals.h[pc._intervalId]=s,pc._intervalId},pc.stopInterval=function(e){var t=pc._intervals.h[e];null!=t&&(t.timer.stop(),pc._intervals.remove(e))},(i["hacksaw.core.utils.WinUtils"]=er).__name__="hacksaw.core.utils.WinUtils",er.id=function(e){var t,n=null!=e.winMultipliers?il.reduce(e.winMultipliers,function(e,t){return t+(""!=e?"_"+e:"")},""):"0",i=e.paylineIds,i=null==i||0==i.length?"":il.reduce(e.paylineIds,function(e,t){return""+t+e},"_");return t=null==e.pos?"null":(t=e.pos).x+"_"+t.y,e.symbol+"_"+e.mask+"_"+e.count+"_"+t+"_"+e.winAmount+"_"+n+i},(i["hacksaw.games.lecowboy.AnimationData"]=tr).__name__="hacksaw.games.lecowboy.AnimationData",tr.prototype={__class__:tr},(i["hacksaw.games.lecowboy.App"]=nr).__name__="hacksaw.games.lecowboy.App",nr.__super__=Ms,nr.prototype=e(Ms.prototype,{init:function(){var t=this;Ms.prototype.init.call(this),this.get_baseEntity().add(new Ls),this.get_baseEntity().add(this._slotModel),this._gameModel.gameData=new mc,this._gameModel.styleData={text:new Ac,images:new fc,animations:new tr,gradients:new gc},this.appModel.resizeSignal.connect(function(e){t._size=e})},setupFSM:function(){Ms.prototype.setupFSM.call(this),this._fsm.add(c_,[m_]),this._fsm.add(m_,[h_]),this._fsm.add(h_,[p_]),this._fsm.add(p_,[d_,h_]),this._fsm.add(d_,[h_,__,a_]),this._fsm.add(a_,[u_]),this._fsm.add(u_,[o_]),this._fsm.add(r_,[o_]),this._fsm.add(o_,[u_,r_,l_]),this._fsm.add(l_,[h_]),this._fsm.add(__,[d_])},mapInjections:function(){Ms.prototype.mapInjections.call(this),this._injector.mapToValue(Cc,this._gameModel),this._injector.mapToValue(Qd,this._slotModel),this._injector.mapToValue(vc,this._coinValueModel)},subscribe:function(){var t=this;this._casinoChannel.subscribe("startGame",function(e){t._gameModel.gameInfo=e.gameInfoData,t._gameRtp=e.gameInfoData.rtp.toFixed(2),t._fsmController.goto(c_,function(){return!t.appModel.frozen})}),this._casinoChannel.subscribe("initGame",function(e){t._gameModel.gameId=e.gameId,t._language=e.language}),Ms.prototype.subscribe.call(this)},setup:function(){this.preloaderBackplateTile=n0.get_loader().loadCache("preloader/background.jpg",F0).toTile(),this.preloaderTile=n0.get_loader().loadCache("preloader/logo.png",F0).toTile(),Ms.prototype.setup.call(this)},getFeatureBuyItems:function(){return[new Di("mod_bonus","bonushunt_featurespins_uc",null,null,"gameinfoassets/bonushunt.png","bonushunt_featurespins_desc","high",null,null,null,null),new Di("mod_feature","wild_west_featurespins_uc",null,null,"gameinfoassets/wild_west.png","wild_west_featurespins_desc","high",null,!0,null,null),new Di("bonus","high_noon_bonus_uc",null,null,"gameinfoassets/bonus_1_buy.png","high_noon_bonus_desc","medium",null,null,null,null),new Di("bonus_2","trickery_bonus_uc",null,null,"gameinfoassets/bonus_2_buy.png","trickery_bonus_desc","high",null,null,null,null)]},__class__:nr}),function(){}),gc=((i["hacksaw.games.lecowboy.GameData"]=mc).__name__="hacksaw.games.lecowboy.GameData",mc.prototype={__class__:mc},(i["hacksaw.games.lecowboy.GameInfo"]=ir).__name__="hacksaw.games.lecowboy.GameInfo",ir.prototype={__class__:ir},function(){}),fc=((i["hacksaw.games.lecowboy.GradientData"]=gc).__name__="hacksaw.games.lecowboy.GradientData",gc.prototype={__class__:gc},function(){}),Ac=((i["hacksaw.games.lecowboy.ImageData"]=fc).__name__="hacksaw.games.lecowboy.ImageData",fc.prototype={__class__:fc},(i["hacksaw.games.lecowboy.Main"]=sr).__name__="hacksaw.games.lecowboy.Main",sr.main=function(){n0.set_loader(new N0(new x0(kA.run("oy9:preloaderoy14:background.jpgty8:logo.pngtgy15:gameconfig.jsontg")))),new r0(window.document.getElementById("webgl")).setCurrent(),new nr({charset:",.0123456789-=+xX/:()%$zABCDEFGHIJKLMNOPQRSTUVYZabcdefghijklmnopqrstuvyWw[]!'? ; ",soundConfigs:{events:JSON.parse('{\n   "events": [\n      {\n         "id": "updateBetLevel",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "spur_whistle",\n               "params": {\n                  "volume": 0.4,\n                  "pitch": {\n                     "arg": "index",\n                     "source": {\n                        "min": 0,\n                        "max": {\n                           "arg": "max"\n                        }\n                     },\n                     "target": {\n                        "min": 0,\n                        "max": 1200\n                     }\n                  },\n                  "instance": {\n                     "arg": "index"\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "reelStopped",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "symDrop",\n               "params": {\n                  "pitch": [\n                     -300,\n                     -250\n                  ],\n                  "volume": 0.2,\n                  "maxrate": 75,\n                  "pan": {\n                     "arg": "index",\n                     "source": {\n                        "min": 0,\n                        "max": 4\n                     },\n                     "target": {\n                        "min": -0.4,\n                        "max": 0.4\n                     }\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "reelCollapseEnd",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "symDrop",\n               "params": {\n                  "maxrate": 50,\n                  "volume": {\n                     "arg": "travel",\n                     "source": {\n                        "min": 0,\n                        "max": 4\n                     },\n                     "target": {\n                        "min": 0.2,\n                        "max": 0.2\n                     }\n                  },\n                  "pan": {\n                     "arg": "col",\n                     "source": {\n                        "min": 0,\n                        "max": 4\n                     },\n                     "target": {\n                        "min": -0.8,\n                        "max": 0.8\n                     }\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "dropGridRemove",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "dropgrid_out",\n               "params": {\n                  "volume": 0.2\n               }\n            }\n         ]\n      },\n      {\n         "id": "dropGridReplace",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "dropgrid_in",\n               "params": {\n                  "volume": 0.2\n               }\n            }\n         ]\n      },\n      {\n         "id": "reelCollapseStart",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "dropswoosh_in",\n               "params": {\n                  "volume": 0.2,\n                  "pan": {\n                     "arg": "index",\n                     "source": {\n                        "min": 0,\n                        "max": 4\n                     },\n                     "target": {\n                        "min": -0.8,\n                        "max": 0.8\n                     }\n                  },\n                  "delay": {\n                     "arg": "delay"\n                  },\n                  "maxrate": 66\n               }\n            }\n         ]\n      },\n      {\n         "id": "displayWinText",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "winFactor",\n                  "mapRange": [\n                     {\n                        "range": [\n                           0,\n                           49.99\n                        ],\n                        "target": "win_end_bet_low"\n                     },\n                     {\n                        "range": [\n                           50.00,\n                           99.99\n                        ],\n                        "target": "win_end_bet_high"\n                     },\n                     {\n                        "range": [\n                           100.00,\n                           99999\n                        ],\n                        "target": "win_end_bet_over"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 150\n               }\n            }\n         ]\n      },\n      {\n         "id": "closeBonusSplash",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "enter",\n                  "map": [\n                     {\n                        "source": true,\n                        "target": "none"\n                     },\n                     {\n                        "source": false,\n                        "target": "bush_hawk_transit"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6\n               }\n            }\n         ]\n      },\n      {\n         "id": "totalWinReveal",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "winFactor",\n                  "mapRange": [\n                     {\n                        "range": [\n                           0.0,\n                           199.99\n                        ],\n                        "target": "bugle_wet_1"\n                     },\n                     {\n                        "range": [\n                           200.0,\n                           99999999999\n                        ],\n                        "target": "bugle_wet_1"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6\n               }\n            },\n            {\n               "type": "playSound",\n               "id": "arrow",\n               "params": {\n                  "volume": 0.7\n               }\n            }\n         ]\n      },\n      {\n         "id": "enterWinTier",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "level",\n                  "mapRange": [\n                     {\n                        "range": [\n                           0,\n                           2\n                        ],\n                        "target": "none"\n                     },\n                     {\n                        "range": [\n                           3,\n                           3\n                        ],\n                        "target": "none"\n                     },\n                     {\n                        "range": [\n                           4,\n                           4\n                        ],\n                        "target": "wintier_1"\n                     },\n                     {\n                        "range": [\n                           5,\n                           5\n                        ],\n                        "target": "wintier_2"\n                     },\n                     {\n                        "range": [\n                           6,\n                           6\n                        ],\n                        "target": "wintier_3"\n                     },\n                     {\n                        "range": [\n                           7,\n                           999\n                        ],\n                        "target": "wintier_4"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 1.0\n               }\n            },\n            {\n               "type": "playPool",\n               "id": {\n                  "arg": "level",\n                  "mapRange": [\n                     {\n                        "range": [\n                           4,\n                           4\n                        ],\n                        "target": "gunshots"\n                     },\n                     {\n                        "range": [\n                           5,\n                           5\n                        ],\n                        "target": "gunshots"\n                     },\n                     {\n                        "range": [\n                           6,\n                           6\n                        ],\n                        "target": "gunshots"\n                     },\n                     {\n                        "range": [\n                           7,\n                           999\n                        ],\n                        "target": "gunshots"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6\n               }\n            }\n         ]\n      },\n      {\n         "id": "scatterStopped",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "id",\n                  "mapRange": [\n                     {\n                        "range": [\n                           0,\n                           0\n                        ],\n                        "target": "nail_board_shimmer"\n                     },\n                     {\n                        "range": [\n                           11,\n                           11\n                        ],\n                        "target": {\n                           "arg": "scatterLength",\n                           "map": [\n                              {\n                                 "source": 1,\n                                 "target": "bass_hit_1"\n                              },\n                              {\n                                 "source": 2,\n                                 "target": "bass_hit_2"\n                              },\n                              {\n                                 "source": 3,\n                                 "target": "bass_hit_3"\n                              },\n                              {\n                                 "source": 4,\n                                 "target": "bass_hit_4"\n                              },\n                              {\n                                 "source": 5,\n                                 "target": "bass_hit_5"\n                              }\n                           ]\n                        }\n                     },\n                     {\n                        "range": [\n                           13,\n                           999\n                        ],\n                        "target": "none"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.5,\n                  "maxrate": 50\n               }\n            }\n         ]\n      },\n      {\n         "id": "scatterComplete",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "id",\n                  "mapRange": [\n                     {\n                        "range": [\n                           0,\n                           1\n                        ],\n                        "target": "none"\n                     },\n                     {\n                        "range": [\n                           11,\n                           11\n                        ],\n                        "target": {\n                           "arg": "totalScatters",\n                           "map": [\n                              {\n                                 "source": 3,\n                                 "target": "flute_vignette_whip_1"\n                              },\n                              {\n                                 "source": 4,\n                                 "target": "flute_vignette_whip_2"\n                              },\n                              {\n                                 "source": 5,\n                                 "target": "flute_vignette_whip_3"\n                              }\n                           ]\n                        }\n                     },\n                     {\n                        "range": [\n                           13,\n                           999\n                        ],\n                        "target": "none"\n                     }\n                  ]\n               },\n               "params": {\n                  "maxrate": 100,\n                  "volume": 0.6,\n                  "delay": 0.05\n               }\n            }\n         ]\n      },\n      {\n         "id": "fsWin",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "gameMode",\n                  "map": [\n                     {\n                        "source": "bonus",\n                        "target": "western_bonus_1"\n                     },\n                     {\n                        "source": "bonus_2",\n                        "target": "western_bonus_2"\n                     },\n                     {\n                        "source": "epic",\n                        "target": "western_bonus_3"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.7,\n                  "maxrate": 100\n               }\n            }\n         ]\n      },\n      {\n         "id": "betPressed",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "spinclicks",\n               "params": {\n                  "volume": 0.3\n               }\n            }\n         ]\n      },\n      {\n         "id": "win",\n         "actions": [\n            {\n               "type": "playSequence",\n               "id": "win",\n               "params": {\n                  "pattern": {\n                     "arg": "tier",\n                     "mapRange": [\n                        {\n                           "range": [\n                              0,\n                              2\n                           ],\n                           "target": "none"\n                        },\n                        {\n                           "range": [\n                              3,\n                              99999999\n                           ],\n                           "target": null\n                        }\n                     ]\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "winCountComplete",\n         "actions": [\n            {\n               "type": "playSequence",\n               "id": "win",\n               "params": {\n                  "pattern": {\n                     "arg": "tier",\n                     "mapRange": [\n                        {\n                           "range": [\n                              0,\n                              2\n                           ],\n                           "target": "none"\n                        },\n                        {\n                           "range": [\n                              3,\n                              99999999\n                           ],\n                           "target": "end"\n                        }\n                     ]\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "splashClicked",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "bush_hawk_transit",\n               "params": {\n                  "volume": 0.6\n               }\n            },\n            {\n               "type": "playSound",\n               "id": "lecowboy_intro",\n               "params": {\n                  "volume": 0.7\n               }\n            }\n         ]\n      },\n      {\n         "id": "gameStarted",\n         "actions": [\n            {\n               "type": "playSequence",\n               "id": "basegame_music",\n               "params": {\n                  "delay": 0.1\n               }\n            },\n            {\n               "type": "playSound",\n               "id": "desert_ambience",\n               "params": {\n                  "volume": 0.5,\n                  "loop": true\n               }\n            }\n         ]\n      },\n      {\n         "id": "enterMode",\n         "actions": [\n            {\n               "type": "playEnvelope",\n               "id": "fadeMusic",\n               "params": {\n                  "param": "volume",\n                  "targetType": "bus",\n                  "targets": {\n                     "arg": "gameMode",\n                     "map": [\n                        {\n                           "source": "base",\n                           "target": [\n                              "feature_music"\n                           ]\n                        },\n                        {\n                           "source": "fs",\n                           "target": [\n                              "base_music"\n                           ]\n                        },\n                        {\n                           "source": "fs_2",\n                           "target": [\n                              "base_music"\n                           ]\n                        },\n                        {\n                           "source": "epic",\n                           "target": [\n                              "base_music"\n                           ]\n                        }\n                     ]\n                  },\n                  "points": [\n                     {\n                        "pos": 0.0,\n                        "val": 1.0\n                     },\n                     {\n                        "pos": 2.0,\n                        "val": 0.0\n                     }\n                  ]\n               }\n            },\n            {\n               "type": "playSequence",\n               "id": {\n                  "arg": "gameMode",\n                  "map": [\n                     {\n                        "source": "base",\n                        "target": "basegame_music",\n                        "params": {\n                           "pattern": "level_0"\n                        }\n                     },\n                     {\n                        "source": "fs",\n                        "target": "bonus_music",\n                        "params": {\n                           "pattern": "level_0"\n                        }\n                     },\n                     {\n                        "source": "fs_2",\n                        "target": "bonus_2_music",\n                        "params": {\n                           "pattern": "level_0"\n                        }\n                     },\n                     {\n                        "source": "epic",\n                        "target": "epic_music",\n                        "params": {\n                           "pattern": "level_0"\n                        }\n                     }\n                  ]\n               },\n               "params": {\n                  "start": "1.0.0"\n               }\n            },\n            {\n               "type": "setGroupVolume",\n               "id": {\n                  "arg": "gameMode",\n                  "map": [\n                     {\n                        "source": "base",\n                        "target": "base_music"\n                     },\n                     {\n                        "source": "fs",\n                        "target": "feature_music"\n                     },\n                     {\n                        "source": "fs_2",\n                        "target": "feature_music"\n                     },\n                     {\n                        "source": "epic",\n                        "target": "feature_music"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 1.0\n               }\n            }\n         ]\n      },\n      {\n         "id": "excitement_base",\n         "actions": [\n            {\n               "type": "playSequence",\n               "id": "basegame_music",\n               "params": {\n                  "pattern": {\n                     "arg": "excitement",\n                     "mapRange": [\n                        {\n                           "range": [\n                              0.0,\n                              0.99\n                           ],\n                           "target": "level_0"\n                        },\n                        {\n                           "range": [\n                              1.00,\n                              9.99\n                           ],\n                           "target": "level_1"\n                        },\n                        {\n                           "range": [\n                              10.00,\n                              99.99\n                           ],\n                           "target": "level_2"\n                        },\n                        {\n                           "range": [\n                              100.00,\n                              99999999999999999.99\n                           ],\n                           "target": "level_3"\n                        }\n                     ]\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "excitement_fs",\n         "actions": [\n            {\n               "type": "playSequence",\n               "id": "bonus_music",\n               "params": {\n                  "pattern": {\n                     "arg": "excitement",\n                     "mapRange": [\n                        {\n                           "range": [\n                              0.0,\n                              0.99\n                           ],\n                           "target": "level_0"\n                        },\n                        {\n                           "range": [\n                              1.00,\n                              9.99\n                           ],\n                           "target": "level_1"\n                        },\n                        {\n                           "range": [\n                              10.00,\n                              99.99\n                           ],\n                           "target": "level_2"\n                        },\n                        {\n                           "range": [\n                              100.00,\n                              99999999999999999.99\n                           ],\n                           "target": "level_3"\n                        }\n                     ]\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "excitement_fs_2",\n         "actions": [\n            {\n               "type": "playSequence",\n               "id": "bonus_2_music",\n               "params": {\n                  "pattern": {\n                     "arg": "excitement",\n                     "mapRange": [\n                        {\n                           "range": [\n                              0.0,\n                              0.99\n                           ],\n                           "target": "level_0"\n                        },\n                        {\n                           "range": [\n                              1.00,\n                              9.99\n                           ],\n                           "target": "level_1"\n                        },\n                        {\n                           "range": [\n                              10.00,\n                              149.99\n                           ],\n                           "target": "level_2"\n                        },\n                        {\n                           "range": [\n                              150.00,\n                              99999999999999999.99\n                           ],\n                           "target": "level_3"\n                        }\n                     ]\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "excitement_fs_3",\n         "actions": [\n            {\n               "type": "playSequence",\n               "id": "epic_music",\n               "params": {\n                  "pattern": {\n                     "arg": "excitement",\n                     "mapRange": [\n                        {\n                           "range": [\n                              0.0,\n                              0.99\n                           ],\n                           "target": "level_0"\n                        },\n                        {\n                           "range": [\n                              1.00,\n                              9.99\n                           ],\n                           "target": "level_1"\n                        },\n                        {\n                           "range": [\n                              10.00,\n                              99.99\n                           ],\n                           "target": "level_2"\n                        },\n                        {\n                           "range": [\n                              100.00,\n                              99999999999999999.99\n                           ],\n                           "target": "level_3"\n                        }\n                     ]\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "symbolRemove",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "poof",\n               "params": {\n                  "pitch": [\n                     100,\n                     -100\n                  ],\n                  "volume": 0.3,\n                  "maxrate": 30\n               }\n            }\n         ]\n      },\n      {\n         "id": "uiElementPressed",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "item",\n                  "map": [\n                     {\n                        "source": "featureBuyConfirmButton",\n                        "target": "holster_gun"\n                     },\n                     {\n                        "source": "autoplayBtn",\n                        "target": "click_open"\n                     },\n                     {\n                        "source": "autoplayAdvancedMenuToggle",\n                        "target": "click_open"\n                     },\n                     {\n                        "source": "mainMenuToggle",\n                        "target": "click_sweep"\n                     },\n                     {\n                        "source": "featureBuyToggle",\n                        "target": "plastic_click"\n                     },\n                     {\n                        "source": "featureBuyClose",\n                        "target": "plastic_click"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.4,\n                  "maxrate": 50\n               }\n            }\n         ]\n      },\n      {\n         "id": "fsAttentionStart",\n         "actions": [\n            {\n               "type": "addFilter",\n               "id": "musicFilter",\n               "params": {\n                  "targetType": "bus",\n                  "target": "music",\n                  "type": "lowpass",\n                  "frequency": 20000\n               }\n            },\n            {\n               "type": "playEnvelope",\n               "id": "master",\n               "params": {\n                  "param": "filterFrequency",\n                  "targetType": "bus",\n                  "targets": [\n                     "music"\n                  ],\n                  "points": [\n                     {\n                        "pos": 0.7,\n                        "val": 150\n                     }\n                  ]\n               }\n            },\n            {\n               "type": "playSound",\n               "id": "drumroll",\n               "params": {\n                  "volume": 0.9,\n                  "loop": true\n               }\n            },\n            {\n               "type": "playSound",\n               "id": "vibraslap",\n               "params": {\n                  "volume": 0.7\n               }\n            }\n         ]\n      },\n      {\n         "id": "fsAttentionEnd",\n         "actions": [\n            {\n               "type": "playEnvelope",\n               "id": "master",\n               "params": {\n                  "param": "filterFrequency",\n                  "targetType": "bus",\n                  "targets": [\n                     "music"\n                  ],\n                  "points": [\n                     {\n                        "pos": 0.3,\n                        "val": 20000\n                     }\n                  ]\n               }\n            },\n            {\n               "type": "stopSound",\n               "id": "drumroll"\n            }\n         ]\n      },\n      {\n         "id": "stopBeingAngry",\n         "actions": [\n            {\n               "type": "stopSound",\n               "id": "fuming_1",\n               "instance": "fuming"\n            },\n            {\n               "type": "stopSound",\n               "id": "fuming_2",\n               "instance": "fuming"\n            },\n            {\n               "type": "stopSound",\n               "id": "fuming_3",\n               "instance": "fuming"\n            },\n            {\n               "type": "stopSound",\n               "id": "infuriated_1",\n               "instance": "fuming"\n            },\n            {\n               "type": "stopSound",\n               "id": "infuriated_2",\n               "instance": "fuming"\n            },\n            {\n               "type": "stopSound",\n               "id": "infuriated_3",\n               "instance": "fuming"\n            }\n         ]\n      },\n      {\n         "id": "spawnReloader",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "ping_clicks_reload",\n               "params": {\n                  "volume": 0.7\n               }\n            }\n         ]\n      },\n      {\n         "id": "loadRevolver",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "revolverFills",\n               "params": {\n                  "volume": 0.7,\n                  "maxrate": 150\n               }\n            }\n         ]\n      },\n      {\n         "id": "convertWild",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "heavy_poof",\n               "params": {\n                  "volume": 0.7,\n                  "maxrate": 150\n               }\n            }\n         ]\n      },\n      {\n         "id": "smokeyShoot",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "gunshots",\n               "params": {\n                  "volume": 0.4\n               }\n            }\n         ]\n      },\n      {\n         "id": "activateReload",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "shotgun_cock",\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 150\n               }\n            }\n         ]\n      },\n      {\n         "id": "spawnClover",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "isEpic",\n                  "map": [\n                     {\n                        "source": true,\n                        "target": "success_2"\n                     },\n                     {\n                        "source": false,\n                        "target": "success_1"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 150,\n                  "delay": {\n                     "arg": "delay"\n                  }\n               }\n            }\n         ]\n      },\n      {\n         "id": "spawnPot",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "bag_zipper_ding",\n               "params": {\n                  "volume": 0.7,\n                  "maxrate": 150\n               }\n            }\n         ]\n      },\n      {\n         "id": "smokeyAnimation",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": {\n                  "arg": "animationName",\n                  "map": [\n                     {\n                        "source": "shoot",\n                        "target": "gunshots"\n                     },\n                     {\n                        "source": "shoot_2",\n                        "target": "gunshots"\n                     },\n                     {\n                        "source": "shoot_3",\n                        "target": "gunshots"\n                     },\n                     {\n                        "source": "shoot_4",\n                        "target": "gunshots"\n                     },\n                     {\n                        "source": "shoot_5",\n                        "target": "gunshots"\n                     },\n                     {\n                        "source": "epic_shoot",\n                        "target": "gunshots"\n                     },\n                     {\n                        "source": "epic_shoot_2",\n                        "target": "gunshots"\n                     },\n                     {\n                        "source": "stomp",\n                        "target": "fuming"\n                     },\n                     {\n                        "source": "stomp_swear",\n                        "target": "fuming"\n                     },\n                     {\n                        "source": "react",\n                        "target": "none"\n                     },\n                     {\n                        "source": "small_win",\n                        "target": "delighted"\n                     },\n                     {\n                        "source": "big_win",\n                        "target": "delighted"\n                     },\n                     {\n                        "source": "epic_win",\n                        "target": "raccoonHappy"\n                     },\n                     {\n                        "source": "epic_small_win",\n                        "target": "raccoonHappy"\n                     },\n                     {\n                        "source": "epic_big_win",\n                        "target": "raccoonHappy"\n                     },\n                     {\n                        "source": "epic_epic_win",\n                        "target": "raccoonHappy"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 50\n               }\n            },\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "animationName",\n                  "map": [\n                     {\n                        "source": "scratch_butt",\n                        "target": "scratch"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 50\n               }\n            },\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "animationName",\n                  "map": [\n                     {\n                        "source": "epic_scratch_butt",\n                        "target": "scratch"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 50\n               }\n            },\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "animationName",\n                  "map": [\n                     {\n                        "source": "shoot_fail",\n                        "target": "pistol_boing_whistle"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 50\n               }\n            },\n            {\n               "type": "playPool",\n               "id": {\n                  "arg": "animationName",\n                  "map": [\n                     {\n                        "source": "greets",\n                        "target": "raccoonWelcome"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.6,\n                  "delay": 0.8\n               }\n            }\n         ]\n      },\n      {\n         "id": "revealCoinMultipliers",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "pings",\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 10,\n                  "delay": 0.05\n               }\n            }\n         ]\n      },\n      {\n         "id": "countPotValue",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "count_blip",\n               "params": {\n                  "volume": 0.7,\n                  "maxrate": 40\n               }\n            },\n            {\n               "type": "playSound",\n               "id": "coins_pour",\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 500\n               }\n            }\n         ]\n      },\n      {\n         "id": "bulletIndicatorAdd",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "cork_pop",\n               "params": {\n                  "volume": 0.65,\n                  "maxrate": 10,\n                  "pitch": {\n                     "arg": "currentValue",\n                     "source": {\n                        "min": 2,\n                        "max": 20\n                     },\n                     "target": {\n                        "min": 0,\n                        "max": 1200\n                     }\n                  },\n                  "instance": {\n                     "arg": "currentValue"\n                  }\n               }\n            },\n            {\n               "type": "playSound",\n               "id": "pop_weapon",\n               "params": {\n                  "volume": 0.6,\n                  "maxrate": 100\n               }\n            }\n         ]\n      },\n      {\n         "id": "coinMultiplied",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "isPot",\n                  "map": [\n                     {\n                        "source": true,\n                        "target": {\n                           "arg": "newValue",\n                           "mapRange": [\n                              {\n                                 "range": [\n                                    0,\n                                    9.99\n                                 ],\n                                 "target": "win_end_bet_low"\n                              },\n                              {\n                                 "range": [\n                                    10.00,\n                                    49.99\n                                 ],\n                                 "target": "win_end_bet_over"\n                              },\n                              {\n                                 "range": [\n                                    50.00,\n                                    99999\n                                 ],\n                                 "target": "win_end_bet_high"\n                              }\n                           ]\n                        }\n                     },\n                     {\n                        "source": false,\n                        "target": {\n                           "arg": "isEpic",\n                           "map": [\n                              {\n                                 "source": true,\n                                 "target": "pop_glitter_2"\n                              },\n                              {\n                                 "source": false,\n                                 "target": "pop_glitter_1"\n                              }\n                           ]\n                        }\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 1.0,\n                  "maxrate": 50\n               }\n            }\n         ]\n      },\n      {\n         "id": "multiplierStarted",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": {\n                  "arg": "isEpic",\n                  "map": [\n                     {\n                        "source": true,\n                        "target": "cloverRevealGold"\n                     },\n                     {\n                        "source": false,\n                        "target": "cloverRevealGreen"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.7\n               }\n            }\n         ]\n      },\n      {\n         "id": "clickButton",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "pop_guncock",\n               "params": {\n                  "volume": 0.5\n               }\n            },\n            {\n               "type": "playEnvelope",\n               "id": "master",\n               "params": {\n                  "param": "filterFrequency",\n                  "targetType": "bus",\n                  "targets": [\n                     "music"\n                  ],\n                  "points": [\n                     {\n                        "pos": 0.3,\n                        "val": 20000\n                     }\n                  ]\n               }\n            }\n         ]\n      },\n      {\n         "id": "hoverButton",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "swoosh",\n               "params": {\n                  "volume": 0.4\n               }\n            }\n         ]\n      },\n      {\n         "id": "summarizeCoinWin",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "whirl_1",\n               "params": {\n                  "volume": 1.2\n               }\n            }\n         ]\n      },\n      {\n         "id": "symbolHit",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": {\n                  "arg": "symbolId",\n                  "mapRange": [\n                     {\n                        "range": [\n                           21,\n                           24\n                        ],\n                        "target": "smallCoins"\n                     },\n                     {\n                        "range": [\n                           25,\n                           28\n                        ],\n                        "target": "mediumCoins"\n                     },\n                     {\n                        "range": [\n                           29,\n                           31\n                        ],\n                        "target": "bigCoins"\n                     },\n                     {\n                        "range": [\n                           32,\n                           34\n                        ],\n                        "target": "diamonds"\n                     },\n                     {\n                        "range": [\n                           41,\n                           41\n                        ],\n                        "target": "cloverRevealGold"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.8\n               }\n            },\n            {\n               "type": "playPool",\n               "id": "ricochets",\n               "params": {\n                  "volume": 0.5\n               }\n            },\n            {\n               "type": "playPool",\n               "id": "plinks",\n               "params": {\n                  "volume": 0.45,\n                  "pitch": [\n                     100,\n                     -100\n                  ]\n               }\n            },\n            {\n               "type": "playPool",\n               "id": "ricochets",\n               "params": {\n                  "volume": 0.5\n               }\n            },\n            {\n               "type": "playPool",\n               "id": "plinks",\n               "params": {\n                  "volume": 0.45,\n                  "pitch": [\n                     100,\n                     -100\n                  ]\n               }\n            }\n         ]\n      },\n      {\n         "id": "spawnFortunes",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "coins_swoosh_new",\n               "params": {\n                  "volume": 0.6,\n                  "delay": 0.8\n               }\n            }\n         ]\n      },\n      {\n         "id": "collectCoinStart",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "cartoon_move",\n               "params": {\n                  "volume": 0.44,\n                  "maxrate": 1000\n               }\n            }\n         ]\n      },\n      {\n         "id": "retrigger",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "count",\n                  "map": [\n                     {\n                        "source": 2,\n                        "target": "bugle_cannon_1"\n                     },\n                     {\n                        "source": 4,\n                        "target": "bugle_cannon_2"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.7\n               }\n            }\n         ]\n      },\n      {\n         "id": "collectHighlight",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "pling",\n               "params": {\n                  "volume": 0.7\n               }\n            }\n         ]\n      },\n      {\n         "id": "revealRemoveSym",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "swoosh",\n               "params": {\n                  "volume": 0.32,\n                  "maxrate": 100\n               }\n            }\n         ]\n      },\n      {\n         "id": "upgradeCoin",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": {\n                  "arg": "coinType",\n                  "map": [\n                     {\n                        "source": "bronze",\n                        "target": "smallCoins"\n                     },\n                     {\n                        "source": "silver",\n                        "target": "mediumCoins"\n                     },\n                     {\n                        "source": "gold",\n                        "target": "bigCoins"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 1.0,\n                  "maxrate": 25\n               }\n            },\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "coinType",\n                  "map": [\n                     {\n                        "source": "diamond",\n                        "target": "diamond"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.9,\n                  "maxrate": 25\n               }\n            }\n         ]\n      },\n      {\n         "id": "shootGambleCoin",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "ricochets",\n               "params": {\n                  "volume": 0.5\n               }\n            },\n            {\n               "type": "playPool",\n               "id": "plinks",\n               "params": {\n                  "volume": 0.45,\n                  "pitch": [\n                     100,\n                     -100\n                  ]\n               }\n            }\n         ]\n      },\n      {\n         "id": "flipGambleCoin",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": {\n                  "arg": "type",\n                  "map": [\n                     {\n                        "source": "bronze",\n                        "target": "smallCoins"\n                     },\n                     {\n                        "source": "silver",\n                        "target": "mediumCoins"\n                     },\n                     {\n                        "source": "gold",\n                        "target": "bigCoins"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 1.0,\n                  "maxrate": 25\n               }\n            },\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "type",\n                  "map": [\n                     {\n                        "source": "diamond",\n                        "target": "diamond"\n                     },\n                     {\n                        "source": "fs",\n                        "target": "western_vignette_1"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 1.0,\n                  "maxrate": 25\n               }\n            }\n         ]\n      },\n      {\n         "id": "transitionStarted",\n         "actions": [\n            {\n               "type": "addFilter",\n               "id": "musicFilter",\n               "params": {\n                  "targetType": "bus",\n                  "target": "music",\n                  "type": "lowpass",\n                  "frequency": 20000\n               }\n            },\n            {\n               "type": "playEnvelope",\n               "id": "master",\n               "params": {\n                  "param": "filterFrequency",\n                  "targetType": "bus",\n                  "targets": [\n                     "music"\n                  ],\n                  "points": [\n                     {\n                        "pos": 0.7,\n                        "val": 150\n                     }\n                  ]\n               }\n            },\n            {\n               "type": "playSound",\n               "id": {\n                  "arg": "bonusType",\n                  "map": [\n                     {\n                        "source": "bonus",\n                        "target": "western_vignette_1"\n                     },\n                     {\n                        "source": "bonus_2",\n                        "target": "western_vignette_2"\n                     },\n                     {\n                        "source": "fs",\n                        "target": "western_vignette_1"\n                     },\n                     {\n                        "source": "fs_2",\n                        "target": "western_vignette_2"\n                     },\n                     {\n                        "source": "epic",\n                        "target": "western_vignette_3"\n                     }\n                  ]\n               },\n               "params": {\n                  "volume": 0.8,\n                  "maxrate": 25,\n                  "delay": 0.6\n               }\n            }\n         ]\n      },\n      {\n         "id": "transitionEnded",\n         "actions": [\n            {\n               "type": "playEnvelope",\n               "id": "master",\n               "params": {\n                  "param": "filterFrequency",\n                  "targetType": "bus",\n                  "targets": [\n                     "music"\n                  ],\n                  "points": [\n                     {\n                        "pos": 0.3,\n                        "val": 20000\n                     }\n                  ]\n               }\n            }\n         ]\n      },\n      {\n         "id": "startGamble",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "suspense_drums",\n               "params": {\n                  "volume": 0.8,\n                  "loop": true\n               }\n            },\n            {\n               "type": "stopSound",\n               "id": "music_level_0"\n            },\n            {\n               "type": "stopSound",\n               "id": "music_level_1"\n            },\n            {\n               "type": "stopSound",\n               "id": "music_level_2"\n            },\n            {\n               "type": "stopSound",\n               "id": "music_level_3"\n            }\n         ]\n      },\n      {\n         "id": "finalGambleCoin",\n         "actions": [\n            {\n               "type": "stopSound",\n               "id": "suspense_drums"\n            },\n            {\n               "type": "playSound",\n               "id": "cymbal_crash",\n               "params": {\n                  "volume": 0.6\n               }\n            },\n            {\n               "type": "playSequence",\n               "id": "basegame_music",\n               "params": {}\n            },\n            {\n               "type": "playSound",\n               "id": "whistle_downer",\n               "params": {\n                  "volume": 0.6\n               }\n            }\n         ]\n      },\n      {\n         "id": "bulletIndicatorFullSpin",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "revolverFills",\n               "params": {\n                  "volume": 0.6\n               }\n            }\n         ]\n      },\n      {\n         "id": "symbolLandedAttention",\n         "actions": [\n            {\n               "type": "playPool",\n               "id": "symDrop",\n               "params": {\n                  "volume": 0.4\n               }\n            }\n         ]\n      },\n      {\n         "id": "playSparkle",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "fountain_start",\n               "params": {\n                  "volume": 0.4\n               }\n            }\n         ]\n      },\n      {\n         "id": "revolverHighlight",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "holster_gun_faster",\n               "params": {\n                  "volume": 0.9,\n                  "maxrate": 100\n               }\n            }\n         ]\n      },\n      {\n         "id": "bulletIndicatorShootout",\n         "actions": [\n            {\n               "type": "playSound",\n               "id": "impact_gun_spin",\n               "params": {\n                  "volume": 1.1,\n                  "maxrate": 100\n               }\n            }\n         ]\n      }\n   ]\n}').events,sounds:JSON.parse('{\n   "sounds": [\n      {\n         "id": "reeldrop_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "symdrop_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "symdrop_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "symdrop_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "symdrop_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "dropswoosh_in",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "dropgrid_in",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "dropgrid_out",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "win_count_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "win_end_bet_over",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "win_end_bet_high",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "win_end_bet_low",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_level_0",\n         "group": "base_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_level_1",\n         "group": "base_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_level_2",\n         "group": "base_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_level_3",\n         "group": "base_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_level_0",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_level_1",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_level_2",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_level_3",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_2_level_0",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_2_level_1",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_2_level_2",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_2_level_3",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "music_bonus_3_level_0",\n         "group": "feature_music",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "wintier_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "wintier_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "wintier_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "wintier_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "desert_ambience",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spurs_wood_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spurs_wood_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spurs_wood_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spurs_wood_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spur_whistle",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_drop_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_drop_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_drop_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_drop_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_drop_5",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "poof",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "lecowboy_intro",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_open",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_close",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "click_sweep",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bass_hit_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bass_hit_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bass_hit_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bass_hit_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bass_hit_5",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "holster_gun",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "plastic_click",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "drumroll",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ping_clicks_reload",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ricochet_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ricochet_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ricochet_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ricochet_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "plink_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "plink_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "plink_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "plink_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "gunshot_clicks_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "gunshot_clicks_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "gunshot_clicks_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "poof_metallic",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "gun_draw",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spin_crunchy_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spin_crunchy_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "spin_crunchy_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "heavy_poof",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "shotgun_cock",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "success_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "success_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bag_zipper_ding",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ping_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ping_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "ping_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "count_blip",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "coins_pour",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "loud_ping",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "pop_weapon",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "pop_glitter_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "pop_glitter_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "update_sweep_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "update_sweep_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "update_sweep_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "update_sweep_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "update_sweep_5",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "update_sweep_6",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "whirl_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "small_coin_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "small_coin_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "small_coin_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "medium_coin_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "medium_coin_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "medium_coin_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "big_coin_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "big_coin_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "big_coin_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "diamond",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "nail_board_shimmer",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "cartoon_move",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "coin_swoosh",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "pling",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "fountain_start",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "swoosh",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "pop_guncock",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "delighted_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "delighted_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "delighted_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "delighted_4",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "fuming_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "fuming_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "fuming_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "happy_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "happy_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "infuriated_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "infuriated_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "infuriated_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "raccoon_welcome_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "raccoon_welcome_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "raccoon_welcome_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "scratch",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "western_vignette_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "western_vignette_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "western_vignette_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "arrow",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bugle_wet_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bugle_wet_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "suspense_drums",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "cymbal_crash",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "cork_pop",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bush_hawk_transit",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "pistol_boing_whistle",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "whistle_downer",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "coins_swoosh_new",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "holster_gun_faster",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "western_bonus_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "western_bonus_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "western_bonus_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "flute_vignette_whip_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "flute_vignette_whip_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "flute_vignette_whip_3",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bugle_cannon_1",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "bugle_cannon_2",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "vibraslap",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      },\n      {\n         "id": "impact_gun_spin",\n         "group": "fx",\n         "bitrate": 96,\n         "channels": 2\n      }\n   ]\n}').sounds,groups:JSON.parse('{\n   "groups": [\n      {\n         "id": "fx",\n         "vol": 1.0,\n         "duck": {\n            "target": "music",\n            "attack": 0.001,\n            "release": 0.13,\n            "ratio": 7,\n            "threshold": -25\n         }\n      },\n      {\n         "id": "music",\n         "vol": 0.5\n      },\n      {\n         "id": "base_music",\n         "vol": 1.0,\n         "dest": "music"\n      },\n      {\n         "id": "feature_music",\n         "vol": 1.0,\n         "dest": "music"\n      }\n   ]\n}').groups,pools:JSON.parse('{\n   "pools": [\n      {\n         "id": "symDrop",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "click_drop_1"\n            },\n            {\n               "type": "playSound",\n               "id": "click_drop_2"\n            },\n            {\n               "type": "playSound",\n               "id": "click_drop_3"\n            },\n            {\n               "type": "playSound",\n               "id": "click_drop_4"\n            },\n            {\n               "type": "playSound",\n               "id": "click_drop_5"\n            }\n         ]\n      },\n      {\n         "id": "spinclicks",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 150,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "spurs_wood_1"\n            },\n            {\n               "type": "playSound",\n               "id": "spurs_wood_2"\n            },\n            {\n               "type": "playSound",\n               "id": "spurs_wood_3"\n            },\n            {\n               "type": "playSound",\n               "id": "spurs_wood_4"\n            }\n         ]\n      },\n      {\n         "id": "revolverFills",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 150,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "spin_crunchy_1"\n            },\n            {\n               "type": "playSound",\n               "id": "spin_crunchy_2"\n            },\n            {\n               "type": "playSound",\n               "id": "spin_crunchy_3"\n            }\n         ]\n      },\n      {\n         "id": "gunshots",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 150,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "gunshot_clicks_1"\n            },\n            {\n               "type": "playSound",\n               "id": "gunshot_clicks_2"\n            },\n            {\n               "type": "playSound",\n               "id": "gunshot_clicks_3"\n            }\n         ]\n      },\n      {\n         "id": "ricochets",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 150,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "ricochet_1"\n            },\n            {\n               "type": "playSound",\n               "id": "ricochet_2"\n            },\n            {\n               "type": "playSound",\n               "id": "ricochet_3"\n            }\n         ]\n      },\n      {\n         "id": "plinks",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 150,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "plink_1"\n            },\n            {\n               "type": "playSound",\n               "id": "plink_2"\n            },\n            {\n               "type": "playSound",\n               "id": "plink_3"\n            }\n         ]\n      },\n      {\n         "id": "pings",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "ping_1"\n            },\n            {\n               "type": "playSound",\n               "id": "ping_2"\n            },\n            {\n               "type": "playSound",\n               "id": "ping_3"\n            }\n         ]\n      },\n      {\n         "id": "cloverRevealGreen",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "update_sweep_1"\n            },\n            {\n               "type": "playSound",\n               "id": "update_sweep_2"\n            },\n            {\n               "type": "playSound",\n               "id": "update_sweep_3"\n            }\n         ]\n      },\n      {\n         "id": "cloverRevealGold",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "update_sweep_4"\n            },\n            {\n               "type": "playSound",\n               "id": "update_sweep_5"\n            },\n            {\n               "type": "playSound",\n               "id": "update_sweep_6"\n            }\n         ]\n      },\n      {\n         "id": "bigCoins",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 25,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "big_coin_1"\n            },\n            {\n               "type": "playSound",\n               "id": "big_coin_2"\n            },\n            {\n               "type": "playSound",\n               "id": "big_coin_3"\n            }\n         ]\n      },\n      {\n         "id": "mediumCoins",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 25,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "medium_coin_1"\n            },\n            {\n               "type": "playSound",\n               "id": "medium_coin_2"\n            },\n            {\n               "type": "playSound",\n               "id": "medium_coin_3"\n            }\n         ]\n      },\n      {\n         "id": "diamonds",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "diamond"\n            }\n         ]\n      },\n      {\n         "id": "smallCoins",\n         "type": "playSound",\n         "order": "random",\n         "maxrate": 25,\n         "items": [\n            {\n               "type": "playSound",\n               "id": "small_coin_1"\n            },\n            {\n               "type": "playSound",\n               "id": "small_coin_2"\n            },\n            {\n               "type": "playSound",\n               "id": "small_coin_3"\n            }\n         ]\n      },\n      {\n         "id": "delighted",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "delighted_1"\n            },\n            {\n               "type": "playSound",\n               "id": "delighted_2"\n            },\n            {\n               "type": "playSound",\n               "id": "delighted_3"\n            },\n            {\n               "type": "playSound",\n               "id": "delighted_4"\n            }\n         ]\n      },\n      {\n         "id": "fuming",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "fuming_1"\n            },\n            {\n               "type": "playSound",\n               "id": "fuming_2"\n            },\n            {\n               "type": "playSound",\n               "id": "fuming_3"\n            },\n            {\n               "type": "playSound",\n               "id": "infuriated_1"\n            },\n            {\n               "type": "playSound",\n               "id": "infuriated_2"\n            },\n            {\n               "type": "playSound",\n               "id": "infuriated_3"\n            }\n         ]\n      },\n      {\n         "id": "raccoonHappy",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "happy_1"\n            },\n            {\n               "type": "playSound",\n               "id": "happy_2"\n            }\n         ]\n      },\n      {\n         "id": "raccoonWelcome",\n         "type": "playSound",\n         "order": "random",\n         "items": [\n            {\n               "type": "playSound",\n               "id": "raccoon_welcome_1"\n            },\n            {\n               "type": "playSound",\n               "id": "raccoon_welcome_2"\n            },\n            {\n               "type": "playSound",\n               "id": "raccoon_welcome_3"\n            }\n         ]\n      }\n   ]\n}').pools,sequences:JSON.parse('{\n   "sequences": [\n      {\n         "id": "win",\n         "patterns": [\n            {\n               "id": "countup",\n               "progress": false,\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "win_count_1",\n                     "params": {\n                        "volume": 0.4,\n                        "loop": true\n                     }\n                  },\n                  {\n                     "type": "playEnvelope",\n                     "id": "crescendo",\n                     "params": {\n                        "param": "pitch",\n                        "points": [\n                           {\n                              "pos": 0.0,\n                              "val": 0.0\n                           },\n                           {\n                              "pos": {\n                                 "arg": "duration"\n                              },\n                              "val": {\n                                 "arg": "tier",\n                                 "mapRange": [\n                                    {\n                                       "range": [\n                                          0,\n                                          0\n                                       ],\n                                       "target": 400\n                                    },\n                                    {\n                                       "range": [\n                                          1,\n                                          1\n                                       ],\n                                       "target": 800\n                                    },\n                                    {\n                                       "range": [\n                                          2,\n                                          2\n                                       ],\n                                       "target": 1200\n                                    },\n                                    {\n                                       "range": [\n                                          3,\n                                          3\n                                       ],\n                                       "target": 2000\n                                    },\n                                    {\n                                       "range": [\n                                          4,\n                                          999\n                                       ],\n                                       "target": 2400\n                                    }\n                                 ]\n                              }\n                           }\n                        ]\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "end",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": {\n                        "arg": "tier",\n                        "mapRange": [\n                           {\n                              "range": [\n                                 0,\n                                 1\n                              ],\n                              "target": "win_end_bet_low"\n                           },\n                           {\n                              "range": [\n                                 2,\n                                 4\n                              ],\n                              "target": "win_end_bet_over"\n                           },\n                           {\n                              "range": [\n                                 5,\n                                 999\n                              ],\n                              "target": "win_end_bet_high"\n                           }\n                        ]\n                     },\n                     "params": {\n                        "volume": 0.8\n                     }\n                  }\n               ]\n            }\n         ]\n      },\n      {\n         "id": "basegame_music",\n         "bpm": 120,\n         "signature": "4/4",\n         "quantize": 1.0,\n         "returnQuantize": 8.0,\n         "patterns": [\n            {\n               "id": "level_0",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_level_0",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_1",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_level_1",\n                     "params": {\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_2",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_level_2",\n                     "params": {\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_3",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_level_3",\n                     "params": {\n                        "loop": true\n                     }\n                  }\n               ]\n            }\n         ]\n      },\n      {\n         "id": "bonus_music",\n         "bpm": 105,\n         "quantize": 1.0,\n         "returnQuantize": 8.0,\n         "patterns": [\n            {\n               "id": "level_0",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_level_0",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_1",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_level_1",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_2",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_level_2",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_3",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_level_3",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            }\n         ]\n      },\n      {\n         "id": "bonus_2_music",\n         "bpm": 127,\n         "quantize": 1.0,\n         "returnQuantize": 8.0,\n         "patterns": [\n            {\n               "id": "level_0",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_2_level_0",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_1",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_2_level_1",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_2",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_2_level_2",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            },\n            {\n               "id": "level_3",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_2_level_3",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            }\n         ]\n      },\n      {\n         "id": "epic_music",\n         "bpm": 127,\n         "quantize": 1.0,\n         "returnQuantize": 8.0,\n         "patterns": [\n            {\n               "id": "level_0",\n               "actions": [\n                  {\n                     "type": "playSound",\n                     "id": "music_bonus_3_level_0",\n                     "params": {\n                        "volume": 1.0,\n                        "loop": true\n                     }\n                  }\n               ]\n            }\n         ]\n      }\n   ]\n}').sequences}})},function(){this.gambleResultHeader={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["bonus_gamble_result","bonus_gamble_trickery","bonus_gamble_epic"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFE8B0",size:50,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF3C1500",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.totalFooter={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:-2.7,offset:null,letterSpacing:-1.01,strings:["click_to_continue_uc"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFD634",size:120,shadowDistance:-3,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF000000",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:1,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.gambleHeader={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["gamble_button_uc"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFFFFF",size:50,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF4E1322",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.continueHeader={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["continue_uc"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFFFFF",size:50,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF00472E",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.featureInfo={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["num_free_spins_played"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFEC97",size:80,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF43411D",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.featureFooterPortrait={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["gamble_choice_dialog"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFEC97",size:32,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF43411D",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.featureFooterLandscape={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["gamble_choice_dialog"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFEC97",size:23,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF43411D",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.featureFooterGeneral={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["gamble_choice_dialog"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFEC97",size:27,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF43411D",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.featureBodyPortrait={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["you_won_num_free_spins_uc","high_noon_bonus_desc","gamble_choice_dialog_high_noon","trickery_bonus_desc","gamble_choice_dialog_trickery","epic_bonus_desc","bonus_gamble_bronze","digits"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFEC97",size:65,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF43411D",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.featureBody={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["you_won_num_free_spins_uc","high_noon_bonus_desc","gamble_choice_dialog_high_noon","trickery_bonus_desc","gamble_choice_dialog_trickery","epic_bonus_desc","digits"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFEC97",size:53,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF43411D",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.splashFooter={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:-2.7,offset:null,letterSpacing:-1.01,strings:["click_to_continue_uc"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFD634",size:70,shadowDistance:-3,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF000000",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:1,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.splashBody={wordWrap:null,spaceWidth:7,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["mechanics_body","free_spins_body","max_win_body"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFE066",size:40,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF551F00",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null},this.splashHeader={wordWrap:null,spaceWidth:null,maxHeight:null,translationId:null,shadowAngle:0,offset:null,letterSpacing:null,strings:["mechanics_uc","free_spins_uc","max_win_uc"],backgroundMargins:null,backgroundColor:null,sdfSmoothing:null,shadowColor:-16777216,outlineMultAlpha:!0,color:"0xFFFFE066",size:46,shadowDistance:null,shadowHardness:.5,outlineMultAlpha3:!0,outlineColor2:null,outlineWidth:1,outlineColor:"0xFF551F00",maxWidth:null,outlineMultAlpha2:!0,textureMargins:null,shadowRadius:0,sdfScaleFactor:1,gradient:null,textAlign:null,align:null,font:"alphakind",outlineColor3:null,rotation:null,lineSpacing:null,enabled:!0,outlineWidth3:null,height:null,locale:null,shadowAlpha:.6,outlineWidth2:null,outlineStrength:.95,width:null}}),xc=((i["hacksaw.games.lecowboy.TextData"]=Ac).__name__="hacksaw.games.lecowboy.TextData",Ac.prototype={__class__:Ac},(i["hacksaw.games.lecowboy.components.actor.BlackBarsChain"]=ar).__name__="hacksaw.games.lecowboy.components.actor.BlackBarsChain",ar.__super__=P,ar.prototype=e(P.prototype,{setupChain:function(){var e=this._processor,t=this._shader,n=new PA,e=(n.set(ht.COLOR,ut.LastPass(0)),[e.createPass(new _t(t,n,null,null,null,null,null))]);return this._processor.createChain(e)},update:function(e){P.prototype.update.call(this,e),Tt.update(this._tweenVector,e);e=this._shader;null!=e&&(e.tweenTime__=this._tweenVector.x)},start:function(e,t,n,i,s){return null==s&&(s=!1),null==i&&(i=0),Tt.tween(this._tweenVector,new nt(st.fromBacking(new it(t,null,null,null)),st.fromBacking(new it(e,null,null,null)),i,n,null,s?function(e){return e*e}:function(e){return-e*(e-2)},null,null,null,null,null))},get_baseName:function(){return"gasm.heaps.components.actor.render.PostProcessingChainComponent"},__class__:ar}),(i["hacksaw.games.lecowboy.components.actor.FortuneActor"]=lr).__name__="hacksaw.games.lecowboy.components.actor.FortuneActor",lr.__super__=d,lr.prototype=e(d.prototype,{init:function(){d.prototype.init.call(this),this._reelActor=this.owner.getFromParentsByName(O_.BASE_NAME,O_),this._visibleSymbols=this.owner.getFromParentsByName(Md.BASE_NAME,Md).visibleSymbols;for(var e=this._visibleSymbols.mW,t=this._visibleSymbols.mH,n=e*t,i=[],s=0;s<n;)++s,i.push(-1);this.upgradeGrid=new Hl(e,t,i)},update:function(o){var u=this;d.prototype.update.call(this,o),null!=this._vectorField&&il.eachi(this._fieldObjects,function(e,t){var n=e.element.tweenObject.object.getRelPos(e.relObject),i=n._41,s=n._42,a=n._43,l=(l=i=null==i?0:i,r=s=null==s?0:s,a=a=null==a?0:a,u._vectorField.sampleVelocity(l,r,a)),r=u._vectorField.tightness,a=(e.velocity.x=(e.velocity.x+l.x*o)*(1-r)+l.x*r,e.velocity.y=(e.velocity.y+l.y*o)*(1-r)+l.y*r,e.element.tweenObject);a.set_x(a.get_x()+e.velocity.x*o),(a=e.element.tweenObject).set_y(a.get_y()+e.velocity.y*o),e.element.tweenObject.set_z(.001*t);r=null!=(l=u.owner.getFromParentsByName(Cc.BASE_NAME,Cc).rotator._compMap)?l.h[wc.BASE_NAME]:null,l=r instanceof wc?r:null,a=new It(e.element.parent);tt.init(a,null),l.stop(a);i=(n=e.element.tweenObject.object.getRelPos(e.relObject))._41,t=s=null==(s=n._42)?0:s,r=i=null==i?0:i;Math.sqrt(r*r+t*t)<.3&&tt.tween(e.element.tweenObject,[et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,null,.1,null,null,null,null,null,null,null))])})},convertWilds:function(r,e){for(var o=this,u=this.owner.getFromParentsByName(_u.BASE_NAME,_u),t=x_.get_positions(r),n=new Array(t.length),i=0,s=t.length;i<s;){var a=t[p=i++],l=o._visibleSymbols,h=new Bw;h.y=a/l.mW|0,h.x=a%l.mW,n[p]=h}for(var c=new qy,_=0;_<n.length;){for(var d=n[_++],p=[_-1],d=[d],m=d[0],g=new Hl(e.mW,e.mH),f=(t=g).mData,A=t.mW,i=0,s=t.mW*t.mH;i<s;)f[a=i++]=a%A==m.x&&(a/A|0)==m.y;g=[g];Rt([((s,a)=>function(e){o._gameChannel.publish("convertWild");var t=o._reelActor.presentSpecial("remove",s[0]),n=u.currentTurboValue({normal:1,turbo:1.5,superTurbo:2.25}),i=o.owner.getFromParentsByName(Md.BASE_NAME,Md).visibleSymbols;return $f.getSymbol(i.mData[a[0].y*i.mW+a[0].x]).animator.setSpeed(n),t})(g,d),((s,a,l)=>function(e){o._gameChannel.publish("loadRevolver");var t=o._reelActor.replaceSym(x_.get_symbols(r)[l[0]],a[0],!1,!0,!0),n=o._reelActor.presentSpecial("reload",s[0]),i=u.currentTurboValue({normal:2,turbo:2.5,superTurbo:2.75});return $f.getSymbol(t).animator.setSpeed(i),n})(g,d,p),(t=>function(e){return o._reelActor.presentSpecial("setup",t[0])})(g)]).handle(function(){c.trigger(null)})}return c},shootSymbols:function(x,w,e,y,t,b,n,v){for(var C,S,k=this,M=b_.get_position(x)<0,i=(this._visibleSymbols=this.owner.getFromParentsByName(Md.BASE_NAME,Md).visibleSymbols,b_.get_hits(x)),s=new Array(i.length),a=0,l=i.length;a<l;){var r=i[h=a++],o=k._visibleSymbols;(u=new Bw).y=r/o.mW|0,u.x=r%o.mW,s[h]=u}if(C=M?null:(i=this._visibleSymbols,h=b_.get_position(x),$f.getSymbol(i.mData[(h/i.mW|0)*i.mW+h%i.mW])),M)S=null;else{for(var u,i=this._visibleSymbols,h=b_.get_position(x),c=((u=new Bw).y=h/i.mW|0,u.x=h%i.mW,new Hl(this._visibleSymbols.mW,this._visibleSymbols.mH)),_=(i=c).mData,d=i.mW,a=0,l=i.mW*i.mH;a<l;)_[h=a++]=h%d==u.x&&(h/d|0)==u.y;S=c}for(i=this._config.symbols,a=[],l=0;l<i.length;){var p=i[l];++l,new ot("MULTIPLIER$|COLLECTOR$|RELOADER","").match(p.name)&&a.push(p)}for(var m=new Array(a.length),l=0,g=a.length;l<g;)m[h=l++]=a[h].name;for(var I=m,i=this._config.symbols,a=[],l=0;l<i.length;){p=i[l];++l,new ot("MULTIPLIER$|RELOADER","").match(p.name)&&a.push(p)}for(m=new Array(a.length),l=0,g=a.length;l<g;)m[h=l++]=a[h].name;for(var B=m,T=!1,E=new qy,F=!1,D=null,a=[],f=0;f<s.length;){var A=s[f++],h=[f-1];a.push(Rt([(n=>function(e){var t=b.currentTurboValue({normal:.6,turbo:.5,superTurbo:.2});return rt.or(k.after(t*n[0]),E)})(h),function(e){return t.queueAnimation(null,!0),rt.or(k.after(.1),E)},((f,A)=>function(e){for(var t=b.currentTurboValue({normal:2.2,turbo:2.7,superTurbo:5.7}),t=(null!=C&&C.animator.setSpeed(t),D=k._casinoChannel.subscribe("clickScreen",function(e){k._casinoChannel.unsubscribe(D)&&(F=!0,E.trigger(e1.ofAny(!0)),null!=C)&&(0<zy.values(C.animator.get_activeAnimations()).length&&k._reelActor.presentSpecial("highlight",S),nl.__cast(C.object.getChildAt(0),bh).get_animator().stopAllTracks(yh.SkipToEnd))}),$f.getSymbol(k._reelActor.replaceSym(b_.get_symbols(x)[A[0]],f[0],!1,!0,!1))),n=k._reelActor.getSymbolName(b_.get_symbols(x)[A[0]]),i=f[0],s=(c=g=new Hl(w.mW,w.mH)).mData,a=c.mW,l=0,r=c.mW*c.mH;l<r;)s[p=l++]=p%a==i.x&&(p/a|0)==i.y;-1!=B.indexOf(n)&&k._reelActor.presentSpecial("idle",g),-1==I.indexOf(n)&&(n=n.split("_"),n=el.parseInt(n[n.length-1]),n=wA.divMod(bA.parseString((null==n?"null":""+n)+"00"),new yA(0,100)),o=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(n.modulus),2),parseFloat((null==n.quotient?"null":wA.toString(n.quotient))+"."+o),tt.tween(nl.__cast(t.getAttachment(E_.COIN_VALUE).element,ju).tweenObject,[et.Position(new nt(st.fromBacking(new it(-.01,0,1e-4,null)),null,null,0,null,null,!0,null,null,null,null))]));-1==(c=k.upgradeGrid).mData[f[0].y*c.mW+f[0].x]&&(c=k.upgradeGrid,_=b_.get_symbols(x),c.mData[f[0].y*c.mW+f[0].x]=_[A[0]]),k._gameChannel.publish("symbolHit",{symbolId:b_.get_symbols(x)[A[0]]});for(var n=k,o=(c=k.upgradeGrid).mData[f[0].y*c.mW+f[0].x],u=b_.get_symbols(x)[A[0]],h="",s=g.mData,l=0,r=g.mW*g.mH;l<r;)h+=(_=s[p=l++])?"1":"0",s[p]=_;var n=n.createUpgradeSymbolData(o,u,h,null,F),c=(k._reelActor.presentSpecial("upgradeSymbol",null,null,[n]),k.upgradeGrid),_=b_.get_symbols(x);c.mData[f[0].y*c.mW+f[0].x]=_[A[0]];(l=new at).h[K.coin_reveal_info.animations.reveal]=new Cl(K.coin_reveal_info.animations.reveal,null,null,null,null,null,null,null,null,null,null,null,null,null,null);var d=new Js(new $s(K.coin_reveal,.9,null,to.Always,null,null,null,l,null,!0,!0,null)),o=(d.object.setPos(st.fromBacking(new it(t.object.get_x(),t.object.get_y(),t.object.get_z()+.001,null))),k._reelActor.owner.addChild((new ge).add(d)),d.play(K.coin_reveal_info.animations.reveal).handle(function(e){d.owner.dispose()}),y.activateCells(g),Ou.get_id(41)),u=Ou.get_id(42),t=el.parseInt(n.symbol),o=t==Ou.get_id(43)?{message:"spawnPot",isEpic:null}:t==o||t==Ou.get_id(40)?{message:"spawnClover",isEpic:b_.get_symbols(x)[A[0]]==o}:t==u?{message:"spawnReloader",isEpic:null}:{message:null,isEpic:null};if(null!=o.message&&k._gameChannel.publish(o.message,{isEpic:o.isEpic}),M)k._gameChannel.publish("symbolUpgraded",{id:n.symbol}),v.updateAmmo(M);else if(!T){var c=k._visibleSymbols,p=b_.get_position(x),m=new Bw;m.y=p/c.mW|0,m.x=p%c.mW;for(var g,s=(c=g=new Hl(w.mW,w.mH)).mData,a=c.mW,l=0,r=c.mW*c.mH;l<r;)s[p=l++]=p%a==m.x&&(p/a|0)==m.y;T=!0,k._reelActor.presentSpecial("shoot",g)}return rt.NOISE})([A],h)]))}for(l=[],g=0;g<a.length;)l.push((t=>function(e){return t[0]})([a[g++]]));return Rt(l)},createMultiplierWin:function(i,s){for(var e=s,t=k_.get_position(i),n=new Bw,e=(n.y=t/e.mW|0,n.x=t%e.mW,new Hl(s.mW,s.mH)),a=e.mData,l=e.mW,r=0,o=e.mW*e.mH;r<o;)a[t=r++]=t%l==n.x&&(t/l|0)==n.y;var u=[];for(il.reduce(k_.get_hitData(i),function(e,t){return u[t.position]=t.newValue,u},u);u.length<4;)il.append(u,null);for(var h=new Hl(s.mW,s.mH,u),r=il.find(this._config.symbols,function(e){var t=s,n=k_.get_position(i);return Dt.eq(e.id,t.mData[(n/t.mW|0)*t.mW+n%t.mW])}).name,c="",a=e.mData,o=0,_=e.mW*e.mH;o<_;){var d=a[t=o++];c+=d?"1":"0",a[t]=d}return new T_(h,r,c,null,null,"0",el.string(k_.get_multiplier(i)),null,null,null,null,null,null,null,null,null)},summarizeTotalWin:function(n,e){for(var i=this,t=this._visibleSymbols.mW,s=this._visibleSymbols.mH,a=t*s,l=[],r=0;r<a;)++r,l.push(-1);this.upgradeGrid=new Hl(t,s,l);for(var t=new Ya(.0025),s=0|e,o=this._config.particleLimits.min,u=this._config.particleLimits.max,h=new ge,c=new na(new ia([new Ma(!1,Cn(h,h.dispose),null,s<o?o:u<s?u:s,null,[t,ql.particleTileModule(oc.StaticGroup(new qa(this._config.particleTiles,null))),ql.lifeModule(ic.LifeTime(new Ra(2,null))),ql.locationModule(sc.Cone(new Oa(.1,.4,6))),ql.sizeModule(lc.Initial(new La(.5*Jl.scale,null))),ql.rotationModule(ac.InitialRotation(new Na(st.fromBacking(new it(1.5707963267948966,null,null,null)))))],null)],null)),_=(h.add(c),c.object.set_z(.2),c.object.setRotation(1.5707963267948966,0,0),this.owner.addChild(h),this._vectorField=Dl.fromGenerator(Uh.FadePoint(st.fromBacking(new it(0,0,0,1)),-1,-2,2,1),new Rl(new Tw(20,20,2),st.fromBacking(new it(-1.5,-1.5,-1,null)),st.fromBacking(new it(1.5,1.5,1,null)),.5,.5,!0,null)),this._vectorField.velocityVectors.rotate(0,1.5707963267948966,.7853981633974483),new Array(n.length)),l=0,r=n.length;l<r;){var d=l++;_[d]={element:n[d],velocity:st.fromBacking(new it(0,0,0,1)),relObject:i._config.followObj}}return this._fieldObjects=_,this._gameChannel.publish("summarizeCoinWin",{winFactor:e}),Rt([function(e){return i.after(.25)},function(e){var t=i.owner.getFromParentsByName(Cc.BASE_NAME,Cc).rotator._compMap,t=null!=t?t.h[wc.BASE_NAME]:null;return(t instanceof wc?t:null).stopAndResetAllRotations(),c.start(),i._gameChannel.publish("playSparkle"),i.after(1)},function(e){var t=st.fromBacking(new it(-.01,null,.001,null));return i._vectorField=null,i._fieldObjects.length=0,il.each(n,function(e){e.tweenObject.setPos(t)}),rt.NOISE}])},getAttachmentElement:function(e,t){e=$f.getSymbol(e).get_attachments().get(t);return nl.__cast(null!=e?e.element:null,ju)},updateCoinValue:function(e,t,n,i,s,a){var l=this.getAttachmentElement(n.mData[e.y*n.mW+e.x],E_.COIN_VALUE).get_value(),t=t.mData[e.y*t.mW+e.x],l=this.upgradeCoin(l,t,e,$f.getId(n.mData[e.y*n.mW+e.x]),a),a=nl.__cast($f.getSymbol(null!=l?l:n.mData[e.y*n.mW+e.x]).getAttachment(E_.COIN_VALUE).element,ju);return a.flags|=2,rt.noise(a.countTo(t))},spreadMultElement:function(d){var p,m=this,g=-1;switch(d.turboMode){case"superTurbo":p={duration:.3,delay:0,hitDelay:0};break;case"turbo":p={duration:.3,delay:.075,hitDelay:.015};break;default:p={duration:.5,delay:.15,hitDelay:.035}}for(var e=il.find(this._config.symbols,function(e){return new ot("GLOBAL_","").match(e.name)}).id,t=d.visibleSymbols,n=d.startCell,i=$f.getId(t.mData[n.y*t.mW+n.x])==e,s=il.filterNull(d.hitGrid.mapCells(function(e,t){var n,i,s,a,l,r,o,u,h,c,_;return null!=e?(g+=1,l=d.visibleSymbols,s=i=n=0,n=r=null==(r=(u=$f.getSymbol(l.mData[t.y*l.mW+t.x]).object.object.getTransform())._41)?0:r,i=o=null==(o=u._42)?0:o,s=u=null==(u=u._43)?0:u,l=d.visibleSymbols,a=$f.getId(l.mData[t.y*l.mW+t.x])==d.potId,_=c=h=0,h=r=null==(r=(l=d.element.parent.getTransform())._41)?0:r,c=o=null==(o=l._42)?0:o,_=u=null==(u=l._43)?0:u,{val:e,cell:t,tweenObject:m.createElementMultClone(d.element),tween:[et.Color(new nt(st.fromBacking(new it(1,1,1,1)),st.fromBacking(new it(5,5,.5,1)),p.delay*g,p.duration,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(n,i,s+.05,null)),st.fromBacking(new it(h,c,_,null)),p.delay*g,p.duration,null,function(e){return 0==e?0:Math.exp(6.931471805599453*(e-1))},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(.5,.5,null,null)),null,p.delay*g,p.duration,null,function(e){return 0==e?0:Math.exp(6.931471805599453*(e-1))},null,null,null,null,null))],isPot:a}):null})),a=(this._gameChannel.publish("multiplierStarted",{isEpic:i}),[]),l=0;l<s.length;){var r=[s[l]],o=(++l,r[0].tweenObject.set_visible(!0),tt.tween(r[0].tweenObject,r[0].tween));o.handle((e=>function(){m._gameChannel.publish("coinMultiplied",{cell:e[0].cell,newValue:e[0].val,isEpic:i,isPot:e[0].isPot}),m.updateCoinValue(e[0].cell,d.hitGrid,d.visibleSymbols,d.betAmount,.2,d.startCell),e[0].tweenObject.remove()})(r)),a.push(o)}return rt.inParallel(a)},createCollectWin:function(i,s,e){null==e&&(e=!1);for(var t=(h=this._visibleSymbols.mW)*(c=this._visibleSymbols.mH),n=[],a=0;a<t;)++a,n.push(-1);this.upgradeGrid=new Hl(h,c,n);var l,r=s,o=C_.get_position(i),u=new Bw;if(u.y=o/r.mW|0,u.x=o%r.mW,e){for(var h=s.mW,c=s.mH,r=C_.get_mask(i).split(""),_=new Array(r.length),n=0,a=r.length;n<a;)_[o=n++]="1"==r[o];l=new Hl(h,c,_)}else{for(var e=new Hl(s.mW,s.mH),d=(r=e).mData,p=r.mW,n=0,a=r.mW*r.mH;n<a;)d[o=n++]=o%p==u.x&&(o/p|0)==u.y;l=e}for(var n=il.find(this._config.symbols,function(e){var t=s,n=C_.get_position(i);return Dt.eq(e.id,t.mData[(n/t.mW|0)*t.mW+n%t.mW])}).name,m="",d=l.mData,a=0,g=l.mW*l.mH;a<g;){var f=d[o=a++];m+=f?"1":"0",d[o]=f}return new f_(u,n,m,null,null,"0",el.string(C_.get_amount(i)),null,null,null,null,null,null,null,null,null)},getValueScale:function(e){e=.1*((null==e?"null":""+e).length-3)-.05;return 1-(e<0?0:e)},presentCloverUpgradeParticles:function(e){var t=ql.spawnModule(rc.OverTime(new Ya(.01))),n=ql.particleColorModule(nc.ByLife(new Ta(st.fromBacking(new it(1,1,1,1)),st.fromBacking(new it(1,1,1,.1)),function(e){var t,n=[0,0,0,0,1];if(n.length<2)throw tl.thrown("points length must be more than 2");return 2==n.length?n[0]*(1-e)+n[1]*e:3==n.length?(n[0]*(1-e)+(t=n[1])*e)*(1-e)+(t*(1-e)+n[2]*e)*e:m1._bezier(e,n)}))),t=[t,ql.velocityModule(uc.SpeedByLife(new $a(.25,.1))),ql.locationModule(sc.Sphere(new Va(.075,ch.Shell(.15),.1))),ql.particleTileModule(oc.StaticGroup(new qa([Kh.getContents(J.misc,J.misc_info.frames.spark_1),Kh.getContents(J.misc,J.misc_info.frames.spark_2)],null))),ql.lifeModule(ic.LifeTime(new Ra(.4,1))),ql.velocityModule(uc.SpherizeVelocity(new al(1))),ql.sizeModule(lc.Initial(new La(.4*Jl.scale,.9*Jl.scale))),ql.sizeModule(lc.ByLife(new ja(1.2,.2,o1.quadInOut))),ql.rotationModule(ac.FixedRotationRate(new Ua(st.fromBacking(new it(null,null,.1,null)),!0))),n],n=e.object.getTransform(),e=new Gr(0,0,0),i=e,s=n._41,a=n._42,n=n._43,s=(null==n&&(n=0),null==a&&(a=0),i.x=s=null==s?0:s,i.y=a,i.z=n,st.fromVector3(e)),l=new na(new ia([new Ma(null,null,null,35,null,t,null)],null));this._reelActor.owner.addChild((new ge).add(l)),l.object.setPos(st.fromBacking(new it(s.x,s.y,.5,null))),l.start(),this.after(.2).handle(function(e){l.stop().handle(function(e){l.owner.dispose()})})},createElementMultClone:function(e){var t=e.parent.getTransform(),n=new Gr(0,0,0),i=n,s=t._41,a=t._42,t=t._43,s=(null==t&&(t=0),null==a&&(a=0),i.x=s=null==s?0:s,i.y=a,i.z=t,new B(nl.__cast(e.clone(),ju)));return this.owner.addChild((new ge).add(s)),s.object.set_visible(!1),s.object.setPos(st.fromVector3(n)),s.object},upgradeCoin:function(e,t,n,i,s){for(var a=this,l=this._config.symbols,r=[],o=0;o<l.length;){var u=l[o];++o,new ot("COLLECT","").match(u.name)&&r.push(u)}for(var h=new Array(r.length),o=0,c=r.length;o<c;)h[w=o++]=0|r[w].id;for(var t=g_.lessEqual(4,t)?4:g_.lessEqual(20,t)?20:g_.lessEqual(100,t)?100:150,e=g_.lessEqual(4,e)?4:g_.lessEqual(20,e)?20:g_.lessEqual(100,e)?100:150,_=-1==h.indexOf(i),d=t!=e&&_?this.getCashIdByType(t):null,p=this.getCashIdByType(e),m=new Hl(this._reelActor.get_currentGrid().mW,this._reelActor.get_currentGrid().mH),g=(l=m).mData,f=l.mW,r=0,o=l.mW*l.mH;r<o;)g[w=r++]=w%f==n.x&&(w/f|0)==n.y;for(var A=m,m=null!=d?d:_?this.getCashIdByType(t):i,x="",g=A.mData,r=0,o=A.mW*A.mH;r<o;){var w,y=g[w=r++];x+=y?"1":"0",g[w]=y}_=this.createUpgradeSymbolData(p,m,x,s);return e!=t&&i!=Ou.get_id(43)||this._reelActor.presentSpecial("upgradeSymbol",null,null,[_]),null!=d?(p=this._reelActor.replaceSym(d,n),(l=this.upgradeGrid).mData[n.y*l.mW+n.x]=d,this._reelActor.presentSpecial("upgradeSymbol",null,null,[_]),Rt([function(e){return a._reelActor.presentSpecial("end",A)},function(e){return a._reelActor.presentSpecial("idle",A)}]),p):null},getCashIdByType:function(e){for(var t=this._config.symbols,n=[],i=0;i<t.length;){var s=t[i];++i,new ot("CASH","").match(s.name)&&n.push(s)}switch(e){case 100:return Ou.get_id(29);case 150:return Ou.get_id(32);case 20:return Ou.get_id(25);case 4:return Ou.get_id(21);default:return null}},createUpgradeSymbolData:function(e,t,n,i,s){return new wa(""+e,n,null,null,"0",""+t,null,null,null,i,null,null,null,s=null==s?!1:s,null)},get_baseName:function(){return"hacksaw.games.lecowboy.components.actor.FortuneActor"},__class__:lr}),(i["hacksaw.games.lecowboy.components.actor.FortuneActorConfig"]=rr).__name__="hacksaw.games.lecowboy.components.actor.FortuneActorConfig",rr.prototype={__class__:rr},(i["hacksaw.games.lecowboy.components.actor.GambleController"]=or).__name__="hacksaw.games.lecowboy.components.actor.GambleController",or.__super__=d,or.prototype=e(d.prototype,{createGambleDialog:function(e,t){var n=(new ge).add(new Ne(new Ge(new te(-.2,null,-.25,-.25),null,null,null,null,3,null,null))),i=(this._dialogue=new ea(new ta(this._config.tileMap.get(B_.DIALOGUE),null,null,to.Always,null,null,null)),this._dialogue.object.setPos(st.fromBacking(new it(null,-.02,null,null))),(new ge).add(this._dialogue)),t=(this._title=new ea(this._config.titleConfig.h[t]),this._textNumberWon=new mu(new gu(new bu(this._config.spinsWon),null)),this._textBonusDescription=new mu(new gu(new bu(this._config.descText.h[t]),null)),new ge);this._clicked=!1,this._continueButton=this.createButton(xc.CONTINUE),this._gambleButton=this.createButton(xc.GAMBLE),t.addChild((new ge).add(this._continueButton.sprite).add(this._continueButton.button).addChild((new ge).add(this._continueButton.text))),t.addChild((new ge).add(this._gambleButton.sprite).add(this._gambleButton.button).addChild((new ge).add(this._gambleButton.text))),t.addChild(i),i.addChild((new ge).add(this._title)),i.addChild((new ge).add(this._textNumberWon)),i.addChild((new ge).add(this._textBonusDescription)),this.owner.addChild(n.addChild(t))},createShootingRange:function(e,t){for(var l=this,n=(this._isBonus2="gamble_2"==e,this._shootingRangeEntityHolder=new ge,new te(null,null,-.15,-.15)),e=new Ur,i=(e.xMin=-.8,e.yMin=-.8,e.zMin=-1,e.xMax=0,e.yMax=0,e.zMax=0,new Ne(new Ge(n,e,null,null,null,null,null,null))),s=this._isBonus2?this._config.rewardsTwo:this._config.rewards,a=["BRONZE","SILVER","GOLD","DIAMOND"],r=new Array(s.length),n=0,o=s.length;n<o;){var u=n++,h=(d=el.string(s[u]).split("_"))[d.length-1],c=-1==a.indexOf(h),_=[new Js(c?l._config.symbolConfig:l._config.coinConfig)],c=(l._isBonus2&&(_[0].object.setScale(.8),c)&&(c=[new mu(new gu(new bu(new vu(Cu.Tile(l._config.epicStickerTile),null,st.fromBacking(new it(.09,.135,.2,null)),null,.65*Jl.scale,null,st.fromBacking(new it(null,null,-.075*Math.PI,null)),null,wr.Alpha,to.Always,null,null,null)),null))],_[0].onAdded=((e,t)=>function(){t[0].owner.addChild((new ge).add(e[0]))})(c,_)),l.getRewardAnimation(h,!1));_[0].animator.play(c),r[u]=_[0]}this._gambleRewards=r;for(var d,p=[],n=0,o=(d=this._gambleRewards).length;n<o;){var u=n++,m=1.3/l._gambleRewards.length,g=l._isBonus2?3:1;p.push({rewardSpine:d[u],xPos:u<=g?u*m-(l._isBonus2?.25:.17):u*m-(l._isBonus2?.89:.82),yPos:u<=g?.25:l._isBonus2?-.03:0})}var e=new ge,f=(this._textGambleWinning=new mu(new gu(new bu(t),null)),this._textGambleWinning.object.set_visible(!1),tt.tween(this._textGambleWinning.object,[et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,null,.3,null,null,null,null,null,null,null))]),this._shootingBoard=new Js(this._config.shootRangeSpineConfig),this._shootingBoard.object.set_y(.03),this._shootingBoard.animator.play(this._config.shootRangeSpineConfig.animations.h.setup),this._gunArm=new Js(this._config.shootConfig),this._gunArm.animator.play(this._config.shootConfig.animations.h.setup),this.owner.addChild(this._shootingRangeEntityHolder),e.add(this._shootingBoard).addChild((new ge).add(this._gunArm)),this._shootingRangeEntityHolder.add(i).addChild(e).addChild((new ge).add(this._textGambleWinning)),il.each(p,function(e){l._shootingRangeEntityHolder.addChild((new ge).add(e.rewardSpine));var t=st.fromBacking(new it(e.xPos,e.yPos-.05,.05,null)),n=t.x,i=null==n?null:1.35*n,s=null==(n=t.y)?null:1.35*n,a=null==(n=t.z)?null:1.35*n,n=null==(n=t.w)?null:1.35*n;e.rewardSpine.object.setPos(st.fromBacking(new it(null!=i?i:t.x,null!=s?s:t.y,null!=a?a:t.z,null!=n?n:t.w)))}),i.object.set_visible(!1),!1);tt.colorTo(i.object,new nt(st.fromBacking(new it(null,null,null,0)),null,null,0,null,null,null,null,null,null,null)).handle(function(){f=!0}),this.when(function(){return f},.1).handle(function(){i.object.set_visible(!0)})},shootBoard:function(e,a,t,l){for(var r=this,n=Wy.map(this.lastGrid,function(e){return Jn.cca(e,0)}),i=[],s=0,o=n.length;s<o;){var u=s++;i.push(n[u]*u*10)}for(var h=vy.sum(i),c=this._isBonus2?8:4,s=[],o=0,_=c;o<_;)s.push(o++);for(var d={},o=0,_=il.zip(s,this._gambleRewards);o<_.length;){var p=_[o];++o,d[p._0]=p._1}for(var m=this.pseudoRandomizeIndices(s,e,h),g=new Array(m.length),s=0,o=m.length;s<o;)g[u=s++]=d[m[u]];for(var f=g.pop(),e=this._shootingBoard.owner.parent._compMap,h=null!=e?e.h[Ne.BASE_NAME]:null,A=(h instanceof Ne?h:null).object,s=[],o=0;o<g.length;)s.push((n=>function(e){var t=new Js(r._config.coinRevealConfig);return r._shootingRangeEntityHolder.addChild((new ge).add(t)),t.object.object.set_follow(n[0].object.object),t.object.object.flags|=8,t.object.set_z(n[0].object.get_z()-.1),t.play("coinReveal"),t.play("coinSoot"),r._revealSpines.push(t),r._gameChannel.publish("shootGambleCoin"),rt.noise(tt.tween(n[0].object,[et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.1,null,function(e){return(e=e-1)*e*e+1},null,null,null,null,null))]))})([g[o++]]));for(var x=s.concat([function(e){return new Zy(new Yy(null))}]),s=[],o=0,_=c-1;o<_;)++o,s.push([et.Position(new nt(null,st.fromBacking(new it(null,.05,null,null)),.2,.15,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},!0,null,null,null,null)),et.Scale(new nt(null,st.fromBacking(new it(.1,.1,null,null)),.2,.1,null,function(e){return e<0||2<e?0:Math.sqrt(e*(2-e))},!0,null,null,null,null))]);function w(){B=!0;var e=tt.tween(A,[et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,l?.15:.5,.5,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(null,-1,null,null)),null,null,null,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},!0,null,null,null,null))]);return e.handle(function(){r._casinoChannel.unsubscribe(I),A.dispose()}),e}var y=s,b=null!=this.gambleCoinMultiplier?((s=new at).h.x="x",s.h[10]=",",s.h[11]=".",(h=new Zs(new xu(Wu.TileCharacters(t,0,s),null,.6,null,to.Always,null,null,null,null,null))).showText(el.string(this.gambleCoinMultiplier)),h.object.set_visible(!1),h.object.object.set_follow(f.object.object),h.object.object.flags|=8,h.object.set_z(.05),h.object.set_x(-.03),A.addChild(h.object.object),h):null,e=this._config.shootConfig.animations,v=e.h.shoot,C=e.h.idle,S=e.h.empty,k=null,M=new qy,I=null,B=!1;return Rt([function(e){return r.when(function(){return 1==r.isGambleCountup})},function(e){return r.when(function(){return 0==r.isGambleCountup})},function(e){return B?rt.NOISE:rt.noise(w())}]),Rt([function(e){return rt.noise(tt.colorTo(A,new nt(st.fromBacking(new it(null,null,null,1)),st.fromBacking(new it(null,null,null,0)),null,.25,null,null,null,null,null,null,null)))},function(e){return k=r._casinoChannel.subscribe("clickScreen",function(e){r._casinoChannel.unsubscribe(k)&&M.trigger(!0)}),r.after(.5)},function(e){for(var t=[],n=0,i=il.zip(x,y);n<i.length;){var s=i[n];++n,t.push(((t,s)=>function(e){return Rt([function(e){return rt.noise(rt.either(r.after(.25),M))},(n=t,i=s,function(e){var t;return r._gunArm.animator.play(v),r.after(.2).handle((t=n,function(){Rt([t[0]])})),r._gameChannel.publish("smokeyShoot"),rt.noise(rt.or(tt.tween(r._gunArm.object,i[0]),M))}),function(e){return rt.noise(rt.either(r.after(.5),M))}]);var n,i})([s._0],[s._1]))}return Rt(t)},function(e){return r._gameChannel.publish("finalGambleCoin"),r._casinoChannel.unsubscribe(k),r._gunArm.animator.play(C),r._gunArm.animator.play(S),r.after(.2)},function(e){return Rt([function(e){return r.after(.05)},function(e){return il.each(r._revealSpines.splice(0,r._revealSpines.length),function(e){tt.tween(e.object,[et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,null,.2,null,null,null,null,null,null,null))]).handle(Cn(e,e.dispose))}),rt.noise(r._shootingBoard.animator.play(r._config.shootRangeSpineConfig.animations.h.reveal)),r.after(.5)},function(e){return rt.noise(tt.tween(f.object,[et.Position(new nt(st.fromBacking(new it(0,-.05,null,null)),null,.4,.3,null,function(e){return 0==e?0:Math.exp(6.931471805599453*(e-1))},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(.2,.2,null,null)),null,.2,.5,null,function(e){return(e=2*e)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},!0,null,null,null,null))]))},function(e){return r.after(.5)},function(e){var t,n=r.getRewardAnimation(a,!0),i=(r._gameChannel.publish("flipGambleCoin",{type:el.string(a).toLowerCase()}),f.owner.getChildren()[0]),s=(t=null!=i&&(i=null!=(i=i._compMap)?i.h[mu.BASE_NAME]:null)instanceof mu?i:null,f.animator.play(n),null!=t&&tt.tween(t.object,[et.Scale(new nt(st.fromBacking(new it(1.3,1.3,null,null)),null,null,.4,null,o1.expoIn,null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,null,.4,null,o1.expoIn,null,null,null,null,null))]).handle(function(e){t.owner.dispose()}),"FS"==a?.4:.5);return Rt([function(e){return r.after(s)},function(e){return null!=b&&b.object.set_visible(!0),r.after(.2)},function(e){if(l)switch(a){case"BRONZE":case"DIAMOND":case"GOLD":case"SILVER":tt.tween(f.object,[et.Color(new nt(null,st.fromBacking(new it(1.5,1.5,1.5,null)),.3,.5,null,o1.quadOut,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(null,.075,null,null)),null,null,.3,null,o1.cubicIn,!0,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(null,-.075,null,null)),null,.3,1.5,null,o1.elasticOut,!0,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.8,1.4,null,null)),null,null,.3,null,o1.cubicIn,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,.3,1.5,null,o1.elasticOut,null,null,null,null,null))])}return r._textGambleWinning.object.set_visible(!0),rt.noise(tt.colorTo(r._textGambleWinning.object,new nt(st.fromBacking(new it(null,null,null,1)),null,null,.2,null,function(e){return 0==e?0:Math.exp(6.931471805599453*(e-1))},null,null,null,null,null)))}]),r.after(l?1:1.5)}])},function(e){return l?rt.NOISE:rt.noise(w())}])},layoutDialog:function(e){var t;switch(e){case"landscape":t={bg:B_.DIALOGUE,titlePos:st.fromBacking(new it(null,.54,.1,null)),gambleButtonYPos:this._config.buttonPositions.get(xc.GAMBLE),continueButtonYPos:this._config.buttonPositions.get(xc.CONTINUE)};break;case"portrait":t={bg:B_.DIALOGUE_PORTRAIT,titlePos:st.fromBacking(new it(null,.71,.1,null)),gambleButtonYPos:this._config.buttonPortraitPositions.get(xc.GAMBLE),continueButtonYPos:this._config.buttonPortraitPositions.get(xc.CONTINUE)}}this._dialogue.setTile(this._config.tileMap.get(t.bg),this._isMobile?1.35:1),this._title.object.setPos(t.titlePos),this._continueButton.sprite.object.setPos(t.continueButtonYPos),this._gambleButton.sprite.object.setPos(t.gambleButtonYPos),this._textNumberWon.get_displayable().layout(),this._textBonusDescription.get_displayable().layout()},layoutShootRange:function(e){var t,n=this._config.transformDataSets;switch(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0){case 0:t="SLIM";break;case.45:t="PORTRAIT";break;case.8:t="SQUARE";break;case 1.1:t="LANDSCAPE";break;case 2.1:t="WIDE";break;default:t="unknown"}this._gunArm.object.setPos(n.h[t])},createButton:function(t){var n,i=this;switch(t._hx_index){case 0:n={text:new gu(new bu(new vu(this._config.buttonTextGamble,null,null,null,null,null,null,null,null,to.Always,null,null,null)),null),buttonActive:this._config.tileMap.get(B_.BUTTON_RED_ACTIVE),buttonHover:this._config.tileMap.get(B_.BUTTON_RED_HOVER),action:"gamble"};break;case 1:n={text:new gu(new bu(new vu(this._config.buttonTextContinue,null,null,null,null,null,null,null,null,to.Always,null,null,null)),null),buttonActive:this._config.tileMap.get(B_.BUTTON_GREEN_ACTIVE),buttonHover:this._config.tileMap.get(B_.BUTTON_GREEN_HOVER),action:"play"}}var s=new mu(new gu(new bu(new vu(Cu.Tile(n.buttonActive),Cu.Tile(n.buttonHover),null,null,this._isMobile?1.35:1,this._isMobile?1.35:1,null,null,wr.Alpha,to.Always,null,null,null)),null)),e=new PA,e=(e.set($o.Down,new Fs(null,function(e){s.get_displayable().layout("portrait"),0==(1&e)||i._clicked||(i._clicked=!0,i._continueButton.button.set_enabled(!1),i._gambleButton.button.set_enabled(!1),i._gameChannel.publish("clickButton"),i._casinoChannel.publish("continue",{action:n.action,updateBalance:!1}),i.removeGambleDialog(0==t._hx_index))})),e.set($o.Hover,new Fs(function(e){i._gameChannel.publish("hoverButton"),s.get_displayable().layout("landscape")},function(e){s.get_displayable().layout("portrait")})),new Es(new Ds(function(e){return s.get_displayable().toElement().getCollider()},null,e,null))),a=new mu(n.text),l="landscape"==this.currentOrientation?this._config.buttonPositions:this._config.buttonPortraitPositions;return e.onAdded=function(){s.get_displayable().layout("portrait"),s.object.setPos(l.get(t))},{button:e,text:a,sprite:s}},removeGambleDialog:function(e){var t=this,n=this.owner.getChildren()[0]._compMap,n=null!=n?n.h[Ne.BASE_NAME]:null;tt.colorTo((n instanceof Ne?n:null).object,new nt(e?st.fromBacking(new it(null,null,null,0)):st.fromBacking(new it(0,0,0,null)),null,null,e?0:.6,null,null,null,null,null,null,null)).handle(function(){t.owner.disposeChildren()})},pseudoRandomizeIndices:function(e,t,n){for(var i=new t0(n),s=[],a=0;a<e.length;){var l=e[a];++a,l!=t&&s.push(l)}for(var r=s.length,a=0;a<r;){++a,i.seed=36969*(65535&i.seed)+(i.seed>>16),i.seed2=18e3*(65535&i.seed2)+(i.seed2>>16);var o=(1073741823&((i.seed<<16)+i.seed2|0))%r,u=(i.seed=36969*(65535&i.seed)+(i.seed>>16),i.seed2=18e3*(65535&i.seed2)+(i.seed2>>16),(1073741823&((i.seed<<16)+i.seed2|0))%r),h=s[o];s[o]=s[u],s[u]=h}return s.concat([t])},set_lastGrid:function(e){return this.lastGrid=null!=e?e:this.lastGrid},getRewardAnimation:function(e,t){var n,i=this._config.coinConfig.animations,s=this._config.symbolConfig.animations;switch(e){case"BRONZE":n={setupAnim:i.h.endBronze,winAnim:i.h.revealBronze};break;case"DIAMOND":n={setupAnim:i.h.endDiamons,winAnim:i.h.revealDiamond};break;case"FS":n={setupAnim:s.h.fsSetup,winAnim:s.h.fsWin};break;case"GOLD":n={setupAnim:i.h.endGold,winAnim:i.h.revealGold};break;case"SILVER":n={setupAnim:i.h.endSilver,winAnim:i.h.revealSilver};break;default:throw new tl('Not a valid reward type:  "'+e+'"')}return t?n.winAnim:n.setupAnim},get_isBonus2:function(){return this._isBonus2},get_baseName:function(){return"hacksaw.games.lecowboy.components.actor.GambleController"},__class__:or,__properties__:e(d.prototype.__properties__,{get_isBonus2:"get_isBonus2",set_lastGrid:"set_lastGrid"})}),fe["hacksaw.games.lecowboy.components.actor.ButtonType"]={__ename__:!0,__constructs__:null,GAMBLE:{_hx_name:"GAMBLE",_hx_index:0,__enum__:"hacksaw.games.lecowboy.components.actor.ButtonType",toString:o},CONTINUE:{_hx_name:"CONTINUE",_hx_index:1,__enum__:"hacksaw.games.lecowboy.components.actor.ButtonType",toString:o}}),wc=(xc.__constructs__=[xc.GAMBLE,xc.CONTINUE],xc.__empty_constructs__=[xc.GAMBLE,xc.CONTINUE],(i["hacksaw.games.lecowboy.components.actor.GambleHandlerConfig"]=ur).__name__="hacksaw.games.lecowboy.components.actor.GambleHandlerConfig",ur.prototype={__class__:ur},(i["hacksaw.games.lecowboy.components.actor.GridHighlightHandler"]=hr).__name__="hacksaw.games.lecowboy.components.actor.GridHighlightHandler",hr.__super__=d,hr.prototype=e(d.prototype,{activateCells:function(e){for(var s=this,t=il.filterNull(e.mapCells(function(e,t){var n,i;return!!e&&null==(e=s._grid).mData[t.y*e.mW+t.x]?(i=(n=new mu(new gu(new bu(s._config.displayConfig),null))).get_displayable().get_instance(),{cell:t,pos:(e=s._config.symPositions).mData[t.y*e.mW+t.x],marker:n,animator:2==i._hx_index?i.animator:null}):null})),n=(il.each(t,function(e){s.owner.addChild((new ge).add(e.marker));var t=s._grid,n=e.cell;t.mData[n.y*t.mW+n.x]=e.marker,e.marker.object.setPos(e.pos),e.marker.object.set_visible(!1)}),[]),i=0;i<t.length;){var a=t[i];++i,a.marker.object.set_visible(!0),n.push(rt.noise(a.animator.play(new Hh("activate",null,null,null))))}return rt.inParallel(n)},deactivateCells:function(){var n=this;il.each(il.filterNull(this._grid.mapCells(function(e,t){return null!=e?{val:e,cell:t}:null})),function(e){tt.colorTo(e.val.object,new nt(st.fromBacking(new it(null,null,null,0)),null,null,.2,null,null,null,null,null,null,null)).handle(Cn(R=e.val.owner,R.dispose));var t=n._grid,e=e.cell;t.mData[e.y*t.mW+e.x]=null})},get_baseName:function(){return"hacksaw.games.lecowboy.components.actor.GridHighlightHandler"},__class__:hr}),(i["hacksaw.games.lecowboy.components.actor.ActiveCellsConfig"]=cr).__name__="hacksaw.games.lecowboy.components.actor.ActiveCellsConfig",cr.prototype={__class__:cr},function(){this._tweens=new VA,d.call(this),this.componentType=Ie.Actor}),yc=((i["hacksaw.games.lecowboy.components.actor.QuaternionRotator"]=wc).__name__="hacksaw.games.lecowboy.components.actor.QuaternionRotator",wc.__super__=d,wc.prototype=e(d.prototype,{rotate:function(t,e){var n=this,i=this._tweens.h[t.object.__id__],i=(null!=i&&(Tt.cancel(i.tweenVector),i.tweenVector.dispose(),this._tweens.remove(t.object)),e.from),i=new yc(t,e.to,null!=i?i:t.object.getRotationQuat(),e.axis,e.targetAngle,e.duration,e.curve,new Et(0,0,0,1)),i=(this._tweens.set(t.object,i),Tt.tween(i.tweenVector,new nt(st.fromBacking(new it(1,null,null,null)),null,null,e.duration,null,e.curve,null,null,null,null,null)));return i.handle(function(e){n._tweens.remove(t.object)}),i},stopAndResetAllRotations:function(){il.each(zy.values(this._tweens),function(e){Tt.cancel(e.tweenVector),e.tweenVector.dispose(),e.object.object.setRotationQuat(new tn)}),this._tweens.h={__keys__:{}}},stop:function(e){var t;null!=this._tweens.h.__keys__[e.object.__id__]&&(t=this._tweens.h[e.object.__id__],Tt.cancel(t.tweenVector),t.tweenVector.dispose(),t.object.object.setRotationQuat(new tn),this._tweens.remove(e.object))},update:function(n){d.prototype.update.call(this,n),il.each(zy.values(this._tweens),function(e){Tt.update(e.tweenVector,n);var t=new tn;t.initRotateAxis(e.axis.x,e.axis.y,e.axis.z,e.targetAngle*e.tweenVector.x),e.object.object.setRotationQuat(t)})},get_baseName:function(){return"hacksaw.games.lecowboy.components.actor.QuaternionRotator"},__class__:wc}),(i["hacksaw.games.lecowboy.components.actor.RotateConfig"]=_r).__name__="hacksaw.games.lecowboy.components.actor.RotateConfig",_r.prototype={__class__:_r},function(e,t,n,i,s,a,l,r){this.object=e,this.to=t,this.from=n,this.axis=i,this.targetAngle=s,this.duration=a,this.curve=l,this.tweenVector=r}),bc=((i["hacksaw.games.lecowboy.components.actor.InternalRotateData"]=yc).__name__="hacksaw.games.lecowboy.components.actor.InternalRotateData",yc.prototype={__class__:yc},(i["hacksaw.games.lecowboy.components.actor.SceneryHandler"]=dr).__name__="hacksaw.games.lecowboy.components.actor.SceneryHandler",dr.__super__=d,dr.prototype=e(d.prototype,{init:function(){d.prototype.init.call(this),this.owner.addChild((new ge).add(this._background)).add(new Ne(new Ge(null,null,!0,null,null,null,null,null)))},switchBackground:function(e){null!=e&&this._background.setTile(this._config.bgTileMap.get(e))},addBackgroundBlur:function(e){null==e&&(e=0);for(var t=this.owner.parent,n=new Us,i=(tt.colorTo(this._background.object,new nt(st.fromBacking(new it(1.5,1.2,1.2,null)),null,null,e,null,null,null,null,null,null,null)),this.owner.parent.add(n),n.set(.5,e),[t]),s=e,n=st.fromBacking(new it(.5,.5,.5,null)),a=(null==e&&(s=.5),null==n?st.fromBacking(new it(.4,.4,.4,null)):n),l=new Array(i.length),r=0,o=i.length;r<o;)l[u=r++]={scene:i[u],comp:new Bs(new Ts(a,s,null,null))};il.each(l,function(e){e.scene.add(e.comp)});for(var u,h=new Array(l.length),r=0,o=l.length;r<o;)h[u=r++]=l[u].comp.tweenDone;rt.noise(rt.inParallel(h))},removeBackgroundBlur:function(e){for(var t=this.owner.parent,n=t._compMap,n=null!=n?n.h[Us.BASE_NAME]:null,i=n instanceof Us?n:null,s=[t],a=e=null==e?.2:e,l=(null==e&&(a=.5),st.fromBacking(new it(1,1,1,null))),r=new Array(s.length),o=0,u=s.length;o<u;)r[h=o++]={scene:s[h],comp:new Bs(new Ts(l,a,null,null))};il.each(r,function(e){e.scene.add(e.comp)});for(var h,c=new Array(r.length),o=0,u=r.length;o<u;)c[h=o++]=r[h].comp.tweenDone;rt.noise(rt.inParallel(c)),tt.colorTo(this._background.object,new nt(st.fromBacking(new it(1,1,1,null)),null,null,e,null,null,null,null,null,null,null)),null!=i&&i.set(0,e).handle(function(e){null!=i&&null!=i.owner&&i.owner.remove(i)})},addCountupBackground:function(e){var t;null==this._countupBackground&&(t=(new ge).add(new Ne(new Ge(null,null,!0,null,null,null,null,null))),this._countupBackground=new ea(new ta(this._config.bgTileMap.get(bc.COUNTUP),Jl.scale,null,null,null,null,null)),this._countupBackground.object.setPos(st.fromBacking(new it(null,null,-.12,null))),t.addChild((new ge).add(this._countupBackground)),e.addChild(t))},removeCountupBackground:function(){var e,t=this;return null==this._countupBackground?rt.NOISE:((e=tt.colorTo(this._countupBackground.object,new nt(st.fromBacking(new it(null,null,null,0)),null,1.7,.4,null,null,null,null,null,null,null))).handle(function(){t._countupBackground.owner.dispose(),t._countupBackground=null}),rt.noise(e))},layout:function(e,t,n){if(n)this._background.object.set_x(0);else{var i,s;switch(e){case 0:case.45:i=!0;break;default:i=!1}if(i){switch(t){case"base":s=1.4;break;case"epic":case"fs_2":s=-1.1;break;default:s=0}this._background.object.set_x(s)}else this._background.object.set_x(0)}},get_baseName:function(){return"hacksaw.games.lecowboy.components.actor.SceneryHandler"},__class__:dr}),fe["hacksaw.games.lecowboy.components.actor.BackgroundAsset"]={__ename__:!0,__constructs__:null,BASE:{_hx_name:"BASE",_hx_index:0,__enum__:"hacksaw.games.lecowboy.components.actor.BackgroundAsset",toString:o},BONUS_ONE:{_hx_name:"BONUS_ONE",_hx_index:1,__enum__:"hacksaw.games.lecowboy.components.actor.BackgroundAsset",toString:o},BONUS_ONE_SPLASH:{_hx_name:"BONUS_ONE_SPLASH",_hx_index:2,__enum__:"hacksaw.games.lecowboy.components.actor.BackgroundAsset",toString:o},BONUS_TWO:{_hx_name:"BONUS_TWO",_hx_index:3,__enum__:"hacksaw.games.lecowboy.components.actor.BackgroundAsset",toString:o},BONUS_THREE:{_hx_name:"BONUS_THREE",_hx_index:4,__enum__:"hacksaw.games.lecowboy.components.actor.BackgroundAsset",toString:o},COUNTUP:{_hx_name:"COUNTUP",_hx_index:5,__enum__:"hacksaw.games.lecowboy.components.actor.BackgroundAsset",toString:o}}),vc=(bc.__constructs__=[bc.BASE,bc.BONUS_ONE,bc.BONUS_ONE_SPLASH,bc.BONUS_TWO,bc.BONUS_THREE,bc.COUNTUP],bc.__empty_constructs__=[bc.BASE,bc.BONUS_ONE,bc.BONUS_ONE_SPLASH,bc.BONUS_TWO,bc.BONUS_THREE,bc.COUNTUP],(i["hacksaw.games.lecowboy.components.actor.SceneryHandlerConfig"]=pr).__name__="hacksaw.games.lecowboy.components.actor.SceneryHandlerConfig",pr.prototype={__class__:pr},function(){this.diamondValues=new Pi(150,500),this.goldValues=new Pi(25,100),this.silverValues=new Pi(5,20),this.bronzeValues=new Pi(1,4),d.call(this),this.componentType=Ie.Model}),Cc=((i["hacksaw.games.lecowboy.components.model.CoinValueModel"]=vc).__name__="hacksaw.games.lecowboy.components.model.CoinValueModel",vc.__super__=d,vc.prototype=e(d.prototype,{getDigitAtlas:function(e){return e>=this.diamondValues.start?J.digits_diamond:e>=this.goldValues.start?J.digits_gold:e>=this.silverValues.start?J.digits_silver:J.digits_bronze},get_baseName:function(){return"hacksaw.games.lecowboy.components.model.CoinValueModel"},__class__:vc}),function(){this.reloadIndicator=!0,this.autoProgressed=!1,d.call(this),this.componentType=Ie.Model}),Sc=((i["hacksaw.games.lecowboy.components.model.GameModel"]=Cc).__name__="hacksaw.games.lecowboy.components.model.GameModel",Cc.__super__=d,Cc.prototype=e(d.prototype,{get_baseName:function(){return"hacksaw.games.lecowboy.components.model.GameModel"},__class__:Cc}),(i["hacksaw.games.lecowboy.components.view.BulletBar"]=mr).__name__="hacksaw.games.lecowboy.components.view.BulletBar",mr.__super__=B,mr.prototype=e(B.prototype,{init:function(){var e;B.prototype.init.call(this),this.object.addChild(this._bulletSpine),this.object.addChild(this._ammoText),this.object.setPosition(-1,0,.05),this._ammoAmount=this._config.startValue,this.updateBulletIndicator(this._ammoAmount),5==this._config.startValue&&(e=this._config.animations.h.epic_reload,this._bulletSpine.get_animator().play(e)),this._ammoText.showText(""+this._ammoAmount),this._ammoText.tweenObject.object.set_follow(this.object.object),this._ammoText.tweenObject.object.flags|=8,this._bulletSpine.tweenObject.set_z(-.02),this._bulletSpine.tweenObject.object.set_follow(this.object.object)},update:function(e){B.prototype.update.call(this,e),this._bulletSpine.update(e),this._ammoText.update(e)},updateAmmo:function(e,t,n){null==n&&(n=0),null==e&&(e=!1);function i(){return a._ammoText.showText(""+s.amount,!0),tt.tween(a._ammoText.tweenObject,s.amountTween),tt.tween(a._bulletSpine.tweenObject,s.isLastShot&&e?a._config.darkenTween:a._config.resetTween),a.updateBulletIndicator(s.amount,e)}var s,a=this;s=(t=null==t?!1:t)||!e?{amount:this._ammoAmount,amountTween:this._config.incrementTween,isLastShot:null}:{amount:t=(t=el.parseInt(this._ammoText.currString)-1)<0?0:t,amountTween:(t=0==t)?this._config.darkenTween:this._config.shootTween,isLastShot:t};return e?i():Rt([function(e){return a.after(n)},function(e){return i()}])},increaseAmmoAmount:function(){var e=this._ammoAmount+1,t=this._maxAmmoAmount;this._ammoAmount=t<e?t:e},playAttentionTween:function(){var t=this;this._gameChannel.publish("bulletIndicatorShootout");return rt.noise(Rt([function(e){return tt.tween(t._ammoText.tweenObject,[et.Color(new nt(st.fromBacking(new it(1.5,1.4,1.25,null)),st.fromBacking(new it(1,1,1,null)),null,.36,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.4,1.4,null,null)),st.fromBacking(new it(1,1,null,null)),.3,.54,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))]),rt.noise(tt.tween(t._bulletSpine.tweenObject,[et.Color(new nt(st.fromBacking(new it(1.5,1.4,1.25,null)),st.fromBacking(new it(1,1,1,null)),null,.36,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.4,1.4,null,null)),st.fromBacking(new it(1,1,null,null)),.3,.81,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,6*Math.PI,null)),null,.3,.75,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))]))},function(e){return tt.tween(t._bulletSpine.tweenObject,[et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,null,.4*.8,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))]),rt.noise(tt.tween(t._ammoText.tweenObject,[et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,null,.4,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))]))}]))},updateBulletIndicator:function(e,i){null==i&&(i=!1);var t,s,a=this,n=(e-1)%this._chamberMaxAmount+1,l=i?7-(n%this._chamberMaxAmount+1):n,r=6==n&&0!=e,n=(s=r?6==n?"tier_"+n+"_"+(i?"shoot":"reload"):"setup":(this._gameChannel.publish(i?"bulletIndicatorShoot":"bulletIndicatorAdd",{currentValue:this._ammoAmount}),t=i?"shoot":"reload",0==n&&"reload"==t?"setup":"tier_"+l+"_"+t),1==l&&!i&&7<=e&&!this._config.casinoModel.superTurbospin?this.getPrePresentation():rt.NOISE);return n.handle(function(e){var t,n;r&&i?(t=a._config.animations.h[s],a._bulletSpine.get_animator().play(t).handle(function(){var e=a._config.animations.h.tier_6_setup;a._bulletSpine.get_animator().play(e)})):(n=a._config.animations.h[s],a._bulletSpine.get_animator().play(n)),i||(n=a._config.animations.h.track_reload,a._bulletSpine.get_animator().play(n))}),n},getPrePresentation:function(){var n=this,i=this._config.casinoModel.currentTurboValue({normal:1,turbo:.3,superTurbo:0});return rt.noise(Rt([function(e){n._gameChannel.publish("bulletIndicatorFullSpin");var t=.6*i;return tt.tween(n._ammoText.tweenObject,[et.Color(new nt(st.fromBacking(new it(1.5,1.4,1.25,null)),st.fromBacking(new it(1,1,1,null)),null,t,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),st.fromBacking(new it(1,1,null,null)),.25*t,.75*t,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))]),tt.tween(n._bulletSpine.tweenObject,[et.Color(new nt(st.fromBacking(new it(1.5,1.4,1.25,null)),st.fromBacking(new it(1,1,1,null)),null,t,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),st.fromBacking(new it(1,1,null,null)),.5*t,.5*t,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,Math.PI,null)),null,.25*t,.75*t,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))])},function(e){return n._bulletSpine.get_animator().playEmptyAnimation(0,0)},function(e){var t=.4*i;return tt.tween(n._bulletSpine.tweenObject,[et.Rotate(new nt(st.fromBacking(new it(null,null,0,null)),null,null,.8*t,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,null,.8*t,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))]),tt.tween(n._ammoText.tweenObject,[et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,null,t,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))])}]))},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:mr}),(i["hacksaw.games.lecowboy.components.view.BulletBarConfig"]=gr).__name__="hacksaw.games.lecowboy.components.view.BulletBarConfig",gr.prototype={__class__:gr},(i["hacksaw.games.lecowboy.components.view.Character"]=fr).__name__="hacksaw.games.lecowboy.components.view.Character",fr.__super__=B,fr.prototype=e(B.prototype,{init:function(){B.prototype.init.call(this),this.object.addChild(this._spineElement);for(var e=new PA,t=this._config.idleAnimationMaps,n=t.keys();n.hasNext();){for(var i=n.next(),s=t.get(i),a=0,l=new VA,r=s.h,o=(c=Object.keys(r)).length,u=0;u<o;){if((p=null==(p=(d=r[_=c[u++]])+a-1)?2147483647:p)<a)throw tl.thrown("Range needs to start before end. "+a+" > "+p+" but should be start <= end");var h=new Qi(a,p);a+=d,l.set(h,_)}e.set(i,{pool:l,weight:a})}this._idleAnimationPools=e;for(e=new PA,n=(t=this._config.shootAnimationMaps).keys();n.hasNext();){for(var c,_,d,p,i=n.next(),s=t.get(i),a=0,l=new VA,r=s.h,o=(c=Object.keys(r)).length,u=0;u<o;){if((p=null==(p=(d=r[_=c[u++]])+a-1)?2147483647:p)<a)throw tl.thrown("Range needs to start before end. "+a+" > "+p+" but should be start <= end");h=new Qi(a,p);a+=d,l.set(h,_)}e.set(i,{pool:l,weight:a})}this._shootAnimationPools=e,this.setPool(Sc.BASE)},update:function(e){B.prototype.update.call(this,e),this._spineElement.update(e)},queueAnimation:function(e,t){(t=null==t?!1:t)?(this._spineElement.stopAnimation(),this.playAnimation(e)):this._queuedAnimation=e},getCurrentDuration:function(){return this._spineElement.get_animator().getCurrentDuration()},setPool:function(e){this._activePoolType=e,this._currentAnimationPool=this._idleAnimationPools.get(e),this._currentShootAnimationPool=this._shootAnimationPools.get(e)},playRevolverReactAnimation:function(e){var t=new Qi(0,5),n=new Qi(6,12),i=new Qi(13,19),t=e>=t.start&&e<=t.end?null:e>=n.start&&e<=n.end?1==this._activePoolType._hx_index?"EPIC_REACT":"REACT":e>=i.start&&e<=i.end?1==this._activePoolType._hx_index?"EPIC_SMALL_WIN":"SMALL_WIN":1==this._activePoolType._hx_index?"EPIC_BIG_WIN":"BIG_WIN";null!=t&&this.queueAnimation(t,!0)},layout:function(e){if(this.enabledLayout&&this.enable){this.object.set_visible(!0);var t,n=this._config.transformDataSets;switch(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0){case 0:t="SLIM";break;case.45:t="PORTRAIT";break;case.8:t="SQUARE";break;case 1.1:t="LANDSCAPE";break;case 2.1:t="WIDE";break;default:t="unknown"}e=n.h[t];this.object.setScale(e.scale),this.object.setPos(e.pos)}},getRandomAnimation:function(){var e=this.isInShootStance?this._currentShootAnimationPool:this._currentAnimationPool,t=el.random(e.weight);return Py.find(new $A(e.pool),function(e){e=e.key;return t>=e.start&&t<=e.end}).value},playAnimation:function(e){var t=this,n=null!=e?e:this.getRandomAnimation(),i=this._config.animations.h[n],e=this._spineElement.get_animator().play(i);if(this.enable){var s,a,l,i=function(){return t._gameChannel.publish("smokeyAnimation",{animationName:n.toLowerCase()})};switch(n.toLowerCase()){case"epic_scratch_butt":case"scratch_butt":case"stomp":case"stomp_swear":s=1.6;break;default:s=0}0<s?(a=this.after(s).handle(i),l=this._gameChannel.subscribe("stopBeingAngry",function(e){null!=a&&a.cancel()}),e.handle(function(){t._gameChannel.unsubscribe(l)})):i()}return e.handle(function(e){e&&!t.isInShootStance&&(t.playAnimation(t._queuedAnimation),t._queuedAnimation=null)}),e},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:fr}),(i["hacksaw.games.lecowboy.components.view.CharacterConfig"]=Ar).__name__="hacksaw.games.lecowboy.components.view.CharacterConfig",Ar.prototype={__class__:Ar},fe["hacksaw.games.lecowboy.components.view.PoolType"]={__ename__:!0,__constructs__:null,BASE:{_hx_name:"BASE",_hx_index:0,__enum__:"hacksaw.games.lecowboy.components.view.PoolType",toString:o},EPIC:{_hx_name:"EPIC",_hx_index:1,__enum__:"hacksaw.games.lecowboy.components.view.PoolType",toString:o}}),kc=(Sc.__constructs__=[Sc.BASE,Sc.EPIC],Sc.__empty_constructs__=[Sc.BASE,Sc.EPIC],fe["hacksaw.games.lecowboy.helpers.DialogType"]={__ename__:!0,__constructs__:null,FeatureStart:{_hx_name:"FeatureStart",_hx_index:0,__enum__:"hacksaw.games.lecowboy.helpers.DialogType",toString:o},FeatureEnd:((R=function(e){return{_hx_index:1,countAmount:e,__enum__:"hacksaw.games.lecowboy.helpers.DialogType",toString:o}})._hx_name="FeatureEnd",R.__params__=["countAmount"],R)}),Mc=(kc.__constructs__=[kc.FeatureStart,kc.FeatureEnd],kc.__empty_constructs__=[kc.FeatureStart],fe["hacksaw.games.lecowboy.helpers.DialogContent"]={__ename__:!0,__constructs__:null,BACKGROUND:{_hx_name:"BACKGROUND",_hx_index:0,__enum__:"hacksaw.games.lecowboy.helpers.DialogContent",toString:o},BONUS_GAME_NAME:{_hx_name:"BONUS_GAME_NAME",_hx_index:1,__enum__:"hacksaw.games.lecowboy.helpers.DialogContent",toString:o},BONUS_GAME_DESCRIPTION:{_hx_name:"BONUS_GAME_DESCRIPTION",_hx_index:2,__enum__:"hacksaw.games.lecowboy.helpers.DialogContent",toString:o},BONUS_SPIN_AMOUNT:{_hx_name:"BONUS_SPIN_AMOUNT",_hx_index:3,__enum__:"hacksaw.games.lecowboy.helpers.DialogContent",toString:o},SCREEN_CLICK_PROMPT:{_hx_name:"SCREEN_CLICK_PROMPT",_hx_index:4,__enum__:"hacksaw.games.lecowboy.helpers.DialogContent",toString:o},EPIC_HIDDEN_STICKER:{_hx_name:"EPIC_HIDDEN_STICKER",_hx_index:5,__enum__:"hacksaw.games.lecowboy.helpers.DialogContent",toString:o}});function Ic(n,e,i,t,s,a,l,r){var o,u,h,c,_=t.featureBody,d=ks.bitmapFonts.h[_.font].toSdfFont(_.size,4),p=t.featureBodyPortrait,m=ks.bitmapFonts.h[p.font].toSdfFont(p.size,4),g=t.featureInfo,f=ks.bitmapFonts.h[g.font].toSdfFont(g.size,4),A=t.splashFooter,z=ks.bitmapFonts.h[A.font].toSdfFont(A.size,4),x=t.totalFooter,Q=ks.bitmapFonts.h[x.font].toSdfFont(x.size,4),w=J.misc,y=J.misc_info.frames;switch(e){case"epic":o={titleAsset:Kh.getTile(w,y.pistols_at_dawn),descriptionString:"epic_bonus_desc"};break;case"fs":o={titleAsset:Kh.getTile(w,y.high_noon_saloon),descriptionString:"high_noon_bonus_desc"};break;case"fs_2":o={titleAsset:Kh.getTile(w,y.trail_of_trickery),descriptionString:"trickery_bonus_desc"};break;default:throw new tl('No settings configured for this game mode: "'+e+'"')}switch(i._hx_index){case 0:switch((b=new PA).set(Mc.BONUS_GAME_NAME,new bu(new vu(Cu.Tile(o.titleAsset),null,st.fromBacking(new it(null,1.45,.35,null)),st.fromBacking(new it(null,1.1,.35,null)),Jl.scale,null,null,null,null,null,null,null,null))),e){case"epic":case"fs":case"fs_2":h=new bu(new vu(Cu.Text(Wu.FontCharacters(m,p,null,Mr.MultilineCenter,!0,1100,150),new ku(hacksawCasino.Translation.game("you_won_num_free_spins_uc"),null)),Cu.Text(Wu.FontCharacters(d,_,null,Mr.Center,!1,1100,125),new ku(hacksawCasino.Translation.game("you_won_num_free_spins_uc"),null)),st.fromBacking(new it(null,.625,.325,null)),st.fromBacking(new it(null,.3,.325,null)),null,null,null,null,null,to.Always,null,null,null));break;default:throw new tl('No dialog texts configured for this game mode: "'+e+'"')}b.set(Mc.BONUS_SPIN_AMOUNT,h),b.set(Mc.BONUS_GAME_DESCRIPTION,new bu(new vu(Cu.Text(Wu.FontCharacters(m,p,null,Mr.MultilineCenter,!0,1200,850),new ku(hacksawCasino.Translation.game(o.descriptionString),null)),Cu.Text(Wu.FontCharacters(d,_,null,Mr.MultilineCenter,!0,1300,550),new ku(hacksawCasino.Translation.game(o.descriptionString),null)),st.fromBacking(new it(null,-.375,.325,null)),st.fromBacking(new it(null,-.325,.325,null)),null,null,null,null,null,to.Always,null,null,null))),b.set(Mc.BACKGROUND,new bu(new vu(Cu.Tile(Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.intro_splash_bonus_vertical)),Cu.Tile(Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.intro_splash_bonus)),st.fromBacking(new it(null,.07,null,null)),st.fromBacking(new it(null,0,null,null)),a?2.7:2,null,null,null,null,null,null,null,null))),u=b;break;case 1:var b=new PA,v=new at;v.h.totalFreespins=null==s?"null":""+s,b.set(Mc.BONUS_SPIN_AMOUNT,new bu(new vu(Cu.Text(Wu.FontCharacters(f,g,null,Mr.MultilineCenter,!0,1100,200),new ku(hacksawCasino.Translation.game("num_free_spins_played",v),null)),null,st.fromBacking(new it(null,-1.1,.35,null)),null,null,null,null,null,null,null,null,null,null))),u=b}switch(i._hx_index){case 0:c={yPos:-1.25,yPosPortrait:-1.55,style:A,font:z};break;case 1:c={yPos:-1.8,yPosPortrait:-1.8,style:x,font:Q}}(b=new PA).set(Mc.SCREEN_CLICK_PROMPT,new bu(new vu(Cu.Text(Wu.FontCharacters(c.font,c.style,null,Mr.Center,!1,1100,150),new ku(hacksawCasino.Translation.game("click_to_continue_uc"),null)),null,st.fromBacking(new it(null,c.yPosPortrait,.4,null)),st.fromBacking(new it(null,c.yPos,.4,null)),null,null,null,null,wr.AlphaAdd,null,null,null,null)));var C,t=new PA,l=(zy.merge(t,[u,b]),0==i._hx_index&&"epic"==e&&t.set(Mc.EPIC_HIDDEN_STICKER,new bu(new vu(Cu.Tile(Kh.getTile(J.splash,J.splash_info.frames.hidden_epic_bonus)),null,st.fromBacking(new it(.9,1.05,.5,null)),st.fromBacking(new it(1.3,.65,.5,null)),Jl.scale,null,st.fromBacking(new it(null,null,-.1*Math.PI,null)),null,null,to.Always,null,null,null))),new Os(new Ws(il.filterNull([null==l?null:ou.Timer(l),ou.FullScreenButton,ou.Message("casino","clickScreen")]),t,null)));switch(i._hx_index){case 0:C=new Ge(new te(null,null,-.1,-.1),null,null,null,null,1,null,null);break;case 1:var S=new Ur;S.xMin=-2,S.yMin=-2,S.zMin=-1,S.xMax=0,S.yMax=0,S.zMax=0,C=new Ge(new te(.9,1,-.03,-.03),S,null,null,null,1,null,null)}var k,M,I,t=new Ne(C),B=(new ge).add(t).add(l),T=t.object,E=(T.set_z(.1),T.set_visible(!1),(new ge).add(new Ne(new Ge(new te(null,null,.15,.15),null,null,null,null,1,null,null)))),F=null,D=1==i._hx_index?(b=hacksawCasino.MoneyHelper.getDecimalDigits(),I=new Hu(0,!0,null,null,hacksawCasino.MoneyHelper.getDecimalSeparator(),b,null),(b=new at).h[10]=",",b.h[11]=".",k=new pu(I,new xu(Wu.TileCharacters(J.digits_countup,0,b),null,.42,null,to.Always,null,null,null,null,null)),I=n.getFromParentsByName(ee.BASE_NAME,ee),M=function(e){var t,e=e.width/e.height,n=e/.9,i=n<=0?0:1<=n?1:n,i=i<0||2<i?0:Math.sqrt(i*(2-i));switch(k.object.set_y(.8*(1-i)+-.15*i),lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0){case.8:t=.22;break;case 1.1:t=.35;break;case 2.1:t=.37;break;default:t=.19}i=E._compMap;return((n=null!=i?i.h[Ne.BASE_NAME]:null)instanceof Ne?n:null).set_margins(new te(null,null,t,t))},k.object.set_z(.5),E.addChild((new ge).add(k)),k.object.set_visible(!1),M({width:I.stageSize.x,height:I.stageSize.y}),F=I.resizeSignal.connect(function(e){M(e)}),k):null,R=K.countup_tiers_info.animations,P=1==i._hx_index?((b=new at).h[R.total_win_trigger]=new Cl(R.total_win_trigger,null,null,null,null,null,null,null,null,null,null,null,null,null,null),b.h[R.total_win_idle]=new Cl(R.total_win_idle,!0,null,null,null,null,null,null,null,null,null,null,null,null,null),b.h[R.total_win_remove]=new Cl(R.total_win_remove,null,null,null,null,null,null,null,null,null,null,null,null,null,null),I=new Js(new $s(K.countup_tiers,2.9,null,null,null,null,null,b,null,!0,!0,null)),B.addChild((new ge).add(I)),I.object.set_y(.19),I.object.set_visible(!1),I):null;return t.onAdded=function(){Rt([function(e){return tt.colorTo(T,new nt(st.fromBacking(new it(0,0,0,0)),null,null,0,null,null,null,null,null,null,null))},function(e){return T.set_visible(!0),tt.colorTo(T,new nt(st.fromBacking(new it(1,1,1,1)),null,null,.2,null,null,null,null,null,null,null))},function(e){var t;return 1==i._hx_index?(t=i.countAmount,P.object.set_visible(!0),P.play(R.total_win_trigger).handle(function(){P.play(R.total_win_idle)}),D.object.set_visible(!0),D.countTo(t,.25)):null}])},l.set_onClose(function(e){var t=null!=P;return null!=F&&F.dispose(),rt.noise(Rt([function(e){var u;return t&&(u=il.find(n.getFromParentsByName(Ye.BASE_NAME,Ye).scenes,function(e){return"background"==e.name}).entity,tt.translateTo(T,new nt(st.fromBacking(new it(0,null,null,null)),null,null,.75,null,null,!0,null,null,null,null)).handle(function(e){for(var t=[u],n=st.fromBacking(new it(0,0,0,null)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,.25,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;rt.noise(rt.inParallel(o))}),Bc(rt.noise(tt.rotateTo(P.object,new nt(st.fromBacking(new it(null,null,0,null)),null,null,.05,null,null,null,null,null,null,null))),n.getFromParentsByName(Ye.BASE_NAME,Ye),a)),tt.rotateTo(T,new nt(st.fromBacking(new it(null,null,0,null)),null,null,t?1:0,null,null,null,null,null,null,null))},function(e){null!=r&&r.trigger(null),null!=P&&P.play(R.total_win_remove),null!=P&&P.animator.setTimescale(4),null!=D&&D.skip();var t=[et.Color(new nt(st.fromBacking(new it(0,0,0,0)),null,null,.25,null,null,null,null,null,null,null))];return null!=D&&tt.tween(D.object,t),tt.tween(T,t)}]))}),n.addChild(B).addChild(E),l}function Bc(e,t,n){var n=new mu(new gu(new bu(new vu(Cu.Tile(Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.tumbleweed)),null,null,null,n?1.3:1,null,null,null,null,null,null,null,null)),null)),i=new Ge(null,null,!0,null,null,5.5,null,null),s=new Ne(i),a=t.addScene(new Ke("transition",!0,null,!1,null,null)),l=a._compMap,l=null!=l?l.h[He.BASE_NAME]:null,l=(l instanceof He?l:null).scene3d,l=(a.add(new Oe(new We(null,null,null,st.fromBacking(new it(0,0,10,null)),null,null,100,null,null,null,null))),nl.__cast(l.lightSystem,To).ambientLight),l=(l.x=1,l.y=1,l.z=1,a.addChild((new ge).add(s).addChild((new ge).add(n))),e.handle(function(e){i.speed=.1}),tt.tween(n.object,[et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,null,0,null,null,null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(null,null,null,1)),null,.06,.25,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(2,null,.01,null)),st.fromBacking(new it(-2,null,.01,null)),.04,2,null,o1.quadInOut,null,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,Math.PI/180*-500,null)),null,.04,2,null,o1.quadInOut,null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,1.79,.25,null,null,null,null,null,null,null))]));return l.handle(function(e){t.removeScene("transition")}),l}function Tc(e,t,n,i,s){null==s&&(s=1),null==i&&(i=10);var e=e.addScene(new Ke(t,!0,null,n=null==n?!1:n,null,null)),t=e._compMap,n=null!=t?t.h[He.BASE_NAME]:null,t=(n instanceof He?n:null).scene3d,n=(e.add(new Oe(new We(null,null,null,st.fromBacking(new it(null,null,i,null)),null,null,100,null,null,null,null))),nl.__cast(t.lightSystem,To).ambientLight),i=s,t=s,a=null==s?0:s;return null==s&&(t=0),n.x=i=null==s?0:i,n.y=t,n.z=a,e}function Ec(e){return new wa(null,"000000000000001100000000000000",null,null,wA.toString(e),null,null,null,null,null,null,null,null,null,null)}function Fc(){}function Dc(){}function Rc(e,t,n,i,s,a,l,r){this.randomReelStartPosition=!1,this.superTurboStopDelay=null,this.turboStopDelay=null,this.normalStopDelay=null,this.superTurboStartDelay=null,this.turboStartDelay=null,this.normalStartDelay=null,this.spinConfig=e,null!=t&&(this.normalStartDelay=t),null!=n&&(this.turboStartDelay=n),null!=i&&(this.superTurboStartDelay=i),null!=s&&(this.normalStopDelay=s),null!=a&&(this.turboStopDelay=a),null!=l&&(this.superTurboStopDelay=l),null!=r&&(this.randomReelStartPosition=r)}function Pc(e,t,n,i){this.defaultValues={normal:new Q_(.4,0,18,function(e){var t,n=[0,-.25,.5,1];if(n.length<2)throw tl.thrown("points length must be more than 2");return 2==n.length?n[0]*(1-e)+n[1]*e:3==n.length?(n[0]*(1-e)+(t=n[1])*e)*(1-e)+(t*(1-e)+n[2]*e)*e:m1._bezier(e,n)},.16,null,null,20,!0,15,5,.8,V_.Elastic(.93,.1),V_.Elastic(.93,.2)),turbo:new Q_(.2,.2,1,function(e){var t,n=[0,-.25,.5,1];if(n.length<2)throw tl.thrown("points length must be more than 2");return 2==n.length?n[0]*(1-e)+n[1]*e:3==n.length?(n[0]*(1-e)+(t=n[1])*e)*(1-e)+(t*(1-e)+n[2]*e)*e:m1._bezier(e,n)},.01,null,null,.6,!0,15,0,0,V_.Elastic(.93,.05),V_.None),superTurbo:new Q_(1,0,85,function(e){var t,n=[0,-.025,-.025,-.00375,-.05,1];if(n.length<2)throw tl.thrown("points length must be more than 2");return 2==n.length?n[0]*(1-e)+n[1]*e:3==n.length?(n[0]*(1-e)+(t=n[1])*e)*(1-e)+(t*(1-e)+n[2]*e)*e:m1._bezier(e,n)},0,null,0,0,!0,0,0,0,V_.None,V_.None)},this.superTurbo=null,this.normal=e,this.turbo=t,null!=n&&(this.superTurbo=n),null!=i&&(this.defaultValues=i)}function zc(){}function Qc(e,t,n){this.groupMultipliers=!1,this.merge=!1,(this.delay=null)!=e&&(this.delay=e),null!=t&&(this.merge=t),null!=n&&(this.groupMultipliers=n)}function Vc(e,t,n){this.triggerBetweenCells=!1,this.presentationGrid=e,this.result=t,null!=n&&(this.triggerBetweenCells=n)}function Oc(){d.call(this),this.componentType=Ie.Actor}function Wc(){d.call(this),this.componentType=Ie.Actor}function Nc(){Wc.call(this)}function Gc(e,t,n,i,s,a){null==a&&(a=!1),null==t&&(t=id.SymbolWin),this._indefinite=!1,this._hasEndDuration=!1,this._instances=new at,d.call(this),this._filters=e,this._gridConf=n,this.type=t,this._configDuration=i,this._hasEndDuration=a,this._presentationIndex=s,this.componentType=Ie.Actor}function Uc(e,t,n,i){this.offset=null,this.delay=0,this.tweens=null,(this.phaseAnimation=null)!=e&&(this.phaseAnimation=e),null!=t&&(this.tweens=t),null!=n&&(this.delay=n),null!=i&&(this.offset=i)}function Lc(e){this.activePresentations=e}function jc(e,t,n,i){Gc.call(this,t,n,null,i),this._config=e}function Hc(e){this.presentations=e}function Yc(e,t,n,i,s){null==n&&(n=id.SymbolWin),this._activeShaders=[],Gc.call(this,t,n,new nd(e.rowDelay,e.colDelay,e.delay,null,e.distanceDelay,e.delayPattern),i,s,!0),this._config=e}function Zc(e,t,n,i,s,a,l,r,o,u){this.delay=0,this.distanceDelay=0,this.delayPattern=null,this.rowDelay=0,this.colDelay=0,this.endTweens=null,this.tweens=null,this.args=null,this.target=qu.All,this.shader=e,null!=t&&(this.target=t),null!=n&&(this.args=n),null!=i&&(this.tweens=i),null!=s&&(this.endTweens=s),null!=a&&(this.colDelay=a),null!=l&&(this.rowDelay=l),null!=r&&(this.delayPattern=r),null!=o&&(this.distanceDelay=o),null!=u&&(this.delay=u)}function Xc(e,t,n,i){this._paylines=[],this._config=e,Gc.call(this,t,n,null,i)}function qc(e,t,n,i){this.onEnd=function(){return rt.NOISE},this.onStart=function(){return rt.NOISE},this.onUpdate=function(e){},this.element=e,null!=t&&(this.onUpdate=t),null!=n&&(this.onStart=n),null!=i&&(this.onEnd=i)}function Kc(e,t,n,i,s,a){this.ignoreNonWinningLines=!0,this.paylineRevealMode=wd.Full,this.lineShape=Nh.Linear,this.elementSpacing=yd.Midpoints,this.lines=e,this.createElement=t,null!=n&&(this.elementSpacing=n),null!=i&&(this.lineShape=i),null!=s&&(this.paylineRevealMode=s),null!=a&&(this.ignoreNonWinningLines=a)}function Jc(e){this.superTurboActive=!1,this.turboActive=!1,this.defaultsMerged=!1,this.mode="default",this.ongoingBehavior=!1,this._model=e.model,this._renderer=e.renderer,this._casinoModel=e.casinoModel,this._actor=e.actor,this._configProps=e.props,this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino")}function $c(e){Jc.call(this,e)}function e_(e){Jc.call(this,e)}function t_(e,t,n,i,s){this.model=e,this.actor=t,this.renderer=n,this.casinoModel=i,this.props=s}function n_(){}function i_(){}Mc.__constructs__=[Mc.BACKGROUND,Mc.BONUS_GAME_NAME,Mc.BONUS_GAME_DESCRIPTION,Mc.BONUS_SPIN_AMOUNT,Mc.SCREEN_CLICK_PROMPT,Mc.EPIC_HIDDEN_STICKER],Mc.__empty_constructs__=[Mc.BACKGROUND,Mc.BONUS_GAME_NAME,Mc.BONUS_GAME_DESCRIPTION,Mc.BONUS_SPIN_AMOUNT,Mc.SCREEN_CLICK_PROMPT,Mc.EPIC_HIDDEN_STICKER];var s_=function(){this.tweenTime__=0,At.call(this)},a_=((i["hacksaw.games.lecowboy.shaders.BlackBarsShader"]=s_).__name__="hacksaw.games.lecowboy.shaders.BlackBarsShader",s_._SHADER=null,s_.__super__=At,s_.prototype=e(At.prototype,{get_tweenTime:function(){return this.tweenTime__},set_tweenTime:function(e){return this.tweenTime__=e},updateConstants:function(e){this.constBits=0,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.flipY__;case 1:return this.colorMap__;case 2:return this.colorMap2__;case 3:return this.normalMap__;case 4:return this.depthMap__;case 5:return this.noiseMap__;case 6:return this.resolution__;case 7:return this.time__;case 8:return this.tweenTime__}return null},getParamFloatValue:function(e){switch(e){case 0:return this.flipY__;case 7:return this.time__;case 8:return this.tweenTime__}return 0},__class__:s_,__properties__:e(At.prototype.__properties__,{set_tweenTime:"set_tweenTime",get_tweenTime:"get_tweenTime"})}),function(){Wl.call(this)}),l_=((i["hacksaw.games.lecowboy.states.FeatureEnterState"]=a_).__name__="hacksaw.games.lecowboy.states.FeatureEnterState",a_.__super__=Wl,a_.prototype=e(Wl.prototype,{enter:function(){for(var u=this,e=(this.publish("casino","showUi"),[this.baseScene,this.backgroundScene,this.characterScene]),t=st.fromBacking(new it(1,1,1,null)),n=new Array(e.length),i=0,s=e.length;i<s;)n[a=i++]={scene:e[a],comp:new Bs(new Ts(t,.5,null,null))};il.each(n,function(e){e.scene.add(e.comp)});for(var a,l=new Array(n.length),i=0,s=n.length;i<s;)l[a=i++]=n[a].comp.tweenDone;rt.noise(rt.inParallel(l)),this.sceneModel.removeScene("blackBar"),this.sceneModel.hideScene("reels"),this.sceneModel.hideScene("character");var o,r=this.casinoModel.getEventData(),h=r.bonusFeatureWon;switch(h){case"epic":this.publish("casino","featureEnter"),o={introFrame:null,bonusBg:bc.BONUS_THREE,hasBulletBar:!0,bulletBarStartValue:5,animationPool:Sc.EPIC,startAnimation:"EPIC_DANCE",showDialog:!0};break;case"fs":o={introFrame:bc.BONUS_ONE_SPLASH,bonusBg:bc.BONUS_ONE,hasBulletBar:!1,bulletBarStartValue:0,animationPool:Sc.BASE,startAnimation:"DANCE",showDialog:this.gameModel.autoProgressed};break;case"fs_2":o={introFrame:null,bonusBg:bc.BONUS_TWO,hasBulletBar:!0,bulletBarStartValue:0,animationPool:Sc.EPIC,startAnimation:"EPIC_DANCE",showDialog:this.gameModel.autoProgressed};break;default:throw tl.thrown('Unrecognized feature type: "'+h+'"')}var c=this.gameModel.sceneryHandler._compMap,_=null!=c?c.h[dr.BASE_NAME]:null,d=_ instanceof dr?_:null,p=(_=null!=(c=this.gameModel.character._compMap)?c.h[fr.BASE_NAME]:null)instanceof fr?_:null;Rt([function(e){for(var t=[u.baseScene,u.backgroundScene],n=st.fromBacking(new it(0,0,0,1)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,.5,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;return rt.noise(rt.inParallel(o))},function(e){if(o.showDialog)if(null!=o.introFrame){for(var t=[u.baseScene,u.backgroundScene],n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[r=s++]={scene:t[r],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l=new Array(i.length),s=0,a=i.length;s<a;)l[r=s++]=i[r].comp.tweenDone;rt.noise(rt.inParallel(l)),d.switchBackground(o.introFrame)}else{for(t=[u.baseScene],n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[r=s++]={scene:t[r],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var r,l=new Array(i.length),s=0,a=i.length;s<a;)l[r=s++]=i[r].comp.tweenDone;rt.noise(rt.inParallel(l)),d.switchBackground(o.bonusBg),d.addBackgroundBlur(.5)}else p.queueAnimation(o.startAnimation,!0),tt.colorTo(p.object,new nt(st.fromBacking(new it(null,1,1,1)),null,.5,0,null,null,null,null,null,null,null)),d.switchBackground(o.bonusBg);return u.after(.4)},function(e){var t=u.slotModel.reelActor.owner._compMap,t=null!=t?t.h[hr.BASE_NAME]:null,t=((t instanceof hr?t:null).deactivateCells(),p.setPool(o.animationPool),u.appModel.stageSize.x/u.appModel.stageSize.y);return p.layout(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0),u.publish("game","enterMode",{gameMode:r.bonusFeatureWon}),u.publish("casino","updateFeatureTotalWin",{totalWinAmount:u.casinoModel.accumulatedWin}),u.publish("casino","updateFeatureCounter",{counterValue:r.bonusFeatureCount}),u.casinoModel.featureCounter=el.parseInt(r.bonusFeatureCount),o.showDialog?u.showDialog(r):rt.NOISE},function(e){p.setPool(o.animationPool),p.enable=!0;var t=u.appModel.stageSize.x/u.appModel.stageSize.y;return p.layout(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0),null==o.introFrame&&d.removeBackgroundBlur(),u.exitDialog(o.showDialog&&null==o.introFrame?[u.baseScene,u.characterScene]:[u.baseScene,u.backgroundScene,u.characterScene])}]).handle(function(){var e,t,n,i,s,a,l,r;o.hasBulletBar&&(a=o.bulletBarStartValue,(l=new at).h[11]=".",l.h[10]=",",e=[et.Scale(new nt(st.fromBacking(new it(1.4,1.4,null,null)),null,null,.2,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(9,2,2,null)),null,null,.2,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null))],r=[et.Color(new nt(st.fromBacking(new it(9,2,2,null)),null,null,.2,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(.5,.5,.5,null)),null,.2,.2,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,null,0,null,null,null,null,null,null,null))],t=[et.Color(new nt(st.fromBacking(new it(1,1,1,null)),null,null,0,null,null,null,null,null,null,null))],n=[et.Scale(new nt(st.fromBacking(new it(1.3,1.3,null,null)),st.fromBacking(new it(1,1,null,null)),null,.5,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(1.5,1.25,1.25,null)),st.fromBacking(new it(1,1,1,null)),null,.5,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null))],i=new Sh(K.bullet_indicator,null,null,null,to.Always,null,null,null,null,null,null,null,null,null),(s=new at).h.setup=new Cl(K.bullet_indicator_info.animations.setup,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.tier_1_shoot=new Cl(K.bullet_indicator_info.animations.shoot_1,null,null,null,null,1.5,null,null,null,null,null,null,null,null,null),s.h.tier_1_reload=new Cl(K.bullet_indicator_info.animations.reload_1,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.tier_2_shoot=new Cl(K.bullet_indicator_info.animations.shoot_2,null,null,null,null,1.5,null,null,null,null,null,null,null,null,null),s.h.tier_2_reload=new Cl(K.bullet_indicator_info.animations.reload_2,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.tier_3_shoot=new Cl(K.bullet_indicator_info.animations.shoot_3,null,null,null,null,1.5,null,null,null,null,null,null,null,null,null),s.h.tier_3_reload=new Cl(K.bullet_indicator_info.animations.reload_3,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.tier_4_shoot=new Cl(K.bullet_indicator_info.animations.shoot_4,null,null,null,null,1.5,null,null,null,null,null,null,null,null,null),s.h.tier_4_reload=new Cl(K.bullet_indicator_info.animations.reload_4,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.tier_5_shoot=new Cl(K.bullet_indicator_info.animations.shoot_5,null,null,null,null,1.5,null,null,null,null,null,null,null,null,null),s.h.tier_5_reload=new Cl(K.bullet_indicator_info.animations.reload_5,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.tier_6_shoot=new Cl(K.bullet_indicator_info.animations.shoot_6,null,null,null,null,1.5,null,null,null,null,null,null,null,null,null),s.h.tier_6_setup=new Cl(K.bullet_indicator_info.animations.setup_6,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.tier_6_reload=new Cl(K.bullet_indicator_info.animations.reload_6,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.epic_reload=new Cl(K.bullet_indicator_info.animations.reload_epic,null,null,null,null,null,null,null,null,null,null,null,null,null,null),s.h.track_reload=new Cl(K.bullet_indicator_info.animations.reload_track,null,null,null,1,null,null,null,null,null,null,null,null,null,null),a=new mr(new gr(a,Wu.TileCharacters(ks.atlases.digits_bullets,-.07,l),r,e,t,n,i,s,u.casinoModel)),u.gameModel.bulletBar=(new ge).add(a),u.baseScene.addChild(u.gameModel.bulletBar),r=null!=(l=u.gameModel.logo._compMap)?l.h[mu.BASE_NAME]:null,a.object.object.set_follow((r instanceof mu?r:null).object.object)),o.showDialog&&(null!=o.introFrame&&d.switchBackground(o.bonusBg),p.queueAnimation(o.startAnimation,!0),tt.colorTo(p.object,new nt(st.fromBacking(new it(null,1,1,1)),null,null,0,null,null,null,null,null,null,null))),u.fsm.goto(u_)})},exit:function(){this.casinoModel.popEvent(),this.sceneModel.removeScene("featureSplash"),Wl.prototype.exit.call(this)},exitDialog:function(e){this.sceneModel.showScene("reels"),this.sceneModel.showScene("character"),this.publish("game","closeBonusSplash",{enter:!0});for(var t=st.fromBacking(new it(1,1,1,null)),n=new Array(e.length),i=0,s=e.length;i<s;)n[a=i++]={scene:e[a],comp:new Bs(new Ts(t,.5,null,null))};il.each(n,function(e){e.scene.add(e.comp)});for(var a,l=new Array(n.length),i=0,s=n.length;i<s;)l[a=i++]=n[a].comp.tweenDone;return rt.noise(rt.inParallel(l))},showDialog:function(e){var t=this,n=new qy,i=this.sceneModel.addScene(new Ke("featureSplash",!0,null,!0,null,null)),s=i._compMap,s=null!=s?s.h[He.BASE_NAME]:null,s=(s instanceof He?s:null).scene3d,s=(i.add(new Oe(new We(null,null,null,st.fromBacking(new it(null,null,5,null)),null,null,null,45,null,null,null))),nl.__cast(s.lightSystem,To).ambientLight),s=(s.x=1,s.y=1,s.z=1,this.casinoModel.autoplay&&!this.casinoModel.stopAutoplayOnFeature),a=Ic(i,e.bonusFeatureWon,kc.FeatureStart,this.gameModel.styleData.text,this.casinoModel.featureCounter,this.casinoModel.isMobile(),s?30:null),l=this.appModel.resizeSignal.connect(function(e){a.layout(t.appModel.orientation)});return a.set_onClose(function(e){return l.dispose(),n.trigger(null),n}),n},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",a_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",a_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",a_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",a_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",a_,!0),this.baseEntity=e("gasm.core.Entity","",a_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",a_,!0),this.baseScene=e("gasm.core.Entity","reels",a_,!0),this.backgroundScene=e("gasm.core.Entity","background",a_,!0),this.characterScene=e("gasm.core.Entity","character",a_,!0)},__class__:a_}),function(){Wl.call(this)}),r_=((i["hacksaw.games.lecowboy.states.FeatureExitState"]=l_).__name__="hacksaw.games.lecowboy.states.FeatureExitState",l_.__super__=Wl,l_.prototype=e(Wl.prototype,{enter:function(){var u=this,e=(this.publish("casino","featureExit"),this.casinoModel.accumulatedWin),t=0|+e.high,e=(0==t&&(t=xA.ucompare(e.low,0)),this.publish("casino","resultDisplay",{isConfirmableWin:0<(e.high<0?-1:t)}),this.gameModel.autoProgressed=!1,this.gameModel.gambleController._compMap),t=null!=e?e.h[or.BASE_NAME]:null;(t instanceof or?t:null).isUpgraded=!1;var h=(t=null!=(e=this.gameModel.character._compMap)?e.h[fr.BASE_NAME]:null)instanceof fr?t:null,c=((t=null!=(e=this.slotModel.reelActor.owner._compMap)?e.h[q_.BASE_NAME]:null)instanceof q_?t:null).object;Rt([function(e){for(var t=[u.backgroundScene,u.baseScene],n=st.fromBacking(new it(.4,.4,.4,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.25,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;switch(rt.noise(rt.inParallel(r)).handle(function(e){for(var t=[u.backgroundScene],n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.25,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;rt.noise(rt.inParallel(r))}),tt.colorTo(h.object,new nt(st.fromBacking(new it(null,null,null,0)),null,.5,.25,null,null,null,null,null,null,null)).handle(function(e){h.enable=!1}),tt.scaleTo(c,new nt(st.fromBacking(new it(0,0,null,null)),null,null,.4,null,o1.expoIn,null,null,null,null,null)),u.casinoModel.gameMode){case"epic":case"fs_2":var o=u.gameModel.sceneryHandler._compMap,o=null!=o?o.h[dr.BASE_NAME]:null;(o instanceof dr?o:null).addBackgroundBlur();break;case"fs":u.after(.25).handle(function(e){var t=u.gameModel.sceneryHandler._compMap,t=null!=t?t.h[dr.BASE_NAME]:null;(t instanceof dr?t:null).switchBackground(bc.BONUS_ONE_SPLASH)});break;default:throw tl.thrown('Unrecognized feature type: "'+u.casinoModel.gameMode+'"')}return u.showDialog()},function(e){u.exitDialog(),tt.scaleTo(c,new nt(st.fromBacking(new it(1,1,null,null)),null,null,0,null,null,null,null,null,null,null));var t=u.gameModel.sceneryHandler._compMap,t=null!=t?t.h[dr.BASE_NAME]:null;return(t instanceof dr?t:null).removeBackgroundBlur(.3),Rt([function(e){for(var t=u.gameModel.sceneryHandler._compMap,t=null!=t?t.h[dr.BASE_NAME]:null,n=((t instanceof dr?t:null).switchBackground(bc.BASE),[u.backgroundScene]),i=st.fromBacking(new it(1,1,1,null)),s=new Array(n.length),a=0,l=n.length;a<l;)s[r=a++]={scene:n[r],comp:new Bs(new Ts(i,.4,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;return rt.noise(rt.inParallel(o))},function(e){h.setPool(Sc.BASE),h.enable=!0;var t=u.appModel.stageSize.x/u.appModel.stageSize.y;return h.layout(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0),tt.colorTo(h.object,new nt(st.fromBacking(new it(null,1,1,1)),null,null,.2,null,null,null,null,null,null,null)),h.queueAnimation("IDLE",!0),rt.NOISE}])}]).handle(function(){u.fsm.goto(h_)})},exit:function(){this.sceneModel.removeScene("featureSplash"),this.publish("casino","gameRoundCompleted"),Wl.prototype.exit.call(this)},exitDialog:function(){for(var e=this.gameModel.bulletBar,t=(null!=e&&e.dispose(),this.gameModel.bulletBar=null,this.sceneModel.showScene("reels"),this.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls).floor=0,this.publish("game","closeBonusSplash",{enter:!1}),this.publish("game","enterMode",{gameMode:"base"}),[this.baseScene,this.backgroundScene]),n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r))},showDialog:function(){var e=this.sceneModel.addScene(new Ke("featureSplash",!0,null,!0,null,null)),t=e._compMap,t=null!=t?t.h[He.BASE_NAME]:null,t=(t instanceof He?t:null).scene3d,t=(e.add(new Oe(new We(null,null,null,st.fromBacking(new it(null,null,5,null)),null,null,null,45,null,null,null))),nl.__cast(t.lightSystem,To).ambientLight),t=(t.x=1,t.y=1,t.z=1,this.sceneModel.moveToTop("featureSplash"),wA.divMod(this.casinoModel.accumulatedWin,new yA(0,100))),n=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(t.modulus)),i=parseFloat((null==t.quotient?"null":wA.toString(t.quotient))+"."+n),t=wA.divMod(this.casinoModel.betAmount,new yA(0,100)),n=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(t.modulus)),i=i/parseFloat((null==t.quotient?"null":wA.toString(t.quotient))+"."+n),i=(this.publish("game","totalWinReveal",{winFactor:i}),this.casinoModel.autoplay&&!this.casinoModel.stopAutoplayOnFeature),s=new qy,a=this.casinoModel.gameMode,t=wA.divMod(this.casinoModel.accumulatedWin,new yA(0,100)),n=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(t.modulus));return Ic(e,a,kc.FeatureEnd(parseFloat((null==t.quotient?"null":wA.toString(t.quotient))+"."+n)),this.gameModel.styleData.text,this.casinoModel.featureRoundsPlayed,this.casinoModel.isMobile(),i?30:null,s),s},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",l_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",l_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",l_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",l_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",l_,!0),this.baseEntity=e("gasm.core.Entity","",l_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",l_,!0),this.baseScene=e("gasm.core.Entity","reels",l_,!0),this.backgroundScene=e("gasm.core.Entity","background",l_,!0)},__class__:l_}),function(){Wl.call(this)}),o_=((i["hacksaw.games.lecowboy.states.FreespinReactState"]=r_).__name__="hacksaw.games.lecowboy.states.FreespinReactState",r_.__super__=Wl,r_.prototype=e(Wl.prototype,{enter:function(){for(var e=this,t=(this.publish("game","drop"),this.casinoModel.getEventData()),t=(null==t.grid?"null":""+t.grid).split(""),n=t.slice(0,2),i=t.slice(2),t=Jn.cca(n[0],0)-40,n=Jn.cca(n[1],0)-40,s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=Jn.cca(i[r],0)-40}var t=new Hl(t,n,s),n=this.slotModel.reelActor,t=new U_(t,null),o=(n.currentEndReactArgs=t,null!=n.currentEndRevealArgs&&(n.currentEndRevealArgs=null),t.result);n._model.eventGrid=null!=o?o:n._model.currentGrid,n._reels.endReact(t).handle(function(){e.fsm.goto(o_)})},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",r_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",r_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",r_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",r_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",r_,!0),this.baseEntity=e("gasm.core.Entity","",r_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",r_,!0),this.baseScene=e("gasm.core.Entity","reels",r_,!0),this.backgroundScene=e("gasm.core.Entity","background",r_,!0)},__class__:r_}),function(){Wl.call(this)}),u_=((i["hacksaw.games.lecowboy.states.FreespinResultState"]=o_).__name__="hacksaw.games.lecowboy.states.FreespinResultState",o_.__super__=Wl,o_.prototype=e(Wl.prototype,{enter:function(){var _=this;this.act().handle(function(){function n(){_.publish("casino","updateFeatureTotalWin",{totalWinAmount:t}),_.publish("casino","featureRoundCompleted",{winAmount:e})}var e=_.casinoModel.featureRoundCurrentWin,t=_.casinoModel.accumulatedWin,i=0|+e.high,s=(0==i&&(i=xA.ucompare(e.low,0)),0<(e.high<0?-1:i)),a=(_.slotModel.reelActor.presentSpecial("resetFade"),_.casinoModel.popEvent()),i=null==a?null:null==a.etn?"null":Zo.toString(a.etn);if(null==i)throw tl.thrown('Unrecognized event type: "'+(null==a.etn?"null":Zo.toString(a.etn))+'"');switch(i){case"epic_collapse":case"fs_2_collapse":case"fs_collapse":_.fsm.goto(r_);break;case"epic_reveal":case"fs_2_reveal":case"fs_reveal":var l=(o=null!=(r=_.gameModel.countup._compMap)?r.h[Xs.BASE_NAME]:null)instanceof Xs?o:null;(s?(u=_.casinoModel.featureRoundCurrentWin,h=_.slotModel.reelActor.isLargeWin(u),(c=l.show(new Ps(u,null,null),null,h,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),c):rt.NOISE).handle(function(){var e=_.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls),t=_.casinoModel.get_featureRoundCurrentWinFactor();t>e.floor&&(e.floor=t),_.updateWinUI(s),n(),_.after("epic"==_.casinoModel.gameMode?1:0).handle(function(){_.fsm.goto(u_)})});break;case"feature_exit":Rt([function(e){var t,n=_.gameModel.countup._compMap,n=null!=n?n.h[Xs.BASE_NAME]:null,n=n instanceof Xs?n:null,i=s?(i=_.casinoModel.featureRoundCurrentWin,t=_.slotModel.reelActor.isLargeWin(i),(n=n.show(new Ps(i,null,null),null,t,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),n):rt.NOISE;return i},function(e){return _.after(.5)}]).handle(function(){_.updateWinUI(s),n(),_.fsm.goto(l_)});break;case"max_win_reached":var r,o,u,h,c,l=(o=null!=(r=_.gameModel.countup._compMap)?r.h[Xs.BASE_NAME]:null)instanceof Xs?o:null;(s?(u=_.casinoModel.featureRoundCurrentWin,h=_.slotModel.reelActor.isLargeWin(u),(c=l.show(new Ps(u,null,null),null,h,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),c):rt.NOISE).handle(function(){_.updateWinUI(s),_.publish("casino","showMaxWinDialog"),_.subscribeOnce("casino","dialogClosed",function(e){_.fsm.goto(l_)}),n()});break;default:throw tl.thrown('Unrecognized event type: "'+(null==a.etn?"null":Zo.toString(a.etn))+'"')}})},updateWinUI:function(e){e&&this.publish("casino","updateWinField",{winAmount:this.casinoModel.featureRoundCurrentWin})},act:function(){for(var Pe=this,e=this.casinoModel.getEventData().actions,t=null!=(e=null!=e?$l.getTypedActions(e,A_):null)?e:[],n=null!=(e=this.slotModel.reelActor.owner._compMap)?e.h[Md.BASE_NAME]:null,ze=n instanceof Md?n:null,i=new Array(t.length),s=0,a=t.length;s<a;){var l=t[c=s++];i[c]=0==l._hx_index?l.data:null}for(var Qe=il.filterNull(i),s=[],a=0,r=t;a<r.length;){var o=r[a];++a,0==o._hx_index&&o.data!=Qe[0]||s.push(o)}for(var Ve,Oe=s,We=(n=null!=(e=this.slotModel.reelActor.owner._compMap)?e.h[lr.BASE_NAME]:null)instanceof lr?n:null,Ne=(n=null!=(e=this.gameModel.character._compMap)?e.h[fr.BASE_NAME]:null)instanceof fr?n:null,e=this.gameModel.bulletBar,u=(Ve=null!=e&&(n=null!=(e=e._compMap)?e.h[mr.BASE_NAME]:null)instanceof mr?n:null,this.gameModel.gameInfo.symbols),s=[],a=0;a<u.length;){o=u[a];++a,new ot("CASH_","").match(o.name)&&s.push(o)}for(var Ge=il.find(this.gameModel.gameInfo.symbols,function(e){return new ot("COLLECTOR","").match(e.name)}).id,Ue=il.find(this.gameModel.gameInfo.symbols,function(e){return new ot("COLLECTED","").match(e.name)}).id,u=this.gameModel.gameInfo.symbols,a=[],r=0;r<u.length;){o=u[r];++r,new ot("MULTIPLIER$","").match(o.name)&&a.push(o)}for(var i=new Array(s.length),r=0,h=s.length;r<h;)i[c=r++]=0|s[c].id;for(var c,Le=i,i=new Array(a.length),s=0,r=a.length;s<r;)i[c=s++]=0|a[c].id;for(var je=i,He=this.slotModel.reelActor.get_currentGrid(),Ye=(We.currentCollectorPosition=null)!=il.find(t,function(e){return 5==e._hx_index&&2==e.gameEnum._hx_index}),Ze=il.filterMap(t,function(e){return 1==e._hx_index?OA.Some(e.data):OA.None})[0],s=[],a=0;a<Oe.length;)s.push((Re=>function(z){switch(Re[0]._hx_index){case 0:for(var Q=Re[0].data,V=Pe.slotModel.reelActor,e=new Array(Qe.length),t=0,n=Qe.length;t<n;){var i,s=t++,a=(S=Qe[s]).symbol,l=S.mask;if(null!=(d=S.winMultipliers)){for(var O=new Array(d.length),W=0,N=d.length;W<N;){var G=W++;O[G]=el.parseInt(d[G])}i=O}else i=null;var r,U=i,L=S.baseWinAmount,j=null==S.winAmount?"0":S.winAmount,H=null==S.count?"0":S.count,Y=null==S.stick?null:"true"==S.stick,o=S.pos;if(null==o)r=null;else{for(var u=o.split("_"),h=new Array(u.length),Z=0,X=u.length;Z<X;){var q=Z++;h[q]=el.parseInt(u[q])}r=Uu._new(new Bw(h[0],h[h.length-1]))}var c,o=el.parseInt(S.reel);if(null!=(_=S.stacks)){for(var K=new Array(_.length),J=0,$=_.length;J<$;){var ee=J++;K[ee]=el.parseInt(_[ee])}c=K}else c=null;var te=null==(M=el.parseInt(S.line))?null:[M];e[s]=new wa(a,l,U,L,j,H,null,null,Y,r,o,c,el.parseInt(S.ways),null,null!=te?te:[])}var _,d=function(e){var t=wA.divMod(bA.parseString(null==Q.winAmount?"0":Q.winAmount),new yA(0,100)),n=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(t.modulus),2),i=parseFloat((null==t.quotient?"null":wA.toString(t.quotient))+"."+n),t=wA.divMod(Pe.casinoModel.betAmount,new yA(0,100)),n=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(t.modulus),2),i=i/parseFloat((null==t.quotient?"null":wA.toString(t.quotient))+"."+n),t=Pe.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls);return i>t.floor&&(t.floor=i),rt.NOISE};if(null==(t=Pe.casinoModel.get_turboMode()))_=W_.Serial();else switch(t){case"superTurbo":_=W_.Summarized(10,null,!0,!0);break;case"turbo":_=W_.Parallel(200);break;default:_=W_.Serial()}return V.showWins(new L_(e,d,_,null));case 1:var ne=Re[0].data;return Ye?rt.NOISE:Rt([function(e){return Pe.slotModel.reelActor.showRemoves(new j_(ne.mask))},function(e){return Pe.slotModel.reelActor.react(new G_(ne.mask,null,null))}]);case 2:return rt.NOISE;case 4:var p=Re[0].data;return Rt([function(e){for(var t=[Pe.baseScene,Pe.backgroundScene],n=st.fromBacking(new it(.4,.4,.4,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r)),Pe.slotModel.reelActor.presentSpecial("retrigger")},function(e){var t;switch(Pe.casinoModel.gameMode){case"epic":case"fs_2":switch(el.parseInt(p.s)){case 2:t="EPIC_DANCE";break;case 4:t="EPIC_BIG_WIN";break;default:throw new tl('Unrecognized retrigger count: "'+el.parseInt(p.s)+'"')}break;default:switch(el.parseInt(p.s)){case 2:t="LONG_DANCE";break;case 4:t="BIG_WIN";break;default:throw new tl('Unrecognized retrigger count: "'+el.parseInt(p.s)+'"')}}return Ne.queueAnimation(t,!0),Pe.publish("game","retrigger",{count:el.parseInt(p.s)}),Pe.runExtraSpinTextAnimation(el.parseInt(p.s),Pe.countupScene)},function(e){for(var t=[Pe.baseScene,Pe.backgroundScene],n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r))}]);case 5:var ie,se,ae,le,re,m,g,oe,ue,f,A;switch((t=Re[0].gameEnum)._hx_index){case 0:return rt.NOISE;case 1:return Pe.shouldZoom()?"fs_2"==Pe.casinoModel.gameMode?(y=Tc(Pe.sceneModel,"blackBar"),ie=new ar,y.add(ie),se=Ne.object.getScene().camera,ae=Ne.object.get_x(),Pe.publish("casino","hideUi"),Pe.publish("game","transitionStarted",{bonusType:Pe.casinoModel.gameMode}),le=function(e){null==e&&(e=1);var t="portrait"==Pe.appModel.orientation?2.9:2,n=Pe.appModel.stageSize.x/Pe.appModel.stageSize.y,n=Pe.getCharacterYPos(lt.over(2.1,n)?2.1:lt.over(1.1,n)?1.1:lt.over(.8,n)?.8:lt.over(.45,n)?.45:0);return Ne.object.setScale(.85),tt.translateTo(Ne.object,new nt(st.fromBacking(new it(null,n,null,null)),null,null,0,null,null,null,null,null,null,null)),rt.noise(ie.start(0,t,e))},re=Pe.appModel.resizeSignal.connect(function(e){le(0)}),m=new qy,oe=g=!1,y=Rt([function(e){return tt.colorTo(Ne.object,new nt(st.fromBacking(new it(null,null,null,0)),null,.5,null,null,null,null,null,null,null,null)),rt.noise(tt.tween(Ne.object,[et.Position(new nt(st.fromBacking(new it(5,null,null,null)),null,.5,.4,null,null,null,null,null,null,null))]))},function(e){oe=!0;for(var t=[Pe.baseScene,Pe.backgroundScene],n=st.fromBacking(new it(.4,.4,.4,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r))},function(e){var t;return g||(t=Pe.appModel.stageSize.x/Pe.appModel.stageSize.y,t=Pe.getCharacterYPos(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0),Ne.object.setScale(.85),tt.tween(Ne.object,[et.Color(new nt(st.fromBacking(new it(null,null,null,1)),null,null,0,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(2,t,null,null)),null,null,0,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(.1,null,null,null)),null,null,1,null,function(e){return-e*(e-2)},null,null,null,null,null))]),se.zoom=g?1:2.5,Ne.queueAnimation("BONUS_TRANSITION",!0),Ne.enabledLayout=!1),le()},function(e){return Pe.after(Pe.casinoModel.currentTurboValue({normal:3,turbo:2,superTurbo:1}))}],null,new Xe(m,null,null)),ue=function(){Pe.publish("game","transitionEnded"),Pe.publish("casino","showUi"),tt.tween(Ne.object,[et.Position(new nt(st.fromBacking(new it(ae,null,null,null)),null,null,0,null,null,null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(null,null,null,1)),null,null,0,null,null,null,null,null,null,null))]),se.zoom=1,Ne.enabledLayout=!0;for(var e=Pe.appModel.stageSize.x/Pe.appModel.stageSize.y,t=(Ne.layout(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0),Pe.sceneModel.removeScene("blackBar"),re.dispose(),[Pe.baseScene,Pe.backgroundScene,Pe.characterScene]),n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r))},A=null,f=hacksawCasino.PubSub.getChannel("casino"),A=f.subscribe("clickScreen",function(e){oe&&f.unsubscribe(A)&&(m.trigger(!0),g=!0,ue())}),y.handle(function(){ue(),f.unsubscribe(A)}),rt.or(y,rt.noise(m))):rt.NOISE:("fs_2"==Pe.casinoModel.gameMode&&Ve.playAttentionTween(),Ne.queueAnimation((y=["EPIC_SMALL_WIN","EPIC_REACT","EPIC_DANCE"])[el.random(y.length)],!0),Pe.after(.9*Ne.getCurrentDuration()));case 2:var he=t.data;return Rt([function(e){var t=We.convertWilds(he,He);return null!=Ze&&Pe.slotModel.reelActor.showRemoves(new j_(Ze.mask)),Pe.after(Pe.casinoModel.currentTurboValue({normal:.7,turbo:.6,superTurbo:.3})).handle(function(e){var t=vy.sum(il.filterMap(x_.get_symbols(he),function(t){var e=il.find(Pe.gameModel.gameInfo.symbols,function(e){return(0|e.id)==t});return null!=e?(e=e.name.split("_"),OA.Some(el.parseInt(e[e.length-1]))):OA.None})),n=Pe.gameModel.character._compMap,n=null!=n?n.h[fr.BASE_NAME]:null;(n instanceof fr?n:null).playRevolverReactAnimation(t)}),t},function(e){return null!=Ze?Pe.slotModel.reelActor.react(new G_(Ze.mask,null,null)):rt.NOISE}]);case 3:var ce,n=t.data;if(Ne.isInShootStance){switch(Pe.casinoModel.gameMode){case"epic":case"fs_2":ce="EPIC_SHOOT_END";break;default:ce="SHOOT_END"}Ne.isInShootStance=!1,Ne.queueAnimation(ce,!0)}Pe.publish("game","spawnFortunes");for(var x=He.mW,w=He.mH,u=w_.get_mask(n).split(""),e=new Array(u.length),n=0,a=u.length;n<a;)e[s=n++]="1"==u[s];var _e=new Hl(x,w,e);return il.each(il.filterNull(He.mapCells(function(e,t){return-1!=Le.indexOf(e)?t:null})),function(e){var t=_e;t.mData[e.y*t.mW+e.x]=!0}),Rt([function(e){return Pe.slotModel.reelActor.presentSpecial("revealCoin",_e)},function(e){return Pe.slotModel.reelActor.presentSpecial("idleCoin",_e)}]);case 4:var n=t.data,y=(Ne.isInShootStance=!1,Pe.casinoModel),b=y.featureRoundCurrentWin,v=y_.get_winAmount(n),C=b.high+v.high|0,v=b.low+v.low|0;xA.ucompare(v,b.low)<0&&(++C,C|=0),y.featureRoundCurrentWin=new yA(C,v);for(x=(b=ze.visibleSymbols).mW,w=b.mH,u=y_.get_mask(n).split(""),e=new Array(u.length),a=0,l=u.length;a<l;)e[s=a++]="1"==u[s];var de=new Hl(x,w,e),S=Ec(y_.get_winAmount(n)),y=wA.divMod(Pe.casinoModel.accumulatedWin,new yA(0,100)),C=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(y.modulus),2),v=parseFloat((null==y.quotient?"null":wA.toString(y.quotient))+"."+C),y=wA.divMod(Pe.casinoModel.betAmount,new yA(0,100)),C=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(y.modulus),2),pe=Math.max(v/parseFloat((null==y.quotient?"null":wA.toString(y.quotient))+"."+C)-Pe.casinoModel.get_winFactorTierOffset(),0),me=b.mapCellsByMask(de,function(e,t){return We.getAttachmentElement(e,E_.COIN_VALUE)});return Rt([function(e){return We.summarizeTotalWin(me,pe)},function(e){return Pe.slotModel.reelActor.presentSpecial("winSummary",null,null,[S])}]);case 5:var ge,fe=t.data,Ae=(M=null!=(d=Pe.slotModel.reelActor.owner._compMap)?d.h[hr.BASE_NAME]:null)instanceof hr?M:null;if(!Ne.isInShootStance){switch(Pe.casinoModel.gameMode){case"epic":case"fs_2":ge="EPIC_SHOOT_START";break;default:ge="SHOOT_START"}Ne.isInShootStance=!0,Ne.queueAnimation(ge,!0)}for(var b=Pe.slotModel.reelActor.get_currentGrid(),v=[b_.get_position(fe)],xe=(x=b.mW)*(w=b.mH),n=[],a=0;a<xe;)++a,n.push(!1);var de=new Hl(x,w,n),we=(il.each(v,function(e){de.mData[e]=!0}),de);return Pe.slotModel.reelActor.presentSpecial("fadePaying"),Pe.publish("game","revolverHighlight"),Pe.slotModel.reelActor.presentSpecial("highlight",we),(E=Rt([function(e){return Pe.after(.3)},function(e){return We.shootSymbols(fe,ze.currentGrid,Pe.coinValueModel,Ae,Ne,Pe.casinoModel,Pe.gameModel.gameInfo.symbols,Ve)},function(e){return Pe.after(.5)}])).handle(function(e){Pe.slotModel.reelActor.presentSpecial("fade",we)}),E;case 7:return rt.NOISE;case 8:for(var k=t.data,x=He.mW,w=He.mH,u=C_.get_mask(k).split(""),e=new Array(u.length),n=0,a=u.length;n<a;)e[s=n++]="1"==u[s];var M,ye=new Hl(x,w,e),be=(He.mapCellsByMask(ye,function(e,t){return t}),Pe.casinoModel.currentTurboValue({normal:.1,turbo:.05,superTurbo:0})),ve=We.createCollectWin(k,He,!0),Ce=We.createCollectWin(k,He),I=((M=null!=(d=Pe.slotModel.reelActor.owner._compMap)?d.h[Md.BASE_NAME]:null)instanceof Md?M:null).visibleSymbols,s=C_.get_position(k);(R=new Bw).y=s/I.mW|0,R.x=s%I.mW;for(var B=(u=P=new Hl(I.mW,I.mH)).mData,T=u.mW,n=0,a=u.mW*u.mH;n<a;)B[s=n++]=s%T==R.x&&(s/T|0)==R.y;var E,Se=P;return(E=Rt([function(e){var t=He,n=C_.get_position(k);if(t.mData[(n/t.mW|0)*t.mW+n%t.mW]=0|Ue,We.currentCollectorPosition!=C_.get_position(k)&&null!=We.currentCollectorPosition){for(var n=We.currentCollectorPosition,i=new Bw,s=(i.y=n/I.mW|0,i.x=n%I.mW,new Hl(I.mW,I.mH)),a=(t=s).mData,l=t.mW,r=0,o=t.mW*t.mH;r<o;)a[n=r++]=n%l==i.x&&(n/l|0)==i.y;Pe.slotModel.reelActor.presentSpecial("setup",s),We.currentCollectorPosition=C_.get_position(k)}return Pe.publish("game","collectCountupStarted"),Pe.slotModel.reelActor.presentSpecial("collectCoins",ye,null,[ve])},function(e){for(var t=He.mW,n=He.mH,i=C_.get_mask(k).split(""),s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]="1"==i[r]}var t=new Hl(t,n,s),n=t.mapCellsByMask(t,function(e,t){return e}).length,t=Pe.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls),o=C_.get_amount(k)/10;return o>t.floor&&5<n&&(t.floor=o,Pe.publish("casino","excitement_"+Pe.casinoModel.gameMode,{excitement:o})),Pe.slotModel.reelActor.presentSpecial("collectorCollect",ye,null,[Ce])},function(e){return Pe.slotModel.reelActor.showStickies(new H_(Ce.mask,null,null)),Pe.after(be)}])).handle(function(){Pe.slotModel.reelActor.presentSpecial("idle",Se)}),E;case 9:for(var F=S_.get_grid(t.data),xe=(x=F.mW)*(w=F.mH),n=[],a=0;a<xe;)++a,n.push(!1);var D=new Hl(x,w,n);return il.each(il.filterNull(F.mapCells(function(e,t){var n;return n=!!Dt.eq(Ge,e)&&(n=He).mData[t.y*n.mW+t.x]!=Ge,-1!=Le.indexOf(e)||n||-1!=je.indexOf(e)?t:null})),function(e){var t=D;t.mData[e.y*t.mW+e.x]=!0}),Rt([function(e){return Pe.slotModel.reelActor.clearStickiedSymbols()},function(e){return Pe.slotModel.reelActor.presentSpecial("replaceRemove",D)},function(e){F.eachCellsByMask(D,function(e,t){Pe.slotModel.reelActor.replaceSym(e,t);for(var n=Pe.gameModel.gameInfo.symbols,i=[],s=0;s<n.length;){var a=n[s];++s,new ot("MULTIPLIER$","").match(a.name)&&i.push(a)}for(var l=new Array(i.length),s=0,r=i.length;s<r;)l[o=s++]=0|i[o].id;if(-1!=l.indexOf(e)){for(var o,e=new Hl(He.mW,He.mH),u=(n=e).mData,h=n.mW,i=0,s=n.mW*n.mH;i<s;)u[o=i++]=o%h==t.x&&(o/h|0)==t.y;Pe.slotModel.reelActor.presentSpecial("idle",e)}});var t=Pe.slotModel.reelActor.presentSpecial("hideSymbol",D);return t.handle(function(){Pe.slotModel.reelActor.presentSpecial("revealCoinTween",D)}),t}]);case 10:n=t.data,u=He,s=k_.get_position(n);(R=new Bw).y=s/u.mW|0,R.x=s%u.mW;for(B=(u=P=new Hl(He.mW,He.mH)).mData,T=u.mW,a=0,l=u.mW*u.mH;a<l;)B[s=a++]=s%T==R.x&&(s/T|0)==R.y;var ke=P,Me=We.createMultiplierWin(n,He),Ie=0|il.find(Pe.gameModel.gameInfo.symbols,function(e){return"GLOBAL_MULTIPLIER"==e.name}).id,u=Pe.slotModel.reelActor.get_currentGrid(),s=k_.get_position(n);return Pe.publish("game","activateClover",{isEpic:u.mData[(s/u.mW|0)*u.mW+s%u.mW]==Ie}),Rt([function(e){return Pe.slotModel.reelActor.presentSpecial("revealMultipliers",ke,null,[Me]),Pe.after(Pe.casinoModel.superTurbospin?.15:.25)},function(e){return Pe.slotModel.reelActor.presentSpecial("triggerMultipliers",ke,null,[Me])},(De=Re,function(e){var t,n=Oe[Oe.indexOf(De[0])+1];if(5==n._hx_index)switch(n.gameEnum._hx_index){case 4:t=1.5;break;case 8:t=1.2;break;default:t=1}else t=1;return Pe.after(Pe.casinoModel.currentTurboValue({normal:.4,turbo:.35,superTurbo:.2})*t)})]);case 11:var R,n=t.data,u=He,s=k_.get_position(n);(R=new Bw).y=s/u.mW|0,R.x=s%u.mW;for(var P,B=(u=P=new Hl(He.mW,He.mH)).mData,T=u.mW,a=0,l=u.mW*u.mH;a<l;)B[s=a++]=s%T==R.x&&(s/T|0)==R.y;var Be=P,Te=We.createMultiplierWin(n,He),Ie=0|il.find(Pe.gameModel.gameInfo.symbols,function(e){return"GLOBAL_MULTIPLIER"==e.name}).id,u=Pe.slotModel.reelActor.get_currentGrid(),s=k_.get_position(n);return Pe.publish("game","activateClover",{isEpic:u.mData[(s/u.mW|0)*u.mW+s%u.mW]==Ie}),Rt([function(e){return Pe.slotModel.reelActor.presentSpecial("revealMultipliers",Be,null,[Te]),Pe.after(Pe.casinoModel.superTurbospin?.15:.25)},function(e){return Pe.slotModel.reelActor.presentSpecial("triggerMultipliers",Be,null,[Te])},(Fe=Re,function(e){var t,n=Oe[Oe.indexOf(Fe[0])+1];if(5==n._hx_index)switch(n.gameEnum._hx_index){case 4:t=1.5;break;case 8:t=1.2;break;default:t=1}else t=1;return Pe.after(Pe.casinoModel.currentTurboValue({normal:.4,turbo:.35,superTurbo:.2})*t)})]);case 12:var Ee=t.data;return Rt([function(e){var t;switch(Pe.casinoModel.gameMode){case"epic":case"fs_2":t="EPIC_SHOOT_END";break;default:t="SHOOT_END"}return Ne.isInShootStance=!1,Ne.queueAnimation(t,!0),Pe.after(.5)},function(e){var t;switch(Pe.casinoModel.gameMode){case"epic":case"fs_2":t="EPIC_SMALL_WIN";break;default:t="SMALL_WIN"}Ne.queueAnimation(t,!0);for(var n=He,i=M_.get_position(Ee),s=new Bw,n=(s.y=i/n.mW|0,s.x=i%n.mW,new Hl(He.mW,He.mH)),a=n.mData,l=n.mW,r=0,o=n.mW*n.mH;r<o;)a[i=r++]=i%l==s.x&&(i/l|0)==s.y;var p=n,n=Rt([function(e){return Pe.publish("game","activateReload"),rt.noise(Pe.slotModel.reelActor.presentSpecial("win",p))},function(e){return Pe.after(.7)}]);return n.handle(function(){Pe.slotModel.reelActor.presentSpecial("fade",p);for(var e=M_.get_hits(Ee),t=new Array(e.length),n=0,i=e.length;n<i;){var s=e[u=n++],a=ze.visibleSymbols,l=new Bw;l.y=s/a.mW|0,l.x=s%a.mW,t[u]=l}for(var r=0;r<t.length;){for(var o=t[r++],u=[r-1],o=[o],h=o[0],c=new Hl(He.mW,He.mH),_=(e=c).mData,d=e.mW,n=0,i=e.mW*e.mH;n<i;)_[s=n++]=s%d==h.x&&(s/d|0)==h.y;c=[c];Rt([((t,n,i)=>function(e){return Pe.publish("game","loadRevolver"),Pe.slotModel.reelActor.replaceSym(M_.get_symbols(Ee)[i[0]],n[0],!1,!0,!1),Pe.slotModel.reelActor.presentSpecial("reload",t[0])})(c,o,u),(t=>function(e){return Pe.slotModel.reelActor.presentSpecial("setup",t[0])})(c)])}}),n}]);default:throw new tl('Unrecognized game specific action type: "'+el.string(t)+'"')}break;default:throw new tl('Unrecognized action type: "'+el.string(Re[0])+'"')}var Fe,De})([Oe[a++]]));return rt.and(Rt(s),this.after(this.casinoModel.currentTurboValue({normal:.25,turbo:.1,superTurbo:0})))},runExtraSpinTextAnimation:function(e,t){var n=this,i=new mu(new gu(new bu(new vu(Cu.Tile(2==e?Kh.getTile(J.misc,J.misc_info.frames.fs_two):Kh.getTile(J.misc,J.misc_info.frames.fs_four)),null,null,null,Jl.scale,null,null,null,null,to.Always,null,null,null)),null)),s=(i.object.setPosition(0,0,.2),new ge),a=(s.addChild((new ge).add(i)),t.addChild(s),this.casinoModel.featureCounter+=e,this.casinoModel.currentTurboValue({normal:.4,turbo:.3,superTurbo:.2})),l=.5*a,t=(this.after(a).handle(function(){n.publish("casino","updateFeatureCounter",{counterValue:n.casinoModel.featureCounter})}),Rt([function(e){return rt.noise(tt.tween(i.object,[et.Color(new nt(st.fromBacking(new it(2.5,2.5,2.5,null)),null,null,.5,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.8,1.8,null,null)),st.fromBacking(new it(0,0,null,null)),null,a,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,-.3,null)),null,null,l,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,0,null)),st.fromBacking(new it(null,null,-.3,null)),l,l,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.1,1.1,null,null)),st.fromBacking(new it(1.7,1.7,null,null)),a,.2,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))]))},function(e){return n.after(n.casinoModel.currentTurboValue({normal:1,turbo:.8,superTurbo:.6}))},function(e){return rt.noise(tt.tween(i.object,[et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),null,null,a,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))]))}]));return t.handle(Cn(s,s.dispose)),rt.noise(t)},getCharacterYPos:function(e){switch(e){case.45:return-.25;case.8:return-.35;default:return-.15}},shouldZoom:function(){var e=wA.divMod(this.casinoModel.win,new yA(0,100)),t=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(e.modulus)),n=parseFloat((null==e.quotient?"null":wA.toString(e.quotient))+"."+t),e=wA.divMod(this.casinoModel.betAmount,new yA(0,100)),t=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(e.modulus)),n=n/parseFloat((null==e.quotient?"null":wA.toString(e.quotient))+"."+t),t=(e=(n-400)/600)<=0?0:1<=e?1:e,e=.3*(1-(t=1==t?1:1-Math.exp(-6.931471805599453*t)))+t,i=new RegExp("^replay_","".split("u").join("")),i=new t0(el.parseInt(el.string(this.gameModel.response.roundId).replace(i,""))),t=(i.seed=36969*(65535&i.seed)+(i.seed>>16),i.seed2=18e3*(65535&i.seed2)+(i.seed2>>16),(1073741823&((i.seed<<16)+i.seed2|0))%10007/10007);return!!(400<=n&&(i.seed=36969*(65535&i.seed)+(i.seed>>16),i.seed2=18e3*(65535&i.seed2)+(i.seed2>>16),(1073741823&((i.seed<<16)+i.seed2|0))%10007/10007<=((i=-.15*(1-t)+.15*t+(e<=0?0:1<=e?1:e))<=0?0:1<=i?1:i)))||1e3<=n},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",o_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",o_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",o_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",o_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",o_,!0),this.baseEntity=e("gasm.core.Entity","",o_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",o_,!0),this.coinValueModel=e("hacksaw.games.lecowboy.components.model.CoinValueModel","",o_,!0),this.baseScene=e("gasm.core.Entity","reels",o_,!0),this.backgroundScene=e("gasm.core.Entity","background",o_,!0),this.countupScene=e("gasm.core.Entity","countup",o_,!0),this.characterScene=e("gasm.core.Entity","character",o_,!0)},__class__:o_}),function(){Wl.call(this)}),h_=((i["hacksaw.games.lecowboy.states.FreespinRevealState"]=u_).__name__="hacksaw.games.lecowboy.states.FreespinRevealState",u_.__super__=Wl,u_.prototype=e(Wl.prototype,{enter:function(){for(var t=this,e=this.slotModel.reelActor.owner._compMap,e=null!=e?e.h[hr.BASE_NAME]:null,e=((e instanceof hr?e:null).deactivateCells(),this.publish("game","drop"),this.publish("casino","featureRoundStarted",{uistate:"freespins",gameMode:this.casinoModel.gameMode}),this.casinoModel.updateFeatureCounter(),el.string(this.casinoModel.getEventData().grid).split("")),n=e.slice(0,2),i=e.slice(2),e=Jn.cca(n[0],0)-40,n=Jn.cca(n[1],0)-40,s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=Jn.cca(i[r],0)-40}var o=new Hl(e,n,s);Rt([function(e){return t.slotModel.reelActor.reveal()},function(e){return t.slotModel.reelActor.endReveal(new Y_(o,null,null))}]).handle(function(){t.fsm.goto(o_)})},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",u_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",u_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",u_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",u_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",u_,!0),this.baseEntity=e("gasm.core.Entity","",u_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",u_,!0),this.baseScene=e("gasm.core.Entity","reels",u_,!0),this.backgroundScene=e("gasm.core.Entity","background",u_,!0)},__class__:u_}),function(){Wl.call(this)}),c_=((i["hacksaw.games.lecowboy.states.IdleState"]=h_).__name__="hacksaw.games.lecowboy.states.IdleState",h_.__super__=Wl,h_.prototype=e(Wl.prototype,{enter:function(){var t=this,e=this.gameModel.character._compMap,e=null!=e?e.h[fr.BASE_NAME]:null,e=e instanceof fr?e:null;e.isInShootStance&&(e.isInShootStance=!1,e.queueAnimation("SHOOT_END",!0)),this.slotModel.reelActor.presentSpecial("fadeInFortuneValues"),this.subOnce("casino","roundStarted").handle(function(e){t.slotModel.reelActor.setRevealMode(null!=e.bonusBuyId&&0==e.isFeatureSpin?"bonus_buy":"default"),t.fsm.goto(p_)})},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",h_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",h_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",h_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",h_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",h_,!0),this.baseEntity=e("gasm.core.Entity","",h_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",h_,!0),this.baseScene=e("gasm.core.Entity","reels",h_,!0),this.backgroundScene=e("gasm.core.Entity","background",h_,!0)},__class__:h_}),function(){Wl.call(this)}),__=((i["hacksaw.games.lecowboy.states.InitState"]=c_).__name__="hacksaw.games.lecowboy.states.InitState",c_.__super__=Wl,c_.prototype=e(Wl.prototype,{enter:function(){var e=this,t=(this.baseEntity.add(this.gameModel),this.casinoModel.isMobile()?2:1),n=(Jl.scale=this.appModel.scale=t,Tc(this.sceneModel,"background")),i=Tc(this.sceneModel,"reels"),s=Tc(this.sceneModel,"character"),a=Tc(this.sceneModel,"countup"),l=Tc(this.sceneModel,"gamble",!0),r=new ge,o=(i.addChild(r),this.addReel(r,n));this.addBackground(n);var t=null!=(t=o.owner._compMap)?t.h[q_.BASE_NAME]:null,t=(t instanceof q_?t:null).object.object,u=new It(t),u=(tt.init(u,null),this.addLogo(i,u),new It(t));tt.init(u,null),this.addSmokey(s,u),this.addCountup(a,[i,n,s],o.tiers),this.addCountupParticleFountain(a),this.sceneModel.hideScene("reels"),this.sceneModel.hideScene("gamble"),this.addGambleController(l),this.gameModel.rotator=new ge,r.addChild(this.gameModel.rotator.add(new wc)),this.next().handle(function(){e.fsm.goto(m_)})},exit:function(){this.publish("game","removePreloader"),this.appModel.resizeSignal.emit({width:this.appModel.stageSize.x,height:this.appModel.stageSize.y}),Wl.prototype.exit.call(this)},addBackground:function(e){var i=this,t=J.backgrounds_bonus_one_info.frames,n=J.backgrounds_bonus_two_info.frames,s=new PA,a=(s.set(bc.BASE,Kh.getTile(J.backgrounds,J.backgrounds_info.frames.bg)),s.set(bc.BONUS_ONE,Kh.getTile(J.backgrounds_bonus_one,t.background_bonus_1)),s.set(bc.BONUS_ONE_SPLASH,Kh.getTile(J.backgrounds_bonus_one,t.intro_background_bonus_1)),s.set(bc.BONUS_TWO,Kh.getTile(J.backgrounds_bonus_two,n.background_bonus_2)),s.set(bc.BONUS_THREE,Kh.getTile(J.backgrounds_bonus_two,n.background_epic)),s.set(bc.COUNTUP,Kh.getTile(J.misc,J.misc_info.frames.countup_bg)),new dr(new pr(s)));this.gameModel.sceneryHandler=(new ge).add(a),e.addChild(this.gameModel.sceneryHandler),this.appModel.resizeSignal.connect(function(e){var t=i.gameModel.gambleController,n=(t=null!=t&&(t=null!=(t=t._compMap)?t.h[or.BASE_NAME]:null)instanceof or?t:null,i.appModel.stageSize.x/i.appModel.stageSize.y);a.layout(lt.over(2.1,n)?2.1:lt.over(1.1,n)?1.1:lt.over(.8,n)?.8:lt.over(.45,n)?.45:0,i.casinoModel.gameMode,null!=t?t.isGambling:null)}),this.sub("game","enterMode",!0).listen(function(e){var t=i.gameModel.gambleController,n=(t=null!=t&&(t=null!=(t=t._compMap)?t.h[or.BASE_NAME]:null)instanceof or?t:null,i.appModel.stageSize.x/i.appModel.stageSize.y);a.layout(lt.over(2.1,n)?2.1:lt.over(1.1,n)?1.1:lt.over(.8,n)?.8:lt.over(.45,n)?.45:0,i.casinoModel.gameMode,null!=t?t.isGambling:null)})},addSmokey:function(e,t){var n=new Sh(K.smokey,null,1.2,null,to.Always,null,null,null,null,null,!0,!0,null,null),i=new at,s=(i.h.IDLE=new Cl(K.smokey_info.animations.idle,null,null,.025,null,null,null,null,null,null,null,null,null,null,null),i.h.REACT=new Cl(K.smokey_info.animations.reel_highlight,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.SCRATCH_BUTT=new Cl(K.smokey_info.animations.sus_scratch,null,null,null,null,null,null,null,null,null,null,null,null,null,null),i.h.DROP_MUSTACHE=new Cl(K.smokey_info.animations.lost_mustache,null,null,null,null,null,null,null,null,null,null,null,null,null,null),i.h.GREETS=new Cl(K.smokey_info.animations.welcome,null,null,.05,null,null,null,null,null,null,null,null,null,null,null),i.h.STOMP=new Cl(K.smokey_info.animations.loosing_1,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.STOMP_SWEAR=new Cl(K.smokey_info.animations.loosing_2,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.SMALL_WIN=new Cl(K.smokey_info.animations.win_1,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.BIG_WIN=new Cl(K.smokey_info.animations.win_2,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_WIN=new Cl(K.smokey_info.animations.win_3,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.DANCE_START=new Cl(K.smokey_info.animations.dance_start,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.DANCE=new Cl(K.smokey_info.animations.dance,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.DANCE_LOOP=new Cl(K.smokey_info.animations.dance_idle,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.DANCE_END=new Cl(K.smokey_info.animations.dance_end,null,null,.05,null,null,null,null,null,null,null,null,null,null,null),i.h.LONG_DANCE=new Cl(K.smokey_info.animations.dance_long,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_IDLE=new Cl(K.smokey_info.animations.epic_bonus_idle,null,null,null,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_REACT=new Cl(K.smokey_info.animations.epic_bonus_reel_highlight,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_SCRATCH_BUTT=new Cl(K.smokey_info.animations.epic_bonus_sus_scratch,null,null,null,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_STOMP=new Cl(K.smokey_info.animations.epic_bonus_loosing_1,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_STOMP_SWEAR=new Cl(K.smokey_info.animations.epic_bonus_loosing_2,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_SMALL_WIN=new Cl(K.smokey_info.animations.epic_bonus_win_1,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_BIG_WIN=new Cl(K.smokey_info.animations.epic_bonus_win_2,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_EPIC_WIN=new Cl(K.smokey_info.animations.epic_bonus_win_3,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_DANCE_START=new Cl(K.smokey_info.animations.epic_bonus_dance_start,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_DANCE_LOOP=new Cl(K.smokey_info.animations.epic_bonus_dance_idle,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_DANCE_END=new Cl(K.smokey_info.animations.epic_bonus_dance_end,null,null,.05,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_DANCE=new Cl(K.smokey_info.animations.epic_bonus_dance,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.BONUS_TRANSITION=new Cl(K.smokey_info.animations.bonus_transition,null,null,.1,null,null,null,null,null,null,null,null,null,null,null),i.h.SHOOT=new Cl(K.smokey_info.animations.shoot,null,null,.05,null,2,null,null,null,null,null,null,null,null,null),i.h.SHOOT_2=new Cl(K.smokey_info.animations.shoot_2,null,null,.05,null,2,null,null,null,null,null,null,null,null,null),i.h.SHOOT_3=new Cl(K.smokey_info.animations.shoot_3,null,null,.05,null,2,null,null,null,null,null,null,null,null,null),i.h.SHOOT_4=new Cl(K.smokey_info.animations.shoot_4,null,null,.05,null,2,null,null,null,null,null,null,null,null,null),i.h.SHOOT_5=new Cl(K.smokey_info.animations.shoot_5,null,null,.05,null,2,null,null,null,null,null,null,null,null,null),i.h.SHOOT_START=new Cl(K.smokey_info.animations.shoot_start,null,null,.05,null,null,null,null,null,null,null,null,null,null,null),i.h.SHOOT_END=new Cl(K.smokey_info.animations.shoot_end,null,null,.05,null,null,null,null,null,null,null,null,null,null,null),i.h.SHOOT_FAIL=new Cl(K.smokey_info.animations.shoot_fail,null,null,null,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_SHOOT=new Cl(K.smokey_info.animations.epic_bonus_shoot_1,null,null,.05,null,2,null,null,null,null,null,null,null,null,null),i.h.EPIC_SHOOT_2=new Cl(K.smokey_info.animations.epic_bonus_shoot_2,null,null,.05,null,2,null,null,null,null,null,null,null,null,null),i.h.EPIC_SHOOT_START=new Cl(K.smokey_info.animations.epic_bonus_shoot_start,null,null,null,null,null,null,null,null,null,null,null,null,null,null),i.h.EPIC_SHOOT_END=new Cl(K.smokey_info.animations.epic_bonus_shoot_end,null,null,null,null,null,null,null,null,null,null,null,null,null,null),new PA);(a=new at).h.IDLE=500,a.h.SCRATCH_BUTT=10,a.h.SHOOT_FAIL=2,a.h.DROP_MUSTACHE=1,s.set(Sc.BASE,a);(a=new at).h.EPIC_IDLE=500,a.h.EPIC_SCRATCH_BUTT=10,s.set(Sc.EPIC,a);var a=new PA;(r=new at).h.SHOOT=200,r.h.SHOOT_2=70,r.h.SHOOT_3=50,r.h.SHOOT_4=30,r.h.SHOOT_5=10,a.set(Sc.BASE,r);(r=new at).h.EPIC_SHOOT=1,r.h.EPIC_SHOOT_2=2,a.set(Sc.EPIC,r);var l,r=new at;switch(lt.over(2.1,2.1)?2.1:lt.over(1.1,2.1)?1.1:lt.over(.8,2.1)?.8:lt.over(.45,2.1)?.45:0){case 0:l="SLIM";break;case.45:l="PORTRAIT";break;case.8:l="SQUARE";break;case 1.1:l="LANDSCAPE";break;case 2.1:l="WIDE";break;default:l="unknown"}switch(r.h[l]={pos:st.fromBacking(new it(1.9,-.65,.1,null)),scale:1},lt.over(2.1,1.1)?2.1:lt.over(1.1,1.1)?1.1:lt.over(.8,1.1)?.8:lt.over(.45,1.1)?.45:0){case 0:l="SLIM";break;case.45:l="PORTRAIT";break;case.8:l="SQUARE";break;case 1.1:l="LANDSCAPE";break;case 2.1:l="WIDE";break;default:l="unknown"}switch(r.h[l]={pos:st.fromBacking(new it(1.75,-.65,.1,null)),scale:1},lt.over(2.1,.8)?2.1:lt.over(1.1,.8)?1.1:lt.over(.8,.8)?.8:lt.over(.45,.8)?.45:0){case 0:l="SLIM";break;case.45:l="PORTRAIT";break;case.8:l="SQUARE";break;case 1.1:l="LANDSCAPE";break;case 2.1:l="WIDE";break;default:l="unknown"}switch(r.h[l]={pos:st.fromBacking(new it(1.15,-1.3,.1,null)),scale:.8},lt.over(2.1,.45)?2.1:lt.over(1.1,.45)?1.1:lt.over(.8,.45)?.8:lt.over(.45,.45)?.45:0){case 0:l="SLIM";break;case.45:l="PORTRAIT";break;case.8:l="SQUARE";break;case 1.1:l="LANDSCAPE";break;case 2.1:l="WIDE";break;default:l="unknown"}switch(r.h[l]={pos:st.fromBacking(new it(.8,-1.3,.1,null)),scale:.75},lt.over(2.1,0)?2.1:lt.over(1.1,0)?1.1:lt.over(.8,0)?.8:lt.over(.45,0)?.45:0){case 0:l="SLIM";break;case.45:l="PORTRAIT";break;case.8:l="SQUARE";break;case 1.1:l="LANDSCAPE";break;case 2.1:l="WIDE";break;default:l="unknown"}r.h[l]={pos:st.fromBacking(new it(.8,-1.3,.1,null)),scale:.75};var o=new fr(new Ar(n,s,a,i,r));o.object.object.set_follow(t.object),this.gameModel.character=(new ge).add(o),e.addChild(this.gameModel.character),o.enable=!1,o.object.set_visible(!1),this.appModel.resizeSignal.connect(function(e){e=e.width/e.height;o.layout(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0)})},addGambleController:function(e){var t=this.gameModel.styleData.text.featureFooterGeneral,n=ks.bitmapFonts.h[t.font].toSdfFont(t.size,4),i=this.gameModel.styleData.text.featureFooterLandscape,s=ks.bitmapFonts.h[i.font].toSdfFont(i.size,4),a=this.gameModel.styleData.text.featureFooterPortrait,l=ks.bitmapFonts.h[a.font].toSdfFont(a.size,4),r=this.gameModel.styleData.text.continueHeader,o=this.gameModel.styleData.text.gambleHeader,u=ks.bitmapFonts.h[r.font].toSdfFont(r.size,4),h=ks.bitmapFonts.h[o.font].toSdfFont(o.size,4),c=st.fromBacking(new it(.375,-.65,1.1,null)),_=st.fromBacking(new it(.375,-.85,1.1,null)),d=hacksawCasino.Translation.game("high_noon_bonus_desc")+" \n \n "+hacksawCasino.Translation.game("gamble_choice_dialog_high_noon"),p=hacksawCasino.Translation.game("trickery_bonus_desc")+" \n \n "+hacksawCasino.Translation.game("gamble_choice_dialog_trickery"),m=new at,g=(m.h.empty=new Cl(K.shooting_range_info.animations.empty,null,null,null,1,null,null,null,null,null,null,null,null,null,null),m.h.setup=new Cl(K.shooting_range_info.animations.setup,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.idle=new Cl(K.shooting_range_info.animations.idle,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.shoot=new Cl(K.shooting_range_info.animations.shoot,null,null,null,null,1.2,null,null,null,null,null,null,null,null,null),new $s(K.shooting_range,.5,null,to.Always,null,null,null,m,null,null,null,null)),f=((m=new at).h.revealBronze=new Cl(K.coin_info.animations.bronze_coin,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.endBronze=new Cl(K.coin_info.animations.bronze_start,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.revealSilver=new Cl(K.coin_info.animations.silver_coin,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.endSilver=new Cl(K.coin_info.animations.silver_start,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.revealGold=new Cl(K.coin_info.animations.gold_coin,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.endGold=new Cl(K.coin_info.animations.gold_start,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.revealDiamond=new Cl(K.coin_info.animations.diamond_spin,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.endDiamons=new Cl(K.coin_info.animations.diamond_setup,null,null,null,null,null,null,null,null,null,null,null,null,null,null),new $s(K.coin,.8,null,to.Always,null,null,null,m,null,null,null,null)),A=((m=new at).h.fsSetup=new Cl(K.symbols_info.animations.specials_fs_setup,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.fsWin=new Cl(K.symbols_info.animations.specials_fs_win,null,null,null,null,null,null,null,null,null,null,null,null,null,null),new $s(K.symbols,.8,null,to.Always,null,null,null,m,null,null,null,null)),x=((m=new at).h.coinReveal=new Cl(K.coin_reveal_info.animations.remove,null,null,null,null,null,null,null,null,null,null,null,null,null,null),m.h.coinSoot=new Cl(K.coin_reveal_info.animations.dust,null,null,null,1,null,null,null,null,null,null,null,null,null,null),new $s(K.coin_reveal,.6,null,to.Always,null,null,null,m,null,null,null,null)),w=((m=new PA).set(B_.BUTTON_GREEN_ACTIVE,Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.continue_button_active)),m.set(B_.BUTTON_GREEN_HOVER,Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.continue_button_hover)),m.set(B_.BUTTON_RED_ACTIVE,Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.gamble_button_active)),m.set(B_.BUTTON_RED_HOVER,Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.gamble_button_hover)),m.set(B_.DIALOGUE,Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.intro_splash_bonus)),m.set(B_.DIALOGUE_PORTRAIT,Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.intro_splash_bonus_vertical)),new at),y=(w.h.bonus=new ta(Kh.getTile(J.misc,J.misc_info.frames.high_noon_saloon),.6*Jl.scale,null,to.Always,null,null,null),w.h.bonus_2=new ta(Kh.getTile(J.misc,J.misc_info.frames.trail_of_trickery),.6*Jl.scale,null,to.Always,null,null,null),[I_.REWARD_FS,I_.REWARD_BRONZE,I_.REWARD_SILVER,I_.REWARD_GOLD]),b=[I_.REWARD_FS,I_.REWARD_SILVER,I_.REWARD_SILVER,I_.REWARD_GOLD,I_.REWARD_GOLD,I_.REWARD_GOLD,I_.REWARD_GOLD,I_.REWARD_DIAMOND],v=new PA,c=(v.set(xc.GAMBLE,c),v.set(xc.CONTINUE,st.fromBacking(new it(-c.x,c.y,c.z,null))),new PA),_=(c.set(xc.GAMBLE,_),c.set(xc.CONTINUE,st.fromBacking(new it(-_.x,_.y,_.z,null))),Cu.Text(Wu.FontCharacters(h,Nu.fromDynamic(o),null,Mr.Center,!1,205,55),new ku(hacksawCasino.Translation.game("gamble_button_uc"),null))),h=Cu.Text(Wu.FontCharacters(u,Nu.fromDynamic(r),null,Mr.Center,!1,205,55),new ku(hacksawCasino.Translation.game("continue_uc"),null)),o=Cu.Text(Wu.FontCharacters(s,Nu.fromDynamic(i),null,Mr.Center,!1,540,50),new ku(hacksawCasino.Translation.game("you_won_num_free_spins_uc"),null)),u=new vu(Cu.Text(Wu.FontCharacters(n,Nu.fromDynamic(t),null,Mr.MultilineCenter,!0,525,75),new ku(hacksawCasino.Translation.game("you_won_num_free_spins_uc"),null)),o,st.fromBacking(new it(null,.35,.325,null)),st.fromBacking(new it(null,.2,.325,null)),null,null,null,null,null,null,null,null,null);(o=new at).h.bonus=new vu(Cu.Text(Wu.FontCharacters(l,Nu.fromDynamic(a),null,Mr.MultilineCenter,!0,525,490),new ku(d,null)),Cu.Text(Wu.FontCharacters(n,Nu.fromDynamic(t),null,Mr.MultilineCenter,!0,695,310),new ku(d,null)),st.fromBacking(new it(null,-.2,.325,null)),st.fromBacking(new it(null,-.13,.325,null)),null,null,null,null,null,null,null,null,null),o.h.bonus_2=new vu(Cu.Text(Wu.FontCharacters(n,Nu.fromDynamic(t),null,null,!0,625,490),new ku(p,null)),Cu.Text(Wu.FontCharacters(s,Nu.fromDynamic(i),null,Mr.MultilineCenter,!0,695,310),new ku(p,null)),st.fromBacking(new it(null,-.2,.325,null)),st.fromBacking(new it(null,-.13,.325,null)),null,null,null,null,null,null,null,null,null);(r=new at).h.reveal=new Cl(K.range_reveal_info.animations.reveal,null,null,null,null,null,null,null,null,null,null,null,null,null,null),r.h.setup=new Cl(K.range_reveal_info.animations.setup,null,null,null,null,null,null,null,null,null,null,null,null,null,null);var C,l=new $s(K.range_reveal,null,null,to.Always,null,null,null,r,null,null,null,null),r=new at;switch(lt.over(2.1,2.1)?2.1:lt.over(1.1,2.1)?1.1:lt.over(.8,2.1)?.8:lt.over(.45,2.1)?.45:0){case 0:C="SLIM";break;case.45:C="PORTRAIT";break;case.8:C="SQUARE";break;case 1.1:C="LANDSCAPE";break;case 2.1:C="WIDE";break;default:C="unknown"}switch(r.h[C]=st.fromBacking(new it(1,-.42,.1,null)),lt.over(2.1,1.1)?2.1:lt.over(1.1,1.1)?1.1:lt.over(.8,1.1)?.8:lt.over(.45,1.1)?.45:0){case 0:C="SLIM";break;case.45:C="PORTRAIT";break;case.8:C="SQUARE";break;case 1.1:C="LANDSCAPE";break;case 2.1:C="WIDE";break;default:C="unknown"}switch(r.h[C]=st.fromBacking(new it(.9,-.42,.1,null)),lt.over(2.1,.8)?2.1:lt.over(1.1,.8)?1.1:lt.over(.8,.8)?.8:lt.over(.45,.8)?.45:0){case 0:C="SLIM";break;case.45:C="PORTRAIT";break;case.8:C="SQUARE";break;case 1.1:C="LANDSCAPE";break;case 2.1:C="WIDE";break;default:C="unknown"}switch(r.h[C]=st.fromBacking(new it(.7,-.6,.2,null)),lt.over(2.1,.45)?2.1:lt.over(1.1,.45)?1.1:lt.over(.8,.45)?.8:lt.over(.45,.45)?.45:0){case 0:C="SLIM";break;case.45:C="PORTRAIT";break;case.8:C="SQUARE";break;case 1.1:C="LANDSCAPE";break;case 2.1:C="WIDE";break;default:C="unknown"}switch(r.h[C]=st.fromBacking(new it(.5,-.6,.2,null)),lt.over(2.1,0)?2.1:lt.over(1.1,0)?1.1:lt.over(.8,0)?.8:lt.over(.45,0)?.45:0){case 0:C="SLIM";break;case.45:C="PORTRAIT";break;case.8:C="SQUARE";break;case 1.1:C="LANDSCAPE";break;case 2.1:C="WIDE";break;default:C="unknown"}r.h[C]=st.fromBacking(new it(.5,-.6,.2,null));a=new or(new ur(m,v,c,_,h,y,b,f,A,g,u,o,w,x,l,r,Kh.getTile(J.misc,J.misc_info.frames.hidden_epic_bonus_small),this.casinoModel.isMobile()));this.gameModel.gambleController=(new ge).add(a),e.addChild(this.gameModel.gambleController)},addReel:function(P,z){for(var O=this,e=".--)(1/**+21/*)+.1)*.+/-)2./+*12".split(""),t=e.slice(0,2),n=e.slice(2),e=Jn.cca(t[0],0)-40,t=Jn.cca(t[1],0)-40,i=new Array(n.length),s=0,a=n.length;s<a;)i[R=s++]=Jn.cca(n[R],0)-40;for(var e=new Hl(e,t,i),t=Qf.ReelWinFilter(Jf.WinSettingsFilter(!1,null,!1)),l=Qf.ReelWinFilter(Jf.WinSettingsFilter(!0,null,!1)),r=Qf.ReelWinFilter(Jf.WinSettingsFilter(!1,null,!0)),o=Qf.ReelWinFilter(Jf.WinRevealModeFilter(["bonus_buy"]),Vf.Or),u=Qf.ReelAttentionFilter(Bf.AttentionRevealModeFilter(null,["bonus_buy"])),h=Qf.ReelWinFilter(Jf.CountupWinFilter(!1)),c=this.gameModel.gameInfo.symbols,s=[],a=0;a<c.length;){var _=c[a];++a,"FS"!=_.name&&s.push(_)}for(var g=il.find(this.gameModel.gameInfo.symbols,function(e){return"FS"==e.name}),d=il.find(this.gameModel.gameInfo.symbols,function(e){return"WILD"==e.name}),c=this.gameModel.gameInfo.symbols,a=[],p=0;p<c.length;){_=c[p];++p,new ot("WILD|FS","").match(_.name)&&a.push(_)}for(var m=il.filterMap(this.gameModel.gameInfo.symbols,function(e){return new ot("WILD|LOW|HIGH","").match(e.name)?OA.Some(0|e.id):OA.None}),i=new Array(a.length),p=0,f=a.length;p<f;)i[R=p++]=0|a[R].id;for(c=this.gameModel.gameInfo.symbols,a=[],p=0;p<c.length;){_=c[p];++p,new ot("CASH","").match(_.name)||a.push(_)}for(var A=new Array(a.length),p=0,f=a.length;p<f;)A[R=p++]=0|a[R].id;for(var d=[qd(new dd("win",null,.125,.125,null,null,null,null),[t,Qf.ReelWinFilter(Jf.WinSymbolFilter([d.name]))],0),Kd(new $_(function(e){var t,n;return null!=O.gameModel.bulletBar?(t=null!=(t=O.gameModel.bulletBar._compMap)?t.h[mr.BASE_NAME]:null,n="epic"==O.casinoModel.gameMode,(t=t instanceof mr?t:null).increaseAmmoAmount(),t.updateAmmo(!1,n,.3)):rt.NOISE},null,null),[t]),Kd(new $_(function(e){var t,n;return null!=O.gameModel.bulletBar?(t=null!=(t=O.gameModel.bulletBar._compMap)?t.h[mr.BASE_NAME]:null,n="epic"==O.casinoModel.gameMode,(t=t instanceof mr?t:null).increaseAmmoAmount(),t.updateAmmo(!1,n,0)):rt.NOISE},null,null),[Qf.ReelWinFilter(Jf.WinSettingsFilter(!0,null,!1),Vf.Or),Qf.ReelWinFilter(Jf.WinSettingsFilter(!1,null,!0),Vf.Or)])],x=[t,l,r],w=[.2,.125,.075],y=new Array(w.length),a=0,p=w.length;a<p;){var b=w[R=a++];y[R]=[et.Color(new nt(st.fromBacking(new it(2,2,1.25,null)),null,null,b,null,function(e){return-e*(e-2)},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(1,1,1,null)),null,b,b,null,function(e){return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.4,1.4,null,null)),null,null,1.75*b,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null))]}for(c=il.zip4([.125,.0625,0],[.125,.0625,0],y,x),y=new Array(c.length),a=0,p=c.length;a<p;){var v=c[R=a++];y[R]=Xd(new Ad(v._2,null,null,v._1,v._0,null,null,null,null),[v._3])}(a=new at).h[11]=".",a.h[10]=",";for(var x=this.createWinTextPresentation(Wu.TileCharacters(J.digits,-.005,a),[t],.3,!0),x=((a=new at).h[11]=".",a.h[10]=",",[x,this.createWinTextPresentation(Wu.TileCharacters(J.digits,-.005,a),[Qf.ReelWinFilter(Jf.WinSettingsFilter(!0,null,!1),Vf.Or),Qf.ReelWinFilter(Jf.WinSettingsFilter(!1,null,!0),Vf.Or)],0,!1)]),C=[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,null)),null,null,.1,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),null,0)],S=!1,d=d.concat(y).concat(x).concat(C),k=[$d(new dd("land",null,null,null,null,null,null,null),[Qf.ReelAttentionFilter(Bf.AttentionSymbolFilter(i)),Qf.ReelAttentionFilter(Bf.AttentionSettingsFilter(null,null,!1))]),$d(new dd("idle",null,null,null,null,null,null,null),[Qf.ReelAttentionFilter(Bf.AttentionSymbolFilter(i)),Qf.ReelAttentionFilter(Bf.AttentionSettingsFilter(null,null,!1))],null,!1),(x=new dd("win",null,null,null,null,null,null,null),C=[Qf.ReelAttentionFilter(Bf.AttentionOccuranceFilter([0|g.id],new Qi(3,2147483647))),u],If.Animation(_d,x,C,id.ScatterTriggered,k)),ep(new $_(function(e){var t=O.gameModel.character._compMap,t=null!=t?t.h[fr.BASE_NAME]:null;return(t instanceof fr?t:null).queueAnimation("SMALL_WIN",!0),rt.NOISE},null,null),[Qf.ReelAttentionFilter(Bf.AttentionOccuranceFilter([0|g.id],new Qi(3,3))),Qf.ReelAttentionFilter(Bf.AttentionSettingsFilter(null,null,!1)),u]),ep(new $_(function(e){var t=O.gameModel.character._compMap,t=null!=t?t.h[fr.BASE_NAME]:null;return(t instanceof fr?t:null).queueAnimation("BIG_WIN",!0),rt.NOISE},null,null),[Qf.ReelAttentionFilter(Bf.AttentionOccuranceFilter([0|g.id],new Qi(4,4))),Qf.ReelAttentionFilter(Bf.AttentionSettingsFilter(null,null,!1)),u]),(x=new od(null),C=[Qf.ReelAttentionFilter(Bf.AttentionStateFilter([p_])),Qf.ReelAttentionFilter(Bf.AttentionSettingsFilter(null,null,!1)),Qf.ReelAttentionFilter(Bf.AttentionRemainingFilter([0|g.id],3,1)),u],k=1,If.Reel(rd,x,C,id.ReelAnimation,k)),(x=new $_(function(e){if(O.slotModel.reelActor.getPositionGrid(),!S){S=!0,O.publish("game","fsAttentionStart");for(var t=[z],n=st.fromBacking(new it(.6,.6,.6,null)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,2,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;rt.noise(rt.inParallel(o));var n=O.gameModel.logo._compMap,u=null!=n?n.h[mu.BASE_NAME]:null,h=null!=(n=O.slotModel.reelActor.owner._compMap)?n.h[q_.BASE_NAME]:null;il.each([(u instanceof mu?u:null).object,(h instanceof q_?h:null).object],function(e){tt.translateTo(e,new nt(st.fromBacking(new it(null,null,e.get_z()+.5,null)),null,null,11,null,function(e){return-e*(e-2)},null,null,null,null,null))}),((u=null!=(n=O.gameModel.character._compMap)?n.h[fr.BASE_NAME]:null)instanceof fr?u:null).queueAnimation("REACT",!0)}return rt.NOISE},function(e){if(S){for(var t=O.casinoModel.getEventData().grid.split(""),n=t.slice(0,2),i=t.slice(2),t=Jn.cca(n[0],0)-40,n=Jn.cca(n[1],0)-40,s=new Array(i.length),a=0,l=i.length;a<l;)s[p=a++]=Jn.cca(i[p],0)-40;for(var t=new Hl(t,n,s),r=0|g.id,n=t.mW,o=t.mH,u=t.mData,s=new Array(u.length),a=0,l=u.length;a<l;)s[p=a++]=u[p]==r;for(u=new Hl(n,o,s).toArray(),a=[],l=0;l<u.length;){var h=u[l];++l,h&&a.push(h)}for(var c=(n=null!=(t=O.gameModel.character._compMap)?t.h[fr.BASE_NAME]:null)instanceof fr?n:null,_=(a.length<3&&(O.publish("game","fsMiss"),o="west_virginia"==O.casinoModel.jurisdiction?["STOMP_SWEAR"]:["STOMP","STOMP_SWEAR"],c.queueAnimation(o[el.random(o.length)],!0),null!=il.find(O.casinoModel.betEvents,function(e){return"collapse"==e.etn}))&&(tt.rotateTo(c.object,new nt(st.fromBacking(new it(null,null,0,null)),null,null,1,null,null,null,null,null,null,null)).handle(function(e){c.queueAnimation("IDLE",!0)}),O.publish("game","stopBeingAngry")),S=!1,O.publish("game","fsAttentionEnd"),[z]),d=st.fromBacking(new it(1,1,1,null)),s=new Array(_.length),a=0,l=_.length;a<l;)s[p=a++]={scene:_[p],comp:new Bs(new Ts(d,1,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var p,m=new Array(s.length),a=0,l=s.length;a<l;)m[p=a++]=s[p].comp.tweenDone;rt.noise(rt.inParallel(m));n=null!=(t=O.slotModel.reelActor.owner._compMap)?t.h[q_.BASE_NAME]:null;tt.translateTo((n instanceof q_?n:null).object,new nt(st.fromBacking(new it(null,null,0,null)),null,null,1,null,function(e){return 0==e?0:1==e?1:Math.exp(-6.931471805599453*e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4)+1},null,null,null,null,null));n=null!=(t=O.gameModel.logo._compMap)?t.h[mu.BASE_NAME]:null;tt.translateTo((n instanceof mu?n:null).object,new nt(st.fromBacking(new it(null,null,.1,null)),null,null,1,null,function(e){return 0==e?0:1==e?1:Math.exp(-6.931471805599453*e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4)+1},null,null,null,null,null))}return rt.NOISE},null),C=[Qf.ReelAttentionFilter(Bf.AttentionSettingsFilter(null,null,!1)),Qf.ReelAttentionFilter(Bf.AttentionRemainingFilter([0|g.id],3,1,2,[3,4,5])),u],If.Action(J_,x,C,id.ReelAction,T))],c=this.gameModel.gameInfo.symbols,a=[],p=0;p<c.length;){_=c[p];++p,new ot("CASH_","").match(_.name)&&a.push(_)}for(c=this.gameModel.gameInfo.symbols,p=[],f=0;f<c.length;){_=c[f];++f,new ot("COLLECT","").match(_.name)&&p.push(_)}for(var M=p,i=new Array(a.length),p=0,f=a.length;p<f;)i[R=p++]=0|a[R].id;for(c=this.gameModel.gameInfo.symbols,a=[],p=0;p<c.length;){_=c[p];++p,new ot("FS|ACTIVATOR|MULTIPLIER|POT","").match(_.name)&&a.push(_)}for(y=new Array(a.length),p=0,f=a.length;p<f;)y[R=p++]=0|a[R].id;for(c=this.gameModel.gameInfo.symbols,a=[],p=0;p<c.length;){_=c[p];++p,new ot("MULTIPLIER","").match(_.name)&&a.push(_)}for(var I=new Array(a.length),p=0,f=a.length;p<f;)I[R=p++]=0|a[R].id;for(var B=function(){return O.casinoModel.currentTurboValue({superTurbo:{duration:.2,delay:0},turbo:{duration:.6,delay:.05},normal:{duration:1,delay:.1}})},u=function(e,o){return Jd(new ld(function(a,l,r){return new ad(a,null,function(){var e=nl.__cast(r,T_),t=nl.__cast(a,ju),n=O.slotModel.reelActor.owner._compMap,i=null!=n?n.h[Md.BASE_NAME]:null,s=(i instanceof Md?i:null).visibleSymbols,n=(i=null!=(n=O.slotModel.reelActor.owner._compMap)?n.h[lr.BASE_NAME]:null)instanceof lr?i:null,i=0|il.find(M,function(e){return"COLLECTOR"==e.name}).id;return rt.noise(n.spreadMultElement({element:t,hitGrid:e.winfactorGrid,visibleSymbols:s,turboMode:O.casinoModel.get_turboMode(),startCell:l,betAmount:O.casinoModel.betAmount,countDuration:o,potId:i}))},null)},null,E_.MULTIPLIER_VALUE),e.concat([Qf.ReelWinFilter(Jf.WinAttachmentFilter([E_.MULTIPLIER_VALUE]))]))},x=function(e,s){return Jd(new ld(function(n,e,i){return new ad(n,null,function(){var e=nl.__cast(n,ju),t=nl.__cast(i,T_);return e.flags|=2,e.countTo(parseFloat(t.count)),rt.noise(tt.tween(e.tweenObject,[et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(0,0,null,null)),null,s,null,function(e){return 0==e?0:1==e?1:Math.exp(-6.931471805599453*e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4)+1},null,null,null,null,null))]))},null)},null,E_.MULTIPLIER_VALUE),e)},C=[Qf.ReelWinFilter(Jf.WinRevealModeFilter(["skip"]),Vf.Or),Qf.ReelWinFilter(Jf.WinSettingsFilter(!1,null,!0))],T=[Qf.ReelWinFilter(Jf.WinSettingsFilter(null,null,!1)),Qf.ReelWinFilter(Jf.WinRevealModeFilter(null,["skip"]))],E=function(e,n){for(var t=O.slotModel.reelActor.get_currentGrid(),i=t.mW,s=t.mH,a=e.split(""),l=new Array(a.length),r=0,o=a.length;r<o;){var u=r++;l[u]="1"==a[u]}var e=new Hl(i,s,l),h=[Ou.get_id(41),Ou.get_id(40),Ou.get_id(43),Ou.get_id(42)];return il.each(il.filterNull(t.mapCellsByMask(e,function(e,t){return-1!=h.indexOf(e)?(t=(t.x+t.y)*n,e==Ou.get_id(43)?{message:"spawnPot",delay:t,isEpic:null}:e==Ou.get_id(42)?{message:"spawnReloader",delay:t,isEpic:null}:{message:"spawnClover",delay:t,isEpic:e==Ou.get_id(41)}):null})),function(e){O.publish("game",e.message,{isEpic:e.isEpic,delay:e.delay})}),rt.NOISE},a=new at,o=[qd(new dd("win",null,null,null,null,null,null,null),[Qf.ReelWinFilter(Jf.WinSymbolFilter([g.name]),Vf.And),o]),Kd(new $_(function(e){var t=il.find(O.casinoModel.getEventData().actions,function(e){return"bonusfeaturewon"==e.at}).data;return O.publish("game","fsWin",{gameMode:t.bfw}),rt.NOISE},null,null))],o=(a.h.fsWin=o,[qd(new dd("win",null,null,null,null,null,null,null),[Qf.ReelWinFilter(Jf.WinSymbolFilter([g.name]))],.5),Xd(new Ad([et.Scale(new nt(st.fromBacking(new it(1.2,1.2,null,null)),st.fromBacking(new it(1,1,null,null)),null,.5,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(2,2,2,null)),null,null,.5,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null))],null,null,null,null,null,null,null,null),[Qf.ReelWinFilter(Jf.WinSymbolFilter([g.name]))],.5)]),o=(a.h.retrigger=o,[qd(new dd("win",null,.1,.1,null,null,.5,null),[t,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),qd(new dd("win",null,.05,.05,null,null,.4,null),[l,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),qd(new dd("win",null,.025,.025,null,null,.3,null),[r,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return O.publish("game","revealCoinMultipliers"),e.flags|=2,rt.noise(tt.colorTo(e.tweenObject,new nt(st.fromBacking(new it(1,1,1,null)),st.fromBacking(new it(5,5,.5,null)),null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},new nd(.1,.1,1,null,null,null),E_.COIN_VALUE),[t,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return O.publish("game","revealCoinMultipliers"),e.flags|=2,rt.noise(tt.colorTo(e.tweenObject,new nt(st.fromBacking(new it(1,1,1,null)),st.fromBacking(new it(5,5,.5,null)),null,.4,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},new nd(.05,.05,.9,null,null,null),E_.COIN_VALUE),[l,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return O.publish("game","revealCoinMultipliers"),e.flags|=2,rt.noise(tt.colorTo(e.tweenObject,new nt(st.fromBacking(new it(1,1,1,null)),st.fromBacking(new it(5,5,.5,null)),null,.3,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},new nd(.025,.025,.725,null,null,null),E_.COIN_VALUE),[r,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))])]),o=(a.h.revealCoin=o,[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(0,0,null,null)),null,.5,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],qu.Symbol,null,.1,.1,null,null,null,null),[t]),Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.01,.01,null,null)),null,.4,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],qu.Symbol,null,.05,.05,null,null,null,null),[l]),Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.01,.01,null,null)),null,.3,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],qu.Symbol,null,.025,.025,null,null,null,null),[r]),Kd(new $_(function(e){return E(e.mask,.1)},null,null),[t]),Kd(new $_(function(e){return E(e.mask,.05)},null,null),[l]),Kd(new $_(function(e){return E(e.mask,.025)},null,null),[r])]),o=(a.h.revealCoinTween=o,[qd(new dd("idle",null,null,null,null,null,null,null),[],0)]),o=(a.h.idle=o,[qd(new dd("idle",null,null,null,null,null,null,null),[Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))],0)]),o=(a.h.idleCoin=o,[Jd(new ld(function(e,t,n){return new ad(e,null,function(){return rt.noise(tt.tween(nl.__cast(e,ju).tweenObject,[et.Color(new nt(st.fromBacking(new it(null,null,null,1)),null,null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null))]))},null)},null,E_.COIN_VALUE),[Qf.ReelWinFilter(Jf.WinAttachmentFilter([E_.COIN_VALUE]))])]),o=(a.h.fadeInFortuneValues=o,[qd(new dd("end",null,null,null,null,null,null,null),[Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))])]),o=(a.h.end=o,qd(new dd("setup",null,null,null,null,null,null,null))),F=new Ad([et.Color(new nt(st.fromBacking(new it(.4,.4,.4,1)),null,null,.3,null,function(e){return-e*(e-2)},null,null,null,null,null))],qu.Symbol,null,null,null,null,null,null,null),Q=new Array(M.length),p=0,f=M.length;p<f;)Q[R=p++]=0|M[R].id;F=[o,Xd(F,[Qf.ReelWinFilter(Jf.WinSymbolIdFilter(Q))])],a.h.setup=F,o=[qd(new dd("remove",null,null,null,null,null,null,null))],a.h.remove=o,o=[qd(new dd("shoot",null,null,null,null,null,null,null))],a.h.shoot=o,o=[qd(new dd("reload",null,null,null,null,null,null,null))],a.h.reload=o,o=[qd(new dd("win",null,null,null,null,null,null,null))],a.h.win=o,o=[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(.5,.5,.5,null)),null,null,.2,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),null,.5)],a.h.fade=o,o=[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(.5,.5,.5,null)),null,null,.2,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),[Qf.ReelWinFilter(Jf.WinSymbolIdFilter(m))])],a.h.fadePaying=o,o=[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,null)),null,null,.2,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),[Qf.ReelWinFilter(Jf.WinSymbolIdFilter(m))])],a.h.resetFade=o,o=[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1.5,1.25,1.25,null)),st.fromBacking(new it(1,1,1,null)),null,.25,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.4,1.4,null,null)),st.fromBacking(new it(1,1,null,null)),null,.25,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},null,null,null,null,null))],null,null,null,null,null,null,null,null))],a.h.highlight=o,o=[Jd(new ld(function(u,e,h){return new ad(u,null,function(){O.casinoModel.superTurbospin||O.publish("game","collectCoinStart");var e=nl.__cast(u,ju),t=nl.__cast(h,f_),n=(e.flags|=2,999<e.get_value()?.2:0),i=O.slotModel.reelActor.owner._compMap,s=((o=null!=i?i.h[Md.BASE_NAME]:null)instanceof Md?o:null).visibleSymbols,i=(o=null!=(i=O.gameModel.rotator._compMap)?i.h[wc.BASE_NAME]:null)instanceof wc?o:null,a=new It(e.parent),a=(tt.init(a,null),i.stop(a),t.targetPosition),t=$f.getSymbol(s.mData[a.y*s.mW+a.x]).object.object.getRelPos(u),s=t._41,a=t._42,a=(t=s=null==s?0:s,s=a=null==a?0:a,e.tweenObject),e=st.fromBacking(new it(null,null,.04,null)),l=st.fromBacking(new it(null,null,.5,null)),r=.75*B().duration,o=et.Position(new nt(l,e,B().delay,r,null,function(e){var t=o1.linear;return e<.5?t(2*e):1-t(2*(e-.5))},null,null,null,null,null)),e=st.fromBacking(new it(1.2,1.2,null,null)),l=B().duration,i=et.Scale(new nt(e,null,B().delay,l,null,function(e){var t=o1.linear;return e<.5?t(2*e):1-t(2*(e-.5))},null,null,null,null,null)),e=st.fromBacking(new it(null,null,0,null)),l=st.fromBacking(new it(null,null,.5,null)),r=B().duration,r=et.Rotate(new nt(l,e,B().delay,r,null,function(e){return Math.sin(2*Math.PI*e)},null,null,null,null,null)),e=st.fromBacking(new it(t,s,null,null)),l=B().duration;return rt.noise(tt.tween(a,[o,i,r,et.Position(new nt(e,null,B().delay,l,null,function(e){return e<.5?2*e*e:(e=e-1)*e*-2+1},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,B().duration+B().delay-n,0,null,null,null,null,null,null,null))]))},null)},null,E_.COIN_VALUE))],a.h.collectCoins=o,o=[qd(new dd("win",null,null,null,null,null,null,null)),Jd(new ld(function(o,e,u){return new ad(o,null,function(){var e=nl.__cast(o,ju),t=nl.__cast(u,f_),n=(e.flags|=2,O.slotModel.reelActor.owner._compMap),i=(n=null!=n?n.h[lr.BASE_NAME]:null)instanceof lr?n:null,s=parseFloat(t.count),i=i.getValueScale(s),a=(e.countTo(s,B().duration),e.updateSignal.listen(function(){O.publish("game","countPotValue")})),s=(O.after(B().duration).handle(function(){null!=a&&a.cancel(),O.publish("game","collectCountupComplete",{cell:t.targetPosition})}),e.tweenObject),n=et.Position(new nt(st.fromBacking(new it(null,null,.05,null)),null,null,0,null,null,!0,null,null,null,null)),e=et.Position(new nt(st.fromBacking(new it(null,null,-.05,null)),null,B().delay+.01,.01,null,null,!0,null,null,null,null)),l=et.Scale(new nt(st.fromBacking(new it(.1,.1,null,null)),null,null,.5*B().duration,null,function(e){return-e*(e-2)},!0,null,null,null,null)),i=st.fromBacking(new it(i,i,null,null)),r=.5*B().duration;return rt.noise(tt.tween(s,[n,e,l,et.Scale(new nt(i,null,.5*B().delay,r,null,function(e){return-e*(e-2)},null,null,null,null,null))]))},null)},null,E_.COIN_VALUE))],a.h.collectorCollect=o,o=[qd(new dd("remove",null,.05,.05,null,null,null,null),[t,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(y))]),qd(new dd("remove",null,null,null,null,null,null,null),[l,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(y))]),Xd(new Ad([et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),st.fromBacking(new it(1,1,null,null)),null,.2,null,function(e){return e*e},null,null,null,null,null))],null,null,.05,.05,null,null,null,null),[t,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(null,y))]),Xd(new Ad([et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),st.fromBacking(new it(1,1,null,null)),null,.2,null,function(e){return e*e},null,null,null,null,null))],null,null,null,null,null,null,null,null),[l,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(null,y))]),Xd(new Ad([et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),st.fromBacking(new it(1,1,null,null)),null,.2,null,function(e){return e*e},null,null,null,null,null))],null,null,null,null,null,null,null,null),[r]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return rt.noise(tt.scaleTo(e.tweenObject,new nt(st.fromBacking(new it(0,0,null,null)),null,null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},new nd(.05,.05,null,null,null,null),E_.MULTIPLIER_VALUE),[t,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(I))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return rt.noise(tt.scaleTo(e.tweenObject,new nt(st.fromBacking(new it(0,0,null,null)),null,null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},null,E_.MULTIPLIER_VALUE),[l,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(I))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return rt.noise(tt.scaleTo(e.tweenObject,new nt(st.fromBacking(new it(0,0,null,null)),null,null,.25,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},null,E_.MULTIPLIER_VALUE),[r,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(I))]),Kd(new $_(function(e){for(var n=null==O.casinoModel.get_turboMode()?.05:0,t=O.slotModel.reelActor.get_currentGrid(),i=t.mW,s=t.mH,a=e.mask.split(""),l=new Array(a.length),r=0,o=a.length;r<o;){var u=r++;l[u]="1"==a[u]}return il.each(t.mapCellsByMask(new Hl(i,s,l),function(e,t){return(t.x+t.y)*n}),function(e){O.publish("game","revealRemoveSym",{delay:e})}),rt.NOISE},null,null))],a.h.replaceRemove=o,o=[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,null,0,null,null,null,null,null,null,null))],qu.Symbol,null,null,null,null,null,null,null))],a.h.hideSymbol=o,o=[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.01,.01,null,null)),null,.5,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],qu.Symbol,null,.1,.1,null,null,null,null),[t]),Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.01,.01,null,null)),null,.4,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],qu.Symbol,null,.05,.05,null,null,null,null),[l]),Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.01,.01,null,null)),null,.3,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],qu.Symbol,null,.025,.025,null,null,null,null),[r]),qd(new dd("win",null,.1,.1,null,null,.5,null),[t,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),qd(new dd("win",null,.05,.05,null,null,.4,null),[l,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),qd(new dd("win",null,.025,.025,null,null,.3,null),[r,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return O.publish("game","revealCoinMultipliers"),e.flags|=2,rt.noise(tt.colorTo(e.tweenObject,new nt(st.fromBacking(new it(1,1,1,null)),st.fromBacking(new it(5,5,.5,null)),null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},new nd(.1,.1,1,null,null,null),E_.COIN_VALUE),[t,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return O.publish("game","revealCoinMultipliers"),e.flags|=2,rt.noise(tt.colorTo(e.tweenObject,new nt(st.fromBacking(new it(1,1,1,null)),st.fromBacking(new it(5,5,.5,null)),null,.4,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},new nd(.05,.05,.9,null,null,null),E_.COIN_VALUE),[l,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))]),Jd(new ld(function(e,t,n){return new ad(e,null,function(){return O.publish("game","revealCoinMultipliers"),e.flags|=2,rt.noise(tt.colorTo(e.tweenObject,new nt(st.fromBacking(new it(1,1,1,null)),st.fromBacking(new it(5,5,.5,null)),null,.3,null,function(e){return-e*(e-2)},null,null,null,null,null)))},null)},new nd(.025,.025,.65,null,null,null),E_.COIN_VALUE),[r,Qf.ReelWinFilter(Jf.WinSymbolIdFilter(i))])],a.h.revealSymbol=o,o=[x([t,Qf.ReelWinFilter(Jf.WinAttachmentFilter([E_.MULTIPLIER_VALUE]))],1),x([l,Qf.ReelWinFilter(Jf.WinAttachmentFilter([E_.MULTIPLIER_VALUE]))],.5),x([r,Qf.ReelWinFilter(Jf.WinAttachmentFilter([E_.MULTIPLIER_VALUE]))],0),Xd(new Ad([et.Color(new nt(null,st.fromBacking(new it(5,5,.5,null)),null,.2,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.02,1.02,null,null)),null,null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(.8,.8,null,null)),null,.5,.2,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,.7,.2,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),T,0),Xd(new Ad([et.Color(new nt(null,st.fromBacking(new it(5,5,.5,null)),null,.2,null,null,null,null,null,null,null))],null,null,.025,.025,null,null,null,null),C,0)],a.h.revealMultipliers=o,o=[qd(new dd("win",null,null,null,null,null,null,null)),qd(new dd("idle",null,null,null,null,null,null,null),null,0),Xd(new Ad([et.Color(new nt(st.fromBacking(new it(2,2,2,null)),null,null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(.5,.5,.5,null)),null,.75,.5,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.02,1.02,null,null)),null,null,.5,null,function(e){return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,.75,.5,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(0,0,.05,null)),null,null,.5,null,function(e){return 2*(e<.5?e:1-e)<=0?0:1},!0,null,null,null,null))],null,null,null,null,null,null,null,null),T),Xd(new Ad([et.Color(new nt(st.fromBacking(new it(.5,.5,.5,null)),null,null,.1,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),C),u(T,.2),u(C,.05)],a.h.triggerMultipliers=o,o=[Kd(new $_(function(e){var z=e.merged,t=el.parseInt(e.symbol),n=el.parseInt(e.count),i=20<t&&t<25?4:24<t&&t<29?20:28<t&&t<32?100:31<t&&t<40?150:null,s=20<n&&n<25?4:24<n&&n<29?20:28<n&&n<32?100:31<n&&n<40?150:null,a=null!=i&&null!=s,t=i!=s&&a||t==Ou.get_id(40)&&n==Ou.get_id(41),l=null!=e.pos,r=(T=null!=(n=O.gameModel.rotator._compMap)?n.h[wc.BASE_NAME]:null)instanceof wc?T:null,o=(T=null!=(n=O.slotModel.reelActor.owner._compMap)?n.h[Md.BASE_NAME]:null)instanceof Md?T:null,u=e.mask.indexOf("1"),h=o.visibleSymbols,c=$f.getSymbol(h.mData[(u/h.mW|0)*h.mW+u%h.mW]),_=c.object,c=null!=(n=c.getAttachment(E_.COIN_VALUE))?n.element.tweenObject:null,h=_.object.getTransform(),d=new Gr(0,0,0),p=d,m=h._41,g=h._42,f=(null==(k=h._43)&&(k=0),null==g&&(g=0),p.x=m=null==m?0:m,p.y=g,p.z=k,st.fromVector3(d)),h=(p=l?(h=o.visibleSymbols,M=e.pos,p=$f.getSymbol(h.mData[M.y*h.mW+M.x]).object.object.getTransform(),h=d=new Gr(0,0,0),m=p._41,g=p._42,null==(k=p._43)&&(k=0),null==g&&(g=0),h.x=m=null==m?0:m,h.y=g,h.z=k,st.fromVector3(d)):(M=st.fromBacking(new it(-.675,.1,null,null)),w=x=A=0,A=m=null==(m=(h=((T=null!=(n=O.gameModel.character._compMap)?n.h[fr.BASE_NAME]:null)instanceof fr?T:null).object.object.getTransform())._41)?0:m,x=g=null==(g=h._42)?0:g,w=k=null==(k=h._43)?0:k,m=A+(d=st.to3dPoint(M)).x,st.fromVector3(new Gr(m=null==m?0:m,g=null==(g=x+d.y)?0:g,k=null==(k=w+d.z)?0:k))),p=(M=Math.random()<.5||l||!t?(n=null==(T=p.x)||null==(E=f.x)?null:T-E,v=null==(T=p.y)||null==(E=f.y)?null:T-E,C=null==(T=p.z)||null==(E=f.z)?null:T-E,S=null==(T=p.w)||null==(E=f.w)?null:T-E,(b=(y=st.fromBacking(new it(null!=n?n:p.x,null!=v?v:p.y,null!=C?C:p.z,null!=S?S:p.w))).x*y.x+y.y*y.y+y.z*y.z)<1e-20?0:1/Math.sqrt(b)):(d=p,n=null==(T=f.x)||null==(E=d.x)?null:T-E,v=null==(T=f.y)||null==(E=d.y)?null:T-E,C=null==(T=f.z)||null==(E=d.z)?null:T-E,S=null==(T=f.w)||null==(E=d.w)?null:T-E,(b=(y=st.fromBacking(new it(null!=n?n:f.x,null!=v?v:f.y,null!=C?C:f.z,null!=S?S:f.w))).x*y.x+y.y*y.y+y.z*y.z)<1e-20?0:1/Math.sqrt(b)),st.fromBacking(new it(y.x*M,y.y*M,y.z*M,y.w*M))),_.object.getTransform()),A=0,x=0,w=0;A=m=null==(m=h._41)?0:m,x=g=null==(g=h._42)?0:g,w=k=null==(k=h._43)?0:k;var y,b,n=null==(T=p.x)?null:-.075*T,v=null==(T=p.y)?null:-.075*T,C=null==(T=p.z)?null:-.075*T,S=null==(T=p.w)?null:-.075*T,m=A-(d=st.to3dPoint(st.fromBacking(new it(null!=n?n:p.x,null!=v?v:p.y,null!=C?C:p.z,null!=S?S:p.w)))).x,g=x-d.y,Q=(null==(k=w-d.z)&&(k=0),null==g&&(g=0),null==m&&(m=0),null!=c&&c.get_visible()?t?2*Math.PI:.25*Math.PI:.325*Math.PI),m=(h=p).y-0*h.z,g=0*h.z-h.x,k=0*h.x-0*h.y,M=(b=(y=st.fromVector4(new q(m=null==m?0:m,g=null==g?0:g,k=null==k?0:k,1))).x*y.x+y.y*y.y+y.z*y.z)<1e-20?0:1/Math.sqrt(b),I=st.fromBacking(new it(y.x*M,y.y*M,y.z*M,y.w*M)),B=new tn;if(B.initRotateAxis(I.x,I.y,I.z,Q),t&&!z){var T,E=(h=o.visibleSymbols.position(.335,.335)).mData[(u/h.mW|0)*h.mW+u%h.mW],f=st.fromBacking(new it(E.x,E.y,_.get_z()+.01,null)),F=(null!=e.pos&&((T=null!=(n=O.slotModel.reelActor.owner._compMap)?n.h[lr.BASE_NAME]:null)instanceof lr?T:null).presentCloverUpgradeParticles(_),_),A=a,v=i,C=f,S=I,x=B,w=O.slotModel.reelActor.owner._compMap,p=(d=null!=w?w.h[Md.BASE_NAME]:null)instanceof Md?d:null,w=(d=null!=(w=O.gameModel.rotator._compMap)?w.h[wc.BASE_NAME]:null)instanceof wc?d:null,d=(A?K.coin:K.symbols).skeletonData.animations;if(A){var D,V=zy.fromArray(d,function(e){return e.name},function(e){return new Cl(e.name,null,null,null,null,null,null,null,null,null,null,null,null,null,null)});switch(v){case 100:D=K.coin_info.animations.gold_coin;break;case 20:D=K.coin_info.animations.silver_coin;break;case 4:D=K.coin_info.animations.bronze_coin;break;default:D=null}R={spine:K.coin,animations:V,setupAnim:D}}else var V=zy.fromArray(d,function(e){return e.name},function(e){return new Cl(e.name,null,null,null,null,null,null,null,null,null,null,null,null,null,null)}),R={spine:K.symbols,animations:V,setupAnim:K.symbols_info.animations.specials_clover_idle};var P=new Js(new $s(R.spine,null,wr.Alpha,to.Always,null,null,null,R.animations,null,null,null,null));F.set_visible(!1),p.owner.addChild((new ge).add(P)),P.object.setPos(C),P.play(R.setupAnim),A&&P.stop(null,null,yh.SkipToEnd),w.rotate(P.object,new _r(x,null,S,null,2.25,o1.elasticOut)).handle(function(e){P.owner.dispose()}),tt.scaleTo(F,new nt(st.fromBacking(new it(null,null,1,null)),null,null,.15,null,null,null,null,null,null,null)).handle(function(e){tt.colorTo(P.object,new nt(st.fromBacking(new it(null,null,null,0)),null,null,.125,null,null,null,null,null,null,null)),F.set_visible(!0)})}switch(null!=c&&tt.translateTo(c,new nt(st.fromBacking(new it(null,null,.001,null)),st.fromBacking(new it(-.01,null,.1,null)),null,2.25,null,null,null,null,null,null,null)),g_.lessEqual(4,s)?4:g_.lessEqual(20,s)?20:g_.lessEqual(100,s)?100:150){case 100:T="gold";break;case 150:T="diamond";break;case 20:T="silver";break;case 4:T="bronze";break;default:T="unknown"}return O.publish("game","upgradeCoin",{coinType:T}),t?rt.noise(r.rotate(_,new _r(B,null,I,2*Math.PI,2.25,o1.elasticOut))):rt.noise(Rt([function(e){return r.rotate(_,new _r(B,null,I,Q,l?.15:.08,o1.circOut))},function(e){return tt.rotateTo(_,new nt(st.fromBacking(new it(0,0,0,1)),null,null,.9,null,o1.elasticOut,null,null,null,null,null))}]))},null,null))];a.h.upgradeSymbol=o;(p=new at).h[11]=".",p.h[10]=",";for(var o=[this.createWinTextPresentation(Wu.TileCharacters(J.digits_countup,-.005,p),[h],0,!0,null,.5),Kd(new $_(function(e){var t=null!=O.casinoModel.get_winFactorTierOffset()?.5:1;return O.publish("casino","excitement_"+O.casinoModel.gameMode,{excitement:e.winFactor*t}),rt.NOISE},null,null),[h])],F=(a.h.winSummary=o,Qf.ReelDropFilter(Zf.SymbolFilter(il.filterMap(s,function(e){return new ot("REVOLVER","").match(e.name)?OA.None:OA.Some(0|e.id)})))),m=Qf.ReelDropFilter(Zf.SymbolFilter(il.filterMap(this.gameModel.gameInfo.symbols,function(e){return new ot("REVOLVER","").match(e.name)?OA.Some(0|e.id):OA.None}))),T=[(t=new Ad([et.Position(new nt(st.fromBacking(new it(null,.04,null,null)),null,null,.15,null,function(e){e=2*(e<.5?e:1-e);return-e*(e-2)},!0,null,null,null,null))],null,null,null,null,null,null,null,null),l=[F,Qf.ReelDropFilter(Zf.SettingsFilter(null,null,!1))],Yf.Tween(fd,t,l,id.SymbolDropped,H)),(x=new dd("land",null,null,null,null,null,null,null),r=[m,Qf.ReelDropFilter(Zf.SettingsFilter(null,null,!1))],Yf.Animation(_d,x,r,id.SymbolDropped,Y))],u=[np(new dd("remove",null,.05,.05,null,null,null,null),[Qf.ReelRemoveFilter(Gf.RemoveSymbolIdFilter(A)),Qf.ReelRemoveFilter(Gf.RemoveSettingsFilter(!1,null,!1))]),np(new dd("remove",null,.025,.025,null,null,null,null),[Qf.ReelRemoveFilter(Gf.RemoveSymbolIdFilter(A)),Qf.ReelRemoveFilter(Gf.RemoveSettingsFilter(!0,null,null))]),tp(new Ad([et.Scale(new nt(st.fromBacking(new it(0,0,0,null)),st.fromBacking(new it(1,1,1,null)),null,.2,null,function(e){return e*e},null,null,null,null,null))],null,null,.05,.05,null,null,null,null),[Qf.ReelRemoveFilter(Gf.RemoveSymbolIdFilter(null,A)),Qf.ReelRemoveFilter(Gf.RemoveSettingsFilter(!1,null,!1))]),tp(new Ad([et.Scale(new nt(st.fromBacking(new it(0,0,0,null)),st.fromBacking(new it(1,1,1,null)),null,.2,null,function(e){return e*e},null,null,null,null,null))],null,null,.025,.025,null,null,null,null),[Qf.ReelRemoveFilter(Gf.RemoveSymbolIdFilter(null,A)),Qf.ReelRemoveFilter(Gf.RemoveSettingsFilter(!0,null,null))]),tp(new Ad([et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),st.fromBacking(new it(1,1,null,null)),null,.1,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),[Qf.ReelRemoveFilter(Gf.RemoveSettingsFilter(null,null,!0))])],p=Ld.Drop(X_),f=jd.Collapse(Z_),C=a,a=Xd(new Ad([et.Position(new nt(st.fromBacking(new it(null,null,0,null)),null,null,0,null,null,null,null,null,null,null))],qu.Symbol,null,null,null,null,null,null,null),null,0),h=new Ad([et.Color(new nt(st.fromBacking(new it(.4,.4,.4,null)),null,null,.2,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),i=new Array(s.length),V=0,W=s.length;V<W;)i[R=V++]=s[R].name;for(var F=new K_(new Gd(p,f,[a,Xd(h,[Qf.ReelWinFilter(Jf.WinSymbolFilter(i))],0)],[Xd(new Ad([et.Position(new nt(st.fromBacking(new it(null,null,.01,null)),null,null,0,null,null,null,null,null,null,null))],qu.Symbol,null,null,null,null,null,null,null))],d,[Xd(new Ad([et.Position(new nt(st.fromBacking(new it(null,null,0,null)),null,null,0,null,null,null,null,null,null,null))],qu.Symbol,null,null,null,null,null,null,null))],[Xd(new Ad([et.Color(new nt(st.fromBacking(new it(1,1,1,null)),null,null,.2,null,null,null,null,null,null,null))],null,null,null,null,null,null,null,null),null,0)],null,null,null,null,null,C,null,null,u,T,k,null,null,null,null,null,null,null,null,null,null,null)),t=(F.object.setPosition(0,0,0),new O_(new N_(null,null))),c=this.slotModel.reelData.dropRevealProps.normal,i=new Array(c.length),s=0,a=c.length;s<a;){var D=c[R=s++];D.values=O.slotModel.reelData.parseCurves(D.values),i[R]=D}for(c=this.slotModel.reelData.dropRevealProps.turbo,A=new Array(c.length),s=0,a=c.length;s<a;){var N=c[R=s++];N.values=O.slotModel.reelData.parseCurves(N.values),A[R]=N}for(c=this.slotModel.reelData.dropRevealProps.superTurbo,y=new Array(c.length),s=0,a=c.length;s<a;){var G=c[R=s++];G.values=O.slotModel.reelData.parseCurves(G.values),y[R]=G}for(l=Ed.DropProps(new P_(i,A,y,null)),c=this.slotModel.reelData.collapseReactProps.normal,i=new Array(c.length),s=0,a=c.length;s<a;){var U=c[R=s++];U.values=O.slotModel.reelData.parseCurves(U.values),i[R]=U}for(c=this.slotModel.reelData.collapseReactProps.turbo,A=new Array(c.length),s=0,a=c.length;s<a;){var L=c[R=s++];L.values=O.slotModel.reelData.parseCurves(L.values),A[R]=L}for(c=this.slotModel.reelData.collapseReactProps.superTurbo,y=new Array(c.length),s=0,a=c.length;s<a;){var R,j=c[R=s++];j.values=O.slotModel.reelData.parseCurves(j.values),y[R]=j}var H=Ed.CollapseProps(new D_(i,A,y,null)),m=this.getSymbolConfigs(),x=zy.fromArray(this.gameModel.gameInfo.reelSets,function(e){return e.name},function(e){for(var t=il.reduce(e.reels,function(e,t){t=t.symbols.length;return e<t?t:e},0),n=e.reels,i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++;i[l]=il.pad(n[l].symbols,t,null)}var r=i;return new Hl(e.reels.length,t).mapToGrid(function(e,t){return r[t.x][t.y]})}),s=[new xa(0,"",0,null),new xa(1.01,"",0,null),new xa(2,"",0,null),new xa(10,"",1500,null),new xa(20,"BIG WIN GFX",1800,"big_win"),new xa(50,"MEGA WIN GFX",3600,"mega_win"),new xa(100,"SUPER MEGA WIN GFX",3600,"super_mega_win"),new xa(250,"EPIC WIN GFX",7e3,"epic_win")],a=new at,o=Bd.Default(new bu(new vu(Cu.Tile(Kh.getTile(J.misc,J.misc_info.frames.reel_bg)),null,st.fromBacking(new it(-.045,null,-.02,null)),null,this.casinoModel.isMobile()?1.415:1,null,null,null,wr.Alpha,to.Always,null,null,null))),o=(a.h.base=o,Bd.Default(new bu(new vu(Cu.Tile(Kh.getTile(J.misc,J.misc_info.frames.reel_bg)),null,st.fromBacking(new it(-.045,null,-.02,null)),null,this.casinoModel.isMobile()?1.415:1,null,null,null,wr.Alpha,to.Always,null,null,null)))),o=(a.h.fs=o,Bd.Default(new bu(new vu(Cu.Tile(Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.reel_2)),null,st.fromBacking(new it(.008,.065,-.02,null)),null,this.casinoModel.isMobile()?1.155:1,null,null,null,wr.Alpha,to.Always,null,null,null)))),o=(a.h.fs_2=o,Bd.Default(new bu(new vu(Cu.Tile(Kh.getTile(J.misc_bonus,J.misc_bonus_info.frames.reel_2)),null,st.fromBacking(new it(.008,.065,-.02,null)),null,this.casinoModel.isMobile()?1.155:1,null,null,null,wr.Alpha,to.Always,null,null,null)))),r=(a.h.epic=o,new Md(new Id(m,s,{x:.335,y:.335},null,new Dd(st.fromBacking(new it(0,-.015,0,null)),st.fromBacking(new it(.2,0,0,null)),null,null),null,.2,null,null,null,e,x,null,l,H,null,a,null,null,null,null,null,Uf.BottomRightToTopLeft))),Y=this.addGridHighlightHandler(e.position(.335,.335).mapToGrid(function(e,t){return st.fromBacking(new it(e.x,e.y,null,null))})),h=this.addFortuneActor(F.object.object),d=.335*e.mW*.5,C=.335*e.mH*.5,s=new te(.175,.15,.065,.065),u=-d,T=-C,k=new Ur,Z=(k.xMin=u,k.yMin=T,k.zMin=-1,k.xMax=u+d,k.yMax=T+C,k.zMax=0,new Ne(new Ge(s,k,null,null,null,null,null,null)));P.add(Z);return this.appModel.resizeSignal.connect(function(e){var t,e=(e=e).width/e.height;switch(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0){case.45:t=new te(.175,.2,.065,.065);break;case.8:t=new te(.175,.25,.12,.12);break;case 1.1:t=new te(.175,.15,.2,.2);break;default:t=new te(.175,.15,.065,.065)}Z.set_margins(t)}),P.addChild((new ge).add(t).add(r).add(F).add(Y).add(h)),r},createWinTextPresentation:function(e,t,n,i,s,a){null==s&&(s=!1),null==i&&(i=!0),null==n&&(n=.3);var l,r=this;return e=new gd(new fa(e,null,a,null,null,to.Always,null,null),null,[et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.01,.01,null,null)),null,.3,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))],[et.Scale(new nt(st.fromBacking(new it(.01,.01,null,null)),null,s?.5:0,.2,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))],st.fromBacking(new it(null,null,.1,null)),n,i,iu.Instant(.5),i?iu.MultiplyAdd(.5,new eu(null,new fu([et.Position(new nt(st.fromBacking(new it(-.025,null,null,null)),null,null,0,null,null,null,null,null,null,null))],s?null:[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.1,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))]),new fu(null,s?null:[et.Position(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.1,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null))]),null,s?[et.Scale(new nt(null,st.fromBacking(new it(1.1,1.1,null,null)),null,.1,null,null,null,null,null,null,null))]:[et.Scale(new nt(st.fromBacking(new it(1.25,1.25,null,null)),null,null,0,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,.05,.1,null,null,null,null,null,null,null))],null,null,null,null)):iu.Instant(.5),null,function(e){s||r.publish("game","displayWinMultiplier")},null,function(e){var t,n,i;s||(e=e.value,n=wA.divMod((t=r).casinoModel.betAmount,new yA(0,100)),i=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(n.modulus)),t.publish("game","displayWinText",{winFactor:e/parseFloat((null==n.quotient?"null":wA.toString(n.quotient))+"."+i)}))},function(e){var t,n,i;s||(e=e.value,n=wA.divMod((t=r).casinoModel.betAmount,new yA(0,100)),i=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(n.modulus)),t.publish("game","displayWinMultipliedResult",{winFactor:e/parseFloat((null==n.quotient?"null":wA.toString(n.quotient))+"."+i)}))}),Kf.Text(pd,e,t,id.SymbolWin,l)},addGridHighlightHandler:function(e){var t=new at;return t.h.activate=[new Cl(K.coin_reveal_info.animations.dust,null,null,null,null,null,null,null,null,null,null,null,null,null,null)],new hr(new cr(new vu(Cu.Spine(K.coin_reveal,t,!0,!0),null,st.fromBacking(new it(null,null,-.001,null)),null,.9,null,null,null,null,to.Always,null,null,null),e,{width:e.mW,height:e.mH}))},addFortuneActor:function(e){return new lr(new rr(J.digits,[Kh.getContents(J.misc,J.misc_info.frames.spark_1),Kh.getContents(J.misc,J.misc_info.frames.spark_2)],e,this.gameModel.gameInfo.symbols,this.gameModel.gameInfo.baseBetLevel,{min:4,max:350}))},addLogo:function(e,t){function n(e){if(null==e&&(e=!1),l!=i.appModel.orientation||e){var t;switch(l=i.appModel.orientation,i.casinoModel.gameMode){case"epic":case"fs_2":t=!0;break;default:t=!1}"portrait"==l&&t?a.object.set_x(.12):a.object.set_x(0)}}var i=this,s=new Ne(new Ge(null,null,null,null,null,null,null,null)),s=(new ge).add(s),a=new mu(new gu(new bu(new vu(Cu.Tile(Kh.getTile(J.misc,J.misc_info.frames.logo)),null,null,null,.8*Jl.scale,null,null,null,null,to.Always,null,null,null)),null)),l=(a.object.setPos(st.fromBacking(new it(null,1.03,.1,null))),this.gameModel.logo=(new ge).add(a),s.addChild(this.gameModel.logo),e.addChild(s),a.object.object.set_follow(t.object),null);this.appModel.resizeSignal.connect(function(e){n()}),this.sub("game","enterMode",!0).listen(function(e){n(!0)})},addCountup:function(i,h,s){var c=this,e=((t=new at).h[10]=",",t.h[11]=".",new fa(Wu.TileCharacters(J.digits_countup,0,t),st.fromBacking(new it(null,0,null,null)),null,null,null,to.Always,null,null)),t=new bu(new vu(Cu.Tile(Ir.fromColor(0)),null,null,null,null,null,null,null,null,to.Never,null,null,null)),n=st.fromBacking(new it(null,null,-.01,null)),e=new Xs(new Ks(e,t,null,this.getTiers(s),n,null,{x:1,y:2},!1,Me.NONE,null,null,new fu([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.05,null,function(e){return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.3,1.3,null,null)),st.fromBacking(new it(0,0,null,null)),null,.4,null,function(e){return-e*(e-2)},null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(1.3,1.3,null,null)),.4,.3,null,function(e){return e<.5?2*e*e:(e=e-1)*e*-2+1},null,null,null,null,null))],[et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),null,.5,.2,null,function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,.5,.2,null,null,null,null,null,null,null))]),new fu([et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,0,null,function(e){return-e*(e-2)},null,null,null,null,null))],[et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),null,null,.2,null,null,null,null,null,null,null))]))),n=(e.object.set_z(.1),this.gameModel.countup=(new ge).add(e),i.addChild(this.gameModel.countup),this.gameModel.character._compMap),e=null!=n?n.h[fr.BASE_NAME]:null,_=e instanceof fr?e:null,a=(e=null!=(n=this.gameModel.sceneryHandler._compMap)?n.h[dr.BASE_NAME]:null)instanceof dr?e:null,l="skip",n=K.countup_tiers_info.animations,d=((t=new at).h[n.big_win_trigger]=new Cl(n.big_win_trigger,null,null,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.big_win_trigger+l]=new Cl(n.big_win_trigger,null,null,null,null,1.2,null,null,null,null,null,null,null,null,null),t.h[n.mega_win_trigger]=new Cl(n.mega_win_trigger,null,null,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.mega_win_trigger+l]=new Cl(n.mega_win_trigger,null,null,null,null,1.2,null,null,null,null,null,null,null,null,null),t.h[n.super_mega_win_trigger]=new Cl(n.super_mega_win_trigger,null,null,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.super_mega_win_trigger+l]=new Cl(n.super_mega_win_trigger,null,null,null,null,1.4,null,null,null,null,null,null,null,null,null),t.h[n.epic_win_trigger]=new Cl(n.epic_win_trigger,null,null,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.epic_win_trigger+l]=new Cl(n.epic_win_trigger,null,null,null,null,1.4,null,null,null,null,null,null,null,null,null),t.h[n.big_win_idle]=new Cl(n.big_win_idle,!0,!1,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.mega_win_idle]=new Cl(n.mega_win_idle,!0,!1,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.super_mega_win_idle]=new Cl(n.super_mega_win_idle,!0,!1,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.epic_win_idle]=new Cl(n.epic_win_idle,!0,!1,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.big_win_remove]=new Cl(n.big_win_remove,null,!0,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.mega_win_remove]=new Cl(n.mega_win_remove,null,!0,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.super_mega_win_remove]=new Cl(n.super_mega_win_remove,null,!0,null,null,null,null,null,null,null,null,null,null,null,null),t.h[n.epic_win_remove]=new Cl(n.epic_win_remove,null,!0,null,null,null,null,null,null,null,null,null,null,null,null),new Js(new $s(K.countup_tiers,3.2,null,to.Always,null,null,null,t,null,!0,!0,null))),e=(d.object.set_visible(!1),d.object.setPosition(0,.1,0),new ge),t=new te(-.1,-.1,-.2,-.2),n=new Ur,e=(n.xMin=-2.8,n.yMin=-2.4,n.zMin=-1,n.xMax=0,n.yMax=0,n.zMax=0,e.add(new Ne(new Ge(t,n,null,null,null,null,null,null)))),r=(i.addChild(e.addChild((new ge).add(d))),""),p=null,m=hacksawCasino.PubSub.getChannel("casino"),g=(this.sub("game","win",!0).listen(function(e){r="",p=m.subscribe("clickScreen",function(e){r=l})}),null);this.sub("game","enterWinTier",!0).listen(function(e){var t,n=s[e.level].id;switch(_.enable=e.level<5,c.gameModel.reloadIndicator=0!=c.casinoModel.featureCounter,_.enable||tt.colorTo(_.object,new nt(st.fromBacking(new it(null,null,null,0)),null,null,.3,null,null,null,null,null,null,null)).handle(function(){var e=c.appModel.stageSize.x/c.appModel.stageSize.y;_.layout(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0)}),c.casinoModel.gameMode){case"base":case"fs":t="SMALL_WIN";break;default:t="EPIC_SMALL_WIN"}switch("big_win"!=n||((e=null!=(e=c.gameModel.gambleController._compMap)?e.h[or.BASE_NAME]:null)instanceof or?e:null).isGambleCountup||_.queueAnimation(t),n){case"big_win":case"epic_win":case"mega_win":case"super_mega_win":a.addCountupBackground(i)}switch(n){case"big_win":case"epic_win":case"mega_win":case"super_mega_win":d.object.set_visible(!0),r!=l&&((null!=g?rt.noise(d.play(g+"/remove")):rt.NOISE).handle(function(){d.play(n+"/trigger"+r).handle(function(){d.play(n+"/idle",!0)})}),g=n)}}),this.sub("game","winCountComplete",!0).listen(function(e){var o,u,t=s[e.tier].id;c.publish("game","countupFinished",{winfactor:e.winFactor}),null!=t&&(o=t,a.removeCountupBackground().handle(function(){_.enable=!0}),e=o!=g?rt.noise(d.play(o+"/trigger"+l)):rt.NOISE,_.enable=!0,t=c.appModel.stageSize.x/c.appModel.stageSize.y,_.layout(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0),t=null!=(t=null!=(t=c.casinoModel.getEventData())?t.actions:null)?$l.getTypedActions(t,A_):null,u=null!=il.find(null!=t?t:[],function(e){return 3==e._hx_index}),e.handle(function(){i=!u&&!((e=null!=(e=c.gameModel.gambleController._compMap)?e.h[or.BASE_NAME]:null)instanceof or?e:null).isGambleCountup;for(var e,i,t=st.fromBacking(new it(1,1,1,null)),n=new Array(h.length),s=0,a=h.length;s<a;)n[l=s++]={scene:h[l],comp:new Bs(new Ts(t,.5,null,null))};il.each(n,function(e){e.scene.add(e.comp)});for(var l,r=new Array(n.length),s=0,a=n.length;s<a;)r[l=s++]=n[l].comp.tweenDone;rt.noise(rt.inParallel(r)),tt.colorTo(_.object,new nt(st.fromBacking(new it(null,null,null,i?1:0)),null,.13,.5,null,null,null,null,null,null,null)),d.play(o+"/remove").handle(function(){var e,t,n;switch(d.object.set_visible(!1),g=null,c.casinoModel.gameMode){case"epic":case"fs_2":e=!0;break;default:e=!1}if("epic"==c.casinoModel.gameMode&&c.gameModel.reloadIndicator&&((t=null!=(t=c.gameModel.bulletBar._compMap)?t.h[mr.BASE_NAME]:null)instanceof mr?t:null).updateAmmo(!1,!0),null!=o&&i)switch(o){case"epic_win":n=e?"EPIC_EPIC_WIN":"EPIC_WIN";break;case"super_mega_win":n=e?"EPIC_BIG_WIN":"BIG_WIN";break;default:n=null}else n=null;null!=n&&_.queueAnimation(n,!0)})})),m.unsubscribe(p)})},getTiers:function(n){for(var t=[et.Color(new nt(st.fromBacking(new it(1,1,1,1)),null,null,.05,null,function(e){return-e*(e-2)},null,null,null,null,null))],e=et.Scale(new nt(st.fromBacking(new it(.02,.02,null,null)),null,.5,10,null,function(e){return Math.sin(e*Math.PI*30)},!0,null,!0,null,null)),i=new PA,s=0,a=il.zip4([1.2,1.2,1.15,1.15,1.1],[3.2,3.2,2.7,2.7,2.2],[F_.EpicWin,F_.SuperMegaWin,F_.MegaWin,F_.BigWin,F_.Regular],[-.9,-.9,-.9,-.9,0]);s<a.length;){var l=a[s],r=(++s,l._0),o=l._1;i.set(l._2,[e,et.Scale(new nt(st.fromBacking(new it(r,r,null,null)),st.fromBacking(new it(1,1,null,null)),null,.4,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null)),et.Color(new nt(st.fromBacking(new it(o,o,o,null)),st.fromBacking(new it(1,1,1,null)),null,.4,null,function(e){e=2*(e<.5?e:1-e);return e<.5?2*e*e:--e*e*-2+1},null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(null,l._3,null,null)),null,null,.4,null,function(e){return 0==e?0:1==e?1:(e=e-1)*e*(2.70158*e+1.70158)+1},null,null,null,null,null))])}for(var u=zy.mapValues(i,function(e){return{tier:new fu(t,null),amount:new fu(e,null)}},new PA),h=(u.set(F_.Small,{tier:new fu(null,null),amount:new fu([et.Scale(new nt(st.fromBacking(new it(.02,.02,null,null)),null,1,10,null,function(e){return Math.sin(e*Math.PI*30)},!0,null,!0,null,null))],null)}),function(t){var e=il.findLast(n,function(e){return t>=e.val});switch(e.id){case"big_win":return F_.BigWin;case"epic_win":return F_.EpicWin;case"mega_win":return F_.MegaWin;case"super_mega_win":return F_.SuperMegaWin;default:return 0<e.duration?F_.Regular:F_.Small}}),c=new Array(n.length),i=0,s=n.length;i<s;){var _=i++,d=n[_],p=u.get(h(d.val));c[_]=new qs(d.text,d.id,d.val,d.duration,null,null,null,p.amount,p.tier)}var m=n[n.length-1],p=u.get(h(m.val)),i=1/0;return c.push(new qs(m.text,m.id,i,2*m.duration,null,null,null,p.amount,p.tier)),c},addCountupParticleFountain:function(e){var t=new Ya(.1),n=new na(new ia([new Ma(null,null,null,300,null,[t,ql.particleTileModule(oc.Animated(new Ka(J.coin_animation.animation,null,null))),ql.lifeModule(ic.LifeTime(new Ra(5,null))),ql.particleColorModule(nc.BySpeed(new Ea(0,2,st.fromBacking(new it(1,1,1,0)),st.fromBacking(new it(1,1,1,1)),null))),ql.locationModule(sc.Sphere(new Va(.1,ch.Body,null))),ql.sizeModule(lc.Initial(new La(.5,null))),ql.velocityModule(uc.InitialSpeed(new Ja(1,null))),ql.rotationModule(ac.FixedRotationRate(new Ua(st.fromBacking(new it(0,0,1,null)),!0))),ql.accelerationModule(tc.ConstAcceleration(new Ba(st.fromBacking(new it(0,0,4,null)))))],null)],null));this.sub("game","win",!0).listen(function(){t.set_rate(.5),n.start()}),this.sub("game","enterWinTier",!0).listen(function(e){t.set_rate(2.2/e.val)}),this.sub("game","winCountComplete",!0).listen(function(e){n.stop()}),n.object.setPosition(0,-.75,-.1),e.addChild((new ge).add(n))},getSymbolAnimations:function(){for(var i=this,s=new at,e=this.gameModel.gameInfo.symbols,t=[],n=0;n<e.length;){var a=e[n];++n,new ot("CASH_","").match(a.name)&&t.push(a)}for(var l=new Array(t.length),n=0,r=t.length;n<r;){var o=(u=t[k=n++]).name.split("_");l[k]={name:u.name,value:parseFloat(""+o[o.length-1])}}il.each(l,function(e){var t,n=e.name;e=e.value,t=i.coinValueModel.bronzeValues,e=e>=t.start&&e<=t.end?{reveal:K.coin_info.animations.bronze_coin,setup:K.coin_info.animations.bronze_start,end:K.coin_info.animations.bronze_end,landed:K.coin_info.animations.bronze_landed,idle:K.coin_info.animations.bronze_end}:e>=(t=i.coinValueModel.silverValues).start&&e<=t.end?{reveal:K.coin_info.animations.silver_coin,setup:K.coin_info.animations.silver_start,end:K.coin_info.animations.silver_end,landed:K.coin_info.animations.silver_landed,idle:K.coin_info.animations.silver_end}:e>=(t=i.coinValueModel.goldValues).start&&e<=t.end?{reveal:K.coin_info.animations.gold_coin,setup:K.coin_info.animations.gold_start,end:K.coin_info.animations.gold_end,landed:K.coin_info.animations.gold_landed,idle:K.coin_info.animations.gold_sparkle_idle}:{reveal:K.coin_info.animations.diamond_spin,setup:K.coin_info.animations.diamond_setup,end:K.coin_info.animations.diamond_setup,landed:K.coin_info.animations.diamond_landed,idle:K.coin_info.animations.diamond_sparkle_idle},(t=new at).h.setup=wu.Spine(new ca(e.setup,null,new Cl(e.setup,null,null,null,null,null,null,null,null,null,null,null,null,null,null),null)),t.h.win=wu.Spine(new ca(e.reveal,null,new Cl(e.reveal,null,null,null,null,null,null,null,null,null,null,null,null,null,null),null)),t.h.end=wu.Spine(new ca(e.end,null,new Cl(e.end,null,null,null,null,null,null,null,null,null,null,null,null,null,null),null)),t.h.land=wu.Spine(new ca(e.landed,null,new Cl(e.landed,null,null,null,null,null,null,null,null,null,null,null,null,null,null),null)),t.h.idle=wu.Spine(new ca(e.idle,null,new Cl(e.idle,!0,null,null,1,null,null,null,null,null,null,null,null,null,null),null)),s.h[n]=t});for(e=this.gameModel.gameInfo.symbols,t=[],n=0;n<e.length;){a=e[n];++n,new ot("CASH_","").match(a.name)||t.push(a)}for(l=new Array(t.length),n=0,r=t.length;n<r;){var u=t[k=n++];l[k]={symbolName:u.name.toLowerCase(),folder:u.name.toLowerCase()+"/"}}for(var h=new ot("HIGH|LOW|WILD|FS|COLLECTOR|COLLECTED|MULTIPLIER|GLOBAL_MULTIPLIER|REVOLVER|RELOADER",""),c=new ot("MULTIPLIER|GLOBAL_MULTIPLIER",""),_=new ot("COLLECTOR|COLLECTED",""),d=new ot("REVOLVER",""),p=new ot("RELOADER",""),e=this.gameModel.gameInfo.symbols,t=[],n=0;n<e.length;){a=e[n];++n,h.match(a.name)&&t.push(a)}for(l=new Array(t.length),n=0,r=t.length;n<r;){var m=t[k=n++],g=_.match(m.name)?"pot":c.match(m.name)?new ot("MULTIPLIER","").match(m.name)?"clover":"gold_clover":p.match(m.name)?"reload":d.match(m.name)?"ammo":m.name.toLowerCase();l[k]={symbolName:m.name.toLowerCase(),folder:g+"/"}}for(var f=K.symbols.skeletonData.getAnimations(),A=new Array(f.length),t=0,n=f.length;t<n;){var x=f[k=t++],w=x.name.lastIndexOf("/");A[k]=w<0?"":x.name.substring(0,w+1)}for(var y=il.distinct(A),b=(Jn.remove(y,"specials/ammo/ammo_1/"),Object.create(null)),t=0;t<y.length;){var v=[y[t]],C=(++t,il.extract(l,(t=>function(e){return 0<=t[0].indexOf(e.folder)})(v)));b[null!=C?C.symbolName:null]=v[0]}var S=null;if(Object.prototype.hasOwnProperty.call(b,S)&&delete b[S],null!=l&&0<l.length){for(var k,A=new Array(l.length),t=0,n=l.length;t<n;)A[k=t++]=l[k].symbolName;Vi.warn("Symbols failed to match with animation directory: "+el.string(A))}for(var M=["setup","win","idle","land","remove"],t=new at,I=Object.keys(b),B=I.length,T=0;T<B;){for(var E=(n={key:S=I[T++],value:b[S]}).value,z=n.key.toUpperCase(),r=new at,F=0;F<M.length;){var D=M[F],R=(++F,"idle"==D);r.h[D]=wu.Spine(new ca(D,null,new Cl(""+E+D,R,!R,null,null,null,null,.95,null,null,null,null,null,null,null),null))}t.h[z]=r}for(var P=["shoot","reload"],B=(I=Object.keys(b)).length,T=0;T<B;){m=(n={key:S=I[T++],value:b[S]}).key,E=n.value;if(d.match(m.toUpperCase()))for(r=0;r<P.length;){D=P[r];++r,t.h[m.toUpperCase()].h[D]=wu.Spine(new ca(D,null,new Cl(""+E+D,null,null,null,null,2,null,null,null,null,null,null,null,null,null),null))}}return zy.merge(s,[t])},getSymbolConfigs:function(){for(var e=this.getSymbolAnimations(),t=this.gameModel.gameInfo.symbols,n=new Array(t.length),i=0,s=t.length;i<s;){for(var a=i++,l=t[a],r=e.get(l.name),o=this.gameModel.gameInfo.symbols,u=[],h=0;h<o.length;){var c=o[h];++h,new ot("CASH_","").match(c.name)&&u.push(c)}for(var _=new Array(u.length),d=0,p=u.length;d<p;){var m=d++;_[m]=u[m].name}var g,f,A=l.name.split("_"),A=A[A.length-1],r=(A=new ot("CASH|COLLECTED|COLLECTOR|MULTIPLIER$","").match(l.name)?(g=new ot("CASH|COLLECTED|COLLECTOR","").match(l.name)?(f=new ot("CASH","").match(l.name)?A:"0",f=wA.divMod(bA.parseString((null==f?"null":""+f)+"00"),new yA(0,100)),g=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(f.modulus),2),f=parseFloat((null==f.quotient?"null":wA.toString(f.quotient))+"."+g),new Hu(f,!0,null,null,null,null,!0)):new Hu(null,null,null,"x",null,null,null),A=[new ot("MULTIPLIER$","").match(l.name)?{asset:J.digits_clover,type:E_.MULTIPLIER_VALUE}:new ot("CASH|COLLECTOR|COLLECTED","").match(l.name)?(f=new ot("CASH","").match(l.name)?el.parseInt(A):25,{asset:this.coinValueModel.getDigitAtlas(f),type:E_.COIN_VALUE}):{asset:J.digits,type:E_.COIN_VALUE}],[new ga(((i,s)=>function(){var e=s[0],t=i[0].asset,n=new at,e=(n.h.x="x",n.h[10]=",",n.h[11]=".",new ju(e,new xu(Wu.TileCharacters(t,-.01,n,null,160,80),null,null,null,to.Always,wr.Alpha,null,null,null,null)));return e.flags&=-3,e})(A,[g]),null,A[0].type,st.fromBacking(new it(-.01,null,.001,null)))]):null,new ot("CASH","").match(l.name)?Ca.fromSpine(K.coin,0|l.id,r,1.075,null,!0,!0):Ca.fromSpine(K.symbols,0|l.id,r,null,null,!0,!0)),r=new Lf(0|l.id,l.name,Hf.ObjectSymbol(r),A,null,null,l.payouts,null,Dt.eq(l.isWild,1),Dt.eq(l.isScatter,1),null,null,null,null,null,null,null,Dt.eq(l.isScatter,1)?.1:.01,null,null);r.initState=Xf.Spine("setup"),n[a]=r}return n},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",c_,!0),this.baseEntity=e("gasm.core.Entity","",c_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",c_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",c_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",c_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",c_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",c_,!0),this.coinValueModel=e("hacksaw.games.lecowboy.components.model.CoinValueModel","",c_,!0)},__class__:c_}),function(){Wl.call(this)}),d_=((i["hacksaw.games.lecowboy.states.ReactState"]=__).__name__="hacksaw.games.lecowboy.states.ReactState",__.__super__=Wl,__.prototype=e(Wl.prototype,{enter:function(){for(var e=this,t=(this.publish("game","drop"),this.casinoModel.getEventData()),t=(null==t.grid?"null":""+t.grid).split(""),n=t.slice(0,2),i=t.slice(2),t=Jn.cca(n[0],0)-40,n=Jn.cca(n[1],0)-40,s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=Jn.cca(i[r],0)-40}var t=new Hl(t,n,s),n=this.slotModel.reelActor,t=new U_(t,null),o=(n.currentEndReactArgs=t,null!=n.currentEndRevealArgs&&(n.currentEndRevealArgs=null),t.result);n._model.eventGrid=null!=o?o:n._model.currentGrid,n._reels.endReact(t).handle(function(){e.fsm.goto(d_)})},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",__,!0),this.appModel=e("gasm.core.components.AppModelComponent","",__,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",__,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",__,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",__,!0),this.baseEntity=e("gasm.core.Entity","",__,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",__,!0),this.baseScene=e("gasm.core.Entity","reels",__,!0),this.backgroundScene=e("gasm.core.Entity","background",__,!0)},__class__:__}),function(){Wl.call(this)}),p_=((i["hacksaw.games.lecowboy.states.ResultState"]=d_).__name__="hacksaw.games.lecowboy.states.ResultState",d_.__super__=Wl,d_.prototype=e(Wl.prototype,{enter:function(){var v,C=this,e=(this.publish("casino","resultDisplay"),this.casinoModel.currentFeatureBuyData),e=null!=e?e.bonusGameId:null;if(null==e)v=!1;else switch(e){case"bonus":case"bonus_2":v=!0;break;default:v=!1}this.act(v).handle(function(){var e=C.casinoModel.accumulatedWin,t=0|+e.high,u=(0==t&&(t=xA.ucompare(e.low,0)),0<(e.high<0?-1:t)),p=C.casinoModel.popEvent(),e=null==p?null:null==p.etn?"null":Zo.toString(p.etn);C.publish("casino","resultDisplay",{isConfirmableWin:u&&null==e});var m=(y=null!=(w=C.gameModel.gambleController._compMap)?w.h[or.BASE_NAME]:null)instanceof or?y:null,h=(y=null!=(w=C.gameModel.character._compMap)?w.h[fr.BASE_NAME]:null)instanceof fr?y:null;if(C.slotModel.reelActor.presentSpecial("resetFade"),null==e)if(C.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls).floor=0,m.isGambleCountup){C.after(.05).handle(function(e){C.sceneModel.moveToTop("countup")});var n,c=(y=null!=(w=C.gameModel.character._compMap)?w.h[fr.BASE_NAME]:null)instanceof fr?y:null,i=C.isLargeGambleWin(v);if(i){c.enable=!1,c.object.set_visible(!1);for(var s=[C.gambleScene,C.backgroundScene],a=st.fromBacking(new it(.4,.4,.4,null)),l=new Array(s.length),r=0,o=s.length;r<o;)l[_=r++]={scene:s[_],comp:new Bs(new Ts(a,.5,null,null))};il.each(l,function(e){e.scene.add(e.comp)});for(var _,d=new Array(l.length),r=0,o=l.length;r<o;)d[_=r++]=l[_].comp.tweenDone;rt.noise(rt.inParallel(d));var g=(y=null!=(w=C.gameModel.countup._compMap)?w.h[Xs.BASE_NAME]:null)instanceof Xs?y:null,f=C.casinoModel.win,A=C.slotModel.reelActor.isLargeWin(f);(b=g.show(new Ps(f,null,null),null,A,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),n=b}else n=rt.NOISE;C.publish("game","showLines");var x=function(){var h,e=C.appModel.stageSize.x/C.appModel.stageSize.y;switch(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0){case 0:case.45:h=!0;break;default:h=!1}return Rt([function(e){if(h){for(var t=[C.gambleScene,C.backgroundScene],n=st.fromBacking(new it(0,0,0,null)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,.3,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;return rt.noise(rt.inParallel(o))}return rt.NOISE},function(e){var t=C.gameModel.sceneryHandler._compMap,t=null!=t?t.h[dr.BASE_NAME]:null,n=C.appModel.stageSize.x/C.appModel.stageSize.y,n=((t instanceof dr?t:null).layout(lt.over(2.1,n)?2.1:lt.over(1.1,n)?1.1:lt.over(.8,n)?.8:lt.over(.45,n)?.45:0,C.casinoModel.gameMode,!1),c.object.set_visible(!0),c.enable=!0,tt.colorTo(c.object,new nt(st.fromBacking(new it(null,1,1,1)),null,null,.1,null,null,null,null,null,null,null)),C.appModel.stageSize.x/C.appModel.stageSize.y);if(c.layout(lt.over(2.1,n)?2.1:lt.over(1.1,n)?1.1:lt.over(.8,n)?.8:lt.over(.45,n)?.45:0),C.sceneModel.showScene("reels"),C.publish("casino","showUi"),h){for(var i=[C.gambleScene,C.backgroundScene],s=st.fromBacking(new it(1,1,1,null)),a=new Array(i.length),l=0,r=i.length;l<r;)a[o=l++]={scene:i[o],comp:new Bs(new Ts(s,.1,null,null))};il.each(a,function(e){e.scene.add(e.comp)});for(var o,u=new Array(a.length),l=0,r=a.length;l<r;)u[o=l++]=a[o].comp.tweenDone;return rt.noise(rt.inParallel(u))}return rt.NOISE}])};n.handle(function(e){C.publish("game","smokeyAnimation",{animationName:"shoot_fail"}),c.queueAnimation("SHOOT_FAIL",!0),Rt([function(e){return m.isGambleCountup=!1,m.isGambling=!1,i?rt.NOISE:x()},function(e){for(var t=[C.characterScene],n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,0,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r))},function(e){for(var t=[C.gambleScene,C.backgroundScene],n=st.fromBacking(new it(1,1,1,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r))},function(e){return i?x():rt.NOISE}]).handle(function(e){C.updateWinUI(u),C.publish("casino","featureExit"),C.publish("casino","gameRoundCompleted"),C.fsm.goto(h_)})})}else{g=(y=null!=(w=C.gameModel.countup._compMap)?w.h[Xs.BASE_NAME]:null)instanceof Xs?y:null;(u?(f=C.casinoModel.accumulatedWin,A=C.slotModel.reelActor.isLargeWin(f),(b=g.show(new Ps(f,null,null),null,A,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),b):rt.NOISE).handle(function(){C.sceneModel.showScene("reels"),C.publish("casino","showUi"),C.updateWinUI(u),C.publish("casino","gameRoundCompleted"),C.fsm.goto(h_)})}else switch(e){case"collapse":C.fsm.goto(__);break;case"feature_enter":C.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls).floor=0;g=(y=null!=(w=C.gameModel.countup._compMap)?w.h[Xs.BASE_NAME]:null)instanceof Xs?y:null;(u?(f=C.casinoModel.accumulatedWin,A=C.slotModel.reelActor.isLargeWin(f),(b=g.show(new Ps(f,null,null),null,A,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),b):rt.NOISE).handle(function(){C.updateWinUI(u),C.fsm.goto(a_)});break;case"max_win_reached":C.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls).floor=0,C.casinoModel.popEvent();var w,y,b,g=(y=null!=(w=C.gameModel.countup._compMap)?w.h[Xs.BASE_NAME]:null)instanceof Xs?y:null;(u?(f=C.casinoModel.accumulatedWin,A=C.slotModel.reelActor.isLargeWin(f),(b=g.show(new Ps(f,null,null),null,A,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),b):rt.NOISE).handle(function(){C.updateWinUI(u),C.publish("casino","showMaxWinDialog"),C.subscribeOnce("casino","dialogClosed",function(e){C.publish("casino","gameRoundCompleted"),C.fsm.goto(h_)})});break;case"pick":C.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls).floor=0,C.gameModel.autoProgressed=0<C.casinoModel.betEvents.length,Rt([function(e){C.updateWinUI(u),C.publish("casino","featureEnter"),tt.colorTo(h.object,new nt(st.fromBacking(new it(0,0,0,null)),null,null,v?.5:0,null,null,null,null,null,null,null)).handle(function(e){h.enable=!1,tt.colorTo(h.object,new nt(st.fromBacking(new it(1,1,1,0)),null,null,0,null,null,null,null,null,null,null))});for(var t=[C.baseScene,C.backgroundScene,C.gambleScene],n=st.fromBacking(new it(0,0,0,1)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,.5,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;return rt.or(rt.noise(rt.inParallel(o)),C.after(.5))},function(e){m.isGambling=!0;for(var t=C.gameModel.sceneryHandler._compMap,t=null!=t?t.h[dr.BASE_NAME]:null,n=C.appModel.stageSize.x/C.appModel.stageSize.y,i=((t instanceof dr?t:null).layout(lt.over(2.1,n)?2.1:lt.over(1.1,n)?1.1:lt.over(.8,n)?.8:lt.over(.45,n)?.45:0,C.casinoModel.gameMode,!0),[C.baseScene,C.backgroundScene,C.characterScene]),s=st.fromBacking(new it(1,1,1,null)),a=new Array(i.length),l=0,r=i.length;l<r;)a[d=l++]={scene:i[d],comp:new Bs(new Ts(s,.5,null,null))};il.each(a,function(e){e.scene.add(e.comp)});for(var o=new Array(a.length),l=0,r=a.length;l<r;)o[d=l++]=a[d].comp.tweenDone;if(rt.noise(rt.inParallel(o)),C.sceneModel.removeScene("blackBar"),C.gameModel.autoProgressed){var u=C.casinoModel.popEvent(),h=null==u.etn?"null":Zo.toString(u.etn);switch(h){case"feature_enter":m.isGambling=!1,C.fsm.goto(a_);break;case"gamble":for(var c=u.c.actions,i=(m.gambleCoinMultiplier=c[c.length-1].data.betMultiplier,C.sceneModel.hideScene("reels"),C.sceneModel.showScene("gamble"),C.sceneModel.moveToTop("gamble"),[C.baseScene,C.backgroundScene,C.gambleScene]),s=st.fromBacking(new it(1,1,1,null)),a=new Array(i.length),l=0,r=i.length;l<r;)a[d=l++]={scene:i[d],comp:new Bs(new Ts(s,.5,null,null))};il.each(a,function(e){e.scene.add(e.comp)});for(o=new Array(a.length),l=0,r=a.length;l<r;)o[d=l++]=a[d].comp.tweenDone;rt.noise(rt.inParallel(o)),C.enter();break;default:throw new tl('Not a valid eventName:  "'+h+'"')}return C.after(.1)}C.sceneModel.hideScene("reels"),C.sceneModel.moveToTop("gamble"),C.sceneModel.showScene("gamble"),m.currentOrientation=C.appModel.orientation,m.createGambleDialog(C.gameModel.styleData.text,p.c.choice),m.layoutDialog(C.appModel.orientation);for(var _=C.appModel.resizeSignal.connect(function(e){m.layoutDialog(C.appModel.orientation)}),t=C.subOnce("casino","continueAccepted"),i=[C.baseScene,C.backgroundScene,C.gambleScene],s=st.fromBacking(new it(1,1,1,null)),a=new Array(i.length),l=0,r=i.length;l<r;)a[d=l++]={scene:i[d],comp:new Bs(new Ts(s,.5,null,null))};il.each(a,function(e){e.scene.add(e.comp)});for(var d,o=new Array(a.length),l=0,r=a.length;l<r;)o[d=l++]=a[d].comp.tweenDone;n=rt.noise(rt.inParallel(o));return t.handle(function(e){C.casinoModel.recieveNewBetData(e.events);var t=C.casinoModel.currentEvent,n=null==t.etn?"null":Zo.toString(t.etn);switch(_.dispose(),n){case"feature_enter":m.isGambling=!1,C.fsm.goto(a_);break;case"gamble":var i=t.c.actions;m.gambleCoinMultiplier=i[i.length-1].data.betMultiplier,C.enter();break;default:throw new tl('Not a valid eventName:  "'+n+'"')}}),n}]);break;default:throw tl.thrown('Unrecognized event type: "'+(null==p.etn?"null":Zo.toString(p.etn))+'"')}})},updateWinUI:function(e){e&&this.publish("casino","updateWinField",{winAmount:this.casinoModel.accumulatedWin})},act:function(Oe){for(var We=this,e=this.casinoModel.getEventData(),t=e.actions,t=null!=t?$l.getTypedActions(t,A_):null,n=null!=t?t:[],i=null!=(t=this.slotModel.reelActor.owner._compMap)?t.h[Md.BASE_NAME]:null,Ne=i instanceof Md?i:null,s=il.find(this.gameModel.gameInfo.symbols,function(e){return"FS"==e.name}).id,a=new Array(n.length),l=0,r=n.length;l<r;){var o=n[d=l++];Ge=0==o._hx_index&&(u=o.data,el.parseInt(u.symbol)!=s)?u:null,a[d]=Ge}for(var Ge=il.filterNull(a),l=[],r=0,u=n;r<u.length;){var h=u[r];++r,0==h._hx_index&&h.data!=Ge[0]||l.push(h)}for(var Ue=l,Le=(i=null!=(t=this.slotModel.reelActor.owner._compMap)?t.h[lr.BASE_NAME]:null)instanceof lr?i:null,je=(i=null!=(t=this.gameModel.character._compMap)?t.h[fr.BASE_NAME]:null)instanceof fr?i:null,He=(i=null!=(t=this.gameModel.gambleController._compMap)?t.h[or.BASE_NAME]:null)instanceof or?i:null,c=(He.set_lastGrid(e.grid),this.gameModel.gameInfo.symbols),l=[],r=0;r<c.length;){h=c[r];++r,new ot("CASH_","").match(h.name)&&l.push(h)}for(var Ye=il.find(this.gameModel.gameInfo.symbols,function(e){return new ot("COLLECTOR","").match(e.name)}).id,Ze=il.find(this.gameModel.gameInfo.symbols,function(e){return new ot("COLLECTED","").match(e.name)}).id,c=this.gameModel.gameInfo.symbols,r=[],u=0;u<c.length;){h=c[u];++u,new ot("MULTIPLIER$","").match(h.name)&&r.push(h)}for(var a=new Array(l.length),u=0,_=l.length;u<_;)a[d=u++]=0|l[d].id;for(var d,Xe=a,a=new Array(r.length),l=0,u=r.length;l<u;)a[d=l++]=0|r[d].id;for(var qe=a,Ke=this.slotModel.reelActor.get_currentGrid(),Je=(Le.currentCollectorPosition=null)!=il.find(n,function(e){return 5==e._hx_index&&2==e.gameEnum._hx_index}),$e=il.filterMap(n,function(e){return 1==e._hx_index?OA.Some(e.data):OA.None})[0],l=[],r=0;r<Ue.length;)l.push((Ve=>function(z){switch(Ve[0]._hx_index){case 0:for(var e=We.slotModel.reelActor,t=new Array(Ge.length),n=0,i=Ge.length;n<i;){var s,a=n++,l=(x=Ge[a]).symbol,r=x.mask;if(null!=(_=x.winMultipliers)){for(var o=new Array(_.length),Q=0,V=_.length;Q<V;){var O=Q++;o[O]=el.parseInt(_[O])}s=o}else s=null;var W,N=s,G=x.baseWinAmount,U=null==x.winAmount?"0":x.winAmount,L=null==x.count?"0":x.count,j=null==x.stick?null:"true"==x.stick,H=x.pos;if(null==H)W=null;else{for(var u=H.split("_"),h=new Array(u.length),Y=0,Z=u.length;Y<Z;){var X=Y++;h[X]=el.parseInt(u[X])}W=Uu._new(new Bw(h[0],h[h.length-1]))}var q,H=el.parseInt(x.reel);if(null!=(c=x.stacks)){for(var K=new Array(c.length),J=0,$=c.length;J<$;){var ee=J++;K[ee]=el.parseInt(c[ee])}q=K}else q=null;var te=null==(M=el.parseInt(x.line))?null:[M];t[a]=new wa(l,r,N,G,U,L,null,null,j,W,H,q,el.parseInt(x.ways),null,null!=te?te:[])}var c,_=function(e){var t=wA.divMod(We.casinoModel.win,new yA(0,100)),n=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(t.modulus),2),i=parseFloat((null==t.quotient?"null":wA.toString(t.quotient))+"."+n),t=wA.divMod(We.casinoModel.betAmount,new yA(0,100)),n=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(t.modulus),2),i=i/parseFloat((null==t.quotient?"null":wA.toString(t.quotient))+"."+n),t=We.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls);return i>t.floor&&(t.floor=i),rt.NOISE};if(null==(n=We.casinoModel.get_turboMode()))c=W_.Serial();else switch(n){case"superTurbo":c=W_.Summarized(0,null,!0,!0);break;case"turbo":c=W_.Parallel(200);break;default:c=W_.Serial()}return e.showWins(new L_(t,_,c,null));case 1:var ne=Ve[0].data;return Je?rt.NOISE:Rt([function(e){return We.slotModel.reelActor.showRemoves(new j_(ne.mask))},function(e){return We.slotModel.reelActor.react(new G_(ne.mask,null,null))}]);case 2:return rt.NOISE;case 3:var ie,se,ae,le,re,d,p,oe,ue,he,m,g,n=Ve[0].data;return He.isUpgraded||Oe?We.slotModel.reelActor.presentSpecial("fsWin"):(e=Tc(We.sceneModel,"blackBar"),We.slotModel.reelActor.presentSpecial("fsWin"),ie=new ar,e.add(ie),se=je.object.getScene().camera,ae=je.object.get_x(),We.publish("casino","hideUi"),We.publish("game","transitionStarted",{bonusType:n.bfw}),le=function(e){null==e&&(e=1);var t="portrait"==We.appModel.orientation?2.9:2,n=We.appModel.stageSize.x/We.appModel.stageSize.y,n=We.getCharacterYPos(lt.over(2.1,n)?2.1:lt.over(1.1,n)?1.1:lt.over(.8,n)?.8:lt.over(.45,n)?.45:0);return je.object.setScale(.85),tt.translateTo(je.object,new nt(st.fromBacking(new it(null,n,null,null)),null,null,0,null,null,null,null,null,null,null)),rt.noise(ie.start(0,t,e))},re=We.appModel.resizeSignal.connect(function(e){le(0)}),d=new qy,p=!1,0==(oe=0|+(e=We.casinoModel.accumulatedWin).high)&&(oe=xA.ucompare(e.low,0)),ue=0<(e.high<0?-1:oe),he=function(){We.publish("game","transitionEnded"),tt.tween(je.object,[et.Color(new nt(st.fromBacking(new it(null,null,null,0)),null,null,0,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(ae,null,null,null)),null,null,0,null,null,null,null,null,null,null))]),se.zoom=1,je.enabledLayout=!0;var e=We.appModel.stageSize.x/We.appModel.stageSize.y;je.layout(lt.over(2.1,e)?2.1:lt.over(1.1,e)?1.1:lt.over(.8,e)?.8:lt.over(.45,e)?.45:0),re.dispose()},m=null,g=hacksawCasino.PubSub.getChannel("casino"),(e=Rt([function(e){var t,n=We.gameModel.countup._compMap,n=null!=n?n.h[Xs.BASE_NAME]:null,n=n instanceof Xs?n:null,i=ue?(i=We.casinoModel.accumulatedWin,t=We.slotModel.reelActor.isLargeWin(i),(n=n.show(new Ps(i,null,null),null,t,!1)).handle(function(){hacksawCasino.PubSub.getChannel("game").publish("showLines")}),n):rt.NOISE;return i},function(e){m=g.subscribe("clickScreen",function(e){if(g.unsubscribe(m)){d.trigger(!0),p=!0,he();for(var t=[We.baseScene,We.backgroundScene,We.characterScene],n=st.fromBacking(new it(0,0,0,1)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,.05,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;rt.noise(rt.inParallel(o))}});var t=We.slotModel.reelActor.isLargeWin(We.casinoModel.accumulatedWin)?0:1;return tt.colorTo(je.object,new nt(st.fromBacking(new it(null,null,null,0)),null,t,0,null,null,null,null,null,null,null)),rt.noise(rt.or(tt.translateTo(je.object,new nt(st.fromBacking(new it(5,null,null,null)),null,.5,.4,null,null,null,null,null,null,null)),d))},function(e){for(var t=[We.baseScene,We.backgroundScene],n=st.fromBacking(new it(.4,.4,.4,null)),i=new Array(t.length),s=0,a=t.length;s<a;)i[l=s++]={scene:t[l],comp:new Bs(new Ts(n,.5,null,null))};il.each(i,function(e){e.scene.add(e.comp)});for(var l,r=new Array(i.length),s=0,a=i.length;s<a;)r[l=s++]=i[l].comp.tweenDone;return rt.noise(rt.inParallel(r))},function(e){var t;return p||(t=We.appModel.stageSize.x/We.appModel.stageSize.y,t=We.getCharacterYPos(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0),je.object.setScale(.85),tt.tween(je.object,[et.Color(new nt(st.fromBacking(new it(null,null,null,1)),null,null,0,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(2,t,null,null)),null,null,0,null,null,null,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(.1,null,null,null)),null,null,1,null,function(e){return-e*(e-2)},null,null,null,null,null))]),se.zoom=p?1:2.5,je.queueAnimation("BONUS_TRANSITION",!0),je.enabledLayout=!1),le()},function(e){return rt.or(We.after(We.casinoModel.currentTurboValue({normal:3,turbo:2,superTurbo:1})),rt.noise(d))},function(e){for(var t=[We.baseScene,We.backgroundScene,We.characterScene],n=st.fromBacking(new it(0,0,0,1)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,.5,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;return rt.noise(rt.inParallel(o))}])).handle(function(){g.unsubscribe(m),he()}),rt.or(e,rt.noise(d)));case 5:switch((n=Ve[0].gameEnum)._hx_index){case 2:var ce=n.data;return Rt([function(e){var t=Le.convertWilds(ce,Ke);return null!=$e&&We.slotModel.reelActor.showRemoves(new j_($e.mask)),We.after(We.casinoModel.currentTurboValue({normal:.7,turbo:.6,superTurbo:.3})).handle(function(e){var t=vy.sum(il.filterMap(x_.get_symbols(ce),function(t){var e=il.find(We.gameModel.gameInfo.symbols,function(e){return(0|e.id)==t});return null!=e?(e=e.name.split("_"),OA.Some(el.parseInt(e[e.length-1]))):OA.None})),n=We.gameModel.character._compMap,n=null!=n?n.h[fr.BASE_NAME]:null;(n instanceof fr?n:null).playRevolverReactAnimation(t)}),t},function(e){return null!=$e?We.slotModel.reelActor.react(new G_($e.mask,null,null)):rt.NOISE}]);case 3:je.isInShootStance&&(je.isInShootStance=!1,je.queueAnimation("SHOOT_END",!0)),We.publish("game","spawnFortunes");for(var f=Ke.mW,A=Ke.mH,u=w_.get_mask(n.data).split(""),t=new Array(u.length),i=0,l=u.length;i<l;){a=i++;t[a]="1"==u[a]}var _e=new Hl(f,A,t);return il.each(il.filterNull(Ke.mapCells(function(e,t){return-1!=Xe.indexOf(e)?t:null})),function(e){var t=_e;t.mData[e.y*t.mW+e.x]=!0}),Rt([function(e){return We.slotModel.reelActor.presentSpecial("revealCoin",_e)},function(e){return We.slotModel.reelActor.presentSpecial("idleCoin",_e)}]);case 4:i=n.data;je.isInShootStance=!1;for(f=(v=Ne.visibleSymbols).mW,A=v.mH,u=y_.get_mask(i).split(""),t=new Array(u.length),l=0,r=u.length;l<r;){a=l++;t[a]="1"==u[a]}var de=new Hl(f,A,t),x=Ec(y_.get_winAmount(i)),w=wA.divMod(We.casinoModel.accumulatedWin,new yA(0,100)),y=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(w.modulus),2),b=parseFloat((null==w.quotient?"null":wA.toString(w.quotient))+"."+y),w=wA.divMod(We.casinoModel.betAmount,new yA(0,100)),y=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(w.modulus),2),pe=Math.max(b/parseFloat((null==w.quotient?"null":wA.toString(w.quotient))+"."+y)-We.casinoModel.get_winFactorTierOffset(),0),me=v.mapCellsByMask(de,function(e,t){return Le.getAttachmentElement(e,E_.COIN_VALUE)});return Rt([function(e){return Le.summarizeTotalWin(me,pe)},function(e){return We.slotModel.reelActor.presentSpecial("winSummary",null,null,[x])}]);case 5:for(var ge=n.data,fe=(M=null!=(_=We.slotModel.reelActor.owner._compMap)?_.h[hr.BASE_NAME]:null)instanceof hr?M:null,v=(je.isInShootStance||(je.isInShootStance=!0,je.queueAnimation("SHOOT_START",!0)),We.slotModel.reelActor.get_currentGrid()),b=[b_.get_position(ge)],Ae=(f=v.mW)*(A=v.mH),i=[],l=0;l<Ae;)++l,i.push(!1);var de=new Hl(f,A,i),xe=(il.each(b,function(e){de.mData[e]=!0}),de);return We.slotModel.reelActor.presentSpecial("fadePaying"),We.publish("game","revolverHighlight"),We.slotModel.reelActor.presentSpecial("highlight",xe),(E=Rt([function(e){return We.after(.3)},function(e){return Le.shootSymbols(ge,Ne.currentGrid,We.coinValueModel,fe,je,We.casinoModel,We.gameModel.gameInfo.symbols)},function(e){return We.after(.5)}])).handle(function(e){We.slotModel.reelActor.presentSpecial("fade",xe)}),E;case 6:var C,S=n.data,_=(We.publish("game","startGamble"),We.casinoModel.win),w=wA.divMod(null!=_?_:We.casinoModel.accumulatedWin,new yA(0,100)),y=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(w.modulus),2),v=parseFloat((null==w.quotient?"null":wA.toString(w.quotient))+"."+y),w=wA.divMod(We.casinoModel.betAmount,new yA(0,100)),y=((e,t)=>{for(;e.length<t;)e="0"+e;return e})(wA.toString(w.modulus),2),b=parseFloat((null==w.quotient?"null":wA.toString(w.quotient))+"."+y),we=Math.round(v/b);switch(v_.get_results(S).bonusFeatureWon){case"bonus_2":C=hacksawCasino.Translation.game("bonus_gamble_trickery");break;case"epic":C=hacksawCasino.Translation.game("bonus_gamble_epic");break;default:(i=new at).h.coinValue=we+"X",C=hacksawCasino.Translation.game("bonus_gamble_result",i)}var w=We.gameModel.styleData.text.gambleResultHeader,y=new vu(Cu.Text(Wu.FontCharacters(ks.bitmapFonts.h[w.font].toSdfFont(w.size,4),w,null,Mr.MultilineCenter,!0,320,130),new ku(C,null)),null,st.fromBacking(new it(null,.3,null,null)),null,null,null,null,null,null,to.Always,null,null,null),ye=(He.createShootingRange(v_.get_name(S),y),0!=v_.get_stop(S)&&We.isLargeGambleWin(Oe)),be="gamble"==v_.get_name(S)?[0,1,2,3]:[0,5,2,3,4,1,6,7],v=0==be[v_.get_stop(S)]?function(e){He.isUpgraded=!0;for(var t=[We.baseScene,We.backgroundScene,We.gambleScene],n=st.fromBacking(new it(0,0,0,1)),i=null==n?st.fromBacking(new it(.4,.4,.4,null)):n,s=new Array(t.length),a=0,l=t.length;a<l;)s[r=a++]={scene:t[r],comp:new Bs(new Ts(i,.5,null,null))};il.each(s,function(e){e.scene.add(e.comp)});for(var r,o=new Array(s.length),a=0,l=s.length;a<l;)o[r=a++]=s[r].comp.tweenDone;n=rt.noise(rt.inParallel(o));return n.handle(function(){We.sceneModel.hideScene("gamble"),We.sceneModel.showScene("reels")}),n}:function(e){return He.isGambleCountup=!0,rt.NOISE},ve=We.coinValueModel.getDigitAtlas(He.gambleCoinMultiplier);switch(v_.get_result(S).coin.toUpperCase()){case"BRONZE":t="BRONZE";break;case"DIAMOND":t="DIAMOND";break;case"GOLD":t="GOLD";break;case"SILVER":t="SILVER";break;default:t="FS"}var b=We.appModel.stageSize.x/We.appModel.stageSize.y,Ce=(He.layoutShootRange(lt.over(2.1,b)?2.1:lt.over(1.1,b)?1.1:lt.over(.8,b)?.8:lt.over(.45,b)?.45:0),We.appModel.resizeSignal.connect(function(e){var t=We.appModel.stageSize.x/We.appModel.stageSize.y;He.layoutShootRange(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0)}));return Rt([function(e){return rt.noise(He.shootBoard(be[v_.get_stop(S)],t,ve,ye))},function(e){return Ce.dispose(),rt.NOISE},v]);case 7:return rt.NOISE;case 8:for(var k=n.data,f=Ke.mW,A=Ke.mH,u=C_.get_mask(k).split(""),o=new Array(u.length),i=0,l=u.length;i<l;)o[a=i++]="1"==u[a];var M,Se=new Hl(f,A,o),ke=(Ke.mapCellsByMask(Se,function(e,t){return t}),We.casinoModel.currentTurboValue({normal:.5,turbo:.25,superTurbo:0})),Me=Le.createCollectWin(k,Ke,!0),Ie=Le.createCollectWin(k,Ke),I=((M=null!=(_=We.slotModel.reelActor.owner._compMap)?_.h[Md.BASE_NAME]:null)instanceof Md?M:null).visibleSymbols,a=C_.get_position(k);(R=new Bw).y=a/I.mW|0,R.x=a%I.mW;for(var B=(u=P=new Hl(I.mW,I.mH)).mData,T=u.mW,i=0,l=u.mW*u.mH;i<l;)B[a=i++]=a%T==R.x&&(a/T|0)==R.y;var E,Be=P;return(E=Rt([function(e){var t=Ke,n=C_.get_position(k);if(t.mData[(n/t.mW|0)*t.mW+n%t.mW]=0|Ze,Le.currentCollectorPosition!=C_.get_position(k)&&null!=Le.currentCollectorPosition){for(var n=Le.currentCollectorPosition,i=new Bw,s=(i.y=n/I.mW|0,i.x=n%I.mW,new Hl(I.mW,I.mH)),a=(t=s).mData,l=t.mW,r=0,o=t.mW*t.mH;r<o;)a[n=r++]=n%l==i.x&&(n/l|0)==i.y;We.slotModel.reelActor.presentSpecial("setup",s),Le.currentCollectorPosition=C_.get_position(k)}return We.publish("game","collectCountupStarted"),We.slotModel.reelActor.presentSpecial("collectCoins",Se,null,[Me])},function(e){for(var t=Ke.mW,n=Ke.mH,i=C_.get_mask(k).split(""),s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]="1"==i[r]}var t=new Hl(t,n,s),n=t.mapCellsByMask(t,function(e,t){return e}).length,t=We.slotModel.reelActor.owner.getFromParentsByName(Ls.BASE_NAME,Ls),o=C_.get_amount(k)/10;return o>t.floor&&5<n&&(t.floor=o,We.publish("casino","excitement_base",{excitement:o})),We.slotModel.reelActor.presentSpecial("collectorCollect",Se,null,[Ie])},function(e){return We.slotModel.reelActor.showStickies(new H_(Ie.mask,null,null)),We.after(ke)}])).handle(function(){We.slotModel.reelActor.presentSpecial("idle",Be)}),E;case 9:for(var F=S_.get_grid(n.data),Ae=(f=F.mW)*(A=F.mH),i=[],l=0;l<Ae;)++l,i.push(!1);var D=new Hl(f,A,i);return il.each(il.filterNull(F.mapCells(function(e,t){var n;return n=!!Dt.eq(Ye,e)&&(n=Ke).mData[t.y*n.mW+t.x]!=Ye,-1!=Xe.indexOf(e)||n||-1!=qe.indexOf(e)?t:null})),function(e){var t=D;t.mData[e.y*t.mW+e.x]=!0}),Rt([function(e){return We.slotModel.reelActor.clearStickiedSymbols()},function(e){return We.slotModel.reelActor.presentSpecial("replaceRemove",D)},function(e){F.eachCellsByMask(D,function(e,t){We.slotModel.reelActor.replaceSym(e,t);for(var n=We.gameModel.gameInfo.symbols,i=[],s=0;s<n.length;){var a=n[s];++s,new ot("MULTIPLIER$","").match(a.name)&&i.push(a)}for(var l=new Array(i.length),s=0,r=i.length;s<r;)l[o=s++]=0|i[o].id;if(-1!=l.indexOf(e)){for(var o,e=new Hl(Ke.mW,Ke.mH),u=(n=e).mData,h=n.mW,i=0,s=n.mW*n.mH;i<s;)u[o=i++]=o%h==t.x&&(o/h|0)==t.y;We.slotModel.reelActor.presentSpecial("idle",e)}});var t=We.slotModel.reelActor.presentSpecial("hideSymbol",D);return t.handle(function(){We.slotModel.reelActor.presentSpecial("revealCoinTween",D)}),t}]);case 10:i=n.data,u=Ke,a=k_.get_position(i);(R=new Bw).y=a/u.mW|0,R.x=a%u.mW;for(B=(u=P=new Hl(Ke.mW,Ke.mH)).mData,T=u.mW,l=0,r=u.mW*u.mH;l<r;)B[a=l++]=a%T==R.x&&(a/T|0)==R.y;var Te=P,Ee=Le.createMultiplierWin(i,Ke),Fe=0|il.find(We.gameModel.gameInfo.symbols,function(e){return"GLOBAL_MULTIPLIER"==e.name}).id,u=We.slotModel.reelActor.get_currentGrid(),a=k_.get_position(i);return We.publish("game","activateClover",{isEpic:u.mData[(a/u.mW|0)*u.mW+a%u.mW]==Fe}),Rt([function(e){return We.slotModel.reelActor.presentSpecial("revealMultipliers",Te,null,[Ee]),We.after(We.casinoModel.superTurbospin?.15:.25)},function(e){return We.slotModel.reelActor.presentSpecial("triggerMultipliers",Te,null,[Ee])},(Qe=Ve,function(e){var t,n=Ue[Ue.indexOf(Qe[0])+1];if(5==n._hx_index)switch(n.gameEnum._hx_index){case 4:t=2;break;case 8:t=1.2;break;default:t=1}else t=1;return We.after(We.casinoModel.currentTurboValue({normal:.4,turbo:.35,superTurbo:.2})*t)})]);case 11:var R,i=n.data,u=Ke,a=k_.get_position(i);(R=new Bw).y=a/u.mW|0,R.x=a%u.mW;for(var P,B=(u=P=new Hl(Ke.mW,Ke.mH)).mData,T=u.mW,l=0,r=u.mW*u.mH;l<r;)B[a=l++]=a%T==R.x&&(a/T|0)==R.y;var De=P,Re=Le.createMultiplierWin(i,Ke),Fe=0|il.find(We.gameModel.gameInfo.symbols,function(e){return"GLOBAL_MULTIPLIER"==e.name}).id,u=We.slotModel.reelActor.get_currentGrid(),a=k_.get_position(i);return We.publish("game","activateClover",{isEpic:u.mData[(a/u.mW|0)*u.mW+a%u.mW]==Fe}),Rt([function(e){return We.slotModel.reelActor.presentSpecial("revealMultipliers",De,null,[Re]),We.after(We.casinoModel.superTurbospin?.15:.25)},function(e){return We.slotModel.reelActor.presentSpecial("triggerMultipliers",De,null,[Re])},(ze=Ve,function(e){var t,n=Ue[Ue.indexOf(ze[0])+1];if(5==n._hx_index)switch(n.gameEnum._hx_index){case 4:t=2;break;case 8:t=1.2;break;default:t=1}else t=1;return We.after(We.casinoModel.currentTurboValue({normal:.4,turbo:.35,superTurbo:.2})*t)})]);case 12:var Pe=n.data;return Rt([function(e){return je.isInShootStance=!1,je.queueAnimation("SHOOT_END",!0),We.after(.5)},function(e){je.queueAnimation("SMALL_WIN",!0);for(var t=Ke,n=M_.get_position(Pe),i=new Bw,t=(i.y=n/t.mW|0,i.x=n%t.mW,new Hl(Ke.mW,Ke.mH)),s=t.mData,a=t.mW,l=0,r=t.mW*t.mH;l<r;)s[n=l++]=n%a==i.x&&(n/a|0)==i.y;var p=t,t=Rt([function(e){return We.publish("game","activateReload"),rt.noise(We.slotModel.reelActor.presentSpecial("win",p))},function(e){return We.after(.7)}]);return t.handle(function(){We.slotModel.reelActor.presentSpecial("fade",p);for(var e=M_.get_hits(Pe),t=new Array(e.length),n=0,i=e.length;n<i;){var s=e[u=n++],a=Ne.visibleSymbols,l=new Bw;l.y=s/a.mW|0,l.x=s%a.mW,t[u]=l}for(var r=0;r<t.length;){for(var o=t[r++],u=[r-1],o=[o],h=o[0],c=new Hl(Ke.mW,Ke.mH),_=(e=c).mData,d=e.mW,n=0,i=e.mW*e.mH;n<i;)_[s=n++]=s%d==h.x&&(s/d|0)==h.y;c=[c];Rt([((t,n,i)=>function(e){return We.publish("game","loadRevolver"),We.slotModel.reelActor.replaceSym(M_.get_symbols(Pe)[i[0]],n[0],!1,!0,!1),We.slotModel.reelActor.presentSpecial("reload",t[0])})(c,o,u),(t=>function(e){return We.slotModel.reelActor.presentSpecial("setup",t[0])})(c)])}}),t}]);default:throw new tl('Unrecognized game specific action type: "'+el.string(n)+'"')}break;default:throw new tl('Unrecognized action type: "'+el.string(Ve[0])+'"')}var ze,Qe})([Ue[r++]]));return Rt(l)},getCharacterYPos:function(e){switch(e){case.45:return-.25;case.8:return-.35;default:return-.15}},isLargeGambleWin:function(e){e=e?((e=null!=(t=this.gameModel.gambleController._compMap)?t.h[or.BASE_NAME]:null)instanceof or?e:null).get_isBonus2()?250:65:0;var t=this.casinoModel.win,n=wA.divMod(null!=t?t:this.casinoModel.accumulatedWin,new yA(0,100)),i=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(n.modulus)),s=parseFloat((null==n.quotient?"null":wA.toString(n.quotient))+"."+i),n=wA.divMod(this.casinoModel.betAmount,new yA(0,100)),i=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(n.modulus)),s=s/parseFloat((null==n.quotient?"null":wA.toString(n.quotient))+"."+i)>e,t=this.casinoModel.win,n=this.slotModel.reelActor.isLargeWin(null!=t?t:this.casinoModel.accumulatedWin);return s&&n},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",d_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",d_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",d_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",d_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",d_,!0),this.baseEntity=e("gasm.core.Entity","",d_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",d_,!0),this.coinValueModel=e("hacksaw.games.lecowboy.components.model.CoinValueModel","",d_,!0),this.baseScene=e("gasm.core.Entity","reels",d_,!0),this.backgroundScene=e("gasm.core.Entity","background",d_,!0),this.gambleScene=e("gasm.core.Entity","gamble",d_,!0),this.countupScene=e("gasm.core.Entity","countup",d_,!0),this.characterScene=e("gasm.core.Entity","character",d_,!0)},__class__:d_}),function(){Wl.call(this)}),m_=((i["hacksaw.games.lecowboy.states.RevealState"]=p_).__name__="hacksaw.games.lecowboy.states.RevealState",p_.__super__=Wl,p_.prototype=e(Wl.prototype,{enter:function(){var o=this,e=this.slotModel.reelActor.owner._compMap,e=null!=e?e.h[hr.BASE_NAME]:null,e=((e instanceof hr?e:null).deactivateCells(),this.publish("game","drop"),this.gameModel.response=null,this.subOnce("casino","betAccepted")),t=(e.handle(function(e){o.publish("casino","betAcknowledged"),o.gameModel.response=e}),this.subOnce("casino","betDeclined"));rt.and(this.slotModel.reelActor.reveal(),rt.or(e,t)).handle(function(){o.publish("casino","clearFeedbackMessage"),o.publish("casino","gameRoundStarted");var e=null!=o.gameModel.response;if(e){for(var t=el.string(o.gameModel.response.events[0].c.grid).split(""),n=t.slice(0,2),i=t.slice(2),t=Jn.cca(n[0],0)-40,n=Jn.cca(n[1],0)-40,s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=Jn.cca(i[r],0)-40}t=new Hl(t,n,s)}else n=o.slotModel.reelActor.owner._compMap,n=null!=n?n.h[Md.BASE_NAME]:null,t=(n instanceof Md?n:null).currentGrid;o.slotModel.reelActor.endReveal(new Y_(t,null,null)).handle(function(){o.fsm.goto(e?d_:h_)})})},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",p_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",p_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",p_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",p_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",p_,!0),this.baseEntity=e("gasm.core.Entity","",p_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",p_,!0),this.baseScene=e("gasm.core.Entity","reels",p_,!0),this.backgroundScene=e("gasm.core.Entity","background",p_,!0)},__class__:p_}),function(){Wl.call(this)}),g_=((i["hacksaw.games.lecowboy.states.SplashState"]=m_).__name__="hacksaw.games.lecowboy.states.SplashState",m_.__super__=Wl,m_.prototype=e(Wl.prototype,{enter:function(){var t=this,e=this.createSplashScene(),n=(this.sceneModel.showScene("splash"),this.createSplash(e)),e=this.gameModel.character._compMap,i=null!=e?e.h[fr.BASE_NAME]:null,s=i instanceof fr?i:null;((i=null!=(e=this.gameModel.sceneryHandler._compMap)?e.h[dr.BASE_NAME]:null)instanceof dr?i:null).addBackgroundBlur(),Rt([function(e){return n.onContinue},function(e){return t.presentReelEnter()}]).handle(function(){t.appModel.resizeSignal.emit({width:t.appModel.stageSize.x,height:t.appModel.stageSize.y}),s.queueAnimation("GREETS",!0),t.fsm.goto(h_)})},exit:function(){this._layoutResize.dispose(),this.publish("game","enterMode",{gameMode:"base"}),this.publish("casino","gameStarted"),Wl.prototype.exit.call(this)},presentReelEnter:function(){var s=this,e=(this.publish("game","splashClicked"),this.gameModel.character._compMap),t=null!=e?e.h[fr.BASE_NAME]:null,a=t instanceof fr?t:null,n=((t=null!=(e=this.slotModel.reelActor.owner._compMap)?e.h[q_.BASE_NAME]:null)instanceof q_?t:null).object,i=((t=null!=(e=this.gameModel.logo._compMap)?e.h[mu.BASE_NAME]:null)instanceof mu?t:null).object,e=(i.set_visible(!1),a.enable=!1,Rt([function(e){return s.after(1)},function(e){var t=s.gameModel.sceneryHandler._compMap,t=null!=t?t.h[dr.BASE_NAME]:null;return(t instanceof dr?t:null).removeBackgroundBlur(.3),s.publish("game","closeSplash"),s.sceneModel.removeScene("splash"),s.sceneModel.showScene("reels"),s.slotModel.reelActor.show(),tt.tween(n,[et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.25,.25,null,null)),null,.7,null,o1.backOut,null,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,0,null)),st.fromBacking(new it(null,null,Math.PI/180*30,null)),null,2,null,o1.elasticOut,null,null,null,null,null))]),s.after(.25)},function(e){return Rt([function(e){s.after(.025).handle(function(e){i.set_visible(!0)});var t=st.fromBacking(new it(null,3,null,null));return tt.translateTo(i,new nt(st.fromBacking(new it(null,i.get_y(),null,null)),t,null,.4,null,o1.circIn,null,null,null,null,null))},function(e){return tt.tween(i,[et.Position(new nt(st.fromBacking(new it(null,.18,null,null)),null,.3,.18,null,o1.quadOut,!0,null,null,null,null)),et.Position(new nt(st.fromBacking(new it(null,-.18,null,null)),null,.48,.11,null,o1.quadIn,!0,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,Math.PI/180*4.75,null)),null,.3,.18,null,o1.quadOut,null,null,null,null,null)),et.Rotate(new nt(st.fromBacking(new it(null,null,0,null)),null,.48,.11,null,o1.quadIn,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(.9,1.1,null,null)),null,.3,.18,null,o1.quadOut,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,.48,.11,null,o1.quadIn,null,null,null,null,null))]),n.cancel(),tt.tween(n,[et.Rotate(new nt(st.fromBacking(new it(null,null,0,null)),null,null,.1,null,null,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1.1,.9,null,null)),null,null,.25,null,o1.quadOut,null,null,null,null,null)),et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),null,.25,.75,null,o1.elasticOut,null,null,null,null,null))])}]),s.after(.75)},function(e){a.enable=!0;var t=s.appModel.stageSize.x/s.appModel.stageSize.y,t=(a.layout(lt.over(2.1,t)?2.1:lt.over(1.1,t)?1.1:lt.over(.8,t)?.8:lt.over(.45,t)?.45:0),a.object),n=et.Color(new nt(null,st.fromBacking(new it(null,null,null,0)),null,.325,null,o1.quadInOut,null,null,null,null,null)),i=st.fromBacking(new it(a.object.get_x()+1,null,null,null));return tt.tween(t,[n,et.Position(new nt(st.fromBacking(new it(a.object.get_x(),null,null,null)),i,null,.325,null,o1.quadInOut,null,null,null,null,null))]),rt.NOISE}]));return rt.noise(rt.and(e,Bc(this.after(.05),this.sceneModel,this.casinoModel.isMobile())))},createSplash:function(e){for(var t=this,n=this.gameModel.styleData.text.splashHeader,i=this.gameModel.styleData.text.splashBody,s=this.gameModel.styleData.text.splashFooter,a=[{headerString:"mechanics_uc",bodyString:"mechanics_body",background:J.splash_info.frames.a},{headerString:"free_spins_uc",bodyString:"free_spins_body",background:J.splash_info.frames.b},{headerString:"max_win_uc",bodyString:"max_win_body",background:J.splash_info.frames.c}],l=new vu(Cu.Tile(Kh.getTile(J.misc,J.misc_info.frames.logo)),null,st.fromBacking(new it(null,1.1,null,null)),null,Jl.scale,null,null,null,null,to.Always,null,null,null),r=[],o=0;o<a.length;){var u=a[o];++o,r.push(new Hs(new vu(Cu.Text(Wu.FontCharacters(ks.bitmapFonts.h[n.font].toSdfFont(n.size,4),n,null,Mr.MultilineCenter,!0,550,100),new ku(hacksawCasino.Translation.game(u.headerString),null)),null,st.fromBacking(new it(null,-.32,null,null)),null,null,null,null,null,null,to.Always,null,null,null),new vu(Cu.Text(Wu.FontCharacters(ks.bitmapFonts.h[i.font].toSdfFont(i.size,4),i,null,Mr.MultilineCenter,!0,500,225),new ku(hacksawCasino.Translation.game(u.bodyString),null)),null,st.fromBacking(new it(null,-.625,null,null)),null,null,null,null,null,null,to.Always,null,null,null),new vu(Cu.Tile(Kh.getTile(J.splash,u.background)),null,st.fromBacking(new it(null,-.25,-.01,null)),null,Jl.scale,null,null,null,null,to.Always,null,null,null),null))}function h(){var e;switch(t.appModel.orientation){case"landscape":e=.1;break;case"portrait":e=0}_.get_margins().left=e,_.get_margins().right=e}var o=new vu(Cu.Tile(Kh.getTile(J.splash,J.splash_info.frames.hidden_epic_bonus)),null,st.fromBacking(new it(.6,.55,.01,null)),st.fromBacking(new it(2.035,.535,.01,null)),.9*Jl.scale,null,st.fromBacking(new it(null,null,.075*-Math.PI,null)),null,null,to.Always,null,null,null),s=new vu(Cu.Text(Wu.FontCharacters(ks.bitmapFonts.h[s.font].toSdfFont(s.size,4,.5,.03125),s,null,Mr.Center,!1,700),new ku(hacksawCasino.Translation.game("click_to_continue_uc"),null)),null,st.fromBacking(new it(null,-1.1,null,null)),null,null,null,null,null,null,to.Always,null,null,null),c=new js(new Ys(l,new vu(Cu.Tile(Kh.getTile(J.splash,J.splash_info.frames.volatility)),null,st.fromBacking(new it(null,.7,.1,null)),null,Jl.scale,null,null,null,null,to.Always,null,null,null),null,s,1.565,null,r,o)),_=new T(new F(new E(.1,0,null,null),null,null,null,null));e.addChild((new ge).add(c).add(_));return h(),this._layoutResize=this.appModel.resizeSignal.connect(function(e){h(),c.layout()}),c},createSplashScene:function(){var e=this.sceneModel.addScene(new Ke("splash",!0,null,!1,null,null)),t=e._compMap,t=null!=t?t.h[He.BASE_NAME]:null,t=(t instanceof He?t:null).scene3d,t=(e.add(new Oe(new We(null,null,null,st.fromBacking(new it(null,null,10,null)),null,null,null,45,null,null,null))),nl.__cast(t.lightSystem,To).ambientLight);return t.x=1,t.y=1,t.z=1,e},acceptInjector:function(e){e=Cn(e,e.getInstanceWithClassName);this.fsm=e("hxfsm.FSMController","",m_,!0),this.appModel=e("gasm.core.components.AppModelComponent","",m_,!0),this.sceneModel=e("gasm.heaps.components.SceneModelComponent","",m_,!0),this.casinoModel=e("hacksaw.core.components.model.CasinoModel","",m_,!0),this.slotModel=e("hacksaw.slotcommon.components.model.SlotModel","",m_,!0),this.baseEntity=e("gasm.core.Entity","",m_,!0),this.gameModel=e("hacksaw.games.lecowboy.components.model.GameModel","",m_,!0),this.backgroundScene=e("gasm.core.Entity","background",m_,!0)},__class__:m_}),{}),f_=(g_.lessEqual=function(e,t){return t<=e},function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m){wa.call(this,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m),this.targetPosition=e}),A_=((i["hacksaw.games.lecowboy.types.CollectWin"]=f_).__name__="hacksaw.games.lecowboy.types.CollectWin",f_.__super__=wa,f_.prototype=e(wa.prototype,{__class__:f_}),fe["hacksaw.games.lecowboy.types.GameAction"]={__ename__:!0,__constructs__:null,LoadAmmo:((R=function(e){return{_hx_index:0,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="LoadAmmo",R.__params__=["data"],R),ShootOut:((R=function(e){return{_hx_index:1,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="ShootOut",R.__params__=["data"],R),Convert:((R=function(e){return{_hx_index:2,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="Convert",R.__params__=["data"],R),CoinReveal:((R=function(e){return{_hx_index:3,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="CoinReveal",R.__params__=["data"],R),CashWin:((R=function(e){return{_hx_index:4,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="CashWin",R.__params__=["data"],R),Shoot:((R=function(e){return{_hx_index:5,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="Shoot",R.__params__=["data"],R),Wheel:((R=function(e){return{_hx_index:6,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="Wheel",R.__params__=["data"],R),CashPrize:((R=function(e){return{_hx_index:7,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="CashPrize",R.__params__=["data"],R),Collect:((R=function(e){return{_hx_index:8,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="Collect",R.__params__=["data"],R),Replace:((R=function(e){return{_hx_index:9,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="Replace",R.__params__=["data"],R),Mult:((R=function(e){return{_hx_index:10,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="Mult",R.__params__=["data"],R),GlobalMult:((R=function(e){return{_hx_index:11,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="GlobalMult",R.__params__=["data"],R),Reload:((R=function(e){return{_hx_index:12,data:e,__enum__:"hacksaw.games.lecowboy.types.GameAction",toString:o}})._hx_name="Reload",R.__params__=["data"],R)}),x_=(A_.__constructs__=[A_.LoadAmmo,A_.ShootOut,A_.Convert,A_.CoinReveal,A_.CashWin,A_.Shoot,A_.Wheel,A_.CashPrize,A_.Collect,A_.Replace,A_.Mult,A_.GlobalMult,A_.Reload],A_.__empty_constructs__=[],{}),w_=(x_.__properties__={get_symbols:"get_symbols",get_positions:"get_positions"},x_.get_positions=function(e){return e.positions.map(function(e){return el.parseInt(e)})},x_.get_symbols=function(e){return e.symbols.map(function(e){return el.parseInt(e)})},{}),y_=(w_.__properties__={get_mask:"get_mask"},w_.get_mask=function(e){return null==e.coins?null:el.string(e.coins)},{}),b_=(y_.__properties__={get_mask:"get_mask",get_winAmount:"get_winAmount"},y_.get_winAmount=function(e){return bA.fromFloat(Math.round(e.w))},y_.get_mask=function(e){return null==e.h?null:el.string(e.h)},{}),v_=(b_.__properties__={get_position:"get_position",get_symbols:"get_symbols",get_hits:"get_hits"},b_.get_hits=function(e){return e.hits.map(function(e){return el.parseInt(e)})},b_.get_symbols=function(e){return e.symbols.map(function(e){return el.parseInt(e)})},b_.get_position=function(e){return el.parseInt(e.p)},{}),C_=(v_.__properties__={get_name:"get_name",get_results:"get_results",get_result:"get_result",get_stop:"get_stop"},v_.get_stop=function(e){return el.parseInt(e.stop)},v_.get_result=function(e){return{coin:el.string(e.result.coin)}},v_.get_results=function(e){return{bonusFeatureWon:el.string(e.result.bonusFeatureWon),bonusFeatureCount:el.parseInt(e.result.bonusFeatureCount),actionType:el.string(e.result.actionType)}},v_.get_name=function(e){return el.string(e.name)},{}),S_=(C_.__properties__={get_mask:"get_mask",get_amount:"get_amount",get_position:"get_position"},C_.get_position=function(e){return el.parseInt(e.p)},C_.get_amount=function(e){return el.parseInt(e.w)},C_.get_mask=function(e){return e.h},{}),k_=(S_.__properties__={get_grid:"get_grid"},S_.get_grid=function(e){for(var e=el.string(e.g).split(""),t=e.slice(0,2),n=e.slice(2),e=Jn.cca(t[0],0)-40,t=Jn.cca(t[1],0)-40,i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++;i[l]=Jn.cca(n[l],0)-40}return new Hl(e,t,i)},{}),M_=(k_.__properties__={get_hitData:"get_hitData",get_multiplier:"get_multiplier",get_position:"get_position"},k_.get_position=function(e){return el.parseInt(e.p)},k_.get_multiplier=function(e){return el.parseInt(e.m)},k_.get_hitData=function(e){for(var t=il.zip(e.hits,e.results),n=new Array(t.length),i=0,s=t.length;i<s;){var a=i++,l=t[a];n[a]={position:l._0,newValue:l._1}}return n},{}),I_=(M_.__properties__={get_position:"get_position",get_symbols:"get_symbols",get_hits:"get_hits"},M_.get_hits=function(e){return e.hits.map(function(e){return el.parseInt(e)})},M_.get_symbols=function(e){return e.symbols.map(function(e){return el.parseInt(e)})},M_.get_position=function(e){return el.parseInt(e.p)},fe["hacksaw.games.lecowboy.types.GambleRewardType"]={__ename__:!0,__constructs__:null,REWARD_FS:{_hx_name:"REWARD_FS",_hx_index:0,__enum__:"hacksaw.games.lecowboy.types.GambleRewardType",toString:o},REWARD_BRONZE:{_hx_name:"REWARD_BRONZE",_hx_index:1,__enum__:"hacksaw.games.lecowboy.types.GambleRewardType",toString:o},REWARD_SILVER:{_hx_name:"REWARD_SILVER",_hx_index:2,__enum__:"hacksaw.games.lecowboy.types.GambleRewardType",toString:o},REWARD_GOLD:{_hx_name:"REWARD_GOLD",_hx_index:3,__enum__:"hacksaw.games.lecowboy.types.GambleRewardType",toString:o},REWARD_DIAMOND:{_hx_name:"REWARD_DIAMOND",_hx_index:4,__enum__:"hacksaw.games.lecowboy.types.GambleRewardType",toString:o}}),B_=(I_.__constructs__=[I_.REWARD_FS,I_.REWARD_BRONZE,I_.REWARD_SILVER,I_.REWARD_GOLD,I_.REWARD_DIAMOND],I_.__empty_constructs__=[I_.REWARD_FS,I_.REWARD_BRONZE,I_.REWARD_SILVER,I_.REWARD_GOLD,I_.REWARD_DIAMOND],fe["hacksaw.games.lecowboy.types.GambleTile"]={__ename__:!0,__constructs__:null,BUTTON_GREEN_ACTIVE:{_hx_name:"BUTTON_GREEN_ACTIVE",_hx_index:0,__enum__:"hacksaw.games.lecowboy.types.GambleTile",toString:o},BUTTON_GREEN_HOVER:{_hx_name:"BUTTON_GREEN_HOVER",_hx_index:1,__enum__:"hacksaw.games.lecowboy.types.GambleTile",toString:o},BUTTON_RED_ACTIVE:{_hx_name:"BUTTON_RED_ACTIVE",_hx_index:2,__enum__:"hacksaw.games.lecowboy.types.GambleTile",toString:o},BUTTON_RED_HOVER:{_hx_name:"BUTTON_RED_HOVER",_hx_index:3,__enum__:"hacksaw.games.lecowboy.types.GambleTile",toString:o},DIALOGUE:{_hx_name:"DIALOGUE",_hx_index:4,__enum__:"hacksaw.games.lecowboy.types.GambleTile",toString:o},DIALOGUE_PORTRAIT:{_hx_name:"DIALOGUE_PORTRAIT",_hx_index:5,__enum__:"hacksaw.games.lecowboy.types.GambleTile",toString:o}}),lt=(B_.__constructs__=[B_.BUTTON_GREEN_ACTIVE,B_.BUTTON_GREEN_HOVER,B_.BUTTON_RED_ACTIVE,B_.BUTTON_RED_HOVER,B_.DIALOGUE,B_.DIALOGUE_PORTRAIT],B_.__empty_constructs__=[B_.BUTTON_GREEN_ACTIVE,B_.BUTTON_GREEN_HOVER,B_.BUTTON_RED_ACTIVE,B_.BUTTON_RED_HOVER,B_.DIALOGUE,B_.DIALOGUE_PORTRAIT],{}),T_=(lt.over=function(e,t){return e<=t},function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m){wa.call(this,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m),this.winfactorGrid=e}),E_=((i["hacksaw.games.lecowboy.types.MultiplierWin"]=T_).__name__="hacksaw.games.lecowboy.types.MultiplierWin",T_.__super__=wa,T_.prototype=e(wa.prototype,{__class__:T_}),fe["hacksaw.games.lecowboy.types.SymbolAttachmentType"]={__ename__:!0,__constructs__:null,COIN_VALUE:{_hx_name:"COIN_VALUE",_hx_index:0,__enum__:"hacksaw.games.lecowboy.types.SymbolAttachmentType",toString:o},MULTIPLIER_VALUE:{_hx_name:"MULTIPLIER_VALUE",_hx_index:1,__enum__:"hacksaw.games.lecowboy.types.SymbolAttachmentType",toString:o},HIT:{_hx_name:"HIT",_hx_index:2,__enum__:"hacksaw.games.lecowboy.types.SymbolAttachmentType",toString:o}}),F_=(E_.__constructs__=[E_.COIN_VALUE,E_.MULTIPLIER_VALUE,E_.HIT],E_.__empty_constructs__=[E_.COIN_VALUE,E_.MULTIPLIER_VALUE,E_.HIT],fe["hacksaw.games.lecowboy.types.WinLevel"]={__ename__:!0,__constructs__:null,EpicWin:{_hx_name:"EpicWin",_hx_index:0,__enum__:"hacksaw.games.lecowboy.types.WinLevel",toString:o},SuperMegaWin:{_hx_name:"SuperMegaWin",_hx_index:1,__enum__:"hacksaw.games.lecowboy.types.WinLevel",toString:o},MegaWin:{_hx_name:"MegaWin",_hx_index:2,__enum__:"hacksaw.games.lecowboy.types.WinLevel",toString:o},BigWin:{_hx_name:"BigWin",_hx_index:3,__enum__:"hacksaw.games.lecowboy.types.WinLevel",toString:o},Regular:{_hx_name:"Regular",_hx_index:4,__enum__:"hacksaw.games.lecowboy.types.WinLevel",toString:o},Small:{_hx_name:"Small",_hx_index:5,__enum__:"hacksaw.games.lecowboy.types.WinLevel",toString:o}}),D_=(F_.__constructs__=[F_.EpicWin,F_.SuperMegaWin,F_.MegaWin,F_.BigWin,F_.Regular,F_.Small],F_.__empty_constructs__=[F_.EpicWin,F_.SuperMegaWin,F_.MegaWin,F_.BigWin,F_.Regular,F_.Small],function(e,t,n,i){this.defaultValues={normal:new R_(.01,.025,.01,.001,.66,function(e){if(e<.5)return(t=e/.5)*t*t;var t=[1,.95,.95,1],n=[1,.99,.99,1],e=(e-.5)/.5,i=.7;if(e<(i=null==i?.5:i)){var s=e/i;if(t.length<2)throw tl.thrown("points length must be more than 2");return 2==t.length?t[0]*(1-s)+t[1]*s:3==t.length?(a=t[1],(t[0]*(1-s)+a*s)*(1-s)+(a*(1-s)+t[2]*s)*s):m1._bezier(s,t)}var a=(e-i)/(1-i);if(n.length<2)throw tl.thrown("points length must be more than 2");return 2==n.length?n[0]*(1-a)+n[1]*a:3==n.length?(s=n[1],(n[0]*(1-a)+s*a)*(1-a)+(s*(1-a)+n[2]*a)*a):m1._bezier(a,n)}),turbo:new R_(.01,.025,.01,.001,.66,function(e){if(e<.5)return(t=e/.5)*t*t;var t=[1,.95,.95,1],n=[1,.99,.99,1],e=(e-.5)/.5,i=.7;if(e<(i=null==i?.5:i)){var s=e/i;if(t.length<2)throw tl.thrown("points length must be more than 2");return 2==t.length?t[0]*(1-s)+t[1]*s:3==t.length?(a=t[1],(t[0]*(1-s)+a*s)*(1-s)+(a*(1-s)+t[2]*s)*s):m1._bezier(s,t)}var a=(e-i)/(1-i);if(n.length<2)throw tl.thrown("points length must be more than 2");return 2==n.length?n[0]*(1-a)+n[1]*a:3==n.length?(s=n[1],(n[0]*(1-a)+s*a)*(1-a)+(s*(1-a)+n[2]*a)*a):m1._bezier(a,n)}),superTurbo:new R_(.01,0,0,.001,.66,function(e){if(e<.5)return(t=e/.5)*t*t;var t=[1,.95,.95,1],n=[1,.99,.99,1],e=(e-.5)/.5,i=.7;if(e<(i=null==i?.5:i)){var s=e/i;if(t.length<2)throw tl.thrown("points length must be more than 2");return 2==t.length?t[0]*(1-s)+t[1]*s:3==t.length?(a=t[1],(t[0]*(1-s)+a*s)*(1-s)+(a*(1-s)+t[2]*s)*s):m1._bezier(s,t)}var a=(e-i)/(1-i);if(n.length<2)throw tl.thrown("points length must be more than 2");return 2==n.length?n[0]*(1-a)+n[1]*a:3==n.length?(s=n[1],(n[0]*(1-a)+s*a)*(1-a)+(s*(1-a)+n[2]*a)*a):m1._bezier(a,n)})},this.superTurbo=null,this.normal=e,this.turbo=t,null!=n&&(this.superTurbo=n),null!=i&&(this.defaultValues=i)}),R_=((i["hacksaw.slotcommon.api.CollapseConfig"]=D_).__name__="hacksaw.slotcommon.api.CollapseConfig",D_.prototype={__class__:D_},function(e,t,n,i,s,a){this.dropStart=e,this.symbolDelay=t,this.reelDelay=n,this.collapseTimeRandom=i,this.stopDuration=s,this.addCurve=a}),P_=((i["hacksaw.slotcommon.api.CollapseValues"]=R_).__name__="hacksaw.slotcommon.api.CollapseValues",R_.prototype={__class__:R_},function(e,t,n,i){this.defaultValues={normal:new z_(2,-3,.5,.66,.001,function(e){return e*e*e},function(e){var n,t;return e<.58?(n=[0,0,.5,1],0*(1-(t=(e=>{var t;if(n.length<2)throw tl.thrown("points length must be more than 2");return t=e*(e=n.length-1),null==(e=e-1)&&(e=1),e=Math.floor(t<=0?0:e<=t?e:t),n[e]*(1-(t=t-e))+n[e+1]*t})(e/.58)))+.96*t):.96*(1-(t=(e=(e-.58)/.42000000000000004)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375))+t},.025,.01,null,null,.5,1,null),turbo:new z_(2,-3,.2,.2,.001,function(e){return e*e*e},function(e){var n,t;return e<.58?(n=[0,0,.5,1],0*(1-(t=(e=>{var t;if(n.length<2)throw tl.thrown("points length must be more than 2");return t=e*(e=n.length-1),null==(e=e-1)&&(e=1),e=Math.floor(t<=0?0:e<=t?e:t),n[e]*(1-(t=t-e))+n[e+1]*t})(e/.58)))+.96*t):.96*(1-(t=(e=(e-.58)/.42000000000000004)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375))+t},.025,.01,null,null,.5,1,null),superTurbo:new z_(2,-3,.2,.2,.001,function(e){return e*e*e},function(e){var n,t;return e<.58?(n=[0,0,.5,1],0*(1-(t=(e=>{var t;if(n.length<2)throw tl.thrown("points length must be more than 2");return t=e*(e=n.length-1),null==(e=e-1)&&(e=1),e=Math.floor(t<=0?0:e<=t?e:t),n[e]*(1-(t=t-e))+n[e+1]*t})(e/.58)))+.96*t):.96*(1-(t=(e=(e-.58)/.42000000000000004)<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375))+t},0,0,null,null,.5,1,null)},this.superTurbo=null,this.normal=e,this.turbo=t,null!=n&&(this.superTurbo=n),null!=i&&(this.defaultValues=i)}),z_=((i["hacksaw.slotcommon.api.DropConfig"]=P_).__name__="hacksaw.slotcommon.api.DropConfig",P_.prototype={__class__:P_},function(e,t,n,i,s,a,l,r,o,u,h,c,_,d){this.replaceReelDelay=null,this.removeReelDelay=null,this.dropStart=e,this.dropEnd=t,this.startDuration=n,this.stopDuration=i,this.dropTimeRandom=s,this.removeCurve=a,this.addCurve=l,this.symbolDelay=r,this.reelDelay=o,null!=u&&(this.removeReelDelay=u),null!=h&&(this.replaceReelDelay=h),this.presentDelay=c,this.attentionDuration=_,this.attentionSpeed=d}),Q_=((i["hacksaw.slotcommon.api.DropValues"]=z_).__name__="hacksaw.slotcommon.api.DropValues",z_.prototype={__class__:z_},(i["hacksaw.slotcommon.api.ResizeConfig"]=Fc).__name__="hacksaw.slotcommon.api.ResizeConfig",(i["hacksaw.slotcommon.api.RotateConfig"]=Dc).__name__="hacksaw.slotcommon.api.RotateConfig",(i["hacksaw.slotcommon.api.CellSpinConfig"]=Rc).__name__="hacksaw.slotcommon.api.CellSpinConfig",Rc.prototype={__class__:Rc},(i["hacksaw.slotcommon.api.SpinConfig"]=Pc).__name__="hacksaw.slotcommon.api.SpinConfig",Pc.prototype={__class__:Pc},function(e,t,n,i,s,a,l,r,o,u,h,c,_,d){this.reelStopDelay=null,this.startDuration=e,this.stopDuration=t,this.speed=n,this.startCurve=i,this.reelDelay=s,null!=a&&(this.reelStopDelay=a),this.attentionDuration=l,this.attentionSpeed=r,this.presentAfterSettle=o,this.stopSpeed=u,this.attentionStopSpeed=h,this.attentionStopDuration=c,this.stopType=_,this.attentionStopType=d}),V_=((i["hacksaw.slotcommon.api.SpinValues"]=Q_).__name__="hacksaw.slotcommon.api.SpinValues",Q_.prototype={__class__:Q_},fe["hacksaw.slotcommon.api.MotionStopType"]={__ename__:!0,__constructs__:null,Elastic:((R=function(e,t){return{_hx_index:0,dampingRatio:e,halflife:t,__enum__:"hacksaw.slotcommon.api.MotionStopType",toString:o}})._hx_name="Elastic",R.__params__=["dampingRatio","halflife"],R),Bounce:((R=function(e,t){return{_hx_index:1,deceleration:e,restitution:t,__enum__:"hacksaw.slotcommon.api.MotionStopType",toString:o}})._hx_name="Bounce",R.__params__=["deceleration","restitution"],R),None:{_hx_name:"None",_hx_index:2,__enum__:"hacksaw.slotcommon.api.MotionStopType",toString:o}}),O_=(V_.__constructs__=[V_.Elastic,V_.Bounce,V_.None],V_.__empty_constructs__=[V_.None],(i["hacksaw.slotcommon.api.TwistConfig"]=zc).__name__="hacksaw.slotcommon.api.TwistConfig",function(e){this._reelRotation=0,this._idleWins=[],this._cancelledWins=!1,this._delayed=[],this.currentEndReactArgs=null,this.currentEndRevealArgs=null,this._sequencers=[],this.superTurbo=!1,this.turbo=!1,d.call(this),this._config=e,this.componentType=Ie.Actor}),W_=((i["hacksaw.slotcommon.components.actor.ReelActorComponent"]=O_).__name__="hacksaw.slotcommon.components.actor.ReelActorComponent",O_.__super__=d,O_.prototype=e(d.prototype,{init:function(){var t=this,e=(this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),this.owner._compMap),n=null!=e?e.h[q_.BASE_NAME]:null;this._reels=n instanceof q_?n:null,this._reels.object.set_visible(!1);n=null!=(e=this.owner._compMap)?e.h[Md.BASE_NAME]:null;switch(this._model=n instanceof Md?n:null,this._model.messagePrefix=this._config.messagePrefix,this._model.behaviorModel.reveal._hx_index){case 0:case 1:break;case 2:this._revealActions=bd.DropActions(new Sd(this._reels,this._model,this._gameChannel));break;case 3:break;case 4:this._revealActions=bd.SpinActions(new kd(this._reels,this._model,this._gameChannel))}e=this._model.behaviorModel.react;if(null!=e)switch(e._hx_index){case 3:this._reactActions=bd.CollapseActions(new Cd(this._reels,this._model,this._gameChannel));break;case 5:this._reactActions=bd.SpinActions(new kd(this._reels,this._model,this._gameChannel))}var i=this.owner.getFromParentsByName(ee.BASE_NAME,ee),s=(this._casinoModel=this.owner.getFromParentsByName(_u.BASE_NAME,_u),this._slotModel=this.owner.getFromParentsByName(Qd.BASE_NAME,Qd),(this._slotModel.reelActor=this)._casinoChannel.subscribe("cancelWinAnimation",function(e){t.cancelWins()}),this._gameChannel.subscribe("enterMode",function(e){null!=t._model.get_backgrounds()&&t._reels.setBackground(i.orientation,t._casinoModel.gameMode)}),this._casinoChannel.subscribe("gameRoundCompleted",function(e){t._slotModel.idle=!0,t.playIdleSequence()}),!1);i.resizeSignal.connect(function(e){s||t.when(function(){return!t._slotModel.revealing}).handle(function(){t._model.positionGrid(),null!=t._model.get_backgrounds()&&t._reels.setBackground(i.orientation,t._casinoModel.gameMode),s=!1}),s=!0})},show:function(){this._reels.object.set_visible(!0)},reveal:function(){var e=this,t=(this.turbo=this._casinoModel.turbospin,this.superTurbo=this._casinoModel.superTurbospin,this.cancelWins(),this._slotModel.revealing=!0,this._model.quickStop||this.get_superTurbo());this._model.quickStop=t,this._model.revealStarting=!0,this._revealStart=0,this._model.stopped.h={},this._model.presentedSymbolAttentions.clear(),this._model.presentedScatterTriggers.h=Object.create(null),this._model.activePresentations.length=0,this._model.activeAttentions.length=0;var n=null!=(t=this._model.stickiedGrid)?t.mapToGridByMask(this._model.stickiedMask,function(e,t){return e}):null,t=null!=n?n:new Hl(this._model.get_width(),this._model.get_height()),n=(this._model.settledSymbols=t,this._reelRotation=0,this._slotModel.idle=!1,this._idleWins),t=(null!=n&&0<n.length&&null!=this._model.idleLoopInterval&&!this._casinoModel.autoplay&&(this.triggerIdleExit(this._idleWins),this.currentEndRevealArgs=null,this.currentEndReactArgs=null),this._idleWins=[],this._reels.startReveal());return t.handle(function(){e._model.revealStarting=!1}),t},react:function(e){return this._idleWins=[],this._reels.startReact(e)},endReveal:function(e,t){var n,i,s=this,a=new qy,l=(this.currentEndRevealArgs=e,(this.currentEndReactArgs=null)!=e.stops&&(l=this._model.get_reelSet(),n=e.stops,i=this._model.get_height(),e.result=Of.gridFromStops(l,n,i)),e.result);return this._model.eventGrid=null!=l?l:this._model.currentGrid,this._delayed.push({delay:this._model.quickStop&&!this._model.revealStarting?0:Math.max(this._model.revealDelay-this._revealStart,0),func:function(){s._reels.endReveal(e).handle(function(){s._slotModel.revealing=!1,s._model.quickStop=!1,a.trigger(null)}),null!=t&&t()}}),a},clearStickiedSymbols:function(e,t){return this._reels.removeStickies(null!=e?e:this._model.stickiedMask,t=null==t?!1:t,null==e)},setGrid:function(e,t,n,i,s){null==s&&(s=!0),null==i&&(i=!0),null==n&&(n=!1),null==t&&(t=!1);function a(){return null==e&&(e=l._model.visibleSymbols.mapToGrid(function(e,t){return $f.getId(e)})),l._model.setGrid(e,!0,i,n,s),l.after(0).handle(function(){l._setGridTrigger.trigger(null),l._setGridTrigger=new qy})}var l=this;this._setGridTrigger=null!=this._setGridTrigger?this._setGridTrigger:new qy;return 0<this._model.activeAttentions.length&&!t&&null!=e?this.when(function(){return 0==l._model.activeAttentions.length}).handle(a):a(),this._setGridTrigger},showWins:function(n){var i=this;if(null==n.wins||0==n.wins.length)return rt.NOISE;this._idleWins=this._idleWins.concat(n.wins),this._cancelledWins=!1,n.resetWinlines&&this._reels.resetWinLines(),this._slotModel.presentingWins=n.wins,this._model.sortGrid();for(var e=[Hd.GridInit,Hd.Init,Hd.Wins(n.execution),Hd.Exit,Hd.GridExit],t=new Array(e.length),s=0,a=e.length;s<a;){var l=s++,r=e[l];t[l]=4==r._hx_index?{phase:r,onWin:n.onWin}:{phase:r,onWin:null}}for(var s=[],a=0,o=e.length;a<o;)++a,s.push(function(t){var e=t.shift();return rt.map(i.sequenceWins(n.wins,4==e._hx_index?n.onWin:null,e),function(e){return t})});return s.push(function(e){return i._slotModel.presentingWins=null,i._model.sortGrid(),new Zy(new Yy(e))}),rt.noise(Rt(s,e))},presentSpecial:function(e,t,n,i){if(this._cancelledWins=!1,null==t){for(var s=this._model.get_width(),a=this._model.get_height(),l=s*a,r=[],o=0;o<l;)++o,r.push(!0);s=new Hl(s,a,r)}else s=t;for(var u="",h=s.mData,r=0,o=s.mW*s.mH;r<o;){var c=r++,_=h[c];u+=_?"1":"0",h[c]=_}return this.sequenceWins(null==i?[new wa(null,u,null,null,"0","0",null,null,null,null,null,null,null,null,null)]:i,n,Hd.Special(e))},playIdleSequence:function(){this._casinoModel.featureMode||this._casinoModel.autoplay||this.triggerIdle(this._idleWins)},triggerIdle:function(n){var i,s=this;!this._casinoModel.autoplay&&null!=n&&0<n.length&&(i=this.owner.getFromParentsByName(uu.BASE_NAME,uu),(this._slotModel.idle?this.sequenceWins(n,null,Hd.IdleGridInit):rt.NOISE).handle(function(){(s._slotModel.idle?s.sequenceWins(n,null,Hd.IdleInit):rt.NOISE).handle(function(){s._slotModel.presentingWins=n;var e=s.getBeatSyncDivision(),t=null!=e?i.getDuration(e):s._model.idleLoopInterval;(s._slotModel.idle?s.sequenceWins(n,null,Hd.Idle,t):rt.NOISE).handle(function(){null==t&&(s.triggerIdleExit(n),s._model.sortGrid())})})}))},triggerIdleExit:function(e){var t=this;this.sequenceWins(e,null,Hd.IdleExit).handle(function(){t.sequenceWins(e,null,Hd.IdleGridExit).handle(function(){t._slotModel.presentingWins=null})})},sequenceWins:function(e,h,c,i){var _=this;if(c=this._currPhase=null==c?Hd.Wins(W_.Serial()):c,!this._reels.hasPhase(c))return this.after(0);if(!(0<e.length||null!=c&&12==c._hx_index))return rt.NOISE;var o=new hc(!1),d=[];switch(this._sequencers.push(o),c._hx_index){case 0:case 1:case 2:case 6:case 7:case 11:case 13:e=[e[0]]}var p,s,t=null!=c&&4==c._hx_index&&2==c.execution._hx_index;if(p=null!=c&&4==c._hx_index&&2==(w=c.execution)._hx_index&&null!=(y=w.delayEndPresentations)&&y,null==c)s=null;else if(4==c._hx_index)switch((w=c.execution)._hx_index){case 0:s=w.delay;break;case 1:s=null;break;case 2:s=w.delay}else s=null;var m,g=!1,u=this._gameChannel.subscribe(this._model.messagePrefix+"startReels",function(e){g=!0});if(il.each(e,function(t){var e,n=bA.parseString(null==t.winAmount?"null":""+t.winAmount),i=wA.divMod(n,new yA(0,100)),s=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(i.modulus)),a=parseFloat((null==i.quotient?"null":wA.toString(i.quotient))+"."+s),i=wA.divMod(_._casinoModel.betAmount,new yA(0,100)),s=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(i.modulus)),i=parseFloat((null==i.quotient?"null":wA.toString(i.quotient))+"."+s);t.winFactor=a/i,t.tier=be.findIndex(_._model.tiers,function(e){return e.val>=t.winFactor}),t.tier=-1==t.tier?_._model.tiers.length-1:t.tier,null!=c&&4==c._hx_index&&(i=(a=(s=_._casinoModel).currentWin).high+n.high|0,e=a.low+n.low|0,xA.ucompare(e,a.low)<0&&(++i,i|=0),s.currentWin=new yA(i,e),i=(a=(s=_._casinoModel).featureRoundCurrentWin).high+n.high|0,xA.ucompare(e=a.low+n.low|0,a.low)<0&&(++i,i|=0),s.featureRoundCurrentWin=new yA(i,e))}),null==c)m=null;else if(4==c._hx_index)switch((w=c.execution)._hx_index){case 0:case 1:case 2:m=w.groupConfig}else m=null;for(var n=null!=m?m.groupMultipliers:null,a=null!=n&&n,l=null!=m&&1<e.length?il.reduce(il.zip(e.slice(0,e.length-1),e.slice(1)),function(e,t){return t._0.symbol==t._1.symbol&&(null==t._0.winMultipliers&&null==t._1.winMultipliers||a)?e[e.length-1].push(t._1):e.push([t._1]),e},[[e[0]]]):il.splitBy(e,1),f=this.owner.getFromParentsByName(uu.BASE_NAME,uu),r=function(t,e,n){var i,s,a,l;if(null==n&&(n=!1),null==e&&(e=OA.None),null==c)i=_._cancelledWins||g?new Zy(new Yy(null)):rt.map(_.showWin(t,c,e,p),function(e){return{win:t,presentations:e}});else switch(c._hx_index){case 10:case 11:i=rt.map(_.showWin(t,c,e),function(e){return{win:t,presentations:e}});break;default:i=_._cancelledWins||g?new Zy(new Yy(null)):rt.map(_.showWin(t,c,e,p),function(e){return{win:t,presentations:e}})}switch(s=null!=h?((a=rt.map(h(t),function(e){return null})).eager(),a):new Zy(new Yy(null)),d.push(i),d.push(s),c._hx_index){case 0:case 1:case 3:case 13:l=new Zy(new Yy(!0));break;case 4:var r=_.getBeatSyncDivision(),o=null==r?new Zy(new Yy(null)):f.nextBeat(r),u=new qy;o.handle(function(){_._gameChannel.publish(_._model.messagePrefix+"lineWin",{winFactor:t.winFactor,totalWinFactor:Math.max(_._casinoModel.winFactor-_._casinoModel.get_winFactorTierOffset(),0),reducedLevel:0<_._casinoModel.get_winFactorTierOffset(),tier:t.tier,turboMode:_.get_turboMode(),duration:0});var e=null!=m?m.delay:null;null!=r?f.nextBeat(r).handle(function(){u.trigger(!0)}):n||null==e?rt.and(s,i).handle(function(e){u.trigger(!0)}):(0<e?_.after(e/1e3):rt.NOISE).handle(function(e){u.trigger(!0)})}),l=u;break;case 9:l=rt.map(rt.and(s,i),function(e){return!0});break;case 2:case 5:case 6:case 7:case 8:case 10:case 11:l=rt.merge(s,i,function(e,t){return!(null==(t=null!=t?null!=(t=t.presentations)&&0<t.length:null)||!t||_._cancelledWins||g)});break;case 12:l=rt.merge(s,i,function(e,t){return!(null==(t=null!=t?null!=(t=t.presentations)&&0<t.length:null)||!t||_._cancelledWins||g)})}return l},A=null!=(n=null!=m?m.merge:null)&&n,x=new Array(l.length),w=0,y=l.length;w<y;)x[w++]=new hc(!1);for(var b=x,v=il.zip(l,b),x=new Array(v.length),w=0,y=v.length;w<y;){for(var C=w++,S=v[C],z=S._1,k=S._0,S=1<k.length,M=null!=il.find(k,function(e){return null!=e.winMultipliers}),I=A&&(S?!M||a:a&&M),Q=I||t?OA.Some(!1):OA.None,B=new Array(k.length),T=0,V=k.length;T<V;){var E=T++,F=k[E],D=F==k[k.length-1];B[E]={win:F,isLast:D,summaryBehavior:Q,runSummary:I&&D&&!t,groupSequencer:z,winGroup:k}}x[C]=B}var R,P,n=Array.prototype.concat.apply([],x),l=(il.each(n,function(n){var i=n.groupSequencer;i.add(function(){var e,t=r(n.win,n.summaryBehavior,n.isLast);e=n.runSummary?(e=_.summarizeWins(n.winGroup,!1,!0,n.win.symbol),r(e,OA.Some(!0),!0)):new Zy(new Yy(!0)),rt.map(rt.and(t,e),function(e){return e.a}).handle(function(e){e?i.next():i.stop()})})}),il.each(b,function(n){o.add(function(){var e=n.run(!1,null,!1,null==i),t=_.getBeatSyncDivision();(null!=t?rt.map(f.nextBeat(t),function(e){return null}):null==s?e:0<s?_.after(s/1e3):rt.NOISE).handle(Cn(o,o.next))})}),t&&(R=null!=c&&4==c._hx_index&&2==(w=c.execution)._hx_index?null!=(y=w.win)?y:this.summarizeWins(e,w.center,w.allowMultipliers):null,o.add(function(){r(R,OA.Some(!0),!0).handle(function(e){e?o.next():o.stop()})})),null!=i&&o.add(function(){var e,t=_.getBeatSyncDivision();if(null==t)e=_.after(i);else{var n=f;if(4<t)throw new tl("Cannot double beat divisions beyond a bar");e=rt.map(n.nextBeat(2<=t?4:1<=t?2:.5<=t?1:.25<=t?.5:.25),function(e){return null})}e.handle(Cn(o,o.next))}),this.getBeatSyncDivision()),n=null!=l?(P=new qy,f.nextBeat(l).handle(function(){o.run(null!=i,null,!1).handle(function(){P.trigger(null)})}),P):rt.map(rt.and(o.run(null!=i,null,!1),rt.inParallel(d)),function(e){return null});return n.handle(function(){rt.inParallel(d).handle(function(e){var t;if(e=il.filterNull(e),p){for(var n=[],i=0;i<e.length;)for(var s=e[i],a=(++i,s.win),l=s.presentations,r=0;r<l.length;)n.push(l[r++].end(a));t=rt.noise(rt.inParallel(il.filterNull(n)))}else t=rt.NOISE;t.handle(function(){_._gameChannel.unsubscribe(u),Jn.remove(_._sequencers,o),o.destroy(),il.each(b,function(e){e.destroy()})})})}),n},summarizeWins:function(e,t,n,i){null==n&&(n=!1),null==t&&(t=!1);for(var g=this,s=(d=this._model.get_width())*(p=this._model.get_height()),a=[],l=0;l<s;)++l,a.push(t);for(var n=new Hl(d,p,a),r="",o=n.mData,a=0,l=n.mW*n.mH;a<l;){var u=o[c=a++];r+=u?"1":"0",o[c]=u}for(var n=new wa(i,r,null,"0","0","0",0,null,null,null,null,null,null,!0,null),h=new Array(e.length),a=0,l=e.length;a<l;){for(var c=a++,_=X.copy(e[c]),r=_.mask,d=g._model.get_width(),p=g._model.get_height(),m=r.split(""),f=new Array(m.length),A=0,x=m.length;A<x;){var w=A++;f[w]="1"==m[w]}h[c]={mask:new Hl(d,p,f),winAmount:bA.parseString(_.winAmount),count:el.parseInt(_.count),winFactor:_.winFactor}}return il.reduce(h,function(t,e){for(var n=t.mask,i=g._model.get_width(),s=g._model.get_height(),a=n.split(""),l=new Array(a.length),r=0,o=a.length;r<o;)l[c=r++]="1"==a[c];for(var i=new Hl(i,s,l),u=e.mask,s=i.mapToGrid(function(e,t){return!!e||u.mData[t.y*u.mW+t.x]}),n="",h=s.mData,r=0,o=s.mW*s.mH;r<o;){var c,_=h[c=r++];n+=_?"1":"0",h[c]=_}t.mask=n;var i=bA.parseString(t.winAmount),s=e.winAmount,d=s.high+i.high|0,p=s.low+i.low|0,m=(xA.ucompare(p,s.low)<0&&(++d,d|=0),new yA(d,p));return i=null==m?"null":(s=e.winAmount,d=s.high+i.high|0,xA.ucompare(p=s.low+i.low|0,s.low)<0&&(++d,d|=0),m=new yA(d,p),wA.toString(m)),t.winAmount=i,t.count=el.string(el.parseInt(t.count)+e.count),t.winFactor+=e.winFactor,t.tier=be.findIndex(g._model.tiers,function(e){return e.val>=t.winFactor}),t.tier=-1==t.tier?g._model.tiers.length-1:t.tier,t},n)},showRemoves:function(e){e=e.mask,e=null==e?null:this._reels.showRemoves(e);return null!=e?e:rt.NOISE},showStickies:function(e){var t=e.mask;if(null==t)u=null;else{for(var n=this._model.get_width(),i=this._model.get_height(),s=t.split(""),a=new Array(s.length),l=0,r=s.length;l<r;){var o=l++;a[o]="1"==s[o]}var t=new Hl(n,i,a),u=this._reels.showStickies(t,e.keepSymbolState,e.followReact)}return null!=u?u:rt.NOISE},getStickies:function(){return this._model.stickiedGrid},cancelWins:function(){var e,t=this,n=(this._cancelledWins=!0,il.any(this._model.activePresentations,function(e){e=null!=e?e.phase:null;if(null==e)return!1;switch(e._hx_index){case 7:case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}}));if(il.each(this._sequencers,function(e){e.cancel()}),n||this.get_superTurbo())e=rt.NOISE;else{for(var i=this._model.activePresentations,s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=i[r].completeTrigger}e=rt.noise(rt.inParallel(s))}return e.handle(function(){t._cancelledWins&&t._reels.endWins()}),e},quickStop:function(){var e=null!=(t=this._revealActions)&&1==t._hx_index;if(null!=e&&!e){this._model.quickStop=!0;var t=this._revealActions;if(null!=t&&0===t._hx_index)for(var n=t.actions,t=0,i=this._model.get_width();t<i;)n.forceStopReel(t++)}},replaceSym:function(e,t,n,i,s){null==s&&(s=!1),null==i&&(i=!0),null==n&&(n=!1);var a,l,r,o,u,h=this._model.createSymbol(e);return null==h?null:(l=(a=n?this._model.stickiedGrid:this._model.visibleSymbols).mData[t.y*a.mW+t.x],r=$f.getSymbol(l),a.mData[t.y*a.mW+t.x]=h,o=$f.getSymbol(h),n||0<=(n=this._model.visibleSymbols.mH>this._model.currentGrid.mH?t.y-1:t.y)&&n<=this._model.currentGrid.mH-1&&((u=this._model.currentGrid).mData[n*u.mW+t.x]=e,this._model.refreshReelData()),i&&(o.object.setPosition(r.object.get_x(),r.object.get_y(),this._model.getSymbolZ(h,t,a)),o.restingZPosition=o.object.get_z()),s&&r.moveAttachments(o),this._model.removeSymbol(l),h)},getPositionGrid:function(){return this._model.currentGrid.position(this._model.get_symSize().x,this._model.get_symSize().y)},setRevealMode:function(e){this._model.setRevealMode(e)},isLargeWin:function(e){var t,n,i;return null!=e&&(t=this._model.tiers[this._model.countupTierIndex].val+this._casinoModel.get_winFactorTierOffset(),e=wA.divMod(e,new yA(0,100)),i=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(e.modulus)),n=parseFloat((null==e.quotient?"null":wA.toString(e.quotient))+"."+i),e=wA.divMod(this._casinoModel.betAmount,new yA(0,100)),i=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(e.modulus)),t<=n/parseFloat((null==e.quotient?"null":wA.toString(e.quotient))+"."+i))},getSymbolName:function(e){return this._model.getSymbolName(e)},update:function(e){d.prototype.update.call(this,e),this._revealStart+=e;for(var t=0,n=this._sequencers;t<n.length;)n[t++].update(e);for(var i=this._delayed,t=[],n=0;n<i.length;){var s=i[n];++n,s.delay-=e,!(s.delay<=0&&(s.func(),1))&&t.push(s)}this._delayed=t},showWin:function(e,t,n,i){return null==n&&(n=OA.None),this._reels.showWin(e,t,n,i=null==i?!1:i)},createSymbolPassedListener:function(t,e,n,i,s,a){var l,r=this,o=e.presentationGrid.getCol(i.x,[]),u=n.getCol(i.x,[]),h=e.triggerBetweenCells?.5*this._model.get_symSize().y:0;switch(a){case 1:l=function(e,t,n){return t>=n.y-h};break;case 4:case 6:throw new tl("Not implemented");case 9:l=function(e,t,n){return t<=n.y+h}}for(var c=[],_=0,d=o.length;_<d;){var p,m=_++,g=o[m];switch(a){case 1:p=i.y<=m;break;case 4:case 6:throw new tl("Not implemented");case 9:p=i.y>=m}c.push(!p||null==g?null:{groupId:g,position:u[m]})}for(_=[],d=0;d<c.length;){var f,A=c[d];++d,null!=A&&(f=s.object,!l(f.object.get_x(),f.object.get_y(),A.position))&&_.push(A)}var x,w,y=_;return null==y||0==y.length?null:(x=s.object,(w=x.object).updateComplete.listen(function(){var e=y[0];null!=e&&l(w.get_x(),w.get_y(),e.position)&&(y.shift(),r._gameChannel.publish("symbolPassed",{id:e.groupId._hx_index,symbolId:x.id,turboMode:r.get_turboMode(),row:i.y,column:i.x}),r._reels.showPresentations({result:t,cell:i,groupId:e.groupId}))}))},getBeatSyncDivision:function(){if(null!=this._slotModel.beatSyncOverride)return this._slotModel.beatSyncOverride;if(this._slotModel.idle)return null!=(e=this._model.beatSync)?e.idle:null;var e,t=this.get_turboMode();if(null==t)return null!=(e=this._model.beatSync)?e.regular:null;switch(t){case"superTurbo":return null!=(e=this._model.beatSync)?e.superturbo:null;case"turbo":return null!=(e=this._model.beatSync)?e.turbo:null;default:return null!=(e=this._model.beatSync)?e.regular:null}},get_currentGrid:function(){return this._model.currentGrid},get_revealActions:function(){var e=this._revealActions;if(null==e)return null;switch(e._hx_index){case 0:case 1:return e.actions;default:return null}},get_reactActions:function(){var e,t=this._reactActions;switch(t._hx_index){case 0:case 1:case 2:e=t.actions}return e instanceof vd?e:null},get_turbo:function(){var e=this.turbo;return null!=e?e:this._casinoModel.turbospin},get_superTurbo:function(){var e=this.superTurbo;return null!=e?e:this._casinoModel.superTurbospin},get_turboMode:function(){return this.get_superTurbo()?"superTurbo":this.get_turbo()?"turbo":null},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelActorComponent"},__class__:O_,__properties__:e(d.prototype.__properties__,{get_turboMode:"get_turboMode",get_superTurbo:"get_superTurbo",get_turbo:"get_turbo",get_currentGrid:"get_currentGrid",get_reactActions:"get_reactActions",get_revealActions:"get_revealActions"})}),fe["hacksaw.slotcommon.components.actor.WinPresentationExecution"]={__ename__:!0,__constructs__:null,Parallel:((R=function(e,t){return{_hx_index:0,delay:e,groupConfig:t,__enum__:"hacksaw.slotcommon.components.actor.WinPresentationExecution",toString:o}})._hx_name="Parallel",R.__params__=["delay","groupConfig"],R),Serial:((R=function(e){return{_hx_index:1,groupConfig:e,__enum__:"hacksaw.slotcommon.components.actor.WinPresentationExecution",toString:o}})._hx_name="Serial",R.__params__=["groupConfig"],R),Summarized:((R=function(e,t,n,i,s,a){return{_hx_index:2,delay:e,win:t,center:n,allowMultipliers:i,delayEndPresentations:s,groupConfig:a,__enum__:"hacksaw.slotcommon.components.actor.WinPresentationExecution",toString:o}})._hx_name="Summarized",R.__params__=["delay","win","center","allowMultipliers","delayEndPresentations","groupConfig"],R)}),N_=(W_.__constructs__=[W_.Parallel,W_.Serial,W_.Summarized],W_.__empty_constructs__=[],(i["hacksaw.slotcommon.components.actor.ExecutionGroupSettings"]=Qc).__name__="hacksaw.slotcommon.components.actor.ExecutionGroupSettings",Qc.prototype={__class__:Qc},function(e,t){this.messagePrefix="",this.fastTurboAuto=!0,null!=e&&(this.fastTurboAuto=e),null!=t&&(this.messagePrefix=t)}),G_=((i["hacksaw.slotcommon.components.actor.SlotActorConfig"]=N_).__name__="hacksaw.slotcommon.components.actor.SlotActorConfig",N_.prototype={__class__:N_},function(e,t,n){this.passThroughConfig=null,this.stickiesFollow=!1,(this.mask=null)!=e&&(this.mask=e),null!=t&&(this.stickiesFollow=t),null!=n&&(this.passThroughConfig=n)}),U_=((i["hacksaw.slotcommon.components.actor.ReactArgs"]=G_).__name__="hacksaw.slotcommon.components.actor.ReactArgs",G_.prototype={__class__:G_},function(e,t){this.passThroughConfig=null,this.result=e,null!=t&&(this.passThroughConfig=t)}),L_=((i["hacksaw.slotcommon.components.actor.EndReactArgs"]=U_).__name__="hacksaw.slotcommon.components.actor.EndReactArgs",U_.prototype={__class__:U_},function(e,t,n,i){this.resetWinlines=!0,this.execution=W_.Serial(),this.onWin=null,this.wins=e,null!=t&&(this.onWin=t),null!=n&&(this.execution=n),null!=i&&(this.resetWinlines=i)}),j_=((i["hacksaw.slotcommon.components.actor.ShowWinsArgs"]=L_).__name__="hacksaw.slotcommon.components.actor.ShowWinsArgs",L_.prototype={__class__:L_},function(e){this.mask=e}),H_=((i["hacksaw.slotcommon.components.actor.RemoveWinsArgs"]=j_).__name__="hacksaw.slotcommon.components.actor.RemoveWinsArgs",j_.prototype={__class__:j_},function(e,t,n){this.followReact=!1,this.keepSymbolState=!0,this.mask=e,null!=t&&(this.keepSymbolState=t),null!=n&&(this.followReact=n)}),Y_=((i["hacksaw.slotcommon.components.actor.StickiesArgs"]=H_).__name__="hacksaw.slotcommon.components.actor.StickiesArgs",H_.prototype={__class__:H_},function(e,t,n){this.passThroughConfig=null,this.stops=null,this.result=e,null!=t&&(this.stops=t),null!=n&&(this.passThroughConfig=n)}),Z_=((i["hacksaw.slotcommon.components.actor.EndRevealArgs"]=Y_).__name__="hacksaw.slotcommon.components.actor.EndRevealArgs",Y_.prototype={__class__:Y_},(i["hacksaw.slotcommon.components.actor.SymbolPassThroughArgs"]=Vc).__name__="hacksaw.slotcommon.components.actor.SymbolPassThroughArgs",Vc.prototype={__class__:Vc},(i["hacksaw.slotcommon.components.actor.ReelReactBase"]=Oc).__name__="hacksaw.slotcommon.components.actor.ReelReactBase",Oc.__super__=d,Oc.prototype=e(d.prototype,{init:function(){this._model=this.owner.getFromParentsByName(Md.BASE_NAME,Md),this._renderer=this.owner.getFromParentsByName(q_.BASE_NAME,q_),this._actor=this.owner.getFromParentsByName(O_.BASE_NAME,O_),this._gameChannel=hacksawCasino.PubSub.getChannel("game"),d.prototype.init.call(this)},setOngoingBehavior:function(e){var t,n=this._model.behaviorModel.react;if(null==n)throw tl.thrown("Needs react model");switch(n._hx_index){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=n.model}t.ongoingBehavior=e},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelReactBase"},__class__:Oc}),function(){Oc.call(this)}),X_=((i["hacksaw.slotcommon.components.actor.ReelGridCollapseReact"]=Z_).__name__="hacksaw.slotcommon.components.actor.ReelGridCollapseReact",Z_.__super__=Oc,Z_.prototype=e(Oc.prototype,{init:function(){Oc.prototype.init.call(this),this._casinoModel=this.owner.getFromParentsByName(_u.BASE_NAME,_u),this._reelActor=this.owner.getFromParentsByName(O_.BASE_NAME,O_);var e=this._model.behaviorModel.react;if(null==e)throw tl.thrown("ReelGridCollapseReact needs CollapseModel");if(3!=e._hx_index)throw tl.thrown("ReelGridCollapseReact needs CollapseModel");e=e.model,this._collapseModel=e},start:function(e){this._actions=this._actor.get_reactActions(),this._collapseModel.refreshConfig(),this.setOngoingBehavior(!0);for(var t=e.mask,n=this._model.get_width(),i=this._model.get_height(),s=t.split(""),a=new Array(s.length),l=0,r=s.length;l<r;)a[S=l++]="1"==s[S];for(var o=new Hl(n,i,a),u=this._model.currentGrid,h=this._model.reactDirection,c=(null==h&&(h=9),new Hl(u.mW,u.mH)),_=c.mData,d=c.mW,l=0,r=c.mW*c.mH;l<r;){var p,m,g=(S=l++)%d,f=S/d|0;switch(h){case 4:case 6:p=o.getRow(f,[]);break;case 1:case 9:p=o.getCol(g,[])}switch(h){case 1:case 9:break;case 4:case 6:throw new tl("Not implemented")}switch(h){case 1:for(var s=p.slice(0,f),A=[],x=0;x<s.length;){var w=s[x];++x,w&&A.push(w)}m=-A.length;break;case 4:case 6:throw new tl("Not implemented");case 9:for(var y=p.slice(f),b=[],v=0;v<y.length;){var C=y[v];++v,C&&b.push(C)}m=b.length}_[S]=o.mData[f*o.mW+g]?null:m}for((a=new Hl(u.mW,u.mH)).setAll(null),_=a.mData,d=a.mW,l=0,r=a.mW*a.mH;l<r;){var S,k,M,I,g=(S=l++)%d,f=S/d|0;switch(h){case 1:k=c.collapseCol(g,null,!0);break;case 4:k=c.collapseRow(f,null,!0);break;case 6:k=c.collapseRow(f,null);break;case 9:k=c.collapseCol(g,null)}switch(h){case 4:case 6:throw new tl("Not implemented");case 1:case 9:M=k[f]}switch(h){case 4:case 6:throw new tl("Not implemented")}switch(h){case 4:case 6:throw new tl("Not implemented");case 1:case 9:I=f-M}_[S]=null==M?null:u.mData[I*u.mW+g]}return this.removeSymbols(o,new Wf(c,a),e.stickiesFollow,e.passThroughConfig)},end:function(e){var t=this,e=this.dropGrid(e.result,e.passThroughConfig);return e.handle(function(){t.setOngoingBehavior(!1)}),e},update:function(e){Oc.prototype.update.call(this,e);var t=this._actions;null!=t&&t.update(e)},removeSymbols:function(e,v,t,n){null==t&&(t=!1);var C=this;if(null!=this._model.stickiedGrid){for(var i=this._model.stickiedGrid.toArray(),s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=$f.getId(i[r])}var o=new Hl(this._model.stickiedGrid.mW,this._model.stickiedGrid.mH,s),u=new Hl(o.mW,o.mH);o.eachCellsByMask(this._model.stickiedMask,function(e,t){var n=v.movement,t=new Bw(t.x,t.y+n.mData[t.y*n.mW+t.x]);(n=u).mData[t.y*n.mW+t.x]=e}),t&&this._actor.clearStickiedSymbols(null,!0)}for(var h=new qy,c=(this._currentCollapse=v,this._collapseModel.config),_=c.symbolDelay,d=c.reelDelay,p=c.stopDuration/this._model.get_height(),m={},S={},o=this._model.visibleSymbols,k=v.movement.mapToGrid(function(e,t){return 0!=e}),g=v.result.position(this._model.get_symSize().x,this._model.get_symSize().y),t=o.mW,o=o.mH,a=[],l=0,f=t*o;l<f;)l++,a.push(!1);for(var M=new Hl(t,o,a),A=e.mapToGrid(function(e,t){return!e}),t=v.movement.mapToGrid(function(e,t){return 0==e}).mapToGrid(function(e,t){return!!e&&A.mData[t.y*A.mW+t.x]}),x=(this._model.settledSymbols=this._model.settledSymbols.mapToGridByMask(t,function(e,t){return e}),il.filterNull(v.result.mapCells(function(e,t){var n,i,s;switch(C._model.reactDirection){case 1:case 4:n=t.y;break;case 6:n=C._model.get_width()-t.y;break;case 9:n=C._model.get_height()-t.y}switch(C._model.reactDirection){case 1:i=C._model.get_height()-t.x;break;case 6:i=C._model.get_width()-t.x;break;case 4:case 9:i=t.x}switch(C._model.reactDirection){case 1:case 9:s=i*d+n*_;break;case 4:case 6:throw new tl("Not implemented")}var a=v.movement,l=a.mData[t.y*a.mW+t.x];if(null==l||0==l)return null;var r,a=p*((l<0?-l:l)+1);switch(C._model.reactDirection){case 4:case 6:r=st.fromBacking(new it(l*C._model.get_symSize().x,null,null,null));break;case 1:case 9:r=st.fromBacking(new it(null,-l*C._model.get_symSize().y,null,null))}return{cell:t,travel:l,symbolIndex:n,reelIndex:i,delay:s,duration:a,tweenTo:r}}))),a=(il.each(x,function(e){m.hasOwnProperty(e.cell.x)||(m[e.cell.x]=!0,C._gameChannel.publish(C._model.messagePrefix+"reelCollapseStart",{index:e.cell.x,delay:e.delay}))}),[]),l=0;l<x.length;){var w,y,b,I,B,T=[x[l]],i=(++l,this._model.visibleSymbols),E=T[0].cell,E=[i.mData[E.y*i.mW+E.x]];null!=E[0]&&(this._model.activateSymbolPresentation(E[0],!1),w=[E[0].object],y=[T[0].cell.y+T[0].travel],b=[new Bw(T[0].cell.x,y[0])],I=null==n?null:C._actor.createSymbolPassedListener(v.result,n,g,b[0],E[0],C._model.reactDirection),(B=tt.translateTo(w[0].object,new nt(T[0].tweenTo,null,T[0].delay,T[0].duration,null,c.addCurve,!0,null,null,null,null))).handle(((f,A,x,w,y,b)=>function(){null!=f[0]&&f[0].cancel();var e=M,t=b[0].cell;e.mData[t.y*e.mW+t.x]||(e=C._model.visibleSymbols,t=b[0].cell,e.mData[t.y*e.mW+t.x]=null),(e=M).mData[A[0].y*e.mW+A[0].x]=!0,(e=C._model.visibleSymbols).mData[A[0].y*e.mW+A[0].x]=y[0];(e=C._model.settledSymbols).mData[A[0].y*e.mW+A[0].x]=y[0],C._renderer.showPresentations({result:v.result,cell:A[0],collapse:!0});for(var t=C._gameChannel,e=C._model.messagePrefix+"symCollapseEnd",n=b[0].cell.x,i=x[0],s=b[0].travel,a=w[0].id,l="",r=k.mData,o=0,u=k.mW*k.mH;o<u;)l+=(g=r[m=o++])?"1":"0",r[m]=g;var h=v.result,c=h.mW+40,_=String.fromCodePoint(c),c=h.mH+40,d=_+String.fromCodePoint(c),p=h.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))});if(t.publish(e,{reelIndex:n,symIndex:i,travel:s,sym:a,collapsed:l,result:il.reduce(p,function(e,t){return e+=t},d)}),!S.hasOwnProperty(b[0].cell.x)){S[b[0].cell.x]=!0;for(var m,g,t=C._gameChannel,e=C._model.messagePrefix+"reelCollapseEnd",n=b[0].cell.x,a=w[0].id,s=b[0].travel,l="",r=k.mData,o=0,u=k.mW*k.mH;o<u;)l+=(g=r[m=o++])?"1":"0",r[m]=g;h=v.result,c=h.mW+40,_=String.fromCodePoint(c),c=h.mH+40,d=_+String.fromCodePoint(c),p=h.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))});t.publish(e,{index:n,bottomSym:a,travel:s,collapsed:l,result:il.reduce(p,function(e,t){return e+=t},d)})}C._model.deactivateSymbolPresentation(y[0],!1)})([I],b,y,w,E,T)),a.push(B))}return rt.inParallel(a).handle(function(){C._actor.setGrid().handle(function(){h.trigger(null)})}),h},dropGrid:function(C,x){for(var S=this,e=this._currentCollapse.result,t=this._model.reactDirection,n=(null==t&&(t=9),new Hl(e.mW,e.mH)),z=n.mData,i=n.mW,s=0,a=n.mW*n.mH;s<a;){var l,r=(m=s++)/i|0;switch(t){case 4:case 6:l=e.getCol(r,[]);break;case 1:case 9:l=e.getCol(m%i,[])}var o,u=il.count_Null_Int(l).h.null;switch(t){case 1:var h=null!=(A=il.count_Null_Int(l.slice(0,1+r)).h.null)?A:0;break;case 4:case 6:throw new tl("Not implemented");case 9:var c=il.count_Null_Int(l.slice(r)).h.null;h=null!=c?c:0}switch(t){case 1:o=!0;break;case 4:case 6:throw new tl("Not implemented");case 9:o=!1}z[m]=0!=h?o?-u:u:0}for(var k=n,w=C.position(this._model.get_symSize().x,this._model.get_symSize().y),y=this._collapseModel.config,_=y.symbolDelay,Q=y.reelDelay,b=y.collapseTimeRandom,M=y.dropStart,I={},B={},V=y.stopDuration/k.mH,s=[],a=0,d=k.mW;a<d;)s.push(a++);for(var p=s,O=new Array(p.length),s=0,a=p.length;s<a;){for(var m,g=p[m=s++],f=C.getCol(g,[]),W=k.getCol(g,[]),N=[],d=0,G=f.length;d<G;){var A,v=d++,T=f[v],E=new Bw(g,v),F=S._model.visibleSymbols,F=$f.getId(F.mData[E.y*F.mW+E.x])!=T,D=F?(R=S._model.createSymbol(T),(D=$f.getSymbol(R)).object.set_visible(!1),D.set_stenciled(!0),R):null,R=w.mData[E.y*w.mW+E.x],U=W[v];switch(S._model.reactDirection){case 1:var P=null==b?1:b;A=_*v+Math.random()*P;break;case 4:case 6:throw new tl("Not implemented");case 9:P=null==b?1:b;A=_*(f.length-v)+Math.random()*P}N.push({cell:E,symId:T,pos:R,drop:U,index:v,delay:A,asset:D,newlyCreated:F})}O[m]={index:g,syms:N}}for(n=O,il.each(n,function(e){for(var t=[],n=0,i=e.syms;n<i.length;){var s=i[n];++n,s.newlyCreated&&t.push(s)}il.each(t,function(e){var t=S._model.visibleSymbols,n=e.cell;t.mData[n.y*t.mW+n.x]=e.asset})}),s=[],a=0,d=n.length;a<d;)a++,s.push(function(t){for(var v=t.reels.shift(),e=[],n=0,i=v.syms;n<i.length;){var s=i[n];++n,null!=s.drop&&0!=s.drop&&e.push(s)}var a=e;if(0<a.length){il.each(a,function(e){I.hasOwnProperty(e.cell.x)||(I[e.cell.x]=!0,S._gameChannel.publish(S._model.messagePrefix+"reelCollapseStart",{index:e.cell.x,delay:e.delay}))});for(var l=new Array(a.length),e=0,n=a.length;e<n;){var r,o=a[f=e++];switch(S._model.reactDirection){case 1:r=-1;break;case 4:case 6:throw new tl("Not implemented");case 9:r=1}var u=o.drop+r;switch(S._model.reactDirection){case 1:c=st.fromBacking(new it(o.pos.x,o.pos.y+u*S._model.get_symSize().y+M,null,null));break;case 4:c=st.fromBacking(new it(o.pos.x+u*S._model.get_symSize().x+M,o.pos.y,null,null));break;case 6:c=st.fromBacking(new it(o.pos.x-u*S._model.get_symSize().x-M,o.pos.y,null,null));break;case 9:c=st.fromBacking(new it(o.pos.x,o.pos.y+u*S._model.get_symSize().y+M,null,null))}l[f]={sym:o,dropH:u,from:c,to:st.fromBacking(new it(o.pos.x,o.pos.y,null,null)),duration:V*(Math.abs(o.drop)+2-r)}}for(var h=l,e=[],n=0;n<h.length;){var c,_,d,p=h[n];++n,c=null==(i=p.sym.asset)?new Zy(new Yy(!0)):((d=i.object).set_stenciled(!0),d.object.set_x(p.from.x),d.object.set_y(p.from.y),d.object.set_z(S._model.getSymbolZ(p.sym.asset,p.sym.cell,S._model.visibleSymbols)),d.restingZPosition=d.object.get_z(),d.object.set_visible(!0),_=null==x?null:S._actor.createSymbolPassedListener(C,x,w,p.sym.cell,p.sym.asset,S._model.reactDirection),(d=tt.translateTo(d.object,new nt(p.to,p.from,p.sym.delay,p.duration,null,y.addCurve,!1,V,null,null,null))).handle((e=>function(){null!=e[0]&&e[0].cancel()})([_])),d),e.push({tween:c,sym:p.sym})}for(var m=e,l=new Array(a.length),e=0,n=a.length;e<n;)l[f=e++]=a[f].cell;for(var g=il.reduce(l,function(e,t){var n=e.minX,i=null!=n?n:C.mW,s=t.x,a=null!=(n=e.minY)?n:C.mH,l=t.y,r=null!=(n=e.maxX)?n:0,o=t.x,e=null!=(n=e.maxY)?n:0,n=t.y;return{minX:s<i?s:i,minY:l<a?l:a,maxX:r<o?o:r,maxY:e<n?n:e}},{minX:null,minY:null,maxX:null,maxY:null}),g=new Ff(g.minX,g.minY,g.maxX,g.maxY,a.length,S._reelActor.get_turboMode(),"0",null),e=(S._gameChannel.publish("presentCollapse",g),[]),n=0,i=m;n<i.length;){s=i[n];++n,null!=s.sym.asset&&e.push(s)}il.each(e,function(b){S._model.activateSymbolPresentation(b.sym.asset,!1),b.tween.handle(function(){for(var e=new Hl(S._currentCollapse.movement.mW,S._currentCollapse.movement.mH),t=(r=e).mData,n=r.mW,i=0,s=r.mW*r.mH;i<s;){var a=(w=i++)%n,l=w/n|0;y=0!=(r=S._currentCollapse.movement).mData[l*r.mW+a]&&0<k.mData[l*k.mW+a],t[w]=y}for(var r=S._model.settledSymbols,o=b.sym.cell,o=(r.mData[o.y*r.mW+o.x]=b.sym.asset,il.findIndex(v.syms,function(e){return e.drop==b.sym.drop})),o=b.sym.drop-(b.sym.drop-(b.sym.index-o)),u=b.sym.asset.object,h=new Ef(b.sym.cell.x,b.sym.cell.y,""+b.sym.symId,S._reelActor.get_turboMode(),null),h=(S._gameChannel.publish("presentCollapseSymbol",h),S._renderer.showPresentations({result:C,cell:b.sym.cell,collapse:!0}),S._gameChannel),c=S._model.messagePrefix+"symCollapseEnd",_=b.sym.cell.x,d=b.sym.cell.y,p=u.id,m="",t=e.mData,i=0,s=e.mW*e.mH;i<s;)m+=(y=t[w=i++])?"1":"0",t[w]=y;var g=C.mW+40,f=String.fromCodePoint(g),g=C.mH+40,A=f+String.fromCodePoint(g),x=C.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))});if(h.publish(c,{reelIndex:_,symIndex:d,travel:o,sym:p,collapsed:m,result:il.reduce(x,function(e,t){return e+=t},A),gameMode:S._casinoModel.gameMode}),!B.hasOwnProperty(b.sym.cell.x)){B[b.sym.cell.x]=!0;for(var w,y,h=S._gameChannel,c=S._model.messagePrefix+"reelCollapseEnd",_=b.sym.cell.x,p=u.id,m="",t=e.mData,i=0,s=e.mW*e.mH;i<s;)m+=(y=t[w=i++])?"1":"0",t[w]=y;g=C.mW+40,f=String.fromCodePoint(g),g=C.mH+40,A=f+String.fromCodePoint(g),x=C.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))});h.publish(c,{index:_,bottomSym:p,travel:o,collapsed:m,result:il.reduce(x,function(e,t){return e+=t},A),gameMode:S._casinoModel.gameMode})}S._model.deactivateSymbolPresentation(b.sym.asset,!1),u.set_stenciled(S._model.get_stencil().keepSymbolsStenciled)})});for(var f,g=b,g=(null==b&&(g=1),S._actions.fillReel(v.index,Q+Math.random()*g,C)),l=new Array(m.length),e=0,n=m.length;e<n;)l[f=e++]=m[f].tween;var A=rt.map(rt.inParallel(l),function(e){return!0});return t.drops.push(A),rt.map(g,function(e){return{reels:t.reels,drops:t.drops}})}return new Zy(new Yy({reels:t.reels,drops:t.drops}))});var L=s;return L.push(function(e){var t=new qy;return rt.inParallel(e.drops).handle(function(){S._actor.setGrid(C).handle(function(){t.trigger(e)})}),t}),rt.noise(Rt(L,{reels:n,drops:[]}))},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelReactBase"},__class__:Z_}),(i["hacksaw.slotcommon.components.actor.ReelRevealBase"]=Wc).__name__="hacksaw.slotcommon.components.actor.ReelRevealBase",Wc.__super__=d,Wc.prototype=e(d.prototype,{init:function(){this._model=this.owner.getFromParentsByName(Md.BASE_NAME,Md),this._renderer=this.owner.getFromParentsByName(q_.BASE_NAME,q_),this._actor=this.owner.getFromParentsByName(O_.BASE_NAME,O_),this._gameChannel=hacksawCasino.PubSub.getChannel("game"),d.prototype.init.call(this)},setOngoingBehavior:function(e){var t,n=this._model.behaviorModel.reveal;if(null==n)throw tl.thrown("Needs reveal model");switch(n._hx_index){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t=n.model}t.ongoingBehavior=e},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelRevealBase"},__class__:Wc}),function(){Wc.call(this)}),q_=((i["hacksaw.slotcommon.components.actor.ReelGridDropReveal"]=X_).__name__="hacksaw.slotcommon.components.actor.ReelGridDropReveal",X_.__super__=Wc,X_.prototype=e(Wc.prototype,{init:function(){Wc.prototype.init.call(this);var e=this._model.behaviorModel.reveal;if(2!=e._hx_index)throw tl.thrown("ReelGridDropReveal needs DropModel");e=e.model,this._dropModel=e,this._actions=this._actor.get_revealActions()},start:function(){return this._dropModel.refreshConfig(),this.setOngoingBehavior(!0),this.removeGrid()},end:function(e){var t=this,e=this.replaceGrid(e.result,e.passThroughConfig);return e.handle(function(){t.setOngoingBehavior(!1)}),e},update:function(e){Wc.prototype.update.call(this,e);var t=this._actions;null!=t&&t.update(e)},removeGrid:function(){for(var r=this,e=this._dropModel.config,t=e.startDuration,n=e.symbolDelay,o=e.reelDelay,u=e.dropTimeRandom,h=e.removeCurve,i=(this._gameChannel.publish(this._model.messagePrefix+"dropGridRemove",{turbo:this._actor.get_turbo(),superTurbo:this._actor.get_superTurbo()}),this._model.visibleSymbols),s=this._model.get_height()*this._model.get_symSize().y,a=[],l=0,c=i.mW;l<c;){for(var _=l++,d=this._model.visibleSymbols.getCol(_,[]),p=[],m=0,g=d.length;m<g;){var f,A=m++,x=d[A],w=new Bw(_,A),y=r._model.visibleSymbols.mH;switch(r._model.revealDirection){case 1:f=A==y-1;break;case 4:case 6:throw new tl("Not implemented");case 9:f=0==A}var b,v=null!=(null!=(T=r._model.stickiedGrid)?T.mData[w.y*T.mW+w.x]:null),C=$f.getId(x);switch(r._model.revealDirection){case 1:var S=null==u?1:u,k=n*A+Math.random()*S;break;case 4:case 6:throw new tl("Not implemented");case 9:S=null==u?1:u;k=n*(d.length-1-A)+Math.random()*S}switch(r._model.revealDirection){case 1:b={x:0,y:s};break;case 4:case 6:throw new tl("Not implemented");case 9:b={x:0,y:-s}}p.push({cell:w,stickied:v,symId:C,asset:x,delay:k,target:b,duration:t,stencilDelay:f&&null==r._actor.get_turboMode()?.2:null})}for(var M=[],I=0;I<p.length;){var B=p[I];++I,null==B.asset||B.stickied||M.push(B)}a.push({index:_,syms:M})}for(l=[],c=0,m=a.length;c<m;)++c,l.push(function(t){var e=t.shift();if(r._model.isReelLocked(e.index))return new Zy(new Yy(t));il.each(e.syms,function(e){var t=l0.dt,n=e.asset.object;null==e.stencilDelay?n.set_stenciled(!0):e.delay-t<=t?r.after(e.stencilDelay).handle(function(){n.set_stenciled(!0)}):r.after(e.delay-2*t).handle(function(){r.after(e.stencilDelay).handle(function(){n.set_stenciled(!0)})})});for(var n=[],i=0,s=e.syms;i<s.length;){var a=s[i];++i,n.push({asset:a.asset,tween:r.tweenAsset(a.asset,a.target,a.delay,a.duration,h),cell:a.cell})}il.each(n,function(e){e.tween.handle(function(){r._model.removeSymbol(e.asset)})});var l=u,l=(null==u&&(l=1),o+Math.random()*l),e=r._actions.dropReel(e.index,l);return 0<l?rt.map(e,function(e){return t}):new Zy(new Yy(t))});Rt(l,a.slice());var T=e.replaceReelDelay;return this.after(Math.max(null!=T?T:o,.02))},replaceGrid:function(C,S){var r,o,k=this,M=this._dropModel.config,u=M.symbolDelay,I=null!=(_=M.removeReelDelay)?_:M.reelDelay,B=M.dropTimeRandom,T=M.addCurve,i=M.dropStart,E=C.position(this._model.get_symSize().x,this._model.get_symSize().y);switch(this._model.revealDirection){case 4:case 6:r=C.mW;break;case 1:case 9:r=C.mH}switch(this._model.revealDirection){case 4:case 6:o=this._model.get_symSize().x;break;case 1:case 9:o=this._model.get_symSize().y}this._gameChannel.publish(this._model.messagePrefix+"dropGridReplace",{turbo:this._actor.get_turbo(),superTurbo:this._actor.get_superTurbo()});var F,D=!1,R=this._renderer.getAttentionDurations(this._model.eventGrid),P=be.findIndex(R,function(e){return 0<e}),z=this._model.get_height()*M.attentionSpeed,e=C.mapCells(function(e,t){var n,i=0<R.h[t.x],s=(i=i?(s=t.x-P,M.attentionSpeed*(C.mW-t.y)+z*s+M.attentionDuration*(s+1)):!i&&0<P&&t.x>P?(s=t.x-P,(z+I)*s+M.attentionDuration*(s+1)):0,k._model.lockedReelsCount(t.x)),s=t.x-s,a=B,a=(null==B&&(a=1),Math.random()*a+s*I);switch(k._model.revealDirection){case 1:n=u*t.y;break;case 4:case 6:throw new tl("Not implemented");case 9:n=u*(C.mH-t.y)}s=null!=k._model.stickiedGrid&&null!=(s=k._model.stickiedGrid).mData[t.y*s.mW+t.x];var l,a=a+n+i;switch(k._model.revealDirection){case 1:l=E.mData[t.y*E.mW+t.x].y-r*o;break;case 4:case 6:throw new tl("Not implemented");case 9:l=E.mData[t.y*E.mW+t.x].y+r*o}return{cell:t,symId:e,asset:null,stickied:s,delay:a,start:l,duration:M.stopDuration,stencilDelay:null,target:null}});switch(il.each(e,function(e){var t,n=k._model.stickiedGrid;t=null!=n?(t=e.cell,n.mData[t.y*n.mW+t.x]):null,n=!k._renderer.stickiesFollowReact&&null!=t||k._model.isReelLocked(e.cell.x)?null:(t=k._model.createSymbol(e.symId),$f.getSymbol(t).set_stenciled(!0),t),e.asset=n}),this._model.revealDirection){case 1:F=r*o+Math.abs(i);break;case 4:case 6:throw new tl("Not implemented");case 9:F=-(r*o+i)}for(var t=[],n=0,s=e;n<s.length;){var a=s[n];++n,null!=a.asset&&t.push(a)}il.each(t,function(e){var t=$f.getSymbol(e.asset),n=e.cell;t.object.set_x(E.mData[n.y*E.mW+n.x].x),t.object.set_y(e.start+i),t.set_stenciled(!0)});for(var l=C.mW,h=C.mH,c=new Array(e.length),t=0,n=e.length;t<n;){var _,d,p=e[g=t++];d=null!=(_=p.asset)?_:(d=k._model.visibleSymbols,p=p.cell,d.mData[p.y*d.mW+p.x]),c[g]=d}new Hl(l,h,c);for(t=[],n=0,s=e;n<s.length;){a=s[n];++n,k._model.isReelLocked(a.cell.x)||null==a.asset||k._renderer.stickiesFollowReact&&a.stickied||t.push(a)}for(var m=t,l=(il.each(m,function(e){var t=k._model.visibleSymbols,n=e.cell;t.mData[n.y*t.mW+n.x]=e.asset}),this._model.sortGrid(),new Array(m.length)),t=0,n=m.length;t<n;)l[g=t++]=m[g].symId;for(var Q=il.distinct(l),h={dropping:m,tweens:[]},V={},t=[],n=0,s=C.mW;n<s;){var g=[n++];this._model.isReelLocked(g[0])||t.push((v=>function(r){for(var t,e=k._model.lockedReelsCount(v[0]),e=v[0]-e,n=r.dropping,i=(t=v,function(e){return e.cell.x==t[0]}),s=[],a=0,l=n.length;a<l;){var o=a++;s.push({v:n[o],i:o})}for(var a=[],l=0,u=s;l<u.length;){var h=u[l];++l,i(h.v)&&a.push(h)}for(var c=a,_=new Array(c.length),a=0,l=c.length;a<l;)_[o=a++]=c[o].i;for(var d=_;0<d.length;)n.splice(d.pop(),1);for(_=new Array(c.length),a=0,l=c.length;a<l;)_[o=a++]=c[o].v;for(var p=_,a=[],l=0;l<p.length;){var m=p[l],g=(++l,null==S?null:k._actor.createSymbolPassedListener(C,S,E,m.cell,m.asset,k._model.revealDirection)),f=k.tweenAsset(m.asset,{x:0,y:F},m.delay,m.duration,T);f.handle((e=>function(){null!=e[0]&&e[0].cancel()})([g])),a.push({symObj:m,tween:f})}for(var A,x,w=a,y=(il.each(p,function(r){k.after(r.delay).handle(function(){var e=k._gameChannel,t=k._model.messagePrefix+"symbolDropStart",n=r.cell.x,i=r.cell.y,s=r.symId,a=C.mW+40,l=String.fromCodePoint(a),a=C.mH+40,l=l+String.fromCodePoint(a),a=C.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))});e.publish(t,{column:n,row:i,id:s,result:il.reduce(a,function(e,t){return e+=t},l)})})}),il.each(w,function(n){n.tween.handle(function(){var e=n.symObj.symId,t=V[e],t=null!=t?t:0;0==t&&k._gameChannel.publish(k._model.messagePrefix+"symbolLandedInitial",{id:e,turbo:null!=k._actor.get_turboMode()}),V[e]=t+1,k.presentSymbol(n.symObj,C),$f.getSymbol(n.symObj.asset).set_stenciled(k._model.get_stencil().keepSymbolsStenciled),D||(k._gameChannel.publish(k._model.messagePrefix+"dropGridInitialLanded",{turbo:null!=k._actor.get_turboMode()}),D=!0)})}),0<R.h[v[0]]),b=(A=y&&P!=v[0]?(A=v[0]-P,z*A+M.attentionDuration*(1+A)+I*e):y&&P==v[0]?(null==(b=B)&&(b=1),(I+Math.random()*b)*e+M.attentionDuration):(null==(b=B)&&(b=1),(I+Math.random()*b)*e),k._actions.replaceReel(v[0],A)),_=new Array(w.length),a=0,l=w.length;a<l;)_[o=a++]=w[o].tween;return rt.inParallel(_).handle((x=v,function(){k._gameChannel.publish(k._model.messagePrefix+"replaceReelEnd",{index:x[0],syms:Q});var e={index:x[0],syms:Q,turboMode:k._actor.get_turboMode(),attention:y};k._gameChannel.publish(k._model.messagePrefix+"reelStopped",e)})),rt.map(b,function(e){for(var t=r.dropping,n=r.tweens,i=new Array(w.length),s=0,a=w.length;s<a;){var l=s++;i[l]=w[l].tween}return{dropping:t,tweens:n.concat(i)}})})(g))}var f=new qy;return Rt(t,h).handle(function(e){rt.inParallel(e.tweens).handle(function(){k._actor.setGrid().handle(function(){f.trigger(null)})})}),f},presentSymbol:function(e,t){var n=e.asset,i=null!=(a=this.owner._compMap)?a.h[q_.BASE_NAME]:null,i=i instanceof q_?i:null,s=this._model.settledSymbols,a=(s.mData[e.cell.y*s.mW+e.cell.x]=e.asset,i.showPresentations({result:t,cell:e.cell,drop:!0}),this._gameChannel),s=this._model.messagePrefix+"symbolLanded",i=e.cell.x,l=e.cell.y,r=$f.getId(e.asset),o=t.mW+40,u=String.fromCodePoint(o),o=t.mH+40,h=u+String.fromCodePoint(o),c=t.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))});a.publish(s,{column:i,row:l,id:r,result:il.reduce(c,function(e,t){return e+=t},h)}),0<this._renderer.getAttentionDurations(this._model.eventGrid).h[e.cell.x]&&(a=this._gameChannel,s=this._model.messagePrefix+"symbolLandedAttention",i=e.cell.x,l=e.cell.y,r=$f.getId(e.asset),o=t.mW+40,u=String.fromCodePoint(o),o=t.mH+40,h=u+String.fromCodePoint(o),c=t.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))}),a.publish(s,{column:i,row:l,id:r,result:il.reduce(c,function(e,t){return e+=t},h)})),n.object.set_stenciled(this._model.get_stencil().keepSymbolsStenciled)},tweenAsset:function(e,t,n,i,s,a){var l=this,t=(this._model.activateSymbolPresentation(e,!1),tt.tween(e.object.object,[et.Position(new nt(st.fromBacking(new it(t.x,t.y,null,null)),null,n,i,null,s,!0,null,null,a,null))]));return t.handle(function(){l._model.deactivateSymbolPresentation(e,!1)}),t},stop:function(e){throw new tl("Not implemented. Should perhaps be possible to force stop individual columns?")},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelRevealBase"},__class__:X_}),function(e){this._attention=!1,this._currentReelAttentions=new Je,this._react=null,this._reelSize={x:0,y:0},this.hideStickyPosDuringReveal=!1,this.stickiesFollowReact=!1,this._config=e,B.call(this)}),K_=((i["hacksaw.slotcommon.components.view.ReelRendererComponent"]=q_).__name__="hacksaw.slotcommon.components.view.ReelRendererComponent",q_.__super__=B,q_.prototype=e(B.prototype,{setup:function(){},init:function(){var l=this,e=(this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),this.owner._compMap),t=null!=e?e.h[Md.BASE_NAME]:null;this._reelModel=t instanceof Md?t:null,this._casinoModel=this.owner.getFromParentsByName(_u.BASE_NAME,_u);var n,t=null!=(e=this.owner._compMap)?e.h[O_.BASE_NAME]:null;switch(this._reelActor=t instanceof O_?t:null,this._reelModel.idleLoopInterval=this._config.idleLoop?this._config.idleLoopInterval:null,this.hideStickyPosDuringReveal=this._config.hideStickyPosDuringReveal,null!=this._reelModel.get_background()&&(this._background=this._reelModel.get_background().toObject(),i=this._background,n=this._reelModel.get_background().config.scale,i.scaleX=n,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.scaleY=n,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.scaleZ=n,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),n=null==(t=this._reelModel.get_background().config.pos)?st.fromVector3(new Gr(0,0,0)):t,(i=this._background).x=n.x,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.y=n.y,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.z=n.z,i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),i.flags|=1,0!=(131072&i.flags)&&(i.flags|=262144),this.object.addChild(this._background)),(a=this._config.reveal)._hx_index){case 0:case 1:case 2:case 3:e=U.createInstance(a.handler,[])}this._reveal=e;for(var i=this._config.gridInitLines,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createWinPresentation(i[A]);this._gridInitLines=s;for(i=this._config.winInitLines,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createWinPresentation(i[A]);this._winInitLines=s;for(i=this._config.winLines,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createWinPresentation(i[A]);this._winLines=s;for(i=this._config.gridExitLines,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createWinPresentation(i[A]);this._gridExitLines=s;for(i=this._config.winExitLines,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createWinPresentation(i[A]);if(this._winExitLines=s,null!=(e=this._config.idleGridInitLines)){for(s=new Array(e.length),a=0,r=e.length;a<r;)s[A=a++]=l.createWinPresentation(e[A]);o=s}else o=null;if(this._idleGridInitLines=null!=o?o:[],null!=(e=this._config.idleWinInitLines)){for(s=new Array(e.length),a=0,r=e.length;a<r;)s[A=a++]=l.createWinPresentation(e[A]);o=s}else o=null;this._idleWinInitLines=null!=o?o:[];for(var o,i=this._config.idleLines,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createWinPresentation(i[A]);if(this._idleLines=s,null!=(e=this._config.idleGridExitLines)){for(s=new Array(e.length),a=0,r=e.length;a<r;)s[A=a++]=l.createWinPresentation(e[A]);o=s}else o=null;if(this._idleGridExitLines=o,null!=(e=this._config.idleWinExitLines)){for(s=new Array(e.length),a=0,r=e.length;a<r;)s[A=a++]=l.createWinPresentation(e[A]);o=s}else o=null;if(this._idleWinExitLines=o,null!=this._config.specialLines){for(var a=new at,u=this._config.specialLines.h,h=(w=Object.keys(u)).length,c=0;c<h;){for(var _=w[c++],d=u[_],r=[],p=0;p<d.length;)r.push(this.createWinPresentation(d[p++]));a.h[_]=r}this._specialLines=a}for(var m=this._config.attentions,g=[],a=0,r=m.length;a<r;){var f=m[A=a++];g.push(l.createAttentionPresentation(f,A,Ud.Attention(f)))}this._attentions=g;for(i=this._config.stickyPresentations,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createStickyPresentation(i[A]);this._stickyPresentations=s;for(i=this._config.stickyRemovePresentations,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createStickyPresentation(i[A]);this._stickyRemovePresentations=s;for(i=this._config.lockPresentations,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createLockPresentation(i[A]);this._lockPresentations=s;for(i=this._config.removes,s=new Array(i.length),a=0,r=i.length;a<r;)s[A=a++]=l.createRemovePresentation(i[A]);this._removes=s;for(i=this._config.drops,s=new Array(i.length),a=0,r=i.length;a<r;){var A,x=i[A=a++];s[A]=l.createDropPresentation(x,Ud.Symbol(x))}if(this._drops=s,this.owner.add(this._reveal),null!=this._config.react){switch((a=this._config.react)._hx_index){case 0:e=U.createInstance(a.handler,[]);break;case 1:e=U.createInstance(a.handler,[a.config]);break;case 2:case 3:e=U.createInstance(a.handler,[])}this._react=e,this.owner.add(this._react)}for(a=0,r=this._gridInitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._winInitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._winLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._winExitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._gridExitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));if(null!=this._idleGridInitLines)for(a=0,r=this._idleGridInitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));if(null!=this._idleWinInitLines)for(a=0,r=this._idleWinInitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._idleLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));if(null!=this._idleWinExitLines)for(a=0,r=this._idleWinExitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));if(null!=this._idleGridExitLines)for(a=0,r=this._idleGridExitLines;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));if(null!=this._specialLines)for(var w,u=this._specialLines.h,h=(w=Object.keys(u)).length,c=0;c<h;)for(d=u[w[c++]],a=0;a<d.length;)this.owner.addChild((new ge).add(d[a++].instance));for(a=0,r=this._attentions;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._removes;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._stickyPresentations;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._stickyRemovePresentations;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._lockPresentations;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));for(a=0,r=this._drops;a<r.length;)this.owner.addChild((new ge).add(r[a++].instance));this._casinoChannel.subscribe(this._reelModel.messagePrefix+"showResult",function(e){l._reelActor.quickStop()}),this._casinoChannel.subscribe(this._reelModel.messagePrefix+"betDeclined",function(e){l._reelActor.quickStop()}),this._casinoChannel.subscribe(this._reelModel.messagePrefix+"orientationChange",function(e){var t,n,i,s,a;null!=l._stencilMesh&&(t=l._reelModel.currentGrid.mW*l._reelModel.get_symSize().x,n=l._reelModel.currentGrid.mH*l._reelModel.get_symSize().y,i=l._reelModel.get_stencilMargins(),s=l._reelModel.get_stencilPos(),(a=l._stencilMesh).scaleX=(t+2*i.x)/l._origReelSize.x,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),(a=l._stencilMesh).scaleY=(n+2*i.y)/l._origReelSize.y,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),(a=l._stencilMesh).scaleZ=(1e-4+2*i.z)/1e-4,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),(a=l._stencilMesh).x=s.x,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a.y=s.y,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a.z=s.z,a.flags|=1,0!=(131072&a.flags)&&(a.flags|=262144),a.flags|=1,0!=(131072&a.flags))&&(a.flags|=262144)}),this._gameChannel.subscribe(this._reelModel.messagePrefix+"reelStopped",function(e){l._reelModel.stopped.h[e.index]=!0}),null==this._config.blurLevels||this._casinoModel.isMobile(cu.DEVICE)||(this.generateBlurTiles(),null!=this._config.maxBlurSpeed&&il.each(this._reelModel.get_symbols(),function(e){$f.getSymbol(e.asset).maxBlurSpeed=l._config.maxBlurSpeed}))},showPresentations:function(e){var t=e.result,t=null==t?this._reelModel.eventGrid:t,n=this.filterActivePresentations(e.cell,t,null!=e.groupId?[id.SymbolPassed(e.groupId)]:[id.ScatterLanded,id.SymbolLanded,id.ScatterTriggered,id.SymbolDropped]);this.handlePresentations(e.cell,t,n,e.collapse),e.drop&&(t=e.result,e=new Ef((n=e.cell).x,e.cell.y,""+t.mData[n.y*t.mW+n.x],this._reelActor.get_turboMode(),null),this._gameChannel.publish("presentDropSymbol",e))},generateBlurTiles:function(){for(var e,t=new VA,n=0,i=this._reelModel.get_symbols();n<i.length;)null!=(null!=(h=i[n++].asset.object)?h.tile:null)&&(e=h.tile.innerTex,null==t.h.__keys__[e.__id__]&&t.set(e,[]),t.h[e.__id__].push(h));for(var s=t,a=s.keys();a.hasNext();)for(var l=a.next(),r=s.get(l),n=0,i=this._config.blurLevels;n<i.length;)for(var o=i[n],u=(++n,se.applyShader(Ir.fromTexture(l),null!=this._config.createMotionBlurShader?this._config.createMotionBlurShader(.5*o,0,127):new ba(.5*o,0,127),wr.Alpha)),h=0;h<r.length;){var c=r[h],_=(++h,c.tile.clone());_.setTexture(u.innerTex),c.blurTiles.push(_)}},resetAttentions:function(){if(null!=this._attentions)for(var e=0,t=this._attentions;e<t.length;)t[e++].instance.clearInstances()},resetWinLines:function(){function e(e){if(null!=e){for(var t=0,n=new Array(e.length),i=0,s=e.length;i<s;){var a=i++;n[a]=e[a].instance}for(;t<n.length;)n[t++].clearInstances()}}if(this.resetAttentions(),e(this._gridInitLines),e(this._winInitLines),e(this._winLines),e(this._winExitLines),e(this._gridExitLines),e(this._idleGridInitLines),e(this._idleWinInitLines),e(this._idleLines),e(this._idleWinExitLines),e(this._idleGridExitLines),e(this._stickyPresentations),e(this._stickyRemovePresentations),null!=this._specialLines)for(var t=this._specialLines.h,n=Object.keys(t),i=n.length,s=0;s<i;)e(t[n[s++]])},hasPhase:function(e){switch(e._hx_index){case 0:case 1:return!0;case 2:return null!=this._config.gridInitLines&&0<this._config.gridInitLines.length;case 3:return null!=this._config.winInitLines&&0<this._config.winInitLines.length;case 4:return null!=this._config.winLines&&0<this._config.winLines.length;case 5:return null!=this._config.winExitLines&&0<this._config.winExitLines.length;case 6:return null!=this._config.gridExitLines&&0<this._config.gridExitLines.length;case 7:return null!=this._config.idleGridInitLines&&0<this._config.idleGridInitLines.length;case 8:return null!=this._config.idleWinInitLines&&0<this._config.idleWinInitLines.length;case 9:return null!=this._config.idleLines&&0<this._config.idleLines.length;case 10:return null!=this._config.idleWinExitLines&&0<this._config.idleWinExitLines.length;case 11:return null!=this._config.idleGridExitLines&&0<this._config.idleGridExitLines.length;case 12:return null!=this._config.specialLines&&0<be.count(this._config.specialLines);case 13:return null!=this._config.lockPresentations&&0<this._config.lockPresentations.length}},setBackground:function(e,t){var n;null==this._background||this._backgroundOrientation==e&&this._gameMode==t||(null!=(n=this._background)&&null!=n.parent&&n.parent.removeChild(n),this._gameMode=t,this._backgroundOrientation=e,this._background=this._reelModel.get_background().toObject(),n=this._background,t=this._reelModel.get_background().config.scale,n.scaleX=t,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.scaleY=t,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.scaleZ=t,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),t=null==(e=this._reelModel.get_background().config.pos)?st.fromVector3(new Gr(0,0,0)):e,(n=this._background).x=t.x,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.y=t.y,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.z=t.z,n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),n.flags|=1,0!=(131072&n.flags)&&(n.flags|=262144),this.object.addChild(this._background))},createWinPresentation:function(e,t){switch(e._hx_index){case 0:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinText",type:t};case 1:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinSequence",type:t};case 2:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinTween",type:t};case 3:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinAnimation",type:t};case 4:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinShader",type:t};case 5:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinLine",type:t};case 6:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinAction",type:t};case 7:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinElement",type:t}}},createDropPresentation:function(e,t){switch(e._hx_index){case 0:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentDropReel",type:t};case 1:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentDropAnimation",type:t};case 2:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentDropShader",type:t};case 3:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentDropTween",type:t};case 4:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentDropAction",type:t};case 5:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentWinElement",type:t}}},createRemovePresentation:function(e,t){switch(e._hx_index){case 0:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentRemoveReel",type:t};case 1:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentRemoveAnimation",type:t};case 2:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentRemoveTween",type:t};case 3:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentRemoveAction",type:t};case 4:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentRemoveAnimation",type:t}}},createAttentionPresentation:function(e,t,n){switch(e._hx_index){case 0:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration,t]),id:"presentAttentionReel",type:n};case 1:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration,t]),id:"presentAttentionAnimation",type:n};case 2:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration,t]),id:"presentAttentionShader",type:n};case 3:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration,t]),id:"presentAttentionTween",type:n};case 4:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration,t]),id:"presentAttentionAction",type:n};case 5:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration,t]),id:"presentWinElement",type:n}}},createStickyPresentation:function(e,t){switch(e._hx_index){case 0:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentStickyAnimation",type:t};case 1:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentStickyShader",type:t};case 2:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentStickyTween",type:t};case 3:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentStickyAction",type:t};case 4:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentStickyShader",type:t}}},createLockPresentation:function(e,t){switch(e._hx_index){case 0:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentLockReel",type:t};case 1:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentLockShader",type:t};case 2:return{instance:U.createInstance(e.handler,[e.config,e.filters,e.type,e.duration]),id:"presentLockAction",type:t}}},startReveal:function(){var i=this;return this._attention=!1,this._currentReelAttentions.h={},this._config.useStencil&&this._reelModel.visibleSymbols.eachCells(function(e,t){var n=$f.getSymbol(e);if(null!=n)switch(i._reelModel.get_stencil().revealBehavior._hx_index){case 0:n.stenciled&&(n.set_stenciled(!1),n.set_stenciled(!0));break;case 1:n.set_stenciled(!0)}}),this._gameChannel.publish(this._reelModel.messagePrefix+"startReels",{turbo:this._reelActor.get_turboMode()}),this._reveal.start()},endReveal:function(e){for(var t=this,n=new qy,e=this._reveal.end(e),i=((this._endReveal=e).handle(function(e){t.when(function(){var e;return!t._config.resolveAttentionsBeforeEnd||null==(e=t._reelModel.activeAttentions)||0==e.length}).handle(function(){n.trigger(null)}),t._gameChannel.publish(t._reelModel.messagePrefix+"reelsEnd",{turbo:t._reelActor.get_turboMode(),quickStopped:t._reelModel.quickStop}),t._currentReelAttentions.h={},t._endReveal=null}),this._reelModel.get_symbols()),s=new Array(i.length),a=0,l=i.length;a<l;)s[h=a++]=i[h].id;for(i=this._attentions,a=[],l=0;l<i.length;){var r,o=i[l];switch(++l,o.instance.type._hx_index){case 7:case 8:r=!0;break;default:r=!1}r&&a.push(o)}for(var l=0,u=this._reelModel.currentGrid.mW;l<u;){for(var h=l++,c=[],_=0;_<a.length;){o=a[_];++_,o.instance.filter(new td(null,s,t._reelModel.eventGrid,h,null,null))&&c.push(o)}null!=c&&0!=c.length&&(this._currentReelAttentions.h[h]=c)}return rt.noise(rt.and(e,n))},startReact:function(e){return e.stickiesFollow=this.stickiesFollowReact,this._react.start(e)},forceStopReel:function(e,t){null==t&&(t=!1),this._reveal.stop(e)},slowReel:function(e,t){switch(this._reelModel.revealProps._hx_index){case 3:case 4:this._reveal.slowdown(e,t)}},replaceReel:function(e){return this.handleReelAttentions(e,this._reelModel.eventGrid)},getAttentionDurations:function(e){for(var t=this._reelModel.get_symbols(),n=[],i=0;i<t.length;){var s=t[i];++i,s.isScatter&&n.push(s)}for(var a=new Array(n.length),i=0,l=n.length;i<l;){var r=i++;a[r]=n[r].id}for(var o=new Je,n=0,i=this._reelModel.get_width();n<i;){for(var u=n++,t=this._attentions,l=[],h=0;h<t.length;){var c,s=t[h];switch(++h,s.instance.type._hx_index){case 7:case 8:c=!0;break;default:c=!1}c&&l.push(s)}for(var _=[],d=0;d<l.length;){var p=l[d];++d,p.instance.filter(new td(null,a,e,u,null,null))&&_.push(p)}var m=il.reduce(_,function(e,t){return Math.max(e,t.instance.get_maxDuration())},0);o.h[u]=m}return o},endReact:function(e){return this._reelModel.quickStop=!1,this._react.end(e)},addAsset:function(e,t,n){return null},removeAsset:function(e){},showWin:function(e,t,n,i){return null==i&&(i=!1),null==n&&(n=OA.None),null},showRemoves:function(e){for(var o=this,s=[],t=this._reelModel.get_width(),n=this._reelModel.get_height(),i=e.split(""),a=new Array(i.length),l=0,r=i.length;l<r;)a[v=l++]="1"==i[v];for(var u=new Hl(t,n,a),h=(i=u).mData,c=i.mW,l=0,r=i.mW*i.mH;l<r;){var _,d=(v=l++)%c,p=v/c|0;C=!!h[v]&&(_=o._reelModel.stickiedGrid,i=o._reelModel.visibleSymbols,(null!=_?_.mData[p*_.mW+d]:null)!=i.mData[p*i.mW+d]),h[v]=C}for(var m={},i=this._reelModel.visibleSymbols.mapCellsByMask(u,function(e,t){return{id:$f.getId(e),asset:e,cell:t}}),l=[],r=0;r<i.length;){var g=i[r];++r,null!=g.asset&&l.push(g)}for(var f=l,A=(il.each(f,function(e){var t,n,i;il.pushIf(s,-1==s.indexOf(e.id),e.id),null==m[e.id]?(t=new Hl(u.mW,u.mH),i=e.cell,(n=t).mData[i.y*n.mW+i.x]=!0,m[e.id]=t):(n=m[e.id]).mData[(i=e.cell).y*n.mW+i.x]=!0}),new wa(null,null,null,null,null,null,null,null,null,null,null,null,null,null,null)),x=[],w=[],y=u.mapCellsByMask(u,function(e,t){return t}),l=0;l<s.length;){var b=s[l];++l;(c=[X.copy(A)])[0].symbol=null==b?"null":""+b;for(var v,C,S=m[b],k="",h=S.mData,r=0,M=S.mW*S.mH;r<M;)k+=(C=h[v=r++])?"1":"0",h[v]=C;c[0].mask=k;for(var S=S.getValArea(!0),I=[new td(c[0],[b],this._reelModel.currentGrid,null,this._reelModel.visibleSymbols,null)],i=this._removes,B=[],T=0;T<i.length;){g=i[T];++T,g.instance.filter(I[0])&&B.push(g)}null!=B&&0<B.length&&(b=new zf(S.x,S.y,S.x+S.w,S.y+S.h,y.length,c[0].symbol,this._reelActor.get_turboMode()),this._gameChannel.publish("presentRemove",b)),il.each(y,((l,r)=>function(e){for(var t=new Pf(e.x,e.y,r[0].symbol,o._reelActor.get_turboMode()),n=(o._gameChannel.publish("presentRemoveSymbol",t),o._removes),i=[],s=0;s<n.length;){var a=n[s];++s,a.instance.filter(l[0],e)&&i.push(a)}il.each(i,function(e){o._gameChannel.publish(e.id,t)})})(I,c)),il.each(B,(i=>function(e){var t,n=e.instance.start(i[0]),n=(null!=n&&(n.handle((t=i,function(){e.instance.end(t[0])})),x.push(n)),e.instance.getInstance(i[0]));null!=n&&w.push(n.completeTrigger)})(c))}rt.inParallel(w).handle(function(){for(var e=0;e<f.length;){var t=f[e];++e,$f.getSymbol(t.asset).animator.stop(),o._reelModel.removeSymbol(t.asset)}});e=rt.inParallel(x);return e.handle(function(){for(var e=(a=o._reelModel.visibleSymbols).mData,t=a.mW,n=0,i=a.mW*a.mH;n<i;){var s=n++,a=u;e[s]=a.mData[(s/t|0)*a.mW+s%t]?null:e[s]}}),rt.noise(e)},showStickies:function(p,s,e){null==s&&(s=!0);var a=this,t=(this.stickiesFollowReact=e=null==e?!1:e,this._reelModel.get_width()),e=this._reelModel.get_height(),e=null!=this._reelModel.stickiedGrid?this._reelModel.stickiedGrid:new Hl(t,e),l=(this._reelModel.stickiedGrid=e,this._reelModel.visibleSymbols.position(this._reelModel.get_symSize().x,this._reelModel.get_symSize().y)),r=this._reelModel.stickiedGrid.mapToGrid(function(e,t){return null==(e=null!=e?e:(e=a._reelModel.visibleSymbols).mData[t.y*e.mW+t.x])?null:e.object.object.getRotationQuat().toEuler()}),o=3==this._reelModel.revealProps._hx_index,n=this._reelModel.stickiedMask,u=null!=(e=null==n?null:n.mapToGrid(function(e,t){return!!p.mData[t.y*p.mW+t.x]&&!e}))?e:p;il.each(il.distinct(this._reelModel.stickiedGrid.mapCellsByMask(p,function(e,t){var n=a._reelModel.visibleSymbols,i=n.mData[t.y*n.mW+t.x];return n=null!=u?(n=u).mData[t.y*u.mW+t.x]:null,{asset:e,visible:i,cell:t,pos:l.mData[t.y*l.mW+t.x],rotation:r.mData[t.y*r.mW+t.x],id:null!=i?$f.getId(i):null,newlyAdded:null==n||n}}),function(e,t){return e.visible==t.visible}),function(e){var t=e.newlyAdded?s?e.visible:(null!=(t=e.asset)&&a._reelModel.removeSymbol(t),a._reelModel.createSymbol(e.id)):e.asset,n=(o&&t==e.visible&&(i=a._reelModel.createSymbol(e.id),n=$f.getSymbol(i),a.positionSym(e.cell,n,l,r,$f.getSymbol(e.visible).restingZPosition),n.object.set_visible(!a._config.hideSymbolsUnderSticky&&!a.hideStickyPosDuringReveal),a.hideStickyPosDuringReveal&&(n.flags|=4),$f.setSymbolOnGrid(i,a._reelModel.visibleSymbols,e.cell)),$f.getSymbol(t)),i=(a.positionSym(e.cell,n,l,r),n.object.set_visible(!0),$f.setSymbolOnGrid(t,a._reelModel.stickiedGrid,e.cell),new Ef(e.cell.x,e.cell.y,""+e.id,a._reelActor.get_turboMode(),null));a._gameChannel.publish("presentStickySymbol",i)}),this._reelModel.sortGrid(this._reelModel.stickiedGrid,2*this._reelModel.animationZOffset),this._reelModel.addedStickiesMask=u,this._reelModel.stickiedMask=this._reelModel.stickiedGrid.mapToGrid(function(e,t){return null!=e});for(var i=this._reelModel.stickiedGrid.mapToGrid(function(e,t){return $f.getId(e)}),h=this._stickyPresentations,c=[],_=0;_<h.length;){for(var d=h[_],m=(++_,""),g=u.mData,f=0,A=u.mW*u.mH;f<A;){var x=g[y=f++];m+=x?"1":"0",g[y]=x}d.instance.filter(new td(new wa(null,m,null,null,null,null,null,null,null,null,null,null,null,null,null),il.distinct(i.toArray()),null,null,null,null))&&c.push(d)}for(var w=new Array(c.length),_=0,f=c.length;_<f;){for(var y,b=[c[y=_++]],v=il.filterNull(a._reelModel.stickiedGrid.mapCellsByMask(p,function(e,t){if(null==e)return null;for(var n=$f.getId(e),i="",s=p.mData,a=0,l=p.mW*p.mH;a<l;){var r=s[u=a++];i+=r?"1":"0",s[u]=r}var o,a=i,l=""+n;if(null==(i=t.x+"_"+t.y))o=null;else{for(var u,h=i.split("_"),c=new Array(h.length),_=0,d=h.length;_<d;)c[u=_++]=el.parseInt(h[u]);o=Uu._new(new Bw(c[0],c[c.length-1]))}return{win:new wa(l,a,null,null,null,null,null,null,!0,o,null,null,null,null,null),asset:e,cell:t}},Dy.equality)),A=[],C=0;C<v.length;){var t=[v[C]],S=(++C,new Ef(t[0].cell.x,t[0].cell.y,t[0].win.symbol,a._reelActor.get_turboMode(),null)),S=(a._gameChannel.publish(b[0].id,S),b[0].instance.start(t[0].win,i,null,a._reelModel.stickiedGrid));null!=S&&S.handle(((e,t)=>function(){t[0].instance.end(e[0].win)})(t,b)),A.push(S)}w[y]=il.filterNull(A)}return rt.noise(rt.inParallel(Array.prototype.concat.apply([],w)))},removeStickies:function(e,a,l){null==l&&(l=!1),null==a&&(a=!1);var r=this;if(null==this._reelModel.stickiedGrid||!be.has(e,!0))return rt.NOISE;null==e&&(e=this._reelModel.stickiedMask);for(var o=il.filterNull(this._reelModel.stickiedGrid.mapCellsByMask(e,function(e,t){return null==e?null:{id:e.object.id,cell:t,asset:e}},Dy.equality)),t=this._stickyRemovePresentations,n=[],i=0;i<t.length;){for(var s=t[i],u=(++i,""),h=e.mData,c=0,_=e.mW*e.mH;c<_;)u+=(w=h[A=c++])?"1":"0",h[A]=w;for(var d=new wa(null,u,null,null,null,null,null,null,null,null,null,null,null,null,null),p=s.instance,m=new Array(o.length),g=0,f=o.length;g<f;)m[x=g++]=o[x].id;p.filter(new td(d,il.distinct(m),null,null,null,null))&&n.push(s)}for(i=[],c=0,_=o;c<_.length;){s=_[c];++c,null!=s.asset&&i.push(s)}for(m=new Array(i.length),c=0,_=i.length;c<_;){for(var A,x,w,y=i[A=c++],u="",h=e.mData,g=0,f=e.mW*e.mH;g<f;)u+=(w=h[x=g++])?"1":"0",h[x]=w;var b=u,v=""+y.id,C=y.cell.x+"_"+y.cell.y;if(null==C)d=null;else{for(var t=C.split("_"),S=new Array(t.length),k=0,M=t.length;k<M;){var I=k++;S[I]=el.parseInt(t[I])}d=Uu._new(new Bw(S[0],S[S.length-1]))}m[A]={win:new wa(v,b,null,null,null,null,null,null,null,d,null,null,null,null,null),cell:y.cell}}for(i=[],c=0;c<n.length;)for(y=n[c],_=(++c,0);_<m.length;){var B=m[_],T=(++_,new Pf(B.cell.x,B.cell.y,B.win.symbol,this._reelActor.get_turboMode()));this._gameChannel.publish(y.id,T),i.push(y.instance.start(B.win,this._reelModel.stickiedGrid.mapToGrid(function(e,t){return $f.getId(e)}),null,this._reelModel.stickiedGrid))}var E=rt.inParallel(i);return E.handle(function(){var e;if(l){for(var t=r._reelModel.stickiedGrid.mapCells(function(e,t){return{cell:t,asset:e}},Dy.equality),n=[],i=0;i<t.length;){var s=t[i];++i,null!=s.asset&&n.push(s)}e=n}else e=o;il.each(e,function(e){r.removeSticky(e.asset,e.cell,a)}),l&&(r._reelModel.stickiedMask=null,r._reelModel.stickiedGrid=null)}),rt.noise(E)},removeSticky:function(i,e,s){for(var a=this,t=$f.getSymbol(i),l=t.id,n=t.size.y,r=t.size.x,o=[],u=0;u<r;)for(var h=u++,c=0;c<n;){var _=new Bw(e.x+h,e.y+c++),d=this._reelModel.visibleSymbols;o.push({visible:d.mData[_.y*d.mW+_.x],cell:_})}this.hideStickyPosDuringReveal&&(t.flags&=-5);for(u=[],c=0;c<o.length;){var p=o[c];++c,null!=p.visible&&u.push(p)}if(il.each(u,function(e){e=$f.getSymbol(e.visible);e.object.set_visible(!0),a.hideStickyPosDuringReveal&&(e.flags&=-5)}),s){for(u=[],c=0;c<o.length;){p=o[c];++c,p.visible!=i&&u.push(p)}il.each(il.distinct(u,function(e,t){return e.visible==t.visible}),function(e){a._reelModel.removeSymbol(e.visible)})}else(d=this._reelModel.visibleSymbols).mData[e.y*d.mW+e.x]!=i&&this._reelModel.removeSymbol(i);il.each(o,function(e){var t=a._reelModel.stickiedGrid,n=e.cell;t.mData[n.y*t.mW+n.x]=null,(t=a._reelModel.stickiedMask).mData[(n=e.cell).y*t.mW+n.x]=!1,s&&(t=a._reelModel.currentGrid,n=e.cell,t.mData[n.y*t.mW+n.x]=l,(t=a._reelModel.visibleSymbols).mData[(n=e.cell).y*t.mW+n.x]=i)})},positionSym:function(e,t,n,i,s){null==s&&(s=0);var a=$f.getSymbol(il.find(this._reelModel.get_symbols(),function(e){return e.id==t.id}).asset).size,l=.5*(a.x-1)*this._reelModel.get_symSize().x,a=.5*(1-a.y)*this._reelModel.get_symSize().y,n=n.mData[e.y*n.mW+e.x],l=(t.object.set_x(n.x+l),t.object.set_y(n.y+a),i.mData[e.y*i.mW+e.x]);t.object.setRotation(l.x,l.y,l.z),t.object.set_z(s)},endWins:function(){return this.resetWinLines(),rt.NOISE},update:function(e){B.prototype.update.call(this,e);var t,n,i,s,a=this._reelModel.currentGrid.mW*this._reelModel.get_symSize().x,l=this._reelModel.currentGrid.mH*this._reelModel.get_symSize().y,r=(this._currentMode==this._casinoModel.gameMode&&this._reelSize.x==a&&this._reelSize.y==l||(this._currentMode=this._casinoModel.gameMode,null!=this._stencilMesh&&(r=this._reelModel.currentGrid.mW*this._reelModel.get_symSize().x,t=this._reelModel.currentGrid.mH*this._reelModel.get_symSize().y,n=this._reelModel.get_stencilMargins(),i=this._reelModel.get_stencilPos(),(s=this._stencilMesh).scaleX=(r+2*n.x)/this._origReelSize.x,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),(s=this._stencilMesh).scaleY=(t+2*n.y)/this._origReelSize.y,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),(s=this._stencilMesh).scaleZ=(1e-4+2*n.z)/1e-4,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),(s=this._stencilMesh).x=i.x,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.y=i.y,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.z=i.z,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.flags|=1,0!=(131072&s.flags))&&(s.flags|=262144),this._reelSize.x=a,this._reelSize.y=l),this._reelModel.get_background());null!=r&&r.update(e)},filterActivePresentations:function(e,t,n){for(var i=new Array(n.length),s=0,a=n.length;s<a;){var l,r=s++,o=n[r];switch(o._hx_index){case 3:case 4:case 6:for(var u=this._attentions,h=[],c=0;c<u.length;){var _=u[c];++c,U.enumEq(o,_.instance.type)&&h.push(_)}l=h;break;case 10:for(var d=this._drops,p=[],m=0;m<d.length;){var g=d[m];++m,o==g.instance.type&&p.push(g)}l=p;break;case 11:for(var f=this._attentions,A=[],x=0;x<f.length;){var w=f[x];++x,U.enumEq(o,w.instance.type)&&A.push(w)}l=A;break;default:l=[]}i[r]=l}for(var y=il.reduce(i,function(e,t){return e.concat(t)},[]),s=[],a=0;a<y.length;){_=y[a];++a,7!=_.instance.type._hx_index&&s.push(_)}for(var b=(u=t).mData[e.y*u.mW+e.x],a=[],h=0;h<s.length;){_=s[h];++h,_.instance.filter(new td(null,[b],t,e.x,null,null),e)&&a.push(_)}return il.filterNull(a)},getPresentationMask:function(e,t,n,i){for(var s=new Hl(t.mW,t.mH),a=s.mData,l=s.mW,r=0,o=s.mW*s.mH;r<o;){var u=r++,h=u%l,c=u/l|0,_=this._reelModel.stickiedMask;_=!(null!=_?_.mData[c*_.mW+h]:null)||(null!=(_=this._reelModel.addedStickiesMask)?_.mData[c*_.mW+h]:null),a[u]=null!=i&&h==e.x&&(null==e.y||c==e.y)&&t.mData[c*t.mW+h]==i&&_&&h<=e.x}return s},getPresentationWins:function(e,t,n,i,s,a){for(var l=[],r=0,o=t.length;r<o;){var u,h=r++,c=t[h],_=c.type,_=null!=_&&1==_._hx_index?Hd.Drop:Hd.Attention,d=""+a,h=""+i*h,p=e.x+"_"+e.y;if(null==p)u=null;else{for(var m=p.split("_"),g=new Array(m.length),f=0,A=m.length;f<A;){var x=f++;g[x]=el.parseInt(m[x])}u=Uu._new(new Bw(g[0],g[g.length-1]))}l.push({win:new wa(d,n,null,null,"0",h,null,null,null,u,s,null,null,null,null),phase:_,presentationInstance:c})}return l},handleReelAttentions:function(e,t,n){null==n&&(n=0);for(var i=this,s=this._reelModel.get_symbols(),a=new Array(s.length),l=0,r=s.length;l<r;)a[_=l++]=s[_].id;for(var o=null!=(k=this._currentReelAttentions.h[e])?k:[],u=[],l=0;l<o.length;){var h=[o[l]];++l;c=null!=(r=h[0].type)&&0==r._hx_index&&0==(c=r.type)._hx_index?c.duration:null;for(var c,_,d=0<n?n:h[0].instance.get_maxDuration(),d=null==c?d:c,d=null==d?0:d,p=new Rf(e,d,this._reelActor.get_turboMode()),m=new Hl(t.mW,t.mH),g=(s=m).mData,f=s.mW,A=0,x=s.mW*s.mH;A<x;)g[_=A++]=_%f==e;for(var w="",y=m.mData,b=0,v=m.mW*m.mH;b<v;){var C=b++,S=y[C];w+=S?"1":"0",y[C]=S}var k,m=[new wa(null,w,null,null,"0","1",null,null,null,null,e,null,null,null,null)],M=h[0].instance.start(m[0],t,Hd.Attention);null!=M&&(this._attention||(this._attention=!0,this._gameChannel.publish("presentAttention",p)),this._gameChannel.publish(h[0].id,p),0<d&&this.slowReel(e,.5*d),8==h[0].instance.type._hx_index?(null!=(k=this._endReveal)?k:M).handle(((e,t)=>function(){t[0].instance.end(e[0])})(m,h)):M.handle(((e,t)=>function(){t[0].instance.end(e[0])})(m,h)),u.push(rt.map(rt.or(this.after(d),M),function(e){return!0})))}var I=Py.toArray(this._currentReelAttentions.keys()),B=I[I.length-1];return e==I[0]&&this._gameChannel.publish("reelAttentionGroupStart"),il.reduce(u,function(e,t){return rt.noise(rt.and(e,t))},new Zy(new Yy(null))).handle(function(){e==B&&i._gameChannel.publish("reelAttentionGroupEnd")}),rt.map(rt.inParallel(u),function(e){return-1!=e.indexOf(!0)})},handlePresentations:function(n,e,t,i){var s=this;if(0==t.length)return new Zy(new Yy(!0));for(var a=e.mData[n.y*e.mW+n.x],l=this.getPresentationMask(n,e,n.x,a),r="",o=l.mData,u=0,h=l.mW*l.mH;u<h;){var c=u++,_=o[c];r+=_?"1":"0",o[c]=_}for(var d=il.reduce(l.toArray(),function(e,t){return e+(t?1:0)},0),p=this.getPresentationWins(n,t,r,d,n.x,a),u=(l.eachCellsByMask(l,function(e,t){t=new Ef(t.x,t.y,""+a,s._reelActor.get_turboMode(),null);s._gameChannel.publish("presentAttentionSymbol",t)}),il.each(p,function(e){var t=new Ef(n.x,n.y,""+a,s._reelActor.get_turboMode(),null);switch(s._gameChannel.publish(e.presentationInstance.id,t),e.presentationInstance.id){case"presentAttentionAction":case"presentAttentionAnimation":case"presentAttentionShader":case"presentAttentionTween":t=new Ef(n.x,n.y,e.win.symbol,s._reelActor.get_turboMode(),null);s._gameChannel.publish("presentAttentionSymbol",t)}}),[]),h=0;h<p.length;){var m=[p[h]],g=(++h,m[0].presentationInstance.instance);switch(g.type._hx_index){case 2:case 3:case 4:var f=this._reelModel.stickiedGrid,A=this._reelModel.visibleSymbols,x=null!=(null!=f?f.mData[n.y*f.mW+n.x]:null)||-1!=$f.getSymbol(A.mData[n.y*A.mW+n.x]).presented.indexOf(g.type)&&i?null:g.start(m[0].win,e,m[0].phase);break;default:x=g.start(m[0].win,e,m[0].phase)}if(null!=x){var w=[m[0].presentationInstance.instance.getInstance(m[0].win)],y=[this._config.resolveAttentionsBeforeEnd];switch(m[0].presentationInstance.instance.type._hx_index){case 4:case 6:case 7:il.pushIf(this._reelModel.activeAttentions,y[0],w[0]),x.handle(((e,t,n)=>function(){e[0]&&Jn.remove(s._reelModel.activeAttentions,t[0]),n[0].presentationInstance.instance.end(n[0].win)})(y,w,m));break;case 10:this._reelModel.activePresentations.push(w[0]),x.handle(((t,n)=>function(){var e;n[0].presentationInstance.instance.end(n[0].win).handle((e=t,function(){Jn.remove(s._reelModel.activePresentations,e[0])}))})(w,m));break;default:x.handle((e=>function(){e[0].presentationInstance.instance.end(e[0].win)})(m))}u.push(x)}}return rt.map(rt.inParallel(u),function(e){return-1==e.indexOf(e1.ofAny(!1))})},addStencil:function(e,t,n,i){var s=new Zn(e,t,1e-4,!0),s=(s.addNormals(),this._stencilMesh=new Co(s,null,this.object.get_parent()),this._stencilMesh.material.mshader.color__);s.x=0,s.y=0,s.z=0,s.w=0,this._stencilMesh.material.set_blendMode(wr.None),(s=this._stencilMesh.material).set_castShadows(!1),s.set_receiveShadows(!1),(s=this._stencilMesh).x=n.x,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.y=n.y,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.z=n.z,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),(s=this._stencilMesh).scaleX=(e+2*i.x)/e,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),(s=this._stencilMesh).scaleY=(t+2*i.y)/t,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144);(s=this._stencilMesh).scaleZ=(1e-4+2*i.z)/1e-4,s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),this._stencilMesh.set_follow(this.object.object);n=this._stencilMesh.material.passes,n.set_depthWrite(!1),n.set_enableLights(!1),n.set_depthTest(to.Always),e=new co;e.setFunc(to.Always,1,1,1),e.setOp(no.Keep,no.Keep,no.Replace),n.stencil=e},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:q_}),function(e){q_.call(this,e)}),J_=((i["hacksaw.slotcommon.components.actor.ReelGridRendererComponent"]=K_).__name__="hacksaw.slotcommon.components.actor.ReelGridRendererComponent",K_.__super__=q_,K_.prototype=e(q_.prototype,{init:function(){q_.prototype.init.call(this);var e=this._reelModel.get_symSize(),t=this._reelModel.get_initGrid(),n=t.mW*e.x,e=t.mH*e.y;this._config.useStencil&&this.addStencil(n,e,st.to3dPoint(this._reelModel.get_stencilPos()),st.to3dPoint(this._reelModel.get_stencilMargins())),this._origReelSize={x:n,y:e},this._reelModel.setGrid(t),this._reelModel.reelHolder=this.object.object},addAsset:function(z,Q,V){if(null==z)return null;null==V&&(V=0<(P=this._reelModel.symPools.h[z]).size?P.mPool[--P.size]:P.mFactory());var O=il.find(this._reelModel.get_symbols(),function(e){return e.id==z});if(0==V._hx_index){var W=V.object,N=null!=Q?Q:null!=O?O.initState:null;if(W.reset(),W.object.set_name("SymbolHolder|"+z+"|"),null==N)L=N;else switch(N._hx_index){case 1:var G=N.tile,e=N.overlay,U=N.replace,L=Xf.Animation(wu.Tile(new _a(N.name,null,null,null,new Oh({frames:[G],width:0|G.width,height:0|G.height},null,!0,null,null,null,null==e||e,null,null,null,null,null,null,null,null,null!=U&&U,null,null,null==e||e,null,null),!0)));break;case 3:L=null;break;default:L=N}if(null!=L)switch(L._hx_index){case 0:if(null!=(G=L.type))switch(G._hx_index){case 0:case 2:e=G.anim;W.animator.animations.h[e.name]=G,this.presentSymbol(V,e.name);break;default:throw new tl("Animation type not implemented for default symbol state: "+el.string(G))}break;case 1:throw new tl("Animation state "+el.string(L)+" not implemented");case 2:for(var G=L.animation,e=L.skin,j=$f.getSymbol(V).symbolObject.object,j=j instanceof bh?j:null,H=(P=j.animationState).queue.drainDisabled,Y=(P.queue.drainDisabled=!0,P.tracks),t=0,n=P.tracks.length;t<n;){if(null!=(y=Y[t])){var Z=y.trackIndex,i=Rw.emptyAnimation;if(Z<0)throw tl.thrown(new Dw("trackIndex must be >= 0."));if(null==i)throw tl.thrown(new Dw("animation cannot be null."));var X,q=!0,s=Z<P.tracks.length?P.tracks[Z]:((re=Z+1)<(oe=(D=P.tracks).length)?D.splice(re,re-oe):oe<re&&(D[re-1]=null),null);if(null!=s)if(-1==s.nextTrackLast){P.tracks[Z]=s.mixingFrom,(k=P.queue).objects.push(1),k.objects.push(s);(ue=P.queue).objects.push(2),ue.objects.push(s),ue.AnimationState_this.animationsChanged=!0;for(var a=s.next;null!=a;)(he=P.queue).objects.push(3),he.objects.push(a),a=a.next;s.next=null,s=s.mixingFrom,q=!1}else{for(var K=s.next;null!=K;)(ce=P.queue).objects.push(3),ce.objects.push(K),K=K.next;s.next=null}if((S=P.trackEntryPool.obtain()).trackIndex=Z,S.animation=i,S.loop=!1,S.holdPrevious=!1,S.eventThreshold=0,S.attachmentThreshold=0,S.drawOrderThreshold=0,S.animationStart=0,S.animationEnd=i.getDuration(),S.animationLast=-1,S.nextAnimationLast=-1,S.delay=0,S.trackTime=0,S.trackLast=-1,S.nextTrackLast=-1,S.trackEnd=999999999,S.timeScale=1,S.alpha=1,S.interruptAlpha=1,S.mixTime=0,null==s)yn=0;else{var J=P.data;if(null==(v=s.animation))throw tl.thrown(new Dw("from cannot be null."));if(null==i)throw tl.thrown(new Dw("to cannot be null."));J.tempAnimationStateDataKey.a1=v,J.tempAnimationStateDataKey.a2=i;var $=J.animationToMixTime,ee=J.tempAnimationStateDataKey,s=J.defaultMix,i=(null==s&&(s=0),ee.getHashCode()),l=s;if(null!=(yt=$.h[i]))for(var U=0,te=yt.length;U<te;)if((ye=yt[U++]).key.equals(ee)){l=ye.value;break}yn=l}S.mixDuration=yn,S.mixBlend=2,b=Z<P.tracks.length?P.tracks[Z]:((s=Z+1)<(X=(i=P.tracks).length)?i.splice(s,s-X):X<s&&(i[s-1]=null),null),((P.tracks[Z]=S).previous=null)!=b&&(q&&((se=P.queue).objects.push(1),se.objects.push(b)),((S.mixingFrom=b).mixingTo=S).mixTime=0,null!=b.mixingFrom&&0<b.mixDuration&&(S.interruptAlpha*=Math.min(1,b.mixTime/b.mixDuration)),(X=b.timelinesRotation).splice(0,X.length));(_e=P.queue).objects.push(0),_e.objects.push(S),_e.AnimationState_this.animationsChanged=!0;var r=P.queue;if(!r.drainDisabled){r.drainDisabled=!0;for(var o=r.AnimationState_this.listeners,ne=0;ne<r.objects.length;){var u=r.objects[ne],h=r.objects[ne+1],c=o.array.length,_=o.begin();do{if(0==u){null!=h.listener&&h.listener.start(h);for(var d=0;d<c;)_[d].start(h),++d;break}if(1==u){null!=h.listener&&h.listener.interrupt(h);for(var p=0;p<c;)_[p].interrupt(h),++p;break}if(2==u){null!=h.listener&&h.listener.end(h);for(var m=0;m<c;)_[m].end(h),++m;null!=h.listener&&h.listener.dispose(h);for(var g=0;g<c;)_[g].dispose(h),++g;r.AnimationState_this.trackEntryPool.free(h);break}if(3==u){null!=h.listener&&h.listener.dispose(h);for(var f=0;f<c;)_[f].dispose(h),++f;r.AnimationState_this.trackEntryPool.free(h);break}if(4==u){null!=h.listener&&h.listener.complete(h);for(var A=0;A<c;)_[A].complete(h),++A;break}if(5==u){for(var x=r.objects[2+ne++],w=(null!=h.listener&&h.listener.event(h,x),0);w<c;)_[w].event(h,x),++w;break}}while(0);o.end(),ne+=2}i=r.objects;i.splice(0,i.length),r.drainDisabled=!1}S.mixDuration=0,S.trackEnd=0}++t}if(P.queue.drainDisabled=H,!(k=P.queue).drainDisabled){k.drainDisabled=!0;for(o=k.AnimationState_this.listeners,t=0;t<k.objects.length;){var u=k.objects[t],y=k.objects[t+1],c=o.array.length,_=o.begin();do{if(0==u){null!=y.listener&&y.listener.start(y);for(d=0;d<c;)_[d].start(y),++d;break}if(1==u){null!=y.listener&&y.listener.interrupt(y);for(p=0;p<c;)_[p].interrupt(y),++p;break}if(2==u){null!=y.listener&&y.listener.end(y);for(m=0;m<c;)_[m].end(y),++m;null!=y.listener&&y.listener.dispose(y);for(g=0;g<c;)_[g].dispose(y),++g;k.AnimationState_this.trackEntryPool.free(y);break}if(3==u){null!=y.listener&&y.listener.dispose(y);for(f=0;f<c;)_[f].dispose(y),++f;k.AnimationState_this.trackEntryPool.free(y);break}if(4==u){null!=y.listener&&y.listener.complete(y);for(A=0;A<c;)_[A].complete(y),++A;break}if(5==u){for(l=k.objects[2+t++],w=(null!=y.listener&&y.listener.event(y,l),0);w<c;)_[w].event(y,l),++w;break}}while(0);o.end(),t+=2}(D=k.objects).splice(0,D.length),k.drainDisabled=!1}for(var ie=0*(P=j.animationState).timeScale,Y=P.tracks,t=0,n=P.tracks.length;t<n;){if(null==(y=Y[t]));else{y.animationLast=y.nextAnimationLast,y.trackLast=y.nextTrackLast;var b,se,ae,le=ie*y.timeScale;if(0<y.delay){if(y.delay-=le,0<y.delay){++t;continue}le=-y.delay,y.delay=0}if(null!=(a=y.next)){var v,re,oe,ue,C=y.trackLast-a.delay;if(0<=C){for(a.delay=0,a.trackTime+=0==y.timeScale?0:(C/y.timeScale+ie)*a.timeScale,y.trackTime+=le,v=t<P.tracks.length?P.tracks[t]:((re=t+1)<(oe=(D=P.tracks).length)?D.splice(re,re-oe):oe<re&&(D[re-1]=null),null),((P.tracks[t]=a).previous=null)!=v&&((k=P.queue).objects.push(1),k.objects.push(v),((a.mixingFrom=v).mixingTo=a).mixTime=0,null!=v.mixingFrom&&0<v.mixDuration&&(a.interruptAlpha*=Math.min(1,v.mixTime/v.mixDuration)),($=v.timelinesRotation).splice(0,$.length)),(ue=P.queue).objects.push(0),ue.objects.push(a),ue.AnimationState_this.animationsChanged=!0;null!=a.mixingFrom;)a.mixTime+=ie,a=a.mixingFrom;++t;continue}}else if(y.trackLast>=y.trackEnd&&null==y.mixingFrom){Y[t]=null;(he=P.queue).objects.push(2),he.objects.push(y),he.AnimationState_this.animationsChanged=!0;for(var he,ce,K=y.next;null!=K;)(ce=P.queue).objects.push(3),ce.objects.push(K),K=K.next;y.next=null,++t;continue}if(yn=null!=y.mixingFrom&&(null==(b=y.mixingFrom)||(ae=null==(C=b.mixingFrom)||(ae=P.updateMixingFrom(C,ie),C.animationLast=C.nextAnimationLast,C.trackLast=C.nextTrackLast,0<b.mixTime&&b.mixTime>=b.mixDuration?(0!=C.totalAlpha&&0!=b.mixDuration||(b.mixingFrom=C.mixingFrom,null!=C.mixingFrom&&(C.mixingFrom.mixingTo=b),b.interruptAlpha=C.interruptAlpha,(J=P.queue).objects.push(2),J.objects.push(C),J.AnimationState_this.animationsChanged=!0),ae):(C.trackTime+=ie*C.timeScale,b.mixTime+=ie,!1)),b.animationLast=b.nextAnimationLast,b.trackLast=b.nextTrackLast,0<y.mixTime&&y.mixTime>=y.mixDuration?(0!=b.totalAlpha&&0!=y.mixDuration||(y.mixingFrom=b.mixingFrom,null!=b.mixingFrom&&(b.mixingFrom.mixingTo=y),y.interruptAlpha=b.interruptAlpha,(se=P.queue).objects.push(2),se.objects.push(b),se.AnimationState_this.animationsChanged=!0),ae):(b.trackTime+=ie*b.timeScale,y.mixTime+=ie,!1)))){var _e,de=y.mixingFrom;for((y.mixingFrom=null)!=de&&(de.mixingTo=null);null!=de;)(_e=P.queue).objects.push(2),_e.objects.push(de),_e.AnimationState_this.animationsChanged=!0,de=de.mixingFrom}y.trackTime+=le}++t}if(!(k=P.queue).drainDisabled){k.drainDisabled=!0;for(o=k.AnimationState_this.listeners,t=0;t<k.objects.length;){u=k.objects[t],y=k.objects[t+1],c=o.array.length,_=o.begin();do{if(0==u){null!=y.listener&&y.listener.start(y);for(d=0;d<c;)_[d].start(y),++d;break}if(1==u){null!=y.listener&&y.listener.interrupt(y);for(p=0;p<c;)_[p].interrupt(y),++p;break}if(2==u){null!=y.listener&&y.listener.end(y);for(m=0;m<c;)_[m].end(y),++m;null!=y.listener&&y.listener.dispose(y);for(g=0;g<c;)_[g].dispose(y),++g;k.AnimationState_this.trackEntryPool.free(y);break}if(3==u){null!=y.listener&&y.listener.dispose(y);for(f=0;f<c;)_[f].dispose(y),++f;k.AnimationState_this.trackEntryPool.free(y);break}if(4==u){null!=y.listener&&y.listener.complete(y);for(A=0;A<c;)_[A].complete(y),++A;break}if(5==u){for(l=k.objects[2+t++],w=(null!=y.listener&&y.listener.event(y,l),0);w<c;)_[w].event(y,l),++w;break}}while(0);o.end(),t+=2}(D=k.objects).splice(0,D.length),k.drainDisabled=!1}if(null!=e&&null!=j){if(e!=(P=j.skeleton).skin){if(null!=e)if(null!=P.skin)for(var pe=P.slots,U=0,te=dy.orderedItems(P.skin.attachments);U<te.length;){var S=te[U];if(++U,(y=pe[xt=S.slotIndex]).attachment==S.attachment){var me=S.name,k=e.lookup;if(xt<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==me)throw tl.thrown(new Dw("name cannot be null."));k.slotIndex=xt;var ge=0;if(0==(k.name=me).length)be=0;else{for(var fe=0,Ae=me.length;fe<Ae;)ge=(ge<<5)-ge+Jn.cca(me,fe++);be=ge}k.hashCode=be+37*xt|0;ee=e.lookup,l=null;if(null!=(yt=e.attachments.h[ee.hashCode]))for(var xe=0,we=yt.length;xe<we;){var ye=yt[xe++];if(yn=null!=(ve=ee)&&ye.slotIndex==(h=ve).slotIndex&&ye.name==h.name){l=ye;break}}null!=(F=null!=l?l.attachment:null)&&y.attachment!=F&&((!(F instanceof Xw&&y.attachment instanceof Xw)||(R=y.attachment,(null!=(x=F).deformAttachment?x.deformAttachment:x)!=(null!=R.deformAttachment?R.deformAttachment:R)))&&(D=y.deform).splice(0,D.length),y.attachment=F,y.attachmentTime=y.bone.skeleton.time)}}else for(pe=P.slots,t=0,n=P.slots.length;t<n;){if(null!=(me=(y=pe[t]).data.attachmentName)){k=e.lookup;if(t<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==me)throw tl.thrown(new Dw("name cannot be null."));k.slotIndex=t;var be,ge=0;if(0==(k.name=me).length)be=0;else{for(U=0,te=me.length;U<te;)ge=(ge<<5)-ge+Jn.cca(me,U++);be=ge}k.hashCode=be+37*t|0;ee=e.lookup,l=null;if(null!=(yt=e.attachments.h[ee.hashCode]))for(fe=0,Ae=yt.length;fe<Ae;){var ve,S=yt[fe++];if(yn=null!=(ve=ee)&&S.slotIndex==(h=ve).slotIndex&&S.name==h.name){l=S;break}}null!=(F=null!=(ye=l)?ye.attachment:null)&&y.attachment!=F&&((!(F instanceof Xw&&y.attachment instanceof Xw)||(R=y.attachment,(null!=(x=F).deformAttachment?x.deformAttachment:x)!=(null!=R.deformAttachment?R.deformAttachment:R)))&&(D=y.deform).splice(0,D.length),y.attachment=F,y.attachmentTime=y.bone.skeleton.time)}++t}P.skin=e;for(var H=P.cache,Ce=(H.splice(0,H.length),P.bones.length),Se=P.bones,t=0;t<Ce;)(y=Se[t]).sorted=y.data.skinRequired,y.active=!y.sorted,++t;if(null!=P.skin)for(var ke=P.skin.bones,t=0,n=P.skin.bones.length;t<n;){for(var Me=Se[ke[t].index];Me.sorted=!1,Me.active=!0,null!=(Me=Me.parent););++t}for(var Ie=P.ikConstraints.length,Be=P.transformConstraints.length,Te=P.pathConstraints.length,Ee=P.ikConstraints,Fe=P.transformConstraints,De=P.pathConstraints,Re=Ie+Be+Te;;){for(var M=0,t=0;t<Re;){for(d=0;d<Ie;){if((y=Ee[d]).data.order==t){if(y.active=y.target.active&&(!y.data.skinRequired||null!=P.skin&&-1!=P.skin.constraints.indexOf(y.data)),y.active){var I=y.target,I=(I.sorted||(null==(xn=I.parent)||xn.sorted||(null!=(wn=xn.parent)&&P.sortBone(wn),xn.sorted=!0,P.cache.push(xn)),I.sorted=!0,P.cache.push(I)),y.bones),Pe=0<I.length?I[0]:null;if(Pe.sorted||(null==(We=Pe.parent)||We.sorted||(null!=(Ne=We.parent)&&P.sortBone(Ne),We.sorted=!0,P.cache.push(We)),Pe.sorted=!0,P.cache.push(Pe)),1==I.length){P.cache.push(y);for(var ze=Pe.children,ne=0,n=ze.length;ne<n;){if((l=ze[ne]).active){if(l.sorted)for(var Qe=l.children,Ve=0,Oe=Qe.length;Ve<Oe;)(h=Qe[Ve]).active?(h.sorted&&P.sortReset(h.children),h.sorted=!1,++Ve):++Ve;l.sorted=!1}++ne}}else{for(var We,Ne=0==I.length?null:I[I.length-1],Ge=(Ne.sorted||(null==(We=Ne.parent)||We.sorted||(null!=(I=We.parent)&&P.sortBone(I),We.sorted=!0,P.cache.push(We)),Ne.sorted=!0,P.cache.push(Ne)),P.cache.push(y),Pe.children),Ue=0,Le=Ge.length;Ue<Le;){if((x=Ge[Ue]).active){if(x.sorted)for(var je=x.children,He=0,Ye=je.length;He<Ye;)(R=je[He]).active?(R.sorted&&P.sortReset(R.children),R.sorted=!1,++He):++He;x.sorted=!1}++Ue}Ne.sorted=!0}}M=2;break}++d}if(2==M)M=0;else{if(1<=M)break;for(p=0;p<Be;){var Ze=Fe[p];if(Ze.data.order==t){if(Ze.active=Ze.target.active&&(!Ze.data.skinRequired||null!=P.skin&&-1!=P.skin.constraints.indexOf(Ze.data)),Ze.active){(Me=Ze.target).sorted||(null==(Xe=Me.parent)||Xe.sorted||(null!=(qe=Xe.parent)&&P.sortBone(qe),Xe.sorted=!0,P.cache.push(Xe)),Me.sorted=!0,P.cache.push(Me));var Xe,qe,Ke=Ze.bones,Je=Ze.bones.length;if(Ze.data.local)for(var $e=0;$e<Je;){var et,tt,nt=Ke[$e],it=nt.parent;it.sorted||(null==(tt=it.parent)||tt.sorted||(null!=(et=tt.parent)&&P.sortBone(et),tt.sorted=!0,P.cache.push(tt)),it.sorted=!0,P.cache.push(it)),nt.sorted||(null==(et=nt.parent)||et.sorted||(null!=(tt=et.parent)&&P.sortBone(tt),et.sorted=!0,P.cache.push(et)),nt.sorted=!0,P.cache.push(nt)),++$e}else for(var st=0;st<Je;){var at,lt,rt=Ke[st];rt.sorted||(null==(at=rt.parent)||at.sorted||(null!=(lt=at.parent)&&P.sortBone(lt),at.sorted=!0,P.cache.push(at)),rt.sorted=!0,P.cache.push(rt)),++st}P.cache.push(Ze);for(var ot=0;ot<Je;){for(var ut=Ke[ot].children,ht=0,ct=ut.length;ht<ct;){var _t=ut[ht];if(_t.active){if(_t.sorted)for(var dt=_t.children,pt=0,mt=dt.length;pt<mt;){var gt=dt[pt];gt.active?(gt.sorted&&P.sortReset(gt.children),gt.sorted=!1,++pt):++pt}_t.sorted=!1}++ht}++ot}for(var ft=0;ft<Je;)Ke[ft].sorted=!0,++ft}M=2;break}++p}if(2==M)M=0;else{if(1<=M)break;for(m=0;m<Te;){var At=De[m];if(At.data.order==t){if(At.active=At.target.bone.active&&(!At.data.skinRequired||null!=P.skin&&-1!=P.skin.constraints.indexOf(At.data)),At.active){var B=At.target,xt=B.data.index,T=B.bone;if(null!=P.skin)for(var wt=P.skin,yt=dy.orderedItems(wt.attachments),bt=0,vt=dy.get_size(wt.attachments);bt<vt;){var Ct=yt[bt];if(Ct.slotIndex==xt)if((F=Ct.attachment)instanceof $w){var St,kt=F.bones;if(null==kt)T.sorted||(null==(Ct=T.parent)||Ct.sorted||(null!=(St=Ct.parent)&&P.sortBone(St),Ct.sorted=!0,P.cache.push(Ct)),T.sorted=!0,P.cache.push(T));else for(var Mt=P.bones,It=0,Bt=kt.length;It<Bt;){var Tt=kt[It++];for(Tt+=It;It<Tt;){var Et,Ft,Dt=Mt[kt[It++]];Dt.sorted||(null==(Et=Dt.parent)||Et.sorted||(null!=(Ft=Et.parent)&&P.sortBone(Ft),Et.sorted=!0,P.cache.push(Et)),Dt.sorted=!0,P.cache.push(Dt))}}}++bt}if(null!=P.data.defaultSkin&&P.data.defaultSkin!=P.skin)for(var wt=P.data.defaultSkin,Rt=dy.orderedItems(wt.attachments),Pt=0,zt=dy.get_size(wt.attachments);Pt<zt;){var Qt=Rt[Pt];if(Qt.slotIndex==xt)if((bn=Qt.attachment)instanceof $w){var Vt,Ot=bn.bones;if(null==Ot)T.sorted||(null==(Qt=T.parent)||Qt.sorted||(null!=(Vt=Qt.parent)&&P.sortBone(Vt),Qt.sorted=!0,P.cache.push(Qt)),T.sorted=!0,P.cache.push(T));else for(var Wt=P.bones,Nt=0,Gt=Ot.length;Nt<Gt;){var Ut=Ot[Nt++];for(Ut+=Nt;Nt<Ut;){var Lt,jt,Ht=Wt[Ot[Nt++]];Ht.sorted||(null==(Lt=Ht.parent)||Lt.sorted||(null!=(jt=Lt.parent)&&P.sortBone(jt),Lt.sorted=!0,P.cache.push(Lt)),Ht.sorted=!0,P.cache.push(Ht))}}}++Pt}B=B.attachment;if(B instanceof $w&&B instanceof $w){var Yt,Zt=B.bones;if(null==Zt)T.sorted||(null==(B=T.parent)||B.sorted||(null!=(Yt=B.parent)&&P.sortBone(Yt),B.sorted=!0,P.cache.push(B)),T.sorted=!0,P.cache.push(T));else for(var Xt=P.bones,qt=0,Kt=Zt.length;qt<Kt;){var Jt=Zt[qt++];for(Jt+=qt;qt<Jt;){var $t,en,tn=Xt[Zt[qt++]];tn.sorted||(null==($t=tn.parent)||$t.sorted||(null!=(en=$t.parent)&&P.sortBone(en),$t.sorted=!0,P.cache.push($t)),tn.sorted=!0,P.cache.push(tn))}}}for(var nn=At.bones,sn=At.bones.length,an=0;an<sn;){var ln,rn,on=nn[an];on.sorted||(null==(ln=on.parent)||ln.sorted||(null!=(rn=ln.parent)&&P.sortBone(rn),ln.sorted=!0,P.cache.push(ln)),on.sorted=!0,P.cache.push(on)),++an}P.cache.push(At);for(var un=0;un<sn;){for(var hn=nn[un].children,cn=0,_n=hn.length;cn<_n;){var dn=hn[cn];if(dn.active){if(dn.sorted)for(var pn=dn.children,mn=0,gn=pn.length;mn<gn;){var fn=pn[mn];fn.active?(fn.sorted&&P.sortReset(fn.children),fn.sorted=!1,++mn):++mn}dn.sorted=!1}++cn}++un}for(var An=0;An<sn;)nn[An].sorted=!0,++An}M=2;break}++m}if(2==M)M=0;else if(1<=M)break}}++t}if(0==M)break}for(var xn,wn,t=0;t<Ce;)(y=Se[t]).sorted||(null==(xn=y.parent)||xn.sorted||(null!=(wn=xn.parent)&&P.sortBone(wn),xn.sorted=!0,P.cache.push(xn)),y.sorted=!0,P.cache.push(y)),++t}j.update(0)}for(Se=(P=j.skeleton).bones,t=0,n=P.bones.length;t<n;){var E=(y=Se[t]).data;y.x=E.x,y.y=E.y,y.rotation=E.rotation,y.scaleX=E.scaleX,y.scaleY=E.scaleY,y.shearX=E.shearX,y.shearY=E.shearY,++t}for(Ee=P.ikConstraints,t=0,n=P.ikConstraints.length;t<n;)(y=Ee[t]).mix=y.data.mix,y.softness=y.data.softness,y.bendDirection=y.data.bendDirection,y.compress=y.data.compress,y.stretch=y.data.stretch,++t;for(Fe=P.transformConstraints,t=0,n=P.transformConstraints.length;t<n;){E=(y=Fe[t]).data;y.mixRotate=E.mixRotate,y.mixX=E.mixX,y.mixY=E.mixY,y.mixScaleX=E.mixScaleX,y.mixScaleY=E.mixScaleY,y.mixShearY=E.mixShearY,++t}for(De=P.pathConstraints,t=0,n=P.pathConstraints.length;t<n;){E=(y=De[t]).data;y.position=E.position,y.spacing=E.spacing,y.mixRotate=E.mixRotate,y.mixX=E.mixX,y.mixY=E.mixY,++t}for(pe=P.slots,n=P.slots.length,t=(_y.copy(pe,0,P.drawOrder,0,n),0);t<n;){var F,yn,D,bn,R,P=(y=pe[t]).color,vn=y.data.color;P.r=vn.r,P.g=vn.g,P.b=vn.b,P.a=vn.a,null!=y.darkColor&&(k=y.darkColor,vn=y.data.darkColor,k.r=vn.r,k.g=vn.g,k.b=vn.b,k.a=vn.a),null==y.data.attachmentName?y.attachment!=(F=null)&&((yn=!(F instanceof Xw&&y.attachment instanceof Xw)||(h=y.attachment,(null!=(l=F).deformAttachment?l.deformAttachment:l)!=(null!=h.deformAttachment?h.deformAttachment:h)))&&(D=y.deform).splice(0,D.length),y.attachment=F,y.attachmentTime=y.bone.skeleton.time):(y.attachment=null,bn=y.bone.skeleton.getAttachment(y.data.index,y.data.attachmentName),y.attachment!=bn&&((!(bn instanceof Xw&&y.attachment instanceof Xw)||(R=y.attachment,(null!=(x=bn).deformAttachment?x.deformAttachment:x)!=(null!=R.deformAttachment?R.deformAttachment:R)))&&($=y.deform).splice(0,$.length),y.attachment=bn,y.attachmentTime=y.bone.skeleton.time)),++t}null!=G&&this.presentSymbol(V,G);break;case 3:throw new tl("Animation state "+el.string(L)+" not implemented")}this.object.addChild(W.object.object),null!=(yn=null!=O?O.attachments:null)&&il.each(yn,Cn(W,W.attach))}return V},removeAsset:function(e){var t,n;null!=e&&((t=e.object).reset(),t.object.get_parent(),null!=t.object.get_parent())&&((n=this._reelModel.symPools.h[t.id]).size==n.maxSize?n.mDispose(e):(n.size==n.mCapacity&&n.resize(),n.mPool[n.size++]=e),t.object.remove())},showWin:function(o,u,e,a){null==a&&(a=!1),null==e&&(e=OA.None);for(var h=this,l=new qy,t=o.mask,n=this._reelModel.get_width(),i=this._reelModel.get_height(),s=t.split(""),r=new Array(s.length),c=0,_=s.length;c<_;){var d=c++;r[d]="1"==s[d]}var p,m=new Hl(n,i,r),i=(o.stick&&((g=null!=(n=this.owner._compMap)?n.h[O_.BASE_NAME]:null)instanceof O_?g:null).showStickies(new H_(o.mask,null,null)),il.find(this._reelModel.get_symbols(),function(e){return e.id==el.parseInt(o.symbol)}));switch(u._hx_index){case 0:case 1:f=[];break;case 2:f=this._gridInitLines;break;case 3:f=this._winInitLines;break;case 4:f=this._winLines;break;case 5:f=this._winExitLines;break;case 6:f=this._gridExitLines;break;case 7:var g,f=null==(g=this._idleGridInitLines)?this._gridInitLines:g;break;case 8:f=null==(g=this._idleWinInitLines)?this._winInitLines:g;break;case 9:f=this._idleLines;break;case 10:f=null==(g=this._idleWinExitLines)?this._winExitLines:g;break;case 11:f=null==(g=this._idleGridExitLines)?this._gridExitLines:g;break;case 12:f=this._specialLines.h[u.id];break;case 13:f=this._lockPresentations}if(null==f||0==f.length)l.trigger([]);else{switch(u._hx_index){case 2:case 6:case 7:case 11:p=!0;break;default:p=!1}if(FA.sort(f,function(e,t){return 1==e.instance.type._hx_index?-1:1}),p){o=X.copy(o);for(var t="",A=this._reelModel.get_width()*this._reelModel.get_height(),c=0;c<A;)++c,t+="1";o.mask=t,o.symbol=null}var x,w=m.getValArea(!0);switch(u._hx_index){case 4:x=!0;break;case 0:case 1:case 9:case 13:case 12:x=!0;break;default:x=!1}if(x&&4==u._hx_index)switch(e._hx_index){case 0:e.v&&(c=o.winFactor,y=new Df(w.x,w.y,w.x+w.w,w.y+w.h,el.parseInt(o.count),this._reelActor.get_turboMode(),c),this._gameChannel.publish("presentWinSummary",y));break;case 1:var c=o.symbol,_=o.winFactor,y=new Ff(w.x,w.y,w.x+w.w,w.y+w.h,el.parseInt(o.count),this._reelActor.get_turboMode(),c,_);this._gameChannel.publish("presentWin",y)}for(var b=[],v=x?function(e){var t,n,i;switch(e._hx_index){case 0:t=qf.SymbolCell(e.cell);break;case 1:t=qf.SymbolArea(e.area);break;case 2:case 3:case 4:t=null}switch(e._hx_index){case 0:case 1:n=e.id;break;case 2:case 3:case 4:n=null}switch(t._hx_index){case 0:var s=t.area,a=o.symbol,l=o.winFactor,r=new Ff(s.x,s.y,s.x+s.w,s.y+s.h,el.parseInt(o.count),h._reelActor.get_turboMode(),a,l);break;case 1:s=t.cell,a=o.winFactor;r=new Ef(s.x,s.y,o.symbol,h._reelActor.get_turboMode(),a)}if(h._gameChannel.publish(9==u._hx_index?n+"_idle":n,r),null!=r&&x){switch(t._hx_index){case 0:i=null;break;case 1:i=t.cell}null!=i&&-1==b.indexOf(i)&&(b.push(i),h._gameChannel.publish(9==u._hx_index?"presentWinSymbol_idle":"presentWinSymbol",r))}}:null,c=[],_=0;_<f.length;){var C=[f[_]],S=(++_,C[0].instance.start(o,null,u,null,e,v));c.push(null!=S?rt.map(S,(t=>function(e){return t[0].instance})(C)):null)}var k,n=il.filterNull(c);switch(e._hx_index){case 0:k=!e.v;break;case 1:k=!0}null==n||0==n.length?l.trigger([]):(this.hideSymbols(m),4==u._hx_index&&k&&hacksawCasino.PubSub.getChannel("game").publish(this._reelModel.messagePrefix+"showLine",{tier:o.tier,symbol:o.symbol,isScatter:i.isScatter,name:i.name,x:w.x,y:w.y,width:w.w,height:w.h,mask:m,lineLength:o.count}),rt.inParallel(n).handle(function(e){if(a)s=rt.NOISE;else{for(var t=[],n=0;n<e.length;)t.push(e[n++].end(o));var i=il.filterNull(t),s=9==u._hx_index?rt.noise(rt.inParallel(i)):rt.NOISE}s.handle(function(){l.trigger(e)}),h.showSymbols(m)}))}return l},update:function(t){q_.prototype.update.call(this,t);for(var e=[],n=this._reelModel.get_activeSymbolPresentations().keys();n.hasNext();)e.push(n.next());for(var i=il.filterNull(e),s=new Array(i.length),e=0,a=i.length;e<a;){var l=e++;s[l]=i[l]}for(var r=il.distinct(s),e=0;e<r.length;)r[e++].update(t);var o=this._reelModel.visibleSymbols.mapCells(function(e,t){return $f.getSymbol(e)}),u=this._reelModel.stickiedGrid;il.each(il.distinct(il.filterNull(o.concat(null!=u?u.mapCells(function(e,t){return $f.getSymbol(e)}):null))),function(e){-1==r.indexOf(e)&&e.update(t)})},presentSymbol:function(e,t,n){null==n&&(n=0);var i,s=this,a=e.object,n=(this._reelModel.activateSymbolPresentation(e),a.animator.play(new Hh(t,null,null,null),n)),l=a.animator.animations.h[t];if(null==l)i=!1;else switch(l._hx_index){case 0:i=l.anim.animation.loop;break;case 1:throw tl.thrown("Skin animations not implemented");case 2:i=l.anim.animation.loop}return n.handle(function(){i||s._reelModel.deactivateSymbolPresentation(e)}),rt.noise(n)},hideSymbols:function(e){if(null!=this._config.winPresentFadeOutAlpha)for(var t=this._reelModel.get_width(),n=this._reelModel.get_height(),n=this._reelModel.visibleSymbols.getCenterResized(t,n,null),i=n.mData,t=n.mW,s=0,a=n.mW*n.mH;s<a;){var l=s++,r=i[l];e.mData[(l/t|0)*e.mW+l%t]||null==r||r.object.setAlpha(this._config.winPresentFadeOutAlpha),i[l]=r}},showSymbols:function(e){if(null!=this._config.winPresentFadeOutAlpha)for(var t=this._reelModel.get_width(),n=this._reelModel.get_height(),n=this._reelModel.visibleSymbols.getCenterResized(t,n,null),i=n.mData,t=n.mW,s=0,a=n.mW*n.mH;s<a;){var l=s++,r=i[l];e.mData[(l/t|0)*e.mW+l%t]||null==r||r.object.setAlpha(1),i[l]=r}},get_baseName:function(){return"gasm.heaps.components.Heaps3DComponent"},__class__:K_}),(i["hacksaw.slotcommon.components.actor.ReelGridSpinReveal"]=Nc).__name__="hacksaw.slotcommon.components.actor.ReelGridSpinReveal",Nc.__super__=Wc,Nc.prototype=e(Wc.prototype,{init:function(){Wc.prototype.init.call(this);var e=this._model.behaviorModel.reveal;if(4!=e._hx_index)throw tl.thrown("ReelGridSpinReveal needs SpinModel");e=e.model,this._spinModel=e},start:function(){return this._spinModel.refreshConfig(),this.setOngoingBehavior(!0),this._spinModel.start(this._model.revealDirection)},end:function(e){var t=this,e=this._spinModel.end(e.result);return e.handle(function(){t.setOngoingBehavior(!1)}),e},slowdown:function(e,t){this._spinModel.slowdown(e,t)},stop:function(e){e=this._spinModel.getViewIndex(e);this._spinModel.stop(e)},update:function(e){this._spinModel.update(e),Wc.prototype.update.call(this,e)},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelRevealBase"},__class__:Nc}),(i["hacksaw.slotcommon.components.actor.ReelPresentationBase"]=Gc).__name__="hacksaw.slotcommon.components.actor.ReelPresentationBase",Gc.__super__=d,Gc.prototype=e(d.prototype,{init:function(){this._model=this.owner.getFromParentsByName(Md.BASE_NAME,Md),this.get_name(),this._reelActor=this.owner.getFromParentsByName(O_.BASE_NAME,O_),this._casinoModel=this.owner.getFromParentsByName(_u.BASE_NAME,_u),this._slotModel=this.owner.getFromParentsByName(Qd.BASE_NAME,Qd),this._gameChannel=hacksawCasino.PubSub.getChannel("game"),this._casinoChannel=hacksawCasino.PubSub.getChannel("casino"),d.prototype.init.call(this)},createInstance:function(e,t){var n=this;if(null==e)throw tl.thrown(this.get_name()+" Cannot create instance with null win");var i=this._instances,s=er.id(e);if(Object.prototype.hasOwnProperty.call(i.h,s))throw tl.thrown(this.get_name()+" Cannot create multiple instances for same win: "+el.string(e));var a=new qy,l=new qy,r=new ed(e,a,new qy,l,t,null,null,null,null,null),i=(this._model.activePresentations.push(r),r.completeTrigger.handle(function(){Jn.remove(n._model.activePresentations,r)}),this._instances),s=er.id(e);return i.h[s]=r},start:function(o,u,l,h,e,r){null==e&&(e=OA.None);var t,c=this;switch(e._hx_index){case 0:t=e.v;break;case 1:t=!1}if(t)return null;var n=this._instances,i=er.id(o),s=n.h[i],_=(null!=s&&(s.completeTrigger.trigger(null),n=c._instances,i=er.id(o),Object.prototype.hasOwnProperty.call(n.h,i))&&delete n.h[i],this.createInstance(o,l)),d=[],s=this.get_name().split("."),p=""+s[s.length-1]+this._presentationIndex,m=null!=(i=this._model.presentedSymbolAttentions.get(this.type))?i:new at,g=(null!=(i=m.h[p])?i:0)+1;if(null!=this._gridConf){var f,A,s=this._model.get_width(),a=this._model.get_height(),x=this.getSymbolGrid(l),w=null!=(i=this._slotModel.reelActor.currentEndRevealArgs)?i.passThroughConfig:null,y=(f=null!=w?w:null!=(i=this._slotModel.reelActor.currentEndReactArgs)?i.passThroughConfig:null,(h=null==h?x:h).getCenterResized(s,a,null));if(null!=o){for(var n=o.mask.split(""),b=new Array(n.length),v=0,C=n.length;v<C;){var S=v++;b[S]="1"==n[S]}A=new Hl(s,a,b)}else A=null;var k=this._gridConf.getCellDelays(A),M=il.distinct(il.filterNull(y.mapCells(function(e,t){var n=null!=(s=c._model.stickiedGrid)?s.mData[t.y*s.mW+t.x]:null,i=null!=n?n:e;switch(c.type._hx_index){case 3:case 4:case 6:case 11:a=t.x;break;default:var s,a=null!=(s=null==u?null:u.mW-1)?s:t.x}null==u&&(u=c._model.eventGrid),n=6==c.type._hx_index||!(null!=(s=(n=A).mData[t.y*n.mW+t.x])&&!s)&&(null==(s=null==(e=o.pos)?null:e.x==t.x&&e.y==t.y)||s);e=$f.getSymbol(i);if(null==e||!n)return null;if(!c.filter(new td(o,[e.id],u,a,h,null!=f?f.result:null),t,-1!=e.presented.indexOf(c.type)))return null;var l=k.mData[t.y*k.mW+t.x];switch(c.type._hx_index){case 0:case 2:case 3:case 4:case 5:case 10:return{asset:i,cell:t,delay:l};case 6:var r=y.mapToGrid(function(e,t){return null!=e}),r=c._gridConf.getCellDelays(r);return{asset:i,cell:t,delay:r.mData[t.y*r.mW+t.x]};case 11:return{asset:i,cell:t,delay:l};default:return null}})),function(e,t){return e.asset==t.asset});il.each(M,function(t){var e,n,i;switch(_.delay=Math.max(t.delay,_.delay),c.type._hx_index){case 0:if(null!=l){if(null==l)n=!1;else switch(l._hx_index){case 4:case 9:n=!0;break;default:n=!1}n&&c._gameChannel.publish(c._model.messagePrefix+"symbolWin",{winTier:o.tier,delay:t.delay,id:$f.getId(t.asset),x:t.cell.x,y:t.cell.y,idle:l==Hd.Idle,turboMode:c._reelActor.get_turboMode()})}e=!0;break;case 2:c._gameChannel.publish(c._model.messagePrefix+"symbolStick",{id:$f.getId(t.asset),x:t.cell.x,y:t.cell.y}),e=!0;break;case 4:m.h[p]=g,c._model.presentedSymbolAttentions.set(c.type,m);var s=be.count(c._model.settledSymbols,function(e){return $f.getId(e)==$f.getId(t.asset)});c._gameChannel.publish(c._model.messagePrefix+"scatterStopped",{index:t.cell.x,scatterLength:s,id:$f.getId(t.asset)}),e=!0;break;case 5:c.after(t.delay).handle(function(){5==c.type._hx_index&&c._gameChannel.publish(c._model.messagePrefix+"symbolRemove",{id:$f.getId(t.asset),x:t.cell.x,y:t.cell.y,delay:t.delay})}),e=!0;break;case 6:var a,s=(null!=(a=c._model.presentedScatterTriggers.h[p])?a:M.length-1)+1;M[M.length-1].cell==t.cell&&(c._model.presentedScatterTriggers.h[p]=s,c._model.presentedSymbolAttentions.set(c.type,m),m.h[p]=g,c._gameChannel.publish(c._model.messagePrefix+"scatterComplete",{index:t.cell.x,totalScatters:s,id:$f.getId(t.asset),delay:t.delay})),e=g<=s;break;default:e=!0}e&&(i=null!=(a=c._model.presented.h[t.cell.x])?a:[],$f.getSymbol(t.asset).presented.push(c.type),i.push(c.type),c._model.presented.h[t.cell.x]=i,c.after(c.get_maxDuration()).handle(function(){var e=c._model.presented.h[t.cell.x];null!=e&&Jn.remove(e,c.type)}),i=c.presentSymbol(t.asset,o,t.cell,t.delay,r),d.push(i))})}w=this._configDuration,i=null==w?null:null!=d&&0!=d.length?c.after(w):rt.NOISE;return null!=i&&i.handle(function(){var e=_.trigger;null!=e&&e.trigger(null)}),rt.inParallel(d).handle(function(){var e;null==c._configDuration&&null!=(e=_.trigger)&&e.trigger(null),_.showTrigger.trigger(null)}),_.trigger},end:function(e){var t=this,n=this.getInstance(e);if(null==n)return new Zy(new Yy(null));n.trigger=null;var i=this._instances,e=er.id(e);return Object.prototype.hasOwnProperty.call(i.h,e)&&delete i.h[e],n.showTrigger.handle(function(){(t._hasEndDuration&&0<n.endDuration?t.after(n.endDuration):new Zy(new Yy(null))).handle(function(){t._indefinite||n.completeTrigger.trigger(null)})}),n.completeTrigger},filter:function(n,e,t){if(null==this._filters)return!0;var i,s=n.result,s=null!=s?s:this._model.eventGrid,a=null!=s?s.mapToGrid(function(e,t){return t.x>n.reelIndex?null:e}):null;switch(this.type._hx_index){case 0:case 1:case 9:for(var l=this._filters,r=[],o=0;o<l.length;){var u=l[o];++o,1==u._hx_index&&r.push(u)}i=r;break;case 2:for(l=this._filters,r=[],o=0;o<l.length;){u=l[o];++o,4==u._hx_index&&r.push(u)}i=r;break;case 5:for(l=this._filters,r=[],o=0;o<l.length;){u=l[o];++o,2==u._hx_index&&r.push(u)}i=r;break;case 3:case 4:case 6:case 7:case 8:for(l=this._filters,r=[],o=0;o<l.length;){u=l[o];++o,0==u._hx_index&&r.push(u)}i=r;break;case 10:for(l=this._filters,r=[],o=0;o<l.length;){u=l[o];++o,3==u._hx_index&&r.push(u)}i=r;break;case 11:for(l=this._filters,r=[],o=0;o<l.length;){u=l[o];++o,0==u._hx_index&&r.push(u)}i=r}for(r=[],o=0;o<i.length;){var h=i[o];switch(++o,h._hx_index){case 0:var c=h.filter,_=h.inclusivity;switch(c._hx_index){case 0:v=this.filterOccurrance(c.symbols,c.ocurrances,c.threshold,n,e,t,c.reels,c.include,c.onlyNew);break;case 1:v=this.filterLastOccurrence(a,c.symbol,n,c.threshold,c.invert);break;case 2:v=this.filterNeighbor(a,c.symbols,c.next,c.reels,n);break;case 3:v=this.filterRemaining(a,c.symbols,c.threshold,c.remaining,c.over,c.reels,n,e,t);break;case 4:v=this.filterSymbol(c.include,c.exclude,n);break;case 5:v=this.filterSequence(c.include,c.threshold,e,n,c.rowSequence,c.columnSequence,c.reelRange,c.strictRowMatch);break;case 6:v=this.filterSticky(c.include,e,n);break;case 7:v=this.filterState(c.include,c.exclude,n);break;case 8:v=this.filterEvent(c.include,c.exclude,c.reels,n);break;case 9:v=this.filterSettings(c.turbo,c.autoplay,c.superTurbo,c.featureSpin,c.featureBuyName);break;case 10:v=this.filterRevealMode(c.include,c.exclude,c.reels,n);break;case 11:v=this.filterProximity(a,e,c.symbols,n,c.searchSelection,c.matchAll);break;case 12:v=this.filterPassThrough(c.include,c.exclude,e,n);break;case 13:v=this.filterSymbolAttachment(c.include,c.exclude,e,n)}y={_0:_,_1:v};break;case 1:var d=h.filter,_=h.inclusivity;switch(d._hx_index){case 0:C=this.filterGridContains(d.includes,n);break;case 1:C=this.filterTier(n,d.range);break;case 2:C=this.filterWinFactor(n,d.range);break;case 3:C=this.filterTotalWinFactor(d.range);break;case 4:C=this.filterCountupWin(d.showing);break;case 5:C=this.filterAmount(n,d.range);break;case 6:C=this.filterLastWin(n,d.isLast);break;case 7:C=this.filterStacks(n,d.hasStacks,d.range);break;case 8:C=this.filterSymbol(d.include,d.exclude,n);break;case 9:C=this.filterSymbolName(d.include,d.exclude,n);break;case 10:C=this.filterSticky(d.include,e,n);break;case 11:C=this.filterState(d.include,d.exclude,n);break;case 12:C=this.filterEvent(d.include,d.exclude,null,n);break;case 13:C=this.filterOccurrance([d.symbol],d.ocurrances,d.threshold,n,e,t,d.reels);break;case 14:C=this.filterSettings(d.turbo,d.autoplay,d.superTurbo,d.featureSpin,d.featureBuyName);break;case 15:C=this.filterLength(d.min,d.max);break;case 16:C=this.filterWinCount(d.min,d.max,n.win);break;case 17:C=this.filterRevealMode(d.include,d.exclude);break;case 18:C=this.filterIsMultiplied(d.isMultiplied,n);break;case 19:C=this.filterTotalMultiplier(d.range,d.isMultiplicative,n);break;case 20:C=this.filterProximity(a,e,d.symbols,n,d.searchSelection,d.matchAll);break;case 21:C=this.filterPassThrough(d.include,d.exclude,e,n);break;case 22:C=this.filterSymbolAttachment(d.include,d.exclude,e,n);break;case 23:C=this.filterLockedReel(d.isLocked,e)}y={_0:_,_1:C};break;case 2:var p=h.filter,m=h.inclusivity;switch(p._hx_index){case 0:k=this.filterSymbol(p.include,p.exclude,n);break;case 1:k=this.filterSymbolName(p.include,p.exclude,n);break;case 2:k=this.filterState(p.include,p.exclude,n);break;case 3:k=this.filterEvent(p.include,p.exclude,null,n);break;case 4:k=this.filterSettings(p.turbo,p.autoplay,p.superTurbo,p.featureSpin,p.featureBuyName);break;case 5:k=this.filterPassThrough(p.include,p.exclude,e,n);break;case 6:k=this.filterSymbolAttachment(p.include,p.exclude,e,n)}y={_0:m,_1:k};break;case 3:var g,f=h.filter,m=h.inclusivity;switch(f._hx_index){case 0:g=this.filterOccurrance([f.symbol],f.ocurrances,f.threshold,n,e,t,f.reels);break;case 1:g=this.filterNeighbor(a,f.symbols,f.next,f.reels,n);break;case 2:g=this.filterRemaining(a,[f.symbol],f.threshold,f.remaining,f.over,f.reels,n,e,t);break;case 3:g=this.filterSymbol(f.include,f.exclude,n);break;case 4:g=this.filterSticky(f.include,e,n);break;case 5:g=this.filterState(f.include,f.exclude,n);break;case 6:g=this.filterEvent(f.include,f.exclude,f.reels,n);break;case 7:g=this.filterSettings(f.turbo,f.autoplay,f.superTurbo,f.featureSpin,f.featureBuyName);break;case 8:g=this.filterRevealMode(f.include,f.exclude,f.reels,n);break;case 9:g=this.filterPassThrough(f.include,f.exclude,e,n);break;case 10:g=this.filterSymbolAttachment(f.include,f.exclude,e,n)}y={_0:m,_1:g};break;case 4:var A,x=h.filter,w=h.inclusivity;switch(x._hx_index){case 0:A=this.filterSymbol(x.include,x.exclude,n);break;case 1:A=this.filterState(x.include,x.exclude,n);break;case 2:A=this.filterEvent(x.include,x.exclude,null,n);break;case 3:A=this.filterSymbolAttachment(x.include,x.exclude,e,n);break;case 4:A=this.filterSettings(x.turbo,x.autoplay,x.superTurbo,x.featureSpin,x.featureBuyName);break;case 5:A=this.filterRevealMode(x.include,x.exclude);break;case 6:A=this.filterLockedReel(x.isLocked,e)}y={_0:w,_1:A}}r.push(y)}(o=new PA).set(Vf.Any,[]),o.set(Vf.Or,[]),o.set(Vf.And,[]);for(var y,b=function(e){e=e._1;return!!e.included&&!e.excluded},l=(y=il.groupByAppend(r,function(e){e=e._0;return null!=e?e:Vf.Any},o)).get(Vf.And),v=new Array(l.length),r=0,o=l.length;r<o;)v[S=r++]=b(l[S]);for(var l=y.get(Vf.Or),C=new Array(l.length),r=0,o=l.length;r<o;)C[S=r++]=b(l[S]);for(var S,l=y.get(Vf.Any),k=new Array(l.length),r=0,o=l.length;r<o;)k[S=r++]=b(l[S]);var s=null==C||0==C.length,M=il.all(v,function(e){return e}),s=null==k||0==k.length?s:il.all(k,function(e){return e}),I=il.any(C,function(e){return e});return!(!s&&!I)&&M},clearInstances:function(){for(var e=this._instances.h,t=Object.keys(e),n=t.length,i=0;i<n;)e[t[i++]].completeTrigger.trigger(null);this.clear(),this._instances.h=Object.create(null)},clear:function(){},getInstance:function(e){var t;return null!=this._instances&&null!=e?(t=this._instances,e=er.id(e),t.h[e]):null},presentSymbol:function(e,t,n,i,s){return null==i&&(i=0),null},filterGridContains:function(e,t){for(var n=t.symbolGrid,n=null!=n?n:this._model.settledSymbols,i=n.mW,s=n.mH,a=t.win.mask.split(""),l=new Array(a.length),r=0,o=a.length;r<o;){var u=r++;l[u]="1"==a[u]}return this.filterSymbolName(e,[],new td(null,il.filterNull(il.distinct(n.mapCellsByMask(new Hl(i,s,l),function(e,t){return null!=e?$f.getId(e):null}))),null,null,null,null))},filterSequence:function(o,u,e,h,t,n,c,i){function s(e,t){null==t&&(t=!1);var n=e.length,i=null==c?null:(i=h.reelIndex)>=(r=c).start&&i<=r.end,s=h.result.getCol(h.reelIndex,[]),a=0<h.reelIndex?h.result.getCol(h.reelIndex-1,[]):[],l=e.length>(null==u?o.length-1:u),t=!t&&e.length<o.length&&-1!=a.indexOf(o[e.length-1])&&-1==s.indexOf(o[e.length])&&e.length>=(null==u?o.length-1:u),e=null!=c&&(r=c,0<n)?h.reelIndex==r.start&&o[n-1]==o[0]||h.reelIndex!=r.start&&o[h.reelIndex-(t?n+1:n)]==o[0]:null,r=il.containsAnyExact(a,o)||il.containsAnyExact(s,o);return(l||t)&&(null==i?r:i)&&(null==e||e)}var a=this._model.settledSymbols.mapToGrid(function(e,t){return $f.getId(e)}),i=t&&null!=i&&i;if(null==(null==e?null:a.mData[e.y*a.mW+e.x]))w=null;else{for(var l=il.filterNull(a.getRow(e.y,[])),r=[],_=0,d=l.length;_<d;)r.push(il.commonsFromStart(l.slice(_++),o));for(var p=il.reduce(r,function(e,t){return t.length>e.length?t:e},[]),m=il.filterNull(a.getCol(e.x,[])),r=[],_=0,d=m.length;_<d;)r.push(il.commonsFromStart(m.slice(_++),o));var g=il.reduce(r,function(e,t){return t.length>e.length?t:e},[]),a=-1!=o.indexOf(l[l.length-1]),e=t&&s(p,!0),f=n&&s(g,!0);w=e&&a||f}e=w;if(i){for(var A=il.filterNull(h.result.mapCells(function(e,t){var n=h.result.getRow(t.y,[]);return-1!=o.indexOf(e)?{reel:t.x,sequence:il.commonsFromStart(n.slice(t.x,h.reelIndex+1),o)}:null})),r=[],_=0,d=A.length;_<d;){var x=A[_++],w=null==c?null:c.start+1;r.push(x.reel<=h.reelIndex&&h.reelIndex+1<=x.sequence.length+(null==w?0:w)?x.sequence:null)}k=s(il.reduce(il.filterNull(r),function(e,t){return t.length>e.length?t:e},[]))}else{for(var y=h.result.getCol(h.reelIndex,[]),b=new Hl(this._model.get_width(),this._model.get_height(),h.result.mData).transpose(),a=new Hl(b.mW,b.mH),v=a.mData,C=a.mW,_=0,d=a.mW*a.mH;_<d;)v[S=_++]=b.mData[(S/C|0)*b.mW+S%C];for(p=il.commonsFromStart(il.filterNull(a.mapCells(function(e,t){return-1!=o.indexOf(e)&&t.y<=h.reelIndex?e:null})),o),r=[],_=0,d=y.length;_<d;){var S=_++;r.push(-1!=o.indexOf(y[S])?il.commonsFromStart(o,y.slice(S)):null)}var g=il.reduce(il.filterNull(r),function(e,t){return t.length>e.length?t:e},[]),f=t&&s(p),i=n&&s(g),k=f||i}return{included:null==e?k:e,excluded:!1}},filterSymbol:function(t,e,n){for(var i=null!=t,s=(t=(null==t?[]:t).slice(),e=(null==e?[]:e).slice(),this._model.get_width()),a=this._model.get_height(),l=n.symbolGrid,r=(null!=l?l:this._model.settledSymbols).getCenterResized(s,a,null).mapToGrid(function(e,t){return $f.getId(e)}),o=this._model.get_symbols(),u=[],h=0;h<o.length;){var c=o[h];++h,c.isWild&&-1!=e.indexOf(c.id)&&u.push(c)}for(var o=this._model.get_symbols(),h=[],_=0;_<o.length;){c=o[_];++_,c.isWild&&-1!=t.indexOf(c.id)&&h.push(c)}for(var o=null!=(l=n.syms)?l:il.distinct(be.filter(r,function(e){return-1!=t.indexOf(e)})),d=new Array(o.length),_=0,p=o.length;_<p;){var m=[o[g=_++]],m=[il.find(this._model.get_symbols(),(t=>function(e){return e.id==t[0]})(m))];d[g]=null!=il.find(u,(t=>function(e){return e.id==(null!=t[0]?t[0].id:null)})(m))||null==m[0]?null:m[0].id}s=il.filterNull(d);if(null!=n.win)for(u=0;u<h.length;){for(var g,f=h[u],A=(++u,n.win.mask),x=this._model.get_width(),w=this._model.get_height(),o=A.split(""),d=new Array(o.length),_=0,p=o.length;_<p;)d[g=_++]="1"==o[g];-1==il.filterNull(r.mapCellsByMask(new Hl(x,w,d),function(e,t){return e})).indexOf(f.id)&&Jn.remove(t,f.id)}return{included:il.containsAnyExact(t,s)||!i,excluded:il.containsAnyExact(e,s)}},filterSymbolName:function(e,t,n){var i=[];if(null!=e)for(var s=0;s<e.length;)for(var a=e[s],l=(++s,0),r=this._model.get_symbols();l<r.length;){var o=r[l];if(++l,null==a)throw tl.thrown("[str] must not be null");new ot(a,"").match(o.name)&&i.push(o.id)}var u=[];if(null!=t)for(s=0;s<t.length;)for(a=t[s],l=(++s,0),r=this._model.get_symbols();l<r.length;){o=r[l];if(++l,null==a)throw tl.thrown("[str] must not be null");new ot(a,"").match(o.name)&&u.push(o.id)}return this.filterSymbol(0<i.length?i:null,0<u.length?u:null,n)},filterStacks:function(e,t,n){var i;return{included:null==e.win||!(null==e.win.stacks||!t)&&(null==n||(i=e.win.ways)>=n.start&&i<=n.end)||null==e.win.stacks&&!t,excluded:!1}},filterSticky:function(e,t,n){var i,s,a,l=!1;return null!=t&&(i=null!=(a=n.symbolGrid)?a:this._model.settledSymbols,s=this._slotModel.reelActor.getStickies(),l=null!=(n=null!=(a=n.result)?a:i.mapToGrid(function(e,t){return null!=e?$f.getId(e):null})).mData[t.y*n.mW+t.x]&&null!=(null!=s?s.mData[t.y*s.mW+t.x]:null)),{included:e?l:!l,excluded:!1}},filterState:function(e,t,n){var i=this._casinoModel.fsmController.get_currentStateName();if(null!=e){for(var s=new Array(e.length),a=0,l=e.length;a<l;){var r=e[h=a++].__name__.split(".");s[h]=r[r.length-1]}o=be.has(s,i)}else o=null;var o,u=null==o||o;if(null!=t){for(s=new Array(t.length),a=0,l=t.length;a<l;){var h,r=t[h=a++].__name__.split(".");s[h]=r[r.length-1]}o=be.has(s,i)}else o=null;return{included:u,excluded:null!=o&&o}},filterEvent:function(e,t,n,i){var s=null!=(a=this._casinoModel.currentEvent)?a.etn:null,a=(n=!(null!=(a=null!=n?be.has(n,i.reelIndex):null)&&!a)&&(null==(a=null!=e?be.has(e,Zo.toString(s)):null)||a),null!=t?be.has(t,Zo.toString(s)):null);return{included:n,excluded:null!=a&&a}},filterTier:function(e,t){return{included:null==e.win||(e=e.win.tier)>=t.start&&e<=t.end,excluded:!1}},filterCountupWin:function(e){var t=this._slotModel.reelActor.isLargeWin(this._casinoModel.win);return{included:t&&e||!t&&!e,excluded:!1}},filterWinFactor:function(e,t){return{included:null==e.win||(e=e.win.winFactor)>=t.start&&e<=t.end,excluded:!1}},filterTotalWinFactor:function(e){var t=Math.max(this._casinoModel.winFactor-this._casinoModel.get_winFactorTierOffset(),0);return{included:t>=e.start&&t<=e.end,excluded:!1}},filterAmount:function(e,t){var n,i=bA.parseString(e.win.winAmount),t=null==e.win||(e=t.start,0==(n=i.high-e.high|0)&&(n=xA.ucompare(i.low,e.low)),0<=(i.high<0?e.high<0?n:-1:0<=e.high?n:1)&&(e=t.end,0==(n=i.high-e.high|0)&&(n=xA.ucompare(i.low,e.low)),(i.high<0?e.high<0?n:-1:0<=e.high?n:1)<=0));return{included:t,excluded:!1}},filterLastWin:function(e,t){var n=this._slotModel.presentingWins,n=n[n.length-1];return{included:null==e.win||n==e.win&&t||n!=e.win&&!t,excluded:!1}},filterOccurrance:function(t,e,n,i,s,a,l,r,o){var u=(null!=(g=i.symbolGrid)?g:this._model.settledSymbols).mapToGrid(function(e,t){return null!=e?$f.getId(e):null},Dy.equality),s=null==s?null:u.mData[s.y*u.mW+s.x],r=null!=(g=null!=r?-1!=r.indexOf(s):null)&&g,h=null==s?null:-1!=t.indexOf(s);if(null!=h&&!h&&!r)return{included:!1,excluded:!1};if(null==s)h=null;else{var c=be.count(u,function(e){return-1!=t.indexOf(e)}),s=null!=(g=null!=l?-1!=l.indexOf(i.reelIndex):null)?g:u.contains(s);if(null!=l){for(var _=[],d=0;d<l.length;){var p=l[d];++d,p>i.reelIndex&&_.push(p)}g=_.length}else g=null;h={count:c,inCurrent:s,remainingReels:null!=g?g:u.mW-(i.reelIndex+1)}}for(var c=h,m=i.result.getCol(i.reelIndex,[]),_=[],d=0;d<m.length;){p=m[d];++d,-1!=t.indexOf(p)&&_.push(p)}var s=_.length,g=null==c?{count:s,inCurrent:0<s,remainingReels:i.result.mW-(i.reelIndex+1)}:c;return{included:!(!g.inCurrent||!(g.count+g.remainingReels>=(null!=n?n:0)||r)||a&&null!=o&&o)&&(u=g.count)>=e.start&&u<=e.end,excluded:!1}},filterLastOccurrence:function(e,i,t,n,s){var a,l,r;return-1==t.syms.indexOf(i)?{included:!1,excluded:!1}:(a=il.reduce(il.filterNull(t.result.mapCells(function(e,t){return e==i?t:null})),function(e,t){return(null!=e?e.x:null)>t.x?e:t},null),e=null!=(r=null==(r=t.symbolGrid)?null:r.mapToGrid(function(e,t){return $f.getId(e)}))?r:e,l=il.reducei(e.getCol(t.reelIndex,[]),function(e,t,n){return t==i&&e<n?n:e},0),t=new Bw(t.reelIndex,l),l=be.count(e,function(e){return e==i}),r=null==n?null:n<=l,e=(null==a?null:a.x==t.x&&a.y==t.y)&&(null==r||r),{included:s?!e:e,excluded:!1})},filterRemaining:function(e,n,t,i,s,a,l,r,o){null==o&&(o=!1);var u,h=c=null==r?null:(c=l.result,-1!=n.indexOf(c.mData[r.y*c.mW+r.x])),r=c=null==r?null:(u=il.reduce(il.filterNull(this._model.settledSymbols.mapCells(function(e,t){return null!=e?t.x:null},Dy.equality)),function(e,t){return t<e?e:t},0),il.filterNull(this._model.settledSymbols.mapCells(function(e,t){return-1!=n.indexOf($f.getId(e))&&t.x<u&&!o?e:null},Dy.equality)).length-1),c=null==e?null:il.filterNull(e.mapCells(function(e,t){return-1!=n.indexOf(e)&&be.has(l.syms,e)&&t.x<l.reelIndex?e:null})).length,e=null==r?null==c?0:c:r;return null==i&&(i=1),{included:(null==a||be.has(a,l.reelIndex))&&0<e&&t-i<=e&&(null==s||e<t+s)&&(null==h||h),excluded:!1}},filterNeighbor:function(e,t,n,i,s){null==n&&(n=!1);var a=!1;if(null!=e)for(var l=0;l<t.length;){var r=t[l];if(++l,be.has(s.syms,r)){var o=n?s.reelIndex+1:s.reelIndex-1;if(a=be.has(i,o)&&be.has(i,s.reelIndex)&&-1!=e.getCol(o,[]).indexOf(r))break}}return{included:a,excluded:!1}},filterProximity:function(e,t,n,i,s,a){null==a&&(a=!1);var l={included:!1,excluded:!1},i=i.result,i=null!=i?i:e;if(null!=i&&null!=t){for(var r=t,e=new Hl(i.mW,i.mH),o=e,u=o.mData,h=o.mW,c=0,_=o.mW*o.mH;c<_;){var d=c++;u[d]=d%h==r.x&&(d/h|0)==r.y}for(var p=e,Q=s,s=null,V=o=e,m=o.mW,g=o.mH,f=m*g,c=[],_=0;_<f;)++_,c.push(!1);var O,W,s=new Hl(m,g,c),m=il.filterNull(o.mapCellsByMask(p,function(e,t){return t})),A=(0,O=o.mW,W=o.mH,il.reduce(m,function(e,t){var n=t.x,i=t.y;switch(Q._hx_index){case 0:var s=Q.direction,a=Q.symmetry,l=f=Q.cells;switch(s._hx_index){case 0:break;case 1:case 2:throw new tl("Only cardinal and ordinal directions are allowed for grid spread")}l=null!=f?f:(M=V.mW-1,(B=V.mH-1)<M?M:B);for(var r=Kl.getSymmetryDirections(s,a),o=new Array(r.length),s=0,a=r.length;s<a;)o[h=s++]=.5*Math.PI+r[h];for(var u=new Array(o.length),s=0,a=o.length;s<a;){var h,c=o[h=s++],_=new Xt(n,i),d=Math.cos(c),p=-Math.sin(c),m=new qt,d=(m.px=n,m.py=i,m.lx=d,m.ly=p,m.normalize(),[Math.abs(Math.cos(c)),Math.abs(Math.sin(c))]),p=[1],c=(null==p[0]&&(p[0]=2),(Fy.nearEquals(p[0],2)?Math.sqrt(il.reduce(d,function(e,t){return e+=t*t},0)):Fy.nearEquals(p[0],1)?il.reduce(d,function(e,t){return e+=t},0):isFinite(p[0])?Math.pow(il.reduce(d,(n=>function(e,t){return e+=Math.pow(t,n[0])})(p),0),1/p[0]):il.reduce(d,function(e,t){return Math.max(e,t)},0))*l),p=m.px+c*m.lx,d=m.py+c*m.ly,c=p=null==p?0:p,m=d=null==d?0:d,d=(null==d&&(m=0),null==p&&(c=0),Math.round(c)),p=Math.round(m),c=d=null==d?0:d,m=p=null==p?0:p;if(_.x==c&&_.y==m)C=[_];else{for(var d=c-_.x<0?-1:1,p=Ry.range(_.x,c+d,d),c=m-_.y<0?-1:1,d=Ry.range(_.y,m+c,c),r=(p.length>d.length?vy.resize(d,p.length,_.y):d.length>p.length&&vy.resize(p,d.length,_.x),il.zip(p,d)),g=new Array(r.length),f=0,A=r.length;f<A;){var x=f++,w=r[x];g[x]=new Xt(w._0,w._1)}for(var y=[],b=0;b<g.length;){var v=g[b];++b,0<=v.x&&v.x<O&&0<=v.y&&v.y<W&&y.push(v)}C=y}u[h]=C}for(s=0;s<u.length;)for(var C=u[s],S=(++s,0);S<C.length;){var k=C[S];e.mData[k.y*e.mW+k.x][S++]=t}break;case 1:for(var s=Q.width,M=i-(a=Q.height),I=i+a+1,B=V.mH,T=n-s,E=0<T?T:0,F=V.mW,z=(T=n+s+1)<F?T:F,s=0<M?M:0,a=I<B?I:B;s<a;)for(var D=s++,f=E,A=z;f<A;){var R=f++,M=(v=n-R)<0?-v:v,P=i-D,B=P<0?-P:P;e.mData[D*e.mW+R][B<M?M:B]=t}}return e},o.mapToGrid(function(e,t){return p.mData[t.y*p.mW+t.x]?[t]:[]}))),g=s.mapToGrid(function(e,t){return!e&&null!=(e=A.mData[t.y*A.mW+t.x])&&0<e.length}),x=A.mapToGridByMask(g,function(e,t){return il.findIndex(e,function(e){return null!=e})}),m=A.mapToGrid(function(e,t){e=e[x.mData[t.y*x.mW+t.x]],e=null!=e?e:t;return V.mData[e.y*V.mW+e.x]}),o=((e=new Yl(m.mapToGrid(function(e,t){return null!=e?e:V.mData[t.y*V.mW+t.x]}),m,x).result).mData[t.y*e.mW+t.x]=!1,i.mapCellsByMask(e,function(e,t){return e})),s=a?il.containsAllExact(o,n):il.containsAnyExact(o,n);l.included=null!=o&&0<o.length&&s}return l},filterSettings:function(e,t,n,i,s){var e=null==e?null:this._reelActor.get_turbo()==e,t=null==t?null:this._casinoModel.autoplay==t,n=null==n?null:this._reelActor.get_superTurbo()==n,i=null==i?null:this._casinoModel.get_featureSpinActive()==i,a=this._casinoModel.currentFeatureBuyData,l=null!=a?a.bonusGameId:null;a=null==s?null:new ot(s,"").match(l);return{included:(null==e||e)&&(null==t||t)&&(null==n||n)&&(null==i||i)&&(null==a||a),excluded:!1}},filterLength:function(e,t){var n=this._slotModel.presentingWins,n=(null==n?[]:n).length;return{included:e<=n&&(null==t||n<=t),excluded:!1}},filterWinCount:function(e,t,n){if(null==n)i=null;else{n=el.parseInt(n.count);if((t=null==t?2147483647:t)<e)throw tl.thrown("Range needs to start before end. "+e+" > "+t+" but should be start <= end");var e=new Qi(e,t),i=n>=e.start&&n<=e.end}return{included:null!=i&&i,excluded:!1}},filterRevealMode:function(e,t,n,i){var s=this._model.getRevealMode();return{included:(null==i||null==n||be.has(n,i.reelIndex))&&(null==e||be.has(e,s)),excluded:null!=t&&be.has(t,s)}},filterIsMultiplied:function(e,t){return{included:e&&null!=t.win.winMultipliers||!e&&null==t.win.winMultipliers,excluded:!1}},filterTotalMultiplier:function(e,t,n){n=n.win.winMultipliers,t=null==n?null:null!=t&&t?il.reduce(n,function(e,t){return e*=el.parseInt(null==t?"null":""+t)},0):il.reduce(n,function(e,t){return e+=el.parseInt(null==t?"null":""+t)},0);return{included:null!=t&&t>=e.start&&t<=e.end,excluded:!1}},filterPassThrough:function(e,t,n,i){var s,a,l;return null==n?{included:!0,excluded:!1}:(a=this._slotModel.reelActor,null==(a=null!=(s=null!=(i=null!=i?i.passThroughResult:null)?i:null!=(i=null!=(s=null!=(l=a.currentEndRevealArgs)?l.passThroughConfig:null)?s:null!=(l=a.currentEndReactArgs)?l.passThroughConfig:null)?i.result:null)?s.mData[n.y*s.mW+n.x]:null)?{included:null==e,excluded:!1}:{included:null==(i=null!=e?il.containsEq(e,a,function(e,t){return U.enumEq(e,t)}):null)||i,excluded:null!=(l=null!=t?il.containsEq(t,a,function(e,t){return U.enumEq(e,t)}):null)&&l})},filterSymbolAttachment:function(e,t,n,i){var s,a;return null==n?{included:!0,excluded:!1}:(a=null!=(i=i.symbolGrid)?i:this._model.visibleSymbols,null==(s=null!=(i=a.mData[n.y*a.mW+n.x])?$f.getSymbol(i):null)?{included:null==e,excluded:!1}:{included:null==(i=null!=e?il.all(e,function(e){return null!=s.getAttachment(e)}):null)||i,excluded:null!=(a=null!=t?il.all(t,function(e){return null!=s.getAttachment(e)}):null)&&a})},filterLockedReel:function(e,t){return{included:e?this._model.isReelLocked(t.x):!this._model.isReelLocked(t.x),excluded:!1}},get_maxDuration:function(){var e=zy.reduce(this._instances,function(e,t){var n=t._1.runDuration;return Math.max(e,(null==n?0:n)+t._1.delay)},0);return null!=this._configDuration?Math.max(this._configDuration,e):e},dispose:function(){this.clearInstances(),this._instances.h=Object.create(null),d.prototype.dispose.call(this)},getSymbolGrid:function(e){var n;if(null==e)return n=this._model.visibleSymbols.getCenterResized(this._model.get_width(),this._model.get_height(),null),null!=(a=null!=(t=this._model.stickiedGrid)?t.mapToGrid(function(e,t){return null!=e?e:n.mData[t.y*n.mW+t.x]}):null)?a:n;switch(e._hx_index){case 0:return this._model.settledSymbols;case 4:var i=this._model.visibleSymbols.getCenterResized(this._model.get_width(),this._model.get_height(),null);return null!=(a=null!=(t=this._model.stickiedGrid)?t.mapToGrid(function(e,t){return null!=e?e:i.mData[t.y*i.mW+t.x]}):null)?a:i;case 12:var s=this._model.visibleSymbols.getCenterResized(this._model.get_width(),this._model.get_height(),null);return null!=(a=null!=(t=this._model.stickiedGrid)?t.mapToGrid(function(e,t){return null!=e?e:s.mData[t.y*s.mW+t.x]}):null)?a:s;case 1:case 2:case 3:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:var t,a,l=this._model.visibleSymbols.getCenterResized(this._model.get_width(),this._model.get_height(),null);return null!=(a=null!=(t=this._model.stickiedGrid)?t.mapToGrid(function(e,t){return null!=e?e:l.mData[t.y*l.mW+t.x]}):null)?a:l}},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:Gc,__properties__:e(d.prototype.__properties__,{get_maxDuration:"get_maxDuration"})}),function(e,t,n,i,s){this._config=e,Gc.call(this,t,n,null,i,s)}),$_=((i["hacksaw.slotcommon.components.actor.ReelPresentationAction"]=J_).__name__="hacksaw.slotcommon.components.actor.ReelPresentationAction",J_.__super__=Gc,J_.prototype=e(Gc.prototype,{start:function(t,e,n,i,s,a){null==s&&(s=OA.None);var l,r,o,u=this;switch(s._hx_index){case 0:l=s.v;break;case 1:l=!1}if(l)return null;switch(o=this._config.endAtQuickStop?{future:r=this.when(function(){return!!u._model.quickStop&&u._config.endAtQuickStop}),link:r.handle(function(){u._config.endHandler(t)})}:null,this.type._hx_index){case 4:case 6:case 8:case 11:c=Gc.prototype.start.call(this,t),p=this._instances,A=er.id(t),A=(p.h[A].data=o,this._configDuration),_=this.after(null!=A?A:1);return this._config.handler(t),rt.noise(rt.and(_,c));default:_=be.find(this.owner.getFromParentsByName(Md.BASE_NAME,Md).get_symbols(),function(e){return e.id==el.parseInt(t.symbol)});if(this.filter(new td(t,null==_?null:[_.id],null,null,null,null))){for(var h=this.createInstance(t,n),c=(h.data=o,h.win.mask),_=this._model.get_width(),d=this._model.get_height(),p=c.split(""),e=new Array(p.length),m=0,g=p.length;m<g;){var f=m++;e[f]="1"==p[f]}var A,c=new Hl(_,d,e);return null!=a&&a(Tf.AreaWin(t,"presentWinAction",c.getValArea(!0))),(null!=(A=this._config.handler(t))?A:rt.NOISE).handle(function(){var e;h.showTrigger.trigger(null),null==u._configDuration&&null!=(e=h.trigger)&&e.trigger(null)}),null!=this._configDuration&&u.after(u._configDuration).handle(function(){var e=h.trigger;null!=e&&e.trigger(null)}),h.completeTrigger.handle(function(){var e=u._instances,t=er.id(h.win);Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t],Jn.remove(u._model.activePresentations,h)}),h.trigger}return null}},end:function(e){var t=this._instances,n=er.id(e),t=t.h[n],n=null!=t?t.data:null;return null!=n?(1==n.future.getStatus()._hx_index&&this._config.endHandler(e),null!=(t=n.link)&&t.cancel()):this._config.endHandler(e),Gc.prototype.end.call(this,e)},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationAction"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:J_}),function(e,t,n){this.endAtQuickStop=!1,this.endHandler=function(e){return rt.NOISE},this.handler=function(e){return rt.NOISE},null!=e&&(this.handler=e),null!=t&&(this.endHandler=t),null!=n&&(this.endAtQuickStop=n)}),ed=((i["hacksaw.slotcommon.components.actor.ReelPresentationActionConfig"]=$_).__name__="hacksaw.slotcommon.components.actor.ReelPresentationActionConfig",$_.prototype={__class__:$_},function(e,t,n,i,s,a,l,r,o,u){this.delay=0,this.data=null,this.maxDuration=null,this.endDuration=null,this.runDuration=null,this.win=e,this.trigger=t,this.showTrigger=n,this.completeTrigger=i,this.phase=s,null!=a&&(this.runDuration=a),null!=l&&(this.endDuration=l),null!=r&&(this.maxDuration=r),null!=o&&(this.data=o),null!=u&&(this.delay=u)}),td=((i["hacksaw.slotcommon.components.actor.ReelPresentationInstance"]=ed).__name__="hacksaw.slotcommon.components.actor.ReelPresentationInstance",ed.prototype={__class__:ed},function(e,t,n,i,s,a){this.passThroughResult=null,this.symbolGrid=null,this.reelIndex=null,this.result=null,this.syms=null,(this.win=null)!=e&&(this.win=e),null!=t&&(this.syms=t),null!=n&&(this.result=n),null!=i&&(this.reelIndex=i),null!=s&&(this.symbolGrid=s),null!=a&&(this.passThroughResult=a)}),nd=((i["hacksaw.slotcommon.components.actor.ReelFilterArgs"]=td).__name__="hacksaw.slotcommon.components.actor.ReelFilterArgs",td.prototype={__class__:td},function(e,t,n,i,s,a){this.delayPattern=null,this.distanceDelay=0,this.randomDelay=0,this.delay=0,this.colDelay=0,this.rowDelay=0,null!=e&&(this.rowDelay=e),null!=t&&(this.colDelay=t),null!=n&&(this.delay=n),null!=i&&(this.randomDelay=i),null!=s&&(this.distanceDelay=s),null!=a&&(this.delayPattern=a)}),id=((i["hacksaw.slotcommon.components.actor.ReelGridConf"]=nd).__name__="hacksaw.slotcommon.components.actor.ReelGridConf",nd.prototype={getCellDelays:function(d,e,t){null==t&&(t=!1),null==e&&(e=1);var p=this;if(null==this.delayPattern)return d.mapToGridByMask(d,function(e,t){for(var n=t.x,i=t.y,s=new Je,a=new Je,l=d.mData,r=d.mW,o=0,u=d.mW*d.mH;o<u;){var h=o++,c=h%r,_=h/r|0;(e=l[h])&&(c<=n&&(s.h[c]=!0),_<=i)&&(a.h[_]=!0),l[h]=e}t=p.randomDelay,null==t&&(t=1),t=Math.random()*t;return p.delay+t+p.rowDelay*be.count(a)+p.colDelay*be.count(s)});var s=this.distanceDelay;if(Math.abs(s)<=1e-9)return d.mapToGridByMask(d,function(e,t){return p.delay});function r(e){return[Math.abs(e.x-i),Math.abs(e.y-a)]}function o(e,t,n){var i=n.x-t.x,n=n.y-t.y,s=((e.x-t.x)*i+(e.y-t.y)*n)/(i*i+n*n);return[Math.abs(i*s+t.x-e.x),Math.abs(n*s+t.y-e.y)]}var u=e,e=d.mW,n=d.mH,i=.5*(e-1),a=.5*(n-1),e=n<e?e:n,l=new Tr,h=(l.xMin=-1,l.yMin=-1,l.xMax=-1+e,l.yMax=-1+e,this.delayPattern);switch(h._hx_index){case 0:var c,_=h.direction,m=h.symmetry,g=Kl.rotationToRadians(_);switch(_._hx_index){case 0:c=.5*Math.PI;break;case 1:case 2:c=0}_=g+c,g=Math.cos(_),_=-Math.sin(_);(v=new qt).px=i,v.py=a,v.lx=g,v.ly=_,v.normalize();var f,A=b=null==(b=S=null==(S=v.lx)?0:S)?0:b,x=C=null==(C=k=null==(k=v.ly)?0:k)?0:C,g=.5*Math.PI,_=Math.cos(g),g=Math.sin(g),w=A*g+x*_,A=A*_-x*g,x=w;if(null==m){var y=l.rayIntersection(v),b=S=null==(S=v.px+y*v.lx)?0:S,_=(null==(C=k=null==(k=v.py+y*v.ly)?0:k)&&(C=0),new qt);_.px=b=null==b?0:b,_.py=C,_.lx=A,_.ly=x,_.normalize(),f=_}else switch(m._hx_index){case 0:var v,y=l.rayIntersection(v),b=S=null==(S=v.px+y*v.lx)?0:S;null==(C=k=null==(k=v.py+y*v.ly)?0:k)&&(C=0),(v=new qt).px=b=null==b?0:b,v.py=C,v.lx=A,v.ly=x,v.normalize(),f=v;break;case 1:case 2:(v=new qt).px=i,v.py=a,v.lx=A,v.ly=x,v.normalize(),f=v}var C,g=Math.sqrt(i*i+a*a),S=f.px+g*f.lx,k=f.py+g*f.ly,y=-g,b=f.px+y*f.lx,M=(null==(C=f.py+y*f.ly)&&(C=0),null==b&&(b=0),new St(S=null==S?0:S,k=null==k?0:k)),I=new St(b,C),B=d.mapCellsByMask(d,function(e,t){var n;if(null==m){var i=o(t,M,I),s=u;null==s&&(s=2),n=Fy.nearEquals(s,2)?Math.sqrt(il.reduce(i,function(e,t){return e+=t*t},0)):Fy.nearEquals(s,1)?il.reduce(i,function(e,t){return e+=t},0):isFinite(s)?Math.pow(il.reduce(i,function(e,t){return e+=Math.pow(t,s)},0),1/s):il.reduce(i,function(e,t){return Math.max(e,t)},0)}else switch(m._hx_index){case 0:case 1:var i=o(t,M,I),a=u;null==a&&(a=2),n=Fy.nearEquals(a,2)?Math.sqrt(il.reduce(i,function(e,t){return e+=t*t},0)):Fy.nearEquals(a,1)?il.reduce(i,function(e,t){return e+=t},0):isFinite(a)?Math.pow(il.reduce(i,function(e,t){return e+=Math.pow(t,a)},0),1/a):il.reduce(i,function(e,t){return Math.max(e,t)},0);break;case 2:var i=r(t),l=u;null==l&&(l=2),n=Fy.nearEquals(l,2)?Math.sqrt(il.reduce(i,function(e,t){return e+=t*t},0)):Fy.nearEquals(l,1)?il.reduce(i,function(e,t){return e+=t},0):isFinite(l)?Math.pow(il.reduce(i,function(e,t){return e+=Math.pow(t,l)},0),1/l):il.reduce(i,function(e,t){return Math.max(e,t)},0)}return{distance:n,cell:t}});break;case 1:B=d.mapCellsByMask(d,function(e,t){var n=r(t),i=u;return null==i&&(i=2),{distance:Fy.nearEquals(i,2)?Math.sqrt(il.reduce(n,function(e,t){return e+=t*t},0)):Fy.nearEquals(i,1)?il.reduce(n,function(e,t){return e+=t},0):isFinite(i)?Math.pow(il.reduce(n,function(e,t){return e+=Math.pow(t,i)},0),1/i):il.reduce(n,function(e,t){return Math.max(e,t)},0),cell:t}})}var T=il.reduce(B,function(e,t){return e=Math.min(e,t.distance)},1/0);return il.each(B,function(e){e.distance-=T}),n=!!t||B.length==d.mW*d.mH?B:(B.sort(function(e,t){e=e.distance,t=t.distance;return e<t?-1:t<e?1:0}),il.reduce(il.zip(B.slice(0,B.length-1),B.slice(1)),function(e,t){var n=t._1.distance,i=Math.floor(n-t._0.distance-1e-9);return e.gapSize+=i<0?0:999<i?999:i,e.distances.push({distance:n-e.gapSize,cell:t._1.cell}),e},{distances:[B[0]],gapSize:0}).distances),il.reduce(n,function(e,t){var n=p.randomDelay,n=(null==n&&(n=1),Math.random()*n),i=t.cell;return e.mData[i.y*e.mW+i.x]=n+p.delay+t.distance*s,e},new Hl(d.mW,d.mH))},__class__:nd},fe["hacksaw.slotcommon.components.actor.ReelPresentationType"]={__ename__:!0,__constructs__:null,SymbolWin:{_hx_name:"SymbolWin",_hx_index:0,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},SymbolWinAction:{_hx_name:"SymbolWinAction",_hx_index:1,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},SymbolStick:{_hx_name:"SymbolStick",_hx_index:2,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},SymbolLanded:{_hx_name:"SymbolLanded",_hx_index:3,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},ScatterLanded:{_hx_name:"ScatterLanded",_hx_index:4,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},SymbolRemove:{_hx_name:"SymbolRemove",_hx_index:5,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},ScatterTriggered:{_hx_name:"ScatterTriggered",_hx_index:6,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},ReelAnimation:{_hx_name:"ReelAnimation",_hx_index:7,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},ReelAction:{_hx_name:"ReelAction",_hx_index:8,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},ReelText:{_hx_name:"ReelText",_hx_index:9,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},SymbolDropped:{_hx_name:"SymbolDropped",_hx_index:10,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o},SymbolPassed:((R=function(e){return{_hx_index:11,groupId:e,__enum__:"hacksaw.slotcommon.components.actor.ReelPresentationType",toString:o}})._hx_name="SymbolPassed",R.__params__=["groupId"],R)}),sd=(id.__constructs__=[id.SymbolWin,id.SymbolWinAction,id.SymbolStick,id.SymbolLanded,id.ScatterLanded,id.SymbolRemove,id.ScatterTriggered,id.ReelAnimation,id.ReelAction,id.ReelText,id.SymbolDropped,id.SymbolPassed],id.__empty_constructs__=[id.SymbolWin,id.SymbolWinAction,id.SymbolStick,id.SymbolLanded,id.ScatterLanded,id.SymbolRemove,id.ScatterTriggered,id.ReelAnimation,id.ReelAction,id.ReelText,id.SymbolDropped],function(e,t,n,i,s){this._config=e;e=this._config.gridDelayConfig;Gc.call(this,t,n,null!=e?e:new nd(null,null,0,null,0,null),i,s)}),ad=((i["hacksaw.slotcommon.components.actor.ReelPresentationElement"]=sd).__name__="hacksaw.slotcommon.components.actor.ReelPresentationElement",sd.__super__=Gc,sd.prototype=e(Gc.prototype,{presentSymbol:function(e,t,n,i,s){null==i&&(i=0);var a,l,r,o,u,h,c,_,d,p=this,m=this.getInstance(t);return null==m?rt.NOISE:((a=null!=(r=$f.getSymbol(e).getAttachment(this._config.symbolAttachmentId))?r.element:null)!=(l=(a=this._config.getElementData(a,n,t)).element)&&(null!=this._config.symbolAttachmentId?$f.getSymbol(e).attach(new ga(null,l,this._config.symbolAttachmentId,null)):((e=st.fromBacking(new it(.5+n.x-.5*this._model.currentGrid.mW,-(.5+n.y-.5*this._model.currentGrid.mH),null,null))).x*=this._model.get_symSize().x,e.y*=this._model.get_symSize().y,this.owner.getFromParentsByName(q_.BASE_NAME,q_).object.addChild(l),_=st.fromBacking(new it(l.x,l.y,l.z,null)),r=null==(h=e.x)||null==(c=_.x)?null:h+c,o=null==(h=e.y)||null==(c=_.y)?null:h+c,u=null==(h=e.z)||null==(c=_.z)?null:h+c,_=null==(h=e.w)||null==(c=_.w)?null:h+c,l.tweenObject.setPos(st.fromBacking(new it(null!=r?r:e.x,null!=o?o:e.y,null!=u?u:e.z,null!=_?_:e.w))))),d=a,m.data=null!=m.data?m.data:[],m.data.push(d),null==this._config.symbolAttachmentId&&m.completeTrigger.handle(Cn(R=d.element,R.remove)),Rt([function(e){return 0==i?rt.NOISE:p.after(i)},function(e){return null!=s&&s(Tf.SymbolWin(t,"presentWinElement",n)),d.onStart()}]))},update:function(t){Gc.prototype.update.call(this,t);for(var e=[],n=g1(this._instances);n.hasNext();)e.push(n.next().data);var i=il.filterNull(Array.prototype.concat.apply([],e));null!=this._config.symbolAttachmentId?il.each(i,function(e){e.onUpdate(t)}):il.each(i,function(e){e.element.update(t),e.onUpdate(t)})},end:function(n){var i=this,s=this.getInstance(n);if(null==s)return rt.NOISE;s.trigger=null;var e=s.data,a=null!=e?e:[];return Rt([function(e){return s.showTrigger},function(e){for(var t=[],n=0;n<a.length;)t.push(a[n++].onEnd());return rt.map(rt.inParallel(t),function(e){return null})}]).handle(function(){var e=i._instances,t=er.id(n);Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t],s.completeTrigger.trigger(null)}),s.completeTrigger},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationElement"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:sd}),function(e,t,n,i){this.onEnd=function(){return rt.NOISE},this.onStart=function(){return rt.NOISE},this.onUpdate=function(e){},this.element=e,null!=t&&(this.onUpdate=t),null!=n&&(this.onStart=n),null!=i&&(this.onEnd=i)}),ld=((i["hacksaw.slotcommon.components.actor.GridElementData"]=ad).__name__="hacksaw.slotcommon.components.actor.GridElementData",ad.prototype={__class__:ad},function(e,t,n){this.symbolAttachmentId=null,this.gridDelayConfig=null,this.getElementData=e,null!=t&&(this.gridDelayConfig=t),null!=n&&(this.symbolAttachmentId=n)}),rd=((i["hacksaw.slotcommon.components.actor.ReelPresentationElementConfig"]=ld).__name__="hacksaw.slotcommon.components.actor.ReelPresentationElementConfig",ld.prototype={__class__:ld},function(e,t,n,i,s){this._animationConfigs=new at,this._config=e,this._id=Jn.now()/1e3,Gc.call(this,t,n,null,i,s)}),od=((i["hacksaw.slotcommon.components.actor.ReelPresentationReelAnimation"]=rd).__name__="hacksaw.slotcommon.components.actor.ReelPresentationReelAnimation",rd.__super__=Gc,rd.prototype=e(Gc.prototype,{start:function(o,e,t,n,i,u){null==i&&(i=OA.None);var s,h=this;switch(i._hx_index){case 0:s=i.v;break;case 1:s=!1}if(s||this._model.quickStop)return null;var a=Gc.prototype.start.call(this,o,e,t),c=o.reel,l=this.setupAnimationConfig(c);if(this._gameChannel.publish(this._model.messagePrefix+"reelAttentionStart",{reelIndex:c}),null==(this._animationConfigs.h[o.mask]=l))var e=this._configDuration,r=this.after(null!=e?e:1);else switch(l._hx_index){case 0:for(var _=l.phaseAnimationConfigs,d=l.animator,p=l.object,m=new hc(!1),g=0;g<_.length;){t=_[g];switch(++g,t._hx_index){case 0:m.add(((e,t)=>function(){var a,l,r=new qy;h.after(e[0].delay).handle((a=e,l=t,function(){if(h._model.quickStop)r.trigger(null);else{var e,t=0==l[0]._hx_index?null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():"main":null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():null;if(null!=u&&u(Tf.SymbolAttention(o,"presentAttentionReel",new Bw(c,0))),null==d)e=new Zy(new Yy(null));else switch(d._hx_index){case 0:e=d.animator.play(t);break;case 1:e=rt.noise(d.animator.play(t))}null!=a[0].offset&&(i=.5*h._model.get_symSize().x+h._model.get_symSize().x*c-h._model.get_width()*h._model.get_symSize().x*.5,p.setPosition(i+a[0].offset.x,a[0].offset.y,.01+a[0].offset.z)),p.set_visible(!0);var n=null!=a[0].tweens?tt.tween(p,a[0].tweens):new Zy(new Yy(!1)),i=rt.irreversible(function(t){n.handle(function(e){t(null)})});h._gameChannel.publish(""+h._model.messagePrefix+(0==l[0]._hx_index?"reelAttentionEnterStart":"reelAttentionMainStart"),{reelIndex:c}),rt.inParallel([e,i]).handle((s=l,function(){h._gameChannel.publish(""+h._model.messagePrefix+(0==s[0]._hx_index?"reelAttentionEnterComplete":"reelAttentionMainComplete"),{reelIndex:c}),r.trigger(null)}))}var s})),r.handle(Cn(m,m.next))})([t.phaseConfig],[t]));break;case 1:m.add(((e,t)=>function(){var a,l,r=new qy;h.after(e[0].delay).handle((a=e,l=t,function(){if(h._model.quickStop)r.trigger(null);else{var e,t=0==l[0]._hx_index?null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():"main":null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():null;if(null!=u&&u(Tf.SymbolAttention(o,"presentAttentionReel",new Bw(c,0))),null==d)e=new Zy(new Yy(null));else switch(d._hx_index){case 0:e=d.animator.play(t);break;case 1:e=rt.noise(d.animator.play(t))}null!=a[0].offset&&(i=.5*h._model.get_symSize().x+h._model.get_symSize().x*c-h._model.get_width()*h._model.get_symSize().x*.5,p.setPosition(i+a[0].offset.x,a[0].offset.y,.01+a[0].offset.z)),p.set_visible(!0);var n=null!=a[0].tweens?tt.tween(p,a[0].tweens):new Zy(new Yy(!1)),i=rt.irreversible(function(t){n.handle(function(e){t(null)})});h._gameChannel.publish(""+h._model.messagePrefix+(0==l[0]._hx_index?"reelAttentionEnterStart":"reelAttentionMainStart"),{reelIndex:c}),rt.inParallel([e,i]).handle((s=l,function(){h._gameChannel.publish(""+h._model.messagePrefix+(0==s[0]._hx_index?"reelAttentionEnterComplete":"reelAttentionMainComplete"),{reelIndex:c}),r.trigger(null)}))}var s})),r.handle(Cn(m,m.next))})([t.phaseConfig],[t]))}}m.onComplete(function(){}),r=m.run();break;case 1:for(var _=l.phaseAnimationConfigs,f=l.animator,A=l.object,x=new hc(!1),g=0;g<_.length;){t=_[g];switch(++g,t._hx_index){case 0:x.add(((e,t)=>function(){var a,l,r=new qy;h.after(e[0].delay).handle((a=e,l=t,function(){if(h._model.quickStop)r.trigger(null);else{var e,t=0==l[0]._hx_index?null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():"main":null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():null;if(null!=u&&u(Tf.SymbolAttention(o,"presentAttentionReel",new Bw(c,0))),null==f)e=new Zy(new Yy(null));else switch(f._hx_index){case 0:e=f.animator.play(t);break;case 1:e=rt.noise(f.animator.play(t))}null!=a[0].offset&&(i=.5*h._model.get_symSize().x+h._model.get_symSize().x*c-h._model.get_width()*h._model.get_symSize().x*.5,A.setPosition(i+a[0].offset.x,a[0].offset.y,.01+a[0].offset.z)),A.set_visible(!0);var n=null!=a[0].tweens?tt.tween(A,a[0].tweens):new Zy(new Yy(!1)),i=rt.irreversible(function(t){n.handle(function(e){t(null)})});h._gameChannel.publish(""+h._model.messagePrefix+(0==l[0]._hx_index?"reelAttentionEnterStart":"reelAttentionMainStart"),{reelIndex:c}),rt.inParallel([e,i]).handle((s=l,function(){h._gameChannel.publish(""+h._model.messagePrefix+(0==s[0]._hx_index?"reelAttentionEnterComplete":"reelAttentionMainComplete"),{reelIndex:c}),r.trigger(null)}))}var s})),r.handle(Cn(x,x.next))})([t.phaseConfig],[t]));break;case 1:x.add(((e,t)=>function(){var a,l,r=new qy;h.after(e[0].delay).handle((a=e,l=t,function(){if(h._model.quickStop)r.trigger(null);else{var e,t=0==l[0]._hx_index?null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():"main":null!=a[0].phaseAnimation?fe[l[0].__enum__].__constructs__[l[0]._hx_index]._hx_name.toLowerCase():null;if(null!=u&&u(Tf.SymbolAttention(o,"presentAttentionReel",new Bw(c,0))),null==f)e=new Zy(new Yy(null));else switch(f._hx_index){case 0:e=f.animator.play(t);break;case 1:e=rt.noise(f.animator.play(t))}null!=a[0].offset&&(i=.5*h._model.get_symSize().x+h._model.get_symSize().x*c-h._model.get_width()*h._model.get_symSize().x*.5,A.setPosition(i+a[0].offset.x,a[0].offset.y,.01+a[0].offset.z)),A.set_visible(!0);var n=null!=a[0].tweens?tt.tween(A,a[0].tweens):new Zy(new Yy(!1)),i=rt.irreversible(function(t){n.handle(function(e){t(null)})});h._gameChannel.publish(""+h._model.messagePrefix+(0==l[0]._hx_index?"reelAttentionEnterStart":"reelAttentionMainStart"),{reelIndex:c}),rt.inParallel([e,i]).handle((s=l,function(){h._gameChannel.publish(""+h._model.messagePrefix+(0==s[0]._hx_index?"reelAttentionEnterComplete":"reelAttentionMainComplete"),{reelIndex:c}),r.trigger(null)}))}var s})),r.handle(Cn(x,x.next))})([t.phaseConfig],[t]))}}x.onComplete(function(){}),r=x.run()}return this.when(function(){return h._model.quickStop}).handle(function(){h.end(o)}),rt.irreversible(function(e){rt.and(r,a).handle(function(){h._gameChannel.publish(h._model.messagePrefix+"reelAttentionEnd",{reelIndex:c}),e(null)})})},end:function(r){var _=this,e=Gc.prototype.end.call(this,r),d=r.reel;return e.handle(function(){var e=_._animationConfigs.h[r.mask];if(null!=e)switch(e._hx_index){case 0:var t=e.phaseAnimationConfigs,o=e.animator,u=e.object,n=be.exists(t,function(e){return 3==e._hx_index}),i=be.exists(t,function(e){return 2==e._hx_index});if(_._model.quickStop&&n||!_._model.quickStop&&i)for(var s=function(l,r){return _.after(r.delay).handle(function(){var e,t=fe[l.__enum__].__constructs__[l._hx_index]._hx_name.toLowerCase();if(null!=r.phaseAnimation)switch(o._hx_index){case 0:var n=o.animator;(i=n.play(t)).handle(function(){n.stop()}),e=i;break;case 1:var i,s=o.animator;(i=rt.noise(s.play(t))).handle(function(){s.stop()}),e=i}else e=rt.NOISE;null!=r.offset&&(a=.5*_._model.get_symSize().x+_._model.get_symSize().x*d-_._model.get_width()*_._model.get_symSize().x*.5,u.setPosition(a+r.offset.x,r.offset.y,.01+r.offset.z)),u.set_visible(!0);var a=null!=r.tweens?rt.map(tt.tween(u,r.tweens),function(e){return null}):new Zy(new Yy(null));_._gameChannel.publish(""+_._model.messagePrefix+(2==l._hx_index?"reelAttentionExitStart":"reelAttentionQuickStopStart"),{reelIndex:d}),rt.inParallel([e,a]).handle(function(){switch(_._gameChannel.publish(""+_._model.messagePrefix+(2==l._hx_index?"reelAttentionExitComplete":"reelAttentionQuickStopComplete"),{reelIndex:d}),o._hx_index){case 0:case 1:var e;null!=(e=o.animator.owner)&&e.dispose()}})})},a=0;a<t.length;){var l=t[a];switch(++a,l._hx_index){case 2:_._model.quickStop||s(l,l.phaseConfig);break;case 3:_._model.quickStop&&s(l,l.phaseConfig)}}else if(0<t.length)switch(_._model.quickStop&&_._gameChannel.publish(_._model.messagePrefix+"reelAttentionCanceled",{reelIndex:d}),o._hx_index){case 0:case 1:null!=(t=o.animator).owner&&t.owner.dispose()}break;case 1:var t=e.phaseAnimationConfigs,h=e.animator,c=e.object,n=be.exists(t,function(e){return 3==e._hx_index}),i=be.exists(t,function(e){return 2==e._hx_index});if(_._model.quickStop&&n||!_._model.quickStop&&i)for(s=function(l,r){return _.after(r.delay).handle(function(){var e,t=fe[l.__enum__].__constructs__[l._hx_index]._hx_name.toLowerCase();if(null!=r.phaseAnimation)switch(h._hx_index){case 0:var n=h.animator;(i=n.play(t)).handle(function(){n.stop()}),e=i;break;case 1:var i,s=h.animator;(i=rt.noise(s.play(t))).handle(function(){s.stop()}),e=i}else e=rt.NOISE;null!=r.offset&&(a=.5*_._model.get_symSize().x+_._model.get_symSize().x*d-_._model.get_width()*_._model.get_symSize().x*.5,c.setPosition(a+r.offset.x,r.offset.y,.01+r.offset.z)),c.set_visible(!0);var a=null!=r.tweens?rt.map(tt.tween(c,r.tweens),function(e){return null}):new Zy(new Yy(null));_._gameChannel.publish(""+_._model.messagePrefix+(2==l._hx_index?"reelAttentionExitStart":"reelAttentionQuickStopStart"),{reelIndex:d}),rt.inParallel([e,a]).handle(function(){switch(_._gameChannel.publish(""+_._model.messagePrefix+(2==l._hx_index?"reelAttentionExitComplete":"reelAttentionQuickStopComplete"),{reelIndex:d}),h._hx_index){case 0:case 1:var e;null!=(e=h.animator.owner)&&e.dispose()}})})},a=0;a<t.length;){l=t[a];switch(++a,l._hx_index){case 2:_._model.quickStop||s(l,l.phaseConfig);break;case 3:_._model.quickStop&&s(l,l.phaseConfig)}}else if(0<t.length)switch(_._model.quickStop&&_._gameChannel.publish(_._model.messagePrefix+"reelAttentionCanceled",{reelIndex:d}),h._hx_index){case 0:case 1:null!=(t=h.animator).owner&&t.owner.dispose()}}}),e},setupAnimationConfig:function(e){var t,n=this._config.animation;if(null==n)t=null;else switch(n._hx_index){case 0:for(var i=n.reelPhases,s=n.scale,a=n.offset,l=new Array(i.length),r=0,o=i.length;r<o;){var u=r++;l[u]=(e=>{switch(e._hx_index){case 0:case 1:case 2:case 3:var t=e.phaseConfig.phaseAnimation;if(null!=t&&0==t._hx_index)return t.animation.animationData.frames;throw tl.thrown("Have to use TileAnimationType with AtlasBase")}})(i[u])}for(var h=il.filterNull(Array.prototype.concat.apply([],l)),h=new ea(new ta(il.reduce(h,function(e,t){return e.width>t.width||e.height>t.height?e:t},h[0]),s,null,null,null,null,null)),c=(h.object.set_visible(!1),null!=a&&(T=.5*this._model.get_symSize().x+this._model.get_symSize().x*e-this._model.get_width()*this._model.get_symSize().x*.5,h.object.setPosition(T+a.x,a.y,.01+a.z)),[]),_=new at,s=0;s<i.length;){var d=i[s];switch(++s,d._hx_index){case 0:var a=d.phaseConfig,p=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase();if(null==(r=a.phaseAnimation)){if("main"==p)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=a.tweens&&c.push(d)}else switch(r._hx_index){case 0:_.h[p]=r.animation,c.push(d);break;case 1:throw tl.thrown("Reel attention animation is configured as AtlasBase, using ReelPhaseAnimationType.Spine in combination is not supported - "+p+" phase")}break;case 1:var o=d.phaseConfig,m=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase();if(null==(b=o.phaseAnimation)){if("main"==m)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=o.tweens&&c.push(d)}else switch(b._hx_index){case 0:_.h[m]=b.animation,c.push(d);break;case 1:throw tl.thrown("Reel attention animation is configured as AtlasBase, using ReelPhaseAnimationType.Spine in combination is not supported - "+m+" phase")}break;case 2:var g=d.phaseConfig,f=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase();if(null==(v=g.phaseAnimation)){if("main"==f)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=g.tweens&&c.push(d)}else switch(v._hx_index){case 0:_.h[f]=v.animation,c.push(d);break;case 1:throw tl.thrown("Reel attention animation is configured as AtlasBase, using ReelPhaseAnimationType.Spine in combination is not supported - "+f+" phase")}break;case 3:var A=d.phaseConfig,x=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase();if(null==(C=A.phaseAnimation)){if("main"==x)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=A.tweens&&c.push(d)}else switch(C._hx_index){case 0:_.h[x]=C.animation,c.push(d);break;case 1:throw tl.thrown("Reel attention animation is configured as AtlasBase, using ReelPhaseAnimationType.Spine in combination is not supported - "+x+" phase")}}}var w=new Ns(new Gs(_)),y=(new ge).add(h).add(w);this.owner.addChild(y),t=hd.TileConfig(ud.TileAnimator(w),c,h.object);break;case 1:for(var i=n.spine,s=n.reelPhases,a=n.blendMode,r=n.scale,o=n.offset,b=n.darkTint,g=n.premultipliedAlpha,c=[],_=new at,v=0;v<s.length;){d=s[v];switch(++v,d._hx_index){case 0:var C,A=d.phaseConfig,p=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase();if(null==(C=A.phaseAnimation)){if("main"==p)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=A.tweens&&c.push(d)}else switch(C._hx_index){case 0:throw tl.thrown("Reel attention animation is configured as SpineBase, using TileTargetAnimation in combination is not supported - "+p+" phase");case 1:_.h[p]=C.animation,c.push(d)}break;case 1:var S=d.phaseConfig,m=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase(),k=S.phaseAnimation;if(null==k){if("main"==m)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=S.tweens&&c.push(d)}else switch(k._hx_index){case 0:throw tl.thrown("Reel attention animation is configured as SpineBase, using TileTargetAnimation in combination is not supported - "+m+" phase");case 1:_.h[m]=k.animation,c.push(d)}break;case 2:var S=d.phaseConfig,f=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase(),M=S.phaseAnimation;if(null==M){if("main"==f)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=S.tweens&&c.push(d)}else switch(M._hx_index){case 0:throw tl.thrown("Reel attention animation is configured as SpineBase, using TileTargetAnimation in combination is not supported - "+f+" phase");case 1:_.h[f]=M.animation,c.push(d)}break;case 3:var I=d.phaseConfig,x=fe[d.__enum__].__constructs__[d._hx_index]._hx_name.toLowerCase(),B=I.phaseAnimation;if(null==B){if("main"==x)throw tl.thrown("Main phase requires a configured ReelPhaseConfig.animation");null!=I.tweens&&c.push(d)}else switch(B._hx_index){case 0:throw tl.thrown("Reel attention animation is configured as SpineBase, using TileTargetAnimation in combination is not supported - "+x+" phase");case 1:_.h[x]=B.animation,c.push(d)}}}var T,w=new Js(new $s(i,r,a,null,null,null,null,_,null,b,g,null)),y=(w.object.set_visible(!1),null!=o&&(T=.5*this._model.get_symSize().x+this._model.get_symSize().x*e-this._model.get_width()*this._model.get_symSize().x*.5,w.object.setPosition(T+o.x,o.y,.01+o.z)),(new ge).add(w));this.owner.addChild(y),t=hd.SpineConfig(ud.SpineAnimator(w),c,w.object)}return t},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationReelAnimation"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:rd}),function(e){(this.animation=null)!=e&&(this.animation=e)});(i["hacksaw.slotcommon.components.actor.ReelPresentationReelAnimationConfig"]=od).__name__="hacksaw.slotcommon.components.actor.ReelPresentationReelAnimationConfig",od.prototype={__class__:od},(n=fe["hacksaw.slotcommon.components.actor.ReelAnimationBase"]={__ename__:!0,__constructs__:null,AtlasBase:((R=function(e,t,n){return{_hx_index:0,reelPhases:e,scale:t,offset:n,__enum__:"hacksaw.slotcommon.components.actor.ReelAnimationBase",toString:o}})._hx_name="AtlasBase",R.__params__=["reelPhases","scale","offset"],R),SpineBase:((R=function(e,t,n,i,s,a,l){return{_hx_index:1,spine:e,reelPhases:t,blendMode:n,scale:i,offset:s,darkTint:a,premultipliedAlpha:l,__enum__:"hacksaw.slotcommon.components.actor.ReelAnimationBase",toString:o}})._hx_name="SpineBase",R.__params__=["spine","reelPhases","blendMode","scale","offset","darkTint","premultipliedAlpha"],R)}).__constructs__=[n.AtlasBase,n.SpineBase],n.__empty_constructs__=[],(n=fe["hacksaw.slotcommon.components.actor.ReelAttentionPhase"]={__ename__:!0,__constructs__:null,Enter:((R=function(e){return{_hx_index:0,phaseConfig:e,__enum__:"hacksaw.slotcommon.components.actor.ReelAttentionPhase",toString:o}})._hx_name="Enter",R.__params__=["phaseConfig"],R),Main:((R=function(e){return{_hx_index:1,phaseConfig:e,__enum__:"hacksaw.slotcommon.components.actor.ReelAttentionPhase",toString:o}})._hx_name="Main",R.__params__=["phaseConfig"],R),Exit:((R=function(e){return{_hx_index:2,phaseConfig:e,__enum__:"hacksaw.slotcommon.components.actor.ReelAttentionPhase",toString:o}})._hx_name="Exit",R.__params__=["phaseConfig"],R),QuickStop:((R=function(e){return{_hx_index:3,phaseConfig:e,__enum__:"hacksaw.slotcommon.components.actor.ReelAttentionPhase",toString:o}})._hx_name="QuickStop",R.__params__=["phaseConfig"],R)}).__constructs__=[n.Enter,n.Main,n.Exit,n.QuickStop],n.__empty_constructs__=[],(i["hacksaw.slotcommon.components.actor.ReelPhaseConfig"]=Uc).__name__="hacksaw.slotcommon.components.actor.ReelPhaseConfig",Uc.prototype={__class__:Uc};(n=fe["hacksaw.slotcommon.components.actor.ReelPhaseAnimationType"]={__ename__:!0,__constructs__:null,TileAnimationType:((R=function(e){return{_hx_index:0,animation:e,__enum__:"hacksaw.slotcommon.components.actor.ReelPhaseAnimationType",toString:o}})._hx_name="TileAnimationType",R.__params__=["animation"],R),SpineAnimationType:((R=function(e){return{_hx_index:1,animation:e,__enum__:"hacksaw.slotcommon.components.actor.ReelPhaseAnimationType",toString:o}})._hx_name="SpineAnimationType",R.__params__=["animation"],R)}).__constructs__=[n.TileAnimationType,n.SpineAnimationType],n.__empty_constructs__=[];var ud=fe["hacksaw.slotcommon.components.actor.ReelAnimationAnimator"]={__ename__:!0,__constructs__:null,TileAnimator:((R=function(e){return{_hx_index:0,animator:e,__enum__:"hacksaw.slotcommon.components.actor.ReelAnimationAnimator",toString:o}})._hx_name="TileAnimator",R.__params__=["animator"],R),SpineAnimator:((R=function(e){return{_hx_index:1,animator:e,__enum__:"hacksaw.slotcommon.components.actor.ReelAnimationAnimator",toString:o}})._hx_name="SpineAnimator",R.__params__=["animator"],R)},hd=(ud.__constructs__=[ud.TileAnimator,ud.SpineAnimator],ud.__empty_constructs__=[],fe["hacksaw.slotcommon.components.actor.ReelAnimationConfig"]={__ename__:!0,__constructs__:null,TileConfig:((R=function(e,t,n){return{_hx_index:0,animator:e,phaseAnimationConfigs:t,object:n,__enum__:"hacksaw.slotcommon.components.actor.ReelAnimationConfig",toString:o}})._hx_name="TileConfig",R.__params__=["animator","phaseAnimationConfigs","object"],R),SpineConfig:((R=function(e,t,n){return{_hx_index:1,animator:e,phaseAnimationConfigs:t,object:n,__enum__:"hacksaw.slotcommon.components.actor.ReelAnimationConfig",toString:o}})._hx_name="SpineConfig",R.__params__=["animator","phaseAnimationConfigs","object"],R)}),cd=(hd.__constructs__=[hd.TileConfig,hd.SpineConfig],hd.__empty_constructs__=[],(i["hacksaw.slotcommon.components.actor.ReelPresentationSequencerInstanceData"]=Lc).__name__="hacksaw.slotcommon.components.actor.ReelPresentationSequencerInstanceData",Lc.prototype={__class__:Lc},(i["hacksaw.slotcommon.components.actor.ReelPresentationSequence"]=jc).__name__="hacksaw.slotcommon.components.actor.ReelPresentationSequence",jc.__super__=Gc,jc.prototype=e(Gc.prototype,{setup:function(){for(var t=this,e=this._config.presentations,n=new Array(e.length),i=0,s=e.length;i<s;){var a,l=i++,r=e[l];switch(r._hx_index){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=U.createInstance(r.handler,[r.config,r.filters,r.type,r.duration])}n[l]=a}this._presentations=n,il.each(this._presentations,function(e){t.owner.addChild((new ge).add(e))})},start:function(i,e,t,n,s,a){null==s&&(s=OA.None);var l,r=this;switch(s._hx_index){case 0:l=s.v;break;case 1:l=!1}if(l)return null;for(var o=this.createInstance(i,t),u=new hc(!1),t=null==il.find(this.owner.getFromParentsByName(Md.BASE_NAME,Md).get_symbols(),function(e){return e.id==el.parseInt(i.symbol)})?null:[el.parseInt(i.symbol)],h=new td(i,t,null,null,null,null),c=this._presentations,_=[],d=0;d<c.length;){var p=c[d];++d,p.filter(h)&&_.push(p)}FA.sort(_,function(e,t){return 1==e.type._hx_index?-1:1});for(d=0;d<_.length;)u.add((n=>function(){var e,t=n[0].start(i);null!=t?t.handle((e=n,function(){e[0].end(i),u.next()})):u.next()})([_[d++]]));return u.onComplete(function(){var e;null==r._configDuration&&null!=(e=o.trigger)&&e.trigger(null),o.showTrigger.trigger(null)}),null!=this._configDuration&&this.after(this._configDuration).handle(function(){var e=o.trigger;null!=e&&e.trigger(null)}),o.data=new Lc(_),u.run(!1),o.trigger},end:function(e){var t,n=this.getInstance(e);return null!=n&&(n.trigger=null,t=this._instances,e=er.id(e),Object.prototype.hasOwnProperty.call(t.h,e)&&delete t.h[e],n.completeTrigger.trigger(null)),new Zy(new Yy(null))},clearInstances:function(){for(var e=0,t=this._presentations;e<t.length;)t[e++].clearInstances()},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationSequence"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:jc}),(i["hacksaw.slotcommon.components.actor.ReelPresentSequenceConfig"]=Hc).__name__="hacksaw.slotcommon.components.actor.ReelPresentSequenceConfig",Hc.prototype={__class__:Hc},(i["hacksaw.slotcommon.components.actor.ReelPresentationShader"]=Yc).__name__="hacksaw.slotcommon.components.actor.ReelPresentationShader",Yc.__super__=Gc,Yc.prototype=e(Gc.prototype,{presentSymbol:function(e,t,n,i,s){null==i&&(i=0);var a=this,l=this.getInstance(t),r=(l.runDuration=il.reduce(this._config.tweens,function(e,t){return Math.max(t.duration+t.delay+i,e)},0),this._config.endTweens),o=(l.endDuration=il.reduce(null==r?[]:r,function(e,t){return Math.max(t.duration+t.delay,e)},0),l.maxDuration=Math.max(l.runDuration,this._configDuration)+i,l.data);null==o&&(o=new cd([]),l.data=o),this.after(i).handle(function(){null!=s&&s(Tf.SymbolWin(t,"presentWinShader",n))});for(var u=null==(r=e.object.getTarget(this._config.target).getMaterials())?[]:r,h=[],c=0;c<u.length;){var _=[u[c]],d=(++c,o.materials.push(_[0]),[_[0].passes.getShader(this._config.shader)]);null==d[0]&&(d[0]=U.createInstance(this._config.shader,this._config.args),_[0].passes.addShader(d[0])),this._activeShaders.push(d[0]),l.completeTrigger.handle(((e,t)=>function(){Jn.remove(a._activeShaders,e[0]),-1==a._activeShaders.indexOf(e[0])&&t[0].passes.removeShader(e[0])})(d,_)),h.push(this.tweenShaderInstance(d[0],this._config.tweens,i))}return rt.inParallel(h)},tweenShaderInstance:function(e,t,n){for(var i=new Array(t.length),s=0,a=t.length;s<a;){var l=s++,r=t[l],o=r.clone();o.delay=r.delay+n,i[l]=o}return e.tween(i)},end:function(e){var a=this,l=this.getInstance(e);if(null==l)return new Zy(new Yy(null));l.trigger=null;var t=this._instances,e=er.id(e);return Object.prototype.hasOwnProperty.call(t.h,e)&&delete t.h[e],l.showTrigger.handle(function(){var e=[],t=l.data;if(null!=t&&null!=a._config.endTweens)for(var n=0,i=t.materials;n<i.length;){var s=i[n++].passes.getShader(a._config.shader);e.push(a.tweenShaderInstance(s,a._config.endTweens,0))}rt.inParallel(e).handle(function(){l.completeTrigger.trigger(null)})}),l.completeTrigger},dispose:function(){for(var e=this._instances.h,t=Object.keys(e),n=t.length,i=0;i<n;){for(var s=e[t[i++]],a=0,l=s.data.materials;a<l.length;){var r=l[a],o=(++a,r.passes.getShader(this._config.shader));null!=o&&r.passes.removeShader(o)}s.completeTrigger.trigger(null)}this._instances.h=Object.create(null),Gc.prototype.dispose.call(this)},update:function(e){Gc.prototype.update.call(this,e);for(var t=[],n=0,i=this._activeShaders;n<i.length;){var s=i[n];++n,-1==t.indexOf(s)&&(t.push(s),s.update(e))}},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationShader"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:Yc}),function(e){(this.materials=null)!=e&&(this.materials=e)}),_d=((i["hacksaw.slotcommon.components.actor.ReelPresentationShaderInstanceData"]=cd).__name__="hacksaw.slotcommon.components.actor.ReelPresentationShaderInstanceData",cd.prototype={__class__:cd},(i["hacksaw.slotcommon.components.actor.ReelPresentationShaderConfig"]=Zc).__name__="hacksaw.slotcommon.components.actor.ReelPresentationShaderConfig",Zc.prototype={__class__:Zc},function(e,t,n,i,s){this._config=e,Gc.call(this,t,n,new nd(e.rowDelay,e.colDelay,e.delay,e.randomDelay,e.distanceDelay,e.delayPattern),i,s)}),dd=((i["hacksaw.slotcommon.components.actor.ReelPresentationSymbolAnimation"]=_d).__name__="hacksaw.slotcommon.components.actor.ReelPresentationSymbolAnimation",_d.__super__=Gc,_d.prototype=e(Gc.prototype,{presentSymbol:function(e,t,n,i,s){null==i&&(i=0);var a,l=this,r=e.object,o=(this._model.activateSymbolPresentation(e,this._config.bringToFront),r.animator.play(new Hh(this._config.animation,null,null,null),i)),u=r.animator.animations.h[this._config.animation];if(null==u)a=!1;else switch(u._hx_index){case 0:a=u.anim.animation.loop;break;case 1:throw new tl("Skin animations not implemented");case 2:a=u.anim.animation.loop}this._indefinite=a;var h,c=this.getInstance(t);return null==c?rt.NOISE:(h=this._configDuration,c.runDuration=null==h?r.animator.duration:h,c.maxDuration=Math.max(this._configDuration,c.runDuration)+i,this.after(i).handle(function(){null!=s&&s(Tf.SymbolWin(t,"presentWinAnimation",n))}),o.handle(function(){l._indefinite||l._model.deactivateSymbolPresentation(e,l._config.bringToFront)}),rt.noise(o))},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationSymbolAnimation"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:_d}),function(e,t,n,i,s,a,l,r){this.bringToFront=!0,this.delay=0,this.distanceDelay=0,this.delayPattern=null,this.rowDelay=0,this.colDelay=0,this.randomDelay=0,this.animation=e,null!=t&&(this.randomDelay=t),null!=n&&(this.colDelay=n),null!=i&&(this.rowDelay=i),null!=s&&(this.delayPattern=s),null!=a&&(this.distanceDelay=a),null!=l&&(this.delay=l),null!=r&&(this.bringToFront=r)}),pd=((i["hacksaw.slotcommon.components.actor.ReelPresentationSymbolAnimationConfig"]=dd).__name__="hacksaw.slotcommon.components.actor.ReelPresentationSymbolAnimationConfig",dd.prototype={__class__:dd},function(e,t,n,i){this._config=e,Gc.call(this,t,n,null,i,null,!0)}),md=((i["hacksaw.slotcommon.components.actor.ReelPresentationText"]=pd).__name__="hacksaw.slotcommon.components.actor.ReelPresentationText",pd.__super__=Gc,pd.prototype=e(Gc.prototype,{start:function(_,e,t,n,i,d){null==i&&(i=OA.None);var s,p=this;if("0"==_.winAmount)return null;switch(i._hx_index){case 0:s=!i.v;break;case 1:s=!1}if(s)return null;for(var m=null!=_.winMultipliers,a=_.mask,l=this._model.get_width(),r=this._model.get_height(),o=a.split(""),u=new Array(o.length),h=0,c=o.length;h<c;){var g=h++;u[g]="1"==o[g]}var f,A,x,w,y,b,v,C,S,k,a=new Hl(l,r,u),l=this.getSymbolGrid(t);return null==n&&(n=l),this.filter(new td(_,[el.parseInt(_.symbol)],e,null,null,null))?(f=this.createInstance(_,t),r=this._model.currentGrid.position(this._model.get_symSize().x,this._model.get_symSize().y),A=a.getValArea(!0),l=r.mData[A.y*r.mW+A.x],n=r.mData[(A.y+A.h-1)*r.mW+(A.x+A.w-1)],t=e=null==(e=l.x)?0:e,r=a=null==(a=l.y)?0:a,e=null==(e=n.x)?0:e,a=null==(a=n.y)?0:a,t=e=null==(e=.5*((t=null==t?0:t)+(null==e?0:e)))?0:e,w=t=null==t?0:t,x=r=null==(r=a=null==(a=.5*((r=null==r?0:r)+(null==a?0:a)))?0:a)?0:r,l=wA.divMod(bA.parseString(_.winAmount),new yA(0,100)),n=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(l.modulus)),y=parseFloat((null==l.quotient?"null":wA.toString(l.quotient))+"."+n),b=s1.trigger(),v=s1.trigger(),C=s1.trigger(),S=s1.trigger(),k=s1.trigger(),null!=this._config.onMultiplierStart&&v.listen(function(e){p._config.onMultiplierStart(e)}),null!=this._config.onMultiplierApply&&b.listen(function(e){p._config.onMultiplierApply(e)}),null!=this._config.onMultiplierRemove&&C.listen(function(e){p._config.onMultiplierRemove(e)}),null!=this._config.onShow&&S.listen(function(e){p._config.onShow(e)}),null!=this._config.onMultipliedResult&&k.listen(function(e){p._config.onMultipliedResult(e)}),this.after(this._config.delay).handle(function(){var l,e=p._config.multiplierResource,r=new Rs(new Qs(p._config.resource,null==e?p._config.resource:e,null,null,null,null,st.fromBacking(new it(w+p._config.offset.x,x+p._config.offset.y,p._config.offset.z+.1,null)),!1)),t=(r.showSignal.listen(function(e){S.handlers.invoke(e)}),r.multiplySignal.listen(function(e){b.handlers.invoke(e)}),r.multiplyStartSignal.listen(function(e){v.handlers.invoke(e)}),r.multiplyRemoveSignal.listen(function(e){C.handlers.invoke(e)}),r.multiplyResultSignal.listen(function(e){k.handlers.invoke(e)}),(new ge).add(new B).add(r)),n=(p._model.owner.addChild(t),r.getDuration()),e=p._config.startTweens,i=il.reduce(null==e?[]:e,function(e,t){switch(t._hx_index){case 0:case 1:case 2:case 3:return Math.max(e,t.v.duration)}},0),s=null!=p._config.endTweens?il.reduce(p._config.endTweens,function(e,t){switch(t._hx_index){case 0:case 1:case 2:case 3:return Math.max(e,t.v.duration)}},0):0,n=(f.endDuration=s,f.runDuration=Math.max(n,i),f.maxDuration=Math.max(p._configDuration,f.runDuration)+p._config.delay,new md(t,p._config.delay));switch(f.data=n,p._config.multipliedCountupStyle._hx_index){case 2:case 3:l=!0;break;default:l=!1}null!=d&&d(Tf.AreaWin(_,"presentWinText",A));var a,o,u=new qy,h=(e=null!=(s=t._compMap)?s.h[B.BASE_NAME]:null)instanceof B?e:null,c=p._config.skipMultipliedBase&&m,i=r,t=c?p._config.multipliedCountupStyle:p._config.countupStyle,s=c?_.winMultipliers:null;e=c?(o=wA.divMod(bA.parseString(_.baseWinAmount),new yA(0,100)),a=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(o.modulus)),parseFloat((null==o.quotient?"null":wA.toString(o.quotient))+"."+a)):null,o=c||!m||l?y:(o=wA.divMod(bA.parseString(_.baseWinAmount),new yA(0,100)),a=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(o.modulus)),parseFloat((null==o.quotient?"null":wA.toString(o.quotient))+"."+a)),rt.and(i.show(new ru(o,t,e,null,null,null,s,null,null,null,null),!1,!0,!0,m,function(){var e=null==p._config.startTweens?rt.NOISE:rt.map(tt.tween(h.object,p._config.startTweens),function(e){return null});h.object.set_visible(!0),e.handle(function(){u.trigger(null)})}),u).handle(function(){function e(){var e;return null==p._configDuration&&null!=(e=f.trigger)&&e.trigger(null),f.showTrigger.trigger(null)}var t,n,i,s,a;!m||l||c?e():(t=r,n=y,i=p._config.multipliedCountupStyle,s=wA.divMod(bA.parseString(_.baseWinAmount),new yA(0,100)),a=(e=>{for(;e.length<2;)e="0"+e;return e})(wA.toString(s.modulus)),t.show(new ru(n,i,parseFloat((null==s.quotient?"null":wA.toString(s.quotient))+"."+a),null,null,null,_.winMultipliers,null,null,null,null),!1,!0,!1,m).handle(e))}),null!=p._configDuration&&p.after(p._configDuration).handle(function(){var e=f.trigger;null!=e&&e.trigger(null)}),f.completeTrigger.handle(Cn(R=n.text,R.dispose))}),f.trigger):null},end:function(e){var t=this,n=this.getInstance(e);if(null==n)return new Zy(new Yy(null));n.trigger=null;var i=this._instances,e=er.id(e);return Object.prototype.hasOwnProperty.call(i.h,e)&&delete i.h[e],n.showTrigger.handle(function(){var e=n.data.text._compMap,e=null!=e?e.h[B.BASE_NAME]:null;(null!=t._config.endTweens?rt.map(tt.tween((e instanceof B?e:null).object,t._config.endTweens),function(e){return null}):rt.NOISE).handle(function(){n.completeTrigger.trigger(null)})}),n.completeTrigger},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationText"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:pd}),function(e,t){this.text=e,this.delay=t}),gd=((i["hacksaw.slotcommon.components.actor.ReelPresentationTextInstanceData"]=md).__name__="hacksaw.slotcommon.components.actor.ReelPresentationTextInstanceData",md.prototype={__class__:md},function(e,t,n,i,s,a,l,r,o,u,h,c,_,d){this.onMultipliedResult=null,this.onShow=null,this.onMultiplierRemove=null,this.onMultiplierApply=null,this.onMultiplierStart=null,this.multipliedCountupStyle=iu.MultiplyAdd(1),this.countupStyle=iu.Instant(1),this.skipMultipliedBase=!1,this.delay=0,this.offset=st.fromBacking(new it(null,null,null,null)),this.endTweens=[et.Scale(new nt(st.fromBacking(new it(0,0,null,null)),null,.6,.2,null,null,null,null,null,null,null))],this.startTweens=[et.Scale(new nt(st.fromBacking(new it(1,1,null,null)),st.fromBacking(new it(.9,.9,null,null)),null,.1,null,null,null,null,null,null,null))],this.multiplierResource=null,this.resource=e,null!=t&&(this.multiplierResource=t),null!=n&&(this.startTweens=n),null!=i&&(this.endTweens=i),null!=s&&(this.offset=s),null!=a&&(this.delay=a),null!=l&&(this.skipMultipliedBase=l),null!=r&&(this.countupStyle=r),null!=o&&(this.multipliedCountupStyle=o),null!=u&&(this.onMultiplierStart=u),null!=h&&(this.onMultiplierApply=h),null!=c&&(this.onMultiplierRemove=c),null!=_&&(this.onShow=_),null!=d&&(this.onMultipliedResult=d)}),fd=((i["hacksaw.slotcommon.components.actor.ReelPresentTextConfig"]=gd).__name__="hacksaw.slotcommon.components.actor.ReelPresentTextConfig",gd.prototype={__class__:gd},function(e,t,n,i,s){this._config=e,Gc.call(this,t,n,new nd(e.rowDelay,e.colDelay,e.delay,null,e.distanceDelay,e.delayPattern),i,s,!0)}),Ad=((i["hacksaw.slotcommon.components.actor.ReelPresentationTween"]=fd).__name__="hacksaw.slotcommon.components.actor.ReelPresentationTween",fd.__super__=Gc,fd.prototype=e(Gc.prototype,{end:function(c){var _=this,d=this.getInstance(c);if(null==d)return new Zy(new Yy(null));d.trigger=null;var e=this._instances,t=er.id(c);return Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t],d.showTrigger.handle(function(){var s=[];if(null!=_._config.endTweens){for(var e=c.mask,t=_._model.get_width(),n=_._model.get_height(),i=e.split(""),a=new Array(i.length),l=0,r=i.length;l<r;){var o=l++;a[o]="1"==i[o]}var u=new Hl(t,n,a),e=u.mW,t=u.mH,n=_.getSymbolGrid(d.phase).getCenterResized(e,t,null),h=_._gridConf.getCellDelays(u);n.eachCells(function(e,t){var n,i;null!=(n=null!=u?u.mData[t.y*u.mW+t.x]:null)&&!n||null==e||(t=_.calculateTweenData(_._config.endTweens,h.mData[t.y*h.mW+t.x]),i=e.object,_._model.activateSymbolPresentation(e,_._config.bringToFront),(i=null!=(n=null!=(i=i.getTarget(_._config.target))?tt.tween(i,t.tweens):null)?n:new Zy(new Yy(!1))).handle(function(){_._model.deactivateSymbolPresentation(e,_._config.bringToFront)}),s.push(i))})}rt.inParallel(s).handle(function(){d.completeTrigger.trigger(null)})}),d.completeTrigger},calculateTweenData:function(e,t){null==t&&(t=0);var n,i=0,s=0;if(null!=e){for(var a=new Array(e.length),l=0,r=e.length;l<r;){var o,u=l++,h=e[u];switch(h._hx_index){case 0:var c=h.v,i=c.duration+c.delay,_=c.clone();_.delay=c.delay+t,o=et.Position(_);break;case 1:c=h.v,_=(i=c.duration+c.delay,c.clone());_.delay=c.delay+t,o=et.Rotate(_);break;case 2:var d=h.v,p=(i=d.duration+d.delay,d.clone());p.delay=d.delay+t,o=et.Scale(p);break;case 3:d=h.v,p=(i=d.duration+d.delay,d.clone());p.delay=d.delay+t,o=et.Color(p)}s=Math.max(s,i+t),a[u]=o}n=a}else n=null;return{tweens:null!=n?n:[],duration:s}},presentSymbol:function(e,t,n,i,s){null==i&&(i=0);var a,l,r=this,o=this.getInstance(t);return null==o?rt.NOISE:(a=this.calculateTweenData(this._config.tweens,i),l=this.calculateTweenData(this._config.endTweens,0),o.runDuration=Math.max(o.runDuration,a.duration),o.endDuration=Math.max(o.endDuration,l.duration),o.maxDuration=Math.max(this._configDuration,o.runDuration)+i,this.after(i).handle(function(){null!=s&&s(Tf.SymbolWin(t,"presentWinTween",n))}),l=e.object,this._model.activateSymbolPresentation(e,this._config.bringToFront),(l=null!=(i=null!=(o=l.getTarget(this._config.target))?tt.tween(o,a.tweens):null)?i:new Zy(new Yy(!1))).handle(function(){r._model.deactivateSymbolPresentation(e,r._config.bringToFront)}),rt.map(l,function(e){return null}))},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationTween"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:fd}),function(e,t,n,i,s,a,l,r,o){this.bringToFront=!0,this.delay=0,this.distanceDelay=0,this.delayPattern=null,this.rowDelay=0,this.colDelay=0,this.endTweens=null,this.target=qu.All,this.tweens=e,null!=t&&(this.target=t),null!=n&&(this.endTweens=n),null!=i&&(this.colDelay=i),null!=s&&(this.rowDelay=s),null!=a&&(this.delayPattern=a),null!=l&&(this.distanceDelay=l),null!=r&&(this.delay=r),null!=o&&(this.bringToFront=o)}),xd=((i["hacksaw.slotcommon.components.actor.ReelPresentationTweenConfig"]=Ad).__name__="hacksaw.slotcommon.components.actor.ReelPresentationTweenConfig",Ad.prototype={__class__:Ad},(i["hacksaw.slotcommon.components.actor.ReelPresentationWinline"]=Xc).__name__="hacksaw.slotcommon.components.actor.ReelPresentationWinline",Xc.__super__=Gc,Xc.prototype=e(Gc.prototype,{init:function(){var t=this;Gc.prototype.init.call(this),this.rebuildLines(),hacksawCasino.PubSub.getChannel("casino").subscribe("orientationChange",function(e){t.rebuildLines()})},rebuildLines:function(){for(var t=this,e=this._slotModel.reelActor.getPositionGrid(),n=il.any(this._config.lines,function(e){return il.any(e,function(e){return e>=t._model.get_width()})}),i=this._config.lines,s=new Array(i.length),a=0,l=i.length;a<l;){var r,o=a++,u=i[o];if(n){for(var h=new Array(u.length),c=0,_=u.length;c<_;){var d=c++,p=u[d],p=e.mData[(p/e.mW|0)*e.mW+p%e.mW];h[d]=st.fromBacking(new it(p.x,p.y,null,null))}r=h}else{for(var m=[],g=0,f=u.length;g<f;){var A=g++,A=e.mData[u[A]*e.mW+A];m.push(st.fromBacking(new it(A.x,A.y,null,null)))}r=m}var x,w=t._config.lineShape;switch(w._hx_index){case 0:x=Fl.buildLinearSplineConfig(r);break;case 1:case 2:throw new tl(el.string(t._config.lineShape)+" spline config are not compatible with winlines");case 3:x=Fl.buildCatmullRomSplineConfig(r,!1,!0);break;case 4:x=Fl.buildCardinalSplineConfig(r,w.looseness,!1,!0);break;case 5:x=Fl.buildBSplineConfig(r,!1,!0)}s[o]=new Tl(x)}this._paylines=s},start:function(e,t,n,i,s,a){null==s&&(s=OA.None);var l,r=this;if(this._config.ignoreNonWinningLines&&"0"==e.winAmount)l=!0;else switch(s._hx_index){case 0:l=s.v;break;case 1:l=!1}if(l)return null;if(!this.filter(new td(e,[el.parseInt(e.symbol)],t,null,null,null)))return null;for(var o=this.createInstance(e,n),u=el.parseInt(e.count),n=e.mask,h=this._model.get_width(),c=this._model.get_height(),_=n.split(""),t=new Array(_.length),d=0,p=_.length;d<p;)t[F=d++]="1"==_[F];var m,n=new Hl(h,c,t),h=e.paylineIds,c=null!=h&&0<h.length?e.paylineIds:this.getLinesFromWin(n,u),g=il.zip(il.at(this._paylines,c),c);switch((d=this._config.paylineRevealMode)._hx_index){case 0:f=!1;break;case 1:var f=null==(p=d.stopAtLastSymbol)||p;break;case 2:p=d.stopAtLastSymbol;f=null==p||p}switch(this._config.paylineRevealMode._hx_index){case 0:m=this._model.get_width();break;case 1:m=u;break;case 2:m=this._model.get_width()}for(t=new Array(g.length),d=0,p=g.length;d<p;)t[F=d++]=g[F]._0;il.each(t,function(e){e.splineRateInterpolation.start=0;var t=f?e.getSegmentEndPointsDistance(m-1).start/e.get_totalArcLength():m/r._model.get_width();e.splineRateInterpolation.end=t});for(var A=sl.MIN_DEPTH_PRECISON,d=[],p=0;p<g.length;){var x=g[p],w=(++p,x._1),y=x._0,b=this._config.elementSpacing;switch(b._hx_index){case 0:C=null;break;case 1:C=this.getMidPoints(y,m);break;case 2:var v=b.lineRateOffset,C=this.getPoints(y,b.count,null!=v?v:0)}if(null==C){var x=this._config.createElement(y,0),S=x.element,S=(this.owner.getFromParentsByName(q_.BASE_NAME,q_).object.addChild(S),this.addPaylineFade(S,y,u,0),x.element.tweenObject);S.set_z(S.get_z()+w*A),d.push(x)}else for(var k=0,M=C;k<M.length;){var I=M[k++],B=k-1,T=this._config.createElement(y,B),E=T.element,E=(this.owner.getFromParentsByName(q_.BASE_NAME,q_).object.addChild(E),this.addPaylineFade(E,y,u,B),st.fromBacking(new it(T.element.x,T.element.y,T.element.z,null)));T.element.setTransform(I),T.element.tweenObject.setPosition(T.element.x+E.x,T.element.y+E.y,T.element.z+E.z),d.push(T)}}for(var F,h=new xd(d,u),_=(o.data=h,a(Tf.AreaWin(o.win,"presentWinLine",n.getValArea(!0))),h.line),t=new Array(_.length),d=0,p=_.length;d<p;)t[F=d++]=_[F].onStart();e=this._configDuration;return null!=e&&r.after(e).handle(function(){var e=o.trigger;null!=e&&e.trigger(null)}),rt.inParallel(t).handle(function(){var e;null==r._configDuration&&null!=(e=o.trigger)&&e.trigger(null),o.showTrigger.trigger(null)}),o.trigger},update:function(e){Gc.prototype.update.call(this,e);for(var t=this._instances.h,n=Object.keys(t),i=n.length,s=0;s<i;)for(var a=0,l=t[n[s++]].data.line;a<l.length;){var r=l[a];++a,r.element.update(e),r.onUpdate(e)}},end:function(e){var t=this,n=this.getInstance(e);return null==n?rt.NOISE:(n.trigger=null,n.showTrigger.handle(function(){t.removeInstance(n,e)}),n.completeTrigger)},clear:function(){for(var e=[],t=g1(this._instances);t.hasNext();)e.push(t.next().data.line);il.each(Array.prototype.concat.apply([],e),function(e){e=e.element;null!=e&&null!=e.parent&&e.parent.removeChild(e)})},removeInstance:function(n,i){for(var s=this,a=nl.__cast(n.data,xd),e=il.filterNull(a.line),t=new Array(e.length),l=0,r=e.length;l<r;){var o=l++;t[o]=e[o].onEnd()}var u=rt.map(rt.inParallel(t),function(e){return null}).handle(function(){il.each(a.line,function(e){e=e.element;null!=e&&null!=e.parent&&e.parent.removeChild(e)});var e=s._instances,t=er.id(i);Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t],n.completeTrigger.trigger(null)});n.completeTrigger.handle(function(){null!=u&&u.cancel()})},getLinesFromWin:function(e,t){for(var n=[],i=[],s=0;s<t;)for(var a=s++,l=this._config.lines,r=0;r<l.length;){var o=l[r++],u=r-1;e.mData[o[a]*e.mW+a]?be.has(n,u)||n.push(u):i.push(u)}for(var s=[],h=0,c=n;h<c.length;){var _=c[h];++h,be.has(i,_)||s.push(_)}return s},getMidPoints:function(e,t){for(var n=this._config.lineShape==Nh.Linear,i=[],s=0,a=t-1;s<a;)i.push({matrix:new Wr,lineSegment:e.getCurveSegment(s++)});n?il.each(i,function(e){var t,n,i,s=e.lineSegment,a=s.getPoint(0),s=s.getPoint(1),l=s.x;t=null==l||null==(r=a.x)?null:l-r,n=null==(l=s.y)||null==(r=a.y)?null:l-r,i=null==(l=s.z)||null==(r=a.z)?null:l-r;a=null==(l=s.w)||null==(r=a.w)?null:l-r;var l=st.fromBacking(new it(null!=t?t:s.x,null!=n?n:s.y,null!=i?i:s.z,null!=a?a:s.w)),r=Math.sqrt(l.x*l.x+l.y*l.y+l.z*l.z);e.matrix.initScale(r,r,1)}):il.each(i,function(e){e.matrix.initScale()});for(var l=[],s=0,a=i.length;s<a;){var r=s++,o=i[r],u=o.lineSegment,o=o.matrix,h=u.getPoint(.5),r=(h.z+=.001*r,u.getOrientation(.5)),u=o,h=st.to3dPoint(h);u._41=h.x,u._42=h.y,u._43=h.z,o.multiply(r,o),l.push(o)}return l},getPoints:function(e,t,n){for(var i=e.splineRateInterpolation.end,s=1/t,a=n-.5*s,l=[],r=1,o=t+1;r<o;)l.push(Fy.wrapCircular(a+r++*s,1));for(r=[],o=0;o<l.length;){var u=l[o];++o,0<=u&&u<i&&r.push(u)}r.sort(Fy.compare),e.splineRateInterpolation.end=1;for(var h=[],l=0,o=r.length;l<o;){var c=r[l++],_=Nr.S(),d=e.getPointOnSpline(c),c=e.getOrientationOnSpline(c),p=_,u=st.to3dPoint(d);p._41=u.x,p._42=u.y,p._43=u.z,_.multiply(c,_),h.push(_)}return e.splineRateInterpolation.end=i,h},addPaylineFade:function(e,t,n,i){var s=this._config.paylineRevealMode;if(2==s._hx_index){var a,l=s.stopAtLastSymbol,r=s.colorMultiplier,o=s.blendFactor,u={color:null!=r?r:st.fromBacking(new it(.5,.5,.5,1)),blendFactor:null!=o?o:.00390625,winLineMaxRate:null==l||l?t.getSegmentEndPointsDistance(n-1).start/t.get_totalArcLength():n/this._model.get_width()};switch((s=this._config.elementSpacing)._hx_index){case 0:a=null;break;case 1:a=(i+1)/this._model.get_width();break;case 2:a=(i+1)/s.count}if(null!=a){if(a>=u.winLineMaxRate)for(s=0,l=e.getMaterials();s<l.length;){var h=l[s++].mshader.color__,c=st.toVector4(u.color);h.x=c.x,h.y=c.y,h.z=c.z,h.w=c.w}}else{r=e instanceof nh?e:null,o=(null!=r&&il.each(il.filterMap(r.groups,function(e){var n,t=il.findMap(e.modules,function(e){e=e instanceof Wa?e:null;return null==e?OA.None:OA.Some(e)});return 0==t._hx_index?(n=t.v,OA.Some({group:e,fadeModule:new Da(function(e){var t;n.currentRate>=u.winLineMaxRate&&(e=e.color,t=u.color,e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w)})})):OA.None}),function(e){e.group.modules.push(e.fadeModule),e.group.sortModules()}),e instanceof Ml?e:null);if(null!=o){for(var h=o.materials,_=new Array(h.length),s=0,l=h.length;s<l;)_[s++]=new wl(new yl(null,null,u.blendFactor,u.color,u.winLineMaxRate));il.each(il.zip(o.materials,_),function(e){e._0.passes.addShader(e._1)})}}}},get_name:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationWinline"},get_baseName:function(){return"hacksaw.slotcommon.components.actor.ReelPresentationBase"},__class__:Xc}),function(e,t){this.line=e,this.winLineSize=t}),wd=((i["hacksaw.slotcommon.components.actor.ReelPresentationWinlineInstanceData"]=xd).__name__="hacksaw.slotcommon.components.actor.ReelPresentationWinlineInstanceData",xd.prototype={__class__:xd},fe["hacksaw.slotcommon.components.actor.PaylineRevealMode"]={__ename__:!0,__constructs__:null,Full:{_hx_name:"Full",_hx_index:0,__enum__:"hacksaw.slotcommon.components.actor.PaylineRevealMode",toString:o},WinlineOnly:((R=function(e){return{_hx_index:1,stopAtLastSymbol:e,__enum__:"hacksaw.slotcommon.components.actor.PaylineRevealMode",toString:o}})._hx_name="WinlineOnly",R.__params__=["stopAtLastSymbol"],R),FadeNonWinningSection:((R=function(e,t,n){return{_hx_index:2,stopAtLastSymbol:e,colorMultiplier:t,blendFactor:n,__enum__:"hacksaw.slotcommon.components.actor.PaylineRevealMode",toString:o}})._hx_name="FadeNonWinningSection",R.__params__=["stopAtLastSymbol","colorMultiplier","blendFactor"],R)}),yd=(wd.__constructs__=[wd.Full,wd.WinlineOnly,wd.FadeNonWinningSection],wd.__empty_constructs__=[wd.Full],fe["hacksaw.slotcommon.components.actor.ElementSpacing"]={__ename__:!0,__constructs__:null,SingleLine:{_hx_name:"SingleLine",_hx_index:0,__enum__:"hacksaw.slotcommon.components.actor.ElementSpacing",toString:o},Midpoints:{_hx_name:"Midpoints",_hx_index:1,__enum__:"hacksaw.slotcommon.components.actor.ElementSpacing",toString:o},Spread:((R=function(e,t){return{_hx_index:2,count:e,lineRateOffset:t,__enum__:"hacksaw.slotcommon.components.actor.ElementSpacing",toString:o}})._hx_name="Spread",R.__params__=["count","lineRateOffset"],R)}),bd=(yd.__constructs__=[yd.SingleLine,yd.Midpoints,yd.Spread],yd.__empty_constructs__=[yd.SingleLine,yd.Midpoints],(i["hacksaw.slotcommon.components.actor.LineElementData"]=qc).__name__="hacksaw.slotcommon.components.actor.LineElementData",qc.prototype={__class__:qc},(i["hacksaw.slotcommon.components.actor.ReelPresentationWinlineConfig"]=Kc).__name__="hacksaw.slotcommon.components.actor.ReelPresentationWinlineConfig",Kc.prototype={__class__:Kc},fe["hacksaw.slotcommon.components.actor.actions.ReelActions"]={__ename__:!0,__constructs__:null,SpinActions:((R=function(e){return{_hx_index:0,actions:e,__enum__:"hacksaw.slotcommon.components.actor.actions.ReelActions",toString:o}})._hx_name="SpinActions",R.__params__=["actions"],R),DropActions:((R=function(e){return{_hx_index:1,actions:e,__enum__:"hacksaw.slotcommon.components.actor.actions.ReelActions",toString:o}})._hx_name="DropActions",R.__params__=["actions"],R),CollapseActions:((R=function(e){return{_hx_index:2,actions:e,__enum__:"hacksaw.slotcommon.components.actor.actions.ReelActions",toString:o}})._hx_name="CollapseActions",R.__params__=["actions"],R)}),vd=(bd.__constructs__=[bd.SpinActions,bd.DropActions,bd.CollapseActions],bd.__empty_constructs__=[],function(e,t,n){this._replaceActions=new Je,this._revealActions=new Je,this._reels=e,this._model=t,this._channel=n}),Cd=((i["hacksaw.slotcommon.components.actor.actions.ReelActionsBase"]=vd).__name__="hacksaw.slotcommon.components.actor.actions.ReelActionsBase",vd.prototype={update:function(e){for(var t=this._revealActions,n=t.keys();n.hasNext();){var i=n.next();(s=t.get(i)).delay-=e,s.delay<=0&&(s.action(),this._revealActions.remove(i))}for(n=(t=this._replaceActions).keys();n.hasNext();){var s,i=n.next();(s=t.get(i)).delay-=e,s.delay<=0&&(s.action(),this._replaceActions.remove(i))}},__class__:vd},function(e,t,n){vd.call(this,e,t,n)}),Sd=((i["hacksaw.slotcommon.components.actor.actions.ReelCollapseActions"]=Cd).__name__="hacksaw.slotcommon.components.actor.actions.ReelCollapseActions",Cd.__super__=vd,Cd.prototype=e(vd.prototype,{fillReel:function(n,i,s){var a=this,e=rt.irreversible(function(e){a._channel.publish("dropReelStart",{index:n});var t=zy.reduce(a._reels.getAttentionDurations(s),function(e,t){return t._0<n?t._1:e},0);a._model.quickStop&&!a._model.revealStarting?i=0:i+=t,a._replaceActions.h[n]={delay:i,action:function(){a._channel.publish("dropReelEnd",{index:n}),e(null)}}});return e.eager(),e},__class__:Cd}),function(e,t,n){vd.call(this,e,t,n)}),kd=((i["hacksaw.slotcommon.components.actor.actions.ReelDropActions"]=Sd).__name__="hacksaw.slotcommon.components.actor.actions.ReelDropActions",Sd.__super__=vd,Sd.prototype=e(vd.prototype,{dropReel:function(e,t,n){var i=this,s=(this._channel.publish("dropReelStart",{index:e}),new qy);return this._model.quickStop&&!this._model.revealStarting&&(t=0),this._revealActions.h[e]={delay:t,action:function(){i._revealActions.remove(e),i._channel.publish("dropReelEnd",{index:e}),s.trigger(null)}},s},replaceReel:function(t,n){var i=this,e=rt.irreversible(function(e){i._channel.publish("replaceReelStart",{index:t}),i._replaceActions.h[t]={delay:n,action:function(){i._reels.replaceReel(t)}},e(null)});return e.eager(),e},__class__:Sd}),function(e,t,n){this._stopTriggers=new Je,vd.call(this,e,t,n)}),Md=((i["hacksaw.slotcommon.components.actor.actions.ReelSpinActions"]=kd).__name__="hacksaw.slotcommon.components.actor.actions.ReelSpinActions",kd.__super__=vd,kd.prototype=e(vd.prototype,{startReel:function(e,t){var n=this,i=new qy;return this._channel.publish("reelStart",{index:e}),0<t?this._revealActions.h[e]={delay:t,action:function(){n._model.stopped.h[e]=!1,n._revealActions.remove(e),i.trigger(null)}}:(this._model.stopped.h[e]=!1,i.trigger(null)),i},stopReel:function(n,e,t){var i=this,s=new qy,a=(this._stopTriggers.h[n]=s,zy.reduce(this._reels.getAttentionDurations(this._model.eventGrid),function(e,t){return t._0<=n?t._1:e},0));return 0<t&&0<a&&(a=t),0==(e=this._model.quickStop&&!this._model.revealStarting?0:e)?this._reels.handleReelAttentions(n,this._model.eventGrid,a).handle(function(e){s.trigger(e)}):this._revealActions.h[n]={delay:e,action:function(){i._revealActions.remove(n),i._reels.handleReelAttentions(n,i._model.eventGrid,a).handle(function(e){s.trigger(e)})}},s},forceStopReel:function(e){var t=this._stopTriggers.h[e];return this._reels.forceStopReel(e),null!=t&&t.trigger(!1),t},__class__:kd}),(i["hacksaw.slotcommon.components.model.ReelBehaviorModel"]=Jc).__name__="hacksaw.slotcommon.components.model.ReelBehaviorModel",Jc.prototype={setMode:function(e){this.mode=e,this.defaultsMerged=!1},mergeValues:function(e,t){for(var n=X.copy(e),i=0,s=X.fields(t);i<s.length;){var a=s[i];++i,n[a]=X.field(t,a)}return this.defaultsMerged=!0,n},getValues:function(e,t){return this.turboActive=this._actor.get_turbo(),this.superTurboActive=this._actor.get_superTurbo(),{defaultNodeValues:this.superTurboActive?e.superTurbo:this.turboActive?e.turbo:e.normal,node:this.superTurboActive?t.superTurbo:this.turboActive?t.turbo:t.normal}},__class__:Jc},(i["hacksaw.slotcommon.components.model.CollapseModel"]=$c).__name__="hacksaw.slotcommon.components.model.CollapseModel",$c.__super__=Jc,$c.prototype=e(Jc.prototype,{refreshConfig:function(){var e=this._configProps;if(1!=e._hx_index)throw tl.thrown("Cannot get collapse config since props is unexpected type");var t,n=null!=this.config&&(n=this.turboActive==this._actor.get_turbo(),t=this.superTurboActive==this._actor.get_superTurbo(),this.defaultsMerged)&&(this.ongoingBehavior||n&&t)?this.config:this.getConfigValues(e.config);return this.config=n,this.config},getConfigValues:function(e){var t,n=this,e=this.getValues({turbo:e.defaultValues.turbo,superTurbo:e.defaultValues.superTurbo,normal:e.defaultValues.normal},{turbo:e.turbo,superTurbo:e.superTurbo,normal:e.normal});return null!=e.node?(t=null==(t=il.find(e.node,function(e){return e.mode==n.mode}))?il.find(e.node,function(e){return"default"==e.mode}):t,this.mergeValues(e.defaultNodeValues,t.values)):e.defaultNodeValues},__class__:$c}),(i["hacksaw.slotcommon.components.model.DropModel"]=e_).__name__="hacksaw.slotcommon.components.model.DropModel",e_.__super__=Jc,e_.prototype=e(Jc.prototype,{refreshConfig:function(){var e=this._configProps;if(0!=e._hx_index)throw tl.thrown("Cannot get drop config since props is unexpected type");var t,n=null!=this.config&&(n=this.turboActive==this._actor.get_turbo(),t=this.superTurboActive==this._actor.get_superTurbo(),this.defaultsMerged)&&(this.ongoingBehavior||n&&t)?this.config:this.getConfigValues(e.config);return this.config=n,this.config},getConfigValues:function(e){var t,n=this,e=this.getValues({turbo:e.defaultValues.turbo,superTurbo:e.defaultValues.superTurbo,normal:e.defaultValues.normal},{turbo:e.turbo,superTurbo:e.superTurbo,normal:e.normal});return null!=e.node?(t=null==(t=il.find(e.node,function(e){return e.mode==n.mode}))?il.find(e.node,function(e){return"default"==e.mode}):t,this.mergeValues(e.defaultNodeValues,t.values)):e.defaultNodeValues},__class__:e_}),(i["hacksaw.slotcommon.components.model.BehaviorModelConfig"]=t_).__name__="hacksaw.slotcommon.components.model.BehaviorModelConfig",t_.prototype={__class__:t_},function(e){this._lockedReels=new Je,this._activeSymbolPresentations=new VA,this._symbolStates=new Je,this.beatSync=null,this.presentedScatterTriggers=new at,this.presentedSymbolAttentions=new PA,this.presented=new Je,this.stopped=new Je,this.messagePrefix="",this.activeAttentions=[],this.activePresentations=[],this.animationZOffset=.001,this.settledSymbols=null,this.countupTierIndex=3,this.addedStickiesMask=null,this.marginGrid=null,this.stickiedGrid=null,this.stickiedMask=null,d.call(this),this._config=e,this.winItemDuration=this._config.winItemDuration,this.initialWidth=this._config.initGrid.mW,this.initialHeight=this._config.initGrid.mH,this.initialDepth=this._config.depth,this.revealDirection=this._config.revealDirection,this.reactDirection=this._config.reactDirection,this.symSize=this._config.symSize,this.symSizes=this._config.symSizes,this.revealProps=this._config.revealProps,this.reactProps=this._config.reactProps,this.stencilPos=this._config.stencil.pos,this.stencilMargins=this._config.stencil.margins,this.stencil=this._config.stencil,this.background=this._config.background,this.revealDelay=this._config.revealDelay,this.beatSync=this._config.beatSync,this.tiers=this._config.tiers,this.smoothSuperTurbo=this._config.smoothSuperTurbo,this.cloneMarginRows=this._config.cloneMarginRows,this.sortDirection=this._config.sortDirection,this.componentType=Ie.ActiveModel,this._reelSets=this._config.reelSets;e=this._config.currentReelSet;this._currentReelSet=null!=e?e:"default"}),Id=((i["hacksaw.slotcommon.components.model.ReelModelComponent"]=Md).__name__="hacksaw.slotcommon.components.model.ReelModelComponent",Md.__super__=d,Md.prototype=e(d.prototype,{init:function(){for(var s=this,a=(this.symPools=new Je,function(e){return Hf.ObjectSymbol(e.asset.object.clone())}),e=0,t=this.get_symbols();e<t.length;){var n=[t[e]],i=(++e,this.symPools),l=n[0].id,r=new Fw((e=>function(){return a(e[0])})(n));i.h[l]=r,null!=(c=n[0].colossalConfigs)&&il.each(c,function(e){il.each(e.colossals,function(e){var t=s.symPools,n=e.id,i=new Fw(function(){return a(e)});t.h[n]=i})})}this.visibleSymbols=new Hl(this.initialWidth,this.initialHeight),this.settledSymbols=new Hl(this.initialWidth,this.initialHeight);for(var o=this._config.gridHeightMargin,i=this.get_symbols(),u=new Array(i.length),e=0,t=i.length;e<t;){var h=e++;u[h]=i[h].size.y}var c,_,d=vy.max(u),e=(this.marginGrid=new Hl(this.initialWidth,this.initialHeight+2*(d<o?o:d)),this.marginGrid.setAll(null),this.owner.getFromParentsByName(q_.BASE_NAME,q_)),t=this.owner.getFromParentsByName(_u.BASE_NAME,_u),p=new t_(this,this.owner.getFromParentsByName(O_.BASE_NAME,O_),e,t,this.revealProps),e=this.owner.getFromParentsByName(q_.BASE_NAME,q_),t=this.owner.getFromParentsByName(_u.BASE_NAME,_u),m=new t_(this,this.owner.getFromParentsByName(O_.BASE_NAME,O_),e,t,this.reactProps);switch(this.revealProps._hx_index){case 0:c=Td.Drop(new e_(p));break;case 1:c=null;break;case 2:c=Td.Twist(new Nd(p));break;case 3:c=Td.Spin(new Vd(p));break;case 4:c=Td.Spin(new Vd(p,!0));break;case 5:c=Td.Rotate(new zd(p));break;case 6:c=null}if(null==this.reactProps)_=null;else switch(this.reactProps._hx_index){case 0:_=null;break;case 1:_=Td.Collapse(new $c(m));break;case 2:_=Td.Retwist(new Pd(m));break;case 3:_=Td.Respin(new Vd(m));break;case 4:_=Td.Respin(new Vd(m,!0));break;case 5:_=null;break;case 6:_=Td.Resize(new Rd(m))}this.behaviorModel={reveal:c,react:_}},activateSymbolPresentation:function(e,t){var n;null==t&&(t=!0),null!=e&&(t&&(null!=(n=(t=$f.getSymbol(e)).object.get_parent())&&(n.removeChild(t.object.object),tt.update(t.object,0),n.addChild(t.object.object)),t.object.set_z(t.restingZPosition+this.animationZOffset)),n=this._activeSymbolPresentations.h[(null!=e?$f.getSymbol(e):null).__id__],this._activeSymbolPresentations.set(null!=e?$f.getSymbol(e):null,(null==n?0:n)+1))},deactivateSymbolPresentation:function(e,t){var n;null==t&&(t=!0),null!=e&&null!=this._activeSymbolPresentations.h.__keys__[(null!=e?$f.getSymbol(e):null).__id__]&&(n=(null==(n=this._activeSymbolPresentations.h[(null!=e?$f.getSymbol(e):null).__id__])?1:n)-1,t&&(t=$f.getSymbol(e)).object.set_z(t.restingZPosition),this._activeSymbolPresentations.set(null!=e?$f.getSymbol(e):null,n),0==n)&&this.deactivateAsset(e)},setGrid:function(e,t,n,i,s){null==s&&(s=!0),null==i&&(i=!1),null==n&&(n=!0),null==t&&(t=!0);var a=this,l=e.mW,r=e.mH;if(this.visibleSymbols.getCenterResized(l,r,null),i){for(var o=(S=this.visibleSymbols.mW)*(k=this.visibleSymbols.mH),u=[],h=0;h<o;)++h,u.push(!0);M=new Hl(S,k,u)}else{for(o=(S=this.visibleSymbols.mW)*(k=this.visibleSymbols.mH),u=[],h=0;h<o;)++h,u.push(!1);var c=new Hl(S,k,u);if(l<c.mW||r<c.mH){il.any(il.filterNull(this.visibleSymbols.mapCells(function(e,t){return null!=e?$f.getSymbol(e).size:null})),function(e){return!(e.x<=1)||1<e.y});for(var _=.5*(l-c.mW)|0,d=.5*(r-c.mH)|0,p=(w=c).mData,m=w.mW,u=0,h=w.mW*w.mH;u<h;){var g=(D=u++)%m-_,f=(D/m|0)-d;p[D]=!(0<=f&&f<c.mH&&0<=g&&g<c.mW)||p[D]}}for(var A=e.getCenterResized(c.mW,c.mH,null),x=null!=(F=this.stickiedGrid)?F.getCenterResized(this.visibleSymbols.mW,this.visibleSymbols.mH,null):null,w=this.visibleSymbols.mapCells(function(e,t){return{symbol:null!=e?$f.getSymbol(e):null,cell:t}}),u=[],h=0;h<w.length;){var y,b,v=w[h];++h,null!=v.symbol&&(y=v.symbol.id,b=v.cell,F=null!=x?x.mData[b.y*x.mW+b.x]:null,!(A.mData[b.y*A.mW+b.x]==y||(null!=F?$f.getId(F):null)==y))&&u.push(v)}il.each(u,function(e){var t=c,e=e.cell;t.mData[e.y*t.mW+e.x]=!0}),M=c}for(var i=this.visibleSymbols.mapToGridByMask(M,function(e,t){var n;return null==e?null:{asset:e,attachments:null!=(n=null!=(n=(e=$f.getSymbol(e)).get_attachments())?zy.values(n):null)?n:[],flags:e.flags}},Dy.equality),C=(s&&i.eachCells(function(e,t){null!=e&&$f.getSymbol(e.asset).get_attachments().clear()}),M),S=this.visibleSymbols.mapToGrid(function(e,t){return null==e}).mapToGrid(function(e,t){return!!e||C.mData[t.y*C.mW+t.x]}).getCenterResized(l,r,!0),k=(i.eachCellsByMask(M,function(e,t){null!=e&&a.removeSymbol(e.asset)}),S.mapToGrid(function(e,t){return!e})),M=this.visibleSymbols.get_dataGrid(),w=(this.visibleSymbols=this.visibleSymbols.getCenterResized(l,r,null).mapToGridByMask(k,function(e,t){return e}),this.visibleSymbols.set_dataGrid(M),this.currentGrid=e,this.get_symbols()),u=[],h=0;h<w.length;){v=w[h];++h,(1<v.size.y||1<v.size.x)&&u.push(v)}for(var I=u,B=new Array(I.length),u=0,h=I.length;u<h;)B[D=u++]=I[D].id;var T=B,E=(il.each(il.reduce(e.mapCellsByMask(S,function(e,t){return{id:e,cell:t,colossal:-1!=T.indexOf(e)}}),function(e,n){if(n.colossal){if(!il.any(e.ignoredCells,function(e){var t=n.cell;return t.x==e.x&&t.y==e.y})){for(var t=il.find(I,function(e){return e.id==n.id}).size,i=[],s=0,a=t.x;s<a;)for(var l=s++,r=0,o=t.y;r<o;)i.push(new Bw(n.cell.x+t.x-l-1,n.cell.y+t.y-r++-1));e.ignoredCells=e.ignoredCells.concat(i),e.remainingCells.push(n)}}else e.remainingCells.push(n);return e},{ignoredCells:[],remainingCells:[]}).remainingCells,function(e){$f.setSymbolOnGrid(a.createSymbol(e.id),a.visibleSymbols,e.cell)}),i.getCenterResized(l,r,null));this.visibleSymbols.eachCellsByMask(S,function(e,t){var n;null!=e&&(e=$f.getSymbol(e),null!=(t=E.mData[t.y*E.mW+t.x])&&(s&&null!=(n=t.attachments)&&il.each(n,Cn(e,e.attach)),e.flags|=t.flags),e.set_stenciled(a.get_stencil().keepSymbolsStenciled),e.animator.stencilActiveAnimations())}),t&&(this.sortGrid(),this.positionGrid());for(var F,k=null!=(F=this.stickiedGrid)?F.mData:null,w=il.filterNull(this.visibleSymbols.mData.concat(null!=k?k:[])),B=new Array(w.length),u=0,h=w.length;u<h;)B[D=u++]=$f.getSymbol(w[D]);if(il.each(B,function(e){e.resetBlur()}),!n){for(var D,w=il.filterNull(this.visibleSymbols.mData),B=new Array(w.length),u=0,h=w.length;u<h;)B[D=u++]=$f.getSymbol(w[D]);il.each(B,function(t){var e=il.find(a.get_symbols(),function(e){return e.id==t.id}).rotation;0===e._hx_index&&(e=e.v,t.object.setRotation(e.x,e.y,e.z))})}},patchReelData:function(e,t,n,i){if(null==i&&(i=!1),null==this.visibleSymbols.get_dataGrid()||null==this._reelSets)return null;for(var s=this.visibleSymbols.get_dataGrid().getCol(e,[]),a=il.filterNull(this.visibleSymbols._dataGrid.getCol(e,[])).length,n=(n-1)%a,l=0<=n?n:n+a,n=0<=(n=(l+t.length+1)%(a=il.filterNull(this.visibleSymbols._dataGrid.getCol(e,[])).length))?n:n+a,a=s[l],s=s[n],t=t.slice(),r=(t.unshift(a),t.push(s),i&&(a=this.get_reelSet().getCol(e,[]),this.visibleSymbols.get_dataGrid().setCol(e,a)),Xl.patchCol(this.visibleSymbols.get_dataGrid(),e,l,t),this.visibleSymbols.get_dataGrid()),s=new Hl(r.mW,r.mH),o=s.mData,u=s.mW,h=0,c=s.mW*s.mH;h<c;){var _=h++;o[_]=r.mData[(_/u|0)*r.mW+_%u]}return this.reelSet=s,{startIndex:l,endIndex:n}},refreshReelData:function(n){null==n&&(n=!0);var i=this,e=this.visibleSymbols.columnIndexes;null!=e&&il.eachi(e,function(e,t){i.patchReelData(t,i.currentGrid.getCol(t,[]),e,n)})},setRevealMode:function(e){this._revealMode=e;var t=this.behaviorModel.reveal;switch(t._hx_index){case 0:case 2:case 4:case 6:t.model.setMode(e);break;default:throw tl.thrown("Not yet implemented")}},getRevealMode:function(){return this._revealMode},getSymbolName:function(t){return il.find(this.get_symbols(),function(e){return e.id==t}).name},sortGrid:function(n,s){null==s&&(s=0);for(var i=this,e=(n=null==n?this.visibleSymbols:n).mapCells(function(e,t){return{asset:e,cell:t,index:i.getCellSortIndex(t,n),z:i.getSymbolZ(e,t,n)}},function(e,t){return e==t}),t=[],a=0;a<e.length;){var l=e[a];++a,null!=l.asset&&t.push(l)}t.sort(function(e,t){return e.z-t.z|0}),il.eachi(t,function(e,t){var n=$f.getSymbol(e.asset),i=n.object.get_parent();null!=i&&(i.removeChild(n.object.object),tt.update(n.object,0),i.addChild(n.object.object)),n.object.set_z(e.z+s),n.restingZPosition=n.object.get_z()}),n==this.visibleSymbols&&null!=this.stickiedGrid&&this.sortGrid(this.stickiedGrid,2*this.animationZOffset)},createSymbol:function(e){var t=this.owner._compMap,t=null!=t?t.h[q_.BASE_NAME]:null;return(t instanceof q_?t:null).addAsset(e,this._symbolStates.h[e])},removeSymbol:function(e){this.deactivateAsset(e);var t=this.owner._compMap,t=null!=t?t.h[q_.BASE_NAME]:null;(t instanceof q_?t:null).removeAsset(e)},isReelLocked:function(e){return this._lockedReels.h[e]},lockedReelsCount:function(n){return null!=n?zy.reduce(this._lockedReels,function(e,t){return t._0<=n&&t._1?e+1:e},0):be.count(this._lockedReels,function(e){return e})},positionGrid:function(e){var s=this;if(null!=this.currentGrid){(e=null==e?this.visibleSymbols:e).setCellSize(st.fromBacking(new it(this.get_symSize().x,this.get_symSize().y,null,null)));for(var n=e.position(this.get_symSize().x,this.get_symSize().y),t=e.mapCells(function(e,t){return{asset:e,position:n.mData[t.y*n.mW+t.x]}}),i=[],a=0;a<t.length;){var l=t[a];++a,null!=l.asset&&i.push(l)}il.each(il.distinct(i,function(e,t){return e.asset==t.asset}),function(e){var t=e.position,e=$f.getSymbol(e.asset),n=e.size.y,i=.5*(e.size.x-1)*s.get_symSize().x,n=.5*(1-n)*s.get_symSize().y;e.object.set_x(t.x+i),e.object.set_y(t.y+n)}),e==this.visibleSymbols&&(null!=this.stickiedGrid&&this.positionGrid(this.stickiedGrid),this.positionGrid(this.marginGrid))}},getCellSortIndex:function(e,t){var n,i;switch(this.sortDirection._hx_index){case 0:case 1:n=t.mH-(e.y+1);break;case 2:case 3:n=e.y}switch(this.sortDirection._hx_index){case 0:case 2:i=t.mW-(e.x+1);break;case 1:case 3:i=e.x}var s=new Bw(i,n);return s.y*t.mW+s.x},getSymbolZ:function(e,t,n){var i=$f.getSymbol(e),e=sl.MIN_DEPTH_PRECISON;return this.getCellSortIndex(t,n)*e+(null!=(null!=i?i.id:null)&&null!=(n=null!=(t=il.find(this.get_symbols(),function(e){return e.id==i.id}))?t.zPos:null)?n:0)},deactivateAsset:function(e){var t;null!=e&&(e=$f.getSymbol(e),t=this._activeSymbolPresentations,null!=e)&&t.remove(e)},get_symbols:function(){return this._config.symbols},get_initGrid:function(){return this._config.initGrid},get_symSize:function(){var e,t;return null!=this._config.symSizes?(e=this._config.symSizes,t=this.owner.getFromParentsByName(ee.BASE_NAME,ee).orientation,e.h[t]):this._config.symSize},get_stencilMargins:function(){return this.get_stencil().margins},get_stencilPos:function(){return this.get_stencil().pos},get_stencil:function(){var e=this._config.stencils;if(null==e)s=null;else{var t=this.owner.getFromParentsByName(_u.BASE_NAME,_u).gameMode,n=e.h[t];switch(n._hx_index){case 0:var i=this.owner.getFromParentsByName(ee.BASE_NAME,ee).orientation,s=n.orientations.h[i];break;case 1:s=n.config}}return null==s?this._config.stencil:s},get_background:function(){if(null==this._config.backgrounds)return this._config.background;var e=this.owner.getFromParentsByName(_u.BASE_NAME,_u).gameMode,t=this._config.backgrounds.h[e];switch(t._hx_index){case 0:var n=this.owner.getFromParentsByName(ee.BASE_NAME,ee).orientation,n=t.orientations.h[n];return this.owner.getFromParentsByName(ee.BASE_NAME,ee),n;case 1:return t.background}},get_backgrounds:function(){return this._config.backgrounds},get_width:function(){return this.currentGrid.mW},get_height:function(){return this.currentGrid.mH},get_reelSet:function(){return this._reelSets.h[this._currentReelSet]},get_activeSymbolPresentations:function(){return this._activeSymbolPresentations},get_baseName:function(){return"hacksaw.slotcommon.components.model.ReelModelComponent"},__class__:Md,__properties__:e(d.prototype.__properties__,{get_reelSet:"get_reelSet",get_height:"get_height",get_width:"get_width",get_backgrounds:"get_backgrounds",get_background:"get_background",get_initGrid:"get_initGrid",get_activeSymbolPresentations:"get_activeSymbolPresentations",get_stencil:"get_stencil",get_stencilMargins:"get_stencilMargins",get_stencilPos:"get_stencilPos",get_symSize:"get_symSize",get_symbols:"get_symbols"})}),function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b){this.sortDirection=Uf.TopLeftToBottomRight,this.gridHeightMargin=0,this.cloneMarginRows=!1,this.beatSync=null,this.smoothSuperTurbo=!0,this.depth=1,this.backgrounds=null,this.background=null,this.reactProps=null,this.currentReelSet=null,this.reelSets=null,this.reactDirection=9,this.revealDirection=9,this.winItemDuration=1,this.revealDelay=.2,this.stencils=null,this.stencil=new Dd(null,null,null,null),this.symSizes=null,this.symSize=null,this.symbols=e,this.tiers=t,null!=n&&(this.symSize=n),null!=i&&(this.symSizes=i),null!=s&&(this.stencil=s),null!=a&&(this.stencils=a),null!=l&&(this.revealDelay=l),null!=r&&(this.winItemDuration=r),null!=o&&(this.revealDirection=o),null!=u&&(this.reactDirection=u),this.initGrid=h,null!=c&&(this.reelSets=c),null!=_&&(this.currentReelSet=_),this.revealProps=d,null!=p&&(this.reactProps=p),null!=m&&(this.background=m),null!=g&&(this.backgrounds=g),null!=f&&(this.depth=f),null!=A&&(this.smoothSuperTurbo=A),null!=x&&(this.beatSync=x),null!=w&&(this.cloneMarginRows=w),null!=y&&(this.gridHeightMargin=y),null!=b&&(this.sortDirection=b)}),Bd=((i["hacksaw.slotcommon.components.model.ReelModelConfig"]=Id).__name__="hacksaw.slotcommon.components.model.ReelModelConfig",Id.prototype={__class__:Id},fe["hacksaw.slotcommon.components.model.ReelBackground"]={__ename__:!0,__constructs__:null,OrientationBased:((R=function(e){return{_hx_index:0,orientations:e,__enum__:"hacksaw.slotcommon.components.model.ReelBackground",toString:o}})._hx_name="OrientationBased",R.__params__=["orientations"],R),Default:((R=function(e){return{_hx_index:1,background:e,__enum__:"hacksaw.slotcommon.components.model.ReelBackground",toString:o}})._hx_name="Default",R.__params__=["background"],R)});Bd.__constructs__=[Bd.OrientationBased,Bd.Default],Bd.__empty_constructs__=[];(n=fe["hacksaw.slotcommon.components.model.ReelStencil"]={__ename__:!0,__constructs__:null,OrientationBased:((R=function(e){return{_hx_index:0,orientations:e,__enum__:"hacksaw.slotcommon.components.model.ReelStencil",toString:o}})._hx_name="OrientationBased",R.__params__=["orientations"],R),Default:((R=function(e){return{_hx_index:1,config:e,__enum__:"hacksaw.slotcommon.components.model.ReelStencil",toString:o}})._hx_name="Default",R.__params__=["config"],R)}).__constructs__=[n.OrientationBased,n.Default],n.__empty_constructs__=[];var Td=fe["hacksaw.slotcommon.components.model.BehaviorModel"]={__ename__:!0,__constructs__:null,Twist:((R=function(e){return{_hx_index:0,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Twist",R.__params__=["model"],R),Retwist:((R=function(e){return{_hx_index:1,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Retwist",R.__params__=["model"],R),Drop:((R=function(e){return{_hx_index:2,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Drop",R.__params__=["model"],R),Collapse:((R=function(e){return{_hx_index:3,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Collapse",R.__params__=["model"],R),Spin:((R=function(e){return{_hx_index:4,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Spin",R.__params__=["model"],R),Respin:((R=function(e){return{_hx_index:5,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Respin",R.__params__=["model"],R),Rotate:((R=function(e){return{_hx_index:6,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Rotate",R.__params__=["model"],R),Resize:((R=function(e){return{_hx_index:7,model:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorModel",toString:o}})._hx_name="Resize",R.__params__=["model"],R)},Ed=(Td.__constructs__=[Td.Twist,Td.Retwist,Td.Drop,Td.Collapse,Td.Spin,Td.Respin,Td.Rotate,Td.Resize],Td.__empty_constructs__=[],fe["hacksaw.slotcommon.components.model.BehaviorProps"]={__ename__:!0,__constructs__:null,DropProps:((R=function(e){return{_hx_index:0,config:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorProps",toString:o}})._hx_name="DropProps",R.__params__=["config"],R),CollapseProps:((R=function(e){return{_hx_index:1,config:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorProps",toString:o}})._hx_name="CollapseProps",R.__params__=["config"],R),TwistProps:((R=function(e){return{_hx_index:2,config:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorProps",toString:o}})._hx_name="TwistProps",R.__params__=["config"],R),SpinProps:((R=function(e){return{_hx_index:3,config:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorProps",toString:o}})._hx_name="SpinProps",R.__params__=["config"],R),CellSpinProps:((R=function(e){return{_hx_index:4,config:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorProps",toString:o}})._hx_name="CellSpinProps",R.__params__=["config"],R),RotateProps:((R=function(e){return{_hx_index:5,config:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorProps",toString:o}})._hx_name="RotateProps",R.__params__=["config"],R),ResizeProps:((R=function(e){return{_hx_index:6,config:e,__enum__:"hacksaw.slotcommon.components.model.BehaviorProps",toString:o}})._hx_name="ResizeProps",R.__params__=["config"],R)}),Fd=(Ed.__constructs__=[Ed.DropProps,Ed.CollapseProps,Ed.TwistProps,Ed.SpinProps,Ed.CellSpinProps,Ed.RotateProps,Ed.ResizeProps],Ed.__empty_constructs__=[],fe["hacksaw.slotcommon.components.model.StencilRevealBehavior"]={__ename__:!0,__constructs__:null,REFRESH:{_hx_name:"REFRESH",_hx_index:0,__enum__:"hacksaw.slotcommon.components.model.StencilRevealBehavior",toString:o},APPLY:{_hx_name:"APPLY",_hx_index:1,__enum__:"hacksaw.slotcommon.components.model.StencilRevealBehavior",toString:o},IGNORE:{_hx_name:"IGNORE",_hx_index:2,__enum__:"hacksaw.slotcommon.components.model.StencilRevealBehavior",toString:o}}),Dd=(Fd.__constructs__=[Fd.REFRESH,Fd.APPLY,Fd.IGNORE],Fd.__empty_constructs__=[Fd.REFRESH,Fd.APPLY,Fd.IGNORE],function(e,t,n,i){this.revealBehavior=Fd.REFRESH,this.keepSymbolsStenciled=!1,this.margins=st.fromBacking(new it(0,0,null,null)),this.pos=st.fromBacking(new it(0,0,null,null)),null!=e&&(this.pos=e),null!=t&&(this.margins=t),null!=n&&(this.keepSymbolsStenciled=n),null!=i&&(this.revealBehavior=i)}),Rd=((i["hacksaw.slotcommon.components.model.ReelStencilProps"]=Dd).__name__="hacksaw.slotcommon.components.model.ReelStencilProps",Dd.prototype={__class__:Dd},function(e){Jc.call(this,e)}),Pd=((i["hacksaw.slotcommon.components.model.ResizeModel"]=Rd).__name__="hacksaw.slotcommon.components.model.ResizeModel",Rd.__super__=Jc,Rd.prototype=e(Jc.prototype,{__class__:Rd}),function(e){Jc.call(this,e)}),zd=((i["hacksaw.slotcommon.components.model.RetwistModel"]=Pd).__name__="hacksaw.slotcommon.components.model.RetwistModel",Pd.__super__=Jc,Pd.prototype=e(Jc.prototype,{__class__:Pd}),function(e){Jc.call(this,e)}),Qd=((i["hacksaw.slotcommon.components.model.RotateModel"]=zd).__name__="hacksaw.slotcommon.components.model.RotateModel",zd.__super__=Jc,zd.prototype=e(Jc.prototype,{__class__:zd}),function(){this.beatSyncOverride=null,this.idle=!0,this.revealing=!1,d.call(this),this.componentType=Ie.Model}),Vd=((i["hacksaw.slotcommon.components.model.SlotModel"]=Qd).__name__="hacksaw.slotcommon.components.model.SlotModel",Qd.__super__=d,Qd.prototype=e(d.prototype,{get_baseName:function(){return"hacksaw.slotcommon.components.model.SlotModel"},__class__:Qd}),function(e,t){null==t&&(t=!1);var n=new It(new Hr);tt.init(n,null),this._assetStub=Hf.ObjectSymbol(new Ca(n,null,-99)),this._viewMarginSize=0,this._spinDirection=9,this._randomReelStartPostition=!1,this._quickStopEnabled=!1,this._gridStartDelay=null,this._gridStopDelay=null,this._appModel=null,this._keepMarginRows=!1,this._spinsComplete=new qy,this._landedIdsRemaining=[],this._tweens=[],this._phaseSignals=[],this._spinMovement=[],this._spinViews=[],this._viewToCellIndexes=new Je,this._activeIndexes=[],this._lastPositionTick=0,this.VIEW_TICK_RATE=.016666666666666666,this.PADDING_COUNT=2,Jc.call(this,e),this.reelCellSpin=t}),Od=((i["hacksaw.slotcommon.components.model.SpinModel"]=Vd).__name__="hacksaw.slotcommon.components.model.SpinModel",Vd.__super__=Jc,Vd.prototype=e(Jc.prototype,{start:function(z,e){var c=this;if($f.getSymbol(this._assetStub).reset(),null==e){for(var t=this._model.get_width(),Q=this._model.get_height(),V=t*Q,n=[],i=0;i<V;)++i,n.push(!0);e=new Hl(t,Q,n)}this._quickStopEnabled=!1,this._spinDirection=z,this._appModel=null!=this._appModel?this._appModel:this._model.owner.getFromParentsByName(ee.BASE_NAME,ee),this._actions=null!=this._actions?this._actions:nl.__cast(this._actor.get_revealActions(),kd),this._model.quickStop=this._actor.get_superTurbo(),this._spinsComplete=new qy;for(var u,s,a=this._model.get_symbols(),l=new Array(a.length),n=0,i=a.length;n<i;)l[o=n++]=a[o].id;if(this._landedIdsRemaining=l,this._gameChannel.publish(this._model.messagePrefix+"spin",{turbo:this._actor.get_turbo(),superTurbo:this._actor.get_superTurbo()}),this._lastPositionTick=0,this.reelCellSpin)u=this._model.visibleSymbols;else{for(var r=this._model.visibleSymbols.mapToGrid(function(e,t){return e},Dy.equality),n=0,i=r.mW;n<i;){for(var o=n++,O=il.distinct(r.getCol(o,[])),h=this._model.visibleSymbols.getCol(o,[]),l=new Array(h.length),_=0,d=h.length;_<d;){var W=h[I=_++];l[I]=-1!=O.indexOf(W)?W:c._assetStub}r.setCol(o,l)}t=qh.zipWith(r.getCenterResized(this._model.marginGrid.mW,this._model.marginGrid.mH,null).toArray(),this._model.marginGrid.toArray(),function(e,t){return null!=e?e:t});this._model.marginGrid.clear(),u=new Hl(this._model.marginGrid.mW,this._model.marginGrid.mH,t)}this._viewMarginSize=this.reelCellSpin?1:.5*(u.mH-this._model.get_height())|0,this._keepMarginRows=this._model.cloneMarginRows&&!this.reelCellSpin;var p=this._spinViews;if(null!=p&&0<p.length&&!this.reelCellSpin){for(a=this._spinViews,l=new Array(a.length),n=0,i=a.length;n<i;)l[o=n++]=a[o].gridCell.x;for(n=[],i=0,_=this._model.get_width();i<_;)n.push(i++);for(i=[],_=0;_<n.length;){var m=n[_];++_,-1==l.indexOf(m)&&i.push(m)}for(var a=this._spinViews,g=new Array(a.length),n=0,_=a.length;n<_;)g[o=n++]=a[o].stopPosition;s=il.applyIndexes(il.pad(g,this._model.get_width(),0),l.concat(i))}else s=il.pad([],this._model.get_width(),0);for(a=this._model.get_symbols(),n=[],i=0;i<a.length;){m=a[i];++i,1<m.size.y&&n.push(m)}for(var f=n,A=[],n=0,i=s.length;n<i;){var x,o=n++,w=il.filterNull(c._model.get_reelSet().getCol(o,[]));if(null!=f&&0<f.length)x=il.reduce(w,function(e,t){var n=il.find(f,function(e){return e.id==t});if(null!=n)for(var i=0,s=n.size.y;i<s;)++i,e.result.push(e.i);else e.result.push(e.i);return e.i++,e},{result:[],i:0}).result;else{for(var _=[],d=0,y=w.length;d<y;)_.push(d++);x=_}A.push({reel:w,reelIndexes:x,stopIndex:s[o]%x.length,columnIndex:o})}for(n=[],i=0;i<A.length;){var m=A[i],N=(++i,c._model.isReelLocked(m.columnIndex));null!=N&&N||n.push(m)}for(i=[],_=0;_<n.length;){var b=n[_],v=(++_,b.columnIndex),C=u.getCol(v,[]);if(this.reelCellSpin){for(A=[],d=0,y=C.length;d<y;){o=d++,a=e;A.push(a.mData[o*a.mW+v]?[c._assetStub,C[o],c._assetStub]:null)}F=A}else F=[il.fill(C,this._assetStub)];for(var S=[],k=0,M=F.length;k<M;){var I=k++;S.push({symbols:F[I],cell:new Bw(v,I),reel:b.reel,reelIndexes:b.reelIndexes,startIndex:c._randomReelStartPostition?el.random(b.reelIndexes.length):b.stopIndex+I})}i.push(S)}for(a=Array.prototype.concat.apply([],i),n=[],i=0;i<a.length;){m=a[i];++i;var B=m.cell;e.mData[B.y*e.mW+B.x]&&n.push(m)}for(var i=new Je,T=0;T<n.length;){B=n[T++].cell;i.h[B.y*u.mW+B.x]=T-1}this._viewToCellIndexes=i,il.each(n,function(t){if(c.reelCellSpin)il.each(t.symbols,function(e){c.setSymbolStencil(e,t.cell.y%2==0)});else{for(var e=c._viewMarginSize,n=t.symbols.slice(0,e),i=t.symbols,s=i.slice(i.length-e),a=(il.each(n.concat(s),function(e){e=$f.getSymbol(e);e.set_stenciled(!0),e.object.set_visible(!1)}),[]),l=0,r=n.length;l<r;){var o=l++;a.push({asset:n[o],cell:new Bw(t.cell.x,o)})}il.each(a,function(e){var t=e.cell;u.mData[t.y*u.mW+t.x]=e.asset});for(a=[],l=0,r=s.length;l<r;){o=l++;a.push({asset:s[o],cell:new Bw(t.cell.x,t.symbols.length-e+o)})}il.each(a,function(e){var t=e.cell;u.mData[t.y*u.mW+t.x]=e.asset})}});for(l=new Array(n.length),i=0,_=n.length;i<_;){var E,F=(b=n[o=i++]).symbols,D=b.reelIndexes.length,G=Ry.wrapCircular(-(0|b.startIndex),D);if(F[0]==c._assetStub){for(var U=$f.getId(c._assetStub),A=[],d=0,y=F.length;d<y;){I=d++;A.push(F[I]==c._assetStub?U:Ry.wrapCircular(G+I,D))}E=A}else{for(S=[],k=0,M=F.length;k<M;)S.push(Ry.wrapCircular(G+k++,D));E=S}var B=b.cell,L=c.reelCellSpin?c.addReelStencil(B,F.length-c.PADDING_COUNT,B.y%2==0):null;l[o]=new Wd(b.reel,b.reelIndexes,E,F,L,B,b.startIndex,null,null,F.slice(c._viewMarginSize,-c._viewMarginSize),b.startIndex,null)}this._spinViews=l;for(a=this._spinViews,n=[],i=0;i<a.length;){m=a[i];++i,m.reel.length!=m.reelIndexes.length&&n.push(m)}il.each(n,function(e){c.replaceOverlappingSymbols(e,e.startPosition)});for(a=this._spinViews,l=new Array(a.length),n=0,i=a.length;n<i;)l[n++]=new Od(null,null,null,null,null,null,null,null,null);this._spinMovement=l;for(A=[],n=0,i=this._spinViews.length;n<i;)A.push(n++);this._activeIndexes=A;for(a=this._spinViews,l=new Array(a.length),n=0,i=a.length;n<i;){var R=s1.trigger();s1.nextTime(R,function(e){switch(e._hx_index){case 0:case 1:case 2:case 3:case 4:return!1;case 5:return!0}}).handle(Cn(R,R.dispose)),l[n++]=R}this._phaseSignals=l;for(a=this._spinViews,l=new Array(a.length),n=0,i=a.length;n<i;)l[o=n++]=a[o].gridCell;for(var P=qh.zipWith(this._spinMovement,l,function(s,e){var t=c._gridStartDelay;return{tweenVector:new Et(0,0,0,1),tweenConfig:new nt(st.fromBacking(new it(c.config.speed,null,null,null)),null,null,c.config.startDuration,null,c.config.startCurve,null,null,null,function(e,t,n,i){s.velocity=e},null),cell:e,movementData:s,delay:t.mData[e.y*t.mW+e.x]}}),l=new Array(P.length),n=0,i=P.length;n<i;)l[o=n++]=P[o].delay;for(var j=il.distinct(l),g=(FA.sort(j,Fy.compare),new Array(l.length)),n=0,i=l.length;n<i;)g[o=n++]=il.findIndex(j,(t=>function(e){return e==t[0]})([l[o]]));for(A=[],n=0,i=(p=il.zip(P,g)).length;n<i;){var H=p[o=n++];A.push({viewIndex:o,config:H._0,delayIndex:H._1})}for(var n=[],Y=il.groupByAppend(A,function(e){return e.delayIndex},new Je).iterator();Y.hasNext();){var Z=[Y.next()];n.push(((u,h)=>function(e){for(var t=u[0]-e,n=[],i=0;i<h[0].length;){var s=h[0][i];++i,n.push({startTweenConfig:s.config,delayDone:c._actions.startReel(s.viewIndex,t)})}il.each(n,function(t){t.delayDone.handle(function(){var e=t.startTweenConfig;0===e.movementData.phase._hx_index&&Tt.tween(e.tweenVector,e.tweenConfig)})});for(var a,l=new Array(n.length),i=0,r=n.length;i<r;){var o=i++;l[o]=n[o].delayDone}return rt.map(rt.inParallel(l),(a=u,function(e){return a[0]}))})([Z[0][0].config.delay],Z))}Rt(n,0);for(l=new Array(P.length),n=0,i=P.length;n<i;)l[o=n++]=P[o].tweenVector;this._tweens=l;for(a=this._phaseSignals,l=new Array(a.length),n=0,i=a.length;n<i;)l[o=n++]=s1.nextTime(a[o],function(e){return e==Yd.SPIN||e==Yd.STOPPING});return this.update(0),rt.noise(rt.inParallel(l))},end:function(u){for(var c=this,e=this._spinViews,t=new Array(e.length),n=0,i=e.length;n<i;)t[C=n++]=e[C].startSymbols;for(var s=Array.prototype.concat.apply([],t),a=(e=this._model.visibleSymbols).mData,n=0,i=e.mW*e.mH;n<i;){var l=a[C=n++];a[C]=-1!=s.indexOf(l)?null:l}this._model.setGrid(u,!0,null,null,!1);for(var r=this._model.visibleSymbols.mapToGrid(function(e,t){return e},Dy.equality),e=this._spinViews,t=new Array(e.length),n=0,i=e.length;n<i;){var o=[e[C=n++]];if(c.reelCellSpin)var h=c._model.visibleSymbols,_=o[0].gridCell,d=o[0].targetSymbols=[h.mData[_.y*h.mW+_.x]];else{for(var p=r.getCol(o[0].gridCell.x,[]),m=c._model.visibleSymbols.getCol(o[0].gridCell.x,[]),g=new Array(m.length),f=0,A=m.length;f<A;){var x=f++,l=m[x];g[x]=-1!=p.indexOf(l)?l:c._assetStub}d=g}il.each(d,(t=>function(e){c.setSymbolStencil(e,t[0].gridCell.y%2==0),$f.getSymbol(e).object.set_visible(!1)})(o)),t[C]={view:o[0],targetSymbols:d}}if(il.each(t,function(e){e.view.targetSymbols=e.targetSymbols}),this._model.sortGrid(this._model.visibleSymbols),this._renderer.hideStickyPosDuringReveal){var w,y=this._model.stickiedMask;if(null!=y)w=y;else{for(var y=u.mW,b=u.mH,v=y*b,n=[],i=0;i<v;)++i,n.push(!1);w=new Hl(y,b,n)}this._model.visibleSymbols.eachCellsByMask(w,function(e,t){$f.getSymbol(e).flags|=4})}for(e=this._spinViews,t=new Array(e.length),n=0,i=e.length;n<i;){var C=n++,h=c._gridStopDelay,_=e[C].gridCell;t[C]=h.mData[_.y*h.mW+_.x]}for(var S=il.distinct(t),g=(FA.sort(S,Fy.compare),new Array(t.length)),n=0,i=t.length;n<i;)g[C=n++]=il.findIndex(S,(t=>function(e){return e==t[0]})([t[C]]));for(var k=il.zip(this._phaseSignals,g),M=[],n=0,i=k.length;n<i;){var I=k[C=n++];M.push({viewIndex:C,signal:I._0,delayIndex:I._1})}for(var n=[],B=il.groupByAppend(M,function(e){return e.delayIndex},new Je),T=B.keys();T.hasNext();){var E=T.next(),F=[B.get(E)],E=[S[E]];n.push(((o,u,h)=>function(e){for(var t,n,i,s=u[0]-e,a=[],l=0;l<h[0].length;){var r=h[0][l];++l,a.push({reel:r.viewIndex,delayDone:c._actions.stopReel(r.viewIndex,s,c.config.attentionDuration)})}return il.each(a,(t=o,n=u,i=h,function(r){var o,u,h;r.delayDone.handle((o=t,u=n,h=i,function(e){if(c.stop(r.reel,e),null==c.config.attentionDuration&&e){for(var t=new Array(h[0].length),n=0,i=h[0].length;n<i;){var s=n++;t[s]=s1.nextTime(h[0][s].signal,function(e){return e==Yd.IDLE||c._model.quickStop})}rt.inParallel(t).handle((a=o,l=u,function(){a[0].trigger(l[0])}))}else o[0].trigger(u[0]);var a,l}))})),o[0]})([new qy],E,F))}Rt(n,0);var y=qh.zipWith(this._phaseSignals,this._spinViews,function(e,t){return rt.map(s1.nextTime(e,function(e){return e==Yd.BOUNCE||e==Yd.PRESENT||e==Yd.IDLE}),function(e){return t})}),b=qh.zipWith(this._phaseSignals,this._spinViews,function(e,t){return rt.map(s1.nextTime(e,function(e){return e==Yd.IDLE}),function(e){return t})}),D=(il.each(y,function(e){e.handle(function(e){c.config.presentAfterSettle||c.triggerSymbolPresentation(e,u);e=e.gridCell;c._gameChannel.publish(c._model.messagePrefix+"reelBounceStart",{index:e.y*c._model.visibleSymbols.mW+e.x})})}),il.each(b,function(e){e.handle(function(e){c.config.presentAfterSettle&&c.triggerSymbolPresentation(e,u);for(var t=e.targetSymbols,n=new Array(t.length),i=0,s=t.length;i<s;)n[a=i++]=$f.getSymbol(t[a]);il.each(n,function(e){e.set_stenciled(c._model.get_stencil().keepSymbolsStenciled)});for(var a,l=e.gridCell,l=l.y*c._model.visibleSymbols.mW+l.x,r=new Array(n.length),i=0,s=n.length;i<s;)r[a=i++]=n[a].id;l={index:l,syms:r,turboMode:c._actor.get_turboMode(),attention:e.attention};if(c._model.get_stencil().keepSymbolsStenciled){for(t=e.symbols,i=[],s=0;s<t.length;){var o=t[s];++s,-1==n.indexOf($f.getSymbol(o))&&i.push(o)}il.each(i,function(e){$f.getSymbol(e).flags|=4})}c._gameChannel.publish(c._model.messagePrefix+"reelStopped",l)})}),rt.inParallel(b).handle(function(e){if(il.each(e,function(e){null!=e.stencilMesh&&(null!=(t=e.stencilMesh)&&null!=t.parent&&t.parent.removeChild(t),e.stencilMesh=null,il.each(e.targetSymbols,function(e){e=$f.getSymbol(e);e.set_stenciled(!1),e.set_stenciled(c._model.get_stencil().keepSymbolsStenciled)}));for(var t=il.distinct(e.startSymbols),n=[],i=0;i<t.length;){var s=t[i];++i,s!=c._assetStub&&n.push(s)}il.each(n,Cn(R=c._model,R.removeSymbol))}),c._keepMarginRows||il.each(e,function(e){for(var t=il.distinct(e.symbols),n=[],i=0;i<t.length;){var s=t[i];++i,-1==e.targetSymbols.indexOf(s)&&n.push(s)}il.each(n,Cn(R=c._model,R.removeSymbol))}),!c.reelCellSpin){for(var t=new Je,n=0;n<e.length;){var i,s=e[n],a=(++n,s.symbols);i=c._keepMarginRows?(i=c._viewMarginSize,il.pad(a.slice(0,i),a.length-i,null).concat(a.slice(a.length-i))):il.pad([],a.length,null),t.h[s.gridCell.x]=i}for(var l=t,r=l.keys();r.hasNext();){var o=r.next(),u=l.get(o);c._model.marginGrid.setCol(o,u)}}}),new qy);return this._spinsComplete.handle(function(){c._actor.setGrid(u).handle(Cn(D,D.trigger))}),D},update:function(t){var e,A=this;if(null==(S=this._activeIndexes)||0==S.length){switch(this._spinsComplete.getStatus()._hx_index){case 1:case 2:e=!0;break;case 3:e=!1;break;case 0:case 4:e=!1}f=!(!e||0==il.reduce(il.filterNull(zy.values(this._model.presented)),function(e,t){return null!=t&&0<t.length?1:0},0)&&(this._spinsComplete.trigger(null),1))}else f=!0;if(f){for(var n=il.at(this._spinViews,this._activeIndexes),i=il.at(this._spinMovement,this._activeIndexes),s=(il.each(il.at(this._tweens,this._activeIndexes),function(e){Tt.update(e,t)}),function(e,t){switch(e.phase._hx_index){case 0:case 1:e.position+=e.velocity*t;break;case 2:e.position<e.stopTarget&&(e.velocity+=e.acceleration*t,e.velocity=Math.max(e.velocity,0),e.position+=e.velocity*t);break;case 3:var n=e.attention?A.config.attentionStopType:A.config.stopType;switch(n._hx_index){case 0:var i,s,a,l,r,o=function(e){return e*e},u=e.stopTarget,h=2.77258872224/(n.halflife+1e-9),c=(c=n.dampingRatio,o(h/(2*c))),u=u+0*h/(c+1e-9),_=h/2,d=Math.sqrt(c-h*h/4),p=e.position,m=e.velocity;i=Math.abs(d)<1e-9?{x:(l=p-u)*(r=1/(1+(s=_*t)+.48*s*s+.235*s*s*s))+t*(a=m+l*_)*r+u,v:-_*l*r-_*t*a*r+a*r}:0<d?(o=Math.sqrt(o(m+_*(p-u))/(d*d+1e-9)+o(p-u)),i=Math.atan((m+(p-u)*_)/(-(p-u)*d+1e-9)),{x:(o=0<p-u?o:-o)*(r=1/(1+(s=_*t)+.48*s*s+.235*s*s*s))*Math.cos(d*t+i)+u,v:-_*o*r*Math.cos(d*t+i)-d*o*r*Math.sin(d*t+i)}):d<0?{x:(l=p-(a=(u*(s=(h+Math.sqrt(h*h-4*c))/2)-p*s-m)/((_=(h-Math.sqrt(h*h-4*c))/2)-s))-u)*(o=1/(1+(p=s*t)+.48*p*p+.235*p*p*p))+a*(r=1/(1+(p=_*t)+.48*p*p+.235*p*p*p))+u,v:-s*l*o-_*a*r}:{x:e.stopTarget,v:0},e.position=i.x,e.velocity=i.v;break;case 1:d=n.deceleration;e.velocity+=d*t,e.stopTarget-(e.position+e.velocity*t)<0&&0<=e.velocity&&(e.position=e.stopTarget,m=(1+n.restitution)*e.velocity,e.velocity-=--m,-e.velocity/t<d)&&(e.velocity=0,e.position=e.stopTarget),e.position+=e.velocity*t;break;case 2:e.position=e.stopTarget,e.velocity=0}}var c}),a=function(e){switch(e.phase._hx_index){case 0:e.phase=Yd.SPIN,e.velocity=A.config.speed;break;case 1:case 5:break;case 2:e.phase=Yd.BOUNCE;var t=(e.position-e.stopTarget)/e.velocity;e.position=e.stopTarget,e.velocity=e.stopTargetSpeed,s(e,A.VIEW_TICK_RATE-t);break;case 3:e.phase=Yd.PRESENT,e.position=e.stopTarget,e.velocity=0;break;case 4:e.phase=Yd.IDLE,e.lastPosition=e.position=e.stopTarget}},l=(this._lastPositionTick+=t,new Array(i.length)),r=0,o=i.length;r<o;)l[M=r++]=i[M].phase;if(this._lastPositionTick>=this.VIEW_TICK_RATE){il.each(i,function(e){e.lastPosition=e.position,e.lastVelocity=e.velocity});do{il.each(i,function(e){s(e,A.VIEW_TICK_RATE)});for(r=[],o=0;o<i.length;){var u=i[o];++o,(e=>{switch(e.phase._hx_index){case 0:return Fy.nearEquals(e.velocity,A.config.speed);case 1:case 5:return!1;case 2:return e.position>=e.stopTarget;case 3:return!!Fy.nearEquals(e.position,e.stopTarget,.001)&&Math.abs(e.velocity)<=.1;case 4:return e.lastPosition==e.position}})(u)&&r.push(u)}}while(il.each(r,a),this._lastPositionTick-=this.VIEW_TICK_RATE,this._lastPositionTick>=this.VIEW_TICK_RATE)}for(var h=this._lastPositionTick/this.VIEW_TICK_RATE,c=new Array(i.length),r=0,o=i.length;r<o;){var _=(d=i[M=r++]).lastPosition==d.position?d.position:d.lastPosition*(1-h)+d.position*h;switch(A._spinDirection){case 1:k=-_;break;case 9:k=_;break;default:throw new tl((null==A._spinDirection?"null":Zx.VALUES[A._spinDirection])+" not supported in spin model")}c[M]=k}il.each(il.zip(c,n),function(e){e._1.viewPosition=e._0+e._1.startPosition});for(c=(il.each(il.filterMap(n,function(s){for(var e=s.reelView,t=s.reelIndexes.length,n=Ry.wrapCircular(-(0|s.viewPosition),t),i=[],a=0,l=e.length;a<l;)i.push(Ry.wrapCircular(n+a++,t));var r=i;if(il.equals(e,r))return OA.None;var o,u=A._viewMarginSize;if(s.viewPosition-s.startPosition<=e.length-u){for(var h=Ry.wrapCircular(-(s.startPosition-u|0),t),i=[],a=0,l=r.length;a<l;)i.push(Ry.wrapCircular(h+a++,t));for(var c=new Array(r.length),a=0,l=r.length;a<l;){var _=a++,n=il.findIndex(i,(t=>function(e){return t[0]==e})([r[_]]));c[_]=n<0?null:s.startSymbols[n]}}else for(c=new Array(e.length),a=0,l=e.length;a<l;)c[a++]=null;if(o=c,s.stopPosition-(s.viewPosition+(e.length-u))<=0){for(var d=Ry.wrapCircular(-(s.stopPosition-u|0),t),i=[],a=0,l=r.length;a<l;)i.push(Ry.wrapCircular(d+a++,t));for(c=new Array(r.length),a=0,l=r.length;a<l;){_=a++,n=il.findIndex(i,(t=>function(e){return t[0]==e})([r[_]]));c[_]=n<0?null:s.targetSymbols[n]}}else for(c=new Array(e.length),a=0,l=e.length;a<l;)c[a++]=null;u=c,e=il.reducei(e,function(e,t,n){var i=il.findIndex(r,function(e){return e==t});return-1!=i&&null==e[i]&&(e[i]=s.symbols[n]),e},qh.zipWith(o,u,function(e,t){return null!=t?t:e}));return OA.Some({reelView:r,view:s,matchingSymbols:e})}),function(n){for(var i=n.view.targetSymbols.concat(n.view.startSymbols),e=n.view.reel,t=n.view.symbols,s=[],a=0;a<t.length;){var l=t[a];++a,l!=A._assetStub&&-1==n.matchingSymbols.indexOf(l)&&s.push(l)}il.each(il.distinct(s),function(e){-1!=i.indexOf(e)?$f.getSymbol(e).object.set_visible(!1):A._model.removeSymbol(e)});for(var r=il.at(n.view.reelIndexes,n.reelView),o={},u=(il.eachi(r,function(e,t){t=n.matchingSymbols[t];null!=t&&t!=A._assetStub&&-1==i.indexOf(t)&&(o[e]=t)}),[]),s=0,a=r.length;s<a;){var h=r[d=s++];u.push(o.hasOwnProperty(h)?o[h]:n.matchingSymbols[d])}for(var c=il.distinct(il.filterNull(qh.zipWith(u,r,function(e,t){return null==e?t:null}))),_=new Array(c.length),s=0,a=c.length;s<a;){var d,p=c[d=s++],m=A._model.createSymbol(e[p]);$f.getSymbol(m).object.set_z(A._model.getSymbolZ(m,n.view.gridCell,A._model.marginGrid)),A.setSymbolStencil(m,n.view.gridCell.y%2==0),_[d]={newAsset:m,i:p}}var g=_,f=qh.zipWith(u,r,function(e,t){return null!=e?e:il.find(g,function(e){return e.i==t}).newAsset});return n.view.reelView=n.reelView,n.view.symbols=f}),new Array(i.length)),r=0,o=i.length;r<o;){var d=i[M=r++];c[M]=d.lastVelocity==d.velocity?d.velocity:d.lastVelocity*(1-h)+d.velocity*h}il.each(il.zip(c,n),function(t){il.each(t._1.symbols,function(e){$f.getSymbol(e).velocity=t._0})});for(var p=-.5*(this._model.marginGrid.mH-1),m=.5*(1-this._model.marginGrid.mW),g=this._spinViews,c=new Array(g.length),r=0,o=g.length;r<o;)c[M=r++]=(l=>{var e,t=l.viewPosition,r=l.viewPosition-(t<0?Math.ceil(t):Math.floor(t)),o=l.reelView.length-A.PADDING_COUNT,n=l.symbols[0];if(1<(t=$f.getSymbol(n).size.y)){for(var i=l.symbols,s=[],a=0;a<i.length;){var u=i[a];++a,u==n&&s.push(u)}e=s.length-t}else e=0;for(var i=il.distinct(l.symbols,function(e,t){return e!=A._assetStub&&e==t}),h=$f.getSymbol,c=new Array(i.length),s=0,a=i.length;s<a;){var _=s++;c[_]=h(i[_])}return il.reduce(c,function(e,t){var n=t.size.y,i=.5*(t.size.x-1),s=r+e.i,a=-A._model.get_symSize().y*(l.gridCell.y+p+s+.5*(n-1));return e.posData.push({x:(l.gridCell.x+m+i)*A._model.get_symSize().x,y:a,hideSymbol:0!=(4&t.flags)||A.reelCellSpin&&Math.abs(s-1)>o,symObject:t}),e.i+=n,e},{i:e,posData:[]}).posData})(g[M]);for(var f=Array.prototype.concat.apply([],c),g=(il.each(f,function(e){var t=e.symObject,n=t.object;n.set_x(e.x),n.set_y(e.y),n.set_visible(!e.hideSymbol),t.updateBlur()}),this._spinViews),r=[],o=0;o<g.length;){u=g[o];++o,null!=u.stencilMesh&&r.push(u)}il.each(r,function(e){var t=e.stencilMesh;t.scaleX=A._model.get_symSize().x,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144),(t=e.stencilMesh).scaleY=A._model.get_symSize().y,t.flags|=1,0!=(131072&t.flags)&&(t.flags|=262144)});for(c=new Array(n.length),r=0,o=n.length;r<o;){var x,w=[n[M=r++]];switch(A._spinDirection){case 1:x=!0;break;case 9:x=!1;break;default:throw new tl((null==A._spinDirection?"null":Zx.VALUES[A._spinDirection])+" not supported in spin model")}var y=A._model.quickStop||x||A.reelCellSpin?0:1,b=w[0].symbols.length-(A._model.quickStop||!x||A.reelCellSpin?0:1);c[M]=il.filterMap(w[0].symbols.slice(A._viewMarginSize,-A._viewMarginSize).slice(y,b),(t=>function(e){return $f.getSymbol(e).stenciled?OA.None:OA.Some({asset:e,evenRow:t[0].gridCell.y%2==0})})(w))}for(f=Array.prototype.concat.apply([],c),c=(il.each(f,function(e){A.setSymbolStencil(e.asset,e.evenRow)}),new Array(i.length)),r=0,o=i.length;r<o;)c[M=r++]=i[M].phase;for(var v=[],r=0,o=(S=il.zip(c,l)).length;r<o;){var C=S[M=r++];v.push(C._0!=C._1?M:null)}f=il.filterNull(v);il.each(il.at(il.zip(il.at(this._phaseSignals,this._activeIndexes),c),f),function(e){e._0.handlers.invoke(e._1)});for(var S,k,v=[],r=0,o=(S=il.zip(this._spinMovement,this._spinViews)).length;r<o;){var M,C=S[M=r++];v.push(C._0.phase==Yd.IDLE&&il.equals(C._1.symbols.slice(A._viewMarginSize,-A._viewMarginSize),C._1.targetSymbols)?null:M)}this._activeIndexes=il.filterNull(v),null!=(k=this._actions)&&k.update(t),null!=this._model.get_backgrounds()&&this._renderer.setBackground(this._appModel.orientation,this._casinoModel.gameMode)}},stop:function(e,t){var r=this,n=this._activeIndexes;if(!(null==n||0==n.length||e<0)){var n=[e],e=il.at(this._spinMovement,n),i=il.at(this._spinViews,n);if(-1==qh.zipWith(e,i,function(e,t){t=t.targetSymbols;if(null==t||0==t.length)return!0;switch(e.phase._hx_index){case 0:case 1:case 2:return!1;case 3:case 4:case 5:return!0}}).indexOf(!0)){if(il.each(il.at(this._tweens,n),function(e){Tt.cancel(e)}),il.each(e,function(e){e.attention=null!=e.attention?e.attention:t}),il.each(i,function(e){e.attention=null!=e.attention?e.attention:t}),this._model.quickStop&&!this._quickStopEnabled&&(this._quickStopEnabled=!0,!this.reelCellSpin)){for(var s=il.at(this._spinMovement,this._activeIndexes),a=[],l=0;l<s.length;){var o,u=s[l];switch(++l,u.phase._hx_index){case 0:case 1:case 2:o=!0;break;case 3:case 4:case 5:o=!1}o&&a.push(u)}var h=il.reduce(a,function(e,t){return e+=t.position-Math.floor(t.position)},0)/a.length;il.each(a,function(e){e.position=Math.floor(e.position)+h})}for(s=qh.zipWith(e,i,function(e,t){var n=(!t.attention||Math.abs(r.config.attentionSpeed)<=1e-9?r.config.speed:r.config.attentionSpeed)*(r._model.quickStop?2:1),i=t.attention?r.config.attentionStopSpeed:r.config.stopSpeed,i=i-n==0?i-1e-5:i,s=Math.pow(i,2)-Math.pow(n,2),a=Math.round(s/(2*(i-n)/(r._model.quickStop?0:t.attention?r.config.attentionStopDuration:r.config.stopDuration))),l=t.symbols.length-1,a=(l<a?a:l)+(Math.ceil(e.position)-e.position),l=2==e.phase._hx_index?e.stopTarget:Math.round(e.position+a);return{acceleration:s/(2*(l-e.position)+n*r.VIEW_TICK_RATE),velocity:n,stopTarget:l,stopTargetSpeed:i,movementData:e,viewData:t}}),a=[],l=0;l<s.length;){u=s[l];++l,u.stopTarget<=u.movementData.stopTarget&&a.push(u)}il.each(a,function(e){var t,n=e.viewData,i=e.movementData,s=(i.stopTarget=e.stopTarget,n.startPosition);switch(r._spinDirection){case 1:t=0|-e.stopTarget;break;case 9:t=0|e.stopTarget;break;default:throw new tl((null==r._spinDirection?"null":Zx.VALUES[r._spinDirection])+" not supported in spin model")}n.stopPosition=s+t,n.reel.length!=n.reelIndexes.length&&r.replaceOverlappingSymbols(n,n.stopPosition),i.stopTargetSpeed=e.stopTargetSpeed,i.acceleration=e.acceleration,i.velocity=e.velocity,i.phase=Yd.STOPPING})}}},slowdown:function(e,n){var t,i=this,s=this._activeIndexes;null==s||0==s.length||(e=il.at(this._spinMovement,s=[e]),t=il.any(e,function(e){return e.phase!=Yd.SPIN||i._model.quickStop}),null==e)||0==e.length||t||il.each(qh.zipWith(e,s,function(s,e){i._gameChannel.publish(i._model.messagePrefix+"reelSlowed",{index:e,duration:n});var t=new Et(s.velocity,0,0,1);return Tt.tween(t,new nt(st.fromBacking(new it(i.config.attentionSpeed,null,null,null)),st.fromBacking(new it(s.velocity,null,null,null)),null,n,null,null,null,null,null,function(e,t,n,i){s.velocity=e},null)),{index:e,tween:t}}),function(e){Tt.cancel(i._tweens[e.index]),i._tweens[e.index]=e.tween})},refreshConfig:function(){var e,t,n,u=this,i=this._configProps;switch(i._hx_index){case 3:e=i.config;break;case 4:e=i.config.spinConfig;break;default:throw tl.thrown("Cannot get spin config since props is unexpected type")}a=null!=this.config&&(t=this.turboActive==this._actor.get_turbo(),n=this.superTurboActive==this._actor.get_superTurbo(),this.defaultsMerged)&&(this.ongoingBehavior||t&&n),this.config=a?this.config:this.getConfigValues(e);function s(e,t){switch(null==t&&(t=!0),(s=u._configProps)._hx_index){case 3:i=null;break;case 4:var n=s.config,i=t?u._casinoModel.currentTurboValue({turbo:n.turboStartDelay,superTurbo:n.superTurboStartDelay,normal:n.normalStartDelay}):u._casinoModel.currentTurboValue({turbo:n.turboStopDelay,superTurbo:n.superTurboStopDelay,normal:n.normalStopDelay});break;default:throw tl.thrown("Cannot get spin config since props is unexpected type")}if(null!=i)return i;for(var s=[],n=0,a=u._model.get_width();n<a;)s.push(n++*e);for(var l=u._model.get_width(),r=u._model.get_height(),n=[],a=0,o=u._model.get_height();a<o;)++a,n.push(s);return new Hl(l,r,Array.prototype.concat.apply([],n))}this._gridStartDelay=s(this.config.reelDelay);var a=this.config.reelStopDelay;switch(this._gridStopDelay=s(null!=a?a:this.config.reelDelay,!1),(i=this._configProps)._hx_index){case 3:a=!1;break;case 4:a=i.config.randomReelStartPosition;break;default:throw tl.thrown("Cannot get spin config since props is unexpected type")}return this._randomReelStartPostition=a,this.config},getViewIndex:function(e){e=this._viewToCellIndexes.h[e];return null!=e?e:-1},getConfigValues:function(e){var t,n=this,e=this.getValues({turbo:e.defaultValues.turbo,superTurbo:e.defaultValues.superTurbo,normal:e.defaultValues.normal},{turbo:e.turbo,superTurbo:e.superTurbo,normal:e.normal});return null!=e.node?(t=null==(t=il.find(e.node,function(e){return e.mode==n.mode}))?il.find(e.node,function(e){return"default"==e.mode}):t,this.mergeValues(e.defaultNodeValues,t.values)):e.defaultNodeValues},triggerSymbolPresentation:function(h,c){for(var _=this,e=h.targetSymbols,t=[],n=0,i=e.length;n<i;){var s=n++,a=new Bw,l=h.gridCell,l=(a.x=l.x,a.y=l.y,a);l.y+=s,t.push({cell:l,asset:e[s]})}il.each(t,function(e){var t=e.cell,n=$f.getId(e.asset),i=_._model.settledSymbols,i=(i.mData[t.y*i.mW+t.x]=e.asset,_._renderer.showPresentations({result:c,cell:t}),Jn.remove(_._landedIdsRemaining,n)&&_._gameChannel.publish(_._model.messagePrefix+"symbolLandedInitial",{id:n,turbo:null!=_._actor.get_turboMode()}),_._gameChannel),e=_._model.messagePrefix+"symbolLanded",s=t.x,a=t.y,l=c.mW+40,r=String.fromCodePoint(l),l=c.mH+40,o=r+String.fromCodePoint(l),u=c.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))});i.publish(e,{column:s,row:a,id:n,result:il.reduce(u,function(e,t){return e+=t},o)}),h.attention&&(i=_._gameChannel,e=_._model.messagePrefix+"symbolLandedAttention",s=t.x,a=t.y,l=c.mW+40,r=String.fromCodePoint(l),l=c.mH+40,o=r+String.fromCodePoint(l),u=c.mapCells(function(e,t){return String.fromCodePoint(40+(255&e))}),i.publish(e,{column:s,row:a,id:n,result:il.reduce(u,function(e,t){return e+=t},o)}))})},addReelStencil:function(e,t,n){t=new Zn(1,t,.001,!1),t.translate(e.x-.5*this._model.get_width(),.5*this._model.get_height()-e.y-1,0),t.addNormals(),e=new Co(t,null,this._renderer.object.getScene()),t=e.material.mshader.color__;t.x=0,t.y=0,t.z=0,t.w=0,e.material.set_blendMode(wr.None);(t=e.material).set_castShadows(!1),t.set_receiveShadows(!1),e.scaleX=this._model.get_symSize().x,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.scaleY=this._model.get_symSize().y,e.flags|=1,0!=(131072&e.flags)&&(e.flags|=262144),e.set_follow(this._renderer.object.object);var t=e.material.passes,i=(t.set_depthWrite(!1),t.set_enableLights(!1),t.set_depthTest(to.Always),new co),n=n?2:4;return i.setFunc(to.Always,n,n,n),i.setOp(no.Keep,no.Keep,no.Replace),t.stencil=i,e},setSymbolStencil:function(e,t){var n=$f.getSymbol(e);if(n.set_stenciled(!0),n.animator.stencilActiveAnimations(n.stenciled),this.reelCellSpin)for(var i=0,s=$f.getSymbol(e).object.getMaterials();i<s.length;){var a,l=s[i++].passes,r=t?2:4;null==l.stencil?((a=new co).setFunc(to.Equal,1|r,1|r,0),l.stencil=a):l.stencil.setFunc(to.Equal,r,r,0)}},replaceOverlappingSymbols:function(c,e){for(var _=this,t=c.reelIndexes.length,n=Ry.wrapCircular(-(0|e),t),i=[],s=0,a=c.reelView.length;s<a;)i.push(Ry.wrapCircular(n+s++,t));function l(t,e,n){for(var i=n.slice(0,e),n=n.slice(e),s=il.find(_._model.get_symbols(),function(e){return e.id==t}).originalId,a=_._model.get_symbols(),l=[],r=0;r<a.length;){var o=a[r];++r,o.originalId==s&&l.push(o)}for(var u=l,h=(u.sort(function(e,t){return Ry.compare(e.size.y,t.size.y)}),il.reduce(i,function(t,e){var n;return 0<t.repeatSymbolCount?(t.repeatSymbolCount--,(n=t.result).push({index:e,symbolId:null,symbolReelIndex:n[n.length-1].symbolReelIndex})):null!=(n=il.findLast(u,function(e){return e.size.y<=t.indexesLeft}))&&(t.result.push({index:e,symbolId:n.id,symbolReelIndex:c.reel.length+t.symbolsCreated}),t.symbolsCreated++,t.repeatSymbolCount=n.size.y-1,t.indexesLeft-=n.size.y),t},{indexesLeft:e,repeatSymbolCount:0,symbolsCreated:0,result:[]}).result),l=(il.each(h,function(e){c.reelIndexes[e.index]=e.symbolReelIndex}),[]),r=0;r<h.length;){o=h[r];++r,null!=o.symbolId&&l.push(o)}il.each(l,function(e){c.reel.push(e.symbolId)}),il.each(n,function(e){c.reelIndexes[e]=c.reel.push(s)-1})}var e=this._viewMarginSize,r=il.at(c.reelIndexes,i),o=r.slice(e,-e),u=r[e-1];if(-1!=o.indexOf(u)){for(var h=r.slice(0,e),s=[],a=0;a<h.length;){var d=h[a];++a,d==u&&s.push(d)}for(var p=s.length,s=[],a=0;a<i.length;){d=i[a];++a,c.reelIndexes[d]==u&&s.push(d)}l(c.reel[u],p,s)}var m=r[r.length-e];if(-1!=o.indexOf(m)){for(h=r.slice(r.length-e),s=[],a=0;a<h.length;){d=h[a];++a,d==m&&s.push(d)}for(p=s.length,s=[],a=0;a<i.length;){d=i[a];++a,c.reelIndexes[d]==m&&s.push(d)}s.reverse(),l(c.reel[m],p,s)}},__class__:Vd}),function(e,t,n,i,s,a,l,r,o){this.attention=null,this.phase=Yd.START,this.stopTargetSpeed=0,this.stopTarget=1/0,this.acceleration=0,this.lastVelocity=0,this.velocity=0,this.lastPosition=0,this.position=0,null!=e&&(this.position=e),null!=t&&(this.lastPosition=t),null!=n&&(this.velocity=n),null!=i&&(this.lastVelocity=i),null!=s&&(this.acceleration=s),null!=a&&(this.stopTarget=a),null!=l&&(this.stopTargetSpeed=l),null!=r&&(this.phase=r),null!=o&&(this.attention=o)}),Wd=((i["hacksaw.slotcommon.components.model._SpinModel.MotionData"]=Od).__name__="hacksaw.slotcommon.components.model._SpinModel.MotionData",Od.prototype={__class__:Od},function(e,t,n,i,s,a,l,r,o,u,h,c){this.attention=null,this.startSymbols=[],this.targetSymbols=[],this.stopPosition=2147483647,this.reel=e,this.reelIndexes=t,this.reelView=n,this.symbols=i,this.stencilMesh=s,this.gridCell=a,this.viewPosition=l,null!=r&&(this.stopPosition=r),null!=o&&(this.targetSymbols=o),null!=u&&(this.startSymbols=u),this.startPosition=h,null!=c&&(this.attention=c)}),Nd=((i["hacksaw.slotcommon.components.model._SpinModel.ViewRenderData"]=Wd).__name__="hacksaw.slotcommon.components.model._SpinModel.ViewRenderData",Wd.prototype={__class__:Wd},function(e){Jc.call(this,e)}),Gd=((i["hacksaw.slotcommon.components.model.TwistModel"]=Nd).__name__="hacksaw.slotcommon.components.model.TwistModel",Nd.__super__=Jc,Nd.prototype=e(Jc.prototype,{__class__:Nd}),function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y,b,v,C,S,k,M,I){this.createMotionBlurShader=null,this.blurLevels=null,this.maxBlurSpeed=null,this.resolveAttentionsBeforeEnd=!1,this.hideStickyPosDuringReveal=!0,this.hideSymbolsUnderSticky=!0,this.useStencil=!0,this.winPresentFadeOutAlpha=null,this.lockPresentations=[],this.stickyRemovePresentations=[],this.stickyPresentations=[],this.attentions=[],this.drops=[],this.removes=[],this.idleLoopInterval=1,this.idleLoop=!0,this.specialLines=null,this.idleGridExitLines=null,this.idleWinExitLines=null,this.idleLines=[],this.idleWinInitLines=null,this.idleGridInitLines=null,this.gridExitLines=[],this.winExitLines=[],this.winInitLines=[],this.gridInitLines=[],this.reveal=e,this.react=t,null!=n&&(this.gridInitLines=n),null!=i&&(this.winInitLines=i),this.winLines=s,null!=a&&(this.winExitLines=a),null!=l&&(this.gridExitLines=l),null!=r&&(this.idleGridInitLines=r),null!=o&&(this.idleWinInitLines=o),null!=u&&(this.idleLines=u),null!=h&&(this.idleWinExitLines=h),null!=c&&(this.idleGridExitLines=c),null!=_&&(this.specialLines=_),null!=d&&(this.idleLoop=d),null!=p&&(this.idleLoopInterval=p),null!=m&&(this.removes=m),null!=g&&(this.drops=g),null!=f&&(this.attentions=f),null!=A&&(this.stickyPresentations=A),null!=x&&(this.stickyRemovePresentations=x),null!=w&&(this.lockPresentations=w),null!=y&&(this.winPresentFadeOutAlpha=y),null!=b&&(this.useStencil=b),null!=v&&(this.hideSymbolsUnderSticky=v),null!=C&&(this.hideStickyPosDuringReveal=C),null!=S&&(this.resolveAttentionsBeforeEnd=S),null!=k&&(this.maxBlurSpeed=k),null!=M&&(this.blurLevels=M),null!=I&&(this.createMotionBlurShader=I)}),Ud=((i["hacksaw.slotcommon.components.view.ReelRendererConfig"]=Gd).__name__="hacksaw.slotcommon.components.view.ReelRendererConfig",Gd.prototype={__class__:Gd},fe["hacksaw.slotcommon.components.view.PresentationType"]={__ename__:!0,__constructs__:null,Attention:((R=function(e){return{_hx_index:0,type:e,__enum__:"hacksaw.slotcommon.components.view.PresentationType",toString:o}})._hx_name="Attention",R.__params__=["type"],R),Symbol:((R=function(e){return{_hx_index:1,type:e,__enum__:"hacksaw.slotcommon.components.view.PresentationType",toString:o}})._hx_name="Symbol",R.__params__=["type"],R)}),Ld=(Ud.__constructs__=[Ud.Attention,Ud.Symbol],Ud.__empty_constructs__=[],(i["hacksaw.slotcommon.components.view.ReactResizeConfig"]=n_).__name__="hacksaw.slotcommon.components.view.ReactResizeConfig",fe["hacksaw.slotcommon.components.view.Reveal"]={__ename__:!0,__constructs__:null,Drop:((R=function(e){return{_hx_index:0,handler:e,__enum__:"hacksaw.slotcommon.components.view.Reveal",toString:o}})._hx_name="Drop",R.__params__=["handler"],R),Spin:((R=function(e){return{_hx_index:1,handler:e,__enum__:"hacksaw.slotcommon.components.view.Reveal",toString:o}})._hx_name="Spin",R.__params__=["handler"],R),Rotate:((R=function(e){return{_hx_index:2,handler:e,__enum__:"hacksaw.slotcommon.components.view.Reveal",toString:o}})._hx_name="Rotate",R.__params__=["handler"],R),Twist:((R=function(e){return{_hx_index:3,handler:e,__enum__:"hacksaw.slotcommon.components.view.Reveal",toString:o}})._hx_name="Twist",R.__params__=["handler"],R)}),jd=(Ld.__constructs__=[Ld.Drop,Ld.Spin,Ld.Rotate,Ld.Twist],Ld.__empty_constructs__=[],fe["hacksaw.slotcommon.components.view.React"]={__ename__:!0,__constructs__:null,Collapse:((R=function(e){return{_hx_index:0,handler:e,__enum__:"hacksaw.slotcommon.components.view.React",toString:o}})._hx_name="Collapse",R.__params__=["handler"],R),Resize:((R=function(e,t){return{_hx_index:1,handler:e,config:t,__enum__:"hacksaw.slotcommon.components.view.React",toString:o}})._hx_name="Resize",R.__params__=["handler","config"],R),Respin:((R=function(e){return{_hx_index:2,handler:e,__enum__:"hacksaw.slotcommon.components.view.React",toString:o}})._hx_name="Respin",R.__params__=["handler"],R),Retwist:((R=function(e){return{_hx_index:3,handler:e,__enum__:"hacksaw.slotcommon.components.view.React",toString:o}})._hx_name="Retwist",R.__params__=["handler"],R)}),Hd=(jd.__constructs__=[jd.Collapse,jd.Resize,jd.Respin,jd.Retwist],jd.__empty_constructs__=[],fe["hacksaw.slotcommon.components.view.WinPresentPhase"]={__ename__:!0,__constructs__:null,Attention:{_hx_name:"Attention",_hx_index:0,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},Drop:{_hx_name:"Drop",_hx_index:1,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},GridInit:{_hx_name:"GridInit",_hx_index:2,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},Init:{_hx_name:"Init",_hx_index:3,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},Wins:((R=function(e){return{_hx_index:4,execution:e,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o}})._hx_name="Wins",R.__params__=["execution"],R),Exit:{_hx_name:"Exit",_hx_index:5,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},GridExit:{_hx_name:"GridExit",_hx_index:6,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},IdleGridInit:{_hx_name:"IdleGridInit",_hx_index:7,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},IdleInit:{_hx_name:"IdleInit",_hx_index:8,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},Idle:{_hx_name:"Idle",_hx_index:9,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},IdleExit:{_hx_name:"IdleExit",_hx_index:10,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},IdleGridExit:{_hx_name:"IdleGridExit",_hx_index:11,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o},Special:((R=function(e){return{_hx_index:12,id:e,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o}})._hx_name="Special",R.__params__=["id"],R),Lock:{_hx_name:"Lock",_hx_index:13,__enum__:"hacksaw.slotcommon.components.view.WinPresentPhase",toString:o}}),Yd=(Hd.__constructs__=[Hd.Attention,Hd.Drop,Hd.GridInit,Hd.Init,Hd.Wins,Hd.Exit,Hd.GridExit,Hd.IdleGridInit,Hd.IdleInit,Hd.Idle,Hd.IdleExit,Hd.IdleGridExit,Hd.Special,Hd.Lock],Hd.__empty_constructs__=[Hd.Attention,Hd.Drop,Hd.GridInit,Hd.Init,Hd.Exit,Hd.GridExit,Hd.IdleGridInit,Hd.IdleInit,Hd.Idle,Hd.IdleExit,Hd.IdleGridExit,Hd.Lock],fe["hacksaw.slotcommon.components.view.enums.ReelPhase"]={__ename__:!0,__constructs__:null,START:{_hx_name:"START",_hx_index:0,__enum__:"hacksaw.slotcommon.components.view.enums.ReelPhase",toString:o},SPIN:{_hx_name:"SPIN",_hx_index:1,__enum__:"hacksaw.slotcommon.components.view.enums.ReelPhase",toString:o},STOPPING:{_hx_name:"STOPPING",_hx_index:2,__enum__:"hacksaw.slotcommon.components.view.enums.ReelPhase",toString:o},BOUNCE:{_hx_name:"BOUNCE",_hx_index:3,__enum__:"hacksaw.slotcommon.components.view.enums.ReelPhase",toString:o},PRESENT:{_hx_name:"PRESENT",_hx_index:4,__enum__:"hacksaw.slotcommon.components.view.enums.ReelPhase",toString:o},IDLE:{_hx_name:"IDLE",_hx_index:5,__enum__:"hacksaw.slotcommon.components.view.enums.ReelPhase",toString:o}}),Zd=(Yd.__constructs__=[Yd.START,Yd.SPIN,Yd.STOPPING,Yd.BOUNCE,Yd.PRESENT,Yd.IDLE],Yd.__empty_constructs__=[Yd.START,Yd.SPIN,Yd.STOPPING,Yd.BOUNCE,Yd.PRESENT,Yd.IDLE],function(){this.fitReelMargins={mobile:{landscape:{top:.05,bottom:.05,left:.05,right:.05},portrait:{top:.05,bottom:.05,left:.05,right:.05}},desktop:{landscape:{top:.05,bottom:.05,left:.05,right:.05},portrait:{top:.05,bottom:.05,left:.05,right:.05}}},this.collapseReactProps={normal:[{mode:"default",values:{reelDelay:.02,symbolDelay:.025,stopDuration:.5,addCurve:"Easing.cubicIn(rate)",dropStart:0,collapseTimeRandom:.001}}],superTurbo:[{mode:"default",values:{reelDelay:0,symbolDelay:0,stopDuration:.125,addCurve:"Easing.quadIn(rate)",dropStart:0,collapseTimeRandom:.001}}],turbo:[{mode:"default",values:{reelDelay:.01,symbolDelay:.025,stopDuration:.2,addCurve:"Easing.cubicIn(rate)",dropStart:0,collapseTimeRandom:.001}}]},this.spinRevealProps={normal:[{mode:"default",values:{reelDelay:.025,stopType:{halflife:.025,type:"elastic",dampingRatio:.98},attentionStopDuration:1,presentAfterSettle:!1,attentionSpeed:24,startDuration:.4,reelStopDelay:.25,startCurve:"Easing.quadOut(rate)",stopDuration:.1,attentionStopSpeed:4,attentionStopType:{halflife:.15,type:"elastic",dampingRatio:.94},stopSpeed:15,speed:22}}],superTurbo:[{mode:"default",values:{reelDelay:0,startDuration:.075,startCurve:"Easing.quadIn(rate)",stopDuration:.075,stopSpeed:20,speed:75}}],turbo:[{mode:"default",values:{reelDelay:.05,stopType:{halflife:.025,type:"elastic",dampingRatio:.98},attentionStopDuration:.5,presentAfterSettle:!1,attentionSpeed:33,startDuration:.1,startCurve:"Easing.quadIn(rate)",stopDuration:.025,attentionStopSpeed:6,stopSpeed:15,speed:30}}]},this.dropRevealProps={normal:[{mode:"default",values:{reelDelay:0,dropTimeRandom:.001,attentionDuration:.2,attentionSpeed:.2,startDuration:.4,removeReelDelay:.1,presentDelay:.5,removeCurve:"Easing.cubicIn(rate)",symbolDelay:.025,stopDuration:.5,addCurve:"Easing.cubicIn(rate)",dropStart:0,dropEnd:0}}],superTurbo:[{mode:"default",values:{reelDelay:0,dropTimeRandom:0,startDuration:.13,removeReelDelay:0,presentDelay:.5,removeCurve:"Easing.cubicIn(rate)",symbolDelay:0,stopDuration:.2,addCurve:"FloatTools.oneTwoEasing(rate, Easing.cubicIn, rate1 -> FloatTools.oneTwoEasing(rate1, rate2 -> FloatTools.bezier(rate2, [1, 0.95, 0.95, 1]), rate3 -> FloatTools.bezier(rate3, [1, 0.99, 0.99, 1]), 0.7), 0.5)",dropStart:0,dropEnd:0}}],turbo:[{mode:"default",values:{reelDelay:0,dropTimeRandom:.001,attentionDuration:.2,attentionSpeed:.1,startDuration:.3,removeReelDelay:.02,presentDelay:.5,removeCurve:"Easing.cubicIn(rate)",symbolDelay:.025,stopDuration:.3,addCurve:"Easing.cubicIn(rate)",dropStart:0,dropEnd:0}}]}});function Xd(e,t,n){return Kf.Tween(fd,e,t,id.SymbolWin,n)}function qd(e,t,n){return Kf.Animation(_d,e,t,id.SymbolWin,n)}function Kd(e,t,n){return Kf.Action(J_,e,t,id.SymbolWinAction,n)}function Jd(e,t,n){return Kf.Element(sd,e,t,id.SymbolWin,n)}function $d(e,t,n,i){return If.Animation(_d,e,t,(i=null==i?!0:i)?id.ScatterLanded:id.SymbolLanded,n)}function ep(e,t,n){return If.Action(J_,e,t,id.ScatterTriggered,n)}function tp(e,t,n){return Nf.Tween(fd,e,t,id.SymbolRemove,n)}function np(e,t,n){return Nf.Animation(_d,e,t,id.SymbolRemove,n)}function ip(){}function sp(e,t){if(0==(-2147483648&e))throw tl.thrown("Trying to create ColossalSymbol with none-encoded ID");this.id=e,this.asset=t}function ap(){}function lp(e,t,n,i){null==i&&(i=!0),this._sequencePlayCancel=new at,this._sequenceState=new at,this._scheduled=[],this._scheduledEvents=new at,this._triggers=new at,this._sequences=new at,this._pools=new at;var s=this;this._poolConfigs=null!=t?t:[],this._renderer=e,this._eventHandler=null!=n?n:function(e){},this._renderer.update.listen(function(e){s._eventHandler(gA.FrameUpdate(e.group,e.levels))}),this._autoUpdate=i,this.triggerInterval()}function rp(e,t,n,i,s,a,l,r,o){this.start=null,this.signature="4/4",this.bpm=null,this.maxrate=0,this.loop=!1,this.returnQuantize=null,this.quantize=1,this.id=e,this.patterns=t,null!=n&&(this.quantize=n),null!=i&&(this.returnQuantize=i),null!=s&&(this.loop=s),null!=a&&(this.maxrate=a),null!=l&&(this.bpm=l),null!=r&&(this.signature=r),null!=o&&(this.start=o)}function op(e,t,n,i,s,a){this.start=null,this.duration=null,this.bpm=null,this.id=e,this.actions=t,this.progress=n,null!=i&&(this.bpm=i),null!=s&&(this.duration=s),null!=a&&(this.start=a)}function up(e,t,n,i,s,a){this.knee=40,this.threshold=-50,this.ratio=7,this.release=.25,this.attack=.003,this.target=e,null!=t&&(this.attack=t),null!=n&&(this.release=n),null!=i&&(this.ratio=i),null!=s&&(this.threshold=s),null!=a&&(this.knee=a)}function hp(){}function cp(){}function _p(){}function dp(e,t){this.isBlocking=!0,this.f=e,this.priority=t,this.nextRun=-1/0}function pp(){}function mp(){}function gp(){this.a1=1,this.a2=0}function fp(){}function Ap(){}function xp(e,t){this.elt=e,this.next=t}function wp(){}function yp(e,t,n){tl.call(this,e,t),this.posInfos=null==n?{fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}:n,this.__skipStack++}function bp(e){this.url=e,this.headers=[],this.params=[],this.emptyOnData=Cn(this,this.onData)}function vp(){}function Cp(){}function Sp(){}function kp(e,t,n){tl.call(this,e,n),this.pos=t,this.__skipStack++}function Mp(e,t,n){this.xml=t,this.message=e,this.position=n,this.lineNumber=1;for(var i=this.positionAtLine=0;i<n;){var s=t.charCodeAt(i++);10==s?(this.lineNumber++,this.positionAtLine=0):13!=s&&this.positionAtLine++}}function Ip(){}function Bp(e){this.buffer=new IA(new ArrayBuffer(65536)),this.pos=0,e&&(this.crc=new gp)}function Tp(e,t,n){null==n&&(n=!0),null==t&&(t=!0),this.isFinal=!1,this.htools=new Ip,this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.len=0,this.dist=0,this.state=t?fx.Head:fx.Block,this.input=e,this.bits=0,this.nbits=0,this.needed=0,this.output=null,this.outpos=0,this.lengths=[],this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.lengths.push(-1),this.window=new Bp(n)}function Ep(){}function Fp(){this._k=[],this._v=[]}function Dp(){}function Rp(){}function Pp(){}function zp(){}function Qp(e,t,n){this.code=e=null==e?500:e,this.message=t,this.pos=n,this.exceptionStack=[],this.callStack=[]}function Vp(){}function Op(e){this.p=e,this.binops=new at,this.unops=new at;for(var t=0,n=tx.__constructs__,i=new Array(n.length),s=0,a=n.length;s<a;)i[o=s++]=n[o]._hx_name;for(;t<i.length;){var l=i[t];if(++t,"OpAssignOp"!=l){var r=!1;switch((u=U.createEnum(tx,l))._hx_index){case 0:r=!0,h="+";break;case 1:r=!0,h="*";break;case 2:r=!0,h="/";break;case 3:r=!0,h="-";break;case 4:h="=";break;case 5:h="==";break;case 6:h="!=";break;case 7:h=">";break;case 8:h=">=";break;case 9:h="<";break;case 10:h="<=";break;case 11:r=!0,h="&";break;case 12:r=!0,h="|";break;case 13:r=!0,h="^";break;case 14:h="&&";break;case 15:h="||";break;case 16:r=!0,h="<<";break;case 17:r=!0,h=">>";break;case 18:r=!0,h=">>>";break;case 19:r=!0,h="%";break;case 20:h="";break;case 21:h="...";break;case 22:h="=>";break;case 23:h="in";break;default:continue}this.binops.h[h]=u,r&&(this.binops.h[h+"="]=tx.OpAssignOp(u))}}for(var o,u,h,t=0,n=nx.__constructs__,i=new Array(n.length),s=0,a=n.length;s<a;)i[o=s++]=n[o]._hx_name;for(;t<i.length;){switch((u=U.createEnum(nx,i[t++]))._hx_index){case 0:h="++";break;case 1:h="--";break;case 2:h="!";break;case 3:h="-";break;case 4:h="~";break;case 5:continue}this.unops.h[h]=u}}function Wp(e,t,n,i){this.frames=e,this.speed=t,this.offsetX=n,this.offsetY=i,this.frameDelay=1/t,this.frameTime=0,this.frameIndex=0}function Np(){}function Gp(e,t,n){null==n&&(n=0),null==t&&(t=0),this.button=0,this.kind=e,this.relX=t,this.relY=n}function Up(){}function Lp(){}function jp(){this.colorStops=[],this.transparencyStops=[],this.gradientStops=[]}function Hp(){}function Yp(){}function Zp(){}function Xp(){at.call(this)}function qp(e){(this.i=e).set_bigEndian(!0)}function Kp(){}function Jp(){}function $p(){}function em(){}function tm(){}function nm(){}function im(){}function sm(){}function am(){}function lm(){}function rm(){}function om(){}function um(){}function hm(){}function cm(e,t,n,i){this.size=e,this.offset=t,this.precision=i,this.def=n}function _m(e,t){this.resource=e,this.header=t,this.cachedPrimitives=[],this.cachedAnimations=new at,this.cachedSkin=new at}function dm(e){this.i=e}function pm(){}function mm(){}function gm(e,t,n,i){this.fs=e,this.name=t,this.relPath=n,this.data=i}function fm(){}function Am(){}function xm(e){this.url=e}function wm(e,t){mm.call(this),this.path=e,this.bytes=t}function ym(e){this.entry=e}function bm(){this.layerCount=1,this.mipOffset=0,this.mipLevels=1,this.height=0,this.width=0,this.flags=0}function vm(e,t,n,i){this.error=null,this.type="transcode",this.id=e,null!=t&&(this.type=t),this.data=n,null!=i&&(this.error=i)}function Cm(){}function Sm(){}function km(e,t){this.msg=e,this.pos=t}function Ue(){}function Mm(){}function Im(){this.Batch_Count__=0,O.call(this)}function Bm(){this.minId=0,this.nexts=[]}function Tm(){this.globals=Tm.initGlobals()}function Em(){this.varMap=new Je}function Fm(e){this.fields=0,this.v=e}function Dm(e){this.used=0,this.keep=0,this.v=e,this.deps=new Je,this.adeps=[]}function Rm(){this.vars=[],this.bits=[]}function Pm(){}function zm(){this.mapped=[],this.varMap=new VA,this.funMap=new VA,this.constants=new Je}function Qm(e,t,n,i){this.g=e,this.t=t,this.pos=n,this.size=i}function Vm(){}function Om(e,t){this.name=e,this.uid=Om.UID++,this.vertex=t,this.processed=new Je,this.usedFunctions=[],this.readMap=new Je,this.readVars=[],this.writeMap=new Je,this.writeVars=[]}function Wm(){}function Nm(){}function Gm(e){this.id=++Gm.UID,this.shader=e,this.params=new Je}function Um(e,t){this.v=e,this.globalId=t}function Lm(e,t,n){this.v=e,this.pos=t,this.bits=n}function jm(e){this.v=e,this.read=0,this.write=0}function Hm(){}function Ym(){}function Zm(e,t,n){if(this.duration=0,this.hashCode=99999999*Math.random()|0,null==e)throw tl.thrown(new Dw("name cannot be null."));this.name=e,this.duration=n,this.timelineIds=[],this.setTimelines(t)}function Xm(e,t){if(null==t)throw tl.thrown(new Dw("propertyIds cannot be null."));this._propertyIds=t;var n=0|(t=null==(t=e*this.getFrameEntries())?0:t),i=[];if(0<t){var s=i.length;if(n<s)i.splice(n,n-s);else if(s<n)for(;s<n;)i.push(0),++s}this.frames=i}function qm(){}function Km(){}function Jm(e,t,n){Xm.call(this,e,n);var i=0|(n=null==(n=e+18*t)?0:n),s=[];if(0<n){var a=s.length;if(i<a)s.splice(i,i-a);else if(a<i)for(;a<i;)s.push(0),++a}this.curves=s,this.curves[e-1]=1}function $m(e,t,n){Jm.call(this,e,t,[n])}function eg(e,t,n,i){Jm.call(this,e,t,[n,i])}function tg(e,t,n){this.boneIndex=0,$m.call(this,e,t,"0|"+n),this.boneIndex=n}function ng(e,t,n){this.boneIndex=0,eg.call(this,e,t,"1|"+n,"2|"+n),this.boneIndex=n}function ig(e,t,n){this.boneIndex=0,$m.call(this,e,t,"1|"+n),this.boneIndex=n}function sg(e,t,n){this.boneIndex=0,$m.call(this,e,t,"2|"+n),this.boneIndex=n}function ag(e,t,n){this.boneIndex=0,eg.call(this,e,t,"3|"+n,"4|"+n),this.boneIndex=n}function lg(e,t,n){this.boneIndex=0,$m.call(this,e,t,"3|"+n),this.boneIndex=n}function rg(e,t,n){this.boneIndex=0,$m.call(this,e,t,"4|"+n),this.boneIndex=n}function og(e,t,n){this.boneIndex=0,eg.call(this,e,t,"5|"+n,"6|"+n),this.boneIndex=n}function ug(e,t,n){this.boneIndex=0,$m.call(this,e,t,"5|"+n),this.boneIndex=n}function hg(e,t,n){this.boneIndex=0,$m.call(this,e,t,"6|"+n),this.boneIndex=n}function cg(e,t,n){this.slotIndex=0,Jm.call(this,e,t,["7|"+n,"8|"+n]),this.slotIndex=n}function _g(e,t,n){this.slotIndex=0,Jm.call(this,e,t,["7|"+n]),this.slotIndex=n}function dg(e,t,n){this.slotIndex=0,$m.call(this,e,t,"8|"+n),this.slotIndex=n}function pg(e,t,n){this.slotIndex=0,Jm.call(this,e,t,["7|"+n,"8|"+n,"9|"+n]),this.slotIndex=n}function mg(e,t,n){this.slotIndex=0,Jm.call(this,e,t,["7|"+n,"9|"+n]),this.slotIndex=n}function gg(e,t){this.slotIndex=0,Xm.call(this,e,["10|"+t]),this.slotIndex=t;var t=e,e=0|(t=null==e?0:e),n=[];0!=t&&(e<(t=n.length)?n.splice(e,e-t):t<e&&(n[e-1]=null)),this.attachmentNames=n}function fg(e,t,n,i){this.slotIndex=0,Jm.call(this,e,t,["11|"+n+"|"+i.id]),this.slotIndex=n,this.attachment=i,n=0|(t=null==(t=e)?0:e),i=[],0<t&&(n<(e=i.length)?i.splice(n,n-e):e<n&&(i[n-1]=null)),this.vertices=i}function Ag(e){Xm.call(this,e,Ag.propertyIds);var t=e,e=0|(t=null==e?0:e),n=[];0!=t&&(e<(t=n.length)?n.splice(e,e-t):t<e&&(n[e-1]=null)),this.events=n}function xg(e){Xm.call(this,e,xg.propertyIds);var t=e,e=0|(t=null==e?0:e),n=[];0<t&&(e<(t=n.length)?n.splice(e,e-t):t<e&&(n[e-1]=null)),this.drawOrders=n}function wg(e,t,n){this.ikConstraintIndex=0,Jm.call(this,e,t,["14|"+n]),this.ikConstraintIndex=n}function yg(e,t,n){this.transformConstraintIndex=0,Jm.call(this,e,t,["15|"+n]),this.transformConstraintIndex=n}function bg(e,t,n){this.pathConstraintIndex=0,$m.call(this,e,t,"16|"+n),this.pathConstraintIndex=n}function vg(e,t,n){this.pathConstraintIndex=0,$m.call(this,e,t,"17|"+n),this.pathConstraintIndex=n}function Cg(e,t,n){this.pathConstraintIndex=0,Jm.call(this,e,t,["18|"+n]),this.pathConstraintIndex=n}function Sg(e,t){null==t&&(t=0),this.message=e=null==e?"":e,this.errorID=t,this.name="Error"}function kg(){}function Mg(){this.timelinesRotation=[],this.timelineHoldMix=[],this.timelineMode=[],this.mixBlend=2,this.totalAlpha=0,this.interruptAlpha=0,this.mixDuration=0,this.mixTime=0,this.alpha=0,this.timeScale=0,this.trackEnd=0,this.nextTrackLast=0,this.trackLast=0,this.trackTime=0,this.delay=0,this.nextAnimationLast=0,this.animationLast=0,this.animationEnd=0,this.animationStart=0,this.drawOrderThreshold=0,this.attachmentThreshold=0,this.eventThreshold=0,this.reverse=!1,this.holdPrevious=!1,this.loop=!1,this.trackIndex=0,this.mixingTo=null,this.mixingFrom=null,this.next=null}function Ig(e,t){null==t&&(t=999999999),null==e&&(e=64),this.peak=0,this.max=0,this.freeObjects=[],this.max=t}function Bg(){}function Tg(e,t,n){if(this.active=!1,this.sorted=!1,this.worldY=0,this.d=0,this.c=0,this.worldX=0,this.b=0,this.a=0,this.ashearY=0,this.ashearX=0,this.ascaleY=0,this.ascaleX=0,this.arotation=0,this.ay=0,this.ax=0,this.shearY=0,this.shearX=0,this.scaleY=0,this.scaleX=0,this.rotation=0,this.y=0,this.x=0,this.children=[],null==e)throw tl.thrown(new Dw("data cannot be null."));if(null==t)throw tl.thrown(new Dw("skeleton cannot be null."));this.data=e,this.skeleton=t,this.parent=n,e=this.data,this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY}function Eg(e,t,n){if(this.color=new sy(.61,.61,.61,1),this.skinRequired=!1,this.transformMode=0,this.shearY=0,this.shearX=0,this.scaleY=1,this.scaleX=1,this.rotation=0,this.y=0,this.x=0,this.length=0,e<(this.index=0))throw tl.thrown(new Dw("index must be >= 0."));if(null==t)throw tl.thrown(new Dw("name cannot be null."));this.index=e,this.name=t,this.parent=n}function Fg(e){if(this.skinRequired=!1,this.order=0,null==e)throw tl.thrown(new Dw("name cannot be null."));this.name=e}function Dg(e,t){if(this.time=0,this.balance=0,this.volume=0,this.floatValue=0,this.intValue=0,null==t)throw tl.thrown(new Dw("data cannot be null."));this.time=e,this.data=t}function Rg(e){if(this.balance=0,this.volume=0,this.audioPath=null,this.floatValue=0,this.intValue=0,null==e)throw tl.thrown(new Dw("name cannot be null."));this.name=e}function Pg(e,t){if(this.active=!1,this.softness=0,this.mix=1,this.stretch=!1,this.compress=!1,this.bendDirection=0,null==e)throw tl.thrown(new Dw("data cannot be null."));if(null==t)throw tl.thrown(new Dw("skeleton cannot be null."));this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=[];for(var n=0,i=e.bones;n<i.length;)this.bones.push(t.findBone(i[n++].name));this.target=t.findBone(e.target.name)}function zg(e){this.softness=0,this.mix=1,this.uniform=!1,this.stretch=!1,this.compress=!1,this.bendDirection=1,this.bones=[],Fg.call(this,e)}function Qg(e,t){var n=[],i=n.length;if(10<i)n.splice(10,10-i);else if(i<10)for(;i<10;)n.push(0),++i;if(this.segments=n,this.lengths=[],this.curves=[],this.world=[],this.positions=[],this.spaces=[],this.active=!1,this.mixY=0,this.mixX=0,this.mixRotate=0,this.spacing=0,this.position=0,null==e)throw tl.thrown(new Dw("data cannot be null."));if(null==t)throw tl.thrown(new Dw("skeleton cannot be null."));this.data=e,this.bones=[];for(var s=0,a=e.bones;s<a.length;)this.bones.push(t.findBone(a[s++].name));this.target=t.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}function Vg(e){this.mixY=0,this.mixX=0,this.mixRotate=0,this.spacing=0,this.position=0,this.offsetRotation=0,this.bones=[],Fg.call(this,e)}function Og(){this.audioPath=null,this.fps=30,this.hash=null,this.height=0,this.width=0,this.y=0,this.x=0,this.pathConstraints=[],this.transformConstraints=[],this.ikConstraints=[],this.animations=[],this.events=[],this.skins=[],this.slots=[],this.bones=[]}function Wg(e){if(this.linkedMeshes=[],this.scale=1,null==e)throw tl.thrown(new Dw("attachmentLoader cannot be null."));this.attachmentLoader=e}function Ng(){}function Gg(e){if(null==e)throw tl.thrown(new Dw("name cannot be null."));this.name=e}function Ug(){this.v2=0,this.u2=0,this.v=0,this.u=0}function Lg(e,t){this.key=e,this.value=t}function jg(){}function Hg(){}function Yg(){}function Zg(){}function Xg(e){this.sign=e<0,this.value=e,this.isSmall=!0}function qg(){}function Kg(){}function Jg(e,t){this.dissolved=!1,this.a=e,this.b=t}function $g(e,t){if(null==e)throw tl.thrown("callback expected but null received");this.cb=e,this.list=t}function ef(){}function tf(){}function nf(e){this.disposeHandlers=[],this.f=e}function sf(e){null==e&&(e=!1),this.onfill=function(){},this.ondrain=function(){},this.busy=!1,this.queue=[],this.used=0;var t=this;nf.call(this,function(){t.busy||t.destroy()}),this.destructive=e,this.cells=[]}function af(){}function lf(){}function rf(){}function of(){}function uf(){}function hf(e,t){this.command=e,this.definedPosInfos=t}function cf(){}function _f(){}function df(){}function pf(){}function mf(){}function gf(e,t,n){this.r=e,this.g=t,this.b=n}function ff(){}function Af(e,t,n,i){this.a=e,gf.call(this,t,n,i)}function xf(){}function wf(e,t,n){this.h=e,this.s=t,this.v=n}function yf(e,t,n,i){this.a=e,wf.call(this,t,n,i)}function bf(){}function vf(){}function Cf(){}function Sf(e,t,n){this.value=e,this.scale=t,this.ease=null==n?o1.warpOut:n}function kf(){}function Mf(e,t,n,i){this.data=e,this.index=t,this.rangeLeft=n,this.rangeRight=i}(i["hacksaw.slotcommon.config.ReelData"]=Zd).__name__="hacksaw.slotcommon.config.ReelData",Zd.prototype={parseCurves:function(e){for(var t=X.copy(e),n=0,i=X.fields(e);n<i.length;){var s=i[n];++n,-1!=s.toLowerCase().indexOf("curve")&&(t[s]=(i=>function(e){var t=(new Vx).parseString(i[0]),n=new Qx;return n.variables.h.Math=Math,n.variables.h.rate=e,n.variables.h.Easing=o1,n.variables.h.FloatTools=m1,n.execute(t)})([X.field(e,s)]))}return t},parseSpinStopType:function(a){for(var l=X.copy(a),e=[],t=0,n=["stopType","attentionStopType"];t<n.length;){var i=n[t];++t,Object.prototype.hasOwnProperty.call(a,i)&&e.push(i)}return il.each(e,function(e){var t,n,i=X.field(a,e),s=X.field(i,"type");"elastic"==s?(n=Object.prototype.hasOwnProperty.call(i,"halflife"),t=X.field(i,"dampingRatio"),l[e]=V_.Elastic(t,n?X.field(i,"halflife"):.5*(1-t)+.05*t)):"bounce"==s?(n=Object.prototype.hasOwnProperty.call(i,"restitution"),l[e]=V_.Bounce(X.field(i,"deceleration"),n?X.field(i,"restitution"):.5)):l[e]=V_.None}),l},__class__:Zd},(i["hacksaw.slotcommon.config.ChannelMargin"]=i_).__name__="hacksaw.slotcommon.config.ChannelMargin";var If=fe["hacksaw.slotcommon.types.AttentionPresentation"]={__ename__:!0,__constructs__:null,Reel:((R=function(e,t,n,i,s){return{_hx_index:0,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.AttentionPresentation",toString:o}})._hx_name="Reel",R.__params__=["handler","config","filters","type","duration"],R),Animation:((R=function(e,t,n,i,s){return{_hx_index:1,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.AttentionPresentation",toString:o}})._hx_name="Animation",R.__params__=["handler","config","filters","type","duration"],R),Shader:((R=function(e,t,n,i,s){return{_hx_index:2,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.AttentionPresentation",toString:o}})._hx_name="Shader",R.__params__=["handler","config","filters","type","duration"],R),Tween:((R=function(e,t,n,i,s){return{_hx_index:3,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.AttentionPresentation",toString:o}})._hx_name="Tween",R.__params__=["handler","config","filters","type","duration"],R),Action:((R=function(e,t,n,i,s){return{_hx_index:4,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.AttentionPresentation",toString:o}})._hx_name="Action",R.__params__=["handler","config","filters","type","duration"],R),Element:((R=function(e,t,n,i,s){return{_hx_index:5,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.AttentionPresentation",toString:o}})._hx_name="Element",R.__params__=["handler","config","filters","type","duration"],R)},Bf=(If.__constructs__=[If.Reel,If.Animation,If.Shader,If.Tween,If.Action,If.Element],If.__empty_constructs__=[],fe["hacksaw.slotcommon.types.AttentionFilter"]={__ename__:!0,__constructs__:null,AttentionOccuranceFilter:((R=function(e,t,n,i,s,a){return{_hx_index:0,symbols:e,ocurrances:t,include:n,threshold:i,reels:s,onlyNew:a,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionOccuranceFilter",R.__params__=["symbols","ocurrances","include","threshold","reels","onlyNew"],R),AttentionLastOccurrence:((R=function(e,t,n){return{_hx_index:1,symbol:e,threshold:t,invert:n,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionLastOccurrence",R.__params__=["symbol","threshold","invert"],R),AttentionNeighborFilter:((R=function(e,t,n){return{_hx_index:2,symbols:e,next:t,reels:n,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionNeighborFilter",R.__params__=["symbols","next","reels"],R),AttentionRemainingFilter:((R=function(e,t,n,i,s){return{_hx_index:3,symbols:e,threshold:t,remaining:n,over:i,reels:s,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionRemainingFilter",R.__params__=["symbols","threshold","remaining","over","reels"],R),AttentionSymbolFilter:((R=function(e,t){return{_hx_index:4,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionSymbolFilter",R.__params__=["include","exclude"],R),AttentionSequenceFilter:((R=function(e,t,n,i,s,a){return{_hx_index:5,include:e,threshold:t,rowSequence:n,columnSequence:i,reelRange:s,strictRowMatch:a,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionSequenceFilter",R.__params__=["include","threshold","rowSequence","columnSequence","reelRange","strictRowMatch"],R),AttentionStickyFilter:((R=function(e){return{_hx_index:6,include:e,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionStickyFilter",R.__params__=["include"],R),AttentionStateFilter:((R=function(e,t){return{_hx_index:7,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionStateFilter",R.__params__=["include","exclude"],R),AttentionEventFilter:((R=function(e,t,n){return{_hx_index:8,include:e,exclude:t,reels:n,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionEventFilter",R.__params__=["include","exclude","reels"],R),AttentionSettingsFilter:((R=function(e,t,n,i,s){return{_hx_index:9,turbo:e,autoplay:t,superTurbo:n,featureSpin:i,featureBuyName:s,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionSettingsFilter",R.__params__=["turbo","autoplay","superTurbo","featureSpin","featureBuyName"],R),AttentionRevealModeFilter:((R=function(e,t,n){return{_hx_index:10,include:e,exclude:t,reels:n,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionRevealModeFilter",R.__params__=["include","exclude","reels"],R),AttentionProximityFilter:((R=function(e,t,n){return{_hx_index:11,symbols:e,searchSelection:t,matchAll:n,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionProximityFilter",R.__params__=["symbols","searchSelection","matchAll"],R),AttentionPassThroughFilter:((R=function(e,t){return{_hx_index:12,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionPassThroughFilter",R.__params__=["include","exclude"],R),AttentionAttachmentFilter:((R=function(e,t){return{_hx_index:13,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.AttentionFilter",toString:o}})._hx_name="AttentionAttachmentFilter",R.__params__=["include","exclude"],R)});Bf.__constructs__=[Bf.AttentionOccuranceFilter,Bf.AttentionLastOccurrence,Bf.AttentionNeighborFilter,Bf.AttentionRemainingFilter,Bf.AttentionSymbolFilter,Bf.AttentionSequenceFilter,Bf.AttentionStickyFilter,Bf.AttentionStateFilter,Bf.AttentionEventFilter,Bf.AttentionSettingsFilter,Bf.AttentionRevealModeFilter,Bf.AttentionProximityFilter,Bf.AttentionPassThroughFilter,Bf.AttentionAttachmentFilter],Bf.__empty_constructs__=[];(n=fe["hacksaw.slotcommon.types.LockPresentation"]={__ename__:!0,__constructs__:null,Reel:((R=function(e,t,n,i,s){return{_hx_index:0,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.LockPresentation",toString:o}})._hx_name="Reel",R.__params__=["handler","config","filters","type","duration"],R),Shader:((R=function(e,t,n,i,s){return{_hx_index:1,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.LockPresentation",toString:o}})._hx_name="Shader",R.__params__=["handler","config","filters","type","duration"],R),Action:((R=function(e,t,n,i,s){return{_hx_index:2,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.LockPresentation",toString:o}})._hx_name="Action",R.__params__=["handler","config","filters","type","duration"],R)}).__constructs__=[n.Reel,n.Shader,n.Action],n.__empty_constructs__=[];var Tf=fe["hacksaw.slotcommon.types.PresentationAction"]={__ename__:!0,__constructs__:null,SymbolWin:((R=function(e,t,n){return{_hx_index:0,win:e,id:t,cell:n,__enum__:"hacksaw.slotcommon.types.PresentationAction",toString:o}})._hx_name="SymbolWin",R.__params__=["win","id","cell"],R),AreaWin:((R=function(e,t,n){return{_hx_index:1,win:e,id:t,area:n,__enum__:"hacksaw.slotcommon.types.PresentationAction",toString:o}})._hx_name="AreaWin",R.__params__=["win","id","area"],R),ReelAttention:((R=function(e,t,n){return{_hx_index:2,win:e,id:t,index:n,__enum__:"hacksaw.slotcommon.types.PresentationAction",toString:o}})._hx_name="ReelAttention",R.__params__=["win","id","index"],R),SymbolAttention:((R=function(e,t,n){return{_hx_index:3,win:e,id:t,cell:n,__enum__:"hacksaw.slotcommon.types.PresentationAction",toString:o}})._hx_name="SymbolAttention",R.__params__=["win","id","cell"],R),AreaAttention:((R=function(e,t,n){return{_hx_index:4,win:e,id:t,area:n,__enum__:"hacksaw.slotcommon.types.PresentationAction",toString:o}})._hx_name="AreaAttention",R.__params__=["win","id","area"],R)},Ef=(Tf.__constructs__=[Tf.SymbolWin,Tf.AreaWin,Tf.ReelAttention,Tf.SymbolAttention,Tf.AreaAttention],Tf.__empty_constructs__=[],function(e,t,n,i,s){this.winFactor=0,this.col=e,this.row=t,this.symbol=n,this.turboMode=i,null!=s&&(this.winFactor=s)}),Ff=((i["hacksaw.slotcommon.types.SymbolPresentationMessage"]=Ef).__name__="hacksaw.slotcommon.types.SymbolPresentationMessage",Ef.prototype={__class__:Ef},function(e,t,n,i,s,a,l,r){this.winFactor=0,this.col=e,this.row=t,this.colMax=n,this.rowMax=i,this.count=s,this.turboMode=a,this.symbol=l,null!=r&&(this.winFactor=r)}),Df=((i["hacksaw.slotcommon.types.SymbolAreaPresentationMessage"]=Ff).__name__="hacksaw.slotcommon.types.SymbolAreaPresentationMessage",Ff.prototype={__class__:Ff},function(e,t,n,i,s,a,l){this.winFactor=0,this.col=e,this.row=t,this.colMax=n,this.rowMax=i,this.count=s,this.turboMode=a,null!=l&&(this.winFactor=l)}),Rf=((i["hacksaw.slotcommon.types.SymbolSummaryPresentationMessage"]=Df).__name__="hacksaw.slotcommon.types.SymbolSummaryPresentationMessage",Df.prototype={__class__:Df},function(e,t,n){this.index=e,this.slowdownDuration=t,this.turboMode=n}),Pf=((i["hacksaw.slotcommon.types.ReelAttentionPresentationMessage"]=Rf).__name__="hacksaw.slotcommon.types.ReelAttentionPresentationMessage",Rf.prototype={__class__:Rf},function(e,t,n,i){this.col=e,this.row=t,this.symbol=n,this.turboMode=i}),zf=((i["hacksaw.slotcommon.types.RemovePresentationMessage"]=Pf).__name__="hacksaw.slotcommon.types.RemovePresentationMessage",Pf.prototype={__class__:Pf},function(e,t,n,i,s,a,l){this.col=e,this.row=t,this.colMax=n,this.rowMax=i,this.count=s,this.symbol=a,this.turboMode=l}),Qf=((i["hacksaw.slotcommon.types.RemoveAreaPresentationMessage"]=zf).__name__="hacksaw.slotcommon.types.RemoveAreaPresentationMessage",zf.prototype={__class__:zf},fe["hacksaw.slotcommon.types.ReelFilter"]={__ename__:!0,__constructs__:null,ReelAttentionFilter:((R=function(e,t){return{_hx_index:0,filter:e,inclusivity:t,__enum__:"hacksaw.slotcommon.types.ReelFilter",toString:o}})._hx_name="ReelAttentionFilter",R.__params__=["filter","inclusivity"],R),ReelWinFilter:((R=function(e,t){return{_hx_index:1,filter:e,inclusivity:t,__enum__:"hacksaw.slotcommon.types.ReelFilter",toString:o}})._hx_name="ReelWinFilter",R.__params__=["filter","inclusivity"],R),ReelRemoveFilter:((R=function(e,t){return{_hx_index:2,filter:e,inclusivity:t,__enum__:"hacksaw.slotcommon.types.ReelFilter",toString:o}})._hx_name="ReelRemoveFilter",R.__params__=["filter","inclusivity"],R),ReelDropFilter:((R=function(e,t){return{_hx_index:3,filter:e,inclusivity:t,__enum__:"hacksaw.slotcommon.types.ReelFilter",toString:o}})._hx_name="ReelDropFilter",R.__params__=["filter","inclusivity"],R),ReelStickyFilter:((R=function(e,t){return{_hx_index:4,filter:e,inclusivity:t,__enum__:"hacksaw.slotcommon.types.ReelFilter",toString:o}})._hx_name="ReelStickyFilter",R.__params__=["filter","inclusivity"],R)}),Vf=(Qf.__constructs__=[Qf.ReelAttentionFilter,Qf.ReelWinFilter,Qf.ReelRemoveFilter,Qf.ReelDropFilter,Qf.ReelStickyFilter],Qf.__empty_constructs__=[],fe["hacksaw.slotcommon.types.FilterInclusivity"]={__ename__:!0,__constructs__:null,Any:{_hx_name:"Any",_hx_index:0,__enum__:"hacksaw.slotcommon.types.FilterInclusivity",toString:o},And:{_hx_name:"And",_hx_index:1,__enum__:"hacksaw.slotcommon.types.FilterInclusivity",toString:o},Or:{_hx_name:"Or",_hx_index:2,__enum__:"hacksaw.slotcommon.types.FilterInclusivity",toString:o}}),Of=(Vf.__constructs__=[Vf.Any,Vf.And,Vf.Or],Vf.__empty_constructs__=[Vf.Any,Vf.And,Vf.Or],{}),Wf=(Of.gridFromStops=function(e,t,n){for(var n=new Hl(t.length,n),i=n.mData,s=n.mW,a=0,l=n.mW*n.mH;a<l;){var r=a++,o=r%s,u=il.filterNull(e.getCol(o,[])).length,h=((r/s|0)+t[o]-1)%u;i[r]=e.mData[(0<=h?h:h+u)*e.mW+o]}return n},function(e,t){this.movement=e,this.result=t}),Nf=((i["hacksaw.slotcommon.types.ReelCollapse"]=Wf).__name__="hacksaw.slotcommon.types.ReelCollapse",Wf.prototype={__class__:Wf},fe["hacksaw.slotcommon.types.RemovePresentation"]={__ename__:!0,__constructs__:null,Reel:((R=function(e,t,n,i,s){return{_hx_index:0,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.RemovePresentation",toString:o}})._hx_name="Reel",R.__params__=["handler","config","filters","type","duration"],R),Animation:((R=function(e,t,n,i,s){return{_hx_index:1,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.RemovePresentation",toString:o}})._hx_name="Animation",R.__params__=["handler","config","filters","type","duration"],R),Tween:((R=function(e,t,n,i,s){return{_hx_index:2,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.RemovePresentation",toString:o}})._hx_name="Tween",R.__params__=["handler","config","filters","type","duration"],R),Action:((R=function(e,t,n,i,s){return{_hx_index:3,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.RemovePresentation",toString:o}})._hx_name="Action",R.__params__=["handler","config","filters","type","duration"],R),Element:((R=function(e,t,n,i,s){return{_hx_index:4,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.RemovePresentation",toString:o}})._hx_name="Element",R.__params__=["handler","config","filters","type","duration"],R)}),Gf=(Nf.__constructs__=[Nf.Reel,Nf.Animation,Nf.Tween,Nf.Action,Nf.Element],Nf.__empty_constructs__=[],fe["hacksaw.slotcommon.types.RemoveFilter"]={__ename__:!0,__constructs__:null,RemoveSymbolIdFilter:((R=function(e,t){return{_hx_index:0,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.RemoveFilter",toString:o}})._hx_name="RemoveSymbolIdFilter",R.__params__=["include","exclude"],R),RemoveSymbolFilter:((R=function(e,t){return{_hx_index:1,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.RemoveFilter",toString:o}})._hx_name="RemoveSymbolFilter",R.__params__=["include","exclude"],R),RemoveStateFilter:((R=function(e,t){return{_hx_index:2,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.RemoveFilter",toString:o}})._hx_name="RemoveStateFilter",R.__params__=["include","exclude"],R),RemoveEventFilter:((R=function(e,t){return{_hx_index:3,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.RemoveFilter",toString:o}})._hx_name="RemoveEventFilter",R.__params__=["include","exclude"],R),RemoveSettingsFilter:((R=function(e,t,n,i,s){return{_hx_index:4,turbo:e,autoplay:t,superTurbo:n,featureSpin:i,featureBuyName:s,__enum__:"hacksaw.slotcommon.types.RemoveFilter",toString:o}})._hx_name="RemoveSettingsFilter",R.__params__=["turbo","autoplay","superTurbo","featureSpin","featureBuyName"],R),RemovePassThroughFilter:((R=function(e,t){return{_hx_index:5,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.RemoveFilter",toString:o}})._hx_name="RemovePassThroughFilter",R.__params__=["include","exclude"],R),RemoveAttachmentFilter:((R=function(e,t){return{_hx_index:6,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.RemoveFilter",toString:o}})._hx_name="RemoveAttachmentFilter",R.__params__=["include","exclude"],R)}),Uf=(Gf.__constructs__=[Gf.RemoveSymbolIdFilter,Gf.RemoveSymbolFilter,Gf.RemoveStateFilter,Gf.RemoveEventFilter,Gf.RemoveSettingsFilter,Gf.RemovePassThroughFilter,Gf.RemoveAttachmentFilter],Gf.__empty_constructs__=[],fe["hacksaw.slotcommon.types.SortDirection"]={__ename__:!0,__constructs__:null,TopLeftToBottomRight:{_hx_name:"TopLeftToBottomRight",_hx_index:0,__enum__:"hacksaw.slotcommon.types.SortDirection",toString:o},TopRightToBottomLeft:{_hx_name:"TopRightToBottomLeft",_hx_index:1,__enum__:"hacksaw.slotcommon.types.SortDirection",toString:o},BottomLeftToTopRight:{_hx_name:"BottomLeftToTopRight",_hx_index:2,__enum__:"hacksaw.slotcommon.types.SortDirection",toString:o},BottomRightToTopLeft:{_hx_name:"BottomRightToTopLeft",_hx_index:3,__enum__:"hacksaw.slotcommon.types.SortDirection",toString:o}});Uf.__constructs__=[Uf.TopLeftToBottomRight,Uf.TopRightToBottomLeft,Uf.BottomLeftToTopRight,Uf.BottomRightToTopLeft],Uf.__empty_constructs__=[Uf.TopLeftToBottomRight,Uf.TopRightToBottomLeft,Uf.BottomLeftToTopRight,Uf.BottomRightToTopLeft],(n=fe["hacksaw.slotcommon.types.StickyPresentation"]={__ename__:!0,__constructs__:null,Animation:((R=function(e,t,n,i,s){return{_hx_index:0,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.StickyPresentation",toString:o}})._hx_name="Animation",R.__params__=["handler","config","filters","type","duration"],R),Shader:((R=function(e,t,n,i,s){return{_hx_index:1,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.StickyPresentation",toString:o}})._hx_name="Shader",R.__params__=["handler","config","filters","type","duration"],R),Tween:((R=function(e,t,n,i,s){return{_hx_index:2,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.StickyPresentation",toString:o}})._hx_name="Tween",R.__params__=["handler","config","filters","type","duration"],R),Action:((R=function(e,t,n,i,s){return{_hx_index:3,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.StickyPresentation",toString:o}})._hx_name="Action",R.__params__=["handler","config","filters","type","duration"],R),Element:((R=function(e,t,n,i,s){return{_hx_index:4,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.StickyPresentation",toString:o}})._hx_name="Element",R.__params__=["handler","config","filters","type","duration"],R)}).__constructs__=[n.Animation,n.Shader,n.Tween,n.Action,n.Element],n.__empty_constructs__=[];(n=fe["hacksaw.slotcommon.types.StickyFilter"]={__ename__:!0,__constructs__:null,StickySymbolFilter:((R=function(e,t){return{_hx_index:0,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.StickyFilter",toString:o}})._hx_name="StickySymbolFilter",R.__params__=["include","exclude"],R),StickyStateFilter:((R=function(e,t){return{_hx_index:1,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.StickyFilter",toString:o}})._hx_name="StickyStateFilter",R.__params__=["include","exclude"],R),StickyEventFilter:((R=function(e,t){return{_hx_index:2,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.StickyFilter",toString:o}})._hx_name="StickyEventFilter",R.__params__=["include","exclude"],R),StickyAttachmentFilter:((R=function(e,t){return{_hx_index:3,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.StickyFilter",toString:o}})._hx_name="StickyAttachmentFilter",R.__params__=["include","exclude"],R),StickySettingsFilter:((R=function(e,t,n,i,s){return{_hx_index:4,turbo:e,autoplay:t,superTurbo:n,featureSpin:i,featureBuyName:s,__enum__:"hacksaw.slotcommon.types.StickyFilter",toString:o}})._hx_name="StickySettingsFilter",R.__params__=["turbo","autoplay","superTurbo","featureSpin","featureBuyName"],R),StickyRevealModeFilter:((R=function(e,t){return{_hx_index:5,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.StickyFilter",toString:o}})._hx_name="StickyRevealModeFilter",R.__params__=["include","exclude"],R),StickyLockedReelFilter:((R=function(e){return{_hx_index:6,isLocked:e,__enum__:"hacksaw.slotcommon.types.StickyFilter",toString:o}})._hx_name="StickyLockedReelFilter",R.__params__=["isLocked"],R)}).__constructs__=[n.StickySymbolFilter,n.StickyStateFilter,n.StickyEventFilter,n.StickyAttachmentFilter,n.StickySettingsFilter,n.StickyRevealModeFilter,n.StickyLockedReelFilter],n.__empty_constructs__=[],(i["hacksaw.slotcommon.types.SymbolAnimation"]=ip).__name__="hacksaw.slotcommon.types.SymbolAnimation";var Lf=function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x){this.originalId=null,this.size=new Xt(1,1),this.zPos=0,this.stickyWinAnimations=null,this.stickyAnimations=null,this.idleAnimations=null,this.landAnimations=null,this.winAnimations=null,this.attentionAnimation=null,this.rotation=jf.None,this.isScatter=null,this.isWild=null,this.initState=Xf.None,this.payouts=null,this.blurTiles=null,this.colossalConfigs=null,this.attachments=null,this.id=e,this.name=t,this.asset=n,null!=i&&(this.attachments=i),null!=s&&(this.colossalConfigs=s),null!=a&&(this.blurTiles=a),null!=l&&(this.payouts=l),null!=r&&(this.initState=r),null!=o&&(this.isWild=o),null!=u&&(this.isScatter=u),null!=h&&(this.rotation=h),null!=c&&(this.attentionAnimation=c),null!=_&&(this.winAnimations=_),null!=d&&(this.landAnimations=d),null!=p&&(this.idleAnimations=p),null!=m&&(this.stickyAnimations=m),null!=g&&(this.stickyWinAnimations=g),null!=f&&(this.zPos=f),null!=A&&(this.size=A),null!=x&&(this.originalId=x)},jf=((i["hacksaw.slotcommon.types.SymbolConfig"]=Lf).__name__="hacksaw.slotcommon.types.SymbolConfig",Lf.prototype={__class__:Lf},fe["hacksaw.slotcommon.types.SymbolRotation"]={__ename__:!0,__constructs__:null,Radians:((R=function(e){return{_hx_index:0,v:e,__enum__:"hacksaw.slotcommon.types.SymbolRotation",toString:o}})._hx_name="Radians",R.__params__=["v"],R),None:{_hx_name:"None",_hx_index:1,__enum__:"hacksaw.slotcommon.types.SymbolRotation",toString:o}}),Hf=(jf.__constructs__=[jf.Radians,jf.None],jf.__empty_constructs__=[jf.None],fe["hacksaw.slotcommon.types.SymbolAsset"]={__ename__:!0,__constructs__:null,ObjectSymbol:((R=function(e){return{_hx_index:0,object:e,__enum__:"hacksaw.slotcommon.types.SymbolAsset",toString:o}})._hx_name="ObjectSymbol",R.__params__=["object"],R)}),Yf=(Hf.__constructs__=[Hf.ObjectSymbol],Hf.__empty_constructs__=[],(i["hacksaw.slotcommon.types.ColossalSymbol"]=sp).__name__="hacksaw.slotcommon.types.ColossalSymbol",sp.prototype={__class__:sp},fe["hacksaw.slotcommon.types.SymbolPresentation"]={__ename__:!0,__constructs__:null,Reel:((R=function(e,t,n,i,s){return{_hx_index:0,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.SymbolPresentation",toString:o}})._hx_name="Reel",R.__params__=["handler","config","filters","type","duration"],R),Animation:((R=function(e,t,n,i,s){return{_hx_index:1,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.SymbolPresentation",toString:o}})._hx_name="Animation",R.__params__=["handler","config","filters","type","duration"],R),Shader:((R=function(e,t,n,i,s){return{_hx_index:2,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.SymbolPresentation",toString:o}})._hx_name="Shader",R.__params__=["handler","config","filters","type","duration"],R),Tween:((R=function(e,t,n,i,s){return{_hx_index:3,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.SymbolPresentation",toString:o}})._hx_name="Tween",R.__params__=["handler","config","filters","type","duration"],R),Action:((R=function(e,t,n,i,s){return{_hx_index:4,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.SymbolPresentation",toString:o}})._hx_name="Action",R.__params__=["handler","config","filters","type","duration"],R),Element:((R=function(e,t,n,i,s){return{_hx_index:5,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.SymbolPresentation",toString:o}})._hx_name="Element",R.__params__=["handler","config","filters","type","duration"],R)}),Zf=(Yf.__constructs__=[Yf.Reel,Yf.Animation,Yf.Shader,Yf.Tween,Yf.Action,Yf.Element],Yf.__empty_constructs__=[],fe["hacksaw.slotcommon.types.SymbolFilter"]={__ename__:!0,__constructs__:null,OccuranceFilter:((R=function(e,t,n,i){return{_hx_index:0,symbol:e,ocurrances:t,threshold:n,reels:i,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="OccuranceFilter",R.__params__=["symbol","ocurrances","threshold","reels"],R),NeighborFilter:((R=function(e,t,n){return{_hx_index:1,symbols:e,next:t,reels:n,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="NeighborFilter",R.__params__=["symbols","next","reels"],R),RemainingFilter:((R=function(e,t,n,i,s){return{_hx_index:2,symbol:e,threshold:t,remaining:n,over:i,reels:s,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="RemainingFilter",R.__params__=["symbol","threshold","remaining","over","reels"],R),SymbolFilter:((R=function(e,t){return{_hx_index:3,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="SymbolFilter",R.__params__=["include","exclude"],R),StickyFilter:((R=function(e){return{_hx_index:4,include:e,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="StickyFilter",R.__params__=["include"],R),StateFilter:((R=function(e,t){return{_hx_index:5,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="StateFilter",R.__params__=["include","exclude"],R),EventFilter:((R=function(e,t,n){return{_hx_index:6,include:e,exclude:t,reels:n,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="EventFilter",R.__params__=["include","exclude","reels"],R),SettingsFilter:((R=function(e,t,n,i,s){return{_hx_index:7,turbo:e,autoplay:t,superTurbo:n,featureSpin:i,featureBuyName:s,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="SettingsFilter",R.__params__=["turbo","autoplay","superTurbo","featureSpin","featureBuyName"],R),RevealModeFilter:((R=function(e,t,n){return{_hx_index:8,include:e,exclude:t,reels:n,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="RevealModeFilter",R.__params__=["include","exclude","reels"],R),PassThroughFilter:((R=function(e,t){return{_hx_index:9,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="PassThroughFilter",R.__params__=["include","exclude"],R),SymbolAttachmentFilter:((R=function(e,t){return{_hx_index:10,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.SymbolFilter",toString:o}})._hx_name="SymbolAttachmentFilter",R.__params__=["include","exclude"],R)}),Xf=(Zf.__constructs__=[Zf.OccuranceFilter,Zf.NeighborFilter,Zf.RemainingFilter,Zf.SymbolFilter,Zf.StickyFilter,Zf.StateFilter,Zf.EventFilter,Zf.SettingsFilter,Zf.RevealModeFilter,Zf.PassThroughFilter,Zf.SymbolAttachmentFilter],Zf.__empty_constructs__=[],fe["hacksaw.slotcommon.types.SymbolState"]={__ename__:!0,__constructs__:null,Animation:((R=function(e){return{_hx_index:0,type:e,__enum__:"hacksaw.slotcommon.types.SymbolState",toString:o}})._hx_name="Animation",R.__params__=["type"],R),Tile:((R=function(e,t,n,i){return{_hx_index:1,tile:e,name:t,overlay:n,replace:i,__enum__:"hacksaw.slotcommon.types.SymbolState",toString:o}})._hx_name="Tile",R.__params__=["tile","name","overlay","replace"],R),Spine:((R=function(e,t){return{_hx_index:2,animation:e,skin:t,__enum__:"hacksaw.slotcommon.types.SymbolState",toString:o}})._hx_name="Spine",R.__params__=["animation","skin"],R),None:{_hx_name:"None",_hx_index:3,__enum__:"hacksaw.slotcommon.types.SymbolState",toString:o}}),qf=(Xf.__constructs__=[Xf.Animation,Xf.Tile,Xf.Spine,Xf.None],Xf.__empty_constructs__=[Xf.None],fe["hacksaw.slotcommon.types.SymbolTarget"]={__ename__:!0,__constructs__:null,SymbolArea:((R=function(e){return{_hx_index:0,area:e,__enum__:"hacksaw.slotcommon.types.SymbolTarget",toString:o}})._hx_name="SymbolArea",R.__params__=["area"],R),SymbolCell:((R=function(e){return{_hx_index:1,cell:e,__enum__:"hacksaw.slotcommon.types.SymbolTarget",toString:o}})._hx_name="SymbolCell",R.__params__=["cell"],R)}),Kf=(qf.__constructs__=[qf.SymbolArea,qf.SymbolCell],qf.__empty_constructs__=[],fe["hacksaw.slotcommon.types.WinPresentation"]={__ename__:!0,__constructs__:null,Text:((R=function(e,t,n,i,s){return{_hx_index:0,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Text",R.__params__=["handler","config","filters","type","duration"],R),Sequence:((R=function(e,t,n,i,s){return{_hx_index:1,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Sequence",R.__params__=["handler","config","filters","type","duration"],R),Tween:((R=function(e,t,n,i,s){return{_hx_index:2,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Tween",R.__params__=["handler","config","filters","type","duration"],R),Animation:((R=function(e,t,n,i,s){return{_hx_index:3,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Animation",R.__params__=["handler","config","filters","type","duration"],R),Shader:((R=function(e,t,n,i,s){return{_hx_index:4,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Shader",R.__params__=["handler","config","filters","type","duration"],R),Winline:((R=function(e,t,n,i,s){return{_hx_index:5,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Winline",R.__params__=["handler","config","filters","type","duration"],R),Action:((R=function(e,t,n,i,s){return{_hx_index:6,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Action",R.__params__=["handler","config","filters","type","duration"],R),Element:((R=function(e,t,n,i,s){return{_hx_index:7,handler:e,config:t,filters:n,type:i,duration:s,__enum__:"hacksaw.slotcommon.types.WinPresentation",toString:o}})._hx_name="Element",R.__params__=["handler","config","filters","type","duration"],R)}),Jf=(Kf.__constructs__=[Kf.Text,Kf.Sequence,Kf.Tween,Kf.Animation,Kf.Shader,Kf.Winline,Kf.Action,Kf.Element],Kf.__empty_constructs__=[],fe["hacksaw.slotcommon.types.WinFilter"]={__ename__:!0,__constructs__:null,WinContainsFilter:((R=function(e){return{_hx_index:0,includes:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinContainsFilter",R.__params__=["includes"],R),WinTierFilter:((R=function(e){return{_hx_index:1,range:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinTierFilter",R.__params__=["range"],R),WinFactorFilter:((R=function(e){return{_hx_index:2,range:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinFactorFilter",R.__params__=["range"],R),TotalWinFactorFilter:((R=function(e){return{_hx_index:3,range:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="TotalWinFactorFilter",R.__params__=["range"],R),CountupWinFilter:((R=function(e){return{_hx_index:4,showing:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="CountupWinFilter",R.__params__=["showing"],R),WinAmountFilter:((R=function(e){return{_hx_index:5,range:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinAmountFilter",R.__params__=["range"],R),WinLastFilter:((R=function(e){return{_hx_index:6,isLast:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinLastFilter",R.__params__=["isLast"],R),WinStackFilter:((R=function(e,t){return{_hx_index:7,hasStacks:e,range:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinStackFilter",R.__params__=["hasStacks","range"],R),WinSymbolIdFilter:((R=function(e,t){return{_hx_index:8,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinSymbolIdFilter",R.__params__=["include","exclude"],R),WinSymbolFilter:((R=function(e,t){return{_hx_index:9,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinSymbolFilter",R.__params__=["include","exclude"],R),WinStickyFilter:((R=function(e){return{_hx_index:10,include:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinStickyFilter",R.__params__=["include"],R),WinStateFilter:((R=function(e,t){return{_hx_index:11,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinStateFilter",R.__params__=["include","exclude"],R),WinEventFilter:((R=function(e,t){return{_hx_index:12,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinEventFilter",R.__params__=["include","exclude"],R),WinOccuranceFilter:((R=function(e,t,n,i){return{_hx_index:13,symbol:e,ocurrances:t,threshold:n,reels:i,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinOccuranceFilter",R.__params__=["symbol","ocurrances","threshold","reels"],R),WinSettingsFilter:((R=function(e,t,n,i,s){return{_hx_index:14,turbo:e,autoplay:t,superTurbo:n,featureSpin:i,featureBuyName:s,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinSettingsFilter",R.__params__=["turbo","autoplay","superTurbo","featureSpin","featureBuyName"],R),WinLengthFilter:((R=function(e,t){return{_hx_index:15,min:e,max:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinLengthFilter",R.__params__=["min","max"],R),WinCountFilter:((R=function(e,t){return{_hx_index:16,min:e,max:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinCountFilter",R.__params__=["min","max"],R),WinRevealModeFilter:((R=function(e,t){return{_hx_index:17,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinRevealModeFilter",R.__params__=["include","exclude"],R),WinIsMultipliedFilter:((R=function(e){return{_hx_index:18,isMultiplied:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinIsMultipliedFilter",R.__params__=["isMultiplied"],R),WinTotalMultiplierFilter:((R=function(e,t){return{_hx_index:19,range:e,isMultiplicative:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinTotalMultiplierFilter",R.__params__=["range","isMultiplicative"],R),WinProximityFilter:((R=function(e,t,n){return{_hx_index:20,symbols:e,searchSelection:t,matchAll:n,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinProximityFilter",R.__params__=["symbols","searchSelection","matchAll"],R),WinPassThroughFilter:((R=function(e,t){return{_hx_index:21,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinPassThroughFilter",R.__params__=["include","exclude"],R),WinAttachmentFilter:((R=function(e,t){return{_hx_index:22,include:e,exclude:t,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinAttachmentFilter",R.__params__=["include","exclude"],R),WinLockedReelFilter:((R=function(e){return{_hx_index:23,isLocked:e,__enum__:"hacksaw.slotcommon.types.WinFilter",toString:o}})._hx_name="WinLockedReelFilter",R.__params__=["isLocked"],R)}),$f=(Jf.__constructs__=[Jf.WinContainsFilter,Jf.WinTierFilter,Jf.WinFactorFilter,Jf.TotalWinFactorFilter,Jf.CountupWinFilter,Jf.WinAmountFilter,Jf.WinLastFilter,Jf.WinStackFilter,Jf.WinSymbolIdFilter,Jf.WinSymbolFilter,Jf.WinStickyFilter,Jf.WinStateFilter,Jf.WinEventFilter,Jf.WinOccuranceFilter,Jf.WinSettingsFilter,Jf.WinLengthFilter,Jf.WinCountFilter,Jf.WinRevealModeFilter,Jf.WinIsMultipliedFilter,Jf.WinTotalMultiplierFilter,Jf.WinProximityFilter,Jf.WinPassThroughFilter,Jf.WinAttachmentFilter,Jf.WinLockedReelFilter],Jf.__empty_constructs__=[],function(){}),eA=((i["hacksaw.slotcommon.utils.SymbolAssetUtils"]=$f).__name__="hacksaw.slotcommon.utils.SymbolAssetUtils",$f.getId=function(e){return null==e?null:e.object.id},$f.getSymbol=function(e){return null==e?null:e.object},$f.setSymbolOnGrid=function(e,t,n){if(null!=e)for(var i=$f.getSymbol(e),s=0,a=i.size.x;s<a;)for(var l=s++,r=0,o=i.size.y;r<o;){var u=new Bw(n.x+l,n.y+r++);t.mData[u.y*t.mW+u.x]=e}},(i["hacksaw.sound.IAudioRenderer"]=ap).__name__="hacksaw.sound.IAudioRenderer",ap.__isInterface__=!0,ap.prototype={__class__:ap,__properties__:{get_currentTime:"get_currentTime"}},(i["hacksaw.sound.Sequencer"]=lp).__name__="hacksaw.sound.Sequencer",lp.prototype={update:function(t){il.each(this._scheduled,function(e){e.remaining-=t});for(var e=this._scheduled,n=[],i=0,s=e.length;i<s;){var a=i++;n.push({v:e[a],i:a})}for(i=[],s=0;s<n.length;){var l=n[s];++s,l.v.remaining<=0&&i.push(l)}for(var r=new Array(i.length),s=0,o=i.length;s<o;)r[a=s++]=i[a].i;for(;0<r.length;)e.splice(r.pop(),1);for(r=new Array(i.length),s=0,o=i.length;s<o;)r[a=s++]=i[a].v;il.each(r,function(e){e.action()})},playSound:function(i,e){null==e&&(e=!0);var s=this;if(!this.rateLimit(i.maxrate,"playSound",i.id,i.delay)&&null!=i.id&&"none"!=i.id){var a,l,t,n=this._renderer.get_currentTime(),r=i.quantize,o=i.instance,o=this._sequenceState.h[null!=o?o:this._currBpmSequence],o=null!=o?o:{index:0,start:n,quantize:null!=r?r:1,bpm:this._currentBpm},u=o.start,h=o.quantize,o=o.bpm,c=null!=(r=i.delay)?r:0,u=0<u?n-u:0;if(null!=i.start){if(null==(t=i.start)||"string"!=typeof t)C=null;else{for(var _=t.split("."),d=new Array(_.length),p=0,m=_.length;p<m;)d[x=p++]=el.parseInt(_[x]);for(var p=[],m=0;m<d.length;){var g=d[m];++m,0<=g&&p.push(g)}C=3!=p.length||be.has(p,null)?null:{bar:w=null==(w=p[0])?0:w,beat:y=null==(y=p[1])?0:y,tick:b=null==(b=p[2])?0:b}}f=n+this.calculateTime({start:C,currentTime:u,bpm:o,quantize:h,signature:this.currentSignature})}else var f=null!=(r=i.when)?r:n;if(f+=c,null!=i.loopStart||null!=i.loopStartTime){if(null==(t=null==i.loopStart?"null":""+i.loopStart)||"string"!=typeof t)A=null;else{for(_=t.split("."),d=new Array(_.length),p=0,m=_.length;p<m;)d[x=p++]=el.parseInt(_[x]);for(var A,p=[],m=0;m<d.length;){g=d[m];++m,0<=g&&p.push(g)}A=3!=p.length||be.has(p,null)?null:{bar:w=null==(w=p[0])?0:w,beat:y=null==(y=p[1])?0:y,tick:b=null==(b=p[2])?0:b}}a=null!=A&&null!=A.bar?this.calculateTime({start:A,bpm:o}):i.loopStartTime}else a=0;if(null!=i.end){if(null==(t=null==i.end?"null":""+i.end)||"string"!=typeof t)v=null;else{for(var x,_=t.split("."),d=new Array(_.length),p=0,m=_.length;p<m;)d[x=p++]=el.parseInt(_[x]);for(var w,y,b,v,p=[],m=0;m<d.length;){g=d[m];++m,0<=g&&p.push(g)}v=3!=p.length||be.has(p,null)?null:{bar:w=null==(w=p[0])?0:w,beat:y=null==(y=p[1])?0:y,tick:b=null==(b=p[2])?0:b}}l=this.calculateTime({start:v,bpm:o})}else l=i.duration;i.when=f,i.duration=l;var C=function(){var e,t,n;s._renderer.playSound(i),0<l&&i.loop&&(0<a||i.sync&&i.sequenced)&&(t=f+(e=a<l?l-a:l),n=new uA(i.id,i.instance,i.volume,null,null,null,i.loop,null,null,null,a,i.onComplete,i.delay,null,null,null,e,null,t,i.sync,i.sequenced,null),s.scheduleAction(t,n,function(){s.playSound(n,!1)}))};e?this.scheduleAction(i.when,i,C):C()}},stopSound:function(e,t,n){null==n&&(n=!0);var i,s=this;null!=e.id&&"none"!=e.id&&(null==t&&(t=function(){}),n&&this.cancelScheduledEvent("playSound",e.id,e.instance),n=e.delay,i=null!=(i=e.when)?i:this._renderer.get_currentTime(),e.when=i+(null!=n?n:0),this.scheduleAction(e.when,e,function(){s._renderer.stopSound(e),t()}))},playPool:function(t){var e=il.find(this._poolConfigs,function(e){return e.id==t.id}),n=null!=(a=t.items)?a:e.items,i=this._pools.h[t.id],s=(null==i?null!=(l=(i={items:n,currIndex:0,order:e.order}).order)&&"random"==l&&nA.shuffleArray(i.items):i.currIndex==i.items.length&&(i.currIndex=0,null!=(l=i.order))&&"random"==l&&nA.shuffleArray(i.items),i.items[i.currIndex]),n=il.find(n,function(e){return e.id==s.id}),a=(s.params=(s.params!=n.params?n:s).params,t.maxrate);if(!this.rateLimit(null!=a?a:e.maxrate,"playPool",t.id,s.params.delay)&&null!=t.id&&"none"!=t.id){for(var l=0,r=X.fields(s.params);l<r.length;){var o=r[l];++l,s.params[o]=nA.getRandomValue(X.field(s.params,o))}"playSound"==s.type&&(n=null!=s.params?s.params:{volume:1,pan:0,pitch:0,delay:0,start:null,loop:!1},this.playSound(new uA(s.id,null,n.volume,n.pan,n.pitch,null,n.loop,null,null,null,null,null,n.delay,(null!=n.start?n:t).start,null,null,null,null,null,null,null,null))),i.currIndex++,this._pools.h[t.id]=i}},playEnvelope:function(e){var t=this;if(null!=e.targets&&"none"!=e.id){0<e.points[0].pos&&e.points.unshift({val:null,pos:0});for(var n=this._renderer.get_currentTime(),i=0,s=e.points;i<s.length;){var a,l,r,o,u=s[i];++i,null!=u.beatPos&&(a=0,r=e.quantize,a=null!=(o=null==(o=this._sequenceState.h["sequence"==e.targetType?e.targets[0]:this._currBpmSequence])?{start:n,quantize:r,bpm:t._currentBpm,index:0}:o)?n-o.start:0,l=o.quantize,o=this.calculateTime({start:u.beatPos,bpm:o.bpm,currentTime:a,quantize:r=null!=l?l:1,signature:this.currentSignature}),u.pos+=o),u.pos+=n}e.when=e.points[0].pos+.05,this.scheduleAction(e.when,e,function(){t._renderer.playEnvelope(e)})}},resetPool:function(e){e=this._pools.h[e];null!=e&&(e.currIndex=0)},triggerInterval:function(){this.after(.025,Cn(this,this.triggerInterval));var e=this;if(null!=this.currentSignature){for(var t=this._renderer.get_currentTime(),n=this._sequenceState.h[this._currBpmSequence],n=t-(null!=n?n.start:0),i="0.0.0".split("."),s=new Array(i.length),a=0,l=i.length;a<l;)s[A=a++]=el.parseInt(i[A]);for(a=[],l=0;l<s.length;){var r=s[l];++l,0<=r&&a.push(r)}u=3!=a.length||be.has(a,null)?null:{bar:u=null==(u=a[0])?0:u,beat:u=null==(u=a[1])?0:u,tick:u=null==(u=a[2])?0:u};var o,u=this.calculateTime({start:u,currentTime:n,bpm:this._currentBpm,quantize:1,signature:this.currentSignature});u<=.05&&(n=this.currentSignature,o=n.beat+"/"+n.measure,this.after(u,function(){e._eventHandler(gA.EnterBar(0,e._currentBpm,o))}))}for(var t=this._renderer.get_currentTime(),a=[],h=this._scheduledEvents.h,c=Object.keys(h),_=c.length,d=0;d<_;){for(var p=c[d++],m=h[p],g=[],l=0,f=m.length;l<f;){var A=l++;g.push({v:m[A],i:A})}for(var x=[],w=0;w<g.length;){r=g[w];++w,r.v.when-t<=.1&&x.push(r)}for(var s=new Array(x.length),y=0,b=x.length;y<b;){var v=y++;s[v]=x[v].i}for(;0<s.length;)m.splice(s.pop(),1);for(var C=new Array(x.length),S=0,k=x.length;S<k;){var M=S++;C[M]=x[M].v}a.push(C)}n=Array.prototype.concat.apply([],a);il.each(n,function(e){e.act(e.arguments)})},rateLimit:function(e,t,n,i){null==i&&(i=0);var s,a,l=!1;return null==e||(s=null!=(s=this._triggers.h[t])?s:new at,a=Jn.now()/1e3*1e3,l=!!(Object.prototype.hasOwnProperty.call(s.h,n)&&a-s.h[n]<nA.getRandomValue(e))||l)||(s.h[n]=a+1e3*i,this._triggers.h[t]=s),l},playSequence:function(P){var z=this;if(null!=P.id&&"none"!=P.patternId){var e=this._renderer.get_currentTime(),Q=P.sequence,V=this._sequences.h[Q.id],t=P.restart,t=null!=t&&t||null==P.patternId,n=(t&&(this.stopSequence(new cA(Q.id,null,null,this._renderer.get_currentTime(),null,null)),V=null),null==V?V={currIndex:null,item:Q}:V.item=Q,Q.patterns[V.currIndex]);if(null!=P.patternId){var i=il.find(Q.patterns,function(e){return e.id==P.patternId});if(null==i)return;V.currIndex=Q.patterns.indexOf(i)}else if(t)V.currIndex=0;else if(V.currIndex++,V.currIndex==Q.patterns.length)return;if(!this.rateLimit(Q.maxrate,"playSequence",Q.id)){var i=this._sequenceState.h[Q.id],s=null!=i,O=Q.patterns[V.currIndex];if(!s||(null!=n?n.id:null)!=P.patternId||t){for(var n=O.bpm,W=null!=n?n:Q.bpm,N=null!=W,t=this._sequencePlayCancel.h[Q.id],G=(null!=t&&(t(),a=this._sequencePlayCancel,n=Q.id,Object.prototype.hasOwnProperty.call(a.h,n))&&delete a.h[n],s?e-i.start:0),U=null==P.quantize?V.currIndex<(s?i.index:0)&&null!=Q.returnQuantize?Q.returnQuantize:Q.quantize:P.quantize,L=[],t=null!=P.start,j=e,a=Q.signature.split("/"),l=new Array(a.length),r=0,o=a.length;r<o;)l[c=r++]=el.parseInt(a[c]);for(r=[],o=0;o<l.length;){var u=l[o];++o,1<u&&u<=16&&r.push(u)}var n=r[0],s=r[1],H=(this.currentSignature={beat:n=null==n?4:n,measure:s=null==s?4:s},null!=i&&null!=i.bpm?i.bpm:null!=W?W:this._currentBpm);if(N){e=this._sequenceState.h[this._currBpmSequence],s=null!=e?e.start:0;if(t){i=P.start;if(null==i||"string"!=typeof i)h=null;else{for(a=i.split("."),l=new Array(a.length),r=0,o=a.length;r<o;)l[c=r++]=el.parseInt(a[c]);for(var h,r=[],o=0;o<l.length;){u=l[o];++o,0<=u&&r.push(u)}h=3!=r.length||be.has(r,null)?null:{bar:_=null==(_=r[0])?0:_,beat:n=null==(n=r[1])?0:n,tick:d=null==(d=r[2])?0:d}}}else{for(var c,a="0.0.0".split("."),l=new Array(a.length),r=0,o=a.length;r<o;)l[c=r++]=el.parseInt(a[c]);for(var _,d,r=[],o=0;o<l.length;){u=l[o];++o,0<=u&&r.push(u)}h=3!=r.length||be.has(r,null)?null:{bar:_=null==(_=r[0])?0:_,beat:n=null==(n=r[1])?0:n,tick:d=null==(d=r[2])?0:d}}j+=0<s?this.calculateTime({start:h,currentTime:G,bpm:H,quantize:U,signature:this.currentSignature}):.05}e=this.after(Math.max((j+=null!=P.delay?P.delay:0)-this._renderer.get_currentTime()-.05,0),function(){var e=z._sequenceState.h[Q.id],t=null!=e;if(!t||e.index!=V.currIndex){for(var n={index:V.currIndex,start:j,bpm:W,quantize:Q.quantize},i=N&&z._currBpmSequence!=Q.id,s=((i||t)&&z.stopSequence(new cA(i?z._currBpmSequence:Q.id,null,null,j,null,null)),z._sequenceState.h[Q.id]=n,0),a=O.actions;s<a.length;){var l,r,o,u,h=a[s],c=(++s,h.params=null!=h.params?h.params:{},h.id+":"+Q.id),_=null;if(null!=h.params.start){var d=h.params.start;if(null==d||"string"!=typeof d)_=null;else{for(var p=d.split("."),m=new Array(p.length),g=0,f=p.length;g<f;){var A=g++;m[A]=el.parseInt(p[A])}for(var x=[],w=0;w<m.length;){var y=m[w];++w,0<=y&&x.push(y)}_=3!=x.length||be.has(x,null)?null:{bar:d=null==(d=x[0])?0:d,beat:d=null==(d=x[1])?0:d,tick:d=null==(d=x[2])?0:d}}}switch(u=null!=_?(null==(d={start:_,currentTime:G,bpm:H,quantize:U,signature:z.currentSignature}).bpm?0:(_=d.signature,l=null!=(l=d.currentTime)?l:z._renderer.get_currentTime(),r=d.quantize,o=null!=(o=d.delay)?o:0,null!=d.start&&(o+=z.calculateTime({start:d.start,bpm:d.bpm,currentTime:l,quantize:null!=r?r:1,signature:null!=_?_:{beat:4,measure:4}})),o))+j:j,h.type){case"playEnvelope":z.playEnvelope(new lA(h.id,h.params.points,null!=h.params.targets?h.params.targets:L,null!=h.params.targetType?h.params.targetType:"sequence",h.params.param,null,null,null,null));break;case"playPool":var b=[new rA(h.id,h.params.start,null,null,null,null)];z.scheduleAction(u,b[0],(e=>function(){var t;null!=il.find(z._poolConfigs,(t=e,function(e){return e.id==t[0].id}))&&z.playPool(e[0])})(b));break;case"playSound":L.push(c);b=z._renderer.getSoundDuration(h.id);if(null!=h.params.end){var v=h.params.end;if(null==v||"string"!=typeof v)B=null;else{for(var C=v.split("."),S=new Array(C.length),k=0,M=C.length;k<M;){var I=k++;S[I]=el.parseInt(C[I])}for(var B,T=[],E=0;E<S.length;){var F=S[E];++E,0<=F&&T.push(F)}B=3!=T.length||be.has(T,null)?null:{bar:v=null==(v=T[0])?0:v,beat:v=null==(v=T[1])?0:v,tick:v=null==(v=T[2])?0:v}}}else B=z.calculatePos(b,Q.bpm,z.currentSignature);var D,v=null!=h.params.duration?h.params.duration:null!=Q.bpm?z.calculateTime({start:B,bpm:W,currentTime:0,quantize:U,signature:z.currentSignature}):0,R=[new uA(h.id,Q.id,h.params.volume,null,h.params.pitch,null,h.params.loop,h.params.loopStart,h.params.loopStartTime,h.params.playStart,h.params.playStartTime,null,h.params.delay,null,null,null,v,null,u,null!=Q.bpm,!0,null)];R[0].onComplete=(e=>function(){e[0].loop||(z._sequenceState.h[Q.id]=null)})(R),N&&(t&&V.currIndex<e.index?z._eventHandler(gA.PhraseEnd):z._eventHandler(gA.PhraseStart(Q.bpm,Q.signature))),z.playSound(R[0]),O.progress&&null!=(R=[Q.patterns[V.currIndex+1]])[0]&&(D=z.after((D=[0<v?v:b])[0]-.1,((e,t)=>function(){z.playSequence(new oA(Q.id,Q,null,t[0].id,null,null,null,P.when+e[0],!1,null))})(D,R)),z._sequencePlayCancel.h[Q.id+"_progress"]=D);break;case"stopSound":z.stopSound(new _A(h.id,Q.id,null,null,u,null))}}N&&(z._currBpmSequence=Q.id,z._currentBpm=Q.bpm),z._sequences.h[Q.id]=V;p=z._sequencePlayCancel,i=Q.id;Object.prototype.hasOwnProperty.call(p.h,i)&&delete p.h[i]}});this._sequencePlayCancel.h[Q.id]=e}}}},stopSequence:function(e,t){if(null==t&&(t=!0),null!=e.id&&"none"!=e.id){var n=this._sequencePlayCancel.h[e.id],n=(null!=n&&(n(),s=this._sequencePlayCancel,i=e.id,Object.prototype.hasOwnProperty.call(s.h,i))&&delete s.h[i],this._sequencePlayCancel.h[e.id+"_progress"]),n=(null!=n&&(n(),s=this._sequencePlayCancel,i=e.id+"_progress",Object.prototype.hasOwnProperty.call(s.h,i))&&delete s.h[i],this._sequences.h[e.id]),i=this._sequenceState.h[e.id];if("string"==typeof e.stop)if(null==(g=null==e.stop?"null":""+e.stop)||"string"!=typeof g)h=null;else{for(var s=g.split("."),a=new Array(s.length),l=0,r=s.length;l<r;)a[p=l++]=el.parseInt(s[p]);for(l=[],r=0;r<a.length;){var o=a[r];++r,0<=o&&l.push(o)}h=3!=l.length||be.has(l,null)?null:{bar:f=null==(f=l[0])?0:f,beat:A=null==(A=l[1])?0:A,tick:x=null==(x=l[2])?0:x}}else h=null;var u=null;if(null!=n?u=n.item.bpm:null!=h&&null!=i&&(u=i.bpm),null==(w=e.when)){var h=e.quantize,n=null!=h?h:null!=n?n.item.quantize:null,c=null!=n?n:1,_=null!=i?i.start:0,d=this._renderer.get_currentTime(),d=null!=i?d-i.start:0;if(null==(g=e.stop)||"string"!=typeof g)m=null;else{for(var p,s=g.split("."),a=new Array(s.length),l=0,r=s.length;l<r;)a[p=l++]=el.parseInt(s[p]);for(var m,l=[],r=0;r<a.length;){o=a[r];++r,0<=o&&l.push(o)}m=3!=l.length||be.has(l,null)?null:{bar:f=null==(f=l[0])?0:f,beat:A=null==(A=l[1])?0:A,tick:x=null==(x=l[2])?0:x}}var g,f,A,i={start:m,currentTime:d,bpm:u,quantize:c,signature:this.currentSignature},x=null==i.bpm?0:(h=i.signature,g=null!=(n=i.currentTime)?n:this._renderer.get_currentTime(),f=i.quantize,A=null!=(n=i.delay)?n:0,null!=i.start&&(A+=this.calculateTime({start:i.start,bpm:i.bpm,currentTime:g,quantize:null!=f?f:1,signature:null!=h?h:{beat:4,measure:4}})),A),w=x+_}this.unscheduleSequence(e.id,w);for(var y=Object.keys(this._renderer.getPlaying().h),b=y.length,v=0;v<b;){var C,S=y[v++].split(":");null!=S&&2==S.length&&(C=S[1])==e.id&&this.stopSound(new _A(S[0],C,null,null,w,null))}t&&(this._sequenceState.h[e.id]=null)}},unscheduleSequence:function(e,t){var n=this._scheduledEvents.h.playSound;if(null!=n){for(var i=this._scheduledEvents,s=[],a=0;a<n.length;){var l=n[a];++a,((r=l.arguments).instance!=e||r.when-t<0)&&s.push(l)}i.h.playSound=s}if(null!=(n=this._scheduledEvents.h.stopSound)){for(i=this._scheduledEvents,s=[],a=0;a<n.length;){var r,l=n[a];++a,((r=l.arguments).instance!=e||r.when-t<0)&&s.push(l)}i.h.stopSound=s}},cancelScheduledEvent:function(e,t,n,i){var s=this._scheduledEvents.h[e];if(null!=s){for(var a=this._scheduledEvents,l=[],r=0;r<s.length;){var o=s[r],u=(++r,o.arguments);u.instance!=n&&u.id!=t&&l.push(o)}a.h[e]=l}},after:function(e,t){var n,i=this;return(e=null==e?0:e)<=0?(t(),function(){}):this._autoUpdate?Cn(R=SA.delay(t,0|e),R.stop):((n={remaining:e,action:function(){}}).action=function(){Jn.remove(i._scheduled,n),t()},this._scheduled.push(n),function(){Jn.remove(i._scheduled,n)})},muteGroup:function(e,t){this._renderer.muteGroup(e,t=null==t?!0:t)},calculateTime:function(e){var t=e.start,n=e.currentTime,i=null!=n?n:0,s=e.signature,s=null!=s?s:{beat:4,measure:4},a=60/e.bpm,s=a*s.beat*(4/s.measure),e=s*(null!=(n=e.quantize)?n:1),n=t.bar*s+t.beat*a+t.tick*(a*lp.tick);return 0<i&&(n+=e-i%e),n},calculatePos:function(e,t,n){n=null!=n?n:{beat:4,measure:4};var t=60/t,i=Math.round(e%t/(lp.tick*t)),s=Math.floor(e%(t*n.beat)/t),e=((0|i)==(1/lp.tick|0)&&(i=0,++s),Math.floor(e/(t*n.beat)));return{bar:null==e?0:e,beat:null==s?0:s,tick:null==i?0:i}},scheduleAction:function(t,e,n){function i(e){n(),s.triggerEvent({kind:e.kind,args:e,remaining:t-s._renderer.get_currentTime()})}var s=this,a=t-this._renderer.get_currentTime(),l=this._scheduledEvents.h[e.kind],l=null!=l?l:[];.1<a?(l.push({when:t,arguments:e,act:i}),this._scheduledEvents.h[e.kind]=l):i(e)},triggerEvent:function(e){var t=this;switch(e.kind){case"playSound":var n=nl.__cast(e.args,uA),i=this._renderer.getSoundDuration(n.id),s=gA.SoundPlaying(n.id,n.volume,i,n.instance);this.after(e.remaining,function(){t._eventHandler(s)}),n.loop||this.after(e.remaining+i,function(){t._eventHandler(gA.SoundStopped(n.id,n.instance))});break;case"stopSound":i=nl.__cast(e.args,_A);this._eventHandler(gA.SoundStopped(i.id,i.instance))}},__class__:lp},function(e,t){this.config=e,this.events=t}),tA=((i["hacksaw.sound.SoundConfig"]=eA).__name__="hacksaw.sound.SoundConfig",eA.prototype={__class__:eA},(i["hacksaw.sound.SequenceItem"]=rp).__name__="hacksaw.sound.SequenceItem",rp.prototype={__class__:rp},(i["hacksaw.sound.SequencePattern"]=op).__name__="hacksaw.sound.SequencePattern",op.prototype={__class__:op},(i["hacksaw.sound.DuckConfig"]=up).__name__="hacksaw.sound.DuckConfig",up.prototype={__class__:up},function(e,t,n,i){null==i&&(i=!0),this._enabled=!0,this._config=e;try{this._renderer=new iA(e.config.sounds,e.config.groups,t),this._sequencer=new lp(this._renderer,this._config.config.pools,n,i)}catch(e){CA.lastError=e,this._enabled=!1,t()}}),nA=((i["hacksaw.sound.SoundEngine"]=tA).__name__="hacksaw.sound.SoundEngine",tA.prototype={update:function(e){var t=this._sequencer;null!=t&&t.update(e)},handleEvent:function(z,h){var c=this;if(this._enabled&&null!=this._renderer.get_currentTime())try{for(var e=z.actions.slice(),Q=(e.sort(function(e,t){return"playEnvelope"==e.type?1:-1}),null==il.find(e,function(e){return"playEnvelope"!=e.type})),t=il.find(e,function(e){return"playSound"==e.type}),n=il.find(e,function(e){return"playSequence"==e.type}),i=il.find(e,function(e){return"playPool"==e.type}),s=0;s<e.length;){var a=[e[s]];if(++s,null!=a[0].id){var l,r,o,u,V,O,_=[null!=a[0].params?a[0].params:{}];switch(a[0].type){case"addFilter":var W=this.translateParams(_[0].targetType,h),N=this.translateParams(_[0].target,h),G=this.translateParams(_[0].type,h),U=this.translateParams(_[0].frequency,h),L=this.translateParams(_[0].gain,h),j=this.translateParams(_[0].q,h);this._renderer.addFilter(new aA(W,N,U,j,L,G));break;case"disableAnalyser":this._renderer.disableUpdates(_[0].group);break;case"enableAnalyser":null!=_[0].group&&this._renderer.enableUpdates(_[0].group);break;case"muteGroup":this._sequencer.muteGroup(a[0].id,!0);break;case"playEnvelope":var d=[this.translateParams(_[0].targetType,h)],p=[this.translateParams(_[0].targets,h,!1)],H=(null==d[0]&&(null!=t?(d[0]="sound",p[0]=[t.id+":null"]):null!=n?(d[0]="sequence",p[0]=[n.id]):null!=i&&(d[0]="pool",p[0]=[i.id])),((e,t,n,i)=>function(){c._sequencer.playEnvelope(new lA(c.translateParams(i[0].id,h),n[0].points.map(function(e){var t=c.translateParams(e.pos,h),e=c.translateParams(e.val,h);if("string"==typeof t){var n=el.string(t);if(null==n||"string"!=typeof n)o=null;else{for(var i=n.split("."),s=new Array(i.length),a=0,l=i.length;a<l;){var r=a++;s[r]=el.parseInt(i[r])}for(var o,a=[],l=0;l<s.length;){var u=s[l];++l,0<=u&&a.push(u)}o=3!=a.length||be.has(a,null)?null:{bar:n=null==(n=a[0])?0:n,beat:n=null==(n=a[1])?0:n,tick:n=null==(n=a[2])?0:n}}}else o=null;return{pos:null!=o?null:t,beatPos:o,val:e}}),e[0],t[0],c.translateParams(n[0].param,h),null,null,null,null))})(p,d,_,a));null!=d[0]&&(Q?H():SA.delay(H,100));break;case"playPool":var m=this.translateParams(a[0].id,h);if(null!=m&&"none"!=m){for(var Y=this.translateParams(_[0].start,h),Z=this.translateParams(_[0].maxrate,h),g=this.getPoolById(m),X=nl.__cast(this.translateParams(_[0].volume,h),w1),f=nl.__cast(this.translateParams(_[0].pan,h),w1),A=nl.__cast(this.translateParams(_[0].pitch,h),A1),x=nl.__cast(this.translateParams(_[0].delay,h),w1),w=0,q=g.items;w<q.length;){var y,b,v=q[w],K=(++w,v.params=null!=v.params?v.params:{},v.type=(null!=v.type?v:g).type,b=null!=v.params.volume?(y=nl.__cast(X,w1),nl.__cast(this.translateParams(v.params.volume,h),w1)*(null==y?1:y)):X,nl.__cast(this.translateParams(v.params.pan,h),w1)),C=null==K?0:K,J=(null==f?0:f)*(null==f?0:f),S=(0!=C?Math.sqrt(C*C):0)+(f<0?-J:J),$=isNaN(S)?0:S<-1?-1:1<S?1:S,ee=null!=v.params.pitch?nl.__cast(this.translateParams(v.params.pitch,h),A1)+(null==A?0:A):A,te=null!=v.params.delay?nl.__cast(this.translateParams(v.params.delay,h),w1)+(null==x?0:x):x;null!=b&&(v.params.volume=b),null!=$&&(v.params.pan=$),null!=ee&&(v.params.pitch=ee),null!=te&&(v.params.delay=te)}this._sequencer.playPool(new rA(m,Y,Z,g.items,null,null))}break;case"playSequence":null!=a[0].id&&null!=(l=this.getSequenceById(this.translateParams(a[0].id,h),h))&&(r=this.translateParams(_[0].pattern,h,!1),o=this.translateParams(_[0].start,h),u=this.translateParams(_[0].delay,h),V=this.translateParams(_[0].quantize,h),O=this.translateParams(_[0].restart,h),this._sequencer.playSequence(new oA(l.id,l,null,r,o,u,V,null,O,null)));break;case"playSound":var k=this.translateParams(_[0].start,h);if("string"==typeof k){var M=el.string(k);if(null==M||"string"!=typeof M)D=null;else{for(var I=M.split("."),B=new Array(I.length),ne=0,ie=I.length;ne<ie;){var se=ne++;B[se]=el.parseInt(I[se])}for(var T,E,F,D,R=[],P=0;P<B.length;){var ae=B[P];++P,0<=ae&&R.push(ae)}D=3!=R.length||be.has(R,null)?null:{bar:T=null==(T=R[0])?0:T,beat:E=null==(E=R[1])?0:E,tick:F=null==(F=R[2])?0:F}}}else D=null;var le=this._sequencer,re=this.translateParams(a[0].id,h),oe=this.translateParams(_[0].instance,h),ue=this.translateParams(_[0].volume,h),he=this.translateParams(_[0].pan,h),ce=this.translateParams(_[0].duration,h),_e=this.translateParams(_[0].loop,h),de=this.translateParams(_[0].loopStart,h),pe=this.translateParams(_[0].loopStartTime,h),me=this.translateParams(_[0].playStart,h),ge=this.translateParams(_[0].playStartTime,h),fe=this.translateParams(_[0].maxrate,h),Ae=this.translateParams(_[0].delay,h);le.playSound(new uA(re,oe,ue,he,this.translateParams(_[0].pitch,h),null,_e,de,pe,me,ge,null,Ae,k,this.translateParams(_[0].end,h),fe,ce,this.translateParams(_[0].quantize,h),null,null!=D,null,null));break;case"resetPool":this._sequencer.resetPool(this.translateParams(a[0].id,h));break;case"setGroupVolume":this._renderer.setGroupVolume(new hA(this.translateParams(a[0].id,h),this.translateParams(_[0].volume,h),null,null));break;case"stopSequence":var xe=this.translateParams(a[0].id,h),we=this.translateParams(_[0].stop,h),ye=this.translateParams(_[0].quantize,h);this._sequencer.stopSequence(new cA(xe,null,we,null,ye,null),!0);break;case"stopSound":this._sequencer.stopSound(new _A(this.translateParams(a[0].id,h),this.translateParams(_[0].instance,h),null,this.translateParams(_[0].delay,h),null,null));break;case"unmuteGroup":this._sequencer.muteGroup(a[0].id,!1)}}}}catch(s){CA.lastError=s}},pause:function(){var e=this._renderer;null!=e&&e.pause()},resume:function(){var e=this._renderer;null!=e&&e.resume()},getPoolById:function(t){return JSON.parse(JSON.stringify(il.find(this._config.config.pools,function(e){return e.id==t})))},getSequenceById:function(e,t){for(var n=this._config.config.sequences,i=new Array(n.length),s=0,a=n.length;s<a;)i[m=s++]=JSON.parse(JSON.stringify(n[m]));for(s=0,a=i.length;s<a;){var l=i[s++];if(l.id==e){for(var r=new rp(e,[],l.quantize,l.returnQuantize,null,null,l.bpm,l.signature,this.translateParams(l.start,t)),o=0,u=l.patterns.length;o<u;){var h=o++,c=l.patterns[h],_=r.patterns,d=this.translateParams(c.id,t),z=this.translateParams(c.actions,t,!1),Q=this.translateParams(c.duration,t),p=this.translateParams(c.start,t);if(null==p||"string"!=typeof p)A=null;else{for(var m,n=p.split("."),g=new Array(n.length),f=0,V=n.length;f<V;)g[m=f++]=el.parseInt(n[m]);for(var A,x=[],w=0;w<g.length;){var y=g[w];++w,0<=y&&x.push(y)}A=3!=x.length||be.has(x,null)?null:{bar:p=null==(p=x[0])?0:p,beat:p=null==(p=x[1])?0:p,tick:p=null==(p=x[2])?0:p}}_[h]=new op(d,z,c.progress,this.translateParams(c.bpm,t),Q,A);for(var b=0,O=c.actions.length;b<O;){for(var v=b++,C=c.actions[v],S=this.translateParams(C.params,t),k=0,M=X.fields(S);k<M.length;){var I=M[k],B=(++k,X.field(S,I)),T=(S[I]=this.translateParams(B,t,!1),B);if(null!=T&&T instanceof Array)for(var E=0;E<T.length;){var F=T[E];if(++E,"string"!=typeof F&&("number"!=typeof F||(0|F)!==F)&&"number"!=typeof F)for(var D=0,R=X.fields(F);D<R.length;){var P=R[D];++D,F[P]=this.translateParams(X.field(F,P),t,!1)}}}r.patterns[h].actions[v]={id:this.translateParams(C.id,t,!1),type:C.type,params:S}}}return r}}return null},translateParams:function(e,t,n){null==n&&(n=!0);var i=this;if(null==t)return n?nA.getRandomValue(e):e;var s=X.getProperty(e,"arg");if(null==s)return n?nA.getRandomValue(e):e;var a,l,r=X.getProperty(t,s),s=JSON.parse(JSON.stringify(e)),o=X.getProperty(s,"mapRange"),e=X.getProperty(s,"map"),u=X.getProperty(s,"source"),s=this.translateParams(X.getProperty(s,"target"),t,n);if(null!=u&&null!=s)return a=null!=u?this.translateParams(u.min,t,n):null,u=null!=u?this.translateParams(u.max,t,n):null,l=null!=s?this.translateParams(s.min,t,n):null,s=null!=s?this.translateParams(s.max,t,n):null,r/(u-a)*(s-l)+l;if(null==o)return null!=e?null!=(u=il.find(e,function(e){return i.translateParams(e.source,t,n)==r}))?this.translateParams(u.target,t,n):null:n?nA.getRandomValue(r):r;for(var h=[],c=0;c<o.length;){var _=o[c];++c;var d=_.range[1],p=parseFloat(_.range[0]),d=null==d?null:parseFloat(d);p<=r&&r<=(null!=d?d:nl.__cast(r,w1))&&h.push(_)}return 1<=h.length?this.translateParams(h[0].target,t,n):null},__class__:tA},function(){}),iA=((i["hacksaw.sound.Utils"]=nA).__name__="hacksaw.sound.Utils",nA.getRandomValue=function(e){for(;;){if(e instanceof Array){var t=e,t=t[Math.floor(Math.random()*t.length)];if(nA.hasArrayChild(t)){e=t;continue}return t instanceof Array?nA.randomRange(t[0],t[1]):t}return e}},nA.shuffleArray=function(e){for(var t=e.length-1;0<t;){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i,--t}},nA.hasArrayChild=function(e){return null!=il.find(e,function(e){return e instanceof Array})},nA.randomRange=function(e,t){return Math.random()*(t-e)+e},function(e,t,n){if(this._playingEnvelopesAt=new at,this._groupMutes=new at,this._groupVolumes=new at,this._gain=1,this._enabled=!0,this._groups=new at,this._buffers=new at,this._sounds=new at,this._playing=new at,this._stereo=!0,this._updateTrigger=s1.trigger(),null==e||0==e.length)this._enabled=!1,n();else{for(var i=0;i<e.length;)if(null==e[i++].data)return this._enabled=!1,void n();this._onDecoded=n,this._ctx=this.createAudioContext(),this._stereo=null!=this._ctx.createStereoPanner,this._meters=new at;for(i=0;i<e.length;){var s=e[i];++i,this._sounds.h[s.id]=s}this.setupGroups(t),this.decodeSounds(e);var t=window.hasOwnProperty("ontouchstart"),a=window.hasOwnProperty("onclick");this._unlocked=!("suspended"==this._ctx.state&&(t||a)),this.update=this._updateTrigger,this._unlocked||this.unlockAudio()}}),sA=((i["hacksaw.sound.WebAudioRenderer"]=iA).__name__="hacksaw.sound.WebAudioRenderer",iA.__interfaces__=[ap],iA.prototype={playSound:function(t){var n,e,i,s,a,l,r,o,u=this;this._enabled&&(n=this._ctx.createBufferSource(),e=this._ctx.createGain(),i=this._stereo?this._ctx.createStereoPanner():null,r=t.volume,null!=(s=this._sounds.h[t.id]))&&(s=this._groups.h[s.group],n.buffer=this._buffers.h[t.id],(o=null!=t.pitch&&(a=t.pitch,isFinite(a)))&&null!=n.detune&&n.detune.setValueAtTime(t.pitch,this._ctx.currentTime),this._stereo?(n.connect(i),i.connect(e),l=i.pan,o=null!=t.pan&&(a=t.pan,isFinite(a)),l.setValueAtTime(o?t.pan:0,this._ctx.currentTime)):n.connect(e),a=null!=(o=s.pan)?o:s.gain,e.connect(a),e.gain.setValueAtTime(null!=r?r:1,this._ctx.currentTime),null!=n.detune&&null!=t.pitch&&(n.detune.value=t.pitch),n.loop=!(0<t.loopStartTime||t.sync&&t.sequenced)&&t.loop,0<t.duration?n.start(t.when,t.playStartTime,t.duration):n.start(t.when,t.playStartTime),o=""+t.id+(null!=(r=null==(l=t.instance)?null:":"+l)?r:""),n.onended=function(e){n.loop||u.cleanBuffer(n),null!=t.onComplete&&t.onComplete()},this._playing.h[o]={sound:n,gain:e,pan:i,target:a})},stopSound:function(e){for(var t=[],n=this._playing.h,i=Object.keys(n),s=i.length,a=0;a<s;){var l=(r=i[a++]).split(":");e.id!=l[0]||null!=e.instance&&e.instance!=l[1]||t.push(n[r])}for(var r=e.id+":"+e.instance,o=0;o<t.length;){var u=t[o++].sound,h=this._playing,h=(Object.prototype.hasOwnProperty.call(h.h,r)&&delete h.h[r],0<e.when?e.when:0);try{u.stop(h)}catch(e){CA.lastError=e}this.cleanBuffer(u)}},setGroupVolume:function(e){var t,n;this._enabled&&(t=this._groups.h[e.id].gain,this._groupMutes.h[e.id]?this._groupVolumes.h[e.id]=t.gain.value:(n=e.volume,isFinite(n)&&t.gain.setValueAtTime(e.volume,this._ctx.currentTime)))},muteGroup:function(e,t){var n,i=this._groups.h[e].gain;(t=null==t?!0:t)?(this._groupVolumes.h[e]=i.gain.value,i.gain.setValueAtTime(0,this._ctx.currentTime)):(n=this._groupVolumes.h[e],isFinite(n)&&i.gain.setValueAtTime(n,this._ctx.currentTime)),this._groupMutes.h[e]=t},addFilter:function(e){var t,n,i;switch(e.targetType){case"bus":t=this._groups.h[e.target];break;case"sound":t=this._playing.h[e.target]}null!=t&&(n=null==t.filter?(n=this._ctx.createBiquadFilter(),t.pan.disconnect(t.gain),t.pan.connect(n),n.connect(t.gain),(t.filter=n).type=e.type,n):t.filter,null!=(i=e.frequency)&&n.frequency.setValueAtTime(i,this._ctx.currentTime),null!=(i=e.gain)&&(n.gain.value=i),null!=(i=e.q))&&(n.Q.value=i)},playEnvelope:function(r){var o=this;if("sequence"==r.targetType){for(var e=[],t=Object.keys(this._playing.h),n=t.length,i=0;i<n;)for(var s=t[i++],a=0,l=r.targets;a<l.length;)-1!=s.indexOf(l[a++])&&e.push(s);r.targets=e,r.targetType="sound"}for(a=0,l=r.targets;a<l.length;){var u=l[a],h=(++a,r.targetType),c=(null!=h&&"bus"==h?this._groups:this._playing).h[u];if(null!=c){r.points.sort(function(e,t){return e.pos>t.pos?1:-1});for(var _=function(e,t){for(var n=r.id+":"+r.param,i=(null==o._playingEnvelopesAt.h[n]&&(o._playingEnvelopesAt.h[n]=[]),o._playingEnvelopesAt.h[n]),s=[],a=0;a<i.length;){var l=i[a];++a,t<l&&s.push(l)}return 0<s.length&&e.cancelScheduledValues(0),i.length=0,i.push(t)},d=0,p=r.points;d<p.length;){var m=p[d],g=(++d,0<m.pos?m.pos:0);switch(r.param){case"filterFrequency":var f=c.filter;null!=f&&(A=null!=(A=m.val)?A:f.frequency.value,_(f.frequency,g),f.frequency.exponentialRampToValueAtTime(A,g));break;case"filterGain":var A,f=c.filter;null!=f&&(w=null!=(A=m.val)?A:f.gain.value,_(f.gain,g),f.gain.linearRampToValueAtTime(w,g));break;case"filterQ":var x,w=c.filter;null!=w&&(x=null!=(x=m.val)?x:w.Q.value,_(w.Q,g),w.Q.linearRampToValueAtTime(x,g));break;case"pan":this._stereo&&(x=c.pan,y=null!=m.val?m.val:x.pan.value,isFinite(y))&&(_(x.pan,g),x.pan.linearRampToValueAtTime(y,g));break;case"pitch":if("sound"==r.targetType){var y=c.sound;if(null==y.detune)return;var b=null!=m.val?m.val:y.detune.value;isFinite(b)&&(_(y.detune,g),y.detune.linearRampToValueAtTime(b,g))}break;case"volume":var b=c.gain,v=null!=m.val?m.val:b.gain.value;this._groupMutes.h[u]?this._groupVolumes.h[u]=v:isFinite(v)&&(_(b.gain,g),b.gain.linearRampToValueAtTime(v,g))}}}}},pause:function(){null!=this._ctx&&(this._ctx.suspend(),this._gain=this._masterGain.gain.value,this._masterGain.gain.value=0)},activateAudioContext:function(){this._masterGain.gain.value=this._gain,this._ctx.resume()},handleTouch:function(e){this.activateAudioContext(),this.removeTouchHandler()},removeTouchHandler:function(){window.document.removeEventListener("touchstart",Cn(this,this.handleTouch),!0)},resume:function(){null!=this._ctx&&(this.isiOS()?window.document.addEventListener("touchstart",Cn(this,this.handleTouch),!0):this.activateAudioContext())},getSoundDuration:function(e){e=this._buffers.h[e];return null!=e?e.duration:0},getPlaying:function(){return this._playing},enableUpdates:function(e){this.startAnalyser(e)},disableUpdates:function(e){e=this._meters.h[e];null!=e&&e.stop()},get_currentTime:function(){return null==this._ctx?null:this._ctx.currentTime},setupGroups:function(e){e.push({id:"master",dest:"ctx"});for(var t=0;t<e.length;){var n=e[t++],i=this._ctx.createGain(),s=this._stereo?this._ctx.createStereoPanner():null;this._groups.h[n.id]={gain:i,pan:s,target:null}}for(t=0;t<e.length;){var n=e[t],a=(++t,this._groups.h[n.id]),l=(null!=a.pan&&(a.pan.connect(a.gain),l=n.pan,a.pan.pan.setValueAtTime(null!=l?l:0,this._ctx.currentTime)),n.vol),r=(a.gain.gain.value=null!=l?l:1,n.dest);if(null==r)var o=this._groups.h.master.pan,u=null!=o?o:this._groups.h.master.gain;else switch(r){case"ctx":u=this._ctx.destination;break;case"master":var h=this._groups.h.master.pan;u=null!=h?h:this._groups.h.master.gain;break;default:h=this._groups.h[n.dest].pan;u=null!=h?h:this._groups.h[n.dest].gain}for(var c=[],_=0;_<e.length;){var d=e[_],p=(++_,d.duck);(null!=p?p.target:null)==n.id&&c.push(d)}if(0==c.length)a.target=u,a.gain.connect(u);else{for(var m=new Array(c.length),g=0,f=c.length;g<f;){var A=g++,x=c[A],w=new up(x.duck.target,null,null,null,null,null),y=x.duck.attack,b=x.duck.release,v=x.duck.ratio,C=x.duck.threshold,S=x.duck.knee;m[A]={config:new up(x.duck.target,null!=y?y:w.attack,null!=b?b:w.release,null!=v?v:w.ratio,null!=C?C:w.threshold,null!=S?S:w.knee),key:this._groups.h[x.id]}}for(var k=a.gain,M=[],I=0,B=m.length;I<B;){var T=m[I++],T=new sA(this._ctx,T.key.gain,k,T.config),k=T.output;M.push(T)}M[M.length-1].output.connect(u)}}},decodeSounds:function(n){for(var i=this,s=0,e=0;e<n.length;){var t=[n[e]],t=(++e,this._ctx.decodeAudioData(t[0].data.b.bufferValue,(t=>function(e){i._buffers.h[t[0].id]=e,s+=1,i._enabled&&s==n.length&&i._onDecoded()})(t)));null!=t&&t.catch(function(e){i._ctx=null,i._enabled=!1,i._onDecoded()})}},createAudioContext:function(){if(null==this._ctx){try{this._ctx=new AudioContext}catch(e){CA.lastError=e;try{this._ctx=new window.webkitAudioContext}catch(e){this._ctx=null}}null!=this._ctx&&(this._masterGain=this._ctx.createGain(),this._masterGain.connect(this._ctx.destination))}else this._ctx.resume();return this._ctx},unlockAudio:function(){var t,n=this,i=window.document.body,e=t=function(){null!=n._ctx&&n._ctx.resume().then(function(e){return i.removeEventListener("touchstart",t),i.removeEventListener("touchend",t),i.removeEventListener("click",t),i.removeEventListener("keydown",t),n._unlocked=!0},function(e){return i.removeEventListener("touchstart",t),i.removeEventListener("touchend",t),i.removeEventListener("click",t),i.removeEventListener("keydown",t),!0})};null!=i&&(i.addEventListener("touchstart",e,!1),i.addEventListener("touchend",e,!1),i.addEventListener("click",e,!1),i.addEventListener("keydown",e,!1))},startAnalyser:function(n){var i,s,a,l,r,o=this,e=this._groups.h[n],e=null!=e?e.gain:null;null!=e&&((i=this._ctx.createAnalyser()).fftSize=512,s=new Float32Array(i.frequencyBinCount),i.getFloatTimeDomainData(s),e.connect(i),e=Needles.LoudnessMeter({source:e,workerUri:"vendor/needles-worker.js"}),this._meters.h[n]=e,a=[],l=new mA(0,0,0),r=new mA(0,0,0),e.on("dataavailable",function(e){i.getFloatTimeDomainData(s);var t=s.reduce(function(e,t){return t<e?e:t},0);switch(e.data.mode){case"integrated":r.integrated=e.data.value;break;case"momentary":r.momentary=e.data.value;break;case"short-term":r.shortterm=e.data.value}l.momentary=t,a.push(t),60==a.length&&a.shift(),l.shortterm=il.reduce(a,function(e,t){return Math.max(e,t)},0),l.integrated=Math.max(l.integrated,t),o._updateTrigger.handlers.invoke(new dA(n,new pA(l,r)))}),e.start())},cleanBuffer:function(e){if(null!=e&&(e.onended=null,e.disconnect(0),this.isiOS()))try{e.buffer=null!=this._scratchBuffer?this._scratchBuffer:e.buffer}catch(e){CA.lastError=e}},isiOS:function(e){return null==e&&(e=p.navigator.userAgent),new ot("(iPad|iPhone|iPod)","i").match(e)},__class__:iA,__properties__:{get_currentTime:"get_currentTime"}},function(e,t,n,i){this.input=n;i=this.createCompressor(e,i),t.connect(i),t=e.createGain(),i.connect(t),n=this.createProcessor(e,n,t,i);t.gain.setValueAtTime(0,e.currentTime),t.connect(e.destination),this.output=n}),aA=((i["hacksaw.sound.Ducker"]=sA).__name__="hacksaw.sound.Ducker",sA.prototype={createCompressor:function(e,t){e=e.createDynamicsCompressor();return e.threshold.value=t.threshold,e.knee.value=t.knee,e.ratio.value=t.ratio,e.attack.value=t.attack,e.release.value=t.release,e},createProcessor:function(n,e,t,i){var s=n.createGain(),e=(e.connect(s),n.createScriptProcessor(2048,2,2));return e.onaudioprocess=function(e){var t=Math.pow(10,i.reduction/20);isFinite(t)&&s.gain.setValueAtTime(t,n.currentTime)},e.connect(s),s},__class__:sA},function(e,t,n,i,s,a){this.targetType=e,this.target=t,this.frequency=n,this.q=i,this.gain=s,this.type=a}),lA=((i["hacksaw.sound.api.BiquadFilterArgs"]=aA).__name__="hacksaw.sound.api.BiquadFilterArgs",aA.prototype={__class__:aA},(i["hacksaw.sound.api.IActionArgs"]=hp).__name__="hacksaw.sound.api.IActionArgs",hp.__isInterface__=!0,hp.prototype={__class__:hp},function(e,t,n,i,s,a,l,r,o){this.kind="playEnvelope",this.when=null,this.quantize=null,this.instance=null,this.targetType=null,this.id=e,this.points=t,this.targets=n,null!=i&&(this.targetType=i),this.param=s,null!=a&&(this.instance=a),null!=l&&(this.quantize=l),null!=r&&(this.when=r),null!=o&&(this.kind=o)}),rA=((i["hacksaw.sound.api.PlayEnvelopeArgs"]=lA).__name__="hacksaw.sound.api.PlayEnvelopeArgs",lA.__interfaces__=[hp],lA.prototype={__class__:lA},function(e,t,n,i,s,a){this.kind="playPool",this.instance=null,this.items=null,this.maxrate=null,this.start=null,this.id=e,null!=t&&(this.start=t),null!=n&&(this.maxrate=n),null!=i&&(this.items=i),null!=s&&(this.instance=s),null!=a&&(this.kind=a)}),oA=((i["hacksaw.sound.api.PlayPoolArgs"]=rA).__name__="hacksaw.sound.api.PlayPoolArgs",rA.__interfaces__=[hp],rA.prototype={__class__:rA},function(e,t,n,i,s,a,l,r,o,u){this.kind="playSequence",this.restart=null,this.when=null,this.quantize=null,this.delay=null,this.start=null,this.patternId=null,this.instance=null,this.id=e,this.sequence=t,null!=n&&(this.instance=n),null!=i&&(this.patternId=i),null!=s&&(this.start=s),null!=a&&(this.delay=a),null!=l&&(this.quantize=l),null!=r&&(this.when=r),null!=o&&(this.restart=o),null!=u&&(this.kind=u)}),uA=((i["hacksaw.sound.api.PlaySequenceArgs"]=oA).__name__="hacksaw.sound.api.PlaySequenceArgs",oA.__interfaces__=[hp],oA.prototype={__class__:oA},function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p,m,g,f,A,x,w,y){this.kind="playSound",this.sequenced=!1,this.sync=!1,this.when=null,this.quantize=null,this.duration=null,this.maxrate=null,this.end=null,this.start=null,this.delay=0,this.onComplete=null,this.playStartTime=null,this.playStart=null,this.loopStartTime=null,this.loopStart=null,this.loop=!1,this.filter=0,this.pitch=0,this.pan=0,this.volume=1,this.instance=null,this.id=e,null!=t&&(this.instance=t),null!=n&&(this.volume=n),null!=i&&(this.pan=i),null!=s&&(this.pitch=s),null!=a&&(this.filter=a),null!=l&&(this.loop=l),null!=r&&(this.loopStart=r),null!=o&&(this.loopStartTime=o),null!=u&&(this.playStart=u),null!=h&&(this.playStartTime=h),null!=c&&(this.onComplete=c),null!=_&&(this.delay=_),null!=d&&(this.start=d),null!=p&&(this.end=p),null!=m&&(this.maxrate=m),null!=g&&(this.duration=g),null!=f&&(this.quantize=f),null!=A&&(this.when=A),null!=x&&(this.sync=x),null!=w&&(this.sequenced=w),null!=y&&(this.kind=y)}),hA=((i["hacksaw.sound.api.PlaySoundArgs"]=uA).__name__="hacksaw.sound.api.PlaySoundArgs",uA.__interfaces__=[hp],uA.prototype={__class__:uA},function(e,t,n,i){this.kind="setGroupVolume",this.instance=null,this.id=e,this.volume=t,null!=n&&(this.instance=n),null!=i&&(this.kind=i)}),cA=((i["hacksaw.sound.api.SetGroupVolumeArgs"]=hA).__name__="hacksaw.sound.api.SetGroupVolumeArgs",hA.__interfaces__=[hp],hA.prototype={__class__:hA},function(e,t,n,i,s,a){this.kind="stopSequence",this.quantize=null,this.when=null,this.stop=null,this.instance=null,this.id=e,null!=t&&(this.instance=t),null!=n&&(this.stop=n),null!=i&&(this.when=i),null!=s&&(this.quantize=s),null!=a&&(this.kind=a)}),_A=((i["hacksaw.sound.api.StopSequenceArgs"]=cA).__name__="hacksaw.sound.api.StopSequenceArgs",cA.__interfaces__=[hp],cA.prototype={__class__:cA},function(e,t,n,i,s,a){this.kind="stopSound",this.when=null,this.delay=0,this.start=null,this.instance=null,this.id=e,null!=t&&(this.instance=t),null!=n&&(this.start=n),null!=i&&(this.delay=i),null!=s&&(this.when=s),null!=a&&(this.kind=a)}),dA=((i["hacksaw.sound.api.StopSoundArgs"]=_A).__name__="hacksaw.sound.api.StopSoundArgs",_A.__interfaces__=[hp],_A.prototype={__class__:_A},function(e,t){this.group=e,this.levels=t}),pA=((i["hacksaw.sound.data.RendererUpdate"]=dA).__name__="hacksaw.sound.data.RendererUpdate",dA.prototype={__class__:dA},function(e,t){this.peak=e,this.lufs=t}),mA=((i["hacksaw.sound.data.LevelUpdate"]=pA).__name__="hacksaw.sound.data.LevelUpdate",pA.prototype={__class__:pA},function(e,t,n){this.shortterm=e,this.momentary=t,this.integrated=n}),gA=((i["hacksaw.sound.data.AnalysisWindow"]=mA).__name__="hacksaw.sound.data.AnalysisWindow",mA.prototype={__class__:mA},fe["hacksaw.sound.data.SoundMessageType"]={__ename__:!0,__constructs__:null,EnterBar:((R=function(e,t,n){return{_hx_index:0,bar:e,bpm:t,signature:n,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="EnterBar",R.__params__=["bar","bpm","signature"],R),SoundPlaying:((R=function(e,t,n,i){return{_hx_index:1,id:e,volume:t,duration:n,instance:i,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="SoundPlaying",R.__params__=["id","volume","duration","instance"],R),SoundStopped:((R=function(e,t){return{_hx_index:2,id:e,instance:t,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="SoundStopped",R.__params__=["id","instance"],R),SequencePlaying:((R=function(e,t,n,i,s){return{_hx_index:3,id:e,pattern:t,bpm:n,signature:i,instance:s,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="SequencePlaying",R.__params__=["id","pattern","bpm","signature","instance"],R),SequenceStopped:((R=function(e,t){return{_hx_index:4,id:e,instance:t,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="SequenceStopped",R.__params__=["id","instance"],R),PoolPlaying:((R=function(e,t,n,i){return{_hx_index:5,id:e,volume:t,duration:n,instance:i,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="PoolPlaying",R.__params__=["id","volume","duration","instance"],R),PoolStopped:((R=function(e,t){return{_hx_index:6,id:e,instance:t,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="PoolStopped",R.__params__=["id","instance"],R),PhraseStart:((R=function(e,t){return{_hx_index:7,bpm:e,signature:t,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="PhraseStart",R.__params__=["bpm","signature"],R),PhraseEnd:{_hx_name:"PhraseEnd",_hx_index:8,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o},FrameUpdate:((R=function(e,t){return{_hx_index:9,group:e,levels:t,__enum__:"hacksaw.sound.data.SoundMessageType",toString:o}})._hx_name="FrameUpdate",R.__params__=["group","levels"],R)}),fA=(gA.__constructs__=[gA.EnterBar,gA.SoundPlaying,gA.SoundStopped,gA.SequencePlaying,gA.SequenceStopped,gA.PoolPlaying,gA.PoolStopped,gA.PhraseStart,gA.PhraseEnd,gA.FrameUpdate],gA.__empty_constructs__=[gA.PhraseEnd],fe["haxe.StackItem"]={__ename__:!0,__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:o},Module:((R=function(e){return{_hx_index:1,m:e,__enum__:"haxe.StackItem",toString:o}})._hx_name="Module",R.__params__=["m"],R),FilePos:((R=function(e,t,n,i){return{_hx_index:2,s:e,file:t,line:n,column:i,__enum__:"haxe.StackItem",toString:o}})._hx_name="FilePos",R.__params__=["s","file","line","column"],R),Method:((R=function(e,t){return{_hx_index:3,classname:e,method:t,__enum__:"haxe.StackItem",toString:o}})._hx_name="Method",R.__params__=["classname","method"],R),LocalFunction:((R=function(e){return{_hx_index:4,v:e,__enum__:"haxe.StackItem",toString:o}})._hx_name="LocalFunction",R.__params__=["v"],R)}),AA=(fA.__constructs__=[fA.CFunction,fA.Module,fA.FilePos,fA.Method,fA.LocalFunction],fA.__empty_constructs__=[fA.CFunction],{}),tl=(AA.callStack=function(){return CA.toHaxe(CA.callStack())},AA.exceptionStack=function(e){null==e&&(e=!1);var t=CA.toHaxe(CA.exceptionStack());return e?t:AA.subtract(t,AA.callStack())},AA.toString=function(e){for(var t=new b,n=0,i=e;n<i.length;){var s=i[n++];t.b+="\nCalled from ",AA.itemToString(t,s)}return t.b},AA.subtract=function(e,t){for(var n=-1,i=-1;++i<e.length;){for(var s=0,a=t.length;s<a;)if(AA.equalItems(e[i],t[s++])){if(n<0&&(n=i),++i>=e.length)break}else n=-1;if(0<=n)break}return 0<=n?e.slice(0,n):e},AA.equalItems=function(e,t){if(null==e)return null==t;switch(e._hx_index){case 0:return null!=t&&0==t._hx_index;case 1:return null!=t&&1==t._hx_index&&e.m==t.m;case 2:return null!=t&&2==t._hx_index&&e.file==t.file&&e.line==t.line&&e.column==t.column&&AA.equalItems(e.s,t.s);case 3:return null!=t&&3==t._hx_index&&e.classname==t.classname&&e.method==t.method;case 4:return null!=t&&4==t._hx_index&&e.v==t.v}},AA.itemToString=function(e,t){switch(t._hx_index){case 0:e.b+="a C function";break;case 1:var n=t.m;e.b=(e.b+="module ")+(null==n?"null":""+n);break;case 2:var n=t.s,i=t.file,s=t.line,a=t.column;null!=n&&(AA.itemToString(e,n),e.b+=" ("),e.b=(e.b+=null==i?"null":""+i)+" line ",e.b+=null==s?"null":""+s,null!=a&&(e.b=(e.b+=" column ")+(null==a?"null":""+a)),null!=n&&(e.b+=")");break;case 3:n=t.classname,i=t.method;e.b=(e.b+=el.string(null==n?"<unknown>":n))+".",e.b+=null==i?"null":""+i;break;case 4:n=t.v;e.b=(e.b+="local function #")+(null==n?"null":""+n)}},(i["haxe.EntryPoint"]=cp).__name__="haxe.EntryPoint",cp.processEvents=function(){for(;;){var e=cp.pending.shift();if(null==e)break;e()}var t=vA.tick();return vA.hasEvents()||0!=cp.threadCount?t:-1},cp.run=function(){var e,t=cp.processEvents();"undefined"!=typeof window&&null!=(e=(e=window).requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame)?e(cp.run):0<=t&&setTimeout(cp.run,1e3*t)},function(e,t,n){Error.call(this,e),this.message=e,this.__previousException=t,this.__nativeException=null!=n?n:this,this.__skipStack=0;e=Error.prepareStackTrace;if(Error.prepareStackTrace=function(e){return e.stack},n instanceof Error)this.stack=n.stack;else{t=null;if(Error.captureStackTrace)Error.captureStackTrace(this,tl),t=this;else if(void 0===(t=new Error).stack){try{throw t}catch(e){}this.__skipStack++}this.stack=t.stack}Error.prepareStackTrace=e}),xA=((i["haxe.Exception"]=tl).__name__="haxe.Exception",tl.caught=function(e){return e instanceof tl?e:e instanceof Error?new tl(e.message,null,e):new MA(e,null,e)},tl.thrown=function(e){return e instanceof tl?e.get_native():e instanceof Error?e:((e=new MA(e)).__skipStack++,e)},tl.__super__=Error,tl.prototype=e(Error.prototype,{unwrap:function(){return this.__nativeException},toString:function(){return this.get_message()},__shiftStack:function(){this.__skipStack++},get_message:function(){return this.message},get_native:function(){return this.__nativeException},get_stack:function(){var e,t=this.__exceptionStack;return null==t?(e=CA.toHaxe(CA.normalize(this.stack),this.__skipStack),this.setProperty("__exceptionStack",e),e):t},setProperty:function(t,n){try{Object.defineProperty(this,t,{value:n})}catch(e){this[t]=n}},__class__:tl,__properties__:{get_native:"get_native",get_stack:"get_stack",get_message:"get_message"}}),{}),wA=(xA.ucompare=function(e,t){return e<0?t<0?~t-~e|0:1:t<0?-1:e-t|0},{}),yA=(wA.toString=function(e){if(0==(l=e).high&&0==l.low)return"0";for(var t="",e=!1,n=(l.high<0&&(e=!0),new yA(0,10));0!=l.high||0!=l.low;)var i,s,a=wA.divMod(l,n),l=a.modulus.high<0?(t=(1+~a.modulus.low|0)+t,i=~(s=a.quotient).high,0==(s=1+~s.low|0)&&(++i,i|=0),new yA(i,s)):(t=a.modulus.low+t,a.quotient);return t=e?"-"+t:t},wA.divMod=function(e,t){if(0==t.high)switch(t.low){case 0:throw tl.thrown("divide by zero");case 1:return{quotient:new yA(e.high,e.low),modulus:new yA(0,0)}}var n=e.high<0!=t.high<0,i=e.high<0?(s=~e.high,0==(a=1+~e.low|0)&&(++s,s|=0),new yA(s,a)):new yA(e.high,e.low);t.high<0&&(s=~t.high,0==(a=1+~t.low|0)&&(++s,s|=0),t=new yA(s,a));for(var s,a,l=new yA(0,0),r=new yA(0,1);!(t.high<0);){var o,u=0!=(o=xA.ucompare(t.high,i.high))?o:xA.ucompare(t.low,i.low);if(t=new yA(t.high<<1|t.low>>>31,t.low<<1),r=new yA(r.high<<1|r.low>>>31,r.low<<1),0<=u)break}for(;0!=r.high||0!=r.low;)0<=(0!=(o=xA.ucompare(i.high,t.high))?o:xA.ucompare(i.low,t.low))&&(l=new yA(l.high|r.high,l.low|r.low),s=i.high-t.high|0,xA.ucompare(i.low,t.low)<0&&(--s,s|=0),i=new yA(s,i.low-t.low|0)),r=new yA(r.high>>>1,r.high<<31|r.low>>>1),t=new yA(t.high>>>1,t.high<<31|t.low>>>1);return n&&(s=~l.high,0==(a=1+~l.low|0)&&(++s,s|=0),l=new yA(s,a)),e.high<0&&(s=~i.high,0==(a=1+~i.low|0)&&(++s,s|=0),i=new yA(s,a)),{quotient:l,modulus:i}},function(e,t){this.high=e,this.low=t}),bA=((i["haxe._Int64.___Int64"]=yA).__name__="haxe._Int64.___Int64",yA.prototype={__class__:yA},function(){}),vA=((i["haxe.Int64Helper"]=bA).__name__="haxe.Int64Helper",bA.parseString=function(e){for(var t=new yA(0,0),n=new yA(0,1),i=!1,s=Ae.trim(e),a=("-"==s.charAt(0)&&(i=!0,s=s.substring(1,s.length)),s.length),l=0;l<a;){var r=Jn.cca(s,a-1-l++)-48;if(r<0||9<r)throw tl.thrown("NumberFormatError");if(0!=r){var o=r>>31;if(i){var u=65535&n.low,h=n.low>>>16,c=65535&r,_=r>>>16,d=xA._mul(u,c),c=xA._mul(h,c),u=xA._mul(u,_),h=(xA._mul(h,_)+(u>>>16)|0)+(c>>>16)|0,d=(u<<=16,xA.ucompare(_=d+u|0,u)<0&&(++h,h|=0),c<<=16,xA.ucompare(_=_+c|0,c)<0&&(++h,h|=0),h=h+(xA._mul(n.low,o)+xA._mul(n.high,r)|0)|0,_),u=t.high-h|0;if(xA.ucompare(t.low,d)<0&&(--u,u|=0),!((t=new yA(u,t.low-d|0)).high<0))throw tl.thrown("NumberFormatError: Underflow")}else{var c=65535&n.low,_=n.low>>>16,h=65535&r,u=r>>>16,d=xA._mul(c,h),p=xA._mul(_,h),m=xA._mul(c,u),g=(xA._mul(_,u)+(m>>>16)|0)+(p>>>16)|0,m=(m<<=16,xA.ucompare(f=d+m|0,m)<0&&(++g,g|=0),p<<=16,xA.ucompare(f=f+p|0,p)<0&&(++g,g|=0),g=g+(xA._mul(n.low,o)+xA._mul(n.high,r)|0)|0,t.high+g|0),p=t.low+f|0;if(xA.ucompare(p,t.low)<0&&(++m,m|=0),(t=new yA(m,p)).high<0)throw tl.thrown("NumberFormatError: Overflow")}}var o=65535&n.low,r=n.low>>>16,g=xA._mul(o,10),f=xA._mul(r,10),m=xA._mul(o,0),p=(xA._mul(r,0)+(m>>>16)|0)+(f>>>16)|0;m<<=16,xA.ucompare(r=g+m|0,m)<0&&(++p,p|=0),f<<=16,xA.ucompare(r=r+f|0,f)<0&&(++p,p|=0),p=p+(xA._mul(n.low,0)+xA._mul(n.high,10)|0)|0,n=new yA(p,r)}return t},bA.fromFloat=function(e){if(isNaN(e)||!isFinite(e))throw tl.thrown("Number is NaN or Infinite");e-=e%1;if(9007199254740991<e)throw tl.thrown("Conversion overflow");if(e<-9007199254740991)throw tl.thrown("Conversion underflow");for(var t=new yA(0,0),n=e<0,i=n?-e:e,s=0;1<=i;){var a,l,r=i%2;i/=2,1<=r&&(r=s,r=0==(r&=63)?new yA(0,1):r<32?new yA(0<<r|1>>>32-r,1<<r):new yA(1<<r-32,0),a=t.high+r.high|0,l=t.low+r.low|0,xA.ucompare(l,t.low)<0&&(++a,a|=0),t=new yA(a,l)),++s}return n&&(a=~t.high,0==(l=1+~t.low|0)&&(++a,a|=0),t=new yA(a,l)),t},(i["haxe.Log"]=_p).__name__="haxe.Log",_p.formatOutput=function(e,t){var n=el.string(e);if(null==t)return n;e=t.fileName+":"+t.lineNumber;if(null!=t.customParams)for(var i=0,s=t.customParams;i<s.length;)n+=", "+el.string(s[i++]);return e+": "+n},_p.trace=function(e,t){e=_p.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(e)},(i["haxe.MainEvent"]=dp).__name__="haxe.MainEvent",dp.prototype={__class__:dp},function(){}),CA=((i["haxe.MainLoop"]=vA).__name__="haxe.MainLoop",vA.pending=null,vA.hasEvents=function(){for(var e=vA.pending;null!=e;){if(e.isBlocking)return!0;e=e.next}return!1},vA.add=function(e,t){if(null==t&&(t=0),null==e)throw tl.thrown("Event function is null");e=new dp(e,t),t=vA.pending;return null!=t&&(t.prev=e),e.next=t,vA.pending=e},vA.sortEvents=function(){var e=vA.pending;if(null!=e){for(var t,n,i,s,a=1,l=0,r=0;;){for(n=e,s=e=null,t=0;null!=n;){++t;for(var o=n,l=0,u=0,h=a;u<h&&(++u,++l,null!=(o=o.next)););for(r=a;0<l||0<r&&null!=o;)0!=l&&(0==r||null==o||n.priority>o.priority||n.priority==o.priority&&n.nextRun<=o.nextRun)?(n=(i=n).next,--l):(o=(i=o).next,--r),null!=s?s.next=i:e=i,i.prev=s,s=i;n=o}if(s.next=null,t<=1)break;a*=2}e.prev=null,vA.pending=e}},vA.tick=function(){vA.sortEvents();for(var e=vA.pending,t=Jn.now()/1e3,n=1e9;null!=e;){var i=e.next,s=e.nextRun-t;s<=0?(n=0,null!=e.f&&e.f()):s<n&&(n=s),e=i}return n},function(){}),SA=((i["haxe.NativeStackTrace"]=CA).__name__="haxe.NativeStackTrace",CA.lastError=null,CA.wrapCallSite=null,CA.saveStack=function(e){CA.lastError=e},CA.callStack=function(){var e=new Error(""),t=CA.tryHaxeStack(e);if(void 0===t){try{throw e}catch(e){}t=e.stack}return CA.normalize(t,2)},CA.exceptionStack=function(){return CA.normalize(CA.tryHaxeStack(CA.lastError))},CA.toHaxe=function(e,t){if(null==t&&(t=0),null==e)return[];if("string"!=typeof e)return 0<t&&Array.isArray(e)?e.slice(t):e;for(var n=e.split("\n"),i=("Error"==n[0]&&n.shift(),[]),s=0,a=n.length;s<a;){var l,r,o,u,h,c=s++;c<t||(null!=(h=(c=n[c]).match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/))?("$hxClasses"==(l=h[1].split("."))[0]&&l.shift(),r=l.pop(),o=h[2],u=el.parseInt(h[3]),h=el.parseInt(h[4]),i.push(fA.FilePos("Anonymous function"==r?fA.LocalFunction():"Global code"==r?null:fA.Method(l.join("."),r),o,u,h))):i.push(fA.Module(Ae.trim(c))))}return i},CA.tryHaxeStack=function(e){var t;return null==e?[]:(t=Error.prepareStackTrace,Error.prepareStackTrace=CA.prepareHxStackTrace,e=e.stack,Error.prepareStackTrace=t,e)},CA.prepareHxStackTrace=function(e,t){for(var n=[],i=0;i<t.length;){var s=t[i],a=(++i,null),l=(s=null!=CA.wrapCallSite?CA.wrapCallSite(s):s).getFunctionName(),r=(null!=l&&(a=0<=(r=l.lastIndexOf("."))?fA.Method(l.substring(0,r),l.substring(r+1)):fA.Method(null,l)),s.getFileName()),l=null==r?-1:r.indexOf("file:");null!=CA.wrapCallSite&&0<l&&(r=r.substring(l+6)),n.push(fA.FilePos(a,r,s.getLineNumber(),s.getColumnNumber()))}return n},CA.normalize=function(e,t){if(null==t&&(t=0),Array.isArray(e)&&0<t)return e.slice(t);if("string"!=typeof e)return e;switch(e.substring(0,6)){case"Error\n":case"Error:":++t}return CA.skipLines(e,t)},CA.skipLines=function(e,t,n){for(null==n&&(n=0);;){if(!(0<t))return e.substring(n);if((n=e.indexOf("\n",n))<0)return"";t=--t,n+=1}},(i["haxe.Resource"]=pp).__name__="haxe.Resource",pp.content=null,pp.getBytes=function(e){for(var t=0,n=pp.content;t<n.length;){var i=n[t];if(++t,i.name==e)return null!=i.str?IA.ofString(i.str):TA.decode(i.data)}return null},function(e){var t=this;this.id=setInterval(function(){t.run()},e)}),kA=((i["haxe.Timer"]=SA).__name__="haxe.Timer",SA.delay=function(e,t){var n=new SA(t);return n.run=function(){n.stop(),e()},n},SA.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:SA},(i["haxe._Unserializer.DefaultResolver"]=mp).__name__="haxe._Unserializer.DefaultResolver",mp.prototype={resolveClass:function(e){return i[e]},resolveEnum:function(e){return fe[e]},__class__:mp},function(e){this.buf=e,this.length=this.buf.length,this.pos=0,this.scache=[],this.cache=[];e=kA.DEFAULT_RESOLVER;null==e&&(e=new mp,kA.DEFAULT_RESOLVER=e),this.resolver=e}),MA=((i["haxe.Unserializer"]=kA).__name__="haxe.Unserializer",kA.initCodes=function(){for(var e=[],t=0,n=kA.BASE64.length;t<n;){var i=t++;e[kA.BASE64.charCodeAt(i)]=i}return e},kA.run=function(e){return new kA(e).unserialize()},kA.prototype={readDigits:function(){for(var e=0,t=!1,n=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45==i){if(this.pos!=n)break;t=!0}else{if(i<48||57<i)break;e=10*e+(i-48)}this.pos++}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(43<=t&&t<58||101==t||69==t))break;this.pos++}return parseFloat(Jn.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw tl.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw tl.thrown("Invalid object key");e[t]=this.unserialize()}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw tl.thrown("Invalid enum format");var n=this.readDigits();if(0==n)return U.createEnum(e,t);for(var i=[];0<n--;)i.push(this.unserialize());return U.createEnum(e,t,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize();if(null==(l=this.resolver.resolveClass(e)))throw tl.thrown("Class not found "+e);return l;case 66:e=this.unserialize();if(null==(_=this.resolver.resolveEnum(e)))throw tl.thrown("Enum not found "+e);return _;case 67:e=this.unserialize();if(null==(l=this.resolver.resolveClass(e)))throw tl.thrown("Class not found "+e);var t=Object.create(l.prototype);if(this.cache.push(t),t.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw tl.thrown("Invalid custom data");return t;case 77:var n=new VA;for(this.cache.push(n);104!=this.buf.charCodeAt(this.pos);)n.set(this.unserialize(),this.unserialize());return this.pos++,n;case 82:if((g=this.readDigits())<0||g>=this.scache.length)throw tl.thrown("Invalid string reference");return this.scache[g];case 97:var i=[];for(this.cache.push(i);;){if(104==(p=this.buf.charCodeAt(this.pos))){this.pos++;break}117==p?(this.pos++,g=this.readDigits(),i[i.length+g-1]=null):i.push(this.unserialize())}return i;case 98:n=new at;for(this.cache.push(n);104!=this.buf.charCodeAt(this.pos);){var s=this.unserialize(),a=this.unserialize();n.h[s]=a}return this.pos++,n;case 99:var e=this.unserialize();if(null==(l=this.resolver.resolveClass(e)))throw tl.thrown("Class not found "+e);t=Object.create(l.prototype);return this.cache.push(t),this.unserializeObject(t),t;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:e=this.unserialize();if(null==(I=this.resolver.resolveEnum(e)))throw tl.thrown("Enum not found "+e);this.pos++;for(var l=this.readDigits(),r=I.__constructs__,o=new Array(r.length),u=0,h=r.length;u<h;)o[m=u++]=r[m]._hx_name;var c=o[l];if(null==c)throw tl.thrown("Unknown enum index "+e+"@"+l);var _=this.unserializeEnum(I,c);return this.cache.push(_),_;case 107:return NaN;case 108:var d=new zA;for(this.cache.push(d);104!=this.buf.charCodeAt(this.pos);)d.add(this.unserialize());return this.pos++,d;case 109:return-1/0;case 110:return null;case 111:t={};return this.cache.push(t),this.unserializeObject(t),t;case 112:return 1/0;case 113:for(var n=new Je,p=(this.cache.push(n),this.buf.charCodeAt(this.pos++));58==p;){var m=this.readDigits(),a=this.unserialize();n.h[m]=a,p=this.buf.charCodeAt(this.pos++)}if(104!=p)throw tl.thrown("Invalid IntMap format");return n;case 114:var g;if((g=this.readDigits())<0||g>=this.cache.length)throw tl.thrown("Invalid reference");return this.cache[g];case 115:var f=this.readDigits(),A=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<f)throw tl.thrown("Invalid bytes length");var x=kA.CODES;null==x&&(x=kA.initCodes(),kA.CODES=x);for(var l=3&f,w=(m=this.pos)+(f-l),y=new IA(new ArrayBuffer(3*(f>>2)+(2<=l?l-1:0))),b=0;m<w;){var v=x[A.charCodeAt(m++)],C=x[A.charCodeAt(m++)],S=(y.b[b++]=v<<2|C>>4,x[A.charCodeAt(m++)]),k=(y.b[b++]=C<<4|S>>2,x[A.charCodeAt(m++)]);y.b[b++]=S<<6|k}return 2<=l&&(v=x[A.charCodeAt(m++)],C=x[A.charCodeAt(m++)],y.b[b++]=v<<2|C>>4,3==l)&&(S=x[A.charCodeAt(m++)],y.b[b++]=C<<4|S>>2),this.pos+=f,this.cache.push(y),y;case 116:return!0;case 118:var M;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(M=Jn.strDate(Jn.substr(this.buf,this.pos,19)),this.pos+=19):M=new Date(this.readFloat()),this.cache.push(M),M;case 119:var I,e=this.unserialize();if(null==(I=this.resolver.resolveEnum(e)))throw tl.thrown("Enum not found "+e);_=this.unserializeEnum(I,this.unserialize());return this.cache.push(_),_;case 120:throw tl.thrown(this.unserialize());case 121:f=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<f)throw tl.thrown("Invalid string length");s=Jn.substr(this.buf,this.pos,f);return this.pos+=f,s=decodeURIComponent(s.split("+").join(" ")),this.scache.push(s),s;case 122:return 0}throw this.pos--,tl.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:kA},function(e,t,n){tl.call(this,String(e),t,n),this.value=e,this.__skipStack++}),IA=((i["haxe.ValueException"]=MA).__name__="haxe.ValueException",MA.__super__=tl,MA.prototype=e(tl.prototype,{unwrap:function(){return this.value},__class__:MA}),(i["haxe.crypto.Adler32"]=gp).__name__="haxe.crypto.Adler32",gp.read=function(e){var t=new gp,n=e.readByte(),i=e.readByte();return t.a1=e.readByte()<<8|e.readByte(),t.a2=n<<8|i,t},gp.prototype={update:function(e,t,n){for(var i=this.a1,s=this.a2,a=t,l=t+n;a<l;)s=(s+(i=(i+e.b[a++])%65521))%65521;this.a1=i,this.a2=s},equals:function(e){return e.a1==this.a1&&e.a2==this.a2},__class__:gp},function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b}),BA=((i["haxe.io.Bytes"]=IA).__name__="haxe.io.Bytes",IA.ofString=function(e,t){if(t==BA.RawNative){for(var n=new Uint8Array(e.length<<1),i=0,s=e.length;i<s;){var a=i++,l=e.charCodeAt(a);n[a<<1]=255&l,n[a<<1|1]=l>>8}return new IA(n.buffer)}for(var r=[],a=0;a<e.length;)(l=55296<=(l=e.charCodeAt(a++))&&l<=56319?l-55232<<10|1023&e.charCodeAt(a++):l)<=127?r.push(l):(l<=2047?r.push(192|l>>6):(l<=65535?r.push(224|l>>12):(r.push(240|l>>18),r.push(128|l>>12&63)),r.push(128|l>>6&63)),r.push(128|63&l));return new IA(new Uint8Array(r).buffer)},IA.ofData=function(e){var t=e.hxBytes;return null!=t?t:new IA(e)},IA.prototype={blit:function(e,t,n,i){if(e<0||n<0||i<0||e+i>this.length||n+i>t.length)throw tl.thrown(XA.OutsideBounds);0==n&&i==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(n,n+i),e)},fill:function(e,t,n){for(var i=0;i<t;)++i,this.b[e++]=n},getFloat:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)},setFloat:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0)},getUInt16:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)},setUInt16:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setUint16(e,t,!0)},getInt32:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)},setInt32:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0)},getInt64:function(e){return new yA(this.getInt32(e+4),this.getInt32(e))},getString:function(e,t,n){if(e<0||t<0||e+t>this.length)throw tl.thrown(XA.OutsideBounds);null==n&&(n=BA.UTF8);var i,s,a="",l=this.b,r=e,o=e+t;switch(n._hx_index){case 0:for(;r<o;)if((u=l[r++])<128){if(0==u)break;a+=String.fromCodePoint(u)}else u<224?(i=(63&u)<<6|127&l[r++],a+=String.fromCodePoint(i)):u<240?(i=(31&u)<<12|(127&l[r++])<<6|127&l[r++],a+=String.fromCodePoint(i)):(s=(15&u)<<18|(127&l[r++])<<12|(127&l[r++])<<6|127&l[r++],a+=String.fromCodePoint(s));break;case 1:for(;r<o;){var u=l[r++]|l[r++]<<8;a+=String.fromCodePoint(u)}}return a},toString:function(){return this.getString(0,this.length)},__class__:IA},fe["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:o},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:o}}),TA=(BA.__constructs__=[BA.UTF8,BA.RawNative],BA.__empty_constructs__=[BA.UTF8,BA.RawNative],function(){}),EA=((i["haxe.crypto.Base64"]=TA).__name__="haxe.crypto.Base64",TA.encode=function(e,t){null==t&&(t=!0);var n=new EA(TA.BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:n+="==";break;case 2:n+="="}return n},TA.decode=function(e,t){if(t=null==t?!0:t)for(;61==Jn.cca(e,e.length-1);)e=Jn.substr(e,0,-1);return new EA(TA.BYTES).decodeBytes(IA.ofString(e))},function(e){for(var t=e.length,n=1;1<<n<t;)++n;if(8<n||t!=1<<n)throw tl.thrown("BaseCode : base length must be a power of two.");this.base=e,this.nbits=n}),FA=((i["haxe.crypto.BaseCode"]=EA).__name__="haxe.crypto.BaseCode",EA.prototype={encodeBytes:function(e){for(var t=this.nbits,n=this.base,i=8*e.length/t|0,s=new IA(new ArrayBuffer(i+(8*e.length%t==0?0:1))),a=0,l=0,r=(1<<t)-1,o=0,u=0;u<i;){for(;l<t;)l+=8,a=(a<<=8)|e.b[o++];l-=t,s.b[u++]=n.b[a>>l&r]}return 0<l&&(s.b[u++]=n.b[a<<t-l&r]),s},initTable:function(){for(var e=[],t=0;t<256;)e[t++]=-1;for(var t=0,n=this.base.length;t<n;){var i=t++;e[this.base.b[i]]=i}this.tbl=e},decodeBytes:function(e){for(var t=this.nbits,n=(null==this.tbl&&this.initTable(),this.tbl),i=e.length*t>>3,s=new IA(new ArrayBuffer(i)),a=0,l=0,r=0,o=0;o<i;){for(;l<8;){l+=t,a<<=t;var u=n[e.b[r++]];if(-1==u)throw tl.thrown("BaseCode : invalid encoded char");a|=u}l-=8,s.b[o++]=a>>l&255}return s},__class__:EA},(i["haxe.crypto.Md5"]=fp).__name__="haxe.crypto.Md5",fp.encode=function(e){var t=new fp;return t.hex(t.doEncode(fp.str2blks(e)))},fp.str2blks=function(e){for(var t=IA.ofString(e),e=1+(t.length+8>>6),n=[],i=16*e,s=0;s<i;)n[s++]=0;for(var a=0,l=t.length,r=8*l;a<l;)n[a>>2]|=t.b[a]<<(r+a)%4*8,++a;n[a>>2]|=128<<(r+a)%4*8;e=16*e-2;return n[e]=255&r,n[e]=(n[e]|=(r>>>8&255)<<8)|(r>>>16&255)<<16,n[e]|=(r>>>24&255)<<24,n},fp.prototype={bitOR:function(e,t){return(e>>>1|t>>>1)<<1|1&e|1&t},bitXOR:function(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t},bitAND:function(e,t){return(e>>>1&t>>>1)<<1|1&e&t},addme:function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},hex:function(e){for(var t="",n=0;n<e.length;){var i=e[n];++n,t=(t=(t=(t+="0123456789abcdef".charAt(i>>4&15)+"0123456789abcdef".charAt(15&i))+("0123456789abcdef".charAt(i>>12&15)+"0123456789abcdef".charAt(i>>8&15)))+("0123456789abcdef".charAt(i>>20&15)+"0123456789abcdef".charAt(i>>16&15)))+("0123456789abcdef".charAt(i>>28&15)+"0123456789abcdef".charAt(i>>24&15))}return t},rol:function(e,t){return e<<t|e>>>32-t},cmn:function(e,t,n,i,s,a){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(i,a)),s),n)},ff:function(e,t,n,i,s,a,l){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(~t,i)),e,t,s,a,l)},gg:function(e,t,n,i,s,a,l){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(n,~i)),e,t,s,a,l)},hh:function(e,t,n,i,s,a,l){return this.cmn(this.bitXOR(this.bitXOR(t,n),i),e,t,s,a,l)},ii:function(e,t,n,i,s,a,l){return this.cmn(this.bitXOR(n,this.bitOR(t,~i)),e,t,s,a,l)},doEncode:function(e){for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,a=0;a<e.length;){var l=t,r=n,o=i,u=s,t=this.ff(t,n,i,s,e[a],7,-680876936),s=this.ff(s,t,n,i,e[a+1],12,-389564586),i=this.ff(i,s,t,n,e[a+2],17,606105819),n=this.ff(n,i,s,t,e[a+3],22,-1044525330);t=this.ff(t,n,i,s,e[a+4],7,-176418897),s=this.ff(s,t,n,i,e[a+5],12,1200080426),i=this.ff(i,s,t,n,e[a+6],17,-1473231341),n=this.ff(n,i,s,t,e[a+7],22,-45705983),t=this.ff(t,n,i,s,e[a+8],7,1770035416),s=this.ff(s,t,n,i,e[a+9],12,-1958414417),i=this.ff(i,s,t,n,e[a+10],17,-42063),n=this.ff(n,i,s,t,e[a+11],22,-1990404162),t=this.ff(t,n,i,s,e[a+12],7,1804603682),s=this.ff(s,t,n,i,e[a+13],12,-40341101),i=this.ff(i,s,t,n,e[a+14],17,-1502002290),n=this.ff(n,i,s,t,e[a+15],22,1236535329),t=this.gg(t,n,i,s,e[a+1],5,-165796510),s=this.gg(s,t,n,i,e[a+6],9,-1069501632),i=this.gg(i,s,t,n,e[a+11],14,643717713),n=this.gg(n,i,s,t,e[a],20,-373897302),t=this.gg(t,n,i,s,e[a+5],5,-701558691),s=this.gg(s,t,n,i,e[a+10],9,38016083),i=this.gg(i,s,t,n,e[a+15],14,-660478335),n=this.gg(n,i,s,t,e[a+4],20,-405537848),t=this.gg(t,n,i,s,e[a+9],5,568446438),s=this.gg(s,t,n,i,e[a+14],9,-1019803690),i=this.gg(i,s,t,n,e[a+3],14,-187363961),n=this.gg(n,i,s,t,e[a+8],20,1163531501),t=this.gg(t,n,i,s,e[a+13],5,-1444681467),s=this.gg(s,t,n,i,e[a+2],9,-51403784),i=this.gg(i,s,t,n,e[a+7],14,1735328473),n=this.gg(n,i,s,t,e[a+12],20,-1926607734),t=this.hh(t,n,i,s,e[a+5],4,-378558),s=this.hh(s,t,n,i,e[a+8],11,-2022574463),i=this.hh(i,s,t,n,e[a+11],16,1839030562),n=this.hh(n,i,s,t,e[a+14],23,-35309556),t=this.hh(t,n,i,s,e[a+1],4,-1530992060),s=this.hh(s,t,n,i,e[a+4],11,1272893353),i=this.hh(i,s,t,n,e[a+7],16,-155497632),n=this.hh(n,i,s,t,e[a+10],23,-1094730640),t=this.hh(t,n,i,s,e[a+13],4,681279174),s=this.hh(s,t,n,i,e[a],11,-358537222),i=this.hh(i,s,t,n,e[a+3],16,-722521979),n=this.hh(n,i,s,t,e[a+6],23,76029189),t=this.hh(t,n,i,s,e[a+9],4,-640364487),s=this.hh(s,t,n,i,e[a+12],11,-421815835),i=this.hh(i,s,t,n,e[a+15],16,530742520),n=this.hh(n,i,s,t,e[a+2],23,-995338651),t=this.ii(t,n,i,s,e[a],6,-198630844),s=this.ii(s,t,n,i,e[a+7],10,1126891415),i=this.ii(i,s,t,n,e[a+14],15,-1416354905),n=this.ii(n,i,s,t,e[a+5],21,-57434055),t=this.ii(t,n,i,s,e[a+12],6,1700485571),s=this.ii(s,t,n,i,e[a+3],10,-1894986606),i=this.ii(i,s,t,n,e[a+10],15,-1051523),n=this.ii(n,i,s,t,e[a+1],21,-2054922799),t=this.ii(t,n,i,s,e[a+8],6,1873313359),s=this.ii(s,t,n,i,e[a+15],10,-30611744),i=this.ii(i,s,t,n,e[a+6],15,-1560198380),n=this.ii(n,i,s,t,e[a+13],21,1309151649),t=this.ii(t,n,i,s,e[a+4],6,-145523070),s=this.ii(s,t,n,i,e[a+11],10,-1120210379),i=this.ii(i,s,t,n,e[a+2],15,718787259),n=this.ii(n,i,s,t,e[a+9],21,-343485551),t=this.addme(t,l),n=this.addme(n,r),i=this.addme(i,o),s=this.addme(s,u),a+=16}return[t,n,i,s]},__class__:fp},function(){}),DA=((i["haxe.ds.ArraySort"]=FA).__name__="haxe.ds.ArraySort",FA.sort=function(e,t){FA.rec(e,t,0,e.length)},FA.rec=function(e,t,n,i){var s=n+i>>1;if(i-n<12){if(!(i<=n))for(var a=n+1;a<i;)for(var l=a++;n<l&&t(e[l],e[l-1])<0;)FA.swap(e,l-1,l),--l}else FA.rec(e,t,n,s),FA.rec(e,t,s,i),FA.doMerge(e,t,n,s,i,s-n,i-s)},FA.doMerge=function(e,t,n,i,s,a,l){for(;;){var r,o,u,h;if(0==a||0==l)return;if(a+l==2)return void(t(e[i],e[n])<0&&FA.swap(e,i,n));l<a?h=(o=FA.lower(e,t,i,s,r=n+(u=a>>1)))-i:u=(r=FA.upper(e,t,n,i,o=i+(h=l>>1)))-n,FA.rotate(e,t,r,i,o);var c=r+h;FA.doMerge(e,t,n,r,c,u,h),n=c,i=o,a-=u,l-=h}},FA.rotate=function(e,t,n,i,s){if(n!=i&&i!=s)for(var a=FA.gcd(s-n,i-n);0!=a--;){for(var l=e[n+a],r=i-n,o=n+a,u=n+a+r;u!=n+a;)e[o]=e[u],r<s-(o=u)?u+=r:u=n+(r-(s-u));e[o]=l}},FA.gcd=function(e,t){for(;0!=t;){var n=e%t;e=t,t=n}return e},FA.upper=function(e,t,n,i,s){for(var a,l,r=i-n;0<r;)r=t(e[s],e[l=n+(a=r>>1)])<0?a:(n=l+1,r-a-1);return n},FA.lower=function(e,t,n,i,s){for(var a,l,r=i-n;0<r;)r=t(e[l=n+(a=r>>1)],e[s])<0?(n=l+1,r-a-1):a;return n},FA.swap=function(e,t,n){var i=e[t];e[t]=e[n],e[n]=i},(i["haxe.ds.BalancedTree"]=Ap).__name__="haxe.ds.BalancedTree",Ap.__interfaces__=[z],Ap.iteratorLoop=function(e,t){for(;;){if(null==e)return;Ap.iteratorLoop(e.left,t),t.push(e.value),e=e.right}},Ap.prototype={set:function(e,t){this.root=this.setLoop(e,t,this.root)},get:function(e){for(var t=this.root;null!=t;){var n=this.compare(e,t.key);if(0==n)return t.value;t=n<0?t.left:t.right}return null},exists:function(e){for(var t=this.root;null!=t;){var n=this.compare(e,t.key);if(0==n)return!0;t=n<0?t.left:t.right}return!1},iterator:function(){var e=[];return Ap.iteratorLoop(this.root,e),new JA(e)},keys:function(){var e=[];return this.keysLoop(this.root,e),new JA(e)},setLoop:function(e,t,n){var i;return null==n?new DA(null,e,t,null):0==(i=this.compare(e,n.key))?new DA(n.left,e,t,n.right,null==n?0:n._height):i<0?this.balance(this.setLoop(e,t,n.left),n.key,n.value,n.right):(i=this.setLoop(e,t,n.right),this.balance(n.left,n.key,n.value,i))},keysLoop:function(e,t){null!=e&&(this.keysLoop(e.left,t),t.push(e.key),this.keysLoop(e.right,t))},balance:function(e,t,n,i){var s,a,l=null==e?0:e._height,r=null==i?0:i._height;return r+2<l?(null==(s=e.left)?0:s._height)>=(null==(a=e.right)?0:a._height)?new DA(e.left,e.key,e.value,new DA(e.right,t,n,i)):new DA(new DA(e.left,e.key,e.value,e.right.left),e.right.key,e.right.value,new DA(e.right.right,t,n,i)):l+2<r?(null==(s=i.right)?0:s._height)>(null==(a=i.left)?0:a._height)?new DA(new DA(e,t,n,i.left),i.key,i.value,i.right):new DA(new DA(e,t,n,i.left.left),i.left.key,i.left.value,new DA(i.left.right,i.key,i.value,i.right)):new DA(e,t,n,i,(r<l?l:r)+1)},compare:function(e,t){return X.compare(e,t)},clear:function(){this.root=null},__class__:Ap},function(e,t,n,i,s){null==s&&(s=-1),this.left=e,this.key=t,this.value=n,this.right=i,-1==s?(e=this.left,t=this.right,n=(null==e?0:e._height)>(null==t?0:t._height)?null==(e=this.left)?0:e._height:null==(e=this.right)?0:e._height,this._height=n+1):this._height=s}),RA=((i["haxe.ds.TreeNode"]=DA).__name__="haxe.ds.TreeNode",DA.prototype={__class__:DA},fe["haxe.ds.Either"]={__ename__:!0,__constructs__:null,Left:((R=function(e){return{_hx_index:0,v:e,__enum__:"haxe.ds.Either",toString:o}})._hx_name="Left",R.__params__=["v"],R),Right:((R=function(e){return{_hx_index:1,v:e,__enum__:"haxe.ds.Either",toString:o}})._hx_name="Right",R.__params__=["v"],R)}),PA=(RA.__constructs__=[RA.Left,RA.Right],RA.__empty_constructs__=[],function(){Ap.call(this)}),zA=((i["haxe.ds.EnumValueMap"]=PA).__name__="haxe.ds.EnumValueMap",PA.__interfaces__=[z],PA.__super__=Ap,PA.prototype=e(Ap.prototype,{compare:function(e,t){var n=e._hx_index-t._hx_index;return 0!=n?n:(n=U.enumParameters(e),e=U.enumParameters(t),0==n.length&&0==e.length?0:this.compareArgs(n,e))},compareArgs:function(e,t){var n=e.length-t.length;if(0!=n)return n;for(var i=0,s=e.length;i<s;){var a=i++,a=this.compareArg(e[a],t[a]);if(0!=a)return a}return 0},compareArg:function(e,t){return X.isEnumValue(e)&&X.isEnumValue(t)?this.compare(e,t):e instanceof Array&&t instanceof Array?this.compareArgs(e,t):X.compare(e,t)},copy:function(){var e=new PA;return e.root=this.root,e},__class__:PA}),(i["haxe.ds.GenericCell"]=xp).__name__="haxe.ds.GenericCell",xp.prototype={__class__:xp},(i["haxe.ds.GenericStack"]=wp).__name__="haxe.ds.GenericStack",wp.prototype={__class__:wp},function(){this.length=0}),QA=((i["haxe.ds.List"]=zA).__name__="haxe.ds.List",zA.prototype={add:function(e){e=new QA(e,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},push:function(e){e=new QA(e,this.h);this.h=e,null==this.q&&(this.q=e),this.length++},remove:function(e){for(var t=null,n=this.h;null!=n;){if(n.item==e)return null==t?this.h=n.next:t.next=n.next,this.q==n&&(this.q=t),this.length--,!0;n=(t=n).next}return!1},__class__:zA},function(e,t){this.item=e,this.next=t}),VA=((i["haxe.ds._List.ListNode"]=QA).__name__="haxe.ds._List.ListNode",QA.prototype={__class__:QA},function(){this.h={__keys__:{}}}),OA=((i["haxe.ds.ObjectMap"]=VA).__name__="haxe.ds.ObjectMap",VA.__interfaces__=[z],VA.prototype={set:function(e,t){var n=e.__id__;null==n&&(n=e.__id__=p.$haxeUID++),this.h[n]=t,this.h.__keys__[n]=e},get:function(e){return this.h[e.__id__]},exists:function(e){return null!=this.h.__keys__[e.__id__]},remove:function(e){e=e.__id__;return null!=this.h.__keys__[e]&&(delete this.h[e],delete this.h.__keys__[e],!0)},keys:function(){var e,t=[];for(e in this.h.__keys__)this.h.hasOwnProperty(e)&&t.push(this.h.__keys__[e]);return new JA(t)},__class__:VA},fe["haxe.ds.Option"]={__ename__:!0,__constructs__:null,Some:((R=function(e){return{_hx_index:0,v:e,__enum__:"haxe.ds.Option",toString:o}})._hx_name="Some",R.__params__=["v"],R),None:{_hx_name:"None",_hx_index:1,__enum__:"haxe.ds.Option",toString:o}}),WA=(OA.__constructs__=[OA.Some,OA.None],OA.__empty_constructs__=[OA.None],function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),NA=((i["haxe.ds._StringMap.StringMapKeyIterator"]=WA).__name__="haxe.ds._StringMap.StringMapKeyIterator",WA.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:WA},function(e){this.h=e,this.keys=Object.keys(e),this.length=this.keys.length,this.current=0}),GA=((i["haxe.ds._StringMap.StringMapValueIterator"]=NA).__name__="haxe.ds._StringMap.StringMapValueIterator",NA.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:NA},{}),UA=(GA.blit=function(e,t,n,i,s){if(e==n){if(t<i)for(var a=t+s,l=i+s,r=0;r<s;)++r,e[--l]=e[--a];else if(i<t)for(a=t,l=i,r=0;r<s;)++r,e[l]=e[a],++a,++l}else for(r=0;r<s;)n[i+(a=r++)]=e[t+a]},(i["haxe.exceptions.PosException"]=yp).__name__="haxe.exceptions.PosException",yp.__super__=tl,yp.prototype=e(tl.prototype,{toString:function(){return tl.prototype.toString.call(this)+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber},__class__:yp}),function(e,t,n){yp.call(this,e=null==e?"Not implemented":e,t,n),this.__skipStack++}),LA=((i["haxe.exceptions.NotImplementedException"]=UA).__name__="haxe.exceptions.NotImplementedException",UA.__super__=yp,UA.prototype=e(yp.prototype,{__class__:UA}),(i["haxe.http.HttpBase"]=bp).__name__="haxe.http.HttpBase",bp.prototype={onData:function(e){},onBytes:function(e){},onError:function(e){},onStatus:function(e){},hasOnData:function(){return Cn(this,this.onData)!=this.emptyOnData},success:function(e){this.responseBytes=e,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes)},get_responseData:function(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,BA.UTF8)),this.responseAsString},__class__:bp,__properties__:{get_responseData:"get_responseData"}},function(e){this.async=!0,this.withCredentials=!1,bp.call(this,e)}),jA=((i["haxe.http.HttpJs"]=LA).__name__="haxe.http.HttpJs",LA.__super__=bp,LA.prototype=e(bp.prototype,{request:function(e){function t(e){if(4==_.readyState){var t,n;try{t=_.status}catch(s){CA.lastError=s,t=null}if(null!=(t=null==(t=0==t&&o0.get_supported()&&null!=p.location&&(n=p.location.protocol.toLowerCase(),new ot("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(n))?null!=_.response?200:404:t)?null:t)&&c.onStatus(t),null!=t&&200<=t&&t<400){c.req=null;for(var i=_.getAllResponseHeaders().split("\r\n"),s=[],a=0,l=i;a<l.length;){var r=l[a];++a,""!=r&&s.push(r)}i=s,c.responseHeaders=new at;for(s=0;s<i.length;){var o=i[s++].split(": "),u=o.shift(),o=1==o.length?o[0]:o.join(": "),o=Ae.ltrim(Ae.rtrim(o));c.responseHeaders.h[u]=o}c.success(IA.ofData(_.response))}else if(null==t||0==t&&null==_.response)c.req=null,c.onError("Failed to connect or resolve host");else if(null==t){var h=(c.req=null)!=_.response?IA.ofData(_.response):null;c.responseBytes=h,c.onError("Http Error #"+_.status)}else switch(t){case 12007:c.req=null,c.onError("Unknown host");break;case 12029:c.req=null,c.onError("Failed to connect to host");break;default:h=(c.req=null)!=_.response?IA.ofData(_.response):null;c.responseBytes=h,c.onError("Http Error #"+_.status)}}}var c=this,_=(this.responseAsString=null,this.responseBytes=null,this.responseHeaders=null,this.req=o0.createXMLHttpRequest()),n=(this.async&&(_.onreadystatechange=t),this.postData),i=this.postBytes;if(null!=(l=null==n?null==i?null:new Blob([i.b.bufferValue]):null==i?n:null))e=!0;else for(n=0,i=this.params;n<i.length;)var s=i[n],a=(++n,l=null==l?"":(null==l?"null":el.string(l))+"&",s.name),a=(null==l?"null":el.string(l))+encodeURIComponent(a)+"=",s=s.value,l=a+encodeURIComponent(s);try{e?_.open("POST",this.url,this.async):null!=l?(_.open("GET",this.url+(this.url.split("?").length<=1?"?":"&")+(null==l?"null":el.string(l)),this.async),l=null):_.open("GET",this.url,this.async),_.responseType="arraybuffer"}catch(n){CA.lastError=n;i=tl.caught(n).unwrap();return this.req=null,void this.onError(i.toString())}_.withCredentials=this.withCredentials,!be.exists(this.headers,function(e){return"Content-Type"==e.name})&&e&&null==this.postData&&_.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(n=0,i=this.headers;n<i.length;){var r=i[n];++n,_.setRequestHeader(r.name,r.value)}_.send(l),this.async||t()},__class__:LA}),function(){this.pos=0,this.size=0}),HA=((i["haxe.io.BytesBuffer"]=jA).__name__="haxe.io.BytesBuffer",jA.prototype={addByte:function(e){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,e)},add:function(e){var t;this.pos+e.length>this.size&&this.grow(e.length),0!=this.size&&(t=new Uint8Array(e.b.buffer,e.b.byteOffset,e.length),this.u8.set(t,this.pos),this.pos+=e.length)},addBytes:function(e,t,n){if(t<0||n<0||t+n>e.length)throw tl.thrown(XA.OutsideBounds);this.pos+n>this.size&&this.grow(n),0!=this.size&&(e=new Uint8Array(e.b.buffer,e.b.byteOffset+t,n),this.u8.set(e,this.pos),this.pos+=n)},grow:function(e){for(var t=this.pos+e,n=0==this.size?16:this.size;n<t;)n=3*n>>1;var e=new ArrayBuffer(n),i=new Uint8Array(e);0<this.size&&i.set(this.u8),this.size=n,this.buffer=e,this.u8=i,this.view=new DataView(this.buffer)},getBytes:function(){var e;return 0==this.size?new IA(new ArrayBuffer(0)):((e=new IA(this.buffer)).length=this.pos,e)},__class__:jA},(i["haxe.io.Input"]=vp).__name__="haxe.io.Input",vp.prototype={readByte:function(){throw new UA(null,null,{fileName:"haxe/io/Input.hx",lineNumber:53,className:"haxe.io.Input",methodName:"readByte"})},readBytes:function(e,t,n){var i=n,s=e.b;if(t<0||n<0||t+n>e.length)throw tl.thrown(XA.OutsideBounds);try{for(;0<i;)s[t]=this.readByte(),++t,--i}catch(e){if(CA.lastError=e,!(tl.caught(e).unwrap()instanceof ZA))throw e}return n-i},set_bigEndian:function(e){return this.bigEndian=e},readAll:function(e){null==e&&(e=16384);var t=new IA(new ArrayBuffer(e)),n=new jA;try{for(;;){var i=this.readBytes(t,0,e);if(0==i)throw tl.thrown(XA.Blocked);n.addBytes(t,0,i)}}catch(e){if(CA.lastError=e,!(tl.caught(e).unwrap()instanceof ZA))throw e}return n.getBytes()},readFullBytes:function(e,t,n){for(;0<n;){var i=this.readBytes(e,t,n);if(0==i)throw tl.thrown(XA.Blocked);t+=i,n-=i}},read:function(e){for(var t=new IA(new ArrayBuffer(e)),n=0;0<e;){var i=this.readBytes(t,n,e);if(0==i)throw tl.thrown(XA.Blocked);n+=i,e-=i}return t},readUntil:function(e){for(var t,n=new jA;(t=this.readByte())!=e;)n.addByte(t);return n.getBytes().toString()},readLine:function(){var e,t,n=new jA;try{for(;;){if(10==(e=this.readByte()))break;n.addByte(e)}t=n.getBytes().toString(),13==Jn.cca(t,t.length-1)&&(t=Jn.substr(t,0,-1))}catch(e){CA.lastError=e;var i=tl.caught(e).unwrap();if(!(i instanceof ZA))throw e;if(0==(t=n.getBytes().toString()).length)throw tl.thrown(i)}return t},readFloat:function(){return qA.i32ToFloat(this.readInt32())},readDouble:function(){var e=this.readInt32(),t=this.readInt32();return this.bigEndian?qA.i64ToDouble(t,e):qA.i64ToDouble(e,t)},readInt16:function(){var e=this.readByte(),t=this.readByte(),e=this.bigEndian?t|e<<8:e|t<<8;return 0!=(32768&e)?e-65536:e},readUInt16:function(){var e=this.readByte(),t=this.readByte();return this.bigEndian?t|e<<8:e|t<<8},readUInt24:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte();return this.bigEndian?n|t<<8|e<<16:e|t<<8|n<<16},readInt32:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte();return this.bigEndian?i|n<<8|t<<16|e<<24:e|t<<8|n<<16|i<<24},readString:function(e,t){var n=new IA(new ArrayBuffer(e));return this.readFullBytes(n,0,e),n.getString(0,e,t)},__class__:vp,__properties__:{set_bigEndian:"set_bigEndian"}},function(e,t,n){if(null==t&&(t=0),null==n&&(n=e.length-t),t<0||n<0||t+n>e.length)throw tl.thrown(XA.OutsideBounds);this.b=e.b,this.pos=t,this.len=n,this.totlen=n}),YA=((i["haxe.io.BytesInput"]=HA).__name__="haxe.io.BytesInput",HA.__super__=vp,HA.prototype=e(vp.prototype,{set_position:function(e){return e<0?e=0:e>this.totlen&&(e=this.totlen),this.len=this.totlen-e,this.pos=e},readByte:function(){if(0==this.len)throw tl.thrown(new ZA);return this.len--,this.b[this.pos++]},readBytes:function(e,t,n){if(t<0||n<0||t+n>e.length)throw tl.thrown(XA.OutsideBounds);if(0==this.len&&0<n)throw tl.thrown(new ZA);this.len<n&&(n=this.len);for(var i=this.b,s=e.b,a=0,l=n;a<l;){var r=a++;s[t+r]=i[this.pos+r]}return this.pos+=n,this.len-=n,n},__class__:HA,__properties__:e(vp.prototype.__properties__,{set_position:"set_position"})}),(i["haxe.io.Output"]=Cp).__name__="haxe.io.Output",Cp.prototype={flush:function(){},close:function(){},__class__:Cp},function(){this.b=new jA}),ZA=((i["haxe.io.BytesOutput"]=YA).__name__="haxe.io.BytesOutput",YA.__super__=Cp,YA.prototype=e(Cp.prototype,{writeBytes:function(e,t,n){return this.b.addBytes(e,t,n),n},getBytes:function(){return this.b.getBytes()},__class__:YA}),function(){}),XA=((i["haxe.io.Eof"]=ZA).__name__="haxe.io.Eof",ZA.prototype={toString:function(){return"Eof"},__class__:ZA},fe["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:o},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:o},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:o},Custom:((R=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:o}})._hx_name="Custom",R.__params__=["e"],R)}),qA=(XA.__constructs__=[XA.Blocked,XA.Overflow,XA.OutsideBounds,XA.Custom],XA.__empty_constructs__=[XA.Blocked,XA.Overflow,XA.OutsideBounds],function(){}),KA=((i["haxe.io.FPHelper"]=qA).__name__="haxe.io.FPHelper",qA.i32ToFloat=function(e){return qA.helper.setInt32(0,e,!0),qA.helper.getFloat32(0,!0)},qA.floatToI32=function(e){return qA.helper.setFloat32(0,e,!0),qA.helper.getInt32(0,!0)},qA.i64ToDouble=function(e,t){return qA.helper.setInt32(0,e,!0),qA.helper.setInt32(4,t,!0),qA.helper.getFloat64(0,!0)},function(e){switch(e){case".":case"..":return this.dir=e,void(this.file="")}var t=e.lastIndexOf("/"),n=e.lastIndexOf("\\"),n=(t<n?(this.dir=Jn.substr(e,0,n),e=Jn.substr(e,n+1,null),this.backslash=!0):n<t?(this.dir=Jn.substr(e,0,t),e=Jn.substr(e,t+1,null)):this.dir=null,e.lastIndexOf("."));-1!=n?(this.ext=Jn.substr(e,n+1,null),this.file=Jn.substr(e,0,n)):(this.ext=null,this.file=e)}),JA=((i["haxe.io.Path"]=KA).__name__="haxe.io.Path",KA.directory=function(e){e=new KA(e);return null==e.dir?"":e.dir},KA.extension=function(e){e=new KA(e);return null==e.ext?"":e.ext},KA.withExtension=function(e,t){e=new KA(e);return e.ext=t,e.toString()},KA.join=function(e){for(var t=[],n=0;n<e.length;){var i=e[n];++n,null!=i&&""!=i&&t.push(i)}if(0==t.length)return"";for(var s=t[0],n=1,a=t.length;n<a;)s=KA.addTrailingSlash(s),s+=t[n++];return KA.normalize(s)},KA.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var t=[],n=0,i=e.split("/");n<i.length;){var s=i[n];++n,".."==s&&0<t.length&&".."!=t[t.length-1]?t.pop():""==s?(0<t.length||47==Jn.cca(e,0))&&t.push(s):"."!=s&&t.push(s)}for(var a="",l=!1,r=!1,o=0,u=t.join("/");o<u.length;){var h=u,c=o++,_=h.charCodeAt(c),d=(_=55296<=_&&_<=56319?_-55232<<10|1023&h.charCodeAt(1+c):_,65536<=_&&++o,_);switch(d){case 47:l?(l=!1,r&&(a+="/",r=!1),a+=String.fromCodePoint(d)):r=!0;break;case 58:a+=":",l=!0;break;default:l=!1,r&&(a+="/",r=!1),a+=String.fromCodePoint(d)}}return a},KA.addTrailingSlash=function(e){var t,n;return 0==e.length?"/":(t=e.lastIndexOf("/"))<(n=e.lastIndexOf("\\"))?n!=e.length-1?e+"\\":e:t!=e.length-1?e+"/":e},KA.isAbsolute=function(e){return!!Ae.startsWith(e,"/")||":"==e.charAt(1)||!!Ae.startsWith(e,"\\\\")},KA.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:KA},function(e){this.current=0,this.array=e}),$A=((i["haxe.iterators.ArrayIterator"]=JA).__name__="haxe.iterators.ArrayIterator",JA.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:JA},function(e){this.map=e,this.keys=e.keys()});(i["haxe.iterators.MapKeyValueIterator"]=$A).__name__="haxe.iterators.MapKeyValueIterator",$A.prototype={hasNext:function(){return this.keys.hasNext()},next:function(){var e=this.keys.next();return{value:this.map.get(e),key:e}},__class__:$A},(i["haxe.macro.ComplexTypeTools"]=Sp).__name__="haxe.macro.ComplexTypeTools",Sp.toString=function(e){return(new hx).printComplexType(e)};(n=fe["haxe.macro.StringLiteralKind"]={__ename__:!0,__constructs__:null,DoubleQuotes:{_hx_name:"DoubleQuotes",_hx_index:0,__enum__:"haxe.macro.StringLiteralKind",toString:o},SingleQuotes:{_hx_name:"SingleQuotes",_hx_index:1,__enum__:"haxe.macro.StringLiteralKind",toString:o}}).__constructs__=[n.DoubleQuotes,n.SingleQuotes],n.__empty_constructs__=[n.DoubleQuotes,n.SingleQuotes];var ex=fe["haxe.macro.Constant"]={__ename__:!0,__constructs__:null,CInt:((R=function(e,t){return{_hx_index:0,v:e,s:t,__enum__:"haxe.macro.Constant",toString:o}})._hx_name="CInt",R.__params__=["v","s"],R),CFloat:((R=function(e,t){return{_hx_index:1,f:e,s:t,__enum__:"haxe.macro.Constant",toString:o}})._hx_name="CFloat",R.__params__=["f","s"],R),CString:((R=function(e,t){return{_hx_index:2,s:e,kind:t,__enum__:"haxe.macro.Constant",toString:o}})._hx_name="CString",R.__params__=["s","kind"],R),CIdent:((R=function(e){return{_hx_index:3,s:e,__enum__:"haxe.macro.Constant",toString:o}})._hx_name="CIdent",R.__params__=["s"],R),CRegexp:((R=function(e,t){return{_hx_index:4,r:e,opt:t,__enum__:"haxe.macro.Constant",toString:o}})._hx_name="CRegexp",R.__params__=["r","opt"],R)},tx=(ex.__constructs__=[ex.CInt,ex.CFloat,ex.CString,ex.CIdent,ex.CRegexp],ex.__empty_constructs__=[],fe["haxe.macro.Binop"]={__ename__:!0,__constructs__:null,OpAdd:{_hx_name:"OpAdd",_hx_index:0,__enum__:"haxe.macro.Binop",toString:o},OpMult:{_hx_name:"OpMult",_hx_index:1,__enum__:"haxe.macro.Binop",toString:o},OpDiv:{_hx_name:"OpDiv",_hx_index:2,__enum__:"haxe.macro.Binop",toString:o},OpSub:{_hx_name:"OpSub",_hx_index:3,__enum__:"haxe.macro.Binop",toString:o},OpAssign:{_hx_name:"OpAssign",_hx_index:4,__enum__:"haxe.macro.Binop",toString:o},OpEq:{_hx_name:"OpEq",_hx_index:5,__enum__:"haxe.macro.Binop",toString:o},OpNotEq:{_hx_name:"OpNotEq",_hx_index:6,__enum__:"haxe.macro.Binop",toString:o},OpGt:{_hx_name:"OpGt",_hx_index:7,__enum__:"haxe.macro.Binop",toString:o},OpGte:{_hx_name:"OpGte",_hx_index:8,__enum__:"haxe.macro.Binop",toString:o},OpLt:{_hx_name:"OpLt",_hx_index:9,__enum__:"haxe.macro.Binop",toString:o},OpLte:{_hx_name:"OpLte",_hx_index:10,__enum__:"haxe.macro.Binop",toString:o},OpAnd:{_hx_name:"OpAnd",_hx_index:11,__enum__:"haxe.macro.Binop",toString:o},OpOr:{_hx_name:"OpOr",_hx_index:12,__enum__:"haxe.macro.Binop",toString:o},OpXor:{_hx_name:"OpXor",_hx_index:13,__enum__:"haxe.macro.Binop",toString:o},OpBoolAnd:{_hx_name:"OpBoolAnd",_hx_index:14,__enum__:"haxe.macro.Binop",toString:o},OpBoolOr:{_hx_name:"OpBoolOr",_hx_index:15,__enum__:"haxe.macro.Binop",toString:o},OpShl:{_hx_name:"OpShl",_hx_index:16,__enum__:"haxe.macro.Binop",toString:o},OpShr:{_hx_name:"OpShr",_hx_index:17,__enum__:"haxe.macro.Binop",toString:o},OpUShr:{_hx_name:"OpUShr",_hx_index:18,__enum__:"haxe.macro.Binop",toString:o},OpMod:{_hx_name:"OpMod",_hx_index:19,__enum__:"haxe.macro.Binop",toString:o},OpAssignOp:((R=function(e){return{_hx_index:20,op:e,__enum__:"haxe.macro.Binop",toString:o}})._hx_name="OpAssignOp",R.__params__=["op"],R),OpInterval:{_hx_name:"OpInterval",_hx_index:21,__enum__:"haxe.macro.Binop",toString:o},OpArrow:{_hx_name:"OpArrow",_hx_index:22,__enum__:"haxe.macro.Binop",toString:o},OpIn:{_hx_name:"OpIn",_hx_index:23,__enum__:"haxe.macro.Binop",toString:o},OpNullCoal:{_hx_name:"OpNullCoal",_hx_index:24,__enum__:"haxe.macro.Binop",toString:o}}),nx=(tx.__constructs__=[tx.OpAdd,tx.OpMult,tx.OpDiv,tx.OpSub,tx.OpAssign,tx.OpEq,tx.OpNotEq,tx.OpGt,tx.OpGte,tx.OpLt,tx.OpLte,tx.OpAnd,tx.OpOr,tx.OpXor,tx.OpBoolAnd,tx.OpBoolOr,tx.OpShl,tx.OpShr,tx.OpUShr,tx.OpMod,tx.OpAssignOp,tx.OpInterval,tx.OpArrow,tx.OpIn,tx.OpNullCoal],tx.__empty_constructs__=[tx.OpAdd,tx.OpMult,tx.OpDiv,tx.OpSub,tx.OpAssign,tx.OpEq,tx.OpNotEq,tx.OpGt,tx.OpGte,tx.OpLt,tx.OpLte,tx.OpAnd,tx.OpOr,tx.OpXor,tx.OpBoolAnd,tx.OpBoolOr,tx.OpShl,tx.OpShr,tx.OpUShr,tx.OpMod,tx.OpInterval,tx.OpArrow,tx.OpIn,tx.OpNullCoal],fe["haxe.macro.Unop"]={__ename__:!0,__constructs__:null,OpIncrement:{_hx_name:"OpIncrement",_hx_index:0,__enum__:"haxe.macro.Unop",toString:o},OpDecrement:{_hx_name:"OpDecrement",_hx_index:1,__enum__:"haxe.macro.Unop",toString:o},OpNot:{_hx_name:"OpNot",_hx_index:2,__enum__:"haxe.macro.Unop",toString:o},OpNeg:{_hx_name:"OpNeg",_hx_index:3,__enum__:"haxe.macro.Unop",toString:o},OpNegBits:{_hx_name:"OpNegBits",_hx_index:4,__enum__:"haxe.macro.Unop",toString:o},OpSpread:{_hx_name:"OpSpread",_hx_index:5,__enum__:"haxe.macro.Unop",toString:o}}),ix=(nx.__constructs__=[nx.OpIncrement,nx.OpDecrement,nx.OpNot,nx.OpNeg,nx.OpNegBits,nx.OpSpread],nx.__empty_constructs__=[nx.OpIncrement,nx.OpDecrement,nx.OpNot,nx.OpNeg,nx.OpNegBits,nx.OpSpread],fe["haxe.macro.EFieldKind"]={__ename__:!0,__constructs__:null,Normal:{_hx_name:"Normal",_hx_index:0,__enum__:"haxe.macro.EFieldKind",toString:o},Safe:{_hx_name:"Safe",_hx_index:1,__enum__:"haxe.macro.EFieldKind",toString:o}});ix.__constructs__=[ix.Normal,ix.Safe],ix.__empty_constructs__=[ix.Normal,ix.Safe];(n=fe["haxe.macro.QuoteStatus"]={__ename__:!0,__constructs__:null,Unquoted:{_hx_name:"Unquoted",_hx_index:0,__enum__:"haxe.macro.QuoteStatus",toString:o},Quoted:{_hx_name:"Quoted",_hx_index:1,__enum__:"haxe.macro.QuoteStatus",toString:o}}).__constructs__=[n.Unquoted,n.Quoted],n.__empty_constructs__=[n.Unquoted,n.Quoted];var sx=fe["haxe.macro.FunctionKind"]={__ename__:!0,__constructs__:null,FAnonymous:{_hx_name:"FAnonymous",_hx_index:0,__enum__:"haxe.macro.FunctionKind",toString:o},FNamed:((R=function(e,t){return{_hx_index:1,name:e,inlined:t,__enum__:"haxe.macro.FunctionKind",toString:o}})._hx_name="FNamed",R.__params__=["name","inlined"],R),FArrow:{_hx_name:"FArrow",_hx_index:2,__enum__:"haxe.macro.FunctionKind",toString:o}},ax=(sx.__constructs__=[sx.FAnonymous,sx.FNamed,sx.FArrow],sx.__empty_constructs__=[sx.FAnonymous,sx.FArrow],fe["haxe.macro.ExprDef"]={__ename__:!0,__constructs__:null,EConst:((R=function(e){return{_hx_index:0,c:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EConst",R.__params__=["c"],R),EArray:((R=function(e,t){return{_hx_index:1,e1:e,e2:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EArray",R.__params__=["e1","e2"],R),EBinop:((R=function(e,t,n){return{_hx_index:2,op:e,e1:t,e2:n,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EBinop",R.__params__=["op","e1","e2"],R),EField:((R=function(e,t,n){return{_hx_index:3,e:e,field:t,kind:n,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EField",R.__params__=["e","field","kind"],R),EParenthesis:((R=function(e){return{_hx_index:4,e:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EParenthesis",R.__params__=["e"],R),EObjectDecl:((R=function(e){return{_hx_index:5,fields:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EObjectDecl",R.__params__=["fields"],R),EArrayDecl:((R=function(e){return{_hx_index:6,values:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EArrayDecl",R.__params__=["values"],R),ECall:((R=function(e,t){return{_hx_index:7,e:e,params:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="ECall",R.__params__=["e","params"],R),ENew:((R=function(e,t){return{_hx_index:8,t:e,params:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="ENew",R.__params__=["t","params"],R),EUnop:((R=function(e,t,n){return{_hx_index:9,op:e,postFix:t,e:n,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EUnop",R.__params__=["op","postFix","e"],R),EVars:((R=function(e){return{_hx_index:10,vars:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EVars",R.__params__=["vars"],R),EFunction:((R=function(e,t){return{_hx_index:11,kind:e,f:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EFunction",R.__params__=["kind","f"],R),EBlock:((R=function(e){return{_hx_index:12,exprs:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EBlock",R.__params__=["exprs"],R),EFor:((R=function(e,t){return{_hx_index:13,it:e,expr:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EFor",R.__params__=["it","expr"],R),EIf:((R=function(e,t,n){return{_hx_index:14,econd:e,eif:t,eelse:n,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EIf",R.__params__=["econd","eif","eelse"],R),EWhile:((R=function(e,t,n){return{_hx_index:15,econd:e,e:t,normalWhile:n,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EWhile",R.__params__=["econd","e","normalWhile"],R),ESwitch:((R=function(e,t,n){return{_hx_index:16,e:e,cases:t,edef:n,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="ESwitch",R.__params__=["e","cases","edef"],R),ETry:((R=function(e,t){return{_hx_index:17,e:e,catches:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="ETry",R.__params__=["e","catches"],R),EReturn:((R=function(e){return{_hx_index:18,e:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EReturn",R.__params__=["e"],R),EBreak:{_hx_name:"EBreak",_hx_index:19,__enum__:"haxe.macro.ExprDef",toString:o},EContinue:{_hx_name:"EContinue",_hx_index:20,__enum__:"haxe.macro.ExprDef",toString:o},EUntyped:((R=function(e){return{_hx_index:21,e:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EUntyped",R.__params__=["e"],R),EThrow:((R=function(e){return{_hx_index:22,e:e,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EThrow",R.__params__=["e"],R),ECast:((R=function(e,t){return{_hx_index:23,e:e,t:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="ECast",R.__params__=["e","t"],R),EDisplay:((R=function(e,t){return{_hx_index:24,e:e,displayKind:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EDisplay",R.__params__=["e","displayKind"],R),ETernary:((R=function(e,t,n){return{_hx_index:25,econd:e,eif:t,eelse:n,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="ETernary",R.__params__=["econd","eif","eelse"],R),ECheckType:((R=function(e,t){return{_hx_index:26,e:e,t:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="ECheckType",R.__params__=["e","t"],R),EMeta:((R=function(e,t){return{_hx_index:27,s:e,e:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EMeta",R.__params__=["s","e"],R),EIs:((R=function(e,t){return{_hx_index:28,e:e,t:t,__enum__:"haxe.macro.ExprDef",toString:o}})._hx_name="EIs",R.__params__=["e","t"],R)});ax.__constructs__=[ax.EConst,ax.EArray,ax.EBinop,ax.EField,ax.EParenthesis,ax.EObjectDecl,ax.EArrayDecl,ax.ECall,ax.ENew,ax.EUnop,ax.EVars,ax.EFunction,ax.EBlock,ax.EFor,ax.EIf,ax.EWhile,ax.ESwitch,ax.ETry,ax.EReturn,ax.EBreak,ax.EContinue,ax.EUntyped,ax.EThrow,ax.ECast,ax.EDisplay,ax.ETernary,ax.ECheckType,ax.EMeta,ax.EIs],ax.__empty_constructs__=[ax.EBreak,ax.EContinue];(n=fe["haxe.macro.DisplayKind"]={__ename__:!0,__constructs__:null,DKCall:{_hx_name:"DKCall",_hx_index:0,__enum__:"haxe.macro.DisplayKind",toString:o},DKDot:{_hx_name:"DKDot",_hx_index:1,__enum__:"haxe.macro.DisplayKind",toString:o},DKStructure:{_hx_name:"DKStructure",_hx_index:2,__enum__:"haxe.macro.DisplayKind",toString:o},DKMarked:{_hx_name:"DKMarked",_hx_index:3,__enum__:"haxe.macro.DisplayKind",toString:o},DKPattern:((R=function(e){return{_hx_index:4,outermost:e,__enum__:"haxe.macro.DisplayKind",toString:o}})._hx_name="DKPattern",R.__params__=["outermost"],R)}).__constructs__=[n.DKCall,n.DKDot,n.DKStructure,n.DKMarked,n.DKPattern],n.__empty_constructs__=[n.DKCall,n.DKDot,n.DKStructure,n.DKMarked];var lx=fe["haxe.macro.ComplexType"]={__ename__:!0,__constructs__:null,TPath:((R=function(e){return{_hx_index:0,p:e,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TPath",R.__params__=["p"],R),TFunction:((R=function(e,t){return{_hx_index:1,args:e,ret:t,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TFunction",R.__params__=["args","ret"],R),TAnonymous:((R=function(e){return{_hx_index:2,fields:e,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TAnonymous",R.__params__=["fields"],R),TParent:((R=function(e){return{_hx_index:3,t:e,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TParent",R.__params__=["t"],R),TExtend:((R=function(e,t){return{_hx_index:4,p:e,fields:t,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TExtend",R.__params__=["p","fields"],R),TOptional:((R=function(e){return{_hx_index:5,t:e,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TOptional",R.__params__=["t"],R),TNamed:((R=function(e,t){return{_hx_index:6,n:e,t:t,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TNamed",R.__params__=["n","t"],R),TIntersection:((R=function(e){return{_hx_index:7,tl:e,__enum__:"haxe.macro.ComplexType",toString:o}})._hx_name="TIntersection",R.__params__=["tl"],R)},rx=(lx.__constructs__=[lx.TPath,lx.TFunction,lx.TAnonymous,lx.TParent,lx.TExtend,lx.TOptional,lx.TNamed,lx.TIntersection],lx.__empty_constructs__=[],fe["haxe.macro.TypeParam"]={__ename__:!0,__constructs__:null,TPType:((R=function(e){return{_hx_index:0,t:e,__enum__:"haxe.macro.TypeParam",toString:o}})._hx_name="TPType",R.__params__=["t"],R),TPExpr:((R=function(e){return{_hx_index:1,e:e,__enum__:"haxe.macro.TypeParam",toString:o}})._hx_name="TPExpr",R.__params__=["e"],R)}),ox=(rx.__constructs__=[rx.TPType,rx.TPExpr],rx.__empty_constructs__=[],fe["haxe.macro.Access"]={__ename__:!0,__constructs__:null,APublic:{_hx_name:"APublic",_hx_index:0,__enum__:"haxe.macro.Access",toString:o},APrivate:{_hx_name:"APrivate",_hx_index:1,__enum__:"haxe.macro.Access",toString:o},AStatic:{_hx_name:"AStatic",_hx_index:2,__enum__:"haxe.macro.Access",toString:o},AOverride:{_hx_name:"AOverride",_hx_index:3,__enum__:"haxe.macro.Access",toString:o},ADynamic:{_hx_name:"ADynamic",_hx_index:4,__enum__:"haxe.macro.Access",toString:o},AInline:{_hx_name:"AInline",_hx_index:5,__enum__:"haxe.macro.Access",toString:o},AMacro:{_hx_name:"AMacro",_hx_index:6,__enum__:"haxe.macro.Access",toString:o},AFinal:{_hx_name:"AFinal",_hx_index:7,__enum__:"haxe.macro.Access",toString:o},AExtern:{_hx_name:"AExtern",_hx_index:8,__enum__:"haxe.macro.Access",toString:o},AAbstract:{_hx_name:"AAbstract",_hx_index:9,__enum__:"haxe.macro.Access",toString:o},AOverload:{_hx_name:"AOverload",_hx_index:10,__enum__:"haxe.macro.Access",toString:o}}),ux=(ox.__constructs__=[ox.APublic,ox.APrivate,ox.AStatic,ox.AOverride,ox.ADynamic,ox.AInline,ox.AMacro,ox.AFinal,ox.AExtern,ox.AAbstract,ox.AOverload],ox.__empty_constructs__=[ox.APublic,ox.APrivate,ox.AStatic,ox.AOverride,ox.ADynamic,ox.AInline,ox.AMacro,ox.AFinal,ox.AExtern,ox.AAbstract,ox.AOverload],fe["haxe.macro.FieldType"]={__ename__:!0,__constructs__:null,FVar:((R=function(e,t){return{_hx_index:0,t:e,e:t,__enum__:"haxe.macro.FieldType",toString:o}})._hx_name="FVar",R.__params__=["t","e"],R),FFun:((R=function(e){return{_hx_index:1,f:e,__enum__:"haxe.macro.FieldType",toString:o}})._hx_name="FFun",R.__params__=["f"],R),FProp:((R=function(e,t,n,i){return{_hx_index:2,get:e,set:t,t:n,e:i,__enum__:"haxe.macro.FieldType",toString:o}})._hx_name="FProp",R.__params__=["get","set","t","e"],R)}),hx=(ux.__constructs__=[ux.FVar,ux.FFun,ux.FProp],ux.__empty_constructs__=[],(i["haxe.macro.Error"]=kp).__name__="haxe.macro.Error",kp.__super__=tl,kp.prototype=e(tl.prototype,{__class__:kp}),function(e){null==e&&(e="\t"),this.tabs="",this.tabString=e}),cx=((i["haxe.macro.Printer"]=hx).__name__="haxe.macro.Printer",hx.prototype={printUnop:function(e){switch(e._hx_index){case 0:return"++";case 1:return"--";case 2:return"!";case 3:return"-";case 4:return"~";case 5:return"..."}},printBinop:function(e){switch(e._hx_index){case 0:return"+";case 1:return"*";case 2:return"/";case 3:return"-";case 4:return"=";case 5:return"==";case 6:return"!=";case 7:return">";case 8:return">=";case 9:return"<";case 10:return"<=";case 11:return"&";case 12:return"|";case 13:return"^";case 14:return"&&";case 15:return"||";case 16:return"<<";case 17:return">>";case 18:return">>>";case 19:return"%";case 20:return this.printBinop(e.op)+"=";case 21:return"...";case 22:return"=>";case 23:return"in";case 24:return"??"}},escapeString:function(e,t){return t+Ae.replace(Ae.replace(Ae.replace(Ae.replace(Ae.replace(Ae.replace(e,"\\","\\\\"),"\n","\\n"),"\t","\\t"),"\r","\\r"),"'","\\'"),'"','\\"')+t},printFormatString:function(e){return this.escapeString(e,"'")},printString:function(e){return this.escapeString(e,'"')},printConstant:function(e){switch(e._hx_index){case 0:var t=e.v;return null==(n=e.s)?t:t+n;case 1:t=e.f;return null==(n=e.s)?t:t+n;case 2:var n,t=e.s;return null!=(n=e.kind)&&1==n._hx_index?this.printFormatString(t):this.printString(t);case 3:return e.s;case 4:return"~/"+e.r+"/"+e.opt}},printTypeParam:function(e){switch(e._hx_index){case 0:return this.printComplexType(e.t);case 1:return this.printExpr(e.e)}},printTypePath:function(e){var t,n=(0<e.pack.length?e.pack.join(".")+".":"")+e.name+(null!=e.sub?"."+e.sub:"");if(null==e.params)t="";else if(0<e.params.length){for(var i=e.params,s=Cn(this,this.printTypeParam),a=new Array(i.length),l=0,r=i.length;l<r;){var o=l++;a[o]=s(i[o])}t="<"+a.join(", ")+">"}else t="";return n+t},printComplexType:function(e){switch(e._hx_index){case 0:return this.printTypePath(e.p);case 1:var t,n=e.args,i=e.ret;if(1==n.length)switch((l=n[0])._hx_index){case 0:case 3:t=!1;break;case 5:t=0!=l.t._hx_index;break;default:t=!0}else t=!0;for(var s=Cn(this,this.printComplexType),a=new Array(n.length),l=0,r=n.length;l<r;)a[u=l++]=s(n[u]);var o=a.join(", ");return(t?"("+o+")":o)+" -> "+(1==i._hx_index?"("+this.printComplexType(i)+")":this.printComplexType(i));case 2:for(n=e.fields,i=[],l=0;l<n.length;)i.push(this.printField(n[l++])+"; ");return"{ "+i.join("")+"}";case 3:return"("+this.printComplexType(e.t)+")";case 4:for(n=e.p,i=e.fields,l=[],r=0;r<n.length;)l.push("> "+this.printTypePath(n[r++])+", ");for(o=l.join(""),n=[],l=0;l<i.length;)n.push(this.printField(i[l++])+"; ");return"{"+o+n.join("")+"}";case 5:return"?"+this.printComplexType(e.t);case 6:return e.n+":"+this.printComplexType(e.t);case 7:for(var u,n=e.tl,s=Cn(this,this.printComplexType),a=new Array(n.length),i=0,l=n.length;i<l;)a[u=i++]=s(n[u]);return a.join(" & ")}},printMetadata:function(e){return"@"+e.name+(null!=e.params&&0<e.params.length?"("+this.printExprs(e.params,", ")+")":"")},printAccess:function(e){switch(e._hx_index){case 0:return"public";case 1:return"private";case 2:return"static";case 3:return"override";case 4:return"dynamic";case 5:return"inline";case 6:return"macro";case 7:return"final";case 8:return"extern";case 9:return"abstract";case 10:return"overload"}},printField:function(e){var t=null!=e.doc&&""!=e.doc?"/**\n"+this.tabs+this.tabString+Ae.replace(e.doc,"\n","\n"+this.tabs+this.tabString)+"\n"+this.tabs+"**/\n"+this.tabs:"";if(null!=e.meta&&0<e.meta.length){for(var n=e.meta,i=Cn(this,this.printMetadata),s=new Array(n.length),a=0,l=n.length;a<l;)s[h=a++]=i(n[h]);c=s.join("\n"+this.tabs)+("\n"+this.tabs)}else c="";var r=t+c;if(null!=e.access&&0<e.access.length){var o=e.access;if(be.has(o,ox.AFinal)){for(a=[],l=0;l<o.length;){var u=o[l];++l,7!=u._hx_index&&a.push(u)}n=a.concat([ox.AFinal])}else n=o;for(var h,i=Cn(this,this.printAccess),s=new Array(n.length),a=0,l=n.length;a<l;)s[h=a++]=i(n[h]);t=s.join(" ")+" "}else t="";var c=r+t;switch((a=e.kind)._hx_index){case 0:t=(null!=e.access&&be.has(e.access,ox.AFinal)?"":"var ")+e.name+this.opt(a.t,Cn(this,this.printComplexType)," : ")+this.opt(a.e,Cn(this,this.printExpr)," = ");break;case 1:t="function "+e.name+this.printFunction(a.f);break;case 2:t="var "+e.name+"("+a.get+", "+a.set+")"+this.opt(a.t,Cn(this,this.printComplexType)," : ")+this.opt(a.e,Cn(this,this.printExpr)," = ")}return c+t},printTypeParamDecl:function(e){if(null!=e.meta&&0<e.meta.length){for(var t=e.meta,n=Cn(this,this.printMetadata),i=new Array(t.length),s=0,a=t.length;s<a;)i[o=s++]=n(t[o]);r=i.join(" ")+" "}else r="";var l=r+e.name;if(null!=e.params&&0<e.params.length){for(t=e.params,n=Cn(this,this.printTypeParamDecl),i=new Array(t.length),s=0,a=t.length;s<a;)i[o=s++]=n(t[o]);r="<"+i.join(", ")+">"}else r="";var r,l=l+r;if(null!=e.constraints&&0<e.constraints.length){for(var o,t=e.constraints,n=Cn(this,this.printComplexType),i=new Array(t.length),s=0,a=t.length;s<a;)i[o=s++]=n(t[o]);r=":("+i.join(", ")+")"}else r="";return l+r+(null!=e.defaultType?"="+this.printComplexType(e.defaultType):"")},printFunctionArg:function(e){return(e.opt?"?":"")+e.name+this.opt(e.type,Cn(this,this.printComplexType),":")+this.opt(e.value,Cn(this,this.printExpr)," = ")},printFunction:function(e,t){var n=1==(l=e.args).length&&null==l[0].type&&t==sx.FArrow;if(null==e.params)u="";else if(0<e.params.length){for(var i=e.params,s=Cn(this,this.printTypeParamDecl),a=new Array(i.length),l=0,r=i.length;l<r;)a[o=l++]=s(i[o]);u="<"+a.join(", ")+">"}else u="";for(var o,u=u+(n?"":"("),i=e.args,s=Cn(this,this.printFunctionArg),a=new Array(i.length),l=0,r=i.length;l<r;)a[o=l++]=s(i[o]);return u+a.join(", ")+(n?"":")")+(t==sx.FArrow?" ->":"")+this.opt(e.ret,Cn(this,this.printComplexType),":")+this.opt(e.expr,Cn(this,this.printExpr)," ")},printVar:function(e){var t=e.name+this.opt(e.type,Cn(this,this.printComplexType),":")+this.opt(e.expr,Cn(this,this.printExpr)," = "),n=e.meta;if(null==n)return t;if(0==n.length)return t;for(var i=Cn(this,this.printMetadata),s=new Array(n.length),a=0,l=n.length;a<l;){var r=a++;s[r]=i(n[r])}return s.join(" ")+" "+t},printObjectFieldKey:function(e){var t=e.quotes;if(null==t)return e.field;switch(t._hx_index){case 0:return e.field;case 1:return'"'+e.field+'"'}},printObjectField:function(e){return this.printObjectFieldKey(e)+" : "+this.printExpr(e.expr)},printExpr:function(e){if(null==e)return"#NULL";var t=e.expr;switch(t._hx_index){case 0:return this.printConstant(t.c);case 1:return this.printExpr(t.e1)+"["+this.printExpr(t.e2)+"]";case 2:return this.printExpr(t.e1)+" "+this.printBinop(t.op)+" "+this.printExpr(t.e2);case 3:var n=t.e,i=t.field;return t.kind==ix.Safe?this.printExpr(n)+"?."+i:this.printExpr(n)+"."+i;case 4:return"("+this.printExpr(t.e)+")";case 5:for(var n=t.fields,s=new Array(n.length),i=0,a=n.length;i<a;)s[_=i++]=this.printObjectField(n[_]);return"{ "+s.join(", ")+" }";case 6:return"["+this.printExprs(t.values,", ")+"]";case 7:return this.printExpr(t.e)+"("+this.printExprs(t.params,", ")+")";case 8:return"new "+this.printTypePath(t.t)+"("+this.printExprs(t.params,", ")+")";case 9:var n=t.op,i=t.e;return t.postFix?this.printExpr(i)+this.printUnop(n):this.printUnop(n)+this.printExpr(i);case 10:if(0==(n=t.vars).length)return"var ";for(var l=(n[0].isStatic?"static ":"")+(n[0].isFinal?"final ":"var "),r=Cn(this,this.printVar),s=new Array(n.length),i=0,a=n.length;i<a;)s[_=i++]=r(n[_]);return l+s.join(", ");case 11:n=t.kind,i=t.f;return null!=n&&1==n._hx_index?(n.inlined?"inline ":"")+"function "+n.name+this.printFunction(i):(n!=sx.FArrow?"function":"")+this.printFunction(i,n);case 12:return 0==(n=t.exprs).length?"{ }":(o=this.tabs,this.tabs+=this.tabString,u="{\n"+this.tabs+this.printExprs(n,";\n"+this.tabs),this.tabs=o,u+(";\n"+this.tabs)+"}");case 13:return"for ("+this.printExpr(t.it)+") "+this.printExpr(t.expr);case 14:n=t.econd,i=t.eif;return null==(a=t.eelse)?"if ("+this.printExpr(n)+") "+this.printExpr(i):"if ("+this.printExpr(n)+") "+this.printExpr(i)+" else "+this.printExpr(a);case 15:n=t.econd,i=t.e;return t.normalWhile?"while ("+this.printExpr(n)+") "+this.printExpr(i):"do "+this.printExpr(i)+" while ("+this.printExpr(n)+")";case 16:for(var n=t.cases,i=t.edef,o=this.tabs,u=(this.tabs+=this.tabString,"switch "+this.printExpr(t.e)+" {\n"+this.tabs),s=new Array(n.length),a=0,h=n.length;a<h;){var c=n[_=a++];s[_]="case "+this.printExprs(c.values,", ")+(null!=c.guard?" if ("+this.printExpr(c.guard)+"):":":")+(null!=c.expr?this.opt(c.expr,Cn(this,this.printExpr))+";":"")}u=u+s.join("\n"+this.tabs);return null!=i&&(u+="\n"+this.tabs+"default:"+(null==i.expr?"":this.printExpr(i)+";")),this.tabs=o,u+("\n"+this.tabs)+"}";case 17:for(n=t.catches,l="try "+this.printExpr(t.e),s=new Array(n.length),i=0,a=n.length;i<a;){var _,c=n[_=i++];s[_]=" catch("+c.name+(null==c.type?"":":"+this.printComplexType(c.type))+") "+this.printExpr(c.expr)}return l+s.join("");case 18:return"return"+this.opt(t.e,Cn(this,this.printExpr)," ");case 19:return"break";case 20:return"continue";case 21:return"untyped "+this.printExpr(t.e);case 22:return"throw "+this.printExpr(t.e);case 23:n=t.e;return null!=(i=t.t)?"cast("+this.printExpr(n)+", "+this.printComplexType(i)+")":"cast "+this.printExpr(n);case 24:return"#DISPLAY("+this.printExpr(t.e)+")";case 25:return this.printExpr(t.econd)+" ? "+this.printExpr(t.eif)+" : "+this.printExpr(t.eelse);case 26:return"("+this.printExpr(t.e)+" : "+this.printComplexType(t.t)+")";case 27:n=t.s,i=t.e;return":implicitReturn"==n.name&&18==(a=i.expr)._hx_index?this.printExpr(a.e):this.printMetadata(n)+" "+this.printExpr(i);case 28:return this.printExpr(t.e)+" is "+this.printComplexType(t.t)}},printExprs:function(e,t){for(var n=Cn(this,this.printExpr),i=new Array(e.length),s=0,a=e.length;s<a;){var l=s++;i[l]=n(e[l])}return i.join(t)},opt:function(e,t,n){return null==n&&(n=""),null==e?"":n+t(e)},__class__:hx},{}),_x=(cx.resolve=function(e,t){var n,i=e.elementsNamed(t).next();if(null==i){if(e.nodeType==we.Document)n="Document";else{if(e.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":ye.toString(e.nodeType)));n=e.nodeName}throw tl.thrown(n+" is missing element "+t)}if(i.nodeType!=we.Document&&i.nodeType!=we.Element)throw tl.thrown("Invalid nodeType "+(null==i.nodeType?"null":ye.toString(i.nodeType)));return i},{}),dx=(_x.resolve=function(e,t){if(e.nodeType==we.Document)throw tl.thrown("Cannot access document attribute "+t);var n=e.get(t);if(null!=n)return n;if(e.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":ye.toString(e.nodeType)));throw tl.thrown(e.nodeName+" is missing attribute "+t)},{}),px=(dx.resolve=function(e,t){return e.elementsNamed(t).hasNext()},(i["haxe.xml.XmlParserException"]=Mp).__name__="haxe.xml.XmlParserException",Mp.prototype={toString:function(){return nl.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Mp},function(){}),mx=((i["haxe.xml.Parser"]=px).__name__="haxe.xml.Parser",px.parse=function(e,t){null==t&&(t=!1);var n=we.createDocument();return px.doParse(e,t,0,n),n},px.doParse=function(e,t,n,i){null==n&&(n=0);for(var s=null,a=1,l=1,r=null,o=0,u=0,h=0,c=new b,_=1,d=-1;n<e.length;){var p,m,g,f=e.charCodeAt(n);switch(a){case 0:switch(f){case 9:case 10:case 13:case 32:break;default:a=l;continue}break;case 1:if(60!=f){o=n,a=13;continue}a=0,l=2;break;case 2:switch(f){case 33:if(91==e.charCodeAt(n+1)){if(n+=2,"CDATA["!=Jn.substr(e,n,6).toUpperCase())throw tl.thrown(new Mp("Expected <![CDATA[",e,n));a=17,o=(n+=5)+1}else if(68==e.charCodeAt(n+1)||100==e.charCodeAt(n+1)){if("OCTYPE"!=Jn.substr(e,n+2,6).toUpperCase())throw tl.thrown(new Mp("Expected <!DOCTYPE",e,n));a=16,o=(n+=8)+1}else{if(45!=e.charCodeAt(n+1)||45!=e.charCodeAt(n+2))throw tl.thrown(new Mp("Expected \x3c!--",e,n));a=15,o=(n+=2)+1}break;case 47:if(null==i)throw tl.thrown(new Mp("Expected node name",e,n));o=n+1,a=0,l=10;break;case 63:a=14,o=n;break;default:a=3,o=n;continue}break;case 3:if(97<=f&&f<=122||65<=f&&f<=90||48<=f&&f<=57||58==f||46==f||95==f||45==f)break;if(n==o)throw tl.thrown(new Mp("Expected node name",e,n));s=we.createElement(Jn.substr(e,o,n-o)),i.addChild(s),++u,a=0,l=4;continue;case 4:switch(f){case 47:a=11;break;case 62:a=9;break;default:a=5,o=n;continue}break;case 5:if(97<=f&&f<=122||65<=f&&f<=90||48<=f&&f<=57||58==f||46==f||95==f||45==f)break;if(o==n)throw tl.thrown(new Mp("Expected attribute name",e,n));if(r=Jn.substr(e,o,n-o),s.exists(r))throw tl.thrown(new Mp("Duplicate attribute ["+r+"]",e,n));a=0,l=6;continue;case 6:if(61!=f)throw tl.thrown(new Mp("Expected =",e,n));a=0,l=7;break;case 7:switch(f){case 34:case 39:c=new b,a=8,o=n+1,d=f;break;default:throw tl.thrown(new Mp('Expected "',e,n))}break;case 8:switch(f){case 38:var A=n-o;c.b+=null==A?Jn.substr(e,o,null):Jn.substr(e,o,A),a=18,_=8,o=n+1;break;case 60:case 62:if(t)throw tl.thrown(new Mp("Invalid unescaped "+String.fromCodePoint(f)+" in attribute value",e,n));f==d&&(c.b+=null==(p=n-o)?Jn.substr(e,o,null):Jn.substr(e,o,p),p=c.b,c=new b,s.set(r,p),a=0,l=4);break;default:f==d&&(c.b+=null==(p=n-o)?Jn.substr(e,o,null):Jn.substr(e,o,p),m=c.b,c=new b,s.set(r,m),a=0,l=4)}break;case 9:o=n=px.doParse(e,t,n,s),a=1;break;case 10:if(97<=f&&f<=122||65<=f&&f<=90||48<=f&&f<=57||58==f||46==f||95==f||45==f)break;if(o==n)throw tl.thrown(new Mp("Expected node name",e,n));var x=Jn.substr(e,o,n-o);if(null==i||0!=i.nodeType)throw tl.thrown(new Mp("Unexpected </"+x+">, tag is not open",e,n));if(i.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":ye.toString(i.nodeType)));if(x!=i.nodeName){if(i.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":ye.toString(i.nodeType)));throw tl.thrown(new Mp("Expected </"+i.nodeName+">",e,n))}a=0,l=12;continue;case 11:if(62!=f)throw tl.thrown(new Mp("Expected >",e,n));a=1;break;case 12:if(62==f)return 0==u&&i.addChild(we.createPCData("")),n;throw tl.thrown(new Mp("Expected >",e,n));case 13:60==f?(c.b+=null==(x=n-o)?Jn.substr(e,o,null):Jn.substr(e,o,x),g=we.createPCData(c.b),c=new b,i.addChild(g),++u,a=0,l=2):38==f&&(c.b+=null==(g=n-o)?Jn.substr(e,o,null):Jn.substr(e,o,g),a=18,_=13,o=n+1);break;case 14:63==f&&62==e.charCodeAt(n+1)&&(++n,i.addChild(we.createProcessingInstruction(Jn.substr(e,o+1,n-o-2))),++u,a=1);break;case 15:45==f&&45==e.charCodeAt(n+1)&&62==e.charCodeAt(n+2)&&(i.addChild(we.createComment(Jn.substr(e,o,n-o))),++u,n+=2,a=1);break;case 16:91==f?++h:93==f?--h:62==f&&0==h&&(i.addChild(we.createDocType(Jn.substr(e,o,n-o))),++u,a=1);break;case 17:93==f&&93==e.charCodeAt(n+1)&&62==e.charCodeAt(n+2)&&(i.addChild(we.createCData(Jn.substr(e,o,n-o))),++u,n+=2,a=1);break;case 18:if(59==f){var w=Jn.substr(e,o,n-o);if(35==w.charCodeAt(0)){var y=120==w.charCodeAt(1)?el.parseInt("0"+Jn.substr(w,1,w.length-1)):el.parseInt(Jn.substr(w,1,w.length-1));c.b+=String.fromCodePoint(y)}else if(Object.prototype.hasOwnProperty.call(px.escapes.h,w))c.b+=el.string(px.escapes.h[w]);else{if(t)throw tl.thrown(new Mp("Undefined entity: "+w,e,n));c.b+=el.string("&"+w+";")}o=n+1,a=_}else if(!(97<=f&&f<=122||65<=f&&f<=90||48<=f&&f<=57||58==f||46==f||95==f||45==f)&&35!=f){if(t)throw tl.thrown(new Mp("Invalid character in entity: "+String.fromCodePoint(f),e,n));c.b+=String.fromCodePoint(38);y=n-o;c.b+=null==y?Jn.substr(e,o,null):Jn.substr(e,o,y),o=--n+1,a=_}}++n}if(1==a&&(o=n,a=13),13==a){if(0==i.nodeType){if(i.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==i.nodeType?"null":ye.toString(i.nodeType)));throw tl.thrown(new Mp("Unclosed node <"+i.nodeName+">",e,n))}n==o&&0!=u||(c.b+=null==(A=n-o)?Jn.substr(e,o,null):Jn.substr(e,o,A),i.addChild(we.createPCData(c.b)),++u)}else{if(t||18!=a||13!=_)throw tl.thrown(new Mp("Unexpected end",e,n));c.b+=String.fromCodePoint(38),c.b+=null==(A=n-o)?Jn.substr(e,o,null):Jn.substr(e,o,A),i.addChild(we.createPCData(c.b)),++u}return n},function(e){this.output=new b,this.pretty=e}),gx=((i["haxe.xml.Printer"]=mx).__name__="haxe.xml.Printer",mx.print=function(e,t){t=new mx(t=null==t?!1:t);return t.writeNode(e,""),t.output.b},mx.prototype={writeNode:function(e,t){switch(e.nodeType){case 0:if(this.output.b+=el.string(t+"<"),e.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":ye.toString(e.nodeType)));this.output.b+=el.string(e.nodeName);for(var n=e.attributes();n.hasNext();){var i=n.next(),s=(this.output.b+=el.string(" "+i+'="'),Ae.htmlEscape(e.get(i),!0));this.output.b+=el.string(s),this.output.b+='"'}if(this.hasChildren(e)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),e.nodeType!=we.Document&&e.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":ye.toString(e.nodeType)));for(var a=e.children,l=0;l<a.length;)this.writeNode(a[l++],this.pretty?t+"\t":t);if(this.output.b+=el.string(t+"</"),e.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":ye.toString(e.nodeType)));this.output.b+=el.string(e.nodeName),this.output.b+=">"}else this.output.b+="/>";this.pretty&&(this.output.b+="\n");break;case 1:if(e.nodeType==we.Document||e.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":ye.toString(e.nodeType)));var r=e.nodeValue;0!=r.length&&(s=t+Ae.htmlEscape(r),this.output.b+=el.string(s),this.pretty)&&(this.output.b+="\n");break;case 2:if(this.output.b+=el.string(t+"<![CDATA["),e.nodeType==we.Document||e.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":ye.toString(e.nodeType)));this.output.b+=el.string(e.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(e.nodeType==we.Document||e.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":ye.toString(e.nodeType)));var r=e.nodeValue,o=new RegExp("[\n\r\t]+","g".split("u").join(""));r="\x3c!--"+(r=r.replace(o,""))+"--\x3e",this.output.b+=null==t?"null":""+t,this.output.b+=el.string(Ae.trim(r)),this.pretty&&(this.output.b+="\n");break;case 4:if(e.nodeType==we.Document||e.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":ye.toString(e.nodeType)));this.output.b+=el.string("<!DOCTYPE "+e.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(e.nodeType==we.Document||e.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":ye.toString(e.nodeType)));this.output.b+=el.string("<?"+e.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(e.nodeType!=we.Document&&e.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":ye.toString(e.nodeType)));for(a=e.children,l=0;l<a.length;)this.writeNode(a[l++],t)}},hasChildren:function(e){if(e.nodeType!=we.Document&&e.nodeType!=we.Element)throw tl.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":ye.toString(e.nodeType)));for(var t=e.children,n=0;n<t.length;){var i=t[n++];switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==we.Document||i.nodeType==we.Element)throw tl.thrown("Bad node type, unexpected "+(null==i.nodeType?"null":ye.toString(i.nodeType)));if(0!=Ae.ltrim(i.nodeValue).length)return!0}}return!1},__class__:mx},fe["haxe.zip.Huffman"]={__ename__:!0,__constructs__:null,Found:((R=function(e){return{_hx_index:0,i:e,__enum__:"haxe.zip.Huffman",toString:o}})._hx_name="Found",R.__params__=["i"],R),NeedBit:((R=function(e,t){return{_hx_index:1,left:e,right:t,__enum__:"haxe.zip.Huffman",toString:o}})._hx_name="NeedBit",R.__params__=["left","right"],R),NeedBits:((R=function(e,t){return{_hx_index:2,n:e,table:t,__enum__:"haxe.zip.Huffman",toString:o}})._hx_name="NeedBits",R.__params__=["n","table"],R)}),fx=(gx.__constructs__=[gx.Found,gx.NeedBit,gx.NeedBits],gx.__empty_constructs__=[],(i["haxe.zip.HuffTools"]=Ip).__name__="haxe.zip.HuffTools",Ip.prototype={treeDepth:function(e){switch(e._hx_index){case 0:return 0;case 1:var t=this.treeDepth(e.left),n=this.treeDepth(e.right);return 1+(t<n?t:n);case 2:throw tl.thrown("assert")}},treeCompress:function(e){var t=this.treeDepth(e);if(0==t)return e;if(1==t){if(1==e._hx_index)return gx.NeedBit(this.treeCompress(e.left),this.treeCompress(e.right));throw tl.thrown("assert")}for(var n=1<<t,i=[],s=0;s<n;)++s,i.push(gx.Found(-1));return this.treeWalk(i,0,0,t,e),gx.NeedBits(t,i)},treeWalk:function(e,t,n,i,s){1==s._hx_index&&0<i?(this.treeWalk(e,t,n+1,i-1,s.left),this.treeWalk(e,t|1<<n,n+1,i-1,s.right)):e[t]=this.treeCompress(s)},treeMake:function(e,t,n,i){if(t<i)throw tl.thrown("Invalid huffman");var s=n<<5|i;return e.h.hasOwnProperty(s)?gx.Found(e.h[s]):gx.NeedBit(this.treeMake(e,t,n<<=1,++i),this.treeMake(e,t,1|n,i))},make:function(e,t,n,i){if(1==n)return gx.NeedBit(gx.Found(0),gx.Found(0));var s=[],a=[];if(32<i)throw tl.thrown("Invalid huffman");for(var l=0;l<i;)++l,s.push(0),a.push(0);for(l=0;l<n;){var r=e[l+++t];if(i<=r)throw tl.thrown("Invalid huffman");s[r]++}for(var o=0,l=1,u=i-1;l<u;){o=o+s[c=l++]<<1;a[c]=o}for(var h=new Je,l=0;l<n;){var c,_,d=e[(c=l++)+t];0!=d&&(a[d-1]=(_=a[d-1])+1,h.h[_<<5|d]=c)}return this.treeCompress(gx.NeedBit(this.treeMake(h,i,0,1),this.treeMake(h,i,1,1)))},__class__:Ip},(i["haxe.zip._InflateImpl.Window"]=Bp).__name__="haxe.zip._InflateImpl.Window",Bp.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var e=new IA(new ArrayBuffer(65536));this.pos-=32768,e.blit(0,this.buffer,32768,this.pos),this.buffer=e},addBytes:function(e,t,n){65536<this.pos+n&&this.slide(),this.buffer.blit(this.pos,e,t,n),this.pos+=n},addByte:function(e){65536==this.pos&&this.slide(),this.buffer.b[this.pos]=e,this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){return null!=this.crc&&this.crc.update(this.buffer,0,this.pos),this.crc},__class__:Bp},fe["haxe.zip._InflateImpl.State"]={__ename__:!0,__constructs__:null,Head:{_hx_name:"Head",_hx_index:0,__enum__:"haxe.zip._InflateImpl.State",toString:o},Block:{_hx_name:"Block",_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:o},CData:{_hx_name:"CData",_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:o},Flat:{_hx_name:"Flat",_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:o},Crc:{_hx_name:"Crc",_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:o},Dist:{_hx_name:"Dist",_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:o},DistOne:{_hx_name:"DistOne",_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",toString:o},Done:{_hx_name:"Done",_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",toString:o}}),Ax=(fx.__constructs__=[fx.Head,fx.Block,fx.CData,fx.Flat,fx.Crc,fx.Dist,fx.DistOne,fx.Done],fx.__empty_constructs__=[fx.Head,fx.Block,fx.CData,fx.Flat,fx.Crc,fx.Dist,fx.DistOne,fx.Done],(i["haxe.zip.InflateImpl"]=Tp).__name__="haxe.zip.InflateImpl",Tp.run=function(e,t){null==t&&(t=65536);for(var n=new IA(new ArrayBuffer(t)),i=new jA,s=new Tp(e);;){var a=s.readBytes(n,0,t);if(i.addBytes(n,0,a),a<t)break}return i.getBytes()},Tp.prototype={buildFixedHuffman:function(){if(null==Tp.FIXED_HUFFMAN){for(var e=[],t=0;t<288;){var n=t++;e.push(n<=143?8:n<=255?9:n<=279?7:8)}Tp.FIXED_HUFFMAN=this.htools.make(e,0,288,10)}return Tp.FIXED_HUFFMAN},readBytes:function(e,t,n){if(this.needed=n,this.outpos=t,this.output=e,0<n)for(;this.inflateLoop(););return n-this.needed},getBits:function(e){for(;this.nbits<e;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var t=this.bits&(1<<e)-1;return this.nbits-=e,this.bits>>=e,t},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var e=1==(1&this.bits);return this.nbits--,this.bits>>=1,e},getRevBits:function(e){return 0==e?0:this.getBit()?1<<e-1|this.getRevBits(e-1):this.getRevBits(e-1)},resetBits:function(){this.bits=0,this.nbits=0},addBytes:function(e,t,n){this.window.addBytes(e,t,n),this.output.blit(this.outpos,e,t,n),this.needed-=n,this.outpos+=n},addByte:function(e){this.window.addByte(e),this.output.b[this.outpos]=e,this.needed--,this.outpos++},addDistOne:function(e){for(var t=this.window.getLastChar(),n=0;n<e;)++n,this.addByte(t)},addDist:function(e,t){this.addBytes(this.window.buffer,this.window.pos-e,t)},applyHuffman:function(e){switch(e._hx_index){case 0:return e.i;case 1:return this.applyHuffman(this.getBit()?e.right:e.left);case 2:return this.applyHuffman(e.table[this.getBits(e.n)])}},inflateLengths:function(e,t){for(var n=0,i=0;n<t;){var s=this.applyHuffman(this.huffman);switch(s){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:e[n]=i=s,++n;break;case 16:var a=n+3+this.getBits(2);if(t<a)throw tl.thrown("Invalid data");for(;n<a;)e[n]=i,++n;break;case 17:if(t<(n+=3+this.getBits(3)))throw tl.thrown("Invalid data");break;case 18:if(t<(n+=11+this.getBits(7)))throw tl.thrown("Invalid data");break;default:throw tl.thrown("Invalid data")}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var e=this.input.readByte();if(8!=(15&e))throw tl.thrown("Invalid data");var t=this.input.readByte();if(((e<<8)+t)%31!=0)throw tl.thrown("Invalid data");if(0!=(32&t))throw tl.thrown("Unsupported dictionary");return this.state=fx.Block,!0;case 1:switch(this.isFinal=this.getBit(),this.getBits(2)){case 0:if(this.len=this.input.readUInt16(),this.input.readUInt16()!=65535-this.len)throw tl.thrown("Invalid data");this.state=fx.Flat;var n=this.inflateLoop();return this.resetBits(),n;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=fx.CData,!0;case 2:for(var n=this.getBits(5)+257,i=this.getBits(5)+1,s=this.getBits(4)+4,a=0;a<s;)this.lengths[Tp.CODE_LENGTHS_POS[a++]]=this.getBits(3);for(a=s;a<19;)this.lengths[Tp.CODE_LENGTHS_POS[a++]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);for(var l=[],a=0,r=n+i;a<r;)++a,l.push(0);return this.inflateLengths(l,n+i),this.huffdist=this.htools.make(l,n,i,16),this.huffman=this.htools.make(l,0,n,16),this.state=fx.CData,!0;default:throw tl.thrown("Invalid data")}break;case 2:e=this.applyHuffman(this.huffman);if(e<256)return this.addByte(e),0<this.needed;if(256==e)this.state=this.isFinal?fx.Crc:fx.Block;else{t=Tp.LEN_EXTRA_BITS_TBL[e-=257];if(-1==t)throw tl.thrown("Invalid data");this.len=Tp.LEN_BASE_VAL_TBL[e]+this.getBits(t);e=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);if(-1==(t=Tp.DIST_EXTRA_BITS_TBL[e]))throw tl.thrown("Invalid data");if(this.dist=Tp.DIST_BASE_VAL_TBL[e]+this.getBits(t),this.dist>this.window.available())throw tl.thrown("Invalid data");this.state=1==this.dist?fx.DistOne:fx.Dist}return!0;case 3:var o=this.len<this.needed?this.len:this.needed,e=this.input.read(o);return this.len-=o,this.addBytes(e,0,o),0==this.len&&(this.state=this.isFinal?fx.Crc:fx.Block),0<this.needed;case 4:t=this.window.checksum();if(null==t);else if(!t.equals(gp.read(this.input)))throw tl.thrown("Invalid CRC");return this.state=fx.Done,!0;case 5:for(;0<this.len&&0<this.needed;){var u=this.len<this.dist?this.len:this.dist,o=this.needed<u?this.needed:u;this.addDist(this.dist,o),this.len-=o}return 0==this.len&&(this.state=fx.CData),0<this.needed;case 6:o=this.len<this.needed?this.len:this.needed;return this.addDistOne(o),this.len-=o,0==this.len&&(this.state=fx.CData),0<this.needed;case 7:return!1}},__class__:Tp},function(){}),xx=((i["haxe.zip.Uncompress"]=Ax).__name__="haxe.zip.Uncompress",Ax.run=function(e,t){return Tp.run(new HA(e),t)},(i["hex.collection.IHashMap"]=Ep).__name__="hex.collection.IHashMap",Ep.__isInterface__=!0,(i["hex.collection.ArrayMap"]=Fp).__name__="hex.collection.ArrayMap",Fp.__interfaces__=[Ep],Fp.prototype={containsKey:function(e){if(null!=e)return-1!=Ix.indexOf(this._k,e);throw tl.thrown(new Mx("Key can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:48,className:"hex.collection.ArrayMap",methodName:"containsKey"}))},put:function(e,t){var n=null;if(null==e)throw tl.thrown(new Mx("Key can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:136,className:"hex.collection.ArrayMap",methodName:"put"}));if(null==t)throw tl.thrown(new Mx("Value can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:140,className:"hex.collection.ArrayMap",methodName:"put"}));var i=Ix.indexOf(this._k,e);return-1==i?(this._k.push(e),this._v.push(t)):(n=this._v[i],this._v[i]=t),n},remove:function(e){var t=null;if(null==e)throw tl.thrown(new Mx("Key can't be null",{fileName:"hex/collection/ArrayMap.hx",lineNumber:206,className:"hex.collection.ArrayMap",methodName:"remove"}));e=Ix.indexOf(this._k,e);return-1==e?null:(e==this._k.length-1?(this._k.pop(),t=this._v.pop()):(t=this._v[e],this._k[e]=this._k.pop(),this._v[e]=this._v.pop()),t)},__class__:Fp},{}),wx=(xx.ofClassRef=function(e){return e.__name__},(i["hex.di.IBasicInjector"]=Dp).__name__="hex.di.IBasicInjector",Dp.__isInterface__=!0,Dp.prototype={__class__:Dp},(i["hex.di.IDependencyInjector"]=Rp).__name__="hex.di.IDependencyInjector",Rp.__isInterface__=!0,Rp.__interfaces__=[Dp],Rp.prototype={__class__:Rp},(i["hex.di.IInjectorListener"]=Pp).__name__="hex.di.IInjectorListener",Pp.__isInterface__=!0,Pp.prototype={__class__:Pp},function(){this.trigger=new bx,this._mapping=new at,this._processedMapping=new at,this._managedObjects=new Fp}),yx=((i["hex.di.Injector"]=wx).__name__="hex.di.Injector",wx.__interfaces__=[Rp],wx.prototype={mapToValue:function(e,t,n){e=this.map(e,n);e.provider=new kx(t,e._injector)},getInstance:function(e,t,n){var i=yx.makeId(xx.ofClassRef(e),t),s=this._mapping.h[i];if(null!=s)return s.getResult(n);if(null!=this._parentInjector)return this._parentInjector.getInstance(e,t,n);throw tl.thrown(new Cx("Injector is missing a mapping to get instance with type '"+e.__name__+"'. Target dependency: '"+i+"'",{fileName:"hex/di/Injector.hx",lineNumber:88,className:"hex.di.Injector",methodName:"getInstance"}))},getInstanceWithClassName:function(e,t,n,i){null==i&&(i=!0);var s=yx.makeId(e,t),a=this._mapping.h[s];if(null!=a)return a.getResult(n);if(null!=this._parentInjector)return this._parentInjector.getInstanceWithClassName(e,t,n);if(i)throw a="Injector is missing a mapping to get instance with type '"+(null==e?"null":e)+"'",a+=null!=n?" in class '"+n.__name__+"'.":".",tl.thrown(new Cx(a+=" Target dependency: '"+s+"'",{fileName:"hex/di/Injector.hx",lineNumber:111,className:"hex.di.Injector",methodName:"getInstanceWithClassName"}));return null},instantiateUnmapped:function(t){var n,i;try{n=t.__ac(Cn(this,this.getInstanceWithClassName))}catch(e){if(CA.lastError=e,(i=tl.caught(e).unwrap())instanceof Cx)throw tl.thrown(i);n=U.createInstance(t,[])}try{null!=n.acceptInjector&&this._applyInjection(n,t)}catch(e){if(CA.lastError=e,(i=tl.caught(e).unwrap())instanceof Cx)throw tl.thrown(i)}return n},unmap:function(e,t){var e=yx.makeId(xx.ofClassRef(e),t),t=this._mapping.h[e];null!=t&&(t.provider.destroy(),t=this._mapping,Object.prototype.hasOwnProperty.call(t.h,e))&&delete t.h[e]},destroyInstance:function(e){this._managedObjects.containsKey(e)&&(this._managedObjects.remove(e),e.__ap())},map:function(e,t){e=yx.makeId(xx.ofClassRef(e),t);return null!=this._mapping.h[e]?this._mapping.h[e]:this._createMapping(e)},_createMapping:function(e){if(this._processedMapping.h[e])throw tl.thrown(new vx("Mapping named '"+e+"' is already processing",{fileName:"hex/di/Injector.hx",lineNumber:342,className:"hex.di.Injector",methodName:"_createMapping"}));this._processedMapping.h[e]=!0;var t=new Sx(this,e),n=(this._mapping.h[e]=t,this._processedMapping);return Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e],t},_applyInjection:function(e,t){this.trigger.onPreConstruct(this,e,t),e.acceptInjector(this);try{null!=e.__ap&&this._managedObjects.put(e,e)}catch(e){CA.lastError=e}this.trigger.onPostConstruct(this,e,t)},__class__:wx},{}),bx=(yx.makeId=function(e,t){return e+"|"+(null==t?"":t)},(i["hex.event.ITrigger"]=zp).__name__="hex.event.ITrigger",zp.__isInterface__=!0,function(){this._inputs=[]}),vx=((i["hex.di.__Trigger_Class_For__IInjectorListener"]=bx).__name__="hex.di.__Trigger_Class_For__IInjectorListener",bx.__interfaces__=[zp,Pp],bx.prototype={onPreConstruct:function(e,t,n){for(var i=this._inputs.slice(),s=0;s<i.length;)i[s++].onPreConstruct(e,t,n)},onPostConstruct:function(e,t,n){for(var i=this._inputs.slice(),s=0;s<i.length;)i[s++].onPostConstruct(e,t,n)},__class__:bx},(i["tink.core.TypedError"]=Qp).__name__="tink.core.TypedError",Qp.withData=function(e,t,n,i){return Qp.typed(e,t,n,i)},Qp.typed=function(e,t,n,i){e=new Qp(e,t,i);return e.data=n,e},Qp.prototype={printPos:function(){return this.pos.className+"."+this.pos.methodName+":"+this.pos.lineNumber},toString:function(){var e="Error#"+this.code+": "+this.message;return null!=this.pos&&(e+=" @ "+this.printPos()),e},__class__:Qp},function(e,t){Qp.call(this,this.code,e,this.pos)}),Cx=((i["hex.di.error.InjectorException"]=vx).__name__="hex.di.error.InjectorException",vx.__super__=Qp,vx.prototype=e(Qp.prototype,{__class__:vx}),function(e,t){vx.call(this,e,t)}),Sx=((i["hex.di.error.MissingMappingException"]=Cx).__name__="hex.di.error.MissingMappingException",Cx.__super__=vx,Cx.prototype=e(vx.prototype,{__class__:Cx}),function(e,t){this._injector=e,this._mappingID=t}),kx=((i["hex.di.mapping.InjectionMapping"]=Sx).__name__="hex.di.mapping.InjectionMapping",Sx.prototype={getResult:function(e){if(null==this.provider)throw tl.thrown(new Mx("can't retrieve result, mapping with id '"+this._mappingID+"' has no provider",{fileName:"hex/di/mapping/InjectionMapping.hx",lineNumber:34,className:"hex.di.mapping.InjectionMapping",methodName:"getResult"}));return this.provider.getResult(this._injector,e)},__class__:Sx},(i["hex.di.provider.IDependencyProvider"]=Vp).__name__="hex.di.provider.IDependencyProvider",Vp.__isInterface__=!0,Vp.prototype={__class__:Vp},function(e,t){this._value=e,this._injector=t}),Mx=((i["hex.di.provider.ValueProvider"]=kx).__name__="hex.di.provider.ValueProvider",kx.__interfaces__=[Vp],kx.prototype={getResult:function(e,t){return this._value},destroy:function(){this._injector.destroyInstance(this._value),this._injector=null,this._value=null},__class__:kx},function(e,t){Qp.call(this,this.code,e,this.pos)}),Ix=((i["hex.error.NullPointerException"]=Mx).__name__="hex.error.NullPointerException",Mx.__super__=Qp,Mx.prototype=e(Qp.prototype,{__class__:Mx}),function(){}),Bx=((i["hex.util.ArrayUtil"]=Ix).__name__="hex.util.ArrayUtil",Ix.indexOf=function(e,t){return e.indexOf(t)},fe["hscript.Const"]={__ename__:!0,__constructs__:null,CInt:((R=function(e){return{_hx_index:0,v:e,__enum__:"hscript.Const",toString:o}})._hx_name="CInt",R.__params__=["v"],R),CFloat:((R=function(e){return{_hx_index:1,f:e,__enum__:"hscript.Const",toString:o}})._hx_name="CFloat",R.__params__=["f"],R),CString:((R=function(e){return{_hx_index:2,s:e,__enum__:"hscript.Const",toString:o}})._hx_name="CString",R.__params__=["s"],R)}),Tx=(Bx.__constructs__=[Bx.CInt,Bx.CFloat,Bx.CString],Bx.__empty_constructs__=[],fe["hscript.Expr"]={__ename__:!0,__constructs__:null,EConst:((R=function(e){return{_hx_index:0,c:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EConst",R.__params__=["c"],R),EIdent:((R=function(e){return{_hx_index:1,v:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EIdent",R.__params__=["v"],R),EVar:((R=function(e,t,n){return{_hx_index:2,n:e,t:t,e:n,__enum__:"hscript.Expr",toString:o}})._hx_name="EVar",R.__params__=["n","t","e"],R),EParent:((R=function(e){return{_hx_index:3,e:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EParent",R.__params__=["e"],R),EBlock:((R=function(e){return{_hx_index:4,e:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EBlock",R.__params__=["e"],R),EField:((R=function(e,t){return{_hx_index:5,e:e,f:t,__enum__:"hscript.Expr",toString:o}})._hx_name="EField",R.__params__=["e","f"],R),EBinop:((R=function(e,t,n){return{_hx_index:6,op:e,e1:t,e2:n,__enum__:"hscript.Expr",toString:o}})._hx_name="EBinop",R.__params__=["op","e1","e2"],R),EUnop:((R=function(e,t,n){return{_hx_index:7,op:e,prefix:t,e:n,__enum__:"hscript.Expr",toString:o}})._hx_name="EUnop",R.__params__=["op","prefix","e"],R),ECall:((R=function(e,t){return{_hx_index:8,e:e,params:t,__enum__:"hscript.Expr",toString:o}})._hx_name="ECall",R.__params__=["e","params"],R),EIf:((R=function(e,t,n){return{_hx_index:9,cond:e,e1:t,e2:n,__enum__:"hscript.Expr",toString:o}})._hx_name="EIf",R.__params__=["cond","e1","e2"],R),EWhile:((R=function(e,t){return{_hx_index:10,cond:e,e:t,__enum__:"hscript.Expr",toString:o}})._hx_name="EWhile",R.__params__=["cond","e"],R),EFor:((R=function(e,t,n){return{_hx_index:11,v:e,it:t,e:n,__enum__:"hscript.Expr",toString:o}})._hx_name="EFor",R.__params__=["v","it","e"],R),EBreak:{_hx_name:"EBreak",_hx_index:12,__enum__:"hscript.Expr",toString:o},EContinue:{_hx_name:"EContinue",_hx_index:13,__enum__:"hscript.Expr",toString:o},EFunction:((R=function(e,t,n,i){return{_hx_index:14,args:e,e:t,name:n,ret:i,__enum__:"hscript.Expr",toString:o}})._hx_name="EFunction",R.__params__=["args","e","name","ret"],R),EReturn:((R=function(e){return{_hx_index:15,e:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EReturn",R.__params__=["e"],R),EArray:((R=function(e,t){return{_hx_index:16,e:e,index:t,__enum__:"hscript.Expr",toString:o}})._hx_name="EArray",R.__params__=["e","index"],R),EArrayDecl:((R=function(e){return{_hx_index:17,e:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EArrayDecl",R.__params__=["e"],R),ENew:((R=function(e,t){return{_hx_index:18,cl:e,params:t,__enum__:"hscript.Expr",toString:o}})._hx_name="ENew",R.__params__=["cl","params"],R),EThrow:((R=function(e){return{_hx_index:19,e:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EThrow",R.__params__=["e"],R),ETry:((R=function(e,t,n,i){return{_hx_index:20,e:e,v:t,t:n,ecatch:i,__enum__:"hscript.Expr",toString:o}})._hx_name="ETry",R.__params__=["e","v","t","ecatch"],R),EObject:((R=function(e){return{_hx_index:21,fl:e,__enum__:"hscript.Expr",toString:o}})._hx_name="EObject",R.__params__=["fl"],R),ETernary:((R=function(e,t,n){return{_hx_index:22,cond:e,e1:t,e2:n,__enum__:"hscript.Expr",toString:o}})._hx_name="ETernary",R.__params__=["cond","e1","e2"],R),ESwitch:((R=function(e,t,n){return{_hx_index:23,e:e,cases:t,defaultExpr:n,__enum__:"hscript.Expr",toString:o}})._hx_name="ESwitch",R.__params__=["e","cases","defaultExpr"],R),EDoWhile:((R=function(e,t){return{_hx_index:24,cond:e,e:t,__enum__:"hscript.Expr",toString:o}})._hx_name="EDoWhile",R.__params__=["cond","e"],R),EMeta:((R=function(e,t,n){return{_hx_index:25,name:e,args:t,e:n,__enum__:"hscript.Expr",toString:o}})._hx_name="EMeta",R.__params__=["name","args","e"],R),ECheckType:((R=function(e,t){return{_hx_index:26,e:e,t:t,__enum__:"hscript.Expr",toString:o}})._hx_name="ECheckType",R.__params__=["e","t"],R)}),Ex=(Tx.__constructs__=[Tx.EConst,Tx.EIdent,Tx.EVar,Tx.EParent,Tx.EBlock,Tx.EField,Tx.EBinop,Tx.EUnop,Tx.ECall,Tx.EIf,Tx.EWhile,Tx.EFor,Tx.EBreak,Tx.EContinue,Tx.EFunction,Tx.EReturn,Tx.EArray,Tx.EArrayDecl,Tx.ENew,Tx.EThrow,Tx.ETry,Tx.EObject,Tx.ETernary,Tx.ESwitch,Tx.EDoWhile,Tx.EMeta,Tx.ECheckType],Tx.__empty_constructs__=[Tx.EBreak,Tx.EContinue],fe["hscript.CType"]={__ename__:!0,__constructs__:null,CTPath:((R=function(e,t){return{_hx_index:0,path:e,params:t,__enum__:"hscript.CType",toString:o}})._hx_name="CTPath",R.__params__=["path","params"],R),CTFun:((R=function(e,t){return{_hx_index:1,args:e,ret:t,__enum__:"hscript.CType",toString:o}})._hx_name="CTFun",R.__params__=["args","ret"],R),CTAnon:((R=function(e){return{_hx_index:2,fields:e,__enum__:"hscript.CType",toString:o}})._hx_name="CTAnon",R.__params__=["fields"],R),CTParent:((R=function(e){return{_hx_index:3,t:e,__enum__:"hscript.CType",toString:o}})._hx_name="CTParent",R.__params__=["t"],R),CTOpt:((R=function(e){return{_hx_index:4,t:e,__enum__:"hscript.CType",toString:o}})._hx_name="CTOpt",R.__params__=["t"],R),CTNamed:((R=function(e,t){return{_hx_index:5,n:e,t:t,__enum__:"hscript.CType",toString:o}})._hx_name="CTNamed",R.__params__=["n","t"],R)}),Fx=(Ex.__constructs__=[Ex.CTPath,Ex.CTFun,Ex.CTAnon,Ex.CTParent,Ex.CTOpt,Ex.CTNamed],Ex.__empty_constructs__=[],fe["hscript.Error"]={__ename__:!0,__constructs__:null,EInvalidChar:((R=function(e){return{_hx_index:0,c:e,__enum__:"hscript.Error",toString:o}})._hx_name="EInvalidChar",R.__params__=["c"],R),EUnexpected:((R=function(e){return{_hx_index:1,s:e,__enum__:"hscript.Error",toString:o}})._hx_name="EUnexpected",R.__params__=["s"],R),EUnterminatedString:{_hx_name:"EUnterminatedString",_hx_index:2,__enum__:"hscript.Error",toString:o},EUnterminatedComment:{_hx_name:"EUnterminatedComment",_hx_index:3,__enum__:"hscript.Error",toString:o},EInvalidPreprocessor:((R=function(e){return{_hx_index:4,msg:e,__enum__:"hscript.Error",toString:o}})._hx_name="EInvalidPreprocessor",R.__params__=["msg"],R),EUnknownVariable:((R=function(e){return{_hx_index:5,v:e,__enum__:"hscript.Error",toString:o}})._hx_name="EUnknownVariable",R.__params__=["v"],R),EInvalidIterator:((R=function(e){return{_hx_index:6,v:e,__enum__:"hscript.Error",toString:o}})._hx_name="EInvalidIterator",R.__params__=["v"],R),EInvalidOp:((R=function(e){return{_hx_index:7,op:e,__enum__:"hscript.Error",toString:o}})._hx_name="EInvalidOp",R.__params__=["op"],R),EInvalidAccess:((R=function(e){return{_hx_index:8,f:e,__enum__:"hscript.Error",toString:o}})._hx_name="EInvalidAccess",R.__params__=["f"],R),ECustom:((R=function(e){return{_hx_index:9,msg:e,__enum__:"hscript.Error",toString:o}})._hx_name="ECustom",R.__params__=["msg"],R)}),Dx=(Fx.__constructs__=[Fx.EInvalidChar,Fx.EUnexpected,Fx.EUnterminatedString,Fx.EUnterminatedComment,Fx.EInvalidPreprocessor,Fx.EUnknownVariable,Fx.EInvalidIterator,Fx.EInvalidOp,Fx.EInvalidAccess,Fx.ECustom],Fx.__empty_constructs__=[Fx.EUnterminatedString,Fx.EUnterminatedComment],fe["hscript.ModuleDecl"]={__ename__:!0,__constructs__:null,DPackage:((R=function(e){return{_hx_index:0,path:e,__enum__:"hscript.ModuleDecl",toString:o}})._hx_name="DPackage",R.__params__=["path"],R),DImport:((R=function(e,t){return{_hx_index:1,path:e,everything:t,__enum__:"hscript.ModuleDecl",toString:o}})._hx_name="DImport",R.__params__=["path","everything"],R),DClass:((R=function(e){return{_hx_index:2,c:e,__enum__:"hscript.ModuleDecl",toString:o}})._hx_name="DClass",R.__params__=["c"],R),DTypedef:((R=function(e){return{_hx_index:3,c:e,__enum__:"hscript.ModuleDecl",toString:o}})._hx_name="DTypedef",R.__params__=["c"],R)}),Rx=(Dx.__constructs__=[Dx.DPackage,Dx.DImport,Dx.DClass,Dx.DTypedef],Dx.__empty_constructs__=[],fe["hscript.FieldAccess"]={__ename__:!0,__constructs__:null,APublic:{_hx_name:"APublic",_hx_index:0,__enum__:"hscript.FieldAccess",toString:o},APrivate:{_hx_name:"APrivate",_hx_index:1,__enum__:"hscript.FieldAccess",toString:o},AInline:{_hx_name:"AInline",_hx_index:2,__enum__:"hscript.FieldAccess",toString:o},AOverride:{_hx_name:"AOverride",_hx_index:3,__enum__:"hscript.FieldAccess",toString:o},AStatic:{_hx_name:"AStatic",_hx_index:4,__enum__:"hscript.FieldAccess",toString:o},AMacro:{_hx_name:"AMacro",_hx_index:5,__enum__:"hscript.FieldAccess",toString:o}}),Px=(Rx.__constructs__=[Rx.APublic,Rx.APrivate,Rx.AInline,Rx.AOverride,Rx.AStatic,Rx.AMacro],Rx.__empty_constructs__=[Rx.APublic,Rx.APrivate,Rx.AInline,Rx.AOverride,Rx.AStatic,Rx.AMacro],fe["hscript.FieldKind"]={__ename__:!0,__constructs__:null,KFunction:((R=function(e){return{_hx_index:0,f:e,__enum__:"hscript.FieldKind",toString:o}})._hx_name="KFunction",R.__params__=["f"],R),KVar:((R=function(e){return{_hx_index:1,v:e,__enum__:"hscript.FieldKind",toString:o}})._hx_name="KVar",R.__params__=["v"],R)}),zx=(Px.__constructs__=[Px.KFunction,Px.KVar],Px.__empty_constructs__=[],fe["hscript._Interp.Stop"]={__ename__:!0,__constructs__:null,SBreak:{_hx_name:"SBreak",_hx_index:0,__enum__:"hscript._Interp.Stop",toString:o},SContinue:{_hx_name:"SContinue",_hx_index:1,__enum__:"hscript._Interp.Stop",toString:o},SReturn:{_hx_name:"SReturn",_hx_index:2,__enum__:"hscript._Interp.Stop",toString:o}}),Qx=(zx.__constructs__=[zx.SBreak,zx.SContinue,zx.SReturn],zx.__empty_constructs__=[zx.SBreak,zx.SContinue,zx.SReturn],function(){this.locals=new at,this.declared=[],this.resetVariables(),this.initOps()}),w=((i["hscript.Interp"]=Qx).__name__="hscript.Interp",Qx.prototype={resetVariables:function(){var i=this,e=(this.variables=new at,this.variables.h.null=null,this.variables.h.true=!0,this.variables.h.false=!1,this.variables),t=X.makeVarArgs(function(e){var t=i.posInfos(),n=e.shift();0<e.length&&(t.customParams=e),_p.trace(el.string(n),t)});e.h.trace=t},posInfos:function(){return{fileName:"hscript",lineNumber:0}},initOps:function(){var n=this;this.binops=new at,this.binops.h["+"]=function(e,t){return n.expr(e)+n.expr(t)},this.binops.h["-"]=function(e,t){return n.expr(e)-n.expr(t)},this.binops.h["*"]=function(e,t){return n.expr(e)*n.expr(t)},this.binops.h["/"]=function(e,t){return n.expr(e)/n.expr(t)},this.binops.h["%"]=function(e,t){return n.expr(e)%n.expr(t)},this.binops.h["&"]=function(e,t){return n.expr(e)&n.expr(t)},this.binops.h["|"]=function(e,t){return n.expr(e)|n.expr(t)},this.binops.h["^"]=function(e,t){return n.expr(e)^n.expr(t)},this.binops.h["<<"]=function(e,t){return n.expr(e)<<n.expr(t)},this.binops.h[">>"]=function(e,t){return n.expr(e)>>n.expr(t)},this.binops.h[">>>"]=function(e,t){return n.expr(e)>>>n.expr(t)},this.binops.h["=="]=function(e,t){return n.expr(e)==n.expr(t)},this.binops.h["!="]=function(e,t){return n.expr(e)!=n.expr(t)},this.binops.h[">="]=function(e,t){return n.expr(e)>=n.expr(t)},this.binops.h["<="]=function(e,t){return n.expr(e)<=n.expr(t)},this.binops.h[">"]=function(e,t){return n.expr(e)>n.expr(t)},this.binops.h["<"]=function(e,t){return n.expr(e)<n.expr(t)},this.binops.h["||"]=function(e,t){return 1==n.expr(e)||1==n.expr(t)},this.binops.h["&&"]=function(e,t){return 1==n.expr(e)&&1==n.expr(t)},this.binops.h["="]=Cn(this,this.assign),this.binops.h["..."]=function(e,t){return new s(n.expr(e),n.expr(t))},this.binops.h.is=function(e,t){return nl.__instanceof(n.expr(e),n.expr(t))},this.assignOp("+=",function(e,t){return e+t}),this.assignOp("-=",function(e,t){return e-t}),this.assignOp("*=",function(e,t){return e*t}),this.assignOp("/=",function(e,t){return e/t}),this.assignOp("%=",function(e,t){return e%t}),this.assignOp("&=",function(e,t){return e&t}),this.assignOp("|=",function(e,t){return e|t}),this.assignOp("^=",function(e,t){return e^t}),this.assignOp("<<=",function(e,t){return e<<t}),this.assignOp(">>=",function(e,t){return e>>t}),this.assignOp(">>>=",function(e,t){return e>>>t})},setVar:function(e,t){return this.variables.h[e]=t},assign:function(e,t){var n=this.expr(t);switch(e._hx_index){case 1:var i=e.v,s=this.locals.h[i];null==s?this.setVar(i,n):s.r=n;break;case 5:n=this.set(this.expr(e.e),e.f,n);break;case 16:i=this.expr(e.e),s=this.expr(e.index);nl.__implements(i,z)?nl.__cast(i,z).set(s,n):i[s]=n;break;default:throw tl.thrown(Fx.EInvalidOp("="))}return n},assignOp:function(n,i){var s=this;this.binops.h[n]=function(e,t){return s.evalAssignOp(n,i,e,t)}},evalAssignOp:function(e,t,n,i){switch(n._hx_index){case 1:var s=n.v,a=this.locals.h[s],l=t(this.expr(n),this.expr(i));null==a?this.setVar(s,l):a.r=l;break;case 5:s=n.f,a=this.expr(n.e);l=t(this.get(a,s),this.expr(i)),l=this.set(a,s,l);break;case 16:a=this.expr(n.e),s=this.expr(n.index);nl.__implements(a,z)?(l=t(nl.__cast(a,z).get(s),this.expr(i)),nl.__cast(a,z).set(s,l)):(l=t(a[s],this.expr(i)),a[s]=l);break;default:throw tl.thrown(Fx.EInvalidOp(e))}return l},increment:function(e,t,n){switch(e._hx_index){case 1:var i=e.v,s=this.locals.h[i],a=null==s?this.resolve(i):s.r;return t?(a+=n,null==s?this.setVar(i,a):s.r=a):null==s?this.setVar(i,a+n):s.r=a+n,a;case 5:var i=e.f,s=this.expr(e.e),a=this.get(s,i);return t?this.set(s,i,a+=n):this.set(s,i,a+n),a;case 16:s=this.expr(e.e),i=this.expr(e.index);return nl.__implements(s,z)?(a=nl.__cast(s,z).get(i),t?(a+=n,nl.__cast(s,z).set(i,a)):nl.__cast(s,z).set(i,a+n)):(a=s[i],s[i]=t?a+=n:a+n),a;default:throw tl.thrown(Fx.EInvalidOp(0<n?"++":"--"))}},execute:function(e){return this.depth=0,this.locals=new at,this.declared=[],this.exprReturn(e)},exprReturn:function(t){try{return this.expr(t)}catch(e){CA.lastError=e;t=tl.caught(e).unwrap();if(!nl.__instanceof(t,zx))throw e;switch(t._hx_index){case 0:throw tl.thrown("Invalid break");case 1:throw tl.thrown("Invalid continue");case 2:var n=this.returnValue;return this.returnValue=null,n}}},duplicate:function(e){for(var t=new at,n=Object.keys(e.h),i=n.length,s=0;s<i;){var a=n[s++];t.h[a]=e.h[a]}return t},restore:function(e){for(;this.declared.length>e;){var t=this.declared.pop();this.locals.h[t.n]=t.old}},resolve:function(e){var t=this.variables.h[e];if(null!=t||Object.prototype.hasOwnProperty.call(this.variables.h,e))return t;throw tl.thrown(Fx.EUnknownVariable(e))},expr:function(e){var c=this;switch(e._hx_index){case 0:switch((t=e.c)._hx_index){case 0:return t.v;case 1:return t.f;case 2:return t.s}break;case 1:var t=e.v,n=this.locals.h[t];return null!=n?n.r:this.resolve(t);case 2:var t=e.n,i=e.e,n=(this.declared.push({n:t,old:this.locals.h[t]}),this.locals),s=null==i?null:this.expr(i);return n.h[t]={r:s},null;case 3:return this.expr(e.e);case 4:for(var t=e.e,a=this.declared.length,l=null,i=0;i<t.length;)l=this.expr(t[i++]);return this.restore(a),l;case 5:return this.get(this.expr(e.e),e.f);case 6:var t=e.op,n=this.binops.h[t];if(null==n)throw tl.thrown(Fx.EInvalidOp(t));return n(e.e1,e.e2);case 7:var t=e.op,i=e.prefix,r=e.e;switch(t){case"!":return 1!=this.expr(r);case"++":return this.increment(r,i,1);case"-":return-this.expr(r);case"--":return this.increment(r,i,-1);case"~":return~this.expr(r);default:throw tl.thrown(Fx.EInvalidOp(t))}break;case 8:for(var t=e.e,i=e.params,o=[],r=0;r<i.length;)o.push(this.expr(i[r++]));if(5!=t._hx_index)return this.call(null,this.expr(t),o);i=t.f,s=this.expr(t.e);if(null==s)throw tl.thrown(Fx.EInvalidAccess(i));return this.fcall(s,i,o);case 9:t=e.e2;return 1==this.expr(e.cond)?this.expr(e.e1):null==t?null:this.expr(t);case 10:return this.whileLoop(e.cond,e.e),null;case 11:return this.forLoop(e.v,e.it,e.e),null;case 12:throw tl.thrown(zx.SBreak);case 13:throw tl.thrown(zx.SContinue);case 14:for(var _=e.args,d=e.e,p=e.name,m=this.duplicate(this.locals),g=this,f=0,t=0;t<_.length;)_[t++].opt||(f+=1);var u=X.makeVarArgs(function(e){if((null==e?0:e.length)!=_.length){if(e.length<f)throw a="Invalid number of parameters. Got "+e.length+", required "+f,null!=p&&(a+=" for function '"+p+"'"),tl.thrown(Fx.ECustom(a));for(var t=[],n=e.length-f,i=0,s=0;s<_.length;)_[s++].opt?0<n?(t.push(e[i++]),--n):t.push(null):t.push(e[i++]);e=t}for(var a=g.locals,l=g.depth,s=(g.depth++,g.locals=g.duplicate(m),0),r=_.length;s<r;){var o=s++;g.locals.h[_[o].name]={r:e[o]}}var u=null,h=c.declared.length;if(c.inTry)try{u=g.exprReturn(d)}catch(s){CA.lastError=s;r=tl.caught(s).unwrap();throw c.restore(h),g.locals=a,g.depth=l,tl.thrown(r)}else u=g.exprReturn(d);return c.restore(h),g.locals=a,g.depth=l,u});return null!=p&&(0==this.depth?this.variables.h[p]=u:(this.declared.push({n:p,old:this.locals.h[p]}),this.locals.h[p]=n={r:u},m.h[p]=n)),u;case 15:t=e.e;throw this.returnValue=null==t?null:this.expr(t),tl.thrown(zx.SReturn);case 16:s=this.expr(e.e),n=this.expr(e.index);return nl.__implements(s,z)?nl.__cast(s,z).get(n):s[n];case 17:if(0<(t=e.e).length&&6==(i=t[0])._hx_index&&"=>"==i.op){for(var h=[],A=[],i=0;i<t.length;){var x=t[i];if(++i,6!=x._hx_index)throw tl.thrown(Fx.ECustom("Invalid map key=>value expression"));if("=>"!=x.op)throw tl.thrown(Fx.ECustom("Invalid map key=>value expression"));h.push(this.expr(x.e1)),A.push(this.expr(x.e2))}return this.makeMap(h,A)}for(var w=[],i=0;i<t.length;)w.push(this.expr(t[i++]));return w;case 18:for(t=e.cl,i=e.params,w=[],r=0;r<i.length;)w.push(this.expr(i[r++]));return this.cnew(t,w);case 19:throw tl.thrown(this.expr(e.e));case 20:t=e.e,i=e.v,r=e.ecatch,a=this.declared.length,s=this.inTry;try{this.inTry=!0;l=this.expr(t);return this.restore(a),this.inTry=s,l}catch(t){CA.lastError=t;var y=tl.caught(t).unwrap();if(nl.__instanceof(y,zx))throw this.inTry=s,tl.thrown(y);return this.restore(a),this.inTry=s,this.declared.push({n:i,old:this.locals.h[i]}),this.locals.h[i]={r:y},l=this.expr(r),this.restore(a),l}break;case 21:for(var t=e.fl,b={},i=0;i<t.length;){u=t[i];++i,this.set(b,u.name,this.expr(u.e))}return b;case 22:return 1==this.expr(e.cond)?this.expr(e.e1):this.expr(e.e2);case 23:for(var t=e.cases,i=e.defaultExpr,v=this.expr(e.e),C=!1,r=0;r<t.length;){for(var S=t[r],y=(++r,0),k=S.values;y<k.length;)if(this.expr(k[y++])==v){C=!0;break}if(C){v=this.expr(S.expr);break}}return v=C?v:null==i?null:this.expr(i);case 24:return this.doWhileLoop(e.cond,e.e),null;case 25:case 26:return this.expr(e.e)}},doWhileLoop:function(e,t){var n=this.declared.length;do{var i=!0;try{this.expr(t)}catch(e){CA.lastError=e;var s=tl.caught(e).unwrap();if(!nl.__instanceof(s,zx))throw e;var a=s;switch(a._hx_index){case 0:i=!1;break;case 1:break;case 2:throw tl.thrown(a)}}}while(i&&1==this.expr(e));this.restore(n)},whileLoop:function(e,t){for(var n=this.declared.length;1==this.expr(e);){var i=!0;try{this.expr(t)}catch(e){CA.lastError=e;var s=tl.caught(e).unwrap();if(!nl.__instanceof(s,zx))throw e;var a=s;switch(a._hx_index){case 0:i=!1;break;case 1:break;case 2:throw tl.thrown(a)}}if(!i)break}this.restore(n)},makeIterator:function(e){if(e instanceof Array)return new JA(e);if(null==(e=null!=e.iterator?g1(e):e).hasNext||null==e.next)throw tl.thrown(Fx.EInvalidIterator(e));return e},forLoop:function(e,t,n){for(var i=this.declared.length,s=(this.declared.push({n:e,old:this.locals.h[e]}),this.makeIterator(this.expr(t)));s.hasNext();){var a=this.locals,l={r:s.next()},r=(a.h[e]=l,!0);try{this.expr(n)}catch(e){CA.lastError=e;a=tl.caught(e).unwrap();if(!nl.__instanceof(a,zx))throw e;var o=a;switch(o._hx_index){case 0:r=!1;break;case 1:break;case 2:throw tl.thrown(o)}}if(!r)break}this.restore(i)},makeMap:function(e,t){for(var n=!0,i=!0,s=!0,a=!0,l=0;l<e.length;){var r=e[l];++l,n=n&&"string"==typeof r,i=i&&"number"==typeof r&&(0|r)===r,s=s&&X.isObject(r),a=a&&X.isEnumValue(r)}if(i){for(var o=new Je,u=0;u<e.length;)o.h[e[u++]]=t[u-1];return o}if(n){for(o=new at,u=0;u<e.length;)o.h[e[u++]]=t[u-1];return o}if(a){for(o=new PA,u=0;u<e.length;)o.set(e[u++],t[u-1]);return o}if(s){for(o=new VA,u=0;u<e.length;)o.set(e[u++],t[u-1]);return o}throw tl.thrown(Fx.ECustom("Invalid map keys "+el.string(e)))},get:function(e,t){if(null==e)throw tl.thrown(Fx.EInvalidAccess(t));return X.getProperty(e,t)},set:function(e,t,n){if(null==e)throw tl.thrown(Fx.EInvalidAccess(t));return X.setProperty(e,t,n),n},fcall:function(e,t,n){return this.call(e,this.get(e,t),n)},call:function(e,t,n){return t.apply(e,n)},cnew:function(e,t){var n=i[e];return null==n&&(n=this.resolve(e)),U.createInstance(n,t)},__class__:Qx},(i["hscript.Macro"]=Op).__name__="hscript.Macro",Op.prototype={map:function(e,t){for(var n=[],i=0;i<e.length;)n.push(t(e[i++]));return n},convertType:function(e){switch(e._hx_index){case 0:var t=e.path,n=[];if(null!=(a=e.params))for(var i=0;i<a.length;)n.push(rx.TPType(this.convertType(a[i++])));return lx.TPath({pack:t,name:t.pop(),params:n,sub:null});case 1:return lx.TFunction(this.map(e.args,Cn(this,this.convertType)),this.convertType(e.ret));case 2:for(var t=e.fields,s=[],a=0;a<t.length;){var l,r=t[a];if(++a,null==r.meta)l=[];else{for(var i=[],o=0,u=r.meta;o<u.length;){var h,c=u[o],_=(++o,c.name);if(null==c.params)h=[];else{for(var d=[],p=0,m=c.params;p<m.length;)d.push(this.convert(m[p++]));h=d}i.push({name:_,params:h,pos:this.p})}l=i}s.push({name:r.name,meta:l,doc:null,access:[],kind:ux.FVar(this.convertType(r.t),null),pos:this.p})}return lx.TAnonymous(s);case 3:return lx.TParent(this.convertType(e.t));case 4:return lx.TOptional(this.convertType(e.t));case 5:return lx.TNamed(e.n,this.convertType(e.t))}},convert:function(e){switch(e._hx_index){case 0:switch((n=e.c)._hx_index){case 0:var t=n.v;a=ex.CInt(null==t?"null":""+t);break;case 1:t=n.f;a=ex.CFloat(null==t?"null":""+t);break;case 2:a=ex.CString(n.s)}i=ax.EConst(a);break;case 1:i=ax.EConst(ex.CIdent(e.v));break;case 2:var n=e.t,t=e.e,i=ax.EVars([{name:e.n,expr:null==t?null:this.convert(t),type:null==n?null:this.convertType(n)}]);break;case 3:i=ax.EParenthesis(this.convert(e.e));break;case 4:i=ax.EBlock(this.map(e.e,Cn(this,this.convert)));break;case 5:i=ax.EField(this.convert(e.e),e.f);break;case 6:var n=e.op,s=this.binops.h[n];if(null==s)throw tl.thrown(Fx.EInvalidOp(n));i=ax.EBinop(s,this.convert(e.e1),this.convert(e.e2));break;case 7:var n=e.op,s=this.unops.h[n];if(null==s)throw tl.thrown(Fx.EInvalidOp(n));i=ax.EUnop(s,!e.prefix,this.convert(e.e));break;case 8:i=ax.ECall(this.convert(e.e),this.map(e.params,Cn(this,this.convert)));break;case 9:n=e.e2;i=ax.EIf(this.convert(e.cond),this.convert(e.e1),null==n?null:this.convert(n));break;case 10:i=ax.EWhile(this.convert(e.cond),this.convert(e.e),!0);break;case 11:var s=this.p,a=this.convert(e.it),l=this.convert(e.e);i=ax.EFor({expr:ax.EBinop(tx.OpIn,{expr:ax.EConst(ex.CIdent(e.v)),pos:s},a),pos:s},l);break;case 12:i=ax.EBreak;break;case 13:i=ax.EContinue;break;case 14:for(var n=e.args,t=e.e,r=e.name,o=e.ret,u=[],h=0;h<n.length;){var c=n[h];++h,u.push({name:c.name,type:null==c.t?null:this.convertType(c.t),opt:!1,value:null})}a=this.convert(t),l=null==o?null:this.convertType(o);i=ax.EFunction(null!=r?sx.FNamed(r,!1):sx.FAnonymous,{params:[],args:u,expr:a,ret:l});break;case 15:n=e.e;i=ax.EReturn(null==n?null:this.convert(n));break;case 16:i=ax.EArray(this.convert(e.e),this.convert(e.index));break;case 17:i=ax.EArrayDecl(this.map(e.e,Cn(this,this.convert)));break;case 18:s=e.cl.split(".");i=ax.ENew({pack:s,name:s.pop(),params:[],sub:null},this.map(e.params,Cn(this,this.convert)));break;case 19:i=ax.EThrow(this.convert(e.e));break;case 20:i=ax.ETry(this.convert(e.e),[{type:this.convertType(e.t),name:e.v,expr:this.convert(e.ecatch)}]);break;case 21:for(var n=e.fl,_=[],t=0;t<n.length;){var d=n[t];++t,_.push({field:d.name,expr:this.convert(d.e)})}i=ax.EObjectDecl(_);break;case 22:i=ax.ETernary(this.convert(e.cond),this.convert(e.e1),this.convert(e.e2));break;case 23:for(n=e.cases,t=e.defaultExpr,a=this.convert(e.e),r=[],o=0;o<n.length;){for(var p=n[o],h=(++o,[]),m=0,g=p.values;m<g.length;)h.push(this.convert(g[m++]));r.push({values:h,expr:this.convert(p.expr)})}i=ax.ESwitch(a,r,null==t?null:this.convert(t));break;case 24:i=ax.EWhile(this.convert(e.cond),this.convert(e.e),!1);break;case 25:n=e.name,t=e.args,r=e.e,s=this.p;if(null==t)a=[];else{for(o=[],h=0;h<t.length;)o.push(this.convert(t[h++]));a=o}l=this.convert(r);i=ax.EMeta({name:n,params:a,pos:s},l);break;case 26:i=ax.ECheckType(this.convert(e.e),this.convertType(e.t))}return{expr:i,pos:this.p}},__class__:Op},fe["hscript.Token"]={__ename__:!0,__constructs__:null,TEof:{_hx_name:"TEof",_hx_index:0,__enum__:"hscript.Token",toString:o},TConst:((R=function(e){return{_hx_index:1,c:e,__enum__:"hscript.Token",toString:o}})._hx_name="TConst",R.__params__=["c"],R),TId:((R=function(e){return{_hx_index:2,s:e,__enum__:"hscript.Token",toString:o}})._hx_name="TId",R.__params__=["s"],R),TOp:((R=function(e){return{_hx_index:3,s:e,__enum__:"hscript.Token",toString:o}})._hx_name="TOp",R.__params__=["s"],R),TPOpen:{_hx_name:"TPOpen",_hx_index:4,__enum__:"hscript.Token",toString:o},TPClose:{_hx_name:"TPClose",_hx_index:5,__enum__:"hscript.Token",toString:o},TBrOpen:{_hx_name:"TBrOpen",_hx_index:6,__enum__:"hscript.Token",toString:o},TBrClose:{_hx_name:"TBrClose",_hx_index:7,__enum__:"hscript.Token",toString:o},TDot:{_hx_name:"TDot",_hx_index:8,__enum__:"hscript.Token",toString:o},TQuestionDot:{_hx_name:"TQuestionDot",_hx_index:9,__enum__:"hscript.Token",toString:o},TComma:{_hx_name:"TComma",_hx_index:10,__enum__:"hscript.Token",toString:o},TSemicolon:{_hx_name:"TSemicolon",_hx_index:11,__enum__:"hscript.Token",toString:o},TBkOpen:{_hx_name:"TBkOpen",_hx_index:12,__enum__:"hscript.Token",toString:o},TBkClose:{_hx_name:"TBkClose",_hx_index:13,__enum__:"hscript.Token",toString:o},TQuestion:{_hx_name:"TQuestion",_hx_index:14,__enum__:"hscript.Token",toString:o},TDoubleDot:{_hx_name:"TDoubleDot",_hx_index:15,__enum__:"hscript.Token",toString:o},TMeta:((R=function(e){return{_hx_index:16,s:e,__enum__:"hscript.Token",toString:o}})._hx_name="TMeta",R.__params__=["s"],R),TPrepro:((R=function(e){return{_hx_index:17,s:e,__enum__:"hscript.Token",toString:o}})._hx_name="TPrepro",R.__params__=["s"],R)}),Vx=(w.__constructs__=[w.TEof,w.TConst,w.TId,w.TOp,w.TPOpen,w.TPClose,w.TBrOpen,w.TBrClose,w.TDot,w.TQuestionDot,w.TComma,w.TSemicolon,w.TBkOpen,w.TBkClose,w.TQuestion,w.TDoubleDot,w.TMeta,w.TPrepro],w.__empty_constructs__=[w.TEof,w.TPOpen,w.TPClose,w.TBrOpen,w.TBrClose,w.TDot,w.TQuestionDot,w.TComma,w.TSemicolon,w.TBkOpen,w.TBkClose,w.TQuestion,w.TDoubleDot],function(){this.uid=0,this.preprocesorValues=new at,this.line=1,this.opChars="+*/-=!><&|^%~",this.identChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";for(var e=[["%"],["*","/"],["+","-"],["<<",">>",">>>"],["|","&","^"],["==","!=",">","<",">=","<="],["..."],["&&"],["||"],["=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","|=","&=","^=","=>"],["->"]],t=(this.opPriority=new at,this.opRightAssoc=new at,0),n=e.length;t<n;)for(var i=t++,s=0,a=e[i];s<a.length;){var l=a[s];++s,9==(this.opPriority.h[l]=i)&&(this.opRightAssoc.h[l]=!0)}this.opPriority.h["!"]=-2,this.opPriority.h["++"]=-1,this.opPriority.h["--"]=-1,this.opPriority.h["~"]=-2}),nl=((i["hscript.Parser"]=Vx).__name__="hscript.Parser",Vx.prototype={invalidChar:function(e){if(!this.resumeErrors)throw tl.thrown(Fx.EInvalidChar(e))},initParser:function(e,t){this.preprocStack=[],this.tokens=new wp,this.offset=t,this.char=-1,this.ops=[],this.idents=[];for(var n=this.uid=0,i=this.opChars.length;n<i;)this.ops[Jn.cca(this.opChars,n++)]=!0;for(n=0,i=this.identChars.length;n<i;)this.idents[Jn.cca(this.identChars,n++)]=!0},parseString:function(e,t,n){this.initParser(t=null==t?"hscript":t,n=null==n?0:n),this.input=e,this.readPos=0;for(var i=[];;){var s=this.token();if(s==w.TEof)break;var a=this.tokens;a.head=new xp(s,a.head),this.parseFullExpr(i)}return 1==i.length?i[0]:Tx.EBlock(i)},unexpected:function(e){e=Fx.EUnexpected(this.tokenString(e));if(this.resumeErrors)return null;throw tl.thrown(e)},maybe:function(e){var t=this.token();return!!U.enumEq(t,e)||((e=this.tokens).head=new xp(t,e.head),!1)},getIdent:function(){var e=this.token();return null!=e&&2==e._hx_index?e.s:(this.unexpected(e),null)},isBlock:function(e){if(null==e)return!1;if(null==e)return!1;switch(e._hx_index){case 2:var t=e.t,n=e.e;return null!=n?this.isBlock(n):null!=t&&2==t._hx_index;case 4:return!0;case 6:return this.isBlock(e.e2);case 7:return!e.prefix&&this.isBlock(e.e);case 9:return null!=(t=e.e2)?this.isBlock(t):this.isBlock(e.e1);case 10:case 11:case 14:return this.isBlock(e.e);case 15:return null!=(t=e.e)&&this.isBlock(t);case 20:return this.isBlock(e.ecatch);case 21:case 23:return!0;case 24:case 25:return this.isBlock(e.e);default:return!1}},parseFullExpr:function(e){for(var t,n=this.parseExpr(),i=(e.push(n),this.token());i==w.TComma&&null!=n&&2==n._hx_index;)n=this.parseStructure("var"),e.push(n),i=this.token();i!=w.TSemicolon&&i!=w.TEof&&(this.isBlock(n)?(t=this.tokens).head=new xp(i,t.head):this.unexpected(i))},parseObject:function(e){var t=[];e:for(;;){var n=this.token(),i=null;if(null==n){this.unexpected(n);break}switch(n._hx_index){case 1:var s=n.c;this.allowJSON||this.unexpected(n),2==s._hx_index?i=s.s:this.unexpected(n);break;case 2:i=n.s;break;case 7:break e;default:this.unexpected(n);break e}var a=this.token();if(a!=w.TDoubleDot&&this.unexpected(a),t.push({name:i,e:this.parseExpr()}),null==(n=this.token()))this.unexpected(n);else switch(n._hx_index){case 7:break e;case 10:break;default:this.unexpected(n)}}return this.parseExprNext(Tx.EObject(t))},parseExpr:function(){if(null==(i=this.token()))return this.unexpected(i);switch(i._hx_index){case 1:return this.parseExprNext(Tx.EConst(i.c));case 2:var e=i.s;return null==(n=this.parseStructure(e))&&(n=Tx.EIdent(e)),this.parseExprNext(n);case 3:if("-"==(e=i.s)){if(null==(n=this.parseExpr()))return this.makeUnop(e,n);if(null==n)return this.makeUnop(e,n);if(0!=n._hx_index)return this.makeUnop(e,n);var t=n.c;switch(t._hx_index){case 0:return Tx.EConst(Bx.CInt(-t.v));case 1:return Tx.EConst(Bx.CFloat(-t.f));default:return this.makeUnop(e,n)}}return this.opPriority.h[e]<0?this.makeUnop(e,this.parseExpr()):this.unexpected(i);case 4:if((i=this.token())==w.TPClose)return s=this.token(),U.enumEq(s,w.TOp("->"))||this.unexpected(s),Tx.EFunction([],Tx.EReturn(this.parseExpr()));(l=this.tokens).head=new xp(i,l.head);var n=this.parseExpr();if(null!=(i=this.token()))switch(i._hx_index){case 5:return this.parseExprNext(Tx.EParent(n));case 10:if(null!=n&&1==n._hx_index)return this.parseLambda([{name:n.v}],0);break;case 15:var i,s=this.parseType();if(null!=(i=this.token()))switch(i._hx_index){case 5:return this.parseExprNext(Tx.ECheckType(n,s));case 10:if(null!=n&&1==n._hx_index)return this.parseLambda([{name:n.v,t:s}],0)}}return this.unexpected(i);case 6:if(null==(i=this.token()))(l=this.tokens).head=new xp(i,l.head);else switch(i._hx_index){case 1:if(this.allowJSON)if(2==i.c._hx_index){var a=this.token(),l=((l=this.tokens).head=new xp(a,l.head),this.tokens);if(l.head=new xp(i,l.head),null!=a&&15==a._hx_index)return this.parseExprNext(this.parseObject(0))}else(l=this.tokens).head=new xp(i,l.head);else(l=this.tokens).head=new xp(i,l.head);break;case 2:var a=this.token(),l=((l=this.tokens).head=new xp(a,l.head),this.tokens);if(l.head=new xp(i,l.head),null!=a&&15==a._hx_index)return this.parseExprNext(this.parseObject(0));break;case 7:return this.parseExprNext(Tx.EObject([]));default:(l=this.tokens).head=new xp(i,l.head)}for(var r=[];;){if(this.parseFullExpr(r),(i=this.token())==w.TBrClose||this.resumeErrors&&i==w.TEof)break;(l=this.tokens).head=new xp(i,l.head)}return Tx.EBlock(r);case 12:r=[];for(i=this.token();i!=w.TBkClose&&(!this.resumeErrors||i!=w.TEof);)(l=this.tokens).head=new xp(i,l.head),r.push(this.parseExpr()),(i=this.token())==w.TComma&&(i=this.token());if(1==r.length&&null!=r[0])if(null!=(e=r[0]))switch(e._hx_index){case 10:case 11:case 24:var o="__a_"+this.uid++;return this.parseExprNext(Tx.EBlock([Tx.EVar(o,null,Tx.EArrayDecl([])),this.mapCompr(o,r[0]),Tx.EIdent(o)]))}return this.parseExprNext(Tx.EArrayDecl(r));case 16:return this.allowMetadata?Tx.EMeta(i.s,this.parseMetaArgs(),this.parseExpr()):this.unexpected(i);default:return this.unexpected(i)}},parseLambda:function(e,t){e:for(;;){e.push({name:this.getIdent(),t:this.maybe(w.TDoubleDot)?this.parseType():null});var n=this.token();if(null==n){this.unexpected(n);break}switch(n._hx_index){case 5:break e;case 10:break;default:this.unexpected(n);break e}}var i=this.token();return U.enumEq(i,w.TOp("->"))||this.unexpected(i),Tx.EFunction(e,Tx.EReturn(this.parseExpr()))},parseMetaArgs:function(){var e=this.token();if(e!=w.TPOpen)return(t=this.tokens).head=new xp(e,t.head),null;var t,n=[];if((e=this.token())!=w.TPClose){(t=this.tokens).head=new xp(e,t.head);e:for(;;){n.push(this.parseExpr());var i=this.token();if(null==i)this.unexpected(i);else switch(i._hx_index){case 5:break e;case 10:break;default:this.unexpected(i)}}}return n},mapCompr:function(e,t){if(null==t)return null;switch(t._hx_index){case 3:i=Tx.EParent(this.mapCompr(e,t.e));break;case 4:var n=t.e,i=1==n.length?Tx.EBlock([this.mapCompr(e,n[0])]):Tx.ECall(Tx.EField(Tx.EIdent(e),"push"),[t]);break;case 9:i=null==t.e2?Tx.EIf(t.cond,this.mapCompr(e,t.e1),null):Tx.ECall(Tx.EField(Tx.EIdent(e),"push"),[t]);break;case 10:i=Tx.EWhile(t.cond,this.mapCompr(e,t.e));break;case 11:i=Tx.EFor(t.v,t.it,this.mapCompr(e,t.e));break;case 24:i=Tx.EDoWhile(t.cond,this.mapCompr(e,t.e));break;default:i=Tx.ECall(Tx.EField(Tx.EIdent(e),"push"),[t])}return i},makeUnop:function(e,t){if(null==t&&this.resumeErrors)return null;if(null==t)return Tx.EUnop(e,!0,t);switch(t._hx_index){case 6:return Tx.EBinop(t.op,this.makeUnop(e,t.e1),t.e2);case 22:return Tx.ETernary(this.makeUnop(e,t.cond),t.e1,t.e2);default:return Tx.EUnop(e,!0,t)}},makeBinop:function(e,t,n){if(null==n&&this.resumeErrors)return Tx.EBinop(e,t,n);if(null==n)return Tx.EBinop(e,t,n);switch(n._hx_index){case 6:var i=n.op;return this.opPriority.h[e]<=this.opPriority.h[i]&&!Object.prototype.hasOwnProperty.call(this.opRightAssoc.h,e)?Tx.EBinop(i,this.makeBinop(e,t,n.e1),n.e2):Tx.EBinop(e,t,n);case 22:return Object.prototype.hasOwnProperty.call(this.opRightAssoc.h,e)?Tx.EBinop(e,t,n):Tx.ETernary(this.makeBinop(e,t,n.cond),n.e1,n.e2);default:return Tx.EBinop(e,t,n)}},parseStructure:function(e){switch(e){case"break":return Tx.EBreak;case"continue":return Tx.EContinue;case"do":var t=this.parseExpr();return null!=(u=this.token())&&2==u._hx_index&&"while"==u.s||this.unexpected(u),Tx.EDoWhile(this.parseExpr(),t);case"else":return this.unexpected(w.TId(e));case"for":(i=this.token())!=w.TPOpen&&this.unexpected(i);var n=this.getIdent(),i=this.token(),s=(U.enumEq(i,w.TId("in"))||this.unexpected(i),this.parseExpr());return(i=this.token())!=w.TPClose&&this.unexpected(i),Tx.EFor(n,s,this.parseExpr());case"function":var s=null,a=(null!=(u=this.token())&&2==u._hx_index?s=u.s:(f=this.tokens).head=new xp(u,f.head),this.parseFunctionDecl());return Tx.EFunction(a.args,a.body,s,a.ret);case"if":(i=this.token())!=w.TPOpen&&this.unexpected(i);var s=this.parseExpr(),l=((i=this.token())!=w.TPClose&&this.unexpected(i),this.parseExpr()),a=null,r=!1;return(u=this.token())==w.TSemicolon&&(r=!0,u=this.token()),U.enumEq(u,w.TId("else"))?a=this.parseExpr():((f=this.tokens).head=new xp(u,f.head),r&&((f=this.tokens).head=new xp(w.TSemicolon,f.head))),Tx.EIf(s,l,a);case"inline":return this.maybe(w.TId("function"))||this.unexpected(w.TId("inline")),this.parseStructure("function");case"new":var o=[];o.push(this.getIdent());e:for(;;){if(null==(u=this.token())){this.unexpected(u);break}switch(u._hx_index){case 4:break e;case 8:o.push(this.getIdent());break;default:this.unexpected(u);break e}}r=this.parseExprList(w.TPClose);return Tx.ENew(o.join("."),r);case"return":var u=this.token();return(f=this.tokens).head=new xp(u,f.head),Tx.EReturn(u==w.TSemicolon?null:this.parseExpr());case"switch":var t=this.parseExpr(),h=null,c=[];(i=this.token())!=w.TBrOpen&&this.unexpected(i);e:for(;;){if(null==(u=this.token())){this.unexpected(u);break}switch(u._hx_index){case 2:switch(u.s){case"case":var _={values:[],expr:null};c.push(_);t:for(;;){l=this.parseExpr();if(_.values.push(l),null==(u=this.token())){this.unexpected(u);break}switch(u._hx_index){case 10:break;case 15:break t;default:this.unexpected(u);break t}}var d=[];t:for(;;)if(u=this.token(),(f=this.tokens).head=new xp(u,f.head),null==u)this.parseFullExpr(d);else switch(u._hx_index){case 0:if(this.resumeErrors)break t;this.parseFullExpr(d);break;case 2:switch(u.s){case"case":case"default":break t;default:this.parseFullExpr(d)}break;case 7:break t;default:this.parseFullExpr(d)}_.expr=1==d.length?d[0]:0==d.length?Tx.EBlock([]):Tx.EBlock(d);break;case"default":null!=h&&this.unexpected(u);(i=this.token())!=w.TDoubleDot&&this.unexpected(i);var p=[];t:for(;;){u=this.token();var m=this.tokens;if(m.head=new xp(u,m.head),null==u)this.parseFullExpr(p);else switch(u._hx_index){case 0:if(this.resumeErrors)break t;this.parseFullExpr(p);break;case 2:switch(u.s){case"case":case"default":break t;default:this.parseFullExpr(p)}break;case 7:break t;default:this.parseFullExpr(p)}}h=1==p.length?p[0]:0==p.length?Tx.EBlock([]):Tx.EBlock(p);break;default:this.unexpected(u);break e}break;case 7:break e;default:this.unexpected(u);break e}}return Tx.ESwitch(t,c,h);case"throw":return Tx.EThrow(this.parseExpr());case"try":t=this.parseExpr(),i=this.token();U.enumEq(i,w.TId("catch"))||this.unexpected(i);(i=this.token())!=w.TPOpen&&this.unexpected(i);var n=this.getIdent(),i=((i=this.token())!=w.TDoubleDot&&this.unexpected(i),null),g=(this.allowTypes?i=this.parseType():(g=this.token(),U.enumEq(g,w.TId("Dynamic"))||this.unexpected(g)),this.token());return g!=w.TPClose&&this.unexpected(g),Tx.ETry(t,n,i,this.parseExpr());case"var":var f,s=this.getIdent(),i=null,t=((u=this.token())==w.TDoubleDot&&this.allowTypes&&(i=this.parseType(),u=this.token()),null);return U.enumEq(u,w.TOp("="))?t=this.parseExpr():(f=this.tokens).head=new xp(u,f.head),Tx.EVar(s,i,t);case"while":return Tx.EWhile(this.parseExpr(),this.parseExpr());default:return null}},parseExprNext:function(e){var t,n,i=this.token();if(null==i)return(n=this.tokens).head=new xp(i,n.head),e;switch(i._hx_index){case 2:return"is"==(a=i.s)?this.makeBinop(a,e,this.parseExpr()):((n=this.tokens).head=new xp(i,n.head),e);case 3:if("->"==(a=i.s)){switch(e._hx_index){case 1:var s=Tx.EReturn(this.parseExpr());return Tx.EFunction([{name:e.v}],s);case 3:if(1==(t=e.e)._hx_index)return s=Tx.EReturn(this.parseExpr()),Tx.EFunction([{name:t.v}],s);break;case 26:if(1==(t=e.e)._hx_index)return s=Tx.EReturn(this.parseExpr()),Tx.EFunction([{name:t.v,t:e.t}],s)}this.unexpected(i)}return-1==this.opPriority.h[a]?this.isBlock(e)||3==e._hx_index?((n=this.tokens).head=new xp(i,n.head),e):this.parseExprNext(Tx.EUnop(a,!1,e)):this.makeBinop(a,e,this.parseExpr());case 4:return this.parseExprNext(Tx.ECall(e,this.parseExprList(w.TPClose)));case 8:return this.parseExprNext(Tx.EField(e,this.getIdent()));case 9:var a=this.getIdent(),s="__a_"+this.uid++;return this.parseExprNext(Tx.EBlock([Tx.EVar(s,null,e),Tx.ETernary(Tx.EBinop("==",Tx.EIdent(s),Tx.EIdent("null")),Tx.EIdent("null"),Tx.EField(Tx.EIdent(s),a))]));case 12:var l=this.parseExpr();return(r=this.token())!=w.TBkClose&&this.unexpected(r),this.parseExprNext(Tx.EArray(e,l));case 14:var r,l=this.parseExpr();return(r=this.token())!=w.TDoubleDot&&this.unexpected(r),Tx.ETernary(e,l,this.parseExpr());default:return(n=this.tokens).head=new xp(i,n.head),e}},parseFunctionArgs:function(){var e=[],t=this.token();if(t!=w.TPClose)for(var n=!1;!n;){var i=!1;if(null!=t&&14==t._hx_index&&(i=!0,t=this.token()),null==t){this.unexpected(t);break}if(2!=t._hx_index){this.unexpected(t);break}var s={name:t.s};if(e.push(s),i&&(s.opt=!0),this.allowTypes&&(this.maybe(w.TDoubleDot)&&(s.t=this.parseType()),this.maybe(w.TOp("=")))&&(s.value=this.parseExpr()),null==(t=this.token()))this.unexpected(t);else switch(t._hx_index){case 5:n=!0;break;case 10:t=this.token();break;default:this.unexpected(t)}}return e},parseFunctionDecl:function(){var e,t,n=this.token(),n=(n!=w.TPOpen&&this.unexpected(n),this.parseFunctionArgs()),i=null;return this.allowTypes&&((e=this.token())!=w.TDoubleDot?(t=this.tokens).head=new xp(e,t.head):i=this.parseType()),{args:n,ret:i,body:this.parseExpr()}},parsePath:function(){for(var e=[this.getIdent()];;){var t=this.token();if(t!=w.TDot){var n=this.tokens;n.head=new xp(t,n.head);break}e.push(this.getIdent())}return e},parseType:function(){var n=this;if(null==(i=this.token()))return this.unexpected(i);switch(i._hx_index){case 2:(a=this.tokens).head=new xp(i,a.head);var e=this.parsePath(),t=null,i=this.token();if(null==i)(a=this.tokens).head=new xp(i,a.head);else if(3==i._hx_index)if("<"==i.s){t=[];e:for(;;){if(t.push(this.parseType()),null!=(i=this.token()))switch(i._hx_index){case 3:if(">"==(u=i.s))break e;if(62!=Jn.cca(u,0))break;(a=this.tokens).head=new xp(w.TOp(Jn.substr(u,1,null)),a.head);break e;case 10:continue}this.unexpected(i);break}}else(a=this.tokens).head=new xp(i,a.head);else(a=this.tokens).head=new xp(i,a.head);return this.parseTypeNext(Ex.CTPath(e,t));case 4:var e=this.token(),s=this.token();(a=this.tokens).head=new xp(s,a.head);(a=this.tokens).head=new xp(e,a.head);var a,l=function(e){var t=n.token();return null!=t&&3==t._hx_index&&"->"==t.s||n.unexpected(t),Ex.CTFun(e,n.parseType())};if(null==e){var r=this.parseType();if(null==(u=this.token()))return this.unexpected(u);switch(u._hx_index){case 5:return this.parseTypeNext(Ex.CTParent(r));case 10:for(var o=[r];o.push(this.parseType()),this.maybe(w.TComma););return(r=this.token())!=w.TPClose&&this.unexpected(r),l(o);default:return this.unexpected(u)}}else switch(e._hx_index){case 2:if(null!=s&&15==s._hx_index){for(var u=[],h=0,c=this.parseFunctionArgs();h<c.length;){var _=c[h];if(++h,null!=_.value&&!this.resumeErrors)throw tl.thrown(Fx.ECustom("Default values not allowed in function types"));u.push(Ex.CTNamed(_.name,_.opt?Ex.CTOpt(_.t):_.t))}return l(u)}r=this.parseType();if(null==(u=this.token()))return this.unexpected(u);switch(u._hx_index){case 5:return this.parseTypeNext(Ex.CTParent(r));case 10:for(o=[r];o.push(this.parseType()),this.maybe(w.TComma););return(r=this.token())!=w.TPClose&&this.unexpected(r),l(o);default:return this.unexpected(u)}break;case 5:for(u=[],h=0,c=this.parseFunctionArgs();h<c.length;){_=c[h];if(++h,null!=_.value&&!this.resumeErrors)throw tl.thrown(Fx.ECustom("Default values not allowed in function types"));u.push(Ex.CTNamed(_.name,_.opt?Ex.CTOpt(_.t):_.t))}return l(u);default:r=this.parseType();if(null==(u=this.token()))return this.unexpected(u);switch(u._hx_index){case 5:return this.parseTypeNext(Ex.CTParent(r));case 10:for(o=[r];o.push(this.parseType()),this.maybe(w.TComma););return(r=this.token())!=w.TPClose&&this.unexpected(r),l(o);default:return this.unexpected(u)}}break;case 6:var d=[],p=null;e:for(;;){if(null==(i=this.token())){this.unexpected(i);break}switch(i._hx_index){case 2:if("var"==(u=i.s)){var m=this.getIdent(),m=((r=this.token())!=w.TDoubleDot&&this.unexpected(r),d.push({name:m,t:this.parseType(),meta:p}),p=null,this.token());m!=w.TSemicolon&&this.unexpected(m)}else{m=this.token();if(m!=w.TDoubleDot&&this.unexpected(m),d.push({name:u,t:this.parseType(),meta:p}),null==(i=this.token()))this.unexpected(i);else switch(i._hx_index){case 7:break e;case 10:break;default:this.unexpected(i)}}break;case 7:break e;case 16:(p=null==p?[]:p).push({name:i.s,params:this.parseMetaArgs()});break;default:this.unexpected(i);break e}}return this.parseTypeNext(Ex.CTAnon(d));default:return this.unexpected(i)}},parseTypeNext:function(e){var t,n=this.token();return null==n||3!=n._hx_index||"->"!=n.s?((t=this.tokens).head=new xp(n,t.head),e):1==(n=this.parseType())._hx_index?(n.args.unshift(e),n):Ex.CTFun([e],n)},parseExprList:function(e){var t=[],n=this.token();if(n!=e){var i=this.tokens;for(i.head=new xp(n,i.head);;){if(t.push(this.parseExpr()),null==(n=this.token())){if(n==e)break;this.unexpected(n);break}if(10!=n._hx_index){if(n==e)break;this.unexpected(n);break}}}return t},parseModule:function(e,t,n){this.initParser(t=null==t?"hscript":t,n=null==n?0:n),this.input=e,this.readPos=0,this.allowTypes=!0,this.allowMetadata=!0;for(var i=[];;){var s=this.token();if(s==w.TEof)break;var a=this.tokens;a.head=new xp(s,a.head),i.push(this.parseModuleDecl())}return i},parseMetadata:function(){for(var e=[];;){var t=this.token();if(null==t){var n=this.tokens;n.head=new xp(t,n.head);break}if(16!=t._hx_index){n=this.tokens;n.head=new xp(t,n.head);break}e.push({name:t.s,params:this.parseMetaArgs()})}return e},parseParams:function(){if(this.maybe(w.TOp("<"))&&!this.resumeErrors)throw tl.thrown(Fx.EInvalidOp("Unsupported class type parameters"));return{}},parseModuleDecl:function(){var e=this.parseMetadata(),t=this.getIdent(),n=!1,i=!1;e:for(;;){switch(t){case"extern":i=!0;break;case"private":n=!0;break;default:break e}t=this.getIdent()}switch(t){case"class":var s=this.getIdent(),a=this.parseParams(),l=null,r=[];e:for(;;){if(null==(p=this.token())){(c=this.tokens).head=new xp(p,c.head);break}if(2!=p._hx_index){var o=this.tokens;o.head=new xp(p,o.head);break}switch(p.s){case"extends":l=this.parseType();break;case"implements":r.push(this.parseType());break;default:var u=this.tokens;u.head=new xp(p,u.head);break e}}var h=[];for((p=this.token())!=w.TBrOpen&&this.unexpected(p);!this.maybe(w.TBrClose);)h.push(this.parseField());return Dx.DClass({name:s,meta:e,params:a,extend:l,implement:r,fields:h,isPrivate:n,isExtern:i});case"import":for(var c,_=[this.getIdent()],d=!1;;){if((p=this.token())!=w.TDot){(c=this.tokens).head=new xp(p,c.head);break}if(null==(p=this.token()))this.unexpected(p);else switch(p._hx_index){case 2:_.push(p.s);break;case 3:"*"==p.s?d=!0:this.unexpected(p);break;default:this.unexpected(p)}}return(p=this.token())!=w.TSemicolon&&this.unexpected(p),Dx.DImport(_,d);case"package":_=this.parsePath();return(p=this.token())!=w.TSemicolon&&this.unexpected(p),Dx.DPackage(_);case"typedef":var s=this.getIdent(),a=this.parseParams(),p=this.token();return U.enumEq(p,w.TOp("="))||this.unexpected(p),Dx.DTypedef({name:s,meta:e,params:a,isPrivate:n,t:this.parseType()});default:this.unexpected(w.TId(t))}return null},parseField:function(){var e=this.parseMetadata(),t=[];e:for(;;){var n=this.getIdent();switch(n){case"function":var i=this.getIdent(),s=this.parseFunctionDecl();return{name:i,meta:e,access:t,kind:Px.KFunction({args:s.args,expr:s.body,ret:s.ret})};case"inline":t.push(Rx.AInline);break;case"macro":t.push(Rx.AMacro);break;case"override":t.push(Rx.AOverride);break;case"private":t.push(Rx.APrivate);break;case"public":t.push(Rx.APublic);break;case"static":t.push(Rx.AStatic);break;case"var":var a,i=this.getIdent(),s=null,l=null,r=(this.maybe(w.TPOpen)&&(s=this.getIdent(),(r=this.token())!=w.TComma&&this.unexpected(r),l=this.getIdent(),(r=this.token())!=w.TPClose)&&this.unexpected(r),this.maybe(w.TDoubleDot)?this.parseType():null),o=this.maybe(w.TOp("="))?this.parseExpr():null;return null!=o?this.isBlock(o)?this.maybe(w.TSemicolon):(a=this.token())!=w.TSemicolon&&this.unexpected(a):null!=r&&2==r._hx_index?this.maybe(w.TSemicolon):(a=this.token())!=w.TSemicolon&&this.unexpected(a),{name:i,meta:e,access:t,kind:Px.KVar({get:s,set:l,type:r,expr:o})};default:this.unexpected(w.TId(n));break e}}return null},readString:function(e){for(var t="",n=!1,i=this.line;;){var s=this.input.charCodeAt(this.readPos++);if(s!=s){if(this.line=i,this.resumeErrors)break;throw tl.thrown(Fx.EUnterminatedString)}if(n)switch(n=!1,s){case 47:this.allowJSON?t+=String.fromCodePoint(s):this.invalidChar(s);break;case 34:case 39:case 92:t+=String.fromCodePoint(s);break;case 110:t+=String.fromCodePoint(10);break;case 114:t+=String.fromCodePoint(13);break;case 116:t+=String.fromCodePoint(9);break;case 117:this.allowJSON||this.invalidChar(s);for(var a=0,l=0;l<4;){l++,a<<=4;var r=this.input.charCodeAt(this.readPos++);switch(r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a+=r-48;break;case 65:case 66:case 67:case 68:case 69:case 70:a+=r-55;break;case 97:case 98:case 99:case 100:case 101:case 102:a+=r-87;break;default:if(r!=r&&(this.line=i,!this.resumeErrors))throw tl.thrown(Fx.EUnterminatedString);this.invalidChar(r)}}t+=String.fromCodePoint(a);break;default:this.invalidChar(s)}else if(92==s)n=!0;else{if(s==e)break;10==s&&this.line++,t+=String.fromCodePoint(s)}}return t},token:function(){var e,t;if(null!=this.tokens.head)return null==(e=(a=this.tokens).head)?null:(a.head=e.next,e.elt);for(this.char<0?t=this.input.charCodeAt(this.readPos++):(t=this.char,this.char=-1);;){if(t!=t)return this.char=t,w.TEof;switch(t){case 0:return w.TEof;case 10:this.line++;break;case 9:case 13:case 32:break;case 34:case 39:return w.TConst(Bx.CString(this.readString(t)));case 35:if(t=this.input.charCodeAt(this.readPos++),this.idents[t])for(var n=String.fromCodePoint(t);;){if(t=this.input.charCodeAt(this.readPos++),!this.idents[t])return this.char=t,this.preprocess(n);n+=String.fromCodePoint(t)}this.invalidChar(t);break;case 40:return w.TPOpen;case 41:return w.TPClose;case 44:return w.TComma;case 46:switch(t=this.input.charCodeAt(this.readPos++)){case 46:return 46!=(t=this.input.charCodeAt(this.readPos++))&&this.invalidChar(t),w.TOp("...");case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var i=t-48,s=1;;)switch(s*=10,t=this.input.charCodeAt(this.readPos++)){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:i=10*i+(t-48);break;default:return this.char=t,w.TConst(Bx.CFloat(i/s))}break;default:return this.char=t,w.TDot}break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var a,l=t-48,r=0;;)switch(r*=10,t=this.input.charCodeAt(this.readPos++)){case 46:if(0<r){if(10==r&&46==this.input.charCodeAt(this.readPos++))return(a=this.tokens).head=new xp(w.TOp("..."),a.head),w.TConst((c=0|l)==l?Bx.CInt(c):Bx.CFloat(l));this.invalidChar(t)}r=1;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:l=10*l+(t-48);break;case 69:case 101:var o,u=this.token(),h=null;if(null==u){var c=this.tokens;c.head=new xp(u,c.head)}else switch(u._hx_index){case 1:var _=u.c;0==_._hx_index?h=_.v:(_=this.tokens).head=new xp(u,_.head);break;case 3:"-"==u.s?null==(u=this.token())?(_=this.tokens).head=new xp(u,_.head):1==u._hx_index?0==(o=u.c)._hx_index?h=-o.v:(o=this.tokens).head=new xp(u,o.head):(o=this.tokens).head=new xp(u,o.head):(d=this.tokens).head=new xp(u,d.head);break;default:var d=this.tokens;d.head=new xp(u,d.head)}return null==h&&this.invalidChar(t),w.TConst(Bx.CFloat(Math.pow(10,h)/r*l*10));case 120:(0<l||0<r)&&this.invalidChar(t);for(var p=0;;)switch(t=this.input.charCodeAt(this.readPos++)){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:p=(p<<4)+t-48;break;case 65:case 66:case 67:case 68:case 69:case 70:p=t-55+(p<<4);break;case 97:case 98:case 99:case 100:case 101:case 102:p=t-87+(p<<4);break;default:return this.char=t,w.TConst(Bx.CInt(p))}break;default:this.char=t;var m=0|l;return w.TConst(0<r?Bx.CFloat(10*l/r):m==l?Bx.CInt(m):Bx.CFloat(l))}break;case 58:return w.TDoubleDot;case 59:return w.TSemicolon;case 61:return 61==(t=this.input.charCodeAt(this.readPos++))?w.TOp("=="):62==t?w.TOp("=>"):(this.char=t,w.TOp("="));case 63:return 46==(t=this.input.charCodeAt(this.readPos++))?w.TQuestionDot:(this.char=t,w.TQuestion);case 64:if(t=this.input.charCodeAt(this.readPos++),this.idents[t]||58==t)for(var g=String.fromCodePoint(t);;){if(t=this.input.charCodeAt(this.readPos++),!this.idents[t])return this.char=t,w.TMeta(g);g+=String.fromCodePoint(t)}this.invalidChar(t);break;case 91:return w.TBkOpen;case 93:return w.TBkClose;case 123:return w.TBrOpen;case 125:return w.TBrClose;default:if(this.ops[t])for(var f=String.fromCodePoint(t);;){if((t=this.input.charCodeAt(this.readPos++))!=t&&(t=0),!this.ops[t])return this.char=t,w.TOp(f);var A=f;if(f+=String.fromCodePoint(t),!Object.prototype.hasOwnProperty.call(this.opPriority.h,f)&&Object.prototype.hasOwnProperty.call(this.opPriority.h,A))return"//"==f||"/*"==f?this.tokenComment(f,t):(this.char=t,w.TOp(A))}if(this.idents[t])for(var x=String.fromCodePoint(t);;){if((t=this.input.charCodeAt(this.readPos++))!=t&&(t=0),!this.idents[t])return this.char=t,w.TId(x);x+=String.fromCodePoint(t)}this.invalidChar(t)}t=this.input.charCodeAt(this.readPos++)}},preprocValue:function(e){return this.preprocesorValues.h[e]},parsePreproCond:function(){var e=this.token();if(null==e)return this.unexpected(e);switch(e._hx_index){case 2:return Tx.EIdent(e.s);case 3:return"!"==e.s?Tx.EUnop("!",!0,this.parsePreproCond()):this.unexpected(e);case 4:var t=this.tokens;return t.head=new xp(w.TPOpen,t.head),this.parseExpr();default:return this.unexpected(e)}},evalPreproCond:function(e){switch(e._hx_index){case 1:return null!=this.preprocValue(e.v);case 3:return this.evalPreproCond(e.e);case 6:var t=e.e1,n=e.e2;switch(e.op){case"&&":return!!this.evalPreproCond(t)&&this.evalPreproCond(n);case"||":return!!this.evalPreproCond(t)||this.evalPreproCond(n);default:if(this.resumeErrors)return!1;throw tl.thrown(Fx.EInvalidPreprocessor("Can't eval "+fe[e.__enum__].__constructs__[e._hx_index]._hx_name))}break;case 7:if("!"==e.op)return!this.evalPreproCond(e.e);if(this.resumeErrors)return!1;throw tl.thrown(Fx.EInvalidPreprocessor("Can't eval "+fe[e.__enum__].__constructs__[e._hx_index]._hx_name));default:if(this.resumeErrors)return!1;throw tl.thrown(Fx.EInvalidPreprocessor("Can't eval "+fe[e.__enum__].__constructs__[e._hx_index]._hx_name))}},preprocess:function(e){switch(e){case"else":case"elseif":return 0<this.preprocStack.length?this.preprocStack[this.preprocStack.length-1].r?(this.preprocStack[this.preprocStack.length-1].r=!1,this.skipTokens(),this.token()):"else"==e?(this.preprocStack.pop(),this.preprocStack.push({r:!0}),this.token()):(this.preprocStack.pop(),this.preprocess("if")):w.TPrepro(e);case"end":return 0<this.preprocStack.length?(this.preprocStack.pop(),this.token()):w.TPrepro(e);case"if":return this.evalPreproCond(this.parsePreproCond())?this.preprocStack.push({r:!0}):(this.preprocStack.push({r:!1}),this.skipTokens()),this.token();default:return w.TPrepro(e)}},skipTokens:function(){for(var e=this.preprocStack.length-1,t=this.preprocStack[e];;){var n=this.token();if(n==w.TEof&&!this.resumeErrors)throw tl.thrown(Fx.EInvalidPreprocessor("Unclosed"));if(this.preprocStack[e]!=t){var i=this.tokens;i.head=new xp(n,i.head);break}}},tokenComment:function(e,t){var n=Jn.cca(e,1);if(47==n){for(;13!=t&&10!=t&&(t=this.input.charCodeAt(this.readPos++))==t;);this.char=t}else{if(42!=n)return this.char=t,w.TOp(e);var i=this.line;if("/**/"==e)this.char=t;else do{for(;42!=t;)if(10==t&&this.line++,(t=this.input.charCodeAt(this.readPos++))!=t){if(this.line=i,this.resumeErrors)break;throw tl.thrown(Fx.EUnterminatedComment)}if((t=this.input.charCodeAt(this.readPos++))!=t){if(this.line=i,this.resumeErrors)break;throw tl.thrown(Fx.EUnterminatedComment)}}while(47!=t)}return this.token()},constString:function(e){switch(e._hx_index){case 0:return null==(t=e.v)?"null":""+t;case 1:var t;return null==(t=e.f)?"null":""+t;case 2:return e.s}},tokenString:function(e){switch(e._hx_index){case 0:return"<eof>";case 1:return this.constString(e.c);case 2:case 3:return e.s;case 4:return"(";case 5:return")";case 6:return"{";case 7:return"}";case 8:return".";case 9:return"?.";case 10:return",";case 11:return";";case 12:return"[";case 13:return"]";case 14:return"?";case 15:return":";case 16:return"@"+e.s;case 17:return"#"+e.s}},__class__:Vx},function(){}),Ox=((i["js.Boot"]=nl).__name__="js.Boot",nl.getClass=function(e){var t;return null==e?null:e instanceof Array?Array:null!=(t=e.__class__)?t:null!=(t=nl.__nativeClassName(e))?nl.__resolveNativeClass(t):null},nl.__string_rec=function(s,a){if(null==s)return"null";if(5<=a.length)return"<...>";var l,e,t=typeof s;switch(t="function"==t&&(s.__name__||s.__ename__)?"object":t){case"function":return"<function>";case"object":if(s.__enum__)return u=(l=fe[s.__enum__].__constructs__[s._hx_index])._hx_name,l.__params__?(a+="\t",u+"("+(()=>{for(var e=[],t=0,n=l.__params__;t<n.length;){var i=n[t];t+=1,e.push(nl.__string_rec(s[i],a))}return e})().join(",")+")"):u;if(s instanceof Array){for(var n="[",i=(a+="\t",0),r=s.length;i<r;){var o=i++;n+=(0<o?",":"")+nl.__string_rec(s[o],a)}return n+="]"}try{e=s.toString}catch(i){return CA.lastError=i,"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e){var u=s.toString();if("[object Object]"!=u)return u}var n="{\n",h=(a+="\t",null!=s.hasOwnProperty),c=null;for(c in s)h&&!s.hasOwnProperty(c)||"prototype"!=c&&"__class__"!=c&&"__super__"!=c&&"__interfaces__"!=c&&"__properties__"!=c&&(2!=n.length&&(n+=", \n"),n+=a+c+" : "+nl.__string_rec(s[c],a));return n+="\n"+(a=a.substring(1))+"}";case"string":return s;default:return String(s)}},nl.__interfLoop=function(e,t){for(;;){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var i=0,s=n.length;i<s;){var a=n[i++];if(a==t||nl.__interfLoop(a,t))return!0}e=e.__super__}},nl.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array;case y1:return"boolean"==typeof e;case x1:return null!=e;case w1:return"number"==typeof e;case A1:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(nl.__downcastCheck(e,t))return!0}else if("object"==typeof t&&nl.__isNativeObj(t)&&e instanceof t)return!0;return t==b1&&null!=e.__name__?!0:t==v1&&null!=e.__ename__||null!=e.__enum__&&fe[e.__enum__]==t}},nl.__downcastCheck=function(e,t){return e instanceof t||!!t.__isInterface__&&nl.__interfLoop(nl.getClass(e),t)},nl.__implements=function(e,t){return nl.__interfLoop(nl.getClass(e),t)},nl.__cast=function(e,t){if(null==e||nl.__instanceof(e,t))return e;throw tl.thrown("Cannot cast "+el.string(e)+" to "+el.string(t))},nl.__toStr=null,nl.__nativeClassName=function(e){e=nl.__toStr.call(e).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},nl.__isNativeObj=function(e){return null!=nl.__nativeClassName(e)},nl.__resolveNativeClass=function(e){return p[e]},function(e,t){var n;-101==e&&-102==t||((n=window.document.createElement("canvas")).width=e,n.height=t,this.ctx=n.getContext("2d",null))}),Wx=((i["hxd.BitmapData"]=Ox).__name__="hxd.BitmapData",Ox.prototype={setPixel:function(e,t,n){var i,s=this.lockImage;null!=s?(i=e+t*s.width<<2,s.data[i]=n>>16&255,s.data[1|i]=n>>8&255,s.data[2|i]=255&n,s.data[3|i]=n>>>24&255):(null==(s=this.pixel)&&(s=this.ctx.createImageData(1,1),this.pixel=s),s.data[0]=n>>16&255,s.data[1]=n>>8&255,s.data[2]=255&n,s.data[3]=n>>>24&255,this.ctx.putImageData(s,e,t))},getPixels:function(){var e=this.ctx.canvas.width,t=this.ctx.canvas.height,n=this.ctx.getImageData(0,0,e,t).data.buffer;return new e0(e,t,IA.ofData(n),C.RGBA)},__class__:Ox},{}),Nx=(Wx.toString=function(e){switch(e){case 0:return"F32";case 1:return"F16";case 2:return"U8";case 3:return"S8"}},{}),Gx=(Nx.toString=function(e){switch(e){case 1:return"DFloat";case 2:return"DVec2";case 3:return"DVec3";case 4:return"DVec4";case 9:return"DBytes4";case 16:return"DMat4"}},Nx.fromHXSL=function(e){switch(e._hx_index){case 3:return 1;case 5:var t=e.t;switch(e.size){case 2:if(1==t._hx_index)return 2;throw tl.thrown("Unsupported buffer type "+el.string(e));case 3:if(1==t._hx_index)return 3;throw tl.thrown("Unsupported buffer type "+el.string(e));case 4:if(1==t._hx_index)return 4;throw tl.thrown("Unsupported buffer type "+el.string(e));default:throw tl.thrown("Unsupported buffer type "+el.string(e))}break;case 7:return 16;case 9:if(4==e.size)return 9;throw tl.thrown("Unsupported buffer type "+el.string(e));default:throw tl.thrown("Unsupported buffer type "+el.string(e))}},function(e,t,n){null==n&&(n=0),this.name=e,this.type=t,this.precision=n}),Ux=((i["hxd.BufferInput"]=Gx).__name__="hxd.BufferInput",Gx.prototype={__class__:Gx},{}),Lx=(Ux._new=function(e,t,n){return e<<3|n|t<<16},function(e){this.uid=Lx._UID++,this.stride=this.strideBytes=0,this.inputs=e.slice(),this.hasLowPrecision=!1;for(var t=0;t<e.length;){var n=e[t],i=(++t,n.type),i=(this.stride+=i==nl.__cast(9,A1)?1:i,n.type);this.strideBytes+=(i==nl.__cast(9,A1)?1:i)*Wx.SIZES[n.precision],0!=(3&this.strideBytes)&&(this.strideBytes+=4-(3&this.strideBytes)),0!=n.precision&&(this.hasLowPrecision=!0)}}),jx=((i["hxd.BufferFormat"]=Lx).__name__="hxd.BufferFormat",Lx.__properties__={get_INDEX32:"get_INDEX32",get_INDEX16:"get_INDEX16",get_POS3D_NORMAL_UV_RGBA:"get_POS3D_NORMAL_UV_RGBA",get_POS3D_NORMAL_UV:"get_POS3D_NORMAL_UV",get_POS3D_UV:"get_POS3D_UV",get_POS3D:"get_POS3D",get_XY_UV:"get_XY_UV",get_XY_UV_RGBA:"get_XY_UV_RGBA"},Lx.XY_UV_RGBA=null,Lx.XY_UV=null,Lx.POS3D=null,Lx.POS3D_UV=null,Lx.POS3D_NORMAL_UV=null,Lx.POS3D_NORMAL_UV_RGBA=null,Lx.INDEX16=null,Lx.INDEX32=null,Lx.get_XY_UV_RGBA=function(){return null==Lx.XY_UV_RGBA&&(Lx.XY_UV_RGBA=Lx.make([new Gx("position",2,0),new Gx("uv",2,0),new Gx("color",4,0)])),Lx.XY_UV_RGBA},Lx.get_XY_UV=function(){return null==Lx.XY_UV&&(Lx.XY_UV=Lx.make([new Gx("position",2,0),new Gx("uv",2,0)])),Lx.XY_UV},Lx.get_POS3D=function(){return null==Lx.POS3D&&(Lx.POS3D=Lx.make([new Gx("position",3,0)])),Lx.POS3D},Lx.get_POS3D_NORMAL_UV=function(){return null==Lx.POS3D_NORMAL_UV&&(Lx.POS3D_NORMAL_UV=Lx.make([new Gx("position",3,0),new Gx("normal",3,0),new Gx("uv",2,0)])),Lx.POS3D_NORMAL_UV},Lx.get_POS3D_NORMAL_UV_RGBA=function(){return null==Lx.POS3D_NORMAL_UV_RGBA&&(Lx.POS3D_NORMAL_UV_RGBA=Lx.get_POS3D_NORMAL_UV().append("color",4)),Lx.POS3D_NORMAL_UV_RGBA},Lx.get_POS3D_UV=function(){return null==Lx.POS3D_UV&&(Lx.POS3D_UV=Lx.make([new Gx("position",3,0),new Gx("uv",2,0)])),Lx.POS3D_UV},Lx.get_INDEX16=function(){return null==Lx.INDEX16&&(Lx.INDEX16=Lx.make([new Gx("index",1,1)]),Lx.INDEX16.strideBytes=2),Lx.INDEX16},Lx.get_INDEX32=function(){return null==Lx.INDEX32&&(Lx.INDEX32=Lx.make([new Gx("index",1,0)])),Lx.INDEX32},Lx.fromID=function(e){for(var t=Lx.ALL_FORMATS.h,n=Object.keys(t),i=n.length,s=0;s<i;)for(var a=t[n[s++]],l=0;l<a.length;){var r=a[l];if(++l,r.uid==e)return r}return null},Lx.make=function(e){for(var t=[],n=0;n<e.length;)t.push(e[n++].name);for(var i=t.join("|"),s=Lx.ALL_FORMATS.h[i],n=(null==s&&(Lx.ALL_FORMATS.h[i]=s=[]),0);n<s.length;){for(var a=s[n],l=(++n,!0),r=0,o=e.length;r<o;){var u=r++,h=e[u],u=a.inputs[u];if(h.type!=u.type||h.name!=u.name||h.precision!=u.precision){l=!1;break}}if(l)return a}a=new Lx(e);return s.push(a),a},Lx.float32to16=function(e,t){null==t&&(t=!1);var e=qA.floatToI32(e),n=(-2147483648&e)>>>16,i=(2139095040&e)>>>23,e=8388607&e;return 112<i?n|i-112<<10&31744|e>>13:i<113&&101<i&&!t?n|1+(8384512+e>>125-i)>>1:143<i?32767|n:0},Lx.float16to32=function(e){var t=(32768&e)<<16,n=(1023&e)<<13,e=(31744&e)>>10;return 0!=e?qA.i32ToFloat(t|112+e<<23|n):0==n?0:(e=qA.floatToI32(n)>>23,qA.i32ToFloat(t|e-37<<23|n<<150-e&8380416))},Lx.float32toS8=function(e){e=Math.floor(128*e);return 127<=e?127:e<=-127?128:0<=e?e:127+e|128},Lx.floatS8to32=function(e){return 0!=(128&e)?-1*(127-(127&e))/128:(127&e)/128},Lx.float32toU8=function(e){return e<0?0:1<=e?255:Math.floor(256*e)},Lx.prototype={getInput:function(e){for(var t=0,n=this.inputs;t<n.length;){var i=n[t];if(++t,i.name==e)return i}return null},calculateInputOffset:function(e){for(var t=0,n=0,i=this.inputs;n<i.length;){var s=i[n];if(++n,s.name==e)return t;var a=s.type;0!=(3&(t+=(a==nl.__cast(9,A1)?1:a)*Wx.SIZES[s.precision]))&&(t+=4-(3&t))}throw tl.thrown("Input not found : "+e)},hasInput:function(e,t){for(var n=0,i=this.inputs;n<i.length;){var s=i[n];if(++n,s.name==e)return null==t||t==s.type}return!1},append:function(e,t){var n=this.inputs.slice();return n.push(new Gx(e,t,0)),Lx.make(n)},resolveMapping:function(e){var t=null==this.mappings?null:this.mappings[e.uid];if(null==t){for(var t=[],n=0,i=e.inputs;n<i.length;){for(var s=i[n],a=(++n,!1),l=0,r=this.inputs;l<r.length;){var o=r[l];if(++l,o.name==s.name&&o.type==s.type){t.push(Ux._new(0,this.calculateInputOffset(o.name),o.precision)),a=!0;break}}if(!a)throw tl.thrown("Missing buffer input '"+s.name+"'")}null==this.mappings&&(this.mappings=[]),this.mappings[e.uid]=t}return t},toString:function(){for(var e=[],t=0,n=this.inputs;t<n.length;){var i=n[t];++t,e.push(i.name+":"+Nx.toString(i.type)+(0==i.precision?"":"."+Wx.toString(i.precision).toLowerCase()))}return e.toString()},__class__:Lx},function(e){this.mappings=[],this.uid=jx._UID++,this.formats=e}),Hx=((i["hxd.MultiFormat"]=jx).__name__="hxd.MultiFormat",jx.make=function(e){if(e.length>jx.MAX_FORMATS){for(var t=[],n=0;n<e.length;)t.push(e[n++].toString());throw tl.thrown("Too many formats (addBuffer leak?) "+el.string(t))}for(var i={found:null,nexts:jx.CACHE},t=0;t<e.length;){var s=e[t],a=(++t,i.nexts.h[s.uid]);null==a&&(a={found:null,nexts:new Je},i.nexts.h[s.uid]=a),i=a}return null==i.found&&(i.found=new jx(e)),i.found},jx.prototype={makeMapping:function(e){for(var t=[],n=e.inputs,i=0;i<n.length;){for(var s=n[i++],a=!1,l=null,r=this.formats,o=0;o<r.length;){var u=r[o],h=o++,c=u.getInput(s.name);if(null!=c&&(l=c).type==s.type){t.push(Ux._new(h,u.calculateInputOffset(c.name),c.precision)),a=!0;break}}if(!a){if(null!=l)throw tl.thrown("Shader buffer "+s.name+" was requested with "+(null==s.type?"null":Nx.toString(s.type))+" but found with "+(null==l.type?"null":Nx.toString(l.type)));throw tl.thrown("Missing shader buffer "+s.name)}}return this.mappings[e.uid]=t},__class__:jx},function(){this.map=new Je;for(var e=0;e<94;){var t=e++;this.map.h[65281+t]=33+t}for(e=192;e<199;)this.map.h[e++]=65;for(e=224;e<231;)this.map.h[e++]=97;for(e=200;e<204;)this.map.h[e++]=69;for(e=232;e<236;)this.map.h[e++]=101;for(e=204;e<208;)this.map.h[e++]=73;for(e=236;e<240;)this.map.h[e++]=105;for(e=210;e<215;)this.map.h[e++]=79;for(e=242;e<247;)this.map.h[e++]=111;for(e=217;e<221;)this.map.h[e++]=85;for(e=249;e<253;)this.map.h[e++]=117;this.map.h[199]=67,this.map.h[231]=67,this.map.h[208]=68,this.map.h[222]=100,this.map.h[209]=78,this.map.h[241]=110,this.map.h[221]=89,this.map.h[253]=121,this.map.h[255]=121,this.map.h[8364]=69,this.map.h[12288]=32,this.map.h[160]=32,this.map.h[171]=34,this.map.h[187]=34,this.map.h[8220]=34,this.map.h[8221]=34,this.map.h[8222]=34,this.map.h[8216]=39,this.map.h[8217]=39,this.map.h[180]=39,this.map.h[8216]=39,this.map.h[8249]=60,this.map.h[8250]=62,this.map.h[8211]=45}),Yx=((i["hxd.Charset"]=Hx).__name__="hxd.Charset",Hx.inst=null,Hx.getDefault=function(){return null==Hx.inst&&(Hx.inst=new Hx),Hx.inst},Hx.prototype={resolveChar:function(e,t){for(var n=e;null!=n;){var i=t.h[n];if(null!=i)return i;n=this.map.h[n]}return null},isCJK:function(e){return 11904<=e&&e<=42191||63744<=e&&e<=64255||131072<=e&&e<=262141},isSpace:function(e){return 32==e||12288==e},isBreakChar:function(e){return!!this.isSpace(e)||this.isCJK(e)},isComplementChar:function(e){return Hx.complementChars.h.hasOwnProperty(e)},__class__:Hx},fe["hxd.Cursor"]={__ename__:!0,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"hxd.Cursor",toString:o},Button:{_hx_name:"Button",_hx_index:1,__enum__:"hxd.Cursor",toString:o},Move:{_hx_name:"Move",_hx_index:2,__enum__:"hxd.Cursor",toString:o},TextInput:{_hx_name:"TextInput",_hx_index:3,__enum__:"hxd.Cursor",toString:o},Hide:{_hx_name:"Hide",_hx_index:4,__enum__:"hxd.Cursor",toString:o},Custom:((R=function(e){return{_hx_index:5,custom:e,__enum__:"hxd.Cursor",toString:o}})._hx_name="Custom",R.__params__=["custom"],R),Callback:((R=function(e){return{_hx_index:6,f:e,__enum__:"hxd.Cursor",toString:o}})._hx_name="Callback",R.__params__=["f"],R)}),Zx=(Yx.__constructs__=[Yx.Default,Yx.Button,Yx.Move,Yx.TextInput,Yx.Hide,Yx.Custom,Yx.Callback],Yx.__empty_constructs__=[Yx.Default,Yx.Button,Yx.Move,Yx.TextInput,Yx.Hide],(i["hxd.CustomCursor"]=Wp).__name__="hxd.CustomCursor",Wp.prototype={reset:function(){this.frameTime=0,this.frameIndex=0},update:function(e){for(var t=this.frameTime+e,n=this.frameDelay,i=this.frameIndex;n<=t;)t-=n,++i;return this.frameTime=t,i>=this.frames.length&&(i%=this.frames.length),i!=this.frameIndex?this.frameIndex=i:-1},__class__:Wp},{}),Xx=((i["hxd.DropFileEvent"]=Np).__name__="hxd.DropFileEvent",fe["hxd.EventKind"]={__ename__:!0,__constructs__:null,EPush:{_hx_name:"EPush",_hx_index:0,__enum__:"hxd.EventKind",toString:o},ERelease:{_hx_name:"ERelease",_hx_index:1,__enum__:"hxd.EventKind",toString:o},EMove:{_hx_name:"EMove",_hx_index:2,__enum__:"hxd.EventKind",toString:o},EOver:{_hx_name:"EOver",_hx_index:3,__enum__:"hxd.EventKind",toString:o},EOut:{_hx_name:"EOut",_hx_index:4,__enum__:"hxd.EventKind",toString:o},EWheel:{_hx_name:"EWheel",_hx_index:5,__enum__:"hxd.EventKind",toString:o},EFocus:{_hx_name:"EFocus",_hx_index:6,__enum__:"hxd.EventKind",toString:o},EFocusLost:{_hx_name:"EFocusLost",_hx_index:7,__enum__:"hxd.EventKind",toString:o},EKeyDown:{_hx_name:"EKeyDown",_hx_index:8,__enum__:"hxd.EventKind",toString:o},EKeyUp:{_hx_name:"EKeyUp",_hx_index:9,__enum__:"hxd.EventKind",toString:o},EReleaseOutside:{_hx_name:"EReleaseOutside",_hx_index:10,__enum__:"hxd.EventKind",toString:o},ETextInput:{_hx_name:"ETextInput",_hx_index:11,__enum__:"hxd.EventKind",toString:o},ECheck:{_hx_name:"ECheck",_hx_index:12,__enum__:"hxd.EventKind",toString:o}}),qx=(Xx.__constructs__=[Xx.EPush,Xx.ERelease,Xx.EMove,Xx.EOver,Xx.EOut,Xx.EWheel,Xx.EFocus,Xx.EFocusLost,Xx.EKeyDown,Xx.EKeyUp,Xx.EReleaseOutside,Xx.ETextInput,Xx.ECheck],Xx.__empty_constructs__=[Xx.EPush,Xx.ERelease,Xx.EMove,Xx.EOver,Xx.EOut,Xx.EWheel,Xx.EFocus,Xx.EFocusLost,Xx.EKeyDown,Xx.EKeyUp,Xx.EReleaseOutside,Xx.ETextInput,Xx.ECheck],(i["hxd.Event"]=Gp).__name__="hxd.Event",Gp.prototype={__class__:Gp},{}),Kx=(qx._new=function(e){return{pos:e,array:new Float32Array(new ArrayBuffer(e<<2))}},function(){}),Jx=((i["hxd.Key"]=Kx).__name__="hxd.Key",Kx.initialize=function(){Kx.initDone&&Kx.dispose(),Kx.initDone=!0,Kx.keyPressed=[],r0.getInstance().addEventTarget(Kx.onEvent)},Kx.dispose=function(){Kx.initDone&&(r0.getInstance().removeEventTarget(Kx.onEvent),Kx.initDone=!1,Kx.keyPressed=[])},Kx.onEvent=function(e){switch(e.kind._hx_index){case 0:e.button<5&&(Kx.keyPressed[e.button]=l0.frameCount+2);break;case 1:e.button<5&&(Kx.keyPressed[e.button]=-(l0.frameCount+2));break;case 5:Kx.keyPressed[0<e.wheelDelta?6:5]=l0.frameCount+2;break;case 8:!Kx.ALLOW_KEY_REPEAT&&0<Kx.keyPressed[e.keyCode]||(Kx.keyPressed[e.keyCode]=l0.frameCount+2);break;case 9:Kx.keyPressed[e.keyCode]=-(l0.frameCount+2);break;case 10:Kx.keyPressed=[]}},function(){});(i["hxd.Math"]=Jx).__name__="hxd.Math",Jx.srand=function(e){return null==e&&(e=1),(Math.random()-.5)*(2*e)};(n=fe["hxd.Flags"]={__ename__:!0,__constructs__:null,ReadOnly:{_hx_name:"ReadOnly",_hx_index:0,__enum__:"hxd.Flags",toString:o},AlphaPremultiplied:{_hx_name:"AlphaPremultiplied",_hx_index:1,__enum__:"hxd.Flags",toString:o}}).__constructs__=[n.ReadOnly,n.AlphaPremultiplied],n.__empty_constructs__=[n.ReadOnly,n.AlphaPremultiplied];var $x={},e0=($x.fromPixels=function(e){return e.convert(C.ARGB),e},function(e,t,n,i,s){null==s&&(s=0),this.width=e,this.height=t,this.bytes=n,this.set_innerFormat(i),this.offset=s,this.flags=0}),t0=((i["hxd.Pixels"]=e0).__name__="hxd.Pixels",e0.calcDataSize=function(e,t,n){switch(n._hx_index){case 22:return(e+3>>2)*(t+3>>2)*16;case 23:if(0==(i=n.v))return(e+3>>2)*(t+3>>2)*8;if(1==i||2==i)return(e+3>>2)*(t+3>>2)*16;throw tl.thrown("Unsupported ETC format");case 24:var i,s=(e+3>>2)*(t+3>>2);return 3!=(i=n.v)&&(1==i||4==i)?8*s:16*s;default:return t*e0.calcStride(e,n)}},e0.calcStride=function(e,t){switch(t._hx_index){case 3:case 21:s=8;break;case 4:s=16;break;case 5:s=1;break;case 6:case 18:s=2;break;case 7:s=4;break;case 8:s=2;break;case 9:case 19:s=4;break;case 10:s=8;break;case 11:s=3;break;case 12:case 20:s=6;break;case 13:s=12;break;case 0:case 1:case 2:case 14:case 15:case 16:case 17:s=4;break;case 22:s=16*(e+3>>2)<<4;break;case 23:if(0==(n=t.v))s=e+3>>2<<3;else{if(1!=n)throw tl.thrown("Unsupported ETC format");s=e+3>>2<<4}break;case 24:var n,i=e+3>>2,s=3==(n=t.v)?i<<4:1==n||4==n?i<<1:i<<2;break;case 25:s=2;break;case 26:s=3;break;case 27:case 28:s=4}return e*s},e0.alloc=function(e,t,n){return new e0(e,t,new IA(new ArrayBuffer(e0.calcDataSize(e,t,n))),n)},e0.prototype={set_innerFormat:function(e){return this.innerFormat=e,this.stride=e0.calcStride(this.width,e),this.dataSize=e0.calcDataSize(this.width,this.height,e),this.bytesPerPixel=e0.calcStride(1,e),e},invalidFormat:function(){throw tl.thrown("Unsupported format for this operation : "+el.string(this.innerFormat))},copyInner:function(){var e=this.bytes;this.bytes=new IA(new ArrayBuffer(this.dataSize)),this.bytes.blit(0,e,this.offset,this.dataSize),this.offset=0,this.flags&=-2},flipY:function(){0!=(1&this.flags)&&this.copyInner(),this.stride%4!=0&&this.invalidFormat();for(var e=0,t=this.height>>1;e<t;)for(var n=e++,i=n*this.stride+this.offset,s=(this.height-1-n)*this.stride+this.offset,a=0,l=this.stride>>2;a<l;){++a;var r=this.bytes.getInt32(i),o=this.bytes.getInt32(s);this.bytes.setInt32(i,o),this.bytes.setInt32(s,r),i+=4,s+=4}},convert:function(e){if(this.innerFormat!=e&&!U.enumEq(this.innerFormat,e)){0!=(1&this.flags)&&this.copyInner();var t=this.bytes.b,n=this.innerFormat;switch(n._hx_index){case 0:switch(e._hx_index){case 1:for(var i=0,s=this.width*this.height;i<s;){var a=t[d=(i++<<2)+this.offset],l=t[d+1],r=t[d+2],o=t[d+3];t[d++]=o,t[d++]=r,t[d++]=l,t[d]=a}break;case 2:for(i=0,s=this.width*this.height;i<s;){a=t[d=(i++<<2)+this.offset];t[d]=t[d+1],t[d+1]=t[d+2],t[d+2]=t[d+3],t[d+3]=a}break;default:throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e))}break;case 1:switch(e._hx_index){case 0:for(i=0,s=this.width*this.height;i<s;){a=t[d=(i++<<2)+this.offset],l=t[d+1],r=t[d+2],o=t[d+3];t[d++]=o,t[d++]=r,t[d++]=l,t[d]=a}break;case 2:for(i=0,s=this.width*this.height;i<s;){o=t[d=(i++<<2)+this.offset];t[d]=t[d+2],t[d+2]=o}break;default:throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e))}break;case 2:switch(e._hx_index){case 0:for(i=0,s=this.width*this.height;i<s;){a=t[(d=(i++<<2)+this.offset)+3];t[d+3]=t[d+2],t[d+2]=t[d+1],t[d+1]=t[d],t[d]=a}break;case 1:for(i=0,s=this.width*this.height;i<s;){o=t[d=(i++<<2)+this.offset];t[d]=t[d+2],t[d+2]=o}break;case 5:for(var u=(h=new IA(new ArrayBuffer(this.width*this.height))).b,i=0,s=this.width*this.height;i<s;)u[c=i++]=t[c<<2];this.bytes=h;break;default:throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e))}break;case 4:if(7!=e._hx_index)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));for(var h=new IA(new ArrayBuffer(this.height*this.width*4)),i=0,s=this.width*this.height;i<s;){var c=i++;h.setFloat(c<<2,this.bytes.getFloat(c<<4))}this.bytes=h;break;case 7:switch(e._hx_index){case 1:case 2:for(var _=this.bytes,d=0,i=0,s=this.width*this.height;i<s;){++i;var p=255*_.getFloat(d)|0;p<0?p=0:255<p&&(p=255),t[d++]=p,t[d++]=p,t[d++]=p,t[d++]=255}break;default:throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e))}break;case 18:if(7!=e._hx_index)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));for(h=new IA(new ArrayBuffer(this.width*this.height*4)),_=this.bytes,i=0,s=this.width*this.height;i<s;){c=i++;h.setFloat(c<<2,_.getUInt16(c<<1)/65535)}this.bytes=h;break;case 22:if(22!=e._hx_index)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));if(n.v!=e.v)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));break;case 23:if(23!=e._hx_index)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));if(n.v!=e.v)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));break;case 24:if(24!=e._hx_index)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));if(n.v!=e.v)throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e));break;default:throw tl.thrown("Cannot convert from "+el.string(this.innerFormat)+" to "+el.string(e))}this.set_innerFormat(e)}},setPixel:function(e,t,n){var i=(e+t*this.width)*this.bytesPerPixel+this.offset;switch(0!=(1&this.flags)&&this.copyInner(),this.innerFormat._hx_index){case 0:this.bytes.setInt32(i,n>>>24|n>>8&65280|n<<8&16711680|n<<24);break;case 1:this.bytes.setInt32(i,n);break;case 2:this.bytes.setInt32(i,-16711936&n|n<<16&16711680|n>>16&255);break;case 5:this.bytes.b[i]=n;break;case 8:this.bytes.setUInt16(i,(255&n)<<8|(65280&n)>>8);break;default:this.invalidFormat()}},dispose:function(){this.bytes=null},toString:function(){return"Pixels("+this.width+"x"+this.height+" "+el.string(this.innerFormat)+")"},__class__:e0,__properties__:{set_innerFormat:"set_innerFormat"}},function(e){this.init(e)}),n0=((i["hxd.Rand"]=t0).__name__="hxd.Rand",t0.hash=function(e,t){null==t&&(t=5381);e=xA._mul(e,-862048943),e=xA._mul(e<<15|e>>>17,461845907),t=xA._mul(t=(t^=e)<<13|t>>>19,5)+-430675100|0;return t=xA._mul(t^=t>>16,-2048144789),(t=xA._mul(t^=t>>13,-1028477387))^t>>16},t0.prototype={init:function(e){this.seed=e,this.seed2=t0.hash(e),0==this.seed&&(this.seed=1),0==this.seed2&&(this.seed2=1)},__class__:t0},function(){}),i0=((i["hxd.Res"]=n0).__name__="hxd.Res",n0.__properties__={set_loader:"set_loader",get_loader:"get_loader"},n0.get_loader=function(){var e=N0.currentInstance;if(null==e)throw tl.thrown("Resource loader not initialized: call to hxd.Res.initXXX() required");return e},n0.set_loader=function(e){return N0.currentInstance=e},function(e){this.defaultCursor=Yx.Default,this.mouseCheckMove=!0,this.enablePhysicalMouse=!0,this.isOut=!1,this.onOver=new Gp(Xx.EOver),this.onOut=new Gp(Xx.EOut),this.checkPos=new Gp(Xx.ECheck),this.focusLost=new Gp(Xx.EFocusLost),this.lastTouch=0,this.mouseY=-1,this.mouseX=-1,this.overIndex=-1,this.scenes=[],this.pendingEvents=[],this.pushList=[],this.overList=[],this.overCandidates=[],null==e&&(e=r0.getInstance()),(this.window=e).addEventTarget(Cn(this,this.onEvent))}),s0=((i["hxd.SceneEvents"]=i0).__name__="hxd.SceneEvents",i0.prototype={onRemove:function(e){var t;e==this.currentFocus&&(this.currentFocus=null),0<=this.overIndex?0<=(t=this.overList.indexOf(e))&&(Jn.remove(this.overList,e),t<this.overIndex)&&this.overIndex--:(Jn.remove(this.overList,e),this.selectCursor()),Jn.remove(this.pushList,e)},addScene:function(e,t){e.setEvents(this),null==t?this.scenes.push(e):this.scenes.splice(t,0,e)},blur:function(){null==this.currentFocus||(this.focusLost.cancel=!1,this.currentFocus.handleEvent(this.focusLost),this.focusLost.cancel)||(this.currentFocus=null)},checkFocus:function(){var e;null!=this.currentFocus&&(null==(e=this.currentFocus.getInteractiveScene())?this.currentFocus=null:e.isInteractiveVisible(this.currentFocus)||this.blur())},emitEvent:function(e){var t=e.relX,n=e.relY,i=0,s=!1,a=!1,l=!1,r=!1,o=!1,u=!1;switch(this.overIndex=0,e.kind._hx_index){case 0:r=o=!0;break;case 1:r=!0;break;case 5:case 8:case 9:case 11:if(null==this.currentFocus||(e.relX=e.relY=0,this.currentFocus.handleEvent(e),e.relX=t,e.relY=n,e.propagate))break;return;case 2:case 12:l=a=!0}for(var h=0,c=this.scenes;h<c.length;){for(var _=c[h],d=(++h,null);;){if(null==(m=_.handleEvent(e,d))){e.relX=t,e.relY=n;break}if(a){if(l){var p=this.overList.indexOf(m);if(-1==p)this.overCandidates.length==i?this.overCandidates[i]={i:m,s:_,x:e.relX,y:e.relY,z:e.relZ}:((f=this.overCandidates[i]).i=m,f.s=_,f.x=e.relX,f.y=e.relY,f.z=e.relZ),++i,this.overList.splice(this.overIndex++,0,m),u=!0;else{if(p<this.overIndex){for(;this.overList[p]=this.overList[p+1],++p<this.overIndex;);this.overList[this.overIndex]=m,u=!0}else if(p>this.overIndex){for(;this.overList[p]=this.overList[p-1],--p>this.overIndex;);this.overList[this.overIndex]=m,u=!0}this.overIndex++}l=e.propagate}}else r&&(e.kind==Xx.EPush?this.pushList.push(m):Jn.remove(this.pushList,m)),o&&m==this.currentFocus&&(o=!1);if(e.relX=t,e.relY=n,!e.propagate){s=!0;break}d=m,e.propagate=!1}if(s)break}if(o&&null!=this.currentFocus&&this.blur(),a){if(this.overIndex<this.overList.length){for(;this.overIndex<this.overList.length;)this.overList.pop().handleEvent(this.onOut);u=!0}if(0!=i){var m=0,g=this.onOver;do{var f=this.overCandidates[m++]}while(g.relX=f.x,g.relY=f.y,g.relZ=f.z,f.s.isInteractiveVisible(f.i)?f.i.handleEvent(g):Jn.remove(this.overList,f.i),f.i=null,f.s=null,m<i)}}if(this.overIndex=-1,u&&this.selectCursor(),s||e==this.checkPos||(e.kind==Xx.EPush?this.pushList.push(null):e.kind==Xx.ERelease&&Jn.remove(this.pushList,null),this.dispatchListeners(e)),e.kind==Xx.ERelease&&0<this.pushList.length){for(h=0,c=this.pushList;h<c.length;){m=c[h];++h,null==m?(e.kind=Xx.EReleaseOutside,this.dispatchListeners(e),e.kind=Xx.ERelease):null!=(_=m.getInteractiveScene())&&(e.kind=Xx.EReleaseOutside,_.dispatchEvent(e,m),e.kind=Xx.ERelease,e.relX=t,e.relY=n)}this.pushList=[]}},checkEvents:function(){var e=this.pendingEvents,t=!this.mouseCheckMove,n=null==this.currentFocus;if(0<e.length){this.pendingEvents=[];for(var i=0;i<e.length;){var s=e[i],a=(++i,s.relX),l=s.relY;switch(s.kind._hx_index){case 0:case 1:this.mouseX=s.relX,this.mouseY=s.relY,this.lastTouch=s.touchId;break;case 2:t=!0,this.mouseX=s.relX,this.mouseY=s.relY,this.lastTouch=s.touchId;break;case 3:this.isOut=!1,this.selectCursor();continue;case 4:if(this.isOut=!0,0<this.overList.length){for(var r=this.overList.length-1;0<=r;)this.onOut.cancel=!1,this.overList[r].handleEvent(this.onOut),Jn.remove(this.overList,this.overList[r]),--r;this.selectCursor()}continue;case 5:case 8:case 9:case 11:n||(n=!0,this.checkFocus())}if(null!=this.currentDrag&&(null==this.currentDrag.ref||this.currentDrag.ref==s.touchId)){if(s.propagate=!0,s.cancel=!1,this.currentDrag.f(s),s.relX=a,s.relY=l,!s.propagate)continue;s.propagate=!1}this.emitEvent(s)}}n||this.checkFocus(),t||this.isOut||null!=this.currentDrag||(this.checkPos.relX=this.mouseX,this.checkPos.relY=this.mouseY,this.checkPos.touchId=this.lastTouch,this.checkPos.cancel=!1,this.checkPos.propagate=!1,this.emitEvent(this.checkPos))},updateCursor:function(e){-1!=this.overList.indexOf(e)&&this.selectCursor()},selectCursor:function(){for(var e=this.defaultCursor,t=0,n=this.overList;t<n.length;){var i=n[t];if(++t,null!=i.cursor){e=i.cursor;break}}6==e._hx_index?e.f():u0.setCursor(e)},onEvent:function(e){!this.enablePhysicalMouse&&e.kind==Xx.EMove||this.pendingEvents.push(e)},dispatchListeners:function(e){for(var t=e.relX,n=e.relY,i=(e.propagate=!0,0),s=this.scenes;i<s.length;){var a=s[i++];if(e.cancel=!1,a.dispatchListeners(e),e.relX=t,e.relY=n,!e.propagate)break}},__class__:i0},fe["hxd.Platform"]={__ename__:!0,__constructs__:null,IOS:{_hx_name:"IOS",_hx_index:0,__enum__:"hxd.Platform",toString:o},Android:{_hx_name:"Android",_hx_index:1,__enum__:"hxd.Platform",toString:o},WebGL:{_hx_name:"WebGL",_hx_index:2,__enum__:"hxd.Platform",toString:o},PC:{_hx_name:"PC",_hx_index:3,__enum__:"hxd.Platform",toString:o},Console:{_hx_name:"Console",_hx_index:4,__enum__:"hxd.Platform",toString:o},FlashPlayer:{_hx_name:"FlashPlayer",_hx_index:5,__enum__:"hxd.Platform",toString:o}}),a0=(s0.__constructs__=[s0.IOS,s0.Android,s0.WebGL,s0.PC,s0.Console,s0.FlashPlayer],s0.__empty_constructs__=[s0.IOS,s0.Android,s0.WebGL,s0.PC,s0.Console,s0.FlashPlayer],fe["hxd.SystemValue"]={__ename__:!0,__constructs__:null,IsTouch:{_hx_name:"IsTouch",_hx_index:0,__enum__:"hxd.SystemValue",toString:o},IsWindowed:{_hx_name:"IsWindowed",_hx_index:1,__enum__:"hxd.SystemValue",toString:o},IsMobile:{_hx_name:"IsMobile",_hx_index:2,__enum__:"hxd.SystemValue",toString:o}}),l0=(a0.__constructs__=[a0.IsTouch,a0.IsWindowed,a0.IsMobile],a0.__empty_constructs__=[a0.IsTouch,a0.IsWindowed,a0.IsMobile],function(){}),r0=((i["hxd.Timer"]=l0).__name__="hxd.Timer",l0.update=function(){l0.frameCount++;var e=Jn.now()/1e3;l0.elapsedTime=e-l0.lastTimeStamp,l0.lastTimeStamp=e,l0.elapsedTime<l0.maxDeltaTime?(e=l0.elapsedTime,l0.currentDT=e+l0.smoothFactor*(l0.currentDT-e)):l0.elapsedTime=1/l0.wantedFPS,l0.dt=l0.currentDT},l0.skip=function(){l0.lastTimeStamp=Jn.now()/1e3},function(e,t){this.canLockMouse=!0,this.discardMouseUp=-1,this.discardMouseCaptureEvent=!0,this.maxPixelRatio=window.devicePixelRatio,this.useScreenPixels=o0.get_supported(),this.curMouseY=0,this.curMouseX=0,this.mouseMode=k0.Absolute;var n=this,i=null!=e;if(this.eventTargets=new zA,this.resizeEvents=new zA,this.dropTargets=new zA,o0.get_supported()){if(null==e){if(null==(e=window.document.getElementById("webgl")))throw tl.thrown("Missing canvas #webgl");"1"==e.getAttribute("globalEvents")&&(t=!0)}this.canvas=e,this.propagateKeyEvents=t;var s=e.getAttribute("propagateKeyEvents"),a=(null!=s&&(this.propagateKeyEvents="0"!=s&&"false"!=s),this.focused=t,this.element=t?window:e,this.canvasPos=e.getBoundingClientRect(),(i?e:window).addEventListener("mousemove",Cn(this,this.onMouseMove)),this.element.addEventListener("mousedown",Cn(this,this.onMouseDown)),this.element.addEventListener("mouseup",Cn(this,this.onMouseUp)),this.element.addEventListener("mouseleave",Cn(this,this.onMouseLeave)),this.element.addEventListener("wheel",Cn(this,this.onMouseWheel)),this.element.addEventListener("touchstart",Cn(this,this.onTouchStart)),this.element.addEventListener("touchmove",Cn(this,this.onTouchMove)),this.element.addEventListener("touchend",Cn(this,this.onTouchEnd)),this.element.addEventListener("keydown",Cn(this,this.onKeyDown)),this.element.addEventListener("keyup",Cn(this,this.onKeyUp)),this.element.addEventListener("keypress",Cn(this,this.onKeyPress)),this),l=!1,r=(this.element.addEventListener("blur",function(){a.onFocus(l)}),this),o=!0;this.element.addEventListener("focus",function(){r.onFocus(o)}),null!=window.ResizeObserver&&(this.observer=new ResizeObserver(function(e){n.checkResize()}),this.observer.observe(e)),window.addEventListener("resize",Cn(this,this.checkResize)),window.document.addEventListener("pointerlockchange",Cn(this,this.onPointerLockChange)),e.addEventListener("contextmenu",function(e){return e.stopPropagation(),2==e.button&&e.preventDefault(),!1}),t?(e.addEventListener("mousedown",function(e){n.onMouseDown(e),e.stopPropagation(),e.preventDefault()}),this.element.addEventListener("contextmenu",function(e){return e.stopPropagation(),e.preventDefault(),!1})):(null==e.getAttribute("tabindex")&&e.setAttribute("tabindex","1"),e.style.outline="none"),this.curW=this.get_width(),this.curH=this.get_height()}else this.canvasPos={width:0,top:0,left:0,height:0}}),o0=((i["hxd.Window"]=r0).__name__="hxd.Window",r0.getInstance=function(){return null==r0.inst&&(r0.inst=new r0),r0.inst},r0.prototype={checkResize:function(){this.canvasPos=this.canvas.getBoundingClientRect();var e=this.get_width(),t=this.get_height();this.curW==e&&this.curH==t||(this.curW=e,this.curH=t,this.onResize(null))},onMouseModeChange:function(e,t){return null},event:function(e){for(var t=this.eventTargets.h;null!=t;){var n=t.item,t=t.next;n(e)}},addEventTarget:function(e){this.eventTargets.add(e)},removeEventTarget:function(e){for(var t=this.eventTargets.h;null!=t;){var n=t.item,t=t.next;if(n==e){this.eventTargets.remove(n);break}}},addResizeEvent:function(e){this.resizeEvents.push(e)},removeResizeEvent:function(e){for(var t=this.resizeEvents.h;null!=t;){var n=t.item,t=t.next;if(n==e){this.resizeEvents.remove(e);break}}},onResize:function(e){for(var t=this.resizeEvents.h;null!=t;){var n=t.item,t=t.next;n()}},setCurrent:function(){r0.inst=this},getPixelRatio:function(){var e,t;return this.useScreenPixels?(e=window.devicePixelRatio,(t=this.maxPixelRatio)<e?t:e):1},get_width:function(){return Math.round(this.canvasPos.width*this.getPixelRatio())},get_height:function(){return Math.round(this.canvasPos.height*this.getPixelRatio())},get_mouseX:function(){return Math.round((this.curMouseX-this.canvasPos.left)*this.getPixelRatio())},get_mouseY:function(){return Math.round((this.curMouseY-this.canvasPos.top)*this.getPixelRatio())},set_mouseMode:function(e){var t;return U.enumEq(e,this.mouseMode)?e:(null!=(t=this.onMouseModeChange(this.mouseMode,e))&&(e=t),t=this.pointerLockTarget=null!=this.canvas?this.canvas:window.document.documentElement,e==k0.Absolute?t.ownerDocument.pointerLockElement==t&&t.ownerDocument.exitPointerLock():this.canLockMouse&&t.ownerDocument.pointerLockElement!=t&&t.requestPointerLock(),this.mouseMode=e)},onPointerLockChange:function(e){this.mouseMode!=k0.Absolute&&this.pointerLockTarget.ownerDocument.pointerLockElement!=this.pointerLockTarget&&(this.canLockMouse=!1,this.set_mouseMode(k0.Absolute),this.canLockMouse=!0)},onMouseDown:function(e){if(this.mouseMode==k0.Absolute)e.clientX==this.curMouseX&&e.clientY==this.curMouseY||this.onMouseMove(e);else{if(this.pointerLockTarget.ownerDocument.pointerLockElement!=this.pointerLockTarget&&(this.pointerLockTarget.requestPointerLock(),this.discardMouseCaptureEvent))return void(this.discardMouseUp=e.button);0==e.movementX&&0==e.movementY||this.onMouseMove(e)}var t,n=new Gp(Xx.EPush,this.get_mouseX(),this.get_mouseY()),i=e.button;switch(i){case 1:t=2;break;case 2:t=1;break;default:t=i}n.button=t,this.event(n)},onMouseUp:function(e){if(this.discardMouseUp==e.button)this.discardMouseUp=-1;else{(this.mouseMode==k0.Absolute?e.clientX!=this.curMouseX||e.clientY!=this.curMouseY:0!=e.movementX||0!=e.movementY)&&this.onMouseMove(e);var t,n=new Gp(Xx.ERelease,this.get_mouseX(),this.get_mouseY()),i=e.button;switch(i){case 1:t=2;break;case 2:t=1;break;default:t=i}n.button=t,this.event(n)}},onMouseLeave:function(e){var t,n=new Gp(Xx.EReleaseOutside,this.get_mouseX(),this.get_mouseY()),i=e.button;switch(i){case 1:t=2;break;case 2:t=1;break;default:t=i}n.button=t,this.event(n)},onMouseMove:function(e){var t,n=this.mouseMode;switch(n._hx_index){case 0:this.curMouseX=e.clientX,this.curMouseY=e.clientY,this.event(new Gp(Xx.EMove,this.get_mouseX(),this.get_mouseY()));break;case 1:this.pointerLockTarget.ownerDocument.pointerLockElement==this.pointerLockTarget&&(t=new Gp(Xx.EMove,e.movementX,e.movementY),n.callback(t),!t.cancel&&t.propagate)&&(t.cancel=!1,t.propagate=!1,t.relX=this.curMouseX,t.relY=this.curMouseY,this.event(t));break;case 2:this.pointerLockTarget.ownerDocument.pointerLockElement==this.pointerLockTarget&&(this.curMouseX+=e.movementX,this.curMouseY+=e.movementY,this.event(new Gp(Xx.EMove,this.get_mouseX(),this.get_mouseY())))}},onMouseWheel:function(e){e.preventDefault();var t=new Gp(Xx.EWheel,this.get_mouseX(),this.get_mouseY());t.wheelDelta=e.deltaY/120,this.event(t)},onTouchStart:function(e){e.preventDefault();for(var t,n,i=0,s=e.changedTouches;i<s.length;){var a=s[i];++i,n=Math.round((a.clientX-this.canvasPos.left)*this.getPixelRatio()),t=Math.round((a.clientY-this.canvasPos.top)*this.getPixelRatio()),(n=new Gp(Xx.EPush,n,t)).touchId=a.identifier,this.event(n)}},onTouchMove:function(e){e.preventDefault();for(var t,n,i=0,s=e.changedTouches;i<s.length;){var a=s[i];++i,n=Math.round((a.clientX-this.canvasPos.left)*this.getPixelRatio()),t=Math.round((a.clientY-this.canvasPos.top)*this.getPixelRatio()),(n=new Gp(Xx.EMove,n,t)).touchId=a.identifier,this.event(n)}},onTouchEnd:function(e){e.preventDefault();for(var t,n,i=0,s=e.changedTouches;i<s.length;){var a=s[i];++i,n=Math.round((a.clientX-this.canvasPos.left)*this.getPixelRatio()),t=Math.round((a.clientY-this.canvasPos.top)*this.getPixelRatio()),(n=new Gp(Xx.ERelease,n,t)).touchId=a.identifier,this.event(n)}},onKeyUp:function(e){var t=new Gp(Xx.EKeyUp,this.get_mouseX(),this.get_mouseY());t.keyCode=e.keyCode,this.event(t),this.propagateKeyEvents||(e.preventDefault(),e.stopPropagation())},onKeyDown:function(e){var t=new Gp(Xx.EKeyDown,this.get_mouseX(),this.get_mouseY());if(t.keyCode=e.keyCode,this.event(t),!this.propagateKeyEvents){switch(t.keyCode){case 8:case 9:case 16:case 17:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:e.preventDefault()}e.stopPropagation()}},onKeyPress:function(e){var t=new Gp(Xx.ETextInput,this.get_mouseX(),this.get_mouseY());t.charCode=e.charCode,this.event(t),this.propagateKeyEvents||(e.preventDefault(),e.stopPropagation())},onFocus:function(e){this.event(new Gp(e?Xx.EFocus:Xx.EFocusLost)),this.focused=e},set_displayMode:function(e){if(o0.get_supported()){var t=window.document,n=t.documentElement;if(t.fullscreenElement==n==(e!=h0.Windowed))return h0.Windowed;e!=h0.Windowed?n.requestFullscreen():t.exitFullscreen()}return e},__class__:r0,__properties__:{set_displayMode:"set_displayMode",set_mouseMode:"set_mouseMode",get_mouseY:"get_mouseY",get_mouseX:"get_mouseX",get_height:"get_height",get_width:"get_width"}},function(){}),u0=((i["js.Browser"]=o0).__name__="js.Browser",o0.__properties__={get_supported:"get_supported"},o0.get_supported=function(){return"undefined"!=typeof window&&void 0!==window.location&&"string"==typeof window.location.protocol},o0.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw tl.thrown("Unable to create XMLHttpRequest object.")},function(){}),h0=((i["hxd.System"]=u0).__name__="hxd.System",u0.__properties__={get_platform:"get_platform"},u0.loopFunc=null,u0.currentNativeCursor=null,u0.currentCustomCursor=null,u0.setLoop=function(e){u0.loopInit||(u0.loopInit=!0,u0.browserLoop()),u0.loopFunc=e},u0.browserLoop=function(){if(!o0.get_supported())throw tl.thrown("Cannot use browserLoop without Browser support nor defining nodejs + hxnodejs");var e=window,t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame;0<u0.fpsLimit?window.setTimeout(function(){return t(u0.browserLoop)},1e3/u0.fpsLimit):t(u0.browserLoop),null!=u0.loopFunc&&u0.loopFunc()},u0.start=function(e){e()},u0.setNativeCursor=function(e){if(null==u0.currentNativeCursor||!U.enumEq(e,u0.currentNativeCursor)){u0.currentNativeCursor=e,u0.currentCustomCursor=null;var t,n=r0.getInstance().canvas;if(null!=n){switch(e._hx_index){case 0:t="default";break;case 1:t="pointer";break;case 2:t="move";break;case 3:t="text";break;case 4:t="none";break;case 5:var i=e.custom;if(null==i.alloc){i.alloc=[];for(var s=0,a=i.frames;s<a.length;)i.alloc.push('url("'+a[s++].ctx.canvas.toDataURL("image/png")+'") '+i.offsetX+" "+i.offsetY+", default")}1<i.frames.length&&(u0.currentCustomCursor=i).reset(),t=i.alloc[i.frameIndex];break;case 6:throw tl.thrown("assert")}n.style.cursor=t}}},u0.getDefaultFrameRate=function(){return 60},u0.getValue=function(e){switch(e._hx_index){case 0:return u0.get_platform()==s0.Android||u0.get_platform()==s0.IOS;case 1:return!0;case 2:return u0.get_platform()==s0.Android||u0.get_platform()==s0.IOS}},u0.updateCursor=function(){var e,t;null!=u0.currentCustomCursor&&-1!=(e=u0.currentCustomCursor.update(l0.elapsedTime))&&null!=(t=r0.getInstance().canvas)&&(t.style.cursor=u0.currentCustomCursor.alloc[e])},u0.get_platform=function(){var e=p.navigator.userAgent.toLowerCase();return 0<=e.indexOf("android")?s0.Android:0<=e.indexOf("ipad")||0<=e.indexOf("iphone")||0<=e.indexOf("ipod")?s0.IOS:s0.PC},fe["hxd.DisplayMode"]={__ename__:!0,__constructs__:null,Windowed:{_hx_name:"Windowed",_hx_index:0,__enum__:"hxd.DisplayMode",toString:o},Borderless:{_hx_name:"Borderless",_hx_index:1,__enum__:"hxd.DisplayMode",toString:o},Fullscreen:{_hx_name:"Fullscreen",_hx_index:2,__enum__:"hxd.DisplayMode",toString:o},FullscreenResize:{_hx_name:"FullscreenResize",_hx_index:3,__enum__:"hxd.DisplayMode",toString:o}}),c0=(h0.__constructs__=[h0.Windowed,h0.Borderless,h0.Fullscreen,h0.FullscreenResize],h0.__empty_constructs__=[h0.Windowed,h0.Borderless,h0.Fullscreen,h0.FullscreenResize],(i["hxd.earcut.EarNode"]=Up).__name__="hxd.earcut.EarNode",Up.prototype={__class__:Up},function(){}),_0=((i["hxd.earcut.Earcut"]=c0).__name__="hxd.earcut.Earcut",c0.prototype={triangulate_anon_y_Float_x_Float:function(e,t){var n=null!=t&&0<t.length?t[0]:e.length;return n<3?[]:(n=this.setLinkedList_triangulate_T(e,0,n,!0),null!=t&&(n=this.eliminateHoles_triangulate_T(e,t,n)),this.triangulateNode(n,80<e.length))},triangulate_h2d_GPoint:function(e,t){var n=null!=t&&0<t.length?t[0]:e.length;return n<3?[]:(n=this.setLinkedList_triangulate_T(e,0,n,!0),null!=t&&(n=this.eliminateHoles_triangulate_T(e,t,n)),this.triangulateNode(n,80<e.length))},eliminateHoles_triangulate_T:function(e,t,n){for(var i=[],s=0,a=t.length;s<a;){var l=s++,l=this.setLinkedList_eliminateHoles_T(e,t[l],l==t.length-1?e.length:t[1+l],!1);l==l.next&&(l.steiner=!0),i.push(this.getLeftmost(l))}i.sort(Cn(this,this.compareX));for(s=0;s<i.length;)this.eliminateHole(i[s++],n),n=this.filterPoints(n,n.next);return n},setLinkedList_eliminateHoles_T:function(e,t,n,i){for(var s=0,a=n-1,l=t;l<n;){var r=l++;s+=(e[a].x-e[r].x)*(e[r].y+e[a].y),a=r}null==(c=this.cache)?((c=new Up).allocNext=this.allocated,this.allocated=c):this.cache=c.next,c.i=-1,c.z=-1,c.x=0,c.y=0,c.next=null,c.prev=null,c.steiner=!1,c.prevZ=null,c.nextZ=null;var o=c,u=o;if(i==0<s)for(l=t;l<n;){var h=e[r=l++];null==(c=this.cache)?((c=new Up).allocNext=this.allocated,this.allocated=c):this.cache=c.next,c.i=r,c.z=-1,c.x=h.x,c.y=h.y,c.next=null,c.prev=o,c.steiner=!1,c.prevZ=null,(c.nextZ=null)!=o&&(o.next=c),o=c}else for(r=n-1;t<=r;){var c,h=e[r];null==(c=this.cache)?((c=new Up).allocNext=this.allocated,this.allocated=c):this.cache=c.next,c.i=r,c.z=-1,c.x=h.x,c.y=h.y,c.next=null,c.prev=o,c.steiner=!1,c.prevZ=null,(c.nextZ=null)!=o&&(o.next=c),o=c,--r}return o.next=u.next,o.next.prev=o},setLinkedList_triangulate_T:function(e,t,n,i){for(var s=0,a=n-1,l=t;l<n;){var r=l++;s+=(e[a].x-e[r].x)*(e[r].y+e[a].y),a=r}null==(c=this.cache)?((c=new Up).allocNext=this.allocated,this.allocated=c):this.cache=c.next,c.i=-1,c.z=-1,c.x=0,c.y=0,c.next=null,c.prev=null,c.steiner=!1,c.prevZ=null,c.nextZ=null;var o=c,u=o;if(i==0<s)for(l=t;l<n;){var h=e[r=l++];null==(c=this.cache)?((c=new Up).allocNext=this.allocated,this.allocated=c):this.cache=c.next,c.i=r,c.z=-1,c.x=h.x,c.y=h.y,c.next=null,c.prev=o,c.steiner=!1,c.prevZ=null,(c.nextZ=null)!=o&&(o.next=c),o=c}else for(r=n-1;t<=r;){var c,h=e[r];null==(c=this.cache)?((c=new Up).allocNext=this.allocated,this.allocated=c):this.cache=c.next,c.i=r,c.z=-1,c.x=h.x,c.y=h.y,c.next=null,c.prev=o,c.steiner=!1,c.prevZ=null,(c.nextZ=null)!=o&&(o.next=c),o=c,--r}return o.next=u.next,o.next.prev=o},triangulateNode:function(e,t){if(this.triangles=[],e=this.filterPoints(e),t&&null!=e){for(var n=e.x,i=(this.minX=n,e.y),s=(this.minY=i,e.next);s!=e;){var a=s.x,l=s.y;a<this.minX&&(this.minX=a),l<this.minY&&(this.minY=l),n<a&&(n=a),i<l&&(i=l),s=s.next}var t=n-this.minX,r=i-this.minY;this.size=t<r?r:t,this.hasSize=!0}else this.hasSize=!1;this.earcutLinked(e);var r=this.triangles,o=(this.triangles=null,this.allocated);if(null!=this.cache){for(;o!=this.cache;)o=o.allocNext;o=o.allocNext}for(;null!=o;)o.next=this.cache,o=(this.cache=o).allocNext;return r},eliminateHole:function(e,t){null!=(t=this.findHoleBridge(e,t))&&(t=this.splitPolygon(t,e),this.filterPoints(t,t.next))},findHoleBridge:function(e,t){var n,i=t,s=e.x,a=e.y,l=-1/0,r=null;do{}while(a<=i.y&&a>=i.next.y&&(n=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y))<=s&&l<n&&(l=n,r=i.x<i.next.x?i:i.next),(i=i.next)!=t);if(null==r)return null;for(var o,u,h,c,_,d,p=r,m=1/0,i=r.next;i!=p;)s>=i.x&&i.x>=r.x&&(c=a<r.y?s:l,d=r.x,u=r.y,0<=((_=a<r.y?l:s)-(o=i.x))*(a-(h=i.y))-(c-o)*(a-h))&&0<=(c-o)*(u-h)-(d-o)*(a-h)&&0<=(d-o)*(a-h)-(_-o)*(u-h)&&(((d=((c=a-i.y)<0?-c:c)/(s-i.x))<m||d==m&&i.x>r.x)&&(_=i.prev,o=i.next,(i.y-_.y)*(o.x-i.x)-(i.x-_.x)*(o.y-i.y)<0?(u=i.next,0<=(e.y-i.y)*(u.x-e.x)-(e.x-i.x)*(u.y-e.y)&&0<=((h=i.prev).y-i.y)*(e.x-h.x)-(h.x-i.x)*(e.y-h.y)):(c=i.prev,(e.y-i.y)*(c.x-e.x)-(e.x-i.x)*(c.y-e.y)<0||((_=i.next).y-i.y)*(e.x-_.x)-(_.x-i.x)*(e.y-_.y)<0)))&&(r=i,m=d),i=i.next;return r},getLeftmost:function(e){for(var t=e,n=e;t.x<n.x&&(n=t),(t=t.next)!=e;);return n},compareX:function(e,t){return 0<e.x-t.x?1:-1},filterPoints:function(e,t){if(null==e)return e;null==t&&(t=e);var n=e;do{var i,s,a=!1;if(!n.steiner&&(i=n.next,n.x==i.x&&n.y==i.y||(i=n.prev,s=n.next,(n.y-i.y)*(s.x-n.x)-(n.x-i.x)*(s.y-n.y)==0))){if(n.next.prev=n.prev,n.prev.next=n.next,null!=n.prevZ&&(n.prevZ.nextZ=n.nextZ),null!=n.nextZ&&(n.nextZ.prevZ=n.prevZ),(n=t=n.prev)==n.next)return null;a=!0}else n=n.next}while(a||n!=t);return t},earcutLinked:function(e,t){if(null==t&&(t=0),null!=e){0==t&&this.hasSize&&this.indexCurve(e);for(var n,i,s=e;e.prev!=e.next;)if(n=e.prev,i=e.next,this.hasSize?this.isEarHashed(e):this.isEar(e))this.triangles.push(n.i),this.triangles.push(e.i),this.triangles.push(i.i),e.next.prev=e.prev,e.prev.next=e.next,null!=e.prevZ&&(e.prevZ.nextZ=e.nextZ),null!=e.nextZ&&(e.nextZ.prevZ=e.prevZ),e=i.next,s=i.next;else if((e=i)==s){switch(t){case 0:this.earcutLinked(this.filterPoints(i),1);break;case 1:e=this.cureLocalIntersections(i),this.earcutLinked(e,2);break;case 2:this.splitEarcut(i)}break}}},isEar:function(e){var t=e.prev,n=e.next;if(0<=(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))return!1;for(var i=e.next.next;i!=e.prev;){var s=t.x,a=t.y,l=e.x,r=e.y,o=n.x,u=n.y,h=i.x,c=i.y;if(0<=(o-h)*(a-c)-(s-h)*(u-c)&&0<=(s-h)*(r-c)-(l-h)*(a-c)&&0<=(l-h)*(u-c)-(o-h)*(r-c)&&(s=i.prev,a=i.next,0<=(i.y-s.y)*(a.x-i.x)-(i.x-s.x)*(a.y-i.y)))return!1;i=i.next}return!0},isEarHashed:function(e){var t=e.prev,n=e.next;if(0<=(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))return!1;for(var i,s,a,l,r,o,u,h,c,_,d=32767*((t.x<e.x?t.x<n.x?t:n:e.x<n.x?e:n).x-this.minX)/this.size|0,p=32767*((t.y<e.y?t.y<n.y?t:n:e.y<n.y?e:n).y-this.minY)/this.size|0,m=1431655765&((d=858993459&((d=252645135&((d=16711935&(d|d<<8))|d<<4))|d<<2))|d<<1)|(1431655765&((p=858993459&((p=252645135&((p=16711935&(p|p<<8))|p<<4))|p<<2))|p<<1))<<1,g=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*((e.x<t.x?t.x>n.x?t:n:e.x>n.x?e:n).x-this.minX)/this.size|0)|d<<8))|d<<4))|d<<2))|d<<1)|(1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*((e.y<t.y?t.y>n.y?t:n:e.y>n.y?e:n).y-this.minY)/this.size|0)|p<<8))|p<<4))|p<<2))|p<<1))<<1,f=e.nextZ;null!=f&&f.z<=g;){if(!!(f!=e.prev&&f!=e.next&&(i=t.x,s=t.y,a=e.x,l=e.y,r=n.x,o=n.y,0<=(r-(u=f.x))*(s-(h=f.y))-(i-u)*(o-h))&&0<=(i-u)*(l-h)-(a-u)*(s-h)&&0<=(a-u)*(o-h)-(r-u)*(l-h))&&(c=f.prev,_=f.next,0<=(f.y-c.y)*(_.x-f.x)-(f.x-c.x)*(_.y-f.y)))return!1;f=f.nextZ}for(f=e.prevZ;null!=f&&f.z>=m;){if(!!(f!=e.prev&&f!=e.next&&(i=t.x,s=t.y,a=e.x,l=e.y,r=n.x,o=n.y,0<=(r-(u=f.x))*(s-(h=f.y))-(i-u)*(o-h))&&0<=(i-u)*(l-h)-(a-u)*(s-h)&&0<=(a-u)*(o-h)-(r-u)*(l-h))&&(c=f.prev,_=f.next,0<=(f.y-c.y)*(_.x-f.x)-(f.x-c.x)*(_.y-f.y)))return!1;f=f.prevZ}return!0},cureLocalIntersections:function(e){var t=e;do{var n,i=t.prev,s=t.next.next,a=t.next}while(!!(0<(t.y-i.y)*(a.x-t.x)-(t.x-i.x)*(a.y-t.y)!=0<(t.y-i.y)*(s.x-t.x)-(t.x-i.x)*(s.y-t.y)&&0<(s.y-a.y)*(i.x-s.x)-(s.x-a.x)*(i.y-s.y)!=0<(s.y-a.y)*(t.x-s.x)-(s.x-a.x)*(t.y-s.y)&&(a=i.prev,n=i.next,(i.y-a.y)*(n.x-i.x)-(i.x-a.x)*(n.y-i.y)<0?(a=i.next,0<=(s.y-i.y)*(a.x-s.x)-(s.x-i.x)*(a.y-s.y)&&0<=((n=i.prev).y-i.y)*(s.x-n.x)-(n.x-i.x)*(s.y-n.y)):(a=i.prev,(s.y-i.y)*(a.x-s.x)-(s.x-i.x)*(a.y-s.y)<0||((n=i.next).y-i.y)*(s.x-n.x)-(n.x-i.x)*(s.y-n.y)<0)))&&(a=s.prev,n=s.next,(s.y-a.y)*(n.x-s.x)-(s.x-a.x)*(n.y-s.y)<0?(a=s.next,0<=(i.y-s.y)*(a.x-i.x)-(i.x-s.x)*(a.y-i.y)&&0<=((a=s.prev).y-s.y)*(i.x-a.x)-(a.x-s.x)*(i.y-a.y)):(a=s.prev,(i.y-s.y)*(a.x-i.x)-(i.x-s.x)*(a.y-i.y)<0||((a=s.next).y-s.y)*(i.x-a.x)-(a.x-s.x)*(i.y-a.y)<0))&&(this.triangles.push(i.i),this.triangles.push(t.i),this.triangles.push(s.i),t.next.prev=t.prev,t.prev.next=t.next,null!=t.prevZ&&(t.prevZ.nextZ=t.nextZ),null!=t.nextZ&&(t.nextZ.prevZ=t.prevZ),(a=t.next).next.prev=a.prev,a.prev.next=a.next,null!=a.prevZ&&(a.prevZ.nextZ=a.nextZ),null!=a.nextZ&&(a.nextZ.prevZ=a.prevZ),t=e=s),(t=t.next)!=e);return t},splitEarcut:function(e){var t=e;do{for(var n,i=t.next.next;i!=t.prev;){if(t.i!=i.i&&this.isValidDiagonal(t,i))return n=this.splitPolygon(t,i),t=this.filterPoints(t,t.next),n=this.filterPoints(n,n.next),this.earcutLinked(t),void this.earcutLinked(n);i=i.next}}while((t=t.next)!=e)},splitPolygon:function(e,t){var n=this.cache,i=(null==n?((n=new Up).allocNext=this.allocated,this.allocated=n):this.cache=n.next,n.i=e.i,n.z=-1,n.x=e.x,n.y=e.y,n.next=null,n.prev=null,n.steiner=!1,n.prevZ=null,n.nextZ=null,n),s=(null==(n=this.cache)?((n=new Up).allocNext=this.allocated,this.allocated=n):this.cache=n.next,n.i=t.i,n.z=-1,n.x=t.x,n.y=t.y,n.next=null,n.prev=null,n.steiner=!1,n.prevZ=null,n.nextZ=null,e.next),a=t.prev;return(e.next=t).prev=e,(i.next=s).prev=i,n.next=i,(a.next=i.prev=n).prev=a,n},isValidDiagonal:function(e,t){var n,i,s;return e.x==t.x&&e.y==t.y||!!(!!(e.next.i!=t.i&&e.prev.i!=t.i&&!this.intersectsPolygon(e,t)&&(n=e.prev,(e.y-n.y)*((i=e.next).x-e.x)-(e.x-n.x)*(i.y-e.y)<0?(i=e.next,0<=(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)&&0<=((s=e.prev).y-e.y)*(t.x-s.x)-(s.x-e.x)*(t.y-s.y)):(i=e.prev,(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)<0||((s=e.next).y-e.y)*(t.x-s.x)-(s.x-e.x)*(t.y-s.y)<0)))&&(n=t.prev,(t.y-n.y)*((i=t.next).x-t.x)-(t.x-n.x)*(i.y-t.y)<0?(i=t.next,0<=(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)&&0<=((s=t.prev).y-t.y)*(e.x-s.x)-(s.x-t.x)*(e.y-s.y)):(i=t.prev,(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)<0||((s=t.next).y-t.y)*(e.x-s.x)-(s.x-t.x)*(e.y-s.y)<0)))&&this.middleInside(e,t)},middleInside:function(e,t){for(var n=e,i=!1,s=(e.x+t.x)/2,a=(e.y+t.y)/2;n.y>a!=n.next.y>a&&s<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),(n=n.next)!=e;);return i},intersectsPolygon:function(e,t){var n,i=e;do{if(i.i!=e.i&&i.next.i!=e.i&&i.i!=t.i&&i.next.i!=t.i&&0<((n=i.next).y-i.y)*(e.x-n.x)-(n.x-i.x)*(e.y-n.y)!=0<(n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y)&&0<(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)!=0<(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))return!0}while((i=i.next)!=e);return!1},indexCurve:function(e){var t,n,i=e;do{}while(i.z<0&&(n=32767*(i.x-this.minX)/this.size|0,t=32767*(i.y-this.minY)/this.size|0,i.z=(n=1431655765&((n=858993459&((n=252645135&((n=16711935&(n|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&(t|t<<8))|t<<4))|t<<2))|t<<1))<<1),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!=e);i.prevZ.nextZ=null,i.prevZ=null,this.sortLinked(i)},sortLinked:function(e){var t,n,i,s,a,l=1;do{for(t=e,i=e=null,s=0;null!=t;){++s;for(var r=t,o=0,u=0,h=l;u<h&&(++u,++o,null!=(r=r.nextZ)););for(a=l;0<o||0<a&&null!=r;)0!=o&&(0==a||null==r||t.z<=r.z)?(t=(n=t).nextZ,--o):(r=(n=r).nextZ,--a),null!=i?i.nextZ=n:e=n,n.prevZ=i,i=n;t=r}}while(i.nextZ=null,l*=2,1<s);return e},__class__:c0},(i["hxd.fmt.bfnt.FontParser"]=Lp).__name__="hxd.fmt.bfnt.FontParser",Lp.parse=function(e,t,n){var i=null,s=new Vt(null,0),a=s.glyphs;if("{"==e.getString(s.baseLine=0,1)){s.tilePath=new KA(t).file+".png";for(var i=n(KA.withExtension(t,"png")),l=new Vt(null,0),z=l.glyphs,r=(l.tile=i,JSON.parse(e.getString(0,e.length))),o=(l.size=r.atlas.size,l.initSize=l.size,l.distanceRange=r.atlas.distanceRange,l.fieldType=r.atlas.type,l.lineHeight=r.metrics.lineHeight*l.size,0),u=r.glyphs;o<u.length;){var h,c=u[o],_=(++o,r.atlas.size*c.advance);null!=c.atlasBounds&&null!=c.planeBounds?(h=i.sub(c.atlasBounds.left,r.atlas.height-c.atlasBounds.top,c.atlasBounds.right-c.atlasBounds.left,c.atlasBounds.top-c.atlasBounds.bottom,c.planeBounds.left*r.atlas.size,-(c.planeBounds.top*r.atlas.size)+r.atlas.size),z.h[c.unicode]=new Qt(h,_)):(h=i.sub(0,0,1,1,0,0),z.h[c.unicode]=new Qt(h,_))}for(var o=0,u=r.kerning;o<u.length;){var Q=u[o],V=(++o,Q.unicode1),d=Q.unicode2,Q=Q.advance*r.atlas.size|0,d=A=null==(A=l.glyphs.h[d])&&null==(A=l.charset.resolveChar(d,l.glyphs))?13==d||10==d?l.nullChar:l.defaultChar:A;null==d&&l.hasChar(V)||d.addKerning(V,Q)}return l}switch(o=e.getInt32(0)){case 54938946:var p=new HA(e);for(p.set_position(p.pos+4);p.pos<p.totlen;){var O=p.readByte(),W=p.readInt32(),N=p.pos;switch(O){case 1:s.size=s.initSize=p.readInt16(),p.set_position(p.pos+12),s.name=p.readUntil(0);break;case 2:s.lineHeight=p.readUInt16(),s.baseLine=p.readUInt16(),p.set_position(p.pos+4),p.readUInt16();break;case 3:var G=p.readUntil(0);try{s.tilePath=G,i=n(KA.join([KA.directory(t),G]))}catch(u){CA.lastError=u,s.tilePath=new KA(t).file+".png",i=n(KA.withExtension(t,"png"))}break;case 4:for(var U=W/20|0;0<U;){var L=p.readInt32(),m=new Qt(i.sub(p.readUInt16(),p.readUInt16(),p.readUInt16(),p.readUInt16(),p.readInt16(),p.readInt16()),p.readInt16());a.h[L]=m,p.set_position(p.pos+2),--U}break;case 5:for(var j=W/10|0;0<j;){var H=p.readInt32(),Y=p.readInt32();null!=(de=a.h[Y])?de.addKerning(H,p.readInt16()):p.set_position(p.pos+2),--j}}p.set_position(N+W)}break;case 1414415938:return new _0(new HA(e)).read(function(e){try{s.tilePath=e,i=n(KA.join([KA.directory(t),e]))}catch(e){CA.lastError=e,s.tilePath=new KA(t).file+".png",i=n(KA.withExtension(t,"png"))}return i});case 1836597052:case 1852794428:if((S=we.parse(e.toString()).firstElement()).nodeType!=we.Document&&S.nodeType!=we.Element)throw tl.thrown("Invalid nodeType "+(null==S.nodeType?"null":ye.toString(S.nodeType)));var g=S;if(dx.resolve(g,"info")){for(var f=cx.resolve(g,"info"),f=(s.name=_x.resolve(f,"face"),_x.resolve(cx.resolve(g,"info"),"size")),f=(s.size=s.initSize=el.parseInt(f),_x.resolve(cx.resolve(g,"common"),"lineHeight")),f=(s.lineHeight=el.parseInt(f),_x.resolve(cx.resolve(g,"common"),"base")),Z=(s.baseLine=el.parseInt(f),dx.resolve(g,"distanceField")&&(f=_x.resolve(cx.resolve(g,"distanceField"),"distanceRange"),s.distanceRange=el.parseInt(f),f=_x.resolve(cx.resolve(g,"distanceField"),"fieldType"),s.fieldType=el.string(f)),cx.resolve(g,"pages").elements());Z.hasNext();){var X=Z.next();if("0"==_x.resolve(X,"id")){var q=_x.resolve(X,"file");try{s.tilePath=q,i=n(KA.join([KA.directory(t),q]))}catch(u){CA.lastError=u,s.tilePath=new KA(t).file+".png",i=n(KA.withExtension(t,"png"))}}}for(var K=cx.resolve(g,"chars").elements();K.hasNext();){for(var A=K.next(),m=new Qt(i.sub(el.parseInt(_x.resolve(A,"x")),el.parseInt(_x.resolve(A,"y")),el.parseInt(_x.resolve(A,"width")),el.parseInt(_x.resolve(A,"height")),el.parseInt(_x.resolve(A,"xoffset")),el.parseInt(_x.resolve(A,"yoffset"))),el.parseInt(_x.resolve(A,"xadvance"))),J=cx.resolve(g,"kernings").elements();J.hasNext();){var x=J.next();_x.resolve(x,"second")==_x.resolve(A,"id")&&m.addKerning(el.parseInt(_x.resolve(x,"first")),el.parseInt(_x.resolve(x,"amount")))}Y=el.parseInt(_x.resolve(A,"id"));a.h[Y]=m}}else{s.tilePath=new KA(t).file+".png",i=n(KA.withExtension(t,"png")),s.name=_x.resolve(g,"family");for(var f=_x.resolve(g,"size"),f=(s.size=s.initSize=el.parseInt(f),_x.resolve(g,"height")),$=(s.lineHeight=el.parseInt(f),[]),A=g.elements();A.hasNext();){for(var w=A.next(),y=_x.resolve(w,"rect").split(" "),ee=_x.resolve(w,"offset").split(" "),m=new Qt(i.sub(el.parseInt(y[0]),el.parseInt(y[1]),el.parseInt(y[2]),el.parseInt(y[3]),el.parseInt(ee[0]),el.parseInt(ee[1])),el.parseInt(_x.resolve(w,"width"))),y=_x.resolve(w,"code"),te=Ae.startsWith(y,"&#")?el.parseInt(Jn.substr(y,2,y.length-3)):Jn.cca(y,0),x=w.elements();x.hasNext();){var ne=x.next(),b=_x.resolve(ne,"id"),b=Ae.startsWith(b,"&#")?el.parseInt(Jn.substr(b,2,b.length-3)):Jn.cca(b,0),ne=el.parseInt(_x.resolve(ne,"advance"));a.h.hasOwnProperty(b)?a.h[b].addKerning(te,ne):$.push({prev:te,next:b,adv:ne})}a.h[te]=m}for(u=0;u<$.length;){var x=$[u],ie=(++u,a.h[x.next]);null!=ie&&ie.addKerning(x.prev,x.adv)}}break;case 1868983913:for(var se=e.toString().split("\n"),v=new ot(' *?([0-9a-zA-Z]+)=("[^"]+"|.+?)(?:[ \r]|$)',""),u=0;u<se.length;){var C=se[u];switch(++u,T=C.indexOf(" "),Jn.substr(C,0,T)){case"char":for(var O=0,S=0,ae=0,le=0,re=0,oe=0,ue=0,_=0;T<C.length&&v.matchSub(C,T);){switch(v.matched(1)){case"height":var k=v.matched(2),re=el.parseInt(34==Jn.cca(k,0)?k.substring(1,k.length-1):k);break;case"id":k=v.matched(2);O=el.parseInt(34==Jn.cca(k,0)?k.substring(1,k.length-1):k);break;case"width":var M=v.matched(2),le=el.parseInt(34==Jn.cca(M,0)?M.substring(1,M.length-1):M);break;case"x":M=v.matched(2);S=el.parseInt(34==Jn.cca(M,0)?M.substring(1,M.length-1):M);break;case"xadvance":var I=v.matched(2);_=el.parseInt(34==Jn.cca(I,0)?I.substring(1,I.length-1):I);break;case"xoffset":I=v.matched(2),oe=el.parseInt(34==Jn.cca(I,0)?I.substring(1,I.length-1):I);break;case"y":var B=v.matched(2),ae=el.parseInt(34==Jn.cca(B,0)?B.substring(1,B.length-1):B);break;case"yoffset":B=v.matched(2),ue=el.parseInt(34==Jn.cca(B,0)?B.substring(1,B.length-1):B)}var T=(N=v.matchedPos()).pos+N.len}m=new Qt(i.sub(S,ae,le,re,oe,ue),_);a.h[O]=m;break;case"common":for(;T<C.length&&v.matchSub(C,T);){switch(v.matched(1)){case"base":var E=v.matched(2);s.baseLine=el.parseInt(34==Jn.cca(E,0)?E.substring(1,E.length-1):E);break;case"lineHeight":E=v.matched(2);s.lineHeight=el.parseInt(34==Jn.cca(E,0)?E.substring(1,E.length-1):E);break;case"pages":var he=v.matched(2);el.parseInt(34==Jn.cca(he,0)?he.substring(1,he.length-1):he)}var ce=v.matchedPos();T=ce.pos+ce.len}break;case"info":for(;T<C.length&&v.matchSub(C,T);){switch(v.matched(1)){case"face":var F=v.matched(2);s.name=34==Jn.cca(F,0)?F.substring(1,F.length-1):F;break;case"size":F=v.matched(2);s.size=s.initSize=el.parseInt(34==Jn.cca(F,0)?F.substring(1,F.length-1):F)}var _e=v.matchedPos();T=_e.pos+_e.len}break;case"kerning":for(var de,H=0,pe=0,me=0;T<C.length&&v.matchSub(C,T);){switch(v.matched(1)){case"amount":var D=v.matched(2),me=el.parseInt(34==Jn.cca(D,0)?D.substring(1,D.length-1):D);break;case"first":D=v.matched(2);H=el.parseInt(34==Jn.cca(D,0)?D.substring(1,D.length-1):D);break;case"second":var ge=v.matched(2),pe=el.parseInt(34==Jn.cca(ge,0)?ge.substring(1,ge.length-1):ge)}var fe=v.matchedPos();T=fe.pos+fe.len}null!=(de=a.h[pe])&&de.addKerning(H,me);break;case"page":for(;T<C.length&&v.matchSub(C,T);){if("file"==v.matched(1)){var R=v.matched(2),q=34==Jn.cca(R,0)?R.substring(1,R.length-1):R;try{s.tilePath=q,i=n(KA.join([KA.directory(t),q]))}catch(e){CA.lastError=e,s.tilePath=new KA(t).file+".png",i=n(KA.withExtension(t,"png"))}}R=v.matchedPos();T=R.pos+R.len}}}break;default:throw tl.thrown("Unknown font signature "+Ae.hex(o,8))}null==a.h[32]&&(P=i.sub(0,0,0,0),a.h[32]=new Qt(P,s.size>>1)),s.tile=i,0==s.baseLine&&(s.baseLine=s.calcBaseLine());var P=a.h[65533];return null!=(P=null==(P=null==P?a.h[9633]:P)?a.h[63]:P)&&(s.defaultChar=P),s},function(e){this.i=e}),d0=((i["hxd.fmt.bfnt.Reader"]=_0).__name__="hxd.fmt.bfnt.Reader",_0.prototype={read:function(e){if("BFNT"!=this.i.readString(4)||0!=this.i.readByte())throw tl.thrown("Not a BFNT file!");var t=null,n=this.i.readByte();if(1!=n)throw tl.thrown("Unknown BFNT version: "+n);(t=new Vt(this.i.readString(this.i.readUInt16()),this.i.readInt16())).tilePath=this.i.readString(this.i.readUInt16());for(var i,s=t.tile=e(t.tilePath),a=(t.lineHeight=this.i.readInt16(),t.baseLine=this.i.readInt16(),this.i.readInt32());0!=(i=this.i.readInt32());){var l,r=new Qt(s.sub(this.i.readUInt16(),this.i.readUInt16(),this.i.readUInt16(),this.i.readUInt16(),this.i.readInt16(),this.i.readInt16()),this.i.readInt16());for(t.glyphs.h[i]=r,i==a&&(t.defaultChar=r);;){if(0==(l=this.i.readInt32()))break;r.addKerning(l,this.i.readInt16())}}return t},__class__:_0},(i["hxd.fmt.grd.Gradient"]=jp).__name__="hxd.fmt.grd.Gradient",jp.prototype={__class__:jp},(i["hxd.fmt.grd.ColorStop"]=Hp).__name__="hxd.fmt.grd.ColorStop",Hp.prototype={__class__:Hp},fe["hxd.fmt.grd.ColorStopType"]={__ename__:!0,__constructs__:null,User:{_hx_name:"User",_hx_index:0,__enum__:"hxd.fmt.grd.ColorStopType",toString:o},Background:{_hx_name:"Background",_hx_index:1,__enum__:"hxd.fmt.grd.ColorStopType",toString:o},Foreground:{_hx_name:"Foreground",_hx_index:2,__enum__:"hxd.fmt.grd.ColorStopType",toString:o}}),p0=(d0.__constructs__=[d0.User,d0.Background,d0.Foreground],d0.__empty_constructs__=[d0.User,d0.Background,d0.Foreground],(i["hxd.fmt.grd.TransparencyStop"]=Yp).__name__="hxd.fmt.grd.TransparencyStop",Yp.prototype={__class__:Yp},fe["hxd.fmt.grd.Color"]={__ename__:!0,__constructs__:null,RGB:((R=function(e,t,n){return{_hx_index:0,r:e,g:t,b:n,__enum__:"hxd.fmt.grd.Color",toString:o}})._hx_name="RGB",R.__params__=["r","g","b"],R),HSB:((R=function(e,t,n){return{_hx_index:1,h:e,s:t,b:n,__enum__:"hxd.fmt.grd.Color",toString:o}})._hx_name="HSB",R.__params__=["h","s","b"],R)}),m0=(p0.__constructs__=[p0.RGB,p0.HSB],p0.__empty_constructs__=[],(i["hxd.fmt.grd.GradientStop"]=Zp).__name__="hxd.fmt.grd.GradientStop",Zp.prototype={__class__:Zp},(i["hxd.fmt.grd.Data"]=Xp).__name__="hxd.fmt.grd.Data",Xp.__super__=at,Xp.prototype=e(at.prototype,{__class__:Xp}),(i["hxd.fmt.grd.Reader"]=qp).__name__="hxd.fmt.grd.Reader",qp.prototype={readUnicode:function(e,t){for(var n="",i=0,s=t-1;i<s;){i++;var a=e.readInt16();n+=String.fromCodePoint(a)}return e.readInt16(),n},parseValue:function(e){var t=e.readString(4);switch(t){case"Objc":i=this.parseObj(e);break;case"TEXT":i=this.readUnicode(e,e.readInt32());break;case"UntF":e.readString(4),i=e.readDouble();break;case"VlLs":i=this.parseList(e);break;case"bool":i=e.readByte();break;case"doub":i=e.readDouble();break;case"enum":i=this.parseEnum(e);break;case"long":i=e.readInt32();break;case"tdtd":var n=e.readInt32(),i={length:n,value:e.read(n)};break;default:throw tl.thrown('Unhandled type "'+t+'"')}return i},parseObj:function(e){for(var t=e.readInt32(),n=this.readUnicode(e,t=0==t?4:t),t=e.readInt32(),i={name:n,type:e.readString(t=0==t?4:t)},s=e.readInt32(),a=0;a<s;){++a,0==(t=e.readInt32())&&(t=4);var l=e.readString(t),r=l.indexOf(" ");i[l=0<r?l.substring(0,r):l]=this.parseValue(e)}return i},parseList:function(e){for(var t=[],n=e.readInt32(),i=0;i<n;)++i,t.push(this.parseValue(e));return t},parseEnum:function(e){var t=e.readInt32(),n=e.readString(t=0==t?4:t),t=e.readInt32();return{type:n,value:e.readString(t=0==t?4:t)}},read:function(){for(var e=new Xp,t=(this.i.read(32),this.i.readString(4),nl.__cast(this.parseValue(this.i),Array)),n=0;n<t.length;){var i=t[n++].Grad,s=new jp,a=i.Nm;s.name=a.substring(a.indexOf("=")+1),s.interpolation=i.Intr,this.createColorStops(i.Clrs,s.colorStops),this.createTransparencyStops(i.Trns,s.transparencyStops),this.createGradientStops(s.colorStops,s.transparencyStops,s.gradientStops),e.h[s.name]=s}return e},createColorStops:function(e,t){for(var n=0;n<e.length;){var i,s=e[n],a=(++n,p0.RGB(0,0,0));switch(s.Type.value){case"BckC":i=d0.Background;break;case"FrgC":i=d0.Foreground;break;case"UsrS":i=d0.User;break;default:throw tl.thrown("unhalndled color stop type : "+el.string(s.Type.value))}if(i==d0.User)switch(s.Clr.type){case"HSBC":a=p0.HSB(s.Clr.H,s.Clr.Strt,s.Clr.Brgh);break;case"RGBC":a=p0.RGB(s.Clr.Rd,s.Clr.Grn,s.Clr.Bl)}var l=new Hp;l.color=a,l.location=s.Lctn,l.midpoint=s.Mdpn,l.type=i,t.push(l)}},createTransparencyStops:function(e,t){for(var n=0;n<e.length;){var i=e[n],s=(++n,new Yp);s.opacity=i.Opct,s.location=i.Lctn,s.midpoint=i.Mdpn,t.push(s)}},createGradientStops:function(e,t,n){for(var i=0;i<e.length;){var s=e[i],a=(++i,new Zp);a.opacity=this.getOpacity(s,t),a.colorStop=s,n.push(a)}},getOpacity:function(e,t){for(var n,i,s,a=-1,l=0,r=t.length;l<r;){var o=l++;if(t[o].location>=e.location){a=o;break}}return 0==a?t[0].opacity:a<0?t[t.length-1].opacity:0==(i=(s=t[a]).location-(n=t[a-1]).location)?n.opacity:(s=(s.opacity-n.opacity)/i)*e.location+(n.opacity-s*n.location)},__class__:qp},(i["hxd.fmt.hdr.Reader"]=Kp).__name__="hxd.fmt.hdr.Reader",Kp.decode=function(e,t){for(var n=new HA(e),i=Object.create(null);;){var s=n.readLine();if(""==s)break;35!=Jn.cca(s,0)&&1<(s=s.split("=")).length&&(i[s.shift()]=s.join("="))}for(var a=n.readLine().split(" "),l=el.parseInt(a[1]),r=el.parseInt(a[3]),a="1"==i.GAMMA,o=new IA(new ArrayBuffer(r*l*4*4)),u=1,h=i.EXPOSURE,c=(null!=h&&((h=parseFloat(h))<1e-12||h<1e12)&&(u=h),t?1:.45454545454545453),_=[],d=0;d<256;)_.push(Math.pow(d++,c));for(var d=[],p=0;p<256;)d.push(Math.pow(Math.pow(2,p++-128)/(256*u),c));if(null==(p=i.FORMAT))throw tl.thrown("Unsupported HDR format "+p);if("32-bit_rle_rgbe"!=p)throw tl.thrown("Unsupported HDR format "+p);for(var m=n.pos,g=new IA(new ArrayBuffer(4*r)),f=r>>8|(255&r)<<8,A=0,x=l;A<x;){var w=A++,y=e.getInt32(m);if(514!=(65535&y)||y>>>16!=f)g.blit(0,e,m,4*r),m+=4*r;else{m+=4;for(var b=0,v=4*r;b<v;){var C=e.b[m++];128<C?(C-=128,g.fill(b,C,e.b[m++])):(g.blit(b,e,m,C),m+=C),b+=C}}for(var S=w*r*16,k=0,M=r;k<M;){var I=k++,B=d[g.b[I+3*r]];o.setFloat(S,_[g.b[I]]*B),S+=4,o.setFloat(S,_[g.b[I+r]]*B),S+=4,o.setFloat(S,_[g.b[I+(r<<1)]]*B),S+=4,o.setFloat(S,1),S+=4}}return{width:r,height:l,bytes:o,gamma:a}},fe["hxd.fmt.hmd.Property"]={__ename__:!0,__constructs__:null,CameraFOVY:((R=function(e){return{_hx_index:0,v:e,__enum__:"hxd.fmt.hmd.Property",toString:o}})._hx_name="CameraFOVY",R.__params__=["v"],R),Unused_HasMaterialFlags:{_hx_name:"Unused_HasMaterialFlags",_hx_index:1,__enum__:"hxd.fmt.hmd.Property",toString:o},HasExtraTextures:{_hx_name:"HasExtraTextures",_hx_index:2,__enum__:"hxd.fmt.hmd.Property",toString:o},FourBonesByVertex:{_hx_name:"FourBonesByVertex",_hx_index:3,__enum__:"hxd.fmt.hmd.Property",toString:o},HasLod:{_hx_name:"HasLod",_hx_index:4,__enum__:"hxd.fmt.hmd.Property",toString:o},HasCollider:{_hx_name:"HasCollider",_hx_index:5,__enum__:"hxd.fmt.hmd.Property",toString:o},HasColliders:{_hx_name:"HasColliders",_hx_index:6,__enum__:"hxd.fmt.hmd.Property",toString:o}}),g0=(m0.__constructs__=[m0.CameraFOVY,m0.Unused_HasMaterialFlags,m0.HasExtraTextures,m0.FourBonesByVertex,m0.HasLod,m0.HasCollider,m0.HasColliders],m0.__empty_constructs__=[m0.Unused_HasMaterialFlags,m0.HasExtraTextures,m0.FourBonesByVertex,m0.HasLod,m0.HasCollider,m0.HasColliders],(i["hxd.fmt.hmd.Position"]=Jp).__name__="hxd.fmt.hmd.Position",Jp.prototype={get_qw:function(){var e=1-(this.qx*this.qx+this.qy*this.qy+this.qz*this.qz);return e<0?-Math.sqrt(-e):Math.sqrt(e)},toMatrix:function(e){null==e&&(e=!1);var t=new Wr,n=Jp.QTMP;return n.x=this.qx,n.y=this.qy,n.z=this.qz,n.w=this.get_qw(),n.toMatrix(t),e?(t.translate(this.x,this.y,this.z),t.scale(this.sx,this.sy,this.sz)):(t._11*=this.sx,t._12*=this.sx,t._13*=this.sx,t._21*=this.sy,t._22*=this.sy,t._23*=this.sy,t._31*=this.sz,t._32*=this.sz,t._33*=this.sz,t.translate(this.x,this.y,this.z)),t},__class__:Jp,__properties__:{get_qw:"get_qw"}},(i["hxd.fmt.hmd.Geometry"]=$p).__name__="hxd.fmt.hmd.Geometry",$p.prototype={get_indexCount:function(){for(var e=0,t=0,n=this.indexCounts;t<n.length;)e+=n[t++];return e},__class__:$p,__properties__:{get_indexCount:"get_indexCount"}},(i["hxd.fmt.hmd.BlendShape"]=em).__name__="hxd.fmt.hmd.BlendShape",em.prototype={__class__:em},(i["hxd.fmt.hmd.Collider"]=tm).__name__="hxd.fmt.hmd.Collider",tm.prototype={__class__:tm},(i["hxd.fmt.hmd.Material"]=nm).__name__="hxd.fmt.hmd.Material",nm.prototype={__class__:nm},(i["hxd.fmt.hmd.SkinJoint"]=im).__name__="hxd.fmt.hmd.SkinJoint",im.prototype={__class__:im},(i["hxd.fmt.hmd.SkinSplit"]=sm).__name__="hxd.fmt.hmd.SkinSplit",sm.prototype={__class__:sm},(i["hxd.fmt.hmd.Skin"]=am).__name__="hxd.fmt.hmd.Skin",am.prototype={__class__:am},(i["hxd.fmt.hmd.Model"]=lm).__name__="hxd.fmt.hmd.Model",lm.prototype={getObjectName:function(){var e;return null==this.name?this.name:(e=new RegExp("_*-*LOD0","".split("u").join("")),this.name.replace(e,""))},isLOD:function(){return null!=this.name&&0<=this.name.indexOf("LOD")&&this.name.indexOf("LOD0")<0},isLOD0:function(e){return null!=this.name&&-1!=this.name.indexOf(e)&&-1!=this.name.indexOf("LOD0")},getLODInfos:function(){if(!(null==this.name||this.name.length<="LOD".length)){if("LOD"==Jn.substr(this.name,0,"LOD".length))if(null!=(e=el.parseInt(Jn.substr(this.name,"LOD".length,1)))){if(null!=el.parseInt(Jn.substr(this.name,"LOD".length+1,1)))throw tl.thrown("Did not expect a second number after LOD in "+this.name);return{lodLevel:e,modelName:Jn.substr(this.name,"LOD".length,null)}}var e,t=this.name.length-"LOD".length-1;if("LOD"==Jn.substr(this.name,t,"LOD".length))if(null!=(e=el.parseInt(this.name.charAt(this.name.length-1))))return{lodLevel:e,modelName:Jn.substr(this.name,0,t)}}return{lodLevel:-1,modelName:null}},isCollider:function(){var e;return null!=this.name&&!((e=this.name.lastIndexOf("_"))<0)&&Ae.startsWith(Jn.substr(this.name,e,null),"_Collider")},__class__:lm},fe["hxd.fmt.hmd.AnimationFlag"]={__ename__:!0,__constructs__:null,HasPosition:{_hx_name:"HasPosition",_hx_index:0,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o},HasRotation:{_hx_name:"HasRotation",_hx_index:1,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o},HasScale:{_hx_name:"HasScale",_hx_index:2,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o},HasUV:{_hx_name:"HasUV",_hx_index:3,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o},HasAlpha:{_hx_name:"HasAlpha",_hx_index:4,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o},SingleFrame:{_hx_name:"SingleFrame",_hx_index:5,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o},HasProps:{_hx_name:"HasProps",_hx_index:6,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o},Reserved:{_hx_name:"Reserved",_hx_index:7,__enum__:"hxd.fmt.hmd.AnimationFlag",toString:o}}),f0=(g0.__constructs__=[g0.HasPosition,g0.HasRotation,g0.HasScale,g0.HasUV,g0.HasAlpha,g0.SingleFrame,g0.HasProps,g0.Reserved],g0.__empty_constructs__=[g0.HasPosition,g0.HasRotation,g0.HasScale,g0.HasUV,g0.HasAlpha,g0.SingleFrame,g0.HasProps,g0.Reserved],(i["hxd.fmt.hmd.AnimationObject"]=rm).__name__="hxd.fmt.hmd.AnimationObject",rm.prototype={__class__:rm},(i["hxd.fmt.hmd.AnimationEvent"]=om).__name__="hxd.fmt.hmd.AnimationEvent",om.prototype={__class__:om},(i["hxd.fmt.hmd.Animation"]=um).__name__="hxd.fmt.hmd.Animation",um.prototype={__class__:um},(i["hxd.fmt.hmd.Data"]=hm).__name__="hxd.fmt.hmd.Data",hm.prototype={__class__:hm},(i["hxd.fmt.hmd._Library.FormatMap"]=cm).__name__="hxd.fmt.hmd._Library.FormatMap",cm.prototype={__class__:cm},function(){}),A0=((i["hxd.fmt.hmd.GeometryBuffer"]=f0).__name__="hxd.fmt.hmd.GeometryBuffer",f0.prototype={__class__:f0},(i["hxd.fmt.hmd.Library"]=_m).__name__="hxd.fmt.hmd.Library",_m.getDefaultLodConfig=function(e){return qn.customizeLodConfig(_m.baseLodConfig)},_m.getDefaultDynamicBonesConfig=function(e){return[]},_m.prototype={getBuffers:function(e,t,z,n){0==n&&1==e.indexCounts.length&&(n=null);for(var i=[],Q=0,V=0,O=!1,W=t.inputs,N=0;N<W.length;){var s=W[N++],a=e.vertexFormat.getInput(s.name);if(null==a){var l=null==z?null:z[Q];if(null==l)throw tl.thrown("Missing required "+s.name);var r=s.type,l=new cm(r==nl.__cast(9,A1)?1:r,0,l,0)}else{if(a.type!=s.type)throw tl.thrown("Requested "+s.name+" "+(null==s.type?"null":Nx.toString(s.type))+" but found "+(null==a.type?"null":Nx.toString(a.type)));var o=s.type;l=new cm(o==nl.__cast(9,A1)?1:o,e.vertexFormat.calculateInputOffset(a.name),null,a.precision),0!=a.precision&&(O=!0)}i.push(l);o=s.type;V+=o==nl.__cast(9,A1)?1:o,++Q}var u,h=e.vertexFormat.strideBytes,t=e.vertexCount*h,c=new IA(new ArrayBuffer(t)),G=this.resource.entry,t=(G.readFull(c,this.header.dataPosition+e.vertexPosition,t),this.header.dataPosition+e.indexPosition),U=e.vertexCount<=65536,_=U?2:4;if(null==n)u=e.get_indexCount()*_;else{for(var L=0,d=0,p=n;d<p;)L+=e.indexCounts[d++];t+=L*_,u=e.indexCounts[n]*_}var m=new IA(new ArrayBuffer(u)),g=(G.readFull(m,t,u),new f0);if(null==n){g.vertexes=new Array(V*e.vertexCount),g.indexes=new Array(e.get_indexCount());for(var f=0,d=0,p=e.vertexCount;d<p;)for(var A=d++,x=0;x<i.length;){var w=i[x];if(++x,null==w.def)for(var y=0,j=w.size;y<j;){var b,s=y++,r=g.vertexes,Q=f++;if(O)switch(w.precision){case 0:b=c.getFloat(A*h+(s<<2)+w.offset);break;case 1:b=Lx.float16to32(c.getUInt16(A*h+(s<<1)+w.offset));break;case 2:b=(255&c.b[A*h+s+w.offset])/255;break;case 3:b=Lx.floatS8to32(c.b[A*h+s+w.offset])}else b=c.getFloat(A*h+(s<<2)+w.offset);r[Q]=b}else switch(w.size){case 1:g.vertexes[f++]=w.def.x;break;case 2:g.vertexes[f++]=w.def.x,g.vertexes[f++]=w.def.y;break;case 3:g.vertexes[f++]=w.def.x,g.vertexes[f++]=w.def.y,g.vertexes[f++]=w.def.z;break;default:g.vertexes[f++]=w.def.x,g.vertexes[f++]=w.def.y,g.vertexes[f++]=w.def.z,g.vertexes[f++]=w.def.w}}if(U)for(var H=0,d=0,p=g.indexes.length;d<p;)g.indexes[d++]=m.b[H++]|m.b[H++]<<8;else for(d=0,p=g.indexes.length;d<p;){s=d++;g.indexes[s]=m.getInt32(s<<2)}}else{for(var _=e.indexCounts[n],Y=new Array(e.vertexCount),v=qx._new(0),H=(g.indexes=new Array(_),0),Z=0,d=0,p=g.indexes.length;d<p;){var s=d++,X=Y[A=U?m.b[H++]|m.b[H++]<<8:m.getInt32(s<<2)];if(0==X){X=++Z,Y[A]=X;for(x=0;x<i.length;){w=i[x];if(++x,null==w.def)for(y=0,j=w.size;y<j;){var C,S,k=y++;if(O)switch(w.precision){case 0:C=c.getFloat(A*h+(k<<2)+w.offset);break;case 1:C=Lx.float16to32(c.getUInt16(A*h+(k<<1)+w.offset));break;case 2:C=(255&c.b[A*h+k+w.offset])/255;break;case 3:C=Lx.floatS8to32(c.b[A*h+k+w.offset])}else C=c.getFloat(A*h+(k<<2)+w.offset);v.pos==v.array.length&&((S=v.array.length<<1)<128&&(S=128),(S=new Float32Array(S)).set(v.array),v.array=S),v.array[v.pos++]=C}else switch(w.size){case 1:var q=w.def.x;v.pos==v.array.length&&((M=v.array.length<<1)<128&&(M=128),(M=new Float32Array(M)).set(v.array),v.array=M),v.array[v.pos++]=q;break;case 2:var M=w.def.x,K=(v.pos==v.array.length&&((q=v.array.length<<1)<128&&(q=128),(K=new Float32Array(q)).set(v.array),v.array=K),v.array[v.pos++]=M,w.def.y);v.pos==v.array.length&&((I=v.array.length<<1)<128&&(I=128),(I=new Float32Array(I)).set(v.array),v.array=I),v.array[v.pos++]=K;break;case 3:var I=w.def.x,B=(v.pos==v.array.length&&((B=v.array.length<<1)<128&&(B=128),(B=new Float32Array(B)).set(v.array),v.array=B),v.array[v.pos++]=I,w.def.y),T=(v.pos==v.array.length&&((T=v.array.length<<1)<128&&(T=128),(T=new Float32Array(T)).set(v.array),v.array=T),v.array[v.pos++]=B,w.def.z);v.pos==v.array.length&&((F=v.array.length<<1)<128&&(F=128),(F=new Float32Array(F)).set(v.array),v.array=F),v.array[v.pos++]=T;break;default:var E,F=w.def.x,D=(v.pos==v.array.length&&((D=v.array.length<<1)<128&&(D=128),(D=new Float32Array(D)).set(v.array),v.array=D),v.array[v.pos++]=F,w.def.y),R=(v.pos==v.array.length&&((R=v.array.length<<1)<128&&(R=128),(R=new Float32Array(R)).set(v.array),v.array=R),v.array[v.pos++]=D,w.def.z),P=(v.pos==v.array.length&&((P=v.array.length<<1)<128&&(P=128),(P=new Float32Array(P)).set(v.array),v.array=P),v.array[v.pos++]=R,w.def.w);v.pos==v.array.length&&((E=v.array.length<<1)<128&&(E=128),(E=new Float32Array(E)).set(v.array),v.array=E),v.array[v.pos++]=P}}}g.indexes[s]=X-1}for(d=[],p=0,x=(r=v).pos;p<x;)d.push(r.array[p++]);g.vertexes=d}return g},makePrimitive:function(e){var t=e.geometry,n=this.cachedPrimitives[t];if(null==n){if(e.isCollider())return null;var i=null;if(null!=e.lods){if(e.isLOD())return null;for(var s=[],a=0,l=e.lods;a<l.length;)s.push(this.header.models[l[a++]]);i=s,this.patchLodsMaterials(e,s)}else{var r=e.getLODInfos();if(0<r.lodLevel){for(s=0,a=this.header.models;s<a.length;)if(a[s++].isLOD0(r.modelName))return null;throw tl.thrown("No LOD0 found for "+r.modelName+" in "+this.resource.entry.name)}0==r.lodLevel&&(i=this.findLODs(r.modelName,e),this.patchLodsMaterials(e,i))}(n=new Xn(this.header.geometries[t],this.header.dataPosition,this,i)).incref(),this.cachedPrimitives[t]=n}return n},makeMaterial:function(e,t,n){var t=this.header.materials[t],i=uo.current.createMaterial(),s=(i.name=t.name,i.model=this.resource,i.set_blendMode(t.blendMode),uo.current.loadMaterialProps(i));return null==s&&(s=i.getDefaultModelProps()),null!=t.diffuseTexture&&(i.set_texture(n(t.diffuseTexture)),null==i.get_texture())&&i.set_texture(_o.fromColor(16711935)),null!=t.specularTexture&&i.set_specularTexture(n(t.specularTexture)),null!=t.normalMap&&i.set_normalMap(n(t.normalMap)),i.set_props(s),i},makeSkin:function(e,t){var n=this.cachedSkin.h[e.name];if(null==n){(n=new on(e.name,0,null!=t.props&&0<=t.props.indexOf(m0.FourBonesByVertex)?4:3)).namedJoints=new at,n.allJoints=[],n.boundJoints=[],n.rootJoints=[];for(var i=0,s=e.joints;i<s.length;){var a=s[i],l=(++i,new an);l.name=a.name,l.index=n.allJoints.length,l.defMat=a.position.toMatrix(),0<=a.bind&&(l.bindIndex=a.bind,l.transPos=a.transpos.toMatrix(!0),n.boundJoints[l.bindIndex]=l),0<=a.parent?((a=n.allJoints[a.parent]).subs.push(l),l.parent=a):n.rootJoints.push(l),n.allJoints.push(l),n.namedJoints.h[l.name]=l}if(null!=e.split){n.splitJoints=[];for(i=0,s=e.split;i<s.length;){for(var r=s[i],o=(++i,n.splitJoints),u=r.materialIndex,h=[],c=0,_=r.joints;c<_.length;)h.push(n.allJoints[_[c++]]);o.push({material:u,joints:h})}}this.cachedSkin.h[e.name]=n}return n},findLODs:function(e,t){if(null==e)return null;for(var n=[],i=0,s=this.header.models;i<s.length;){var a=s[i],l=(++i,a.getLODInfos());if(!(l.lodLevel<1)&&l.modelName==e){if(null!=n[l.lodLevel-1])throw tl.thrown("Multiple LODs with the same level : "+a.name);n[l.lodLevel-1]=a}}return n},patchLodsMaterials:function(e,t){for(var n=0;n<t.length;){for(var i=t[n],s=(++n,0),a=i.materials;s<a.length;)if(-1==e.materials.indexOf(a[s++]))throw tl.thrown("Model "+i.name+" has a material that isn't used by "+e.name+". This is not supported.");for(var l=this.header.geometries[i.geometry],r=[],o=0,u=0,h=e.materials.length;u<h;){var c=u++;e.materials[c]==i.materials[o]?(r[c]=l.indexCounts[o],++o):r[c]=0}l.indexCounts=r}},makeObject:function(e){if(null==e&&(e=function(e){return _o.fromColor(16711935)}),0==this.header.models.length)throw tl.thrown("This file does not contain any model");for(var t=[],n=0,i=this.header.models;n<i.length;){var s,a=i[n];if(++n,a.geometry<0)s=new Hr;else{var l=this.makePrimitive(a);if(null==l)continue;if(null!=a.skin){for(var r=this.makeSkin(a.skin,this.header.geometries[a.geometry]),o=(r.primitive=l,[]),u=0,h=a.materials;u<h.length;)o.push(this.makeMaterial(a,h[u++],e));s=new Bo(r,o)}else if(1==a.materials.length)s=new Co(l,this.makeMaterial(a,a.materials[0],e));else{for(var c=[],_=0,d=a.materials;_<d.length;)c.push(this.makeMaterial(a,d[_++],e));s=new ni(l,c)}}s.name=a.getObjectName(),s.defaultTransform=a.position.toMatrix(),s.flags|=1,0!=(131072&s.flags)&&(s.flags|=262144),t.push(s);var r=t[a.parent],l=(null!=r&&r.addChild(s),this.resource.entry.get_directory()),p=s instanceof Co?s:null,p=null!=p?p.primitive:null,p={resourceDirectory:l,resourceName:this.resource.entry.name,objectName:s.name,hmd:p instanceof Xn?p:null,skin:s instanceof Bo?s:null,collide:null},m={};m[qn.LOD_CONFIG]=_m.getDefaultLodConfig(p.resourceDirectory),m[qn.DYN_BONES_CONFIG]=_m.getDefaultDynamicBonesConfig(p.resourceDirectory),qn.current.loadLodConfig(p,m),qn.current.loadDynamicBonesConfig(p,m),qn.current.loadModelProps(p)}var g=t[0];return null!=g&&(g.flags|=256),g},loadSkin:function(e,t,n){if(null==n&&(n=!0),null==t.vertexWeights){var i=t.bonesPerVertex;if(3!=i&&4!=i)throw tl.thrown("assert");for(var z=4==i,Q=(t.vertexCount=e.vertexCount,Lx.make([new Gx("position",3),new Gx("weights",3),new Gx("indexes",9)])),s=this.getBuffers(e,Q),V=Q.stride,a=(t.vertexWeights=new Array(t.vertexCount*i),t.vertexJoints=new Array(t.vertexCount*i),0),l=t.boundJoints;a<l.length;)l[a++].offsets=new Ur;var r,o=s.vertexes,u=1e20,h=-1e20,c=1e20,_=-1e20,d=1e20,p=-1e20;if(null==t.splitJoints){for(var O=[],a=0,l=t.boundJoints;a<l.length;){var m=l[a];++a,O[m.bindIndex]=m}r=[{index:0,pos:0,count:s.indexes.length,joints:O}]}else{for(var g=0,W=[],N=0,a=0,l=e.indexCounts;a<l.length;){var G=l[a++];W.push(N),N+=G}for(var a=[],l=0,U=t.splitJoints;l<U.length;)a.push({index:g,pos:W[g],count:e.indexCounts[g++],joints:U[l++].joints});r=a}for(a=0;a<r.length;)for(var f=r[a],l=(++a,f.pos),U=f.pos+f.count;l<U;){var L=s.indexes[l++],A=L*V,x=o[A];if(!isNaN(x)){o[A++]=NaN;for(var w=o[A++],y=o[A++],j=o[A++],H=o[A++],Y=o[A++],Z=0,b=L*i,X=(t.vertexWeights[b]=j,t.vertexWeights[b+1]=H,t.vertexWeights[b+2]=Y,z&&(t.vertexWeights[b+3]=Z=1-j-H-Y),(0==j?1:0)|(0==H?2:0)|(0==Y?4:0)|(0==Z?8:0)),g=qA.floatToI32(o[+A]),q=(x<u&&(u=x),h<x&&(h=x),w<c&&(c=w),_<w&&(_=w),y<d&&(d=y),p<y&&(p=y),0);q<i;){var K=q++;0!=(X&1<<K)?t.vertexJoints[b++]=-1:(x<(C=(m=f.joints[g>>(K<<3)&255]).offsets).xMin&&(C.xMin=x),C.xMax<x&&(C.xMax=x),w<C.yMin&&(C.yMin=w),C.yMax<w&&(C.yMax=w),y<C.zMin&&(C.zMin=y),C.zMax<y&&(C.zMax=y),t.vertexJoints[b++]=m.bindIndex)}}}if(n)for(var v,C,S,k,M,I,g=t.allJoints.length-1,J=(h-u)*(_-c)*(p-d);0<=g;)null!=(m=t.allJoints[g--]).offsets&&null!=m.parent&&null!=m.parent.offsets&&(v=m.parent.offsets,S=(C=m.offsets).xMax-C.xMin,k=C.yMax-C.yMin,M=C.zMax-C.zMin,x=null==(x=.5*(C.xMin+C.xMax))?0:x,w=null==(w=.5*(C.yMin+C.yMax))?0:w,y=null==(y=.5*(C.zMin+C.zMax))?0:y,f=null==(f=.5*Math.sqrt(S*S+k*k+M*M))?1:f,S=null==x?0:x,k=null==w?0:w,M=null==y?0:y,I=null==f?0:f,v.xMin<=S-I&&v.yMin<=k-I&&v.zMin<=M-I&&v.xMax>=S+I&&v.yMax>=k+I&&v.zMax>=M+I?m.offsets=null:((B=new Ur).xMin=v.xMin,B.xMax=v.xMax,B.yMin=v.yMin,B.yMax=v.yMax,B.zMin=v.zMin,B.zMax=v.zMax,S-I<B.xMin&&(B.xMin=S-I),B.xMax<S+I&&(B.xMax=S+I),k-I<B.yMin&&(B.yMin=k-I),B.yMax<k+I&&(B.yMax=k+I),M-I<B.zMin&&(B.zMin=M-I),B.zMax<M+I&&(B.zMax=M+I),(B.xMax-B.xMin)*(B.yMax-B.yMin)*(B.zMax-B.zMin)/((v.xMax-v.xMin)*(v.yMax-v.yMin)*(v.zMax-v.zMin))<Math.sqrt(1.5*J/((B.xMax-B.xMin)*(B.yMax-B.yMin)*(B.zMax-B.zMin)))&&(m.parent.offsets=B,m.offsets=null)));for(a=0,l=t.allJoints;a<l.length;){var B,T,E,F,D,R,P,m=l[a];++a,null==m.offsets?m.offsetRay=-1:(x=null==(x=.5*((B=m.offsets).xMin+B.xMax))?0:x,w=null==(w=.5*(B.yMin+B.yMax))?0:w,y=null==(y=.5*(B.zMin+B.zMax))?0:y,F=null==x?0:x,T=null==w?0:w,P=null==y?0:y,F=B.yMax-B.yMin<B.xMax-B.xMin&&B.xMax-B.xMin>B.zMax-B.zMin?(E=B.yMax-B.yMin,D=B.zMax-B.zMin,D=B.xMin+(f=.5*(E<D?D:E)),E=new Gr(D=null==D?0:D,null==T?0:T,null==P?0:P),D=B.xMax-f,new Gr(D=null==D?0:D,null==T?0:T,null==P?0:P)):B.yMax-B.yMin>B.zMax-B.zMin?(D=B.xMax-B.xMin,R=B.zMax-B.zMin,R=B.yMin+(f=.5*(D<R?R:D)),E=new Gr(null==F?0:F,R=null==R?0:R,null==P?0:P),R=B.yMax-f,new Gr(null==F?0:F,R=null==R?0:R,null==P?0:P)):(R=B.xMax-B.xMin,P=B.yMax-B.yMin,P=B.zMin+(f=.5*(R<P?P:R)),E=new Gr(null==F?0:F,null==T?0:T,P=null==P?0:P),P=B.zMax-f,new Gr(null==F?0:F,null==T?0:T,P=null==P?0:P)),B.xMin=E.x,B.yMin=E.y,B.zMin=E.z,B.xMax=F.x,B.yMax=F.y,B.zMax=F.z,m.offsetRay=f)}}},__class__:_m},(i["hxd.fmt.hmd.Reader"]=dm).__name__="hxd.fmt.hmd.Reader",dm.HMD_STRINGS=null,dm.prototype={readProperty:function(){var e=this.i.readByte();switch(e){case 0:return m0.CameraFOVY(this.i.readFloat());case 1:throw tl.thrown("Obsolete HasMaterialFlags");case 2:return m0.HasExtraTextures;case 3:return m0.FourBonesByVertex;case 4:return m0.HasLod;case 5:return m0.HasCollider;case 6:return m0.HasColliders;default:throw tl.thrown("Unknown property #"+e)}},readProps:function(){if(1==this.version)return null;var e=this.i.readByte();if(0==e)return null;for(var t=[],n=0;n<e;)++n,t.push(this.readProperty());return t},readName:function(){var e=this.i.readByte();return 255==e?null:this.i.readString(e)},readCachedName:function(){var e,t=this.readName();return null==t?null:null!=(e=(dm.HMD_STRINGS=null==dm.HMD_STRINGS?new at:dm.HMD_STRINGS).h[t])?e:dm.HMD_STRINGS.h[t]=t},readPosition:function(e){null==e&&(e=!0);var t=new Jp;return t.x=this.i.readFloat(),t.y=this.i.readFloat(),t.z=this.i.readFloat(),t.qx=this.i.readFloat(),t.qy=this.i.readFloat(),t.qz=this.i.readFloat(),e?(t.sx=this.i.readFloat(),t.sy=this.i.readFloat(),t.sz=this.i.readFloat()):(t.sx=1,t.sy=1,t.sz=1),t},readBounds:function(){var e=new Ur;return e.xMin=this.i.readFloat(),e.yMin=this.i.readFloat(),e.zMin=this.i.readFloat(),e.xMax=this.i.readFloat(),e.yMax=this.i.readFloat(),e.zMax=this.i.readFloat(),e},readSkin:function(){var e=this.readCachedName();if(null==e)return null;for(var t=new am,n=(t.props=this.readProps(),t.name=e,t.joints=[],0),i=this.i.readUInt16();n<i;){++n;var s=new im,a=(s.props=this.readProps(),s.name=this.readCachedName(),this.i.readUInt16()),l=0!=(32768&a);l&&(a&=32767),s.parent=a-1,s.position=this.readPosition(l),s.bind=this.i.readUInt16()-1,0<=s.bind&&(s.transpos=this.readPosition(l)),t.joints.push(s)}var r=this.i.readByte();if(0<r){t.split=[];for(n=0;n<r;){++n;for(var o=new sm,i=(o.materialIndex=this.i.readByte(),[]),u=0,h=this.i.readByte();u<h;)++u,i.push(this.i.readUInt16());o.joints=i,t.split.push(o)}}return t},readLods:function(){for(var e=this.i.readInt32(),t=[],n=0;n<e;)++n,t.push(this.i.readInt32());return t},readHeader:function(e){null==e&&(e=!1);var t=new hm,n=this.i.readString(3);if("HMD"!=n){if(59==Jn.cca(n,0))throw tl.thrown("FBX was not converted to HMD");throw tl.thrown("Invalid HMD header "+encodeURIComponent(n))}if(this.version=this.i.readByte(),4<this.version)throw tl.thrown("Can't read HMD v"+this.version);t.version=this.version,t.geometries=[],t.dataPosition=this.i.readInt32(),e&&(this.i=new HA(this.i.read(t.dataPosition-12))),t.props=this.readProps();for(var i=0,s=this.i.readInt32();i<s;){i++;for(var a=new $p,l=(a.props=this.readProps(),a.vertexCount=this.i.readInt32(),this.i.readByte()),r=[],o=0,u=this.i.readByte();o<u;){o++;var h=this.readCachedName(),c=this.i.readByte();r.push(new Gx(h,15&c,c>>4))}if(l!=(S=Lx.make(r)).stride)throw tl.thrown("assert");a.vertexFormat=S,a.vertexPosition=this.i.readInt32();for(var _=this.i.readByte(),d=[],p=0,m=_=255==_?this.i.readInt32():_;p<m;)p++,d.push(this.i.readInt32());a.indexCounts=d,a.indexPosition=this.i.readInt32(),a.bounds=this.readBounds(),t.geometries.push(a)}t.materials=[];for(i=0,s=this.i.readInt32();i<s;)i++,(f=new nm).props=this.readProps(),f.name=this.readName(),f.diffuseTexture=this.readName(),f.blendMode=dm.BLEND[this.i.readByte()],this.i.readByte(),this.i.readFloat(),null!=f.props&&0<=f.props.indexOf(m0.HasExtraTextures)&&(f.specularTexture=this.readName(),f.normalMap=this.readName()),t.materials.push(f);for(var g=!(t.models=[]),i=0,s=this.i.readInt32();i<s;){i++;var f=new lm;if(f.props=this.readProps(),f.name=this.readCachedName(),f.parent=this.i.readInt32()-1,f.follow=this.readCachedName(),f.position=this.readPosition(),f.geometry=this.i.readInt32()-1,t.models.push(f),!(f.geometry<0)){f.materials=[];for(var A=this.i.readByte(),r=0,o=A=255==A?this.i.readInt32():A;r<o;)r++,f.materials.push(this.i.readInt32());if(f.skin=this.readSkin(),null!=f.props&&(f.lods=-1!=f.props.indexOf(m0.HasLod)?this.readLods():null,-1!=f.props.indexOf(m0.HasCollider)&&(f.collider=this.i.readInt32(),g=!0),-1!=f.props.indexOf(m0.HasColliders))){f.colliders=[];for(u=0,d=this.i.readInt32();u<d;)u++,f.colliders.push(this.i.readInt32());g=!0}}}t.animations=[];for(i=0,s=this.i.readInt32();i<s;){i++;for(var x=new um,w=(x.props=this.readProps(),x.name=this.readName(),x.frames=this.i.readInt32(),x.sampling=this.i.readFloat(),x.speed=this.i.readFloat(),this.i.readByte()),r=(x.loop=0!=(1&w),x.dataPosition=this.i.readInt32(),x.objects=[],0),o=this.i.readInt32();r<o;){r++;var y=new rm,b=(y.name=this.readCachedName(),this.i.readByte());if(null==b&&(b=0),y.flags=b,x.objects.push(y),0!=(y.flags&1<<g0.HasProps._hx_index)){for(u=[],d=0,p=this.i.readByte();d<p;)d++,u.push(this.readName());y.props=u}}if(0!=(2&w)){x.events=[];for(var m=0,v=this.i.readInt32();m<v;){m++;var C=new om;C.frame=this.i.readInt32(),C.data=this.readCachedName(),x.events.push(C)}}t.animations.push(x)}if(4<=t.version)for(n=this.i.readInt32(),i=(t.shapes=[],0),s=n;i<s;){i++;for(var S,k=new em,l=(k.name=this.readName(),k.geom=this.i.readInt32()-1,k.vertexCount=this.i.readInt32(),this.i.readByte()),r=[],o=0,u=this.i.readByte();o<u;){o++;h=this.readCachedName(),c=this.i.readByte();r.push(new Gx(h,15&c,c>>4))}if(l!=(S=Lx.make(r)).stride)throw tl.thrown("assert");k.vertexFormat=S,k.vertexPosition=this.i.readInt32(),k.indexCount=this.i.readInt32(),k.remapPosition=this.i.readInt32(),t.shapes.push(k)}if(g){t.colliders=[];for(i=0,s=this.i.readInt32();i<s;){i++;for(var M=new tm,I=this.i.readInt32(),r=[],o=0,u=I;o<u;)o++,r.push(this.i.readInt32());M.vertexCounts=r,M.vertexPosition=this.i.readInt32();for(d=[],p=0,m=I;p<m;)p++,d.push(this.i.readInt32());M.indexCounts=d,M.indexPosition=this.i.readInt32(),t.colliders.push(M)}}return t},__class__:dm},(i["hxd.fs.FileEntry"]=pm).__name__="hxd.fs.FileEntry",pm.prototype={getBytes:function(){return null},readBytes:function(e,t,n,i){throw tl.thrown("readBytes() not implemented")},fetchBytes:function(e,t){var n=pm.TMP_BYTES;return(null==n||n.length<t)&&(n=new IA(new ArrayBuffer(t+65535&-65536)),pm.TMP_BYTES=n),this.readFull(n,e,t),n},readFull:function(e,t,n){if(this.readBytes(e,0,t,n)<n)throw tl.thrown(new ZA)},getText:function(){return this.getBytes().toString()},open:function(){return new w0(this)},load:function(e){if(!this.get_isAvailable())throw tl.thrown("load() not implemented");null!=e&&e()},loadBitmap:function(e){throw tl.thrown("loadBitmap() not implemented")},watch:function(e){},get_isAvailable:function(){return!0},get_size:function(){return 0},get_path:function(){throw tl.thrown("path() not implemented")},get_directory:function(){var e=this.get_path().lastIndexOf("/");return e<0?"":Jn.substr(this.get_path(),0,e)},get_extension:function(){var e=this.name.lastIndexOf(".");return e<0?"":Jn.substr(this.name,e+1,null).toLowerCase()},__class__:pm,__properties__:{get_isAvailable:"get_isAvailable",get_size:"get_size",get_extension:"get_extension",get_directory:"get_directory",get_path:"get_path"}},function(e,t){this.fullPath=e,this.name=e.split("/").pop(),this.bytes=t}),x0=((i["hxd.fs.BytesFileEntry"]=A0).__name__="hxd.fs.BytesFileEntry",A0.__super__=pm,A0.prototype=e(pm.prototype,{get_path:function(){return this.fullPath},getBytes:function(){return this.bytes},readBytes:function(e,t,n,i){return n+i>this.bytes.length&&(i=this.bytes.length-n),e.blit(t,this.bytes,n,i=i<0?0:i),i},load:function(e){SA.delay(e,1)},loadBitmap:function(e){var t;switch(KA.extension(this.fullPath).toLowerCase()){case"gif":t="image/gif";break;case"jpeg":case"jpg":t="image/jpeg";break;case"png":t="image/png";break;default:throw tl.thrown("Cannot determine image encoding, try adding an extension to the resource path")}var n=new Image,i=(n.onload=function(){e(n)},TA.encode(this.bytes));n.src="data:"+t+";base64,"+i},get_size:function(){return this.bytes.length},__class__:A0}),(i["hxd.fs.BytesFileSystem"]=mm).__name__="hxd.fs.BytesFileSystem",mm.__interfaces__=[V],mm.prototype={getBytes:function(e){throw tl.thrown("Not implemented")},get:function(e){var t=this.getBytes(e);if(null==t)throw tl.thrown("Resource not found '"+e+"'");return new A0(e,t)},__class__:mm},(i["hxd.fs._EmbedFileSystem.EmbedEntry"]=gm).__name__="hxd.fs._EmbedFileSystem.EmbedEntry",gm.__super__=pm,gm.prototype=e(pm.prototype,{init:function(){if(null==this.bytes&&(this.bytes=pp.getBytes(this.data),null==this.bytes))throw tl.thrown("Missing resource "+this.data)},getBytes:function(){return null==this.bytes&&this.init(),this.bytes},readBytes:function(e,t,n,i){return null==this.bytes&&this.init(),n+i>this.bytes.length&&(i=this.bytes.length-n),e.blit(t,this.bytes,n,i=i<0?0:i),i},load:function(e){null!=e&&SA.delay(e,1)},loadBitmap:function(t){for(var e=null,n=0,i=pp.content;n<i.length;){var s=i[n];if(++n,s.name==this.data){e=s.data;break}}if(null==e)throw tl.thrown("Missing resource "+this.data);for(var a=new Image,l=(a.onload=function(e){t(a)},""),n=0,i=(3-4*(6*e.length>>3)%3)%3;n<i;)++n,l+="=";var r="data:image/"+this.get_extension()+";base64,"+e;a.src=r+l},get_path:function(){return"."==this.relPath?"<root>":this.relPath},get_size:function(){return this.init(),this.bytes.length},__class__:gm}),function(e){this.root=e}),w0=((i["hxd.fs.EmbedFileSystem"]=x0).__name__="hxd.fs.EmbedFileSystem",x0.__interfaces__=[V],x0.resolve=function(e){return"R_"+e.replace(x0.invalidChars.r,"_")},x0.prototype={splitPath:function(e){return"."==e?[]:e.split("/")},exists:function(e){for(var t=this.root,n=0,i=this.splitPath(e);n<i.length;)if(null==(t=X.field(t,i[n++])))return!1;return!0},get:function(e){var t;if(this.exists(e))return t=x0.resolve(e),new gm(this,e.split("/").pop(),e,t);throw tl.thrown(new v0(e))},__class__:x0},function(e){this.nextReadPos=0,this.cacheLen=0,this.cachePos=0,this.entry=e}),y0=((i["hxd.fs.FileInput"]=w0).__name__="hxd.fs.FileInput",w0.__super__=vp,w0.prototype=e(vp.prototype,{fetch:function(e){null==e&&(e=256);var t=this.cache,n=((null==this.cache||this.cache.length<e)&&(this.cache=w0.PREFETCH_CACHE,null!=this.cache&&this.cache.length>=e?w0.PREFETCH_CACHE=null:this.cache=new IA(new ArrayBuffer(e))),0),t=(0<this.cacheLen&&(n=this.cacheLen,e-=this.cacheLen,this.cache.blit(0,t,this.cachePos,this.cacheLen)),this.entry.readBytes(this.cache,n,this.nextReadPos,e));if(this.cachePos=0,this.cacheLen=n+t,this.nextReadPos+=t,0==this.cacheLen)throw tl.thrown(new ZA)},skip:function(e){var t;0<this.cacheLen&&(t=this.cacheLen,this.cachePos+=t=e<t?e:t,this.cacheLen-=t,e-=t),this.nextReadPos+=e},readByte:function(){0==this.cacheLen&&this.fetch();var e=this.cache.b[this.cachePos++];return this.cacheLen--,e},readBytes:function(e,t,n){var i=0;if(n<256&&this.cacheLen<n&&this.fetch(),0<this.cacheLen){var s=this.cacheLen,s=s<n?s:n;if(e.blit(t,this.cache,this.cachePos,s),this.cachePos+=s,this.cacheLen-=s,0==(n-=s))return s;t+=s,i=s}return 0<n&&(s=this.entry.readBytes(e,t,this.nextReadPos,n),this.nextReadPos+=s,i+=s),i},close:function(){null!=this.cache&&(null==w0.PREFETCH_CACHE||w0.PREFETCH_CACHE.length<this.cache.length)&&(w0.PREFETCH_CACHE=this.cache),this.cache=null,this.cacheLen=0},__class__:w0}),{}),b0=(y0.toBitmap=function(e){var t=new Ox(e.width,e.height);return t.ctx.drawImage(e,0,0),t},function(e){throw tl.thrown("Local file system is not supported for this platform")}),v0=((i["hxd.fs.LocalFileSystem"]=b0).__name__="hxd.fs.LocalFileSystem",b0.__interfaces__=[V],b0.prototype={get:function(e){return null},__class__:b0},function(e){this.path=e}),C0=((i["hxd.fs.NotFound"]=v0).__name__="hxd.fs.NotFound",v0.prototype={toString:function(){return"Resource file not found '"+this.path+"'"},__class__:v0},(i["hxd.fs.SourceLoader"]=fm).__name__="hxd.fs.SourceLoader",fm.isActive=function(){return 0<fm.RELOAD_LFS.length},fm.resolve=function(e){for(var t=0,n=fm.RELOAD_LFS;t<n.length;){var i=n[t++];try{return i.get(e)}catch(e){if(CA.lastError=e,!(tl.caught(e).unwrap()instanceof v0))throw e}}return null},function(){this.stack=[];for(var e=AA.callStack(),t=(e.shift(),0);t<e.length;){var n=e[t];switch(++t,n._hx_index){case 0:case 1:break;case 2:var i=n.file,s=i,a=i.indexOf("\\std/"),i=(s=0<a?Jn.substr(i,a+5,null):s)+":"+n.line;this.stack.push(i),null==this.position&&(a=s.indexOf("/"),C0.ENGINE_PACKAGES.indexOf(a<0?"":Jn.substr(s,0,a))<0)&&(this.position=i)}}null==this.position&&(this.position=this.stack[0])}),S0=((i["hxd.impl.AllocPos"]=C0).__name__="hxd.impl.AllocPos",C0.make=function(){return C0.ENABLED?new C0:null},C0.prototype={__class__:C0},function(){}),k0=((i["hxd.impl.Allocator"]=S0).__name__="hxd.impl.Allocator",S0.inst=null,S0.get=function(){return null==S0.inst&&(S0.inst=new S0),S0.inst},S0.prototype={toBufferFlags:function(e){switch(e){case 0:return[Pr.Dynamic];case 1:return null;case 2:return[Pr.UniformBuffer,Pr.Dynamic];case 3:return[Pr.UniformBuffer,Pr.ReadWriteBuffer];case 4:return[Pr.UniformBuffer]}},allocBuffer:function(e,t,n){return new zr(e,t,this.toBufferFlags(n=null==n?0:n))},ofFloats:function(e,t,n){return null==n&&(n=0),this.ofSubFloats(e,Math.ceil(e.pos/t.stride),t,n)},ofSubFloats:function(e,t,n,i){n=this.allocBuffer(t,n,i=null==i?0:i);return n.uploadFloats(e,0,t),n},disposeBuffer:function(e){e.dispose()},allocIndexBuffer:function(e,t){return Or._new(e,t=null==t?!1:t)},ofIndexes:function(e,t){(t=null==t?-1:t)<0&&null!=e&&(t=e.length);var n=this.allocIndexBuffer(t);return Or.uploadIndexes(n,e,0,t),n},disposeIndexBuffer:function(e){e.dispose()},onContextLost:function(){},allocFloats:function(e){e=null==e?0:e;return qx._new(e)},disposeFloats:function(e){},__class__:S0},(i["hxd.impl.AsyncLoader"]=Am).__name__="hxd.impl.AsyncLoader",Am.__isInterface__=!0,Am.prototype={__class__:Am},fe["hxd.impl.MouseMode"]={__ename__:!0,__constructs__:null,Absolute:{_hx_name:"Absolute",_hx_index:0,__enum__:"hxd.impl.MouseMode",toString:o},Relative:((R=function(e,t){return{_hx_index:1,callback:e,restorePos:t,__enum__:"hxd.impl.MouseMode",toString:o}})._hx_name="Relative",R.__params__=["callback","restorePos"],R),AbsoluteUnbound:((R=function(e){return{_hx_index:2,restorePos:e,__enum__:"hxd.impl.MouseMode",toString:o}})._hx_name="AbsoluteUnbound",R.__params__=["restorePos"],R)}),M0=(k0.__constructs__=[k0.Absolute,k0.Relative,k0.AbsoluteUnbound],k0.__empty_constructs__=[k0.Absolute],(i["hxd.net.BinaryLoader"]=xm).__name__="hxd.net.BinaryLoader",xm.prototype={onLoaded:function(e){},onProgress:function(e,t){},onError:function(e){throw tl.thrown(e)},load:function(t){null==t&&(t=!1);var n=this,i=new XMLHttpRequest;i.open("GET",this.url,!0),i.responseType="arraybuffer",i.onerror=function(e){n.onError(i.statusText)},i.onload=function(e){200!=i.status?n.onError(i.statusText):n.onLoaded(t?i.response:IA.ofData(i.response))},i.onprogress=function(e){n.onProgress(e.loaded||0|e.position,e.total||0|e.totalSize)},i.send()},__class__:xm},(i["hxd.res._Any.SingleFileSystem"]=wm).__name__="hxd.res._Any.SingleFileSystem",wm.__super__=mm,wm.prototype=e(mm.prototype,{getBytes:function(e){return e==this.path?this.bytes:null},__class__:wm}),(i["hxd.res.Resource"]=ym).__name__="hxd.res.Resource",ym.prototype={toString:function(){return this.entry.get_path()},watch:function(e){ym.LIVE_UPDATE&&this.entry.watch(e)},__class__:ym},function(e,t){ym.call(this,t),this.loader=e}),I0=((i["hxd.res.Any"]=M0).__name__="hxd.res.Any",M0.fromBytes=function(e,t){return new N0(new wm(e,t)).load(e)},M0.__super__=ym,M0.prototype=e(ym.prototype,{toTexture:function(){return this.toImage().toTexture()},toTile:function(){return this.toImage().toTile()},toText:function(){return this.entry.getText()},toImage:function(){return this.loader.loadCache(this.entry.get_path(),F0)},to:function(e){return this.loader.loadCache(this.entry.get_path(),e)},__class__:M0}),function(e){ym.call(this,e),this.loader=N0.currentInstance}),B0=((i["hxd.res.BitmapFont"]=I0).__name__="hxd.res.BitmapFont",I0.__super__=ym,I0.prototype=e(ym.prototype,{toFont:function(){return null==this.font&&(this.font=Lp.parse(this.entry.getBytes(),this.entry.get_path(),Cn(this,this.resolveTile))),this.font},toSdfFont:function(e,t,n,i){null==i&&(i=-1),null==n&&(n=.5),null==t&&(t=0),null==this.sdfFonts&&(this.sdfFonts=[]),null==e&&(e=this.toFont().size);for(var s=0,a=this.sdfFonts;s<a.length;){var l=a[s],r=(++s,l.type);if(1==r._hx_index&&l.size==e&&r.channel==t&&r.alphaCutoff==n&&r.smoothing==i)return l}return(l=Lp.parse(this.entry.getBytes(),this.entry.get_path(),Cn(this,this.resolveSdfTile))).type=yr.SignedDistanceField(t,n,i),l.resizeTo(e),this.sdfFonts.push(l),l},resolveSdfTile:function(e){e=this.loader.load(e).toTexture();return e.set_filter(so.Linear),Ir.fromTexture(e)},resolveTile:function(e){return this.loader.load(e).toTile()},__class__:I0}),function(e){ym.call(this,e)}),T0=((i["hxd.res.Font"]=B0).__name__="hxd.res.Font",B0.__super__=ym,B0.prototype=e(ym.prototype,{__class__:B0}),function(e){ym.call(this,e)}),E0=((i["hxd.res.Gradients"]=T0).__name__="hxd.res.Gradients",T0.createTexture=function(i,s){if(0!=(s&s-1))throw tl.thrown("gradient resolution should be a power of two");function e(){for(var e=e0.alloc(s,l,C.ARGB),t=0,n=0;n<i.length;)T0.appendPixels(e,i[n++],r.width,a,t),t+=a;r.uploadPixels(e),e.dispose()}var a=1<i.length?3:1,t=a*i.length,l=(--t,t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16,++t),r=new _o(s,l);return e(),r.realloc=e,r},T0.appendPixels=function(e,t,n,i,s){for(var a=[],l=0,r=t.gradientStops;l<r.length;){var o=r[l],u=(++l,o.colorStop.color);switch(u._hx_index){case 0:var h=u.r/255,c=u.g/255,_=u.b/255,d=new q(h=null==h?0:h,c=null==c?0:c,_=null==_?0:_,1);break;case 1:d=T0.HSVtoRGB(u.h,u.s/100,u.b/100)}d.w=o.opacity/100,a.push({value:d,loc:(n-1)*o.colorStop.location/t.interpolation|0})}a.sort(function(e,t){return e.loc-t.loc}),0<a[0].loc&&a.unshift({value:a[0].value,loc:0}),a[a.length-1].loc<n-1&&a.push({value:a[a.length-1].value,loc:n-1});for(var p=0,m=0;p<n;){for(var g=a[m].loc,f=a[m+1].loc,A=a[m].value,x=a[m+1].value;p<=f;){for(var w=(p-g)/(f-g),y=A.x,b=y+w*(x.x-y),y=A.y,v=y+w*(x.y-y),y=A.z,C=y+w*(x.z-y),y=A.w,S=y+w*(x.w-y),l=0;l<i;)e.setPixel(p,s+l++,(255*(S<0?0:1<S?1:S)+.499|0)<<24|(255*(b<0?0:1<b?1:b)+.499|0)<<16|(255*(v<0?0:1<v?1:v)+.499|0)<<8|255*(C<0?0:1<C?1:C)+.499|0);++p}++m}},T0.HSVtoRGB=function(e,t,n){if(0==t)return new q(r=null==(o=r=n)?0:r,o=null==n?0:o,null==n?0:n,1);e/=60;var i=Math.floor(e),e=e-i,s=n*(1-t),a=n*(1-t*e),l=n*(1-t*(1-e));switch(i){case 0:var r=n,o=l;return new q(r=null==n?0:r,o=null==l?0:o,null==s?0:s,1);case 1:r=a,o=n;return new q(r=null==a?0:r,o=null==n?0:o,null==s?0:s,1);case 2:r=s,o=n;return new q(r=null==s?0:r,o=null==n?0:o,null==l?0:l,1);case 3:r=s,o=a;return new q(r=null==s?0:r,o=null==a?0:o,null==n?0:n,1);case 4:r=l,o=s;return new q(r=null==l?0:r,o=null==s?0:o,null==n?0:n,1);default:r=n,o=s;return new q(r=null==n?0:r,o=null==s?0:o,null==a?0:a,1)}},T0.__super__=ym,T0.prototype=e(ym.prototype,{toTextureMap:function(e){null==e&&(e=256);for(var t=new at,n=this.getData().h,i=Object.keys(n),s=i.length,a=0;a<s;){var l=n[i[a++]],r=l.name,l=T0.createTexture([l],e);t.h[r]=l}return t},getData:function(){var e;return null==this.data&&(e=this.entry.open(),this.data=new qp(e).read(),e.close()),this.data},__class__:T0}),fe["hxd.res.ImageInfoFlag"]={__ename__:!0,__constructs__:null,IsCube:{_hx_name:"IsCube",_hx_index:0,__enum__:"hxd.res.ImageInfoFlag",toString:o},Dxt10Header:{_hx_name:"Dxt10Header",_hx_index:1,__enum__:"hxd.res.ImageInfoFlag",toString:o}}),F0=(E0.__constructs__=[E0.IsCube,E0.Dxt10Header],E0.__empty_constructs__=[E0.IsCube,E0.Dxt10Header],(i["hxd.res.ImageInfo"]=bm).__name__="hxd.res.ImageInfo",bm.prototype={__class__:bm},function(e){this.watchRegistered=!1,ym.call(this,e)}),D0=((i["hxd.res.Image"]=F0).__name__="hxd.res.Image",F0.customCheckInfo=function(e){},F0.ASYNC_LOADER=null,F0.setupTextureFlags=function(e){},F0.__super__=ym,F0.prototype=e(ym.prototype,{getInfo:function(){if(null==this.inf){this.inf=new bm;var t,e=this.entry.open();e.fetch(256);try{t=e.readUInt16()}catch(e){if(CA.lastError=e,!(tl.caught(e).unwrap()instanceof ZA))throw e;t=0}switch(t){case 16163:for(this.inf.dataFormat=6;""!=e.readLine(););var n=e.readLine().split(" ");this.inf.pixelFormat=C.RGBA32F,this.inf.height=el.parseInt(n[1]),this.inf.width=el.parseInt(n[3]);break;case 17011:throw tl.thrown("Use .ktx2 files for GPU compressed textures instead of .basis");case 17476:this.inf.dataFormat=4,e.skip(10),this.inf.height=e.readInt32(),this.inf.width=e.readInt32(),e.skip(8),this.inf.mipLevels=e.readInt32(),e.skip(48),e.readInt32();var i,s=e.readInt32(),a=e.readInt32(),l=e.readInt32(),r=e.readInt32(),o=e.readInt32(),u=e.readInt32();switch(e.readInt32(),65024==(65024&e.readInt32())&&(this.inf.flags|=1<<E0.IsCube._hx_index),16777215&s){case 0:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else switch(a){case 16:if(65535!=l)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(0!=r)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(0!=o)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(0!=u)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));this.inf.pixelFormat=C.R16U;break;case 32:switch(l){case 255:if(65280!=r)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(16711680!=o)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(-16777216!=u)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));this.inf.pixelFormat=C.RGBA;break;case 65535:if(-65536!=r)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(0!=o)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(0!=u)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));this.inf.pixelFormat=C.RG16U;break;case 16711680:if(65280!=r)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(255!=o)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));if(-16777216!=u)throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u));this.inf.pixelFormat=C.BGRA;break;default:throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u))}break;default:throw tl.thrown("Unsupported RGB DDS "+a+"bits "+Ae.hex(l)+"/"+Ae.hex(r)+"/"+Ae.hex(o)+"/"+Ae.hex(u))}break;case 36:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else this.inf.pixelFormat=C.RGBA16U;break;case 111:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else this.inf.pixelFormat=C.R16F;break;case 112:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else this.inf.pixelFormat=C.RG16F;break;case 113:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else this.inf.pixelFormat=C.RGBA16F;break;case 114:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else this.inf.pixelFormat=C.R32F;break;case 115:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else this.inf.pixelFormat=C.RG32F;break;case 116:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}else this.inf.pixelFormat=C.RGBA32F;break;case 4805697:switch((s>>>24)-48){case 1:p=C.S3TC(4);break;case 2:p=C.S3TC(5);break;default:p=null}this.inf.pixelFormat=p;break;case 5527620:switch((s>>>24)-48){case 1:p=C.S3TC(1);break;case 2:case 3:p=C.S3TC(2);break;case 4:case 5:p=C.S3TC(3);break;default:p=null}this.inf.pixelFormat=p;break;default:if(808540228==s){switch(e.skip(12),this.inf.flags|=1<<E0.Dxt10Header._hx_index,i=e.readInt32()){case 28:p=C.RGBA;break;case 71:p=C.S3TC(1);break;case 74:p=C.S3TC(2);break;case 77:p=C.S3TC(3);break;case 95:p=C.S3TC(6);break;case 98:p=C.S3TC(7);break;default:throw tl.thrown(this.entry.get_path()+" has unsupported DXGI format "+i)}this.inf.pixelFormat=p,e.readInt32(),e.skip(4),this.inf.layerCount=e.readInt32()}}if(null==this.inf.pixelFormat)throw n=String.fromCodePoint(255&s)+String.fromCodePoint(s>>8&255)+String.fromCodePoint(s>>16&255)+String.fromCodePoint(s>>>24),(255&s)==s&&(n=""+s),tl.thrown(this.entry.get_path()+" has unsupported 4CC "+n);break;case 18759:this.inf.dataFormat=2,this.inf.pixelFormat=C.BGRA,e.readInt32(),this.inf.width=e.readUInt16(),this.inf.height=e.readUInt16();break;case 19371:var h,c=D0.readFile(new HA(e.cache));switch(c.dfd.colorModel){case 163:h=V0.ETC1S;break;case 166:h=V0.UASTC;break;default:throw tl.thrown("Unsupported colorModel in ktx2 file: "+c.dfd.colorModel)}var _=R0.getTranscoderFormat(h,c.header.pixelWidth,c.header.pixelHeight,c.dfd.hasAlpha());switch(_.transcoderFormat){case Q0.ASTC_4x4:p=C.ASTC(10);break;case Q0.BC3:p=C.S3TC(3);break;case Q0.BC7_M5:p=C.S3TC(7);break;case Q0.ETC1:p=C.ETC(0);break;case Q0.ETC2:p=C.ETC(1);break;default:throw tl.thrown("Unsupported transcoder format: "+_.transcoderFormat)}switch(this.inf.pixelFormat=p,this.inf.mipLevels=c.header.levelCount,this.inf.width=c.header.pixelWidth,this.inf.height=c.header.pixelHeight,c.dfd.colorModel){case 163:p=7;break;case 166:p=8;break;default:throw tl.thrown("Unsupported colorModel in ktx2 file "+c.dfd.colorModel)}this.inf.dataFormat=p;break;case 20617:for(this.inf.dataFormat=1,e.set_bigEndian(!0),e.skip(6);;){var d=e.readInt32();if(1229472850==e.readInt32()){this.inf.width=e.readInt32(),this.inf.height=e.readInt32();var p,m=e.readByte(),g=e.readByte();switch(m){case 8:p=C.BGRA;break;case 16:switch(g){case 0:p=C.R16U;break;case 2:p=C.RGBA16U;break;case 4:p=C.RG16U;break;case 6:p=C.RGBA16U;break;default:throw tl.thrown("Unsupported png format "+m+"/"+g+"("+this.entry.get_path()+")")}break;default:throw tl.thrown("Unsupported png format "+m+"/"+g+"("+this.entry.get_path()+")")}this.inf.pixelFormat=p;break}e.skip(d+4)}break;case 55551:this.inf.dataFormat=0,this.inf.pixelFormat=C.BGRA,e.set_bigEndian(!0);e:for(;;)switch(e.readUInt16()){case 65472:case 65473:case 65474:e.readUInt16(),e.readByte(),this.inf.height=e.readUInt16(),this.inf.width=e.readUInt16();break e;default:e.skip(e.readUInt16()-2)}break;default:if("tga"==this.entry.get_extension())this.inf.dataFormat=3,this.inf.pixelFormat=C.ARGB,e.skip(10),this.inf.width=e.readUInt16(),this.inf.height=e.readUInt16();else{if("raw"!=this.entry.get_extension())throw tl.thrown("Unsupported texture format "+this.entry.get_path());this.inf.dataFormat=5,this.inf.pixelFormat=C.R32F;n=0|Math.sqrt(this.entry.get_size()>>2);if(this.entry.get_size()!=n*n*4){var f=0|Math.sqrt(this.entry.get_size()>>1);if(this.entry.get_size()!=f*f*2)throw tl.thrown("RAW format does not match 32 bit per components on "+n+"x"+n);this.inf.pixelFormat=C.R16F,n=f}this.inf.width=this.inf.height=n}}if(e.close(),null==this.inf.pixelFormat)throw tl.thrown("Unsupported internal format ("+this.entry.get_path()+")");if(0!=F0.MIPMAP_MAX_SIZE&&1<this.inf.mipLevels)for(;0==(7&(this.inf.width|this.inf.height))&&this.inf.width>>1>=F0.MIPMAP_MAX_SIZE&&this.inf.height>>1>=F0.MIPMAP_MAX_SIZE;)this.inf.width>>=1,this.inf.height>>=1,this.inf.mipLevels--,this.inf.mipOffset++;F0.customCheckInfo(this)}return this.inf},getPixels:function(e,t){switch(null==t&&(t=0),this.getInfo().dataFormat){case 0:var n=this.entry.getBytes();if(this.inf.pixelFormat!=C.BGRA)throw tl.thrown("No support to decode "+el.string(this.inf.pixelFormat)+" on this platform ("+this.entry.get_path()+")");try{g=L0.decode(n)}catch(_){CA.lastError=_;var i=tl.caught(_).unwrap();throw tl.thrown("Failed to decode JPG "+this.entry.get_path()+" ("+el.string(i)+")")}o=new e0(g.width,g.height,g.pixels,C.BGRA);break;case 1:var s=new M(new HA(this.entry.getBytes())),a=(s.checkCRC=!1,o=e0.alloc(this.inf.width,this.inf.height,this.inf.pixelFormat),s.read());switch(this.inf.pixelFormat._hx_index){case 1:ze.extract32(a,o.bytes,!1);break;case 18:case 19:case 20:case 21:var l,r=o.bytes;l=this.inf.pixelFormat==C.RGBA16U&&1==(_=ze.getHeader(a).color)._hx_index&&0==_.alpha,ze.extract(a,r,l);break;default:throw tl.thrown("No support to decode "+el.string(this.inf.pixelFormat)+" on this platform ("+this.entry.get_path()+")")}break;case 2:var s=new S(new HA(this.entry.getBytes())).read(),o=e==C.RGBA?new e0(this.inf.width,this.inf.height,k.extractFullRGBA(s,0),C.RGBA):new e0(this.inf.width,this.inf.height,k.extractFullBGRA(s,0),C.BGRA);break;case 3:var u=new I(new HA(this.entry.getBytes())).read();if(u.header.imageType!=pe.UncompressedTrueColor||32!=u.header.bitsPerPixel)throw tl.thrown("Not supported TGA "+el.string(u.header.imageType)+"/"+u.header.bitsPerPixel);var h=u.header.width,c=u.header.height;if(e==C.RGBA)for(var n=(o=e0.alloc(h,c,C.RGBA)).bytes,_=0,i=h*c;_<i;){var d=_++,p=u.imageData[d];n.setInt32(d<<2,p=p>>>24|p<<8)}else{o=e0.alloc(h,c,C.ARGB);for(var m=$x.fromPixels(o),g=0,_=0;_<c;)for(var f=_++,i=0;i<h;){p=u.imageData[g++];m.bytes.setInt32((i+++f*m.width<<2)+m.offset,p>>>24|p>>8&65280|p<<8&16711680|p<<24)}}switch(u.header.imageOrigin._hx_index){case 0:o.flipY();break;case 2:break;default:throw tl.thrown("Not supported "+el.string(u.header.imageOrigin))}break;case 4:var A=128,x=0;if(0!=(2&this.inf.flags)&&(A=148),0<(t+=this.inf.mipOffset)){for(var w=this.inf.mipLevels+this.inf.mipOffset,y=(e0.calcStride(1,this.inf.pixelFormat),t/w|0),x=t%w,b=0,_=0;_<w;){var v,d=_++;if(0==(h=this.inf.width<<this.inf.mipOffset>>d)&&(h=1),0==(c=this.inf.height<<this.inf.mipOffset>>d)&&(c=1),b+=v=e0.calcDataSize(h,c,this.inf.pixelFormat),d<x)A+=v;else if(0==y)break}A+=b*y}0==(h=this.inf.width>>x-this.inf.mipOffset)&&(h=1),0==(c=this.inf.height>>x-this.inf.mipOffset)&&(c=1),this.inf.mipLevels+this.inf.mipOffset==1&&0==(1&this.inf.flags)?n=this.entry.getBytes():(v=e0.calcDataSize(h,c,this.inf.pixelFormat),n=new IA(new ArrayBuffer(v)),this.entry.readFull(n,A,v),A=0),o=new e0(h,c,n,this.inf.pixelFormat,A);break;case 5:n=this.entry.getBytes();o=new e0(this.inf.width,this.inf.height,n,this.inf.pixelFormat);break;case 6:s=Kp.decode(this.entry.getBytes(),!1);o=new e0(s.width,s.height,s.bytes,this.inf.pixelFormat);break;case 7:case 8:n=this.entry.getBytes();o=new e0(this.inf.width,this.inf.height,n,this.inf.pixelFormat)}return null!=e&&o.convert(e),o},watchCallb:function(){var t=this.inf;this.inf=null;try{this.getInfo()}catch(e){return CA.lastError=e,void(this.inf=t)}var e=this.getInfo();t.width==e.width&&t.height==e.height||this.tex.resize(e.width,e.height),this.tex.realloc=null,this.loadTexture()},loadTexture:function(f,A){var x=this;if(0==this.getInfo().dataFormat)this.tex.flags|=512,this.entry.loadBitmap(function(e){e=y0.toBitmap(e);if(x.tex.alloc(),x.tex.uploadBitmap(e),e.ctx=null,e.pixel=null,x.tex.realloc=function(){x.loadTexture()},x.tex.flags&=-513,null!=x.tex.waitLoads)for(var t=x.tex.waitLoads,n=(x.tex.waitLoads=null,0);n<t.length;)t[n++]();F0.ENABLE_AUTO_WATCH&&!x.watchRegistered&&(x.watchRegistered=!0,x.watch(Cn(x,x.watchCallb)))});else{switch(this.inf.dataFormat){case 7:case 8:this.tex.flags|=4096}var e=function(){if((x.enableAsyncLoading||0!=(4096&x.tex.flags))&&null==f&&null==A&&null!=F0.ASYNC_LOADER&&F0.ASYNC_LOADER.isSupported(x)){switch(x.tex.dispose(),x.tex.customMipLevels=1,x.tex.flags|=512,x.tex.format._hx_index){case 22:case 23:case 24:d=!0;break;default:d=!1}d?x.tex.uploadPixels(e0.alloc(x.inf.width,x.inf.height,x.tex.format)):(x.tex.format=C.RGBA,x.tex.width=1,x.tex.height=1,x.tex.uploadPixels(F0.BLACK_1x1),x.tex.width=x.inf.width,x.tex.height=x.inf.height),F0.ASYNC_LOADER.load(x),x.tex.realloc=function(){x.loadTexture()}}else{switch(x.tex.customMipLevels=x.inf.mipLevels,x.tex.alloc(),x.inf.dataFormat){case 4:for(var e=128,t=(0!=(2&x.inf.flags)&&(e=148),0),n=x.tex.get_layerCount();t<n;){for(var i=t++,s=0,a=x.inf.mipOffset;s<a;){var l=s++;e+=e0.calcDataSize(x.inf.width<<x.inf.mipOffset>>l,x.inf.height<<x.inf.mipOffset>>l,x.inf.pixelFormat)}for(var r=0,o=x.inf.mipLevels;r<o;){var u=r++,h=(0==(p=x.inf.width>>u)&&(p=1),0==(m=x.inf.height>>u)&&(m=1),e0.calcDataSize(p,m,x.inf.pixelFormat)),c=null==f?x.entry.fetchBytes(e,h):f;x.tex.uploadPixels(new e0(p,m,c,x.inf.pixelFormat,null==f?0:e),u,i),e+=h}}break;case 7:case 8:for(t=0,n=A.faces.length;t<n;)for(var i=t++,_=A.faces[i],s=0,a=_.mipmaps.length;s<a;){var d,l=s++,p=x.inf.width>>l,m=x.inf.height>>l;switch(_.format){case 36492:d=C.S3TC(7);break;case 37808:d=C.ASTC(10);break;default:throw tl.thrown("No compressed texture format found for "+Ae.hex(_.format))}x.inf.pixelFormat=d;var g=new e0(p,m,IA.ofData(_.mipmaps[l].data.buffer),x.inf.pixelFormat,0);x.tex.uploadPixels(g,l,i),g.dispose()}break;default:for(t=0,n=x.tex.get_layerCount();t<n;)for(i=t++,s=0,a=x.inf.mipLevels;s<a;){l=s++,g=x.getPixels(x.tex.format,i*x.inf.mipLevels+l);x.tex.uploadPixels(g,l,i),g.dispose()}}x.tex.realloc=function(){x.loadTexture()},F0.ENABLE_AUTO_WATCH&&!x.watchRegistered&&(x.watchRegistered=!0,x.watch(Cn(x,x.watchCallb)))}};this.entry.get_isAvailable()?e():this.entry.load(e)}},toTexture:function(){var e,t,n=this;return null==this.tex&&(this.getInfo(),e=[ro.NoAlloc],(t=this.inf.pixelFormat)!=C.BGRA&&t!=C.ARGB&&t!=C.RGBA||(t=_o.nativeFormat),0!=(1&this.inf.flags)&&e.push(ro.Cube),1<this.inf.mipLevels&&(e.push(ro.MipMapped),e.push(ro.ManualMipMapGen)),1<this.inf.layerCount?this.tex=new En(this.inf.width,this.inf.height,this.inf.layerCount,e,t):this.tex=new _o(this.inf.width,this.inf.height,e,t),F0.DEFAULT_FILTER!=so.Linear&&this.tex.set_filter(F0.DEFAULT_FILTER),this.tex.setName(this.entry.get_path()),F0.setupTextureFlags(this.tex),0!=(2048&this.tex.flags)||0==(8192&this.tex.flags)?this.loadTexture():this.tex.realloc=function(){n.loadTexture()}),this.tex},toTile:function(){return this.getInfo(),Ir.fromTexture(this.toTexture()).sub(0,0,this.inf.width,this.inf.height)},__class__:F0}),function(){}),R0=((i["hxd.res.Ktx2"]=D0).__name__="hxd.res.Ktx2",D0.readFile=function(e){var t=D0.readHeader(e);return{header:t,levels:D0.readLevels(e,t.levelCount),dfd:D0.readDfd(e),data:new Uint8Array(e.b),supercompressionGlobalData:null}},D0.readHeader=function(e){for(var t=[171,75,84,88,32,50,48,187,13,10,26,10],n=[],i=0;i<t.length;)n.push(t[i++]==e.readByte());if(-1!=n.indexOf(!1))throw tl.thrown("Invalid KTX2 header");var n=e.readInt32(),s=e.readInt32(),a=e.readInt32(),l=e.readInt32(),r=e.readInt32(),o=e.readInt32(),u=e.readInt32(),h=e.readInt32(),c=e.readInt32(),_=e.readInt32(),d=e.readInt32(),p=e.readInt32(),m=e.readInt32(),g=e.read(8).getInt64(0);if(0<g.high)throw tl.thrown("ktx2 files with a file size exceeding 32 bit address space is not supported");var f=g.low;if(0<(g=e.read(8).getInt64(0)).high)throw tl.thrown("ktx2 files with a file size exceeding 32 bit address space is not supported");s=new P0(n,s,a,l,r,o,u,h,c,_,d,p,m,f,g.low);if(0<s.pixelDepth)throw tl.thrown("Failed to parse KTX2 file - Only 2D textures are currently supported.");if(1<s.layerCount)throw tl.thrown("Failed to parse KTX2 file - Array textures are not currently supported.");if(1<s.faceCount)throw tl.thrown("Failed to parse KTX2 file - Cube textures are not currently supported.");return s},D0.readLevels=function(e,t){for(var n=e.read(3*(t=t<=1?1:t)*8),i=[];0<t--;){var s=n.getInt64(0);if(0<s.high)throw tl.thrown("ktx2 files with a file size exceeding 32 bit address space is not supported");var s=s.low,a=n.getInt64(8);if(0<a.high)throw tl.thrown("ktx2 files with a file size exceeding 32 bit address space is not supported");var a=a.low,l=n.getInt64(16);if(0<l.high)throw tl.thrown("ktx2 files with a file size exceeding 32 bit address space is not supported");i.push({byteOffset:s,byteLength:a,uncompressedByteLength:l.low})}return i},D0.readDfd=function(e){e.readInt32();for(var t=e.readInt16(),n=e.readInt16(),i=e.readInt16(),s=e.readInt16(),a=(s-24)/16|0,l=e.readByte(),r=e.readByte(),o=e.readByte(),u=e.readByte(),h={x:e.readByte()+1,y:e.readByte()+1,z:e.readByte()+1,w:e.readByte()+1},c=[e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte()],_=[],d=0;d<a;){++d;var p=e.readUInt16(),m=e.readByte()+1,g=e.readByte();_.push({bitOffset:p,bitLength:m,channelType:15&g,channelFlags:(240&g)>>4,samplePosition:[e.readByte(),e.readByte(),e.readByte(),e.readByte()],sampleLower:e.readUInt16()+e.readUInt16(),sampleUpper:e.readUInt16()+e.readUInt16()})}return new z0(t,n,i,s,l,r,o,u,h,c,a,_)},function(){}),P0=((i["hxd.res.Ktx2Decoder"]=R0).__name__="hxd.res.Ktx2Decoder",R0._workerSourceURL=null,R0._workerConfig=null,R0._transcoderPending=null,R0._transcoderBinary=null,R0._transcoderScript=null,R0._transcoderLoading=null,R0.getTranscodedData=function(a,l){if(R0._workerConfig=null!=R0._workerConfig?R0._workerConfig:R0.detectSupport(),null==R0._workerConfig)throw tl.thrown("Not implemented: Ktx2 only supported on js target");var e,t=D0.readFile(a);if(0!=t.header.vkFormat)throw tl.thrown("KTX2Loader: Non-zero vkFormat not supported");if(163==t.dfd.colorModel)e=V0.ETC1S;else if(166==t.dfd.colorModel)e=V0.UASTC;else{if(1!=t.dfd.transferFunction)throw tl.thrown("KTX2Loader: Unknown Basis encoding");e=V0.UASTC_HDR}var r=R0.getTranscoderFormat(e,t.header.pixelWidth,t.header.pixelHeight,t.dfd.hasAlpha());R0.getWorker().then(function(n){var i=n.worker,s=R0._workerNextTaskID++;return new Promise(function(e,t){n.callbacks.h[s]={resolve:e,reject:t},n.taskCosts.h[s]=a.totlen,n.taskLoad+=n.taskCosts.h[s],a.set_position(0);e=a.readAll().b.bufferValue;i.postMessage({type:"transcode",id:s,buffer:e,formatInfo:r},[e])}).then(function(e){if("error"==e.type)throw tl.thrown("Unable to decode ktx2 file: "+e.error);a.set_position(0);var t=D0.readFile(a).header;l(e.data,t)})})},R0.detectSupport=function(){var e=Vr.CURRENT.driver;return{astcSupported:e.textureSupport.astc,etc1Supported:e.textureSupport.etc1,etc2Supported:e.textureSupport.etc2,dxtSupported:e.textureSupport.dxt,bptcSupported:e.textureSupport.bptc}},R0.getTexture=function(e,n){R0.getTranscodedData(e,function(e,t){n(R0.createTexture(e,t),t)})},R0.createTexture=function(r,o){function e(e){if(1<o.faceCount||1<o.layerCount)throw tl.thrown("Multi texture ktx2 files not supported");for(var t=r.faces[0].mipmaps,n=new _o(r.width,r.height,null,e),i=0,s=0;s<t.length;){var a=t[s],l=(++s,IA.ofData(a.data)),a=new e0(a.width,a.height,l,e);n.uploadPixels(a,i),++i}return 1<t.length&&(n.flags|=4,n.set_mipMap(io.Linear)),n}var t;switch(r.format){case O0.RGBA_ASTC_4x4_Format:t=e(C.ASTC(10));break;case O0.RGBA_BPTC_Format:t=e(C.S3TC(7));break;case O0.RGBA_ETC2_EAC_Format:t=e(C.ETC(1));break;case O0.RGBA_S3TC_DXT5_Format:t=e(C.S3TC(3));break;case O0.RGB_ETC1_Format:t=e(C.ETC(0));break;default:throw tl.thrown("Ktx2Loader: No supported format available.")}return t},R0.getWorker=function(){return R0.initTranscoder().then(function(e){var t,n;return R0._workerPool.length<R0.workerLimit?(t=new Worker(R0._workerSourceURL),n={worker:t,callbacks:new Je,taskCosts:new Je,taskLoad:0},t.postMessage({type:"init",config:R0._workerConfig,transcoderBinary:R0._transcoderBinary}),t.onmessage=function(e){var t=e.data;switch(t.type){case"error":n.callbacks.h[t.id].reject(t);break;case"transcode":n.callbacks.h[t.id].resolve(t);break;default:throw tl.thrown('Ktx2Loader: Unexpected message, "'+t.type+'"')}},R0._workerPool.push(n)):R0._workerPool.sort(function(e,t){return e.taskLoad>t.taskLoad?-1:1}),R0._workerPool[R0._workerPool.length-1]})},R0.initTranscoder=function(){var n,i,e;return e=null==R0._transcoderLoading?(n=new xm("vendor/basis_transcoder.js"),e=new Promise(function(e,t){n.onLoaded=e,n.onError=t,n.load()}),i=new xm("vendor/basis_transcoder.wasm"),Promise.all([e,new Promise(function(e,t){i.onLoaded=e,i.onError=t,i.load(!0)})]).then(function(e){return{script:e[0].toString(),wasm:e[1]}})):R0._transcoderLoading,R0._transcoderLoading=e,R0._transcoderPending=R0._transcoderLoading.then(function(e){return R0._transcoderScript=e.script,R0._transcoderBinary=e.wasm,R0._workerSourceURL=URL.createObjectURL(new Blob(["\n\t\t\tlet config;\n\t\t\tlet transcoderPending;\n\t\t\tlet formatInfo;\n\t\t\tlet BasisModule;\n\t\t\t// Inject the basis transcoder script into the workers context\n\t\t\t"+R0._transcoderScript+'\n\n\t\t\tself.onmessage = function(e) {\n\t\t\t\tconst message = e.data;\n\t\t\t\tswitch (message.type) {\n\t\t\t\t\tcase "init":\n\t\t\t\t\t\tconfig = message.config;\n\t\t\t\t\t\tinit(message.transcoderBinary);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase "transcode":\n\t\t\t\t\t\tformatInfo = message.formatInfo;\n\t\t\t\t\t\ttranscoderPending.then(function() {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst { faces, buffers, width, height, hasAlpha, format, type, dfdFlags } = transcode( message.buffer );\n\t\t\t\t\t\t\t\tself.postMessage( { type: "transcode", id: message.id, data: { faces, width, height, hasAlpha, format, type, dfdFlags } }, buffers );\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tself.postMessage({ type: "error", id: message.id, error: error.message });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfunction init(wasmBinary) {\n\t\t\t\ttranscoderPending = new Promise(function(resolve) {\n\t\t\t\t\tBasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n\t\t\t\t\tBASIS(BasisModule);\n\t\t\t\t}).then(function() {\n\t\t\t\t\tBasisModule.initializeBasis();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/** Concatenates N byte arrays. */\n\t\t\tfunction concat( arrays ) {\n\t\t\t\tif ( arrays.length === 1 ) return arrays[ 0 ];\n\t\t\t\tlet totalByteLength = 0;\n\t\t\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\t\t\t\t\tconst array = arrays[ i ];\n\t\t\t\t\ttotalByteLength += array.byteLength;\n\t\t\t\t}\n\t\t\t\tconst result = new Uint8Array( totalByteLength );\n\t\t\t\tlet byteOffset = 0;\n\t\t\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\t\t\t\t\tconst array = arrays[ i ];\n\t\t\t\t\tresult.set( array, byteOffset );\n\t\t\t\t\tbyteOffset += array.byteLength;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfunction transcode(buffer) {\n\t\t\t\tlet ktx2File = new BasisModule.KTX2File(new Uint8Array(buffer));\n\t\t\t\tfunction cleanup() {\n\t\t\t\t\tktx2File.close();\n\t\t\t\t\tktx2File.delete();\n\t\t\t\t}\n\t\t\t\tif ( ! ktx2File.isValid() ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\tthrow new Error( "KTX2Loader:\tInvalid or unsupported .ktx2 file" );\n\t\t\t\t}\n\t\t\t\tlet basisFormat;\n\t\t\t\tif ( ktx2File.isUASTC() ) {\n\t\t\t\t\tbasisFormat = '+V0.UASTC._hx_index+";\n\t\t\t\t} else if ( ktx2File.isETC1S() ) {\n\t\t\t\t\tbasisFormat = "+V0.ETC1S._hx_index+";\n\t\t\t\t} else if ( ktx2File.isHDR() ) {\n\t\t\t\t\tbasisFormat = "+V0.UASTC_HDR._hx_index+';\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error( "KTX2Loader: Unknown Basis encoding" );\n\t\t\t\t}\n\t\t\t\tconst width = ktx2File.getWidth();\n\t\t\t\tconst height = ktx2File.getHeight();\n\t\t\t\tconst layerCount = ktx2File.getLayers() || 1;\n\t\t\t\tconst levelCount = ktx2File.getLevels();\n\t\t\t\tconst faceCount = ktx2File.getFaces();\n\t\t\t\tconst hasAlpha = ktx2File.getHasAlpha();\n\t\t\t\tconst dfdFlags = ktx2File.getDFDFlags();\n\t\t\t\tconst { transcoderFormat, engineFormat, engineType } = formatInfo;\n\t\t\t\tif ( ! width || ! height || ! levelCount ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\tthrow new Error("KTX2Loader: Invalid texture ktx2File:" + JSON.stringify(ktx2File));\n\t\t\t\t}\n\t\t\t\tif ( ! ktx2File.startTranscoding() ) {\n\t\t\t\t\tcleanup();\n\t\t\t\t\tthrow new Error( "KTX2Loader: .startTranscoding failed" );\n\t\t\t\t}\n\t\t\t\tconst faces = [];\n\t\t\t\tconst buffers = [];\n\t\t\t\tfor ( let face = 0; face < faceCount; face ++ ) {\n\t\t\t\t\tconst mipmaps = [];\n\t\t\t\t\tfor ( let mip = 0; mip < levelCount; mip ++ ) {\n\t\t\t\t\t\tconst layerMips = [];\n\t\t\t\t\t\tlet mipWidth, mipHeight;\n\t\t\t\t\t\tfor ( let layer = 0; layer < layerCount; layer ++ ) {\n\t\t\t\t\t\t\tconst levelInfo = ktx2File.getImageLevelInfo( mip, layer, face );\n\t\t\t\t\t\t\tif ( face === 0 && mip === 0 && layer === 0 && ( levelInfo.origWidth % 4 !== 0 || levelInfo.origHeight % 4 !== 0 ) ) {\n\t\t\t\t\t\t\t\tconsole.warn( "KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions." );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( levelCount > 1 ) {\n\t\t\t\t\t\t\t\tmipWidth = levelInfo.origWidth;\n\t\t\t\t\t\t\t\tmipHeight = levelInfo.origHeight;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Handles non-multiple-of-four dimensions in textures without mipmaps. Textures with\n\t\t\t\t\t\t\t\t// mipmaps must use multiple-of-four dimensions, for some texture formats and APIs.\n\t\t\t\t\t\t\t\t// See mrdoob/three.js#25908.\n\t\t\t\t\t\t\t\tmipWidth = levelInfo.width;\n\t\t\t\t\t\t\t\tmipHeight = levelInfo.height;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet dst = new Uint8Array( ktx2File.getImageTranscodedSizeInBytes( mip, layer, 0, transcoderFormat ) );\n\t\t\t\t\t\t\tconst status = ktx2File.transcodeImage( dst, mip, layer, face, transcoderFormat, 0, - 1, - 1 );\n\t\t\t\t\t\t\tif ( engineType === '+W0.HalfFloatType+' ) {\n\t\t\t\t\t\t\t\tdst = new Uint16Array( dst.buffer, dst.byteOffset, dst.byteLength / Uint16Array.BYTES_PER_ELEMENT );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( ! status ) {\n\t\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\t\tthrow new Error( "KTX2Loader: .transcodeImage failed." );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlayerMips.push( dst );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst mipData = concat( layerMips );\n\t\t\t\t\t\tmipmaps.push( { data: mipData, width: mipWidth, height: mipHeight } );\n\t\t\t\t\t\tbuffers.push( mipData.buffer );\n\t\t\t\t\t}\n\t\t\t\t\tfaces.push( { mipmaps, width, height, format: engineFormat, type: engineType } );\n\t\t\t\t}\n\t\t\t\tcleanup();\n\t\t\t\treturn { faces, buffers, width, height, hasAlpha, dfdFlags, format: engineFormat, type: engineType };\n\t\t\t}\n\t\t'],{type:"text/javascript"}))}),R0._transcoderPending},R0.getTranscoderFormat=function(e,t,n,i){R0._workerConfig=null!=R0._workerConfig?R0._workerConfig:R0.detectSupport();var s=R0._workerConfig;switch(e._hx_index){case 0:return i&&s.etc2Supported?{transcoderFormat:Q0.ETC2,engineFormat:O0.RGBA_ETC2_EAC_Format,engineType:W0.UnsignedByteType}:i||!s.etc1Supported&&!s.etc2Supported?s.bptcSupported?{transcoderFormat:Q0.BC7_M5,engineFormat:O0.RGBA_BPTC_Format,engineType:W0.UnsignedByteType}:i&&s.dxtSupported?{transcoderFormat:Q0.BC3,engineFormat:O0.RGBA_S3TC_DXT5_Format,engineType:W0.UnsignedByteType}:!i&&s.dxtSupported?{transcoderFormat:Q0.BC1,engineFormat:O0.RGB_S3TC_DXT1_Format,engineType:W0.UnsignedByteType}:{transcoderFormat:Q0.RGBA32,engineFormat:O0.RGBAFormat,engineType:W0.UnsignedByteType}:{transcoderFormat:Q0.ETC1,engineFormat:O0.RGB_ETC1_Format,engineType:W0.UnsignedByteType};case 1:return s.astcSupported?{transcoderFormat:Q0.ASTC_4x4,engineFormat:O0.RGBA_ASTC_4x4_Format,engineType:W0.UnsignedByteType}:s.bptcSupported?{transcoderFormat:Q0.BC7_M5,engineFormat:O0.RGBA_BPTC_Format,engineType:W0.UnsignedByteType}:i&&s.etc2Supported?{transcoderFormat:Q0.ETC2,engineFormat:O0.RGBA_ETC2_EAC_Format,engineType:W0.UnsignedByteType}:!i&&s.etc2Supported||s.etc1Supported?{transcoderFormat:Q0.ETC1,engineFormat:O0.RGB_ETC1_Format,engineType:W0.UnsignedByteType}:i&&s.dxtSupported?{transcoderFormat:Q0.BC3,engineFormat:O0.RGBA_S3TC_DXT5_Format,engineType:W0.UnsignedByteType}:!i&&s.dxtSupported?{transcoderFormat:Q0.BC1,engineFormat:O0.RGB_S3TC_DXT1_Format,engineType:W0.UnsignedByteType}:{transcoderFormat:Q0.RGBA32,engineFormat:O0.RGBAFormat,engineType:W0.UnsignedByteType};case 2:return{transcoderFormat:Q0.RGBA_HALF,engineFormat:O0.RGBAFormat,engineType:W0.HalfFloatType}}},function(e,t,n,i,s,a,l,r,o,u,h,c,_,d,p){this.vkFormat=e,this.typeSize=t,this.pixelWidth=n,this.pixelHeight=i,this.pixelDepth=s,this.layerCount=a,this.faceCount=l,this.levelCount=r,this.supercompressionScheme=o,this.dfdByteOffset=u,this.dfdByteLength=h,this.kvdByteOffset=c,this.kvdByteLength=_,this.sgdByteOffset=d,this.sgdByteLength=p}),z0=((i["hxd.res.KTX2Header"]=P0).__name__="hxd.res.KTX2Header",P0.prototype={__class__:P0},function(e,t,n,i,s,a,l,r,o,u,h,c){this.vendorId=e,this.descriptorType=t,this.versionNumber=n,this.descriptorBlockSize=i,this.colorModel=s,this.colorPrimaries=a,this.transferFunction=l,this.flags=r,this.texelBlockDimension=o,this.bytesPlane=u,this.numSamples=h,this.samples=c}),Q0=((i["hxd.res.KTX2DFD"]=z0).__name__="hxd.res.KTX2DFD",z0.prototype={hasAlpha:function(){switch(this.colorModel){case 163:return 2==this.numSamples&&(15==this.samples[0].channelType||15==this.samples[1].channelType);case 166:return 3==this.samples[0].channelType;default:throw tl.thrown("Unsupported colorModel in ktx2 file "+this.colorModel)}},__class__:z0},function(){}),V0=((i["hxd.res.TranscoderFormat"]=Q0).__name__="hxd.res.TranscoderFormat",fe["hxd.res.BasisFormat"]={__ename__:!0,__constructs__:null,ETC1S:{_hx_name:"ETC1S",_hx_index:0,__enum__:"hxd.res.BasisFormat",toString:o},UASTC:{_hx_name:"UASTC",_hx_index:1,__enum__:"hxd.res.BasisFormat",toString:o},UASTC_HDR:{_hx_name:"UASTC_HDR",_hx_index:2,__enum__:"hxd.res.BasisFormat",toString:o}}),O0=(V0.__constructs__=[V0.ETC1S,V0.UASTC,V0.UASTC_HDR],V0.__empty_constructs__=[V0.ETC1S,V0.UASTC,V0.UASTC_HDR],function(){}),W0=((i["hxd.res.EngineFormat"]=O0).__name__="hxd.res.EngineFormat",function(){}),N0=((i["hxd.res.EngineType"]=W0).__name__="hxd.res.EngineType",(i["hxd.res.BasisWorkerMessage"]=vm).__name__="hxd.res.BasisWorkerMessage",vm.prototype={__class__:vm},function(e){this.fs=e,this.cache=new at}),G0=((i["hxd.res.Loader"]=N0).__name__="hxd.res.Loader",N0.currentInstance=null,N0.prototype={load:function(e){return new M0(this,this.fs.get(e))},loadCache:function(e,t){var n=this.cache.h[e];if(null==n){var i=this.fs.get(e),s=N0.currentInstance;N0.currentInstance=this,n=U.createInstance(t,[i]),N0.currentInstance=s,this.cache.h[e]=n}else if(null==(nl.__downcastCheck(n,t)?n:null))throw tl.thrown(e+" has been reintrepreted from "+el.string(nl.getClass(n))+" to "+el.string(t));return n},__class__:N0},function(e){ym.call(this,e)}),U0=((i["hxd.res.Model"]=G0).__name__="hxd.res.Model",G0.__super__=ym,G0.prototype=e(ym.prototype,{toHmd:function(){var e=this.entry.open(),t=new dm(e).readHeader();return e.close(),new _m(this,t)},__class__:G0}),fe["hxd.res.Filter"]={__ename__:!0,__constructs__:null,Fast:{_hx_name:"Fast",_hx_index:0,__enum__:"hxd.res.Filter",toString:o},Chromatic:{_hx_name:"Chromatic",_hx_index:1,__enum__:"hxd.res.Filter",toString:o}}),L0=(U0.__constructs__=[U0.Fast,U0.Chromatic],U0.__empty_constructs__=[U0.Fast,U0.Chromatic],(i["hxd.res._NanoJpeg.Component"]=Cm).__name__="hxd.res._NanoJpeg.Component",Cm.prototype={__class__:Cm},function(){this.comps=[new Cm,new Cm,new Cm].slice(0),this.qtab=[new Array(64),new Array(64),new Array(64),new Array(64)].slice(0),this.counts=new Array(16),this.block=new Array(64),this.njZZ=[0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63].slice(0),this.vlctab=[null,null,null,null,null,null,null,null].slice(0)}),j0=((i["hxd.res.NanoJpeg"]=L0).__name__="hxd.res.NanoJpeg",L0.decode=function(e,t,n,i){return null==i&&(i=-1),null==n&&(n=0),null==L0.inst&&(L0.inst=new L0),L0.inst.njInit(e,n,i,t),L0.inst.njDecode()},L0.prototype={njInit:function(e,t,n,i){this.bytes=e,this.pos=t,this.filter=null==i?U0.Chromatic:i,n<0&&(n=e.length-t),null==this.vlctab[0]&&(this.vlctab[0]=new IA(new ArrayBuffer(131072))),null==this.vlctab[1]&&(this.vlctab[1]=new IA(new ArrayBuffer(131072))),null==this.vlctab[2]&&(this.vlctab[2]=new IA(new ArrayBuffer(131072))),null==this.vlctab[3]&&(this.vlctab[3]=new IA(new ArrayBuffer(131072))),this.size=n,this.qtused=0,this.qtavail=0,this.rstinterval=0,this.length=0,this.buf=0,this.bufbits=0,this.progressive=!1,this.comps[0].dcpred=0,this.comps[1].dcpred=0,this.comps[2].dcpred=0},cleanup:function(){this.bytes=null;for(var e=0,t=this.comps;e<t.length;){var n=t[e];++e,null!=n.pixels&&(n.pixels=null)}null!=this.vlctab[0]&&(this.vlctab[0]=null),null!=this.vlctab[1]&&(this.vlctab[1]=null),null!=this.vlctab[2]&&(this.vlctab[2]=null),null!=this.vlctab[3]&&(this.vlctab[3]=null),null!=this.vlctab[4]&&(this.vlctab[4]=null),null!=this.vlctab[5]&&(this.vlctab[5]=null),null!=this.vlctab[6]&&(this.vlctab[6]=null),null!=this.vlctab[7]&&(this.vlctab[7]=null)},njShowBits:function(e){if(0==e)return 0;for(;this.bufbits<e;)if(this.size<=0)this.buf=this.buf<<8|255,this.bufbits+=8;else{var t=this.bytes.b[this.pos];if(this.pos++,this.size--,this.bufbits+=8,this.buf=this.buf<<8|t,255==t){var n=this.bytes.b[this.pos];switch(this.pos++,this.size--,n){case 217:this.size=0;break;case 0:case 255:break;default:this.buf=this.buf<<8|n,this.bufbits+=8}}}return this.buf>>this.bufbits-e&(1<<e)-1},njDecodeSOF:function(){switch(this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2,8!=this.bytes.b[this.pos]&&this.notSupported(),this.height=this.bytes.b[this.pos+1]<<8|this.bytes.b[this.pos+2],this.width=this.bytes.b[this.pos+3]<<8|this.bytes.b[this.pos+4],this.ncomp=this.bytes.b[this.pos+5],this.pos+=6,this.size-=6,this.length-=6,this.ncomp){case 1:case 3:break;default:this.notSupported()}for(var e=0,t=0,n=0,i=this.ncomp;n<i;)(s=this.comps[n++]).cid=this.bytes.b[this.pos],s.ssx=this.bytes.b[this.pos+1]>>4,0!=(s.ssx&s.ssx-1)&&this.notSupported(),s.ssy=15&this.bytes.b[this.pos+1],0!=(s.ssy&s.ssy-1)&&this.notSupported(),s.qtsel=this.bytes.b[this.pos+2],this.pos+=3,this.size-=3,this.length-=3,this.qtused|=1<<s.qtsel,e<s.ssx&&(e=s.ssx),t<s.ssy&&(t=s.ssy);1==this.ncomp&&((s=this.comps[0]).ssx=s.ssy=e=t=1),this.mbsizex=e<<3,this.mbsizey=t<<3,this.mbwidth=(this.width+this.mbsizex-1)/this.mbsizex|0,this.mbheight=(this.height+this.mbsizey-1)/this.mbsizey|0;for(var s,n=0,i=this.ncomp;n<i;)(s=this.comps[n++]).width=(this.width*s.ssx+e-1)/e|0,s.stride=s.width+7&2147483640,s.height=(this.height*s.ssy+t-1)/t|0,s.stride=this.mbwidth*this.mbsizex*s.ssx/e|0,(s.width<3&&s.ssx!=e||s.height<3&&s.ssy!=t)&&this.notSupported(),s.pixels=new IA(new ArrayBuffer(s.stride*(this.mbheight*this.mbsizey*s.ssy/t|0)));var a=this.length;this.pos+=a,this.size-=a,this.length-=a},njDecodeDQT:function(){for(this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;65<=this.length;){for(var e=this.bytes.b[this.pos],t=(this.qtavail|=1<<e,this.qtab[e]),n=0;n<64;){var i=n++;t[i]=this.bytes.b[this.pos+(1+i)]}this.pos+=65,this.size-=65,this.length-=65}},njDecodeDHT:function(){for(this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;17<=this.length;){var e=(e=this.bytes.b[this.pos])>>4&1|(3&e)<<1;this.counts[0]=this.bytes.b[this.pos+1],this.counts[1]=this.bytes.b[this.pos+2],this.counts[2]=this.bytes.b[this.pos+3],this.counts[3]=this.bytes.b[this.pos+4],this.counts[4]=this.bytes.b[this.pos+5],this.counts[5]=this.bytes.b[this.pos+6],this.counts[6]=this.bytes.b[this.pos+7],this.counts[7]=this.bytes.b[this.pos+8],this.counts[8]=this.bytes.b[this.pos+9],this.counts[9]=this.bytes.b[this.pos+10],this.counts[10]=this.bytes.b[this.pos+11],this.counts[11]=this.bytes.b[this.pos+12],this.counts[12]=this.bytes.b[this.pos+13],this.counts[13]=this.bytes.b[this.pos+14],this.counts[14]=this.bytes.b[this.pos+15],this.counts[15]=this.bytes.b[this.pos+16],this.pos+=17,this.size-=17,this.length-=17;for(var t=this.vlctab[e],n=0,i=65536,s=65536,a=1;a<17;){var l=a++,r=(s>>=1,this.counts[l-1]);if(0!=r){i-=r<<16-l;for(var o=0;o<r;)for(var u=this.bytes.b[this.pos+o++],h=0,c=s;h<c;)++h,t.b[n++]=l,t.b[n++]=u;this.pos+=r,this.size-=r,this.length-=r}}for(;0!=i--;)t.b[n]=0,n+=2}},njDecodeDRI:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2,this.rstinterval=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1];var e=this.length;this.pos+=e,this.size-=e,this.length-=e},njDecodeBlock:function(e,t){for(var n,i=e.pixels,s=0,a=0;a<64;)this.block[a++]=0;var l=e.dcpred,r=this.vlctab[e.dctabsel],o=this.njShowBits(16),u=r.b[o<<1],h=(this.bufbits<u&&this.njShowBits(u),this.bufbits-=u,o=r.b[o<<1|1],r=0==(u=15&(this.vlcCode=o))?0:(_=this.njShowBits(u),this.bufbits-=u,o=(o=_)<1<<u-1?_+(1+(-1<<u)):o),e.dcpred=l+r,this.qtab[e.qtsel]),c=this.vlctab[e.actabsel];this.block[0]=e.dcpred*h[0];do{var _,o=this.njShowBits(16),u=c.b[o<<1]}while((this.bufbits<u&&this.njShowBits(u),this.bufbits-=u,o=c.b[o<<1|1],n=0==(u=15&(this.vlcCode=o))?0:(_=this.njShowBits(u),this.bufbits-=u,o=(o=_)<1<<u-1?_+(1+(-1<<u)):o),0!=this.vlcCode)&&(s+=1+(this.vlcCode>>4),this.block[this.njZZ[s]]=n*h[s],s<63));var l=this.block[4]<<11,r=this.block[6],d=this.block[2],p=this.block[1],m=this.block[7],g=this.block[5],f=this.block[3];0==(l|r|d|p|m|g|f)?(b=this.block[7]=this.block[0]<<3,y=this.block[6]=b,b=this.block[5]=y,y=this.block[4]=b,b=this.block[3]=y,y=this.block[2]=b,b=this.block[1]=y,this.block[0]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[0]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[0]=f+l>>8,this.block[1]=d+r>>8,this.block[2]=A+p>>8,this.block[3]=x+g>>8,this.block[4]=x-g>>8,this.block[5]=A-p>>8,this.block[6]=d-r>>8,this.block[7]=f-l>>8),0==((l=this.block[12]<<11)|(r=this.block[14])|(d=this.block[10])|(p=this.block[9])|(m=this.block[15])|(g=this.block[13])|(f=this.block[11]))?(b=this.block[15]=this.block[8]<<3,y=this.block[14]=b,b=this.block[13]=y,y=this.block[12]=b,b=this.block[11]=y,y=this.block[10]=b,b=this.block[9]=y,this.block[8]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[8]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[8]=f+l>>8,this.block[9]=d+r>>8,this.block[10]=A+p>>8,this.block[11]=x+g>>8,this.block[12]=x-g>>8,this.block[13]=A-p>>8,this.block[14]=d-r>>8,this.block[15]=f-l>>8),0==((l=this.block[20]<<11)|(r=this.block[22])|(d=this.block[18])|(p=this.block[17])|(m=this.block[23])|(g=this.block[21])|(f=this.block[19]))?(b=this.block[23]=this.block[16]<<3,y=this.block[22]=b,b=this.block[21]=y,y=this.block[20]=b,b=this.block[19]=y,y=this.block[18]=b,b=this.block[17]=y,this.block[16]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[16]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[16]=f+l>>8,this.block[17]=d+r>>8,this.block[18]=A+p>>8,this.block[19]=x+g>>8,this.block[20]=x-g>>8,this.block[21]=A-p>>8,this.block[22]=d-r>>8,this.block[23]=f-l>>8),0==((l=this.block[28]<<11)|(r=this.block[30])|(d=this.block[26])|(p=this.block[25])|(m=this.block[31])|(g=this.block[29])|(f=this.block[27]))?(b=this.block[31]=this.block[24]<<3,y=this.block[30]=b,b=this.block[29]=y,y=this.block[28]=b,b=this.block[27]=y,y=this.block[26]=b,b=this.block[25]=y,this.block[24]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[24]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[24]=f+l>>8,this.block[25]=d+r>>8,this.block[26]=A+p>>8,this.block[27]=x+g>>8,this.block[28]=x-g>>8,this.block[29]=A-p>>8,this.block[30]=d-r>>8,this.block[31]=f-l>>8),0==((l=this.block[36]<<11)|(r=this.block[38])|(d=this.block[34])|(p=this.block[33])|(m=this.block[39])|(g=this.block[37])|(f=this.block[35]))?(b=this.block[39]=this.block[32]<<3,y=this.block[38]=b,b=this.block[37]=y,y=this.block[36]=b,b=this.block[35]=y,y=this.block[34]=b,b=this.block[33]=y,this.block[32]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[32]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[32]=f+l>>8,this.block[33]=d+r>>8,this.block[34]=A+p>>8,this.block[35]=x+g>>8,this.block[36]=x-g>>8,this.block[37]=A-p>>8,this.block[38]=d-r>>8,this.block[39]=f-l>>8),0==((l=this.block[44]<<11)|(r=this.block[46])|(d=this.block[42])|(p=this.block[41])|(m=this.block[47])|(g=this.block[45])|(f=this.block[43]))?(b=this.block[47]=this.block[40]<<3,y=this.block[46]=b,b=this.block[45]=y,y=this.block[44]=b,b=this.block[43]=y,y=this.block[42]=b,b=this.block[41]=y,this.block[40]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[40]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[40]=f+l>>8,this.block[41]=d+r>>8,this.block[42]=A+p>>8,this.block[43]=x+g>>8,this.block[44]=x-g>>8,this.block[45]=A-p>>8,this.block[46]=d-r>>8,this.block[47]=f-l>>8),0==((l=this.block[52]<<11)|(r=this.block[54])|(d=this.block[50])|(p=this.block[49])|(m=this.block[55])|(g=this.block[53])|(f=this.block[51]))?(b=this.block[55]=this.block[48]<<3,y=this.block[54]=b,b=this.block[53]=y,y=this.block[52]=b,b=this.block[51]=y,y=this.block[50]=b,b=this.block[49]=y,this.block[48]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[48]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[48]=f+l>>8,this.block[49]=d+r>>8,this.block[50]=A+p>>8,this.block[51]=x+g>>8,this.block[52]=x-g>>8,this.block[53]=A-p>>8,this.block[54]=d-r>>8,this.block[55]=f-l>>8);0==((l=this.block[60]<<11)|(r=this.block[62])|(d=this.block[58])|(p=this.block[57])|(m=this.block[63])|(g=this.block[61])|(f=this.block[59]))?(b=this.block[63]=this.block[56]<<3,y=this.block[62]=b,b=this.block[61]=y,y=this.block[60]=b,b=this.block[59]=y,y=this.block[58]=b,b=this.block[57]=y,this.block[56]=b):(p=(x=565*(p+m))+2276*p,m=x-3406*m,g=(x=2408*(g+f))-799*g,f=x-4017*f,x=(A=128+(this.block[56]<<11))+l,A-=l,r=(l=1108*(d+r))-3784*r,d=l+1568*d,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,this.block[56]=f+l>>8,this.block[57]=d+r>>8,this.block[58]=A+p>>8,this.block[59]=x+g>>8,this.block[60]=x-g>>8,this.block[61]=A-p>>8,this.block[62]=d-r>>8,this.block[63]=f-l>>8);var A,x,w,y=t,b=e.stride,y=(0==((l=this.block[32]<<8)|(r=this.block[48])|(d=this.block[16])|(p=this.block[8])|(m=this.block[56])|(g=this.block[40])|(f=this.block[24]))?(w=128+(this.block[0]+32>>6),i.b[t]=l=w<0?0:255<w?255:w,i.b[y=t+b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[0]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[t]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y=t+b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w),1+t),b=e.stride,y=(0==((l=this.block[33]<<8)|(r=this.block[49])|(d=this.block[17])|(p=this.block[9])|(m=this.block[57])|(g=this.block[41])|(f=this.block[25]))?(w=128+(this.block[1]+32>>6),i.b[y]=l=w<0?0:255<w?255:w,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[1]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[y]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w),2+t),b=e.stride,y=(0==((l=this.block[34]<<8)|(r=this.block[50])|(d=this.block[18])|(p=this.block[10])|(m=this.block[58])|(g=this.block[42])|(f=this.block[26]))?(w=128+(this.block[2]+32>>6),i.b[y]=l=w<0?0:255<w?255:w,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[2]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[y]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w),3+t),b=e.stride,y=(0==((l=this.block[35]<<8)|(r=this.block[51])|(d=this.block[19])|(p=this.block[11])|(m=this.block[59])|(g=this.block[43])|(f=this.block[27]))?(w=128+(this.block[3]+32>>6),i.b[y]=l=w<0?0:255<w?255:w,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[3]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[y]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w),4+t),b=e.stride,y=(0==((l=this.block[36]<<8)|(r=this.block[52])|(d=this.block[20])|(p=this.block[12])|(m=this.block[60])|(g=this.block[44])|(f=this.block[28]))?(w=128+(this.block[4]+32>>6),i.b[y]=l=w<0?0:255<w?255:w,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[4]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[y]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w),5+t),b=e.stride,y=(0==((l=this.block[37]<<8)|(r=this.block[53])|(d=this.block[21])|(p=this.block[13])|(m=this.block[61])|(g=this.block[45])|(f=this.block[29]))?(w=128+(this.block[5]+32>>6),i.b[y]=l=w<0?0:255<w?255:w,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[5]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[y]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w),6+t),b=e.stride,y=(0==((l=this.block[38]<<8)|(r=this.block[54])|(d=this.block[22])|(p=this.block[14])|(m=this.block[62])|(g=this.block[46])|(f=this.block[30]))?(w=128+(this.block[6]+32>>6),i.b[y]=l=w<0?0:255<w?255:w,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[6]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[y]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w),7+t),b=e.stride;0==((l=this.block[39]<<8)|(r=this.block[55])|(d=this.block[23])|(p=this.block[15])|(m=this.block[63])|(g=this.block[47])|(f=this.block[31]))?(w=128+(this.block[7]+32>>6),i.b[y]=l=w<0?0:255<w?255:w,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l,i.b[y+=b]=l):(p=(x=565*(p+m)+4)+2276*p>>3,m=x-3406*m>>3,g=(x=2408*(g+f)+4)-799*g>>3,f=x-4017*f>>3,x=(A=8192+(this.block[7]<<8))+l,A-=l,r=(l=1108*(d+r)+4)-3784*r>>3,d=l+1568*d>>3,l=p+g,p-=g,g=m+f,m-=f,f=x+d,x-=d,d=A+r,A-=r,r=181*(p+m)+128>>8,p=181*(p-m)+128>>8,i.b[y]=(w=128+(f+l>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d+r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A+p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x+g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(x-g>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(A-p>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(d-r>>14))<0?0:255<w?255:w,i.b[y+=b]=(w=128+(f-l>>14))<0?0:255<w?255:w)},notSupported:function(){throw tl.thrown("This JPG file is not supported")},njDecodeScan:function(){this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2,this.bytes.b[this.pos]!=this.ncomp&&this.notSupported(),this.pos+=1,--this.size,--this.length;for(var e=0,t=this.ncomp;e<t;)(l=this.comps[e++]).dctabsel=this.bytes.b[this.pos+1]>>4<<1,l.actabsel=(3&this.bytes.b[this.pos+1])<<1|1,this.pos+=2,this.size-=2,this.length-=2;for(var n=this.bytes.b[this.pos],n=((this.progressive||0==n)&&this.bytes.b[this.pos+1]==63-n&&0==this.bytes.b[this.pos+2]||this.notSupported(),this.length),i=(this.pos+=n,this.size-=n,this.length-=n,0),s=0,a=this.rstinterval;;){for(e=0,t=this.ncomp;e<t;)for(var l,r=0,o=(l=this.comps[e++]).ssy;r<o;)for(var u=r++,h=0,c=l.ssx;h<c;)this.njDecodeBlock(l,(s*l.ssy+u)*l.stride+i*l.ssx+h++<<3);if(++i>=this.mbwidth&&(i=0,++s>=this.mbheight))break;0!=this.rstinterval&&0==--a&&(this.bufbits&=248,this.njShowBits(16),this.bufbits-=16,a=this.rstinterval,this.comps[0].dcpred=0,this.comps[1].dcpred=0,this.comps[2].dcpred=0)}},njUpsampleH:function(e){for(var t=e.width-3,n=new IA(new ArrayBuffer(e.width*e.height<<1)),i=n,s=e.pixels,a=0,l=0,r=0,o=e.height;r<o;){++r;for(var u=139*s.b[a]+-11*s.b[a+1]+64>>7,u=(i.b[l]=u<0?0:255<u?255:u,104*s.b[a]+27*s.b[a+1]+-3*s.b[a+2]+64>>7),u=(i.b[l+1]=u<0?0:255<u?255:u,28*s.b[a]+109*s.b[a+1]+-9*s.b[a+2]+64>>7),h=(i.b[l+2]=u<0?0:255<u?255:u,0);h<t;){var c=h++,_=-9*s.b[a+c]+111*s.b[a+c+1]+29*s.b[a+c+2]+-3*s.b[a+c+3]+64>>7,_=(i.b[l+(c<<1)+3]=_<0?0:255<_?255:_,-3*s.b[a+c]+29*s.b[a+c+1]+111*s.b[a+c+2]+-9*s.b[a+c+3]+64>>7);i.b[l+(c<<1)+4]=_<0?0:255<_?255:_}a+=e.stride,l+=e.width<<1;u=28*s.b[a-1]+109*s.b[a-2]+-9*s.b[a-3]+64>>7,u=(i.b[l-3]=u<0?0:255<u?255:u,104*s.b[a-1]+27*s.b[a-2]+-3*s.b[a-3]+64>>7),u=(i.b[l-2]=u<0?0:255<u?255:u,139*s.b[a-1]+-11*s.b[a-2]+64>>7);i.b[l-1]=u<0?0:255<u?255:u}e.width<<=1,e.stride=e.width,e.pixels=n},njUpsampleV:function(e){for(var t=e.width,n=e.stride,i=n+n,s=new IA(new ArrayBuffer(e.width*e.height<<1)),a=0,l=0,r=s,o=e.pixels,u=0;u<t;){for(var h=u++,l=h,a=h,c=139*o.b[a]+-11*o.b[a+n]+64>>7,c=(r.b[h]=c<0?0:255<c?255:c,104*o.b[a]+27*o.b[a+n]+-3*o.b[a+i]+64>>7),h=(r.b[l=h+t]=c<0?0:255<c?255:c,l+=t,28*o.b[a]+109*o.b[a+n]+-9*o.b[a+i]+64>>7),_=(r.b[l]=h<0?0:255<h?255:h,l+=t,a+=n,0),d=e.height-2;_<d;){++_;var p=-9*o.b[a-n]+111*o.b[a]+29*o.b[a+n]+-3*o.b[a+i]+64>>7,p=(r.b[l]=p<0?0:255<p?255:p,l+=t,-3*o.b[a-n]+29*o.b[a]+111*o.b[a+n]+-9*o.b[a+i]+64>>7);r.b[l]=p<0?0:255<p?255:p,l+=t,a+=n}a+=n;c=28*o.b[a]+109*o.b[a-n]+-9*o.b[a-i]+64>>7,h=(r.b[l]=c<0?0:255<c?255:c,l+=t,104*o.b[a]+27*o.b[a-n]+-3*o.b[a-i]+64>>7),c=(r.b[l]=h<0?0:255<h?255:h,l+=t,139*o.b[a]+-11*o.b[a-n]+64>>7);r.b[l]=c<0?0:255<c?255:c}e.height<<=1,e.stride=e.width,e.pixels=s},njUpsample:function(e){for(var t=0,n=0;e.width<this.width;)e.width<<=1,++t;for(;e.height<this.height;)e.height<<=1,++n;for(var i=new IA(new ArrayBuffer(e.width*e.height)),s=e.pixels,a=0,l=i,r=0,o=e.height;r<o;)for(var u=(r++>>n)*e.stride,h=0,c=e.width;h<c;)l.b[a++]=s.b[(h++>>t)+u];e.stride=e.width,e.pixels=i},njConvert:function(){for(var e=0,t=this.ncomp;e<t;){var n=this.comps[e++];switch(this.filter._hx_index){case 0:(n.width<this.width||n.height<this.height)&&this.njUpsample(n);break;case 1:for(;n.width<this.width||n.height<this.height;)n.width<this.width&&this.njUpsampleH(n),n.height<this.height&&this.njUpsampleV(n)}if(n.width<this.width||n.height<this.height)throw tl.thrown("assert")}var i=new IA(new ArrayBuffer(this.width*this.height*4));if(3!=this.ncomp)throw tl.thrown("TODO");for(var s=this.comps[0].pixels,a=this.comps[1].pixels,l=this.comps[2].pixels,r=i,o=0,u=0,h=0,c=0,e=0,t=this.height;e<t;){++e;for(var _=0,d=this.width;_<d;){++_;var p=s.b[o++]<<8,m=a.b[u++]-128,g=l.b[h++]-128,f=p+359*g+128>>8,g=p-88*m-183*g+128>>8,p=p+454*m+128>>8;r.b[c++]=p<0?0:255<p?255:p,r.b[c++]=g<0?0:255<g?255:g,r.b[c++]=f<0?0:255<f?255:f,r.b[c++]=255}o+=this.comps[0].stride-this.width,u+=this.comps[1].stride-this.width,h+=this.comps[2].stride-this.width}return i},njDecode:function(){if(this.size<2||255!=this.bytes.b[this.pos]||216!=this.bytes.b[this.pos+1])throw tl.thrown("This file is not a JPEG");this.pos+=2,this.size-=2,this.length-=2;e:for(;;)switch(this.pos+=2,this.size-=2,this.length-=2,this.bytes.b[this.pos+-1]){case 192:this.njDecodeSOF();break;case 194:if(this.progressive=!0,this.progressive)throw tl.thrown("Unsupported progressive JPG");null==this.vlctab[4]&&(this.vlctab[4]=new IA(new ArrayBuffer(131072))),null==this.vlctab[5]&&(this.vlctab[5]=new IA(new ArrayBuffer(131072))),null==this.vlctab[6]&&(this.vlctab[6]=new IA(new ArrayBuffer(131072))),null==this.vlctab[7]&&(this.vlctab[7]=new IA(new ArrayBuffer(131072))),this.njDecodeSOF();break;case 195:throw tl.thrown("Unsupported lossless JPG");case 196:this.njDecodeDHT();break;case 218:this.njDecodeScan();break e;case 219:this.njDecodeDQT();break;case 221:this.njDecodeDRI();break;case 254:this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;var e=this.length;this.pos+=e,this.size-=e,this.length-=e;break;default:switch(240&this.bytes.b[this.pos+-1]){case 192:throw tl.thrown("Unsupported jpeg type "+(15&this.bytes.b[this.pos+-1]));case 224:this.length=this.bytes.b[this.pos]<<8|this.bytes.b[this.pos+1],this.pos+=2,this.size-=2,this.length-=2;var t=this.length;this.pos+=t,this.size-=t,this.length-=t;break;default:throw tl.thrown("Unsupported jpeg tag 0x"+Ae.hex(this.bytes.b[this.pos+-1],2))}}var n=this.njConvert();return this.cleanup(),{pixels:n,width:this.width,height:this.height}},__class__:L0},function(e){this._states=new at,this._integration=e}),H0=((i["hxfsm.FSM"]=j0).__name__="hxfsm.FSM",j0.prototype={goto:function(e){var t=e.__name__.split(".").pop(),n=this._states.h[t],i=this._currentState;if(null==n)throw tl.thrown("Attempting to transtion to "+t+", but state has not been added.");return null==i?(this.transition(n,i),!0):-1!=i.transitions.indexOf(e)?(this.transition(n,i),i.set_instance(null),!0):(this._currentState.get_name(),!1)},transition:function(e,t){var n=this;this._integration.transition(e,t,function(e){n._currentState=e})},add:function(e,t){e=new Y0(e,t),t=e.get_name();if(null!=this._states.h[t])throw tl.thrown("Trying to add "+t+" several times. Only add states once!");this._states.h[t]=e},get__currentStateName:function(){return this._currentState.get_name()},__class__:j0,__properties__:{get__currentStateName:"get__currentStateName"}},function(e){this._fsm=e}),Y0=((i["hxfsm.FSMController"]=H0).__name__="hxfsm.FSMController",H0.prototype={goto:function(e,t,n){null==n&&(n=!0);var i=this;if(null!=t){var s=t();if(!s&&!n)return!1;if(!s)return SA.delay(function(){i.goto(e,t)},10),!0}return this._fsm.goto(e)},get_currentStateName:function(){return this._fsm.get__currentStateName()},__class__:H0,__properties__:{get_currentStateName:"get_currentStateName"}},function(e,t){this.stateClass=e,this.transitions=t}),Z0=((i["hxfsm.StateDef"]=Y0).__name__="hxfsm.StateDef",Y0.prototype={get_instance:function(){if(null==this._instance)throw tl.thrown("Attempting to get instance before it was set");return this._instance},set_instance:function(e){return this._instance=e,this._instance},get_name:function(){var e;return null==this._name&&(e=this.stateClass,this._name=e.__name__.split(".").pop()),this._name},__class__:Y0,__properties__:{get_name:"get_name",set_instance:"set_instance",get_instance:"get_instance"}},(i["hxfsm.integrations.IFSMIntegration"]=Sm).__name__="hxfsm.integrations.IFSMIntegration",Sm.__isInterface__=!0,Sm.prototype={__class__:Sm},function(e){this._injector=e}),X0=((i["hxfsm.integrations.injector.InjectorIntegration"]=Z0).__name__="hxfsm.integrations.injector.InjectorIntegration",Z0.__interfaces__=[Sm],Z0.prototype={transition:function(e,t,n){var i=this._injector.instantiateUnmapped(e.stateClass);e.set_instance(i),null!=t&&((t=t.get_instance()).exit(),this._injector.destroyInstance(t)),n(e),SA.delay(function(){i.enter()},0)},__class__:Z0},fe["hxsl.BufferKind"]={__ename__:!0,__constructs__:null,Uniform:{_hx_name:"Uniform",_hx_index:0,__enum__:"hxsl.BufferKind",toString:o},Storage:{_hx_name:"Storage",_hx_index:1,__enum__:"hxsl.BufferKind",toString:o},RW:{_hx_name:"RW",_hx_index:2,__enum__:"hxsl.BufferKind",toString:o},Partial:{_hx_name:"Partial",_hx_index:3,__enum__:"hxsl.BufferKind",toString:o},StoragePartial:{_hx_name:"StoragePartial",_hx_index:4,__enum__:"hxsl.BufferKind",toString:o},RWPartial:{_hx_name:"RWPartial",_hx_index:5,__enum__:"hxsl.BufferKind",toString:o}}),q0=(X0.__constructs__=[X0.Uniform,X0.Storage,X0.RW,X0.Partial,X0.StoragePartial,X0.RWPartial],X0.__empty_constructs__=[X0.Uniform,X0.Storage,X0.RW,X0.Partial,X0.StoragePartial,X0.RWPartial],fe["hxsl.TexDimension"]={__ename__:!0,__constructs__:null,T1D:{_hx_name:"T1D",_hx_index:0,__enum__:"hxsl.TexDimension",toString:o},T2D:{_hx_name:"T2D",_hx_index:1,__enum__:"hxsl.TexDimension",toString:o},T3D:{_hx_name:"T3D",_hx_index:2,__enum__:"hxsl.TexDimension",toString:o},TCube:{_hx_name:"TCube",_hx_index:3,__enum__:"hxsl.TexDimension",toString:o}}),Le=(q0.__constructs__=[q0.T1D,q0.T2D,q0.T3D,q0.TCube],q0.__empty_constructs__=[q0.T1D,q0.T2D,q0.T3D,q0.TCube],fe["hxsl.Type"]={__ename__:!0,__constructs__:null,TVoid:{_hx_name:"TVoid",_hx_index:0,__enum__:"hxsl.Type",toString:o},TInt:{_hx_name:"TInt",_hx_index:1,__enum__:"hxsl.Type",toString:o},TBool:{_hx_name:"TBool",_hx_index:2,__enum__:"hxsl.Type",toString:o},TFloat:{_hx_name:"TFloat",_hx_index:3,__enum__:"hxsl.Type",toString:o},TString:{_hx_name:"TString",_hx_index:4,__enum__:"hxsl.Type",toString:o},TVec:((R=function(e,t){return{_hx_index:5,size:e,t:t,__enum__:"hxsl.Type",toString:o}})._hx_name="TVec",R.__params__=["size","t"],R),TMat3:{_hx_name:"TMat3",_hx_index:6,__enum__:"hxsl.Type",toString:o},TMat4:{_hx_name:"TMat4",_hx_index:7,__enum__:"hxsl.Type",toString:o},TMat3x4:{_hx_name:"TMat3x4",_hx_index:8,__enum__:"hxsl.Type",toString:o},TBytes:((R=function(e){return{_hx_index:9,size:e,__enum__:"hxsl.Type",toString:o}})._hx_name="TBytes",R.__params__=["size"],R),TSampler:((R=function(e,t){return{_hx_index:10,dim:e,isArray:t,__enum__:"hxsl.Type",toString:o}})._hx_name="TSampler",R.__params__=["dim","isArray"],R),TRWTexture:((R=function(e,t,n){return{_hx_index:11,dim:e,isArray:t,channels:n,__enum__:"hxsl.Type",toString:o}})._hx_name="TRWTexture",R.__params__=["dim","isArray","channels"],R),TMat2:{_hx_name:"TMat2",_hx_index:12,__enum__:"hxsl.Type",toString:o},TStruct:((R=function(e){return{_hx_index:13,vl:e,__enum__:"hxsl.Type",toString:o}})._hx_name="TStruct",R.__params__=["vl"],R),TFun:((R=function(e){return{_hx_index:14,variants:e,__enum__:"hxsl.Type",toString:o}})._hx_name="TFun",R.__params__=["variants"],R),TArray:((R=function(e,t){return{_hx_index:15,t:e,size:t,__enum__:"hxsl.Type",toString:o}})._hx_name="TArray",R.__params__=["t","size"],R),TBuffer:((R=function(e,t,n){return{_hx_index:16,t:e,size:t,kind:n,__enum__:"hxsl.Type",toString:o}})._hx_name="TBuffer",R.__params__=["t","size","kind"],R),TChannel:((R=function(e){return{_hx_index:17,size:e,__enum__:"hxsl.Type",toString:o}})._hx_name="TChannel",R.__params__=["size"],R)}),K0=(Le.__constructs__=[Le.TVoid,Le.TInt,Le.TBool,Le.TFloat,Le.TString,Le.TVec,Le.TMat3,Le.TMat4,Le.TMat3x4,Le.TBytes,Le.TSampler,Le.TRWTexture,Le.TMat2,Le.TStruct,Le.TFun,Le.TArray,Le.TBuffer,Le.TChannel],Le.__empty_constructs__=[Le.TVoid,Le.TInt,Le.TBool,Le.TFloat,Le.TString,Le.TMat3,Le.TMat4,Le.TMat3x4,Le.TMat2],fe["hxsl.VecType"]={__ename__:!0,__constructs__:null,VInt:{_hx_name:"VInt",_hx_index:0,__enum__:"hxsl.VecType",toString:o},VFloat:{_hx_name:"VFloat",_hx_index:1,__enum__:"hxsl.VecType",toString:o},VBool:{_hx_name:"VBool",_hx_index:2,__enum__:"hxsl.VecType",toString:o}}),J0=(K0.__constructs__=[K0.VInt,K0.VFloat,K0.VBool],K0.__empty_constructs__=[K0.VInt,K0.VFloat,K0.VBool],fe["hxsl.SizeDecl"]={__ename__:!0,__constructs__:null,SConst:((R=function(e){return{_hx_index:0,v:e,__enum__:"hxsl.SizeDecl",toString:o}})._hx_name="SConst",R.__params__=["v"],R),SVar:((R=function(e){return{_hx_index:1,v:e,__enum__:"hxsl.SizeDecl",toString:o}})._hx_name="SVar",R.__params__=["v"],R)}),$0=(J0.__constructs__=[J0.SConst,J0.SVar],J0.__empty_constructs__=[],(i["hxsl.Error"]=km).__name__="hxsl.Error",km.t=function(e,t){throw tl.thrown(new km(e,t))},km.prototype={toString:function(){return"Error("+this.msg+")@"+el.string(this.pos)},__class__:km},fe["hxsl.VarKind"]={__ename__:!0,__constructs__:null,Global:{_hx_name:"Global",_hx_index:0,__enum__:"hxsl.VarKind",toString:o},Input:{_hx_name:"Input",_hx_index:1,__enum__:"hxsl.VarKind",toString:o},Param:{_hx_name:"Param",_hx_index:2,__enum__:"hxsl.VarKind",toString:o},Var:{_hx_name:"Var",_hx_index:3,__enum__:"hxsl.VarKind",toString:o},Local:{_hx_name:"Local",_hx_index:4,__enum__:"hxsl.VarKind",toString:o},Output:{_hx_name:"Output",_hx_index:5,__enum__:"hxsl.VarKind",toString:o},Function:{_hx_name:"Function",_hx_index:6,__enum__:"hxsl.VarKind",toString:o}}),ew=($0.__constructs__=[$0.Global,$0.Input,$0.Param,$0.Var,$0.Local,$0.Output,$0.Function],$0.__empty_constructs__=[$0.Global,$0.Input,$0.Param,$0.Var,$0.Local,$0.Output,$0.Function],fe["hxsl.VarQualifier"]={__ename__:!0,__constructs__:null,Const:((R=function(e){return{_hx_index:0,max:e,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="Const",R.__params__=["max"],R),Private:{_hx_name:"Private",_hx_index:1,__enum__:"hxsl.VarQualifier",toString:o},Nullable:{_hx_name:"Nullable",_hx_index:2,__enum__:"hxsl.VarQualifier",toString:o},PerObject:{_hx_name:"PerObject",_hx_index:3,__enum__:"hxsl.VarQualifier",toString:o},Name:((R=function(e){return{_hx_index:4,n:e,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="Name",R.__params__=["n"],R),Shared:{_hx_name:"Shared",_hx_index:5,__enum__:"hxsl.VarQualifier",toString:o},Precision:((R=function(e){return{_hx_index:6,p:e,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="Precision",R.__params__=["p"],R),Range:((R=function(e,t){return{_hx_index:7,min:e,max:t,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="Range",R.__params__=["min","max"],R),Ignore:{_hx_name:"Ignore",_hx_index:8,__enum__:"hxsl.VarQualifier",toString:o},PerInstance:((R=function(e){return{_hx_index:9,v:e,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="PerInstance",R.__params__=["v"],R),Doc:((R=function(e){return{_hx_index:10,s:e,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="Doc",R.__params__=["s"],R),Borrow:((R=function(e){return{_hx_index:11,source:e,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="Borrow",R.__params__=["source"],R),Sampler:((R=function(e){return{_hx_index:12,name:e,__enum__:"hxsl.VarQualifier",toString:o}})._hx_name="Sampler",R.__params__=["name"],R),Final:{_hx_name:"Final",_hx_index:13,__enum__:"hxsl.VarQualifier",toString:o},Flat:{_hx_name:"Flat",_hx_index:14,__enum__:"hxsl.VarQualifier",toString:o}}),tw=(ew.__constructs__=[ew.Const,ew.Private,ew.Nullable,ew.PerObject,ew.Name,ew.Shared,ew.Precision,ew.Range,ew.Ignore,ew.PerInstance,ew.Doc,ew.Borrow,ew.Sampler,ew.Final,ew.Flat],ew.__empty_constructs__=[ew.Private,ew.Nullable,ew.PerObject,ew.Shared,ew.Ignore,ew.Final,ew.Flat],fe["hxsl.Prec"]={__ename__:!0,__constructs__:null,Low:{_hx_name:"Low",_hx_index:0,__enum__:"hxsl.Prec",toString:o},Medium:{_hx_name:"Medium",_hx_index:1,__enum__:"hxsl.Prec",toString:o},High:{_hx_name:"High",_hx_index:2,__enum__:"hxsl.Prec",toString:o}}),L=(tw.__constructs__=[tw.Low,tw.Medium,tw.High],tw.__empty_constructs__=[tw.Low,tw.Medium,tw.High],fe["hxsl.Const"]={__ename__:!0,__constructs__:null,CNull:{_hx_name:"CNull",_hx_index:0,__enum__:"hxsl.Const",toString:o},CBool:((R=function(e){return{_hx_index:1,b:e,__enum__:"hxsl.Const",toString:o}})._hx_name="CBool",R.__params__=["b"],R),CInt:((R=function(e){return{_hx_index:2,v:e,__enum__:"hxsl.Const",toString:o}})._hx_name="CInt",R.__params__=["v"],R),CFloat:((R=function(e){return{_hx_index:3,v:e,__enum__:"hxsl.Const",toString:o}})._hx_name="CFloat",R.__params__=["v"],R),CString:((R=function(e){return{_hx_index:4,v:e,__enum__:"hxsl.Const",toString:o}})._hx_name="CString",R.__params__=["v"],R)}),nw=(L.__constructs__=[L.CNull,L.CBool,L.CInt,L.CFloat,L.CString],L.__empty_constructs__=[L.CNull],fe["hxsl.ExprDef"]={__ename__:!0,__constructs__:null,EConst:((R=function(e){return{_hx_index:0,c:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EConst",R.__params__=["c"],R),EIdent:((R=function(e){return{_hx_index:1,i:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EIdent",R.__params__=["i"],R),EParenthesis:((R=function(e){return{_hx_index:2,e:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EParenthesis",R.__params__=["e"],R),EField:((R=function(e,t){return{_hx_index:3,e:e,f:t,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EField",R.__params__=["e","f"],R),EBinop:((R=function(e,t,n){return{_hx_index:4,op:e,e1:t,e2:n,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EBinop",R.__params__=["op","e1","e2"],R),EUnop:((R=function(e,t){return{_hx_index:5,op:e,e1:t,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EUnop",R.__params__=["op","e1"],R),ECall:((R=function(e,t){return{_hx_index:6,e:e,args:t,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="ECall",R.__params__=["e","args"],R),EBlock:((R=function(e){return{_hx_index:7,el:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EBlock",R.__params__=["el"],R),EVars:((R=function(e){return{_hx_index:8,v:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EVars",R.__params__=["v"],R),EFunction:((R=function(e){return{_hx_index:9,f:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EFunction",R.__params__=["f"],R),EIf:((R=function(e,t,n){return{_hx_index:10,econd:e,eif:t,eelse:n,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EIf",R.__params__=["econd","eif","eelse"],R),EDiscard:{_hx_name:"EDiscard",_hx_index:11,__enum__:"hxsl.ExprDef",toString:o},EFor:((R=function(e,t,n){return{_hx_index:12,v:e,loop:t,block:n,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EFor",R.__params__=["v","loop","block"],R),EReturn:((R=function(e){return{_hx_index:13,e:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EReturn",R.__params__=["e"],R),EBreak:{_hx_name:"EBreak",_hx_index:14,__enum__:"hxsl.ExprDef",toString:o},EContinue:{_hx_name:"EContinue",_hx_index:15,__enum__:"hxsl.ExprDef",toString:o},EArray:((R=function(e,t){return{_hx_index:16,e:e,eindex:t,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EArray",R.__params__=["e","eindex"],R),EArrayDecl:((R=function(e){return{_hx_index:17,el:e,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EArrayDecl",R.__params__=["el"],R),ESwitch:((R=function(e,t,n){return{_hx_index:18,e:e,cases:t,def:n,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="ESwitch",R.__params__=["e","cases","def"],R),EWhile:((R=function(e,t,n){return{_hx_index:19,cond:e,loop:t,normalWhile:n,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EWhile",R.__params__=["cond","loop","normalWhile"],R),EMeta:((R=function(e,t,n){return{_hx_index:20,name:e,args:t,e:n,__enum__:"hxsl.ExprDef",toString:o}})._hx_name="EMeta",R.__params__=["name","args","e"],R)}),j=(nw.__constructs__=[nw.EConst,nw.EIdent,nw.EParenthesis,nw.EField,nw.EBinop,nw.EUnop,nw.ECall,nw.EBlock,nw.EVars,nw.EFunction,nw.EIf,nw.EDiscard,nw.EFor,nw.EReturn,nw.EBreak,nw.EContinue,nw.EArray,nw.EArrayDecl,nw.ESwitch,nw.EWhile,nw.EMeta],nw.__empty_constructs__=[nw.EDiscard,nw.EBreak,nw.EContinue],fe["hxsl.TExprDef"]={__ename__:!0,__constructs__:null,TConst:((R=function(e){return{_hx_index:0,c:e,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TConst",R.__params__=["c"],R),TVar:((R=function(e){return{_hx_index:1,v:e,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TVar",R.__params__=["v"],R),TGlobal:((R=function(e){return{_hx_index:2,g:e,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TGlobal",R.__params__=["g"],R),TParenthesis:((R=function(e){return{_hx_index:3,e:e,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TParenthesis",R.__params__=["e"],R),TBlock:((R=function(e){return{_hx_index:4,el:e,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TBlock",R.__params__=["el"],R),TBinop:((R=function(e,t,n){return{_hx_index:5,op:e,e1:t,e2:n,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TBinop",R.__params__=["op","e1","e2"],R),TUnop:((R=function(e,t){return{_hx_index:6,op:e,e1:t,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TUnop",R.__params__=["op","e1"],R),TVarDecl:((R=function(e,t){return{_hx_index:7,v:e,init:t,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TVarDecl",R.__params__=["v","init"],R),TCall:((R=function(e,t){return{_hx_index:8,e:e,args:t,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TCall",R.__params__=["e","args"],R),TSwiz:((R=function(e,t){return{_hx_index:9,e:e,regs:t,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TSwiz",R.__params__=["e","regs"],R),TIf:((R=function(e,t,n){return{_hx_index:10,econd:e,eif:t,eelse:n,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TIf",R.__params__=["econd","eif","eelse"],R),TDiscard:{_hx_name:"TDiscard",_hx_index:11,__enum__:"hxsl.TExprDef",toString:o},TReturn:((R=function(e){return{_hx_index:12,e:e,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TReturn",R.__params__=["e"],R),TFor:((R=function(e,t,n){return{_hx_index:13,v:e,it:t,loop:n,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TFor",R.__params__=["v","it","loop"],R),TContinue:{_hx_name:"TContinue",_hx_index:14,__enum__:"hxsl.TExprDef",toString:o},TBreak:{_hx_name:"TBreak",_hx_index:15,__enum__:"hxsl.TExprDef",toString:o},TArray:((R=function(e,t){return{_hx_index:16,e:e,index:t,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TArray",R.__params__=["e","index"],R),TArrayDecl:((R=function(e){return{_hx_index:17,el:e,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TArrayDecl",R.__params__=["el"],R),TSwitch:((R=function(e,t,n){return{_hx_index:18,e:e,cases:t,def:n,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TSwitch",R.__params__=["e","cases","def"],R),TWhile:((R=function(e,t,n){return{_hx_index:19,e:e,loop:t,normalWhile:n,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TWhile",R.__params__=["e","loop","normalWhile"],R),TMeta:((R=function(e,t,n){return{_hx_index:20,m:e,args:t,e:n,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TMeta",R.__params__=["m","args","e"],R),TField:((R=function(e,t){return{_hx_index:21,e:e,name:t,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TField",R.__params__=["e","name"],R),TSyntax:((R=function(e,t,n){return{_hx_index:22,target:e,code:t,args:n,__enum__:"hxsl.TExprDef",toString:o}})._hx_name="TSyntax",R.__params__=["target","code","args"],R)}),iw=(j.__constructs__=[j.TConst,j.TVar,j.TGlobal,j.TParenthesis,j.TBlock,j.TBinop,j.TUnop,j.TVarDecl,j.TCall,j.TSwiz,j.TIf,j.TDiscard,j.TReturn,j.TFor,j.TContinue,j.TBreak,j.TArray,j.TArrayDecl,j.TSwitch,j.TWhile,j.TMeta,j.TField,j.TSyntax],j.__empty_constructs__=[j.TDiscard,j.TContinue,j.TBreak],fe["hxsl.FunctionKind"]={__ename__:!0,__constructs__:null,Vertex:{_hx_name:"Vertex",_hx_index:0,__enum__:"hxsl.FunctionKind",toString:o},Fragment:{_hx_name:"Fragment",_hx_index:1,__enum__:"hxsl.FunctionKind",toString:o},Init:{_hx_name:"Init",_hx_index:2,__enum__:"hxsl.FunctionKind",toString:o},Helper:{_hx_name:"Helper",_hx_index:3,__enum__:"hxsl.FunctionKind",toString:o},Main:{_hx_name:"Main",_hx_index:4,__enum__:"hxsl.FunctionKind",toString:o}}),xe=(iw.__constructs__=[iw.Vertex,iw.Fragment,iw.Init,iw.Helper,iw.Main],iw.__empty_constructs__=[iw.Vertex,iw.Fragment,iw.Init,iw.Helper,iw.Main],fe["hxsl.TGlobal"]={__ename__:!0,__constructs__:null,Radians:{_hx_name:"Radians",_hx_index:0,__enum__:"hxsl.TGlobal",toString:o},Degrees:{_hx_name:"Degrees",_hx_index:1,__enum__:"hxsl.TGlobal",toString:o},Sin:{_hx_name:"Sin",_hx_index:2,__enum__:"hxsl.TGlobal",toString:o},Cos:{_hx_name:"Cos",_hx_index:3,__enum__:"hxsl.TGlobal",toString:o},Tan:{_hx_name:"Tan",_hx_index:4,__enum__:"hxsl.TGlobal",toString:o},Asin:{_hx_name:"Asin",_hx_index:5,__enum__:"hxsl.TGlobal",toString:o},Acos:{_hx_name:"Acos",_hx_index:6,__enum__:"hxsl.TGlobal",toString:o},Atan:{_hx_name:"Atan",_hx_index:7,__enum__:"hxsl.TGlobal",toString:o},Pow:{_hx_name:"Pow",_hx_index:8,__enum__:"hxsl.TGlobal",toString:o},Exp:{_hx_name:"Exp",_hx_index:9,__enum__:"hxsl.TGlobal",toString:o},Log:{_hx_name:"Log",_hx_index:10,__enum__:"hxsl.TGlobal",toString:o},Exp2:{_hx_name:"Exp2",_hx_index:11,__enum__:"hxsl.TGlobal",toString:o},Log2:{_hx_name:"Log2",_hx_index:12,__enum__:"hxsl.TGlobal",toString:o},Sqrt:{_hx_name:"Sqrt",_hx_index:13,__enum__:"hxsl.TGlobal",toString:o},Inversesqrt:{_hx_name:"Inversesqrt",_hx_index:14,__enum__:"hxsl.TGlobal",toString:o},Abs:{_hx_name:"Abs",_hx_index:15,__enum__:"hxsl.TGlobal",toString:o},Sign:{_hx_name:"Sign",_hx_index:16,__enum__:"hxsl.TGlobal",toString:o},Floor:{_hx_name:"Floor",_hx_index:17,__enum__:"hxsl.TGlobal",toString:o},Ceil:{_hx_name:"Ceil",_hx_index:18,__enum__:"hxsl.TGlobal",toString:o},Fract:{_hx_name:"Fract",_hx_index:19,__enum__:"hxsl.TGlobal",toString:o},Mod:{_hx_name:"Mod",_hx_index:20,__enum__:"hxsl.TGlobal",toString:o},Min:{_hx_name:"Min",_hx_index:21,__enum__:"hxsl.TGlobal",toString:o},Max:{_hx_name:"Max",_hx_index:22,__enum__:"hxsl.TGlobal",toString:o},Clamp:{_hx_name:"Clamp",_hx_index:23,__enum__:"hxsl.TGlobal",toString:o},Mix:{_hx_name:"Mix",_hx_index:24,__enum__:"hxsl.TGlobal",toString:o},InvLerp:{_hx_name:"InvLerp",_hx_index:25,__enum__:"hxsl.TGlobal",toString:o},Step:{_hx_name:"Step",_hx_index:26,__enum__:"hxsl.TGlobal",toString:o},Smoothstep:{_hx_name:"Smoothstep",_hx_index:27,__enum__:"hxsl.TGlobal",toString:o},Length:{_hx_name:"Length",_hx_index:28,__enum__:"hxsl.TGlobal",toString:o},Distance:{_hx_name:"Distance",_hx_index:29,__enum__:"hxsl.TGlobal",toString:o},Dot:{_hx_name:"Dot",_hx_index:30,__enum__:"hxsl.TGlobal",toString:o},Cross:{_hx_name:"Cross",_hx_index:31,__enum__:"hxsl.TGlobal",toString:o},Normalize:{_hx_name:"Normalize",_hx_index:32,__enum__:"hxsl.TGlobal",toString:o},LReflect:{_hx_name:"LReflect",_hx_index:33,__enum__:"hxsl.TGlobal",toString:o},Texture:{_hx_name:"Texture",_hx_index:34,__enum__:"hxsl.TGlobal",toString:o},TextureLod:{_hx_name:"TextureLod",_hx_index:35,__enum__:"hxsl.TGlobal",toString:o},Texel:{_hx_name:"Texel",_hx_index:36,__enum__:"hxsl.TGlobal",toString:o},TextureSize:{_hx_name:"TextureSize",_hx_index:37,__enum__:"hxsl.TGlobal",toString:o},ToInt:{_hx_name:"ToInt",_hx_index:38,__enum__:"hxsl.TGlobal",toString:o},ToFloat:{_hx_name:"ToFloat",_hx_index:39,__enum__:"hxsl.TGlobal",toString:o},ToBool:{_hx_name:"ToBool",_hx_index:40,__enum__:"hxsl.TGlobal",toString:o},Vec2:{_hx_name:"Vec2",_hx_index:41,__enum__:"hxsl.TGlobal",toString:o},Vec3:{_hx_name:"Vec3",_hx_index:42,__enum__:"hxsl.TGlobal",toString:o},Vec4:{_hx_name:"Vec4",_hx_index:43,__enum__:"hxsl.TGlobal",toString:o},IVec2:{_hx_name:"IVec2",_hx_index:44,__enum__:"hxsl.TGlobal",toString:o},IVec3:{_hx_name:"IVec3",_hx_index:45,__enum__:"hxsl.TGlobal",toString:o},IVec4:{_hx_name:"IVec4",_hx_index:46,__enum__:"hxsl.TGlobal",toString:o},BVec2:{_hx_name:"BVec2",_hx_index:47,__enum__:"hxsl.TGlobal",toString:o},BVec3:{_hx_name:"BVec3",_hx_index:48,__enum__:"hxsl.TGlobal",toString:o},BVec4:{_hx_name:"BVec4",_hx_index:49,__enum__:"hxsl.TGlobal",toString:o},Mat2:{_hx_name:"Mat2",_hx_index:50,__enum__:"hxsl.TGlobal",toString:o},Mat3:{_hx_name:"Mat3",_hx_index:51,__enum__:"hxsl.TGlobal",toString:o},Mat4:{_hx_name:"Mat4",_hx_index:52,__enum__:"hxsl.TGlobal",toString:o},Mat3x4:{_hx_name:"Mat3x4",_hx_index:53,__enum__:"hxsl.TGlobal",toString:o},Saturate:{_hx_name:"Saturate",_hx_index:54,__enum__:"hxsl.TGlobal",toString:o},Pack:{_hx_name:"Pack",_hx_index:55,__enum__:"hxsl.TGlobal",toString:o},Unpack:{_hx_name:"Unpack",_hx_index:56,__enum__:"hxsl.TGlobal",toString:o},PackNormal:{_hx_name:"PackNormal",_hx_index:57,__enum__:"hxsl.TGlobal",toString:o},UnpackNormal:{_hx_name:"UnpackNormal",_hx_index:58,__enum__:"hxsl.TGlobal",toString:o},ScreenToUv:{_hx_name:"ScreenToUv",_hx_index:59,__enum__:"hxsl.TGlobal",toString:o},UvToScreen:{_hx_name:"UvToScreen",_hx_index:60,__enum__:"hxsl.TGlobal",toString:o},DFdx:{_hx_name:"DFdx",_hx_index:61,__enum__:"hxsl.TGlobal",toString:o},DFdy:{_hx_name:"DFdy",_hx_index:62,__enum__:"hxsl.TGlobal",toString:o},Fwidth:{_hx_name:"Fwidth",_hx_index:63,__enum__:"hxsl.TGlobal",toString:o},ChannelRead:{_hx_name:"ChannelRead",_hx_index:64,__enum__:"hxsl.TGlobal",toString:o},ChannelReadLod:{_hx_name:"ChannelReadLod",_hx_index:65,__enum__:"hxsl.TGlobal",toString:o},ChannelFetch:{_hx_name:"ChannelFetch",_hx_index:66,__enum__:"hxsl.TGlobal",toString:o},ChannelTextureSize:{_hx_name:"ChannelTextureSize",_hx_index:67,__enum__:"hxsl.TGlobal",toString:o},Trace:{_hx_name:"Trace",_hx_index:68,__enum__:"hxsl.TGlobal",toString:o},VertexID:{_hx_name:"VertexID",_hx_index:69,__enum__:"hxsl.TGlobal",toString:o},InstanceID:{_hx_name:"InstanceID",_hx_index:70,__enum__:"hxsl.TGlobal",toString:o},FragCoord:{_hx_name:"FragCoord",_hx_index:71,__enum__:"hxsl.TGlobal",toString:o},FragDepth:{_hx_name:"FragDepth",_hx_index:72,__enum__:"hxsl.TGlobal",toString:o},FrontFacing:{_hx_name:"FrontFacing",_hx_index:73,__enum__:"hxsl.TGlobal",toString:o},FloatBitsToInt:{_hx_name:"FloatBitsToInt",_hx_index:74,__enum__:"hxsl.TGlobal",toString:o},FloatBitsToUint:{_hx_name:"FloatBitsToUint",_hx_index:75,__enum__:"hxsl.TGlobal",toString:o},IntBitsToFloat:{_hx_name:"IntBitsToFloat",_hx_index:76,__enum__:"hxsl.TGlobal",toString:o},UintBitsToFloat:{_hx_name:"UintBitsToFloat",_hx_index:77,__enum__:"hxsl.TGlobal",toString:o},RoundEven:{_hx_name:"RoundEven",_hx_index:78,__enum__:"hxsl.TGlobal",toString:o},SetLayout:{_hx_name:"SetLayout",_hx_index:79,__enum__:"hxsl.TGlobal",toString:o},ImageStore:{_hx_name:"ImageStore",_hx_index:80,__enum__:"hxsl.TGlobal",toString:o},ComputeVar_GlobalInvocation:{_hx_name:"ComputeVar_GlobalInvocation",_hx_index:81,__enum__:"hxsl.TGlobal",toString:o},ComputeVar_LocalInvocation:{_hx_name:"ComputeVar_LocalInvocation",_hx_index:82,__enum__:"hxsl.TGlobal",toString:o},ComputeVar_WorkGroup:{_hx_name:"ComputeVar_WorkGroup",_hx_index:83,__enum__:"hxsl.TGlobal",toString:o},ComputeVar_LocalInvocationIndex:{_hx_name:"ComputeVar_LocalInvocationIndex",_hx_index:84,__enum__:"hxsl.TGlobal",toString:o},AtomicAdd:{_hx_name:"AtomicAdd",_hx_index:85,__enum__:"hxsl.TGlobal",toString:o},GroupMemoryBarrier:{_hx_name:"GroupMemoryBarrier",_hx_index:86,__enum__:"hxsl.TGlobal",toString:o},UnpackSnorm4x8:{_hx_name:"UnpackSnorm4x8",_hx_index:87,__enum__:"hxsl.TGlobal",toString:o},UnpackUnorm4x8:{_hx_name:"UnpackUnorm4x8",_hx_index:88,__enum__:"hxsl.TGlobal",toString:o},Transpose:{_hx_name:"Transpose",_hx_index:89,__enum__:"hxsl.TGlobal",toString:o}}),sw=(xe.__constructs__=[xe.Radians,xe.Degrees,xe.Sin,xe.Cos,xe.Tan,xe.Asin,xe.Acos,xe.Atan,xe.Pow,xe.Exp,xe.Log,xe.Exp2,xe.Log2,xe.Sqrt,xe.Inversesqrt,xe.Abs,xe.Sign,xe.Floor,xe.Ceil,xe.Fract,xe.Mod,xe.Min,xe.Max,xe.Clamp,xe.Mix,xe.InvLerp,xe.Step,xe.Smoothstep,xe.Length,xe.Distance,xe.Dot,xe.Cross,xe.Normalize,xe.LReflect,xe.Texture,xe.TextureLod,xe.Texel,xe.TextureSize,xe.ToInt,xe.ToFloat,xe.ToBool,xe.Vec2,xe.Vec3,xe.Vec4,xe.IVec2,xe.IVec3,xe.IVec4,xe.BVec2,xe.BVec3,xe.BVec4,xe.Mat2,xe.Mat3,xe.Mat4,xe.Mat3x4,xe.Saturate,xe.Pack,xe.Unpack,xe.PackNormal,xe.UnpackNormal,xe.ScreenToUv,xe.UvToScreen,xe.DFdx,xe.DFdy,xe.Fwidth,xe.ChannelRead,xe.ChannelReadLod,xe.ChannelFetch,xe.ChannelTextureSize,xe.Trace,xe.VertexID,xe.InstanceID,xe.FragCoord,xe.FragDepth,xe.FrontFacing,xe.FloatBitsToInt,xe.FloatBitsToUint,xe.IntBitsToFloat,xe.UintBitsToFloat,xe.RoundEven,xe.SetLayout,xe.ImageStore,xe.ComputeVar_GlobalInvocation,xe.ComputeVar_LocalInvocation,xe.ComputeVar_WorkGroup,xe.ComputeVar_LocalInvocationIndex,xe.AtomicAdd,xe.GroupMemoryBarrier,xe.UnpackSnorm4x8,xe.UnpackUnorm4x8,xe.Transpose],xe.__empty_constructs__=[xe.Radians,xe.Degrees,xe.Sin,xe.Cos,xe.Tan,xe.Asin,xe.Acos,xe.Atan,xe.Pow,xe.Exp,xe.Log,xe.Exp2,xe.Log2,xe.Sqrt,xe.Inversesqrt,xe.Abs,xe.Sign,xe.Floor,xe.Ceil,xe.Fract,xe.Mod,xe.Min,xe.Max,xe.Clamp,xe.Mix,xe.InvLerp,xe.Step,xe.Smoothstep,xe.Length,xe.Distance,xe.Dot,xe.Cross,xe.Normalize,xe.LReflect,xe.Texture,xe.TextureLod,xe.Texel,xe.TextureSize,xe.ToInt,xe.ToFloat,xe.ToBool,xe.Vec2,xe.Vec3,xe.Vec4,xe.IVec2,xe.IVec3,xe.IVec4,xe.BVec2,xe.BVec3,xe.BVec4,xe.Mat2,xe.Mat3,xe.Mat4,xe.Mat3x4,xe.Saturate,xe.Pack,xe.Unpack,xe.PackNormal,xe.UnpackNormal,xe.ScreenToUv,xe.UvToScreen,xe.DFdx,xe.DFdy,xe.Fwidth,xe.ChannelRead,xe.ChannelReadLod,xe.ChannelFetch,xe.ChannelTextureSize,xe.Trace,xe.VertexID,xe.InstanceID,xe.FragCoord,xe.FragDepth,xe.FrontFacing,xe.FloatBitsToInt,xe.FloatBitsToUint,xe.IntBitsToFloat,xe.UintBitsToFloat,xe.RoundEven,xe.SetLayout,xe.ImageStore,xe.ComputeVar_GlobalInvocation,xe.ComputeVar_LocalInvocation,xe.ComputeVar_WorkGroup,xe.ComputeVar_LocalInvocationIndex,xe.AtomicAdd,xe.GroupMemoryBarrier,xe.UnpackSnorm4x8,xe.UnpackUnorm4x8,xe.Transpose],fe["hxsl.SyntaxArgAccess"]={__ename__:!0,__constructs__:null,Read:{_hx_name:"Read",_hx_index:0,__enum__:"hxsl.SyntaxArgAccess",toString:o},Write:{_hx_name:"Write",_hx_index:1,__enum__:"hxsl.SyntaxArgAccess",toString:o},ReadWrite:{_hx_name:"ReadWrite",_hx_index:2,__enum__:"hxsl.SyntaxArgAccess",toString:o}}),aw=(sw.__constructs__=[sw.Read,sw.Write,sw.ReadWrite],sw.__empty_constructs__=[sw.Read,sw.Write,sw.ReadWrite],fe["hxsl.Component"]={__ename__:!0,__constructs__:null,X:{_hx_name:"X",_hx_index:0,__enum__:"hxsl.Component",toString:o},Y:{_hx_name:"Y",_hx_index:1,__enum__:"hxsl.Component",toString:o},Z:{_hx_name:"Z",_hx_index:2,__enum__:"hxsl.Component",toString:o},W:{_hx_name:"W",_hx_index:3,__enum__:"hxsl.Component",toString:o}}),lw=(aw.__constructs__=[aw.X,aw.Y,aw.Z,aw.W],aw.__empty_constructs__=[aw.X,aw.Y,aw.Z,aw.W],(i["hxsl.Tools"]=Ue).__name__="hxsl.Tools",Ue.allocVarId=function(){return++Ue.UID},Ue.getDimSize=function(e,t){var n;switch(null==t&&(t=!1),e._hx_index){case 0:n=1;break;case 2:n=3;break;case 1:case 3:n=2}return t&&++n,n},Ue.getName=function(e){if(null!=e.qualifiers)for(var t=0,n=e.qualifiers;t<n.length;){var i=n[t];if(++t,4==i._hx_index)return i.n}return e.name},Ue.getConstBits=function(e){var t=e.type;switch(t._hx_index){case 1:for(var n=0,i=e.qualifiers;n<i.length;){var s=i[n];if(++n,0==s._hx_index){var a=s.max;if(null==a)return 8;for(var l=0;1<<l<=a;)++l;return l}}break;case 2:return 1;case 16:switch(t.kind._hx_index){case 3:case 4:case 5:return Ue.MAX_PARTIAL_MAPPINGS_BITS}break;case 17:return 3+Ue.MAX_CHANNELS_BITS}return 0},Ue.isConst=function(e){var t;switch((n=e.type)._hx_index){case 16:switch(n.kind._hx_index){case 3:case 4:case 5:t=!0;break;default:t=!1}break;case 17:t=!0;break;default:t=!1}if(t)return!0;if(null!=e.qualifiers)for(var n=0,i=e.qualifiers;n<i.length;)if(0==i[n++]._hx_index)return!0;return!1},Ue.isStruct=function(e){return 13==e.type._hx_index},Ue.hasQualifier=function(e,t){if(null!=e.qualifiers)for(var n=0,i=e.qualifiers;n<i.length;)if(i[n++]==t)return!0;return!1},Ue.hasBorrowQualifier=function(e,t){if(null!=e.qualifiers)for(var n=0,i=e.qualifiers;n<i.length;){var s=i[n];if(++n,11==s._hx_index)return t==s.source}return!1},Ue.isTexture=function(e){switch(e._hx_index){case 10:case 11:case 17:return!0;default:return!1}},Ue.toString=function(e){switch(e._hx_index){case 5:var t=e.size;switch(e.t._hx_index){case 0:l="i";break;case 1:l="";break;case 2:l="b"}return l+"vec"+t;case 9:return"Bytes"+e.size;case 10:t=e.dim;return"Sampler"+Jn.substr(fe[t.__enum__].__constructs__[t._hx_index]._hx_name,1,null)+(e.isArray?"Array":"");case 11:var t=e.dim,n=e.channels;return"RWTexture"+Jn.substr(fe[t.__enum__].__constructs__[t._hx_index]._hx_name,1,null)+(e.isArray?"Array":"")+"<"+(1==n?"Float":"Vec"+n)+">";case 13:for(var t=e.vl,n=[],i=0;i<t.length;){var s=t[i];++i,n.push(s.name+" : "+Ue.toString(s.type))}return"{"+n.join(",")+"}";case 15:var t=e.size,a=Ue.toString(e.t)+"[";switch(t._hx_index){case 0:r=""+t.v;break;case 1:r=t.v.name}return a+r+"]";case 16:var l,t=e.t,n=e.size;switch(e.kind._hx_index){case 0:l="Buffer";break;case 1:l="StorageBuffer";break;case 2:l="RWBuffer";break;case 3:l="PartialBuffer";break;case 4:l="StoragePartialBuffer";break;case 5:l="RWPartialBuffer"}var r,a=l+" "+Ue.toString(t)+"[";switch(n._hx_index){case 0:r=""+n.v;break;case 1:r=n.v.name}return a+r+"]";default:return Jn.substr(fe[e.__enum__].__constructs__[e._hx_index]._hx_name,1,null)}},Ue.toType=function(e){switch(e._hx_index){case 0:return Le.TInt;case 1:return Le.TFloat;case 2:return Le.TBool}},Ue.hasSideEffect=function(e){for(;;){var t=e.e;switch(t._hx_index){case 0:case 1:return!1;case 2:return 72==t.g._hx_index;case 3:e=t.e;continue;case 4:for(var n=t.el,i=0;i<n.length;)if(Ue.hasSideEffect(n[i++]))return!0;return!1;case 5:var s=t.e1,a=t.e2;switch(t.op._hx_index){case 4:case 20:return!0;default:return!!Ue.hasSideEffect(s)||Ue.hasSideEffect(a)}break;case 6:e=t.e1;continue;case 7:return!0;case 8:var l=t.e,r=t.args,o=l.e;if(2==o._hx_index){if(79==o.g._hx_index)return!0;o=l.e;if(2!=o._hx_index)return!0;switch(o.g._hx_index){case 80:case 85:case 86:return!0}for(var u=0;u<r.length;)if(Ue.hasSideEffect(r[u++]))return!0}else{o=l.e;if(2!=o._hx_index)return!0;switch(o.g._hx_index){case 80:case 85:case 86:return!0}for(var h=0;h<r.length;)if(Ue.hasSideEffect(r[h++]))return!0}return!1;case 9:e=t.e;continue;case 10:l=t.eelse;return!(!Ue.hasSideEffect(t.econd)&&!Ue.hasSideEffect(t.eif))||null!=l&&Ue.hasSideEffect(l);case 12:return!0;case 13:return!!Ue.hasSideEffect(t.it)||Ue.hasSideEffect(t.loop);case 11:case 14:case 15:return!0;case 16:return!!Ue.hasSideEffect(t.e)||Ue.hasSideEffect(t.index);case 17:for(var c=t.el,_=0;_<c.length;)if(Ue.hasSideEffect(c[_++]))return!0;return!1;case 18:for(var o=t.e,d=t.cases,p=t.def,m=0;m<d.length;){for(var g=d[m],f=(++m,0),A=g.values;f<A.length;)if(Ue.hasSideEffect(A[f++]))return!0;if(Ue.hasSideEffect(g.expr))return!0}return!!Ue.hasSideEffect(o)||null!=p&&Ue.hasSideEffect(p);case 19:return!!Ue.hasSideEffect(t.e)||Ue.hasSideEffect(t.loop);case 20:case 21:e=t.e;continue;case 22:return!0}}},Ue.iter=function(e,t){switch((o=e.e)._hx_index){case 0:case 1:case 2:break;case 3:t(o.e);break;case 4:for(var n=o.el,i=0;i<n.length;)t(n[i++]);break;case 5:t(o.e1),t(o.e2);break;case 6:t(o.e1);break;case 7:null!=(n=o.init)&&t(n);break;case 8:for(var n=o.args,i=(t(o.e),0);i<n.length;)t(n[i++]);break;case 9:t(o.e);break;case 10:n=o.eelse;t(o.econd),t(o.eif),null!=n&&t(n);break;case 12:null!=(n=o.e)&&t(n);break;case 13:t(o.it),t(o.loop);break;case 11:case 14:case 15:break;case 16:t(o.e),t(o.index);break;case 17:for(n=o.el,i=0;i<n.length;)t(n[i++]);break;case 18:for(var n=o.cases,i=o.def,s=(t(o.e),0);s<n.length;){for(var a=n[s],l=(++s,0),r=a.values;l<r.length;)t(r[l++]);t(a.expr)}null!=i&&t(i);break;case 19:t(o.e),t(o.loop);break;case 20:case 21:t(o.e);break;case 22:for(var n=o.args,o=0;o<n.length;)t(n[o++].e)}},Ue.map=function(e,t){switch((_=e.e)._hx_index){case 0:case 1:case 2:a=e.e;break;case 3:a=j.TParenthesis(t(_.e));break;case 4:for(var n=_.el,i=[],s=0;s<n.length;)i.push(t(n[s++]));a=j.TBlock(i);break;case 5:a=j.TBinop(_.op,t(_.e1),t(_.e2));break;case 6:a=j.TUnop(_.op,t(_.e1));break;case 7:var n=_.init,a=j.TVarDecl(_.v,null!=n?t(n):null);break;case 8:for(var n=_.args,l=t(_.e),i=[],s=0;s<n.length;)i.push(t(n[s++]));a=j.TCall(l,i);break;case 9:a=j.TSwiz(t(_.e),_.regs);break;case 10:n=_.eelse;a=j.TIf(t(_.econd),t(_.eif),null!=n?t(n):null);break;case 12:n=_.e;a=j.TReturn(null!=n?t(n):null);break;case 13:a=j.TFor(_.v,t(_.it),t(_.loop));break;case 11:case 14:case 15:a=e.e;break;case 16:a=j.TArray(t(_.e),t(_.index));break;case 17:for(n=_.el,i=[],s=0;s<n.length;)i.push(t(n[s++]));a=j.TArrayDecl(i);break;case 18:for(var n=_.cases,i=_.def,l=t(_.e),s=[],r=0;r<n.length;){for(var o=n[r],u=(++r,[]),h=0,c=o.values;h<c.length;)u.push(t(c[h++]));s.push({values:u,expr:t(o.expr)})}a=j.TSwitch(l,s,null==i?null:t(i));break;case 19:a=j.TWhile(t(_.e),t(_.loop),_.normalWhile);break;case 20:a=j.TMeta(_.m,_.args,t(_.e));break;case 21:a=j.TField(t(_.e),_.name);break;case 22:for(var n=_.target,i=_.code,s=_.args,_=[],r=0;r<s.length;){var d=s[r];++r,_.push({e:t(d.e),access:d.access})}a=j.TSyntax(n,i,_)}return{e:a,t:e.t,p:e.p}},Ue.size=function(e){switch(e._hx_index){case 0:return 0;case 1:case 3:return 1;case 2:case 4:return 0;case 5:return e.size;case 6:return 9;case 7:return 16;case 8:return 12;case 9:return e.size;case 10:case 11:return 0;case 12:return 4;case 13:for(var t=e.vl,n=0,i=0;i<t.length;)n+=Ue.size(t[i++].type);return n;case 14:return 0;case 15:t=e.t;switch((i=e.size)._hx_index){case 0:return Ue.size(t)*i.v;case 1:return 0}break;case 16:return 0==(t=e.size)._hx_index?Ue.size(e.t)*t.v:0;case 17:return e.size}},(i["hxsl.Tools2"]=Mm).__name__="hxsl.Tools2",Mm.toString=function(e){e=fe[e.__enum__].__constructs__[e._hx_index]._hx_name;return e.charAt(0).toLowerCase()+Jn.substr(e,1,null)},(i["hxsl.BatchShader"]=Im).__name__="hxsl.BatchShader",Im._SHADER=null,Im.__super__=O,Im.prototype=e(O.prototype,{get_Batch_HasOffset:function(){return this.Batch_HasOffset__},set_Batch_HasOffset:function(e){return this.constModified=!0,this.Batch_HasOffset__=e},get_Batch_UseStorage:function(){return this.Batch_UseStorage__},set_Batch_UseStorage:function(e){return this.constModified=!0,this.Batch_UseStorage__=e},get_Batch_Count:function(){return this.Batch_Count__},set_Batch_Count:function(e){return this.constModified=!0,this.Batch_Count__=e},get_Batch_Buffer:function(){return this.Batch_Buffer__},set_Batch_Buffer:function(e){return this.Batch_Buffer__=e},get_Batch_StorageBuffer:function(){return this.Batch_StorageBuffer__},set_Batch_StorageBuffer:function(e){return this.Batch_StorageBuffer__=e},updateConstants:function(e){this.constBits=0,this.Batch_HasOffset__&&(this.constBits|=1),this.Batch_UseStorage__&&(this.constBits|=2);var t=this.Batch_Count__;if(t>>>13!=0)throw tl.thrown("Batch_Count is out of range "+t+">8191, consider using @const(MAX_VALUE)");this.constBits|=t<<2,this.updateConstantsFinal(e)},getParamValue:function(e){switch(e){case 0:return this.Batch_HasOffset__;case 1:return this.Batch_UseStorage__;case 2:return this.Batch_Count__;case 3:return this.Batch_Buffer__;case 4:return this.Batch_StorageBuffer__}return null},getParamFloatValue:function(e){return 2==e?this.Batch_Count__:0},__class__:Im,__properties__:{set_Batch_StorageBuffer:"set_Batch_StorageBuffer",get_Batch_StorageBuffer:"get_Batch_StorageBuffer",set_Batch_Buffer:"set_Batch_Buffer",get_Batch_Buffer:"get_Batch_Buffer",set_Batch_Count:"set_Batch_Count",get_Batch_Count:"get_Batch_Count",set_Batch_UseStorage:"set_Batch_UseStorage",get_Batch_UseStorage:"get_Batch_UseStorage",set_Batch_HasOffset:"set_Batch_HasOffset",get_Batch_HasOffset:"get_Batch_HasOffset"}}),(i["hxsl.SearchMap"]=Bm).__name__="hxsl.SearchMap",Bm.prototype={set:function(e,t){if(0==this.minId)this.minId=e,this.nexts=[t];else{var n=e-this.minId;if(n<0){for(var i=[],s=0,a=this.nexts.length;s<a;){var l=s++;i[l-n]=this.nexts[l]}this.nexts=i,this.minId+=n,n=0}this.nexts[n]=t}},__class__:Bm},function(){this.linkCache=new Bm,this.linkShaders=new at,this.batchShaders=new VA,this.batchShadersParams=new at,this.byID=new at}),rw=((i["hxsl.Cache"]=lw).__name__="hxsl.Cache",lw.INST=null,lw.get=function(){var e=lw.INST;return null==e&&(e=new lw,lw.INST=e),e},lw.prototype={getLinkShader:function(e){for(var t=[],n=0;n<e.length;)t.push(el.string(e[n++]));var a,u,r,i,o,h,c,_,l,s,d=t.join(","),p=this.linkShaders.h[d];return null==p&&(a=new Sw(""),s="shaderLinker_"+Jn.substr(fp.encode(d),0,8),a.data={name:s,vars:[],funs:[]},u=null,r=Object.create(null),i=0,o=Le.TVec(4,K0.VFloat),h=function(e,t,n,i){for(var s=[],a=t,l=0,r=n.length;l<r;){var o=l++,o=i(n[n.length-1-o],a-(n.length-1-o));a-=Ue.size(o.t),s.unshift(o)}return{e:j.TCall({e:j.TGlobal(e),t:Le.TVoid,p:u},s),t:Le.TVec(t,K0.VFloat),p:u}},c=function(e,t,n){var i=null==n?e:Ue.getName(n)+"."+e,s=r[i];if(null==s){if(s={id:Ue.allocVarId(),name:e,type:t,kind:$0.Var,parent:n},null==n)a.data.vars.push(s);else{e=n.type;if(13!=e._hx_index)throw tl.thrown("assert");e.vl.push(s)}r[i]=s}return s},_=function(e,t){switch(e._hx_index){case 0:return{e:j.TConst(L.CFloat(e.v)),t:Le.TFloat,p:u};case 1:var n=e.v,i=e.size,s=r[n];if(null==s){for(var a=n.split("."),l=null;1<a.length;)l=c(a.shift(),Le.TStruct([]),l);null!=i&&(t=i),s=c(a.shift(),1==t?Le.TFloat:Le.TVec(t,K0.VFloat),l)}return{e:j.TVar(s),t:s.type,p:u};case 2:return{e:j.TCall({e:j.TGlobal(xe.PackNormal),t:Le.TVoid,p:u},[_(e.v,3)]),t:o,p:u};case 3:return{e:j.TCall({e:j.TGlobal(xe.Pack),t:Le.TVoid,p:u},[_(e.v,1)]),t:o,p:u};case 4:return h(xe.Vec2,2,e.a,_);case 5:return h(xe.Vec3,3,e.a,_);case 6:return h(xe.Vec4,4,e.a,_);case 7:n=e.swiz;return{e:j.TSwiz(_(e.a,4),n),t:Le.TVec(n.length,K0.VFloat),p:u}}},l=function(e){i+=1;var t={id:Ue.allocVarId(),type:o,name:"OUTPUT"+(i-1),kind:$0.Output};return a.data.vars.push(t),{e:j.TBinop(tx.OpAssign,{e:j.TVar(t),t:o,p:u},_(e,4)),t:Le.TVoid,p:u}},(s=function(e,t){for(var n={id:Ue.allocVarId(),type:Le.TFun([]),name:(""+el.string(e)).toLowerCase(),kind:$0.Function},i=[],s=0;s<t.length;)i.push(l(t[s++]));a.data.funs.push({kind:e,ref:n,args:[],ret:Le.TVoid,expr:{e:j.TBlock(i),p:u,t:Le.TVoid}})})(iw.Vertex,[gw.Value("output.position")]),s(iw.Fragment,e),(p=Object.create(O.prototype)).shader=a,(this.linkShaders.h[d]=p).updateConstantsFinal(null)),p},link:function(e,t){for(var n=this.linkCache,i=e;null!=i;){var s=i.s,i=i.next,s=s.instance,a=n.nexts[s.id-n.minId];null==a&&(a=new Bm,n.set(s.id,a)),n=a}return null==n.linked&&(n.linked=this.compileRuntimeShader(e,t)),n.linked},compileRuntimeShader:function(e,t){for(var n=[],i=0,s=null,a=e;a!=s;){var l=a.s;a=a.next,n.push({inst:l.instance,p:l.priority,index:i++})}n.reverse(),FA.sort(n,function(e,t){return t.p-e.p});var r=new mw(t);try{for(var o=[],u=0;u<n.length;)o.push(n[u++].inst.shader);l=r.link(o)}catch(o){if(CA.lastError=o,(u=tl.caught(o).unwrap())instanceof km){for(var h=u,u=[],c=0;c<n.length;)u.push(fw.shaderToString(n[c++].inst.shader));throw h.msg+="\n\nin\n\n"+u.join("\n-----\n"),tl.thrown(h)}throw o}if(t==Aw.Batch)for(var _=null,_=function(e){if(null!=e.qualifiers&&0<=e.qualifiers.indexOf(ew.PerObject)&&(1==e.qualifiers.length?e.qualifiers=null:(e.qualifiers=e.qualifiers.slice(),Jn.remove(e.qualifiers,ew.PerObject)),e.kind!=$0.Var)&&(e.kind=$0.Local),13==(n=e.type)._hx_index)for(var t=n.vl,n=0;n<t.length;)_(t[n++])},o=0,u=l.vars;o<u.length;)_(u[o++]);var d,p=new kw;try{d=p.split(l,t==Aw.Batch)}catch(o){throw CA.lastError=o,(u=tl.caught(o).unwrap())instanceof km?((h=u).msg+="\n\nin\n\n"+fw.shaderToString(l),tl.thrown(h)):o}for(var m=new Je,o=0,u=r.allVars;o<u.length;){var g,f,A=u[o];++o,A.v.kind==$0.Param&&13!=A.v.type._hx_index&&(g=n[A.instanceIndex],f=p.varMap.h[A.v.__id__],m.h[(null==f?A:f).id]={instance:g.index,index:g.inst.params.h[A.merged[0].id]})}for(var x=this.buildRuntimeShader((new hw).dce(d),m),o=(x.mode=t,[]),s=null,a=e;a!=s;){l=a.s;a=a.next,o.push(new bw(l.shader,l.constBits))}x.spec={instances:o,signature:null};for(o=0,u=n.length;o<u;){var w=o++;x.spec.instances[n[n.length-1-w].index].index=w}for(o=[],u=0,c=x.spec.instances;u<c.length;){w=c[u];++u,o.push(w.shader.data.name+"_"+w.bits+"_"+w.index)}for(h=o.join(":"),x.spec.signature=fp.encode(h),o=[],u=0,c=x.getShaders();u<c.length;)o.push(fw.shaderToString(c[u++].data));x.signature=fp.encode(o.join(""));r=this.byID.h[x.signature];return null!=r?x.id=r.id:this.byID.h[x.signature]=x,x},buildRuntimeShader:function(e,t){for(var n=new vw,i=(n.globals=new Je,0);i<e.length;){var s,a=e[i];switch(++i,a.name){case"fragment":s=iw.Fragment;break;case"main":s=iw.Main;break;case"vertex":s=iw.Vertex;break;default:throw tl.thrown("assert")}var l=this.flattenShader(a,s,t);switch((l.kind=s)._hx_index){case 0:n.vertex=l;break;case 1:n.fragment=l;break;case 4:n.vertex=l;break;default:throw tl.thrown("assert")}this.initGlobals(n,l)}return n},initGlobals:function(e,t){for(var n=t.globals;null!=n;)e.globals.h[n.gid]=!0,n=n.next;for(n=t.params;null!=n;)null!=n.perObjectGlobal&&(e.globals.h[n.perObjectGlobal.gid]=!0),n=n.next},getPath:function(e){return null==e.parent?e.name:this.getPath(e.parent)+"."+e.name},flattenShader:function(e,t,n){for(var i=new _w,s=new yw,e=i.flatten(e,t),a=[],l=[],r=(s.texturesCount=0,i.allocData.keys());r.hasNext();){var o=r.next(),u=i.allocData.h[o.__id__];switch(o.kind._hx_index){case 0:for(var h=[],c=0;c<u.length;){var _=u[c];++c,null!=_.v&&h.push(new ww(_.pos,this.getPath(_.v),_.v.type))}for(var d=0,p=h.length-1;d<p;)h[T=d++].next=h[T+1];var m=o.type;if(15!=m._hx_index)throw tl.thrown("assert");var g=m.t,m=m.size;if(5!=g._hx_index)throw tl.thrown("assert");if(4!=g.size)throw tl.thrown("assert");if(1!=g.t._hx_index)throw tl.thrown("assert");if(0!=m._hx_index)throw tl.thrown("assert");s.globals=h[0],s.globalsSize=m.v;break;case 2:for(var f=[],A=0,x=0;x<u.length;){var w,y,b=u[x];++x,null!=b.v&&(null==(F=n.h[b.v.id])?((w=new xw(b.v.name,b.pos,-1,-1,b.v.type)).perObjectGlobal=new ww(-1,this.getPath(b.v),b.v.type),f.push(w),++A):(w=new xw(b.v.name,b.pos,F.instance,F.index,b.v.type),15==(y=b.v.type)._hx_index&&Ue.isTexture(y.t)?(w.pos=-b.size,A+=b.size):++A,f.push(w)))}for(var v=0,C=f.length-1;v<C;){var S=v++;f[S].next=f[1+S]}g=o.type;if(15!=g._hx_index)throw tl.thrown("assert");var k=g.t,M=g.size;if(Ue.isTexture(k))a.push({t:k,all:f}),s.texturesCount+=A;else switch(k._hx_index){case 5:if(4!=k.size)throw tl.thrown("assert");if(1!=k.t._hx_index)throw tl.thrown("assert");if(0!=M._hx_index)throw tl.thrown("assert");s.params=f[0],s.paramsSize=M.v;break;case 16:for(var I=0;I<f.length;){var B=f[I];++I,null!=B&&l.push(B)}break;default:throw tl.thrown("assert")}break;default:throw tl.thrown("assert")}}if(0<a.length){a.sort(function(e,t){var n=e.t,i=t.t;switch(n._hx_index){case 10:var s=n.isArray;return 10==i._hx_index?s!=i.isArray?s?1:-1:n.dim._hx_index-i.dim._hx_index:e.t._hx_index-t.t._hx_index;case 11:s=n.isArray;return 11==i._hx_index?s!=i.isArray?s?1:-1:n.dim._hx_index-i.dim._hx_index:e.t._hx_index-t.t._hx_index;default:return e.t._hx_index-t.t._hx_index}}),s.textures=a[0].all[0];for(h=1,c=a.length;h<c;){var T,E=a[(T=h++)-1].all;E[E.length-1].next=a[T].all[0]}}0<l.length&&l.sort(function(e,t){var n=e.type,i=t.type;return 16==n._hx_index&&16==i._hx_index?n.kind._hx_index-i.kind._hx_index:e.type._hx_index-t.type._hx_index});for(var F=null,h=0;h<l.length;){var D=l[h];++h,F=null==s.buffers?(s.buffers=D,s.buffers):(F.next=D,F.next)}return s.bufferCount=l.length,null==s.globals&&(s.globalsSize=0),null==s.params&&(s.paramsSize=0),s.data=e,s},__class__:lw},fe["hxsl.Channel"]={__ename__:!0,__constructs__:null,Unknown:{_hx_name:"Unknown",_hx_index:0,__enum__:"hxsl.Channel",toString:o},R:{_hx_name:"R",_hx_index:1,__enum__:"hxsl.Channel",toString:o},G:{_hx_name:"G",_hx_index:2,__enum__:"hxsl.Channel",toString:o},B:{_hx_name:"B",_hx_index:3,__enum__:"hxsl.Channel",toString:o},A:{_hx_name:"A",_hx_index:4,__enum__:"hxsl.Channel",toString:o},PackedFloat:{_hx_name:"PackedFloat",_hx_index:5,__enum__:"hxsl.Channel",toString:o},PackedNormal:{_hx_name:"PackedNormal",_hx_index:6,__enum__:"hxsl.Channel",toString:o}}),ow=(rw.__constructs__=[rw.Unknown,rw.R,rw.G,rw.B,rw.A,rw.PackedFloat,rw.PackedNormal],rw.__empty_constructs__=[rw.Unknown,rw.R,rw.G,rw.B,rw.A,rw.PackedFloat,rw.PackedNormal],fe["hxsl._Checker.FieldAccess"]={__ename__:!0,__constructs__:null,FField:((R=function(e){return{_hx_index:0,e:e,__enum__:"hxsl._Checker.FieldAccess",toString:o}})._hx_name="FField",R.__params__=["e"],R),FGlobal:((R=function(e,t,n){return{_hx_index:1,g:e,arg:t,variants:n,__enum__:"hxsl._Checker.FieldAccess",toString:o}})._hx_name="FGlobal",R.__params__=["g","arg","variants"],R)}),uw=(ow.__constructs__=[ow.FField,ow.FGlobal],ow.__empty_constructs__=[],fe["hxsl._Checker.WithType"]={__ename__:!0,__constructs__:null,NoValue:{_hx_name:"NoValue",_hx_index:0,__enum__:"hxsl._Checker.WithType",toString:o},Value:{_hx_name:"Value",_hx_index:1,__enum__:"hxsl._Checker.WithType",toString:o},InBlock:{_hx_name:"InBlock",_hx_index:2,__enum__:"hxsl._Checker.WithType",toString:o},With:((R=function(e){return{_hx_index:3,t:e,__enum__:"hxsl._Checker.WithType",toString:o}})._hx_name="With",R.__params__=["t"],R)}),hw=(uw.__constructs__=[uw.NoValue,uw.Value,uw.InBlock,uw.With],uw.__empty_constructs__=[uw.NoValue,uw.Value,uw.InBlock],(i["hxsl.Checker"]=Tm).__name__="hxsl.Checker",Tm.initGlobals=function(){if(null!=Tm.GLOBALS)return Tm.GLOBALS;for(var e=new at,t=[Le.TFloat,Tm.vec2,Tm.vec3,Tm.vec4],z=[Le.TInt,Tm.ivec2,Tm.ivec3,Tm.ivec4],n=[Le.TFloat,Le.TBool,Le.TInt],Q=[Le.TMat2,Le.TMat3,Le.TMat4],i=[],s=0;s<t.length;){var a=t[s];++s,i.push({args:[{name:"value",type:a}],ret:a})}for(var l=i,i=[],s=0;s<t.length;){a=t[s];++s,i.push({args:[{name:"a",type:a},{name:"b",type:a}],ret:a})}for(var r=i,i=[],s=0;s<t.length;){a=t[s];++s,i.push({args:[{name:"a",type:a},{name:"b",type:Le.TFloat}],ret:a})}for(var V=i,i=[],s=0;s<Q.length;){a=Q[s];++s,i.push({args:[{name:"value",type:a}],ret:a})}for(var O=i,o=[{dim:q0.T1D,arr:!1,uv:Le.TFloat,iuv:Le.TInt},{dim:q0.T2D,arr:!1,uv:Tm.vec2,iuv:Tm.ivec2},{dim:q0.T3D,arr:!1,uv:Tm.vec3,iuv:Tm.ivec3},{dim:q0.TCube,arr:!1,uv:Tm.vec3,iuv:Tm.ivec3},{dim:q0.T1D,arr:!0,uv:Tm.vec2,iuv:Tm.ivec2},{dim:q0.T2D,arr:!0,uv:Tm.vec3,iuv:Tm.ivec3},{dim:q0.TCube,arr:!0,uv:Tm.vec4,iuv:Tm.ivec4}],u=Object.create(null),i=0,s=xe.__empty_constructs__.slice();i<s.length;){var h,c=s[i];switch(++i,c._hx_index){case 7:h=l.concat(r);break;case 8:h=r;break;case 20:case 21:case 22:h=r.concat(V);break;case 23:for(var _=[{args:[{name:"value",type:Le.TInt},{name:"min",type:Le.TInt},{name:"max",type:Le.TInt}],ret:Le.TInt}],d=0;d<t.length;){a=t[d];++d,_.push({args:[{name:"value",type:a},{name:"min",type:a},{name:"max",type:a}],ret:a}),a!=Le.TFloat&&_.push({args:[{name:"value",type:a},{name:"min",type:Le.TFloat},{name:"max",type:Le.TFloat}],ret:a})}h=_;break;case 24:for(var p=[],m=0;m<t.length;){var g=t[m];++m,p.push({args:[{name:"x",type:g},{name:"y",type:g},{name:"a",type:g}],ret:g}),g!=Le.TFloat&&p.push({args:[{name:"x",type:g},{name:"y",type:g},{name:"a",type:Le.TFloat}],ret:g})}h=p;break;case 25:h=[{args:[{name:"a",type:Le.TFloat},{name:"x",type:Le.TFloat},{name:"y",type:Le.TFloat}],ret:Le.TFloat}];break;case 26:for(var f=[],A=0;A<t.length;){var x=t[A];++A,f.push({args:[{name:"edge",type:x},{name:"x",type:x}],ret:x}),x!=Le.TFloat&&f.push({args:[{name:"edge",type:Le.TFloat},{name:"x",type:x}],ret:x})}h=f;break;case 27:for(var w=[],y=0;y<t.length;){var b=t[y];++y,w.push({args:[{name:"edge0",type:b},{name:"edge1",type:b},{name:"x",type:b}],ret:b}),b!=Le.TFloat&&w.push({args:[{name:"edge0",type:Le.TFloat},{name:"edge1",type:Le.TFloat},{name:"x",type:b}],ret:b})}h=w;break;case 28:for(var W=[],N=0;N<t.length;)W.push({args:[{name:"value",type:t[N++]}],ret:Le.TFloat});h=W;break;case 29:case 30:for(var G=[],v=0;v<t.length;){var U=t[v];++v,G.push({args:[{name:"a",type:U},{name:"b",type:U}],ret:Le.TFloat})}h=G;break;case 31:h=[{args:[{name:"a",type:Tm.vec3},{name:"b",type:Tm.vec3}],ret:Tm.vec3}];break;case 32:h=l;break;case 33:h=r;break;case 34:for(var L=[],C=0;C<o.length;){var S=o[C];++C,L.push({args:[{name:"tex",type:Le.TSampler(S.dim,S.arr)},{name:"uv",type:S.uv}],ret:Tm.vec4})}h=L;break;case 35:for(var j=[],k=0;k<o.length;){var H=o[k];++k,j.push({args:[{name:"tex",type:Le.TSampler(H.dim,H.arr)},{name:"uv",type:H.uv},{name:"lod",type:Le.TFloat}],ret:Tm.vec4})}h=j;break;case 36:for(var Y=[],Z=0;Z<o.length;){var X=o[Z];++Z,Y.push({args:[{name:"tex",type:Le.TSampler(X.dim,X.arr)},{name:"pos",type:X.iuv}],ret:Tm.vec4})}h=Y;break;case 37:h=[];break;case 38:for(var q=[],K=0;K<n.length;)q.push({args:[{name:"value",type:n[K++]}],ret:Le.TInt});h=q;break;case 39:for(var J=[],$=0;$<n.length;)J.push({args:[{name:"value",type:n[$++]}],ret:Le.TFloat});h=J;break;case 40:for(var ee=[],te=0;te<n.length;)ee.push({args:[{name:"value",type:n[te++]}],ret:Le.TBool});h=ee;break;case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:h=[];break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 54:case 78:h=l;break;case 55:h=[{args:[{name:"value",type:Le.TFloat}],ret:Tm.vec4}];break;case 56:h=[{args:[{name:"value",type:Tm.vec4}],ret:Le.TFloat}];break;case 57:h=[{args:[{name:"value",type:Tm.vec3}],ret:Tm.vec4}];break;case 58:h=[{args:[{name:"value",type:Tm.vec4}],ret:Tm.vec3}];break;case 59:h=[{args:[{name:"screenPos",type:Tm.vec2}],ret:Tm.vec2}];break;case 60:h=[{args:[{name:"uv",type:Tm.vec2}],ret:Tm.vec2}];break;case 61:case 62:case 63:h=l;break;case 64:h=[{args:[{name:"channel",type:Le.TChannel(1)},{name:"uv",type:Tm.vec2}],ret:Le.TFloat},{args:[{name:"channel",type:Le.TChannel(2)},{name:"uv",type:Tm.vec2}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(3)},{name:"uv",type:Tm.vec2}],ret:Tm.vec3},{args:[{name:"channel",type:Le.TChannel(4)},{name:"uv",type:Tm.vec2}],ret:Tm.vec4}];break;case 65:h=[{args:[{name:"channel",type:Le.TChannel(1)},{name:"uv",type:Tm.vec2},{name:"lod",type:Le.TFloat}],ret:Le.TFloat},{args:[{name:"channel",type:Le.TChannel(2)},{name:"uv",type:Tm.vec2},{name:"lod",type:Le.TFloat}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(3)},{name:"uv",type:Tm.vec2},{name:"lod",type:Le.TFloat}],ret:Tm.vec3},{args:[{name:"channel",type:Le.TChannel(4)},{name:"uv",type:Tm.vec2},{name:"lod",type:Le.TFloat}],ret:Tm.vec4}];break;case 66:h=[{args:[{name:"channel",type:Le.TChannel(1)},{name:"pos",type:Tm.ivec2}],ret:Le.TFloat},{args:[{name:"channel",type:Le.TChannel(2)},{name:"pos",type:Tm.ivec2}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(3)},{name:"pos",type:Tm.ivec2}],ret:Tm.vec3},{args:[{name:"channel",type:Le.TChannel(4)},{name:"pos",type:Tm.ivec2}],ret:Tm.vec4},{args:[{name:"channel",type:Le.TChannel(1)},{name:"pos",type:Tm.ivec2},{name:"lod",type:Le.TInt}],ret:Le.TFloat},{args:[{name:"channel",type:Le.TChannel(2)},{name:"pos",type:Tm.ivec2},{name:"lod",type:Le.TInt}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(3)},{name:"pos",type:Tm.ivec2},{name:"lod",type:Le.TInt}],ret:Tm.vec3},{args:[{name:"channel",type:Le.TChannel(4)},{name:"pos",type:Tm.ivec2},{name:"lod",type:Le.TInt}],ret:Tm.vec4}];break;case 67:h=[{args:[{name:"channel",type:Le.TChannel(1)}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(2)}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(3)}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(4)}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(1)},{name:"lod",type:Le.TInt}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(2)},{name:"lod",type:Le.TInt}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(3)},{name:"lod",type:Le.TInt}],ret:Tm.vec2},{args:[{name:"channel",type:Le.TChannel(4)},{name:"lod",type:Le.TInt}],ret:Tm.vec2}];break;case 69:case 70:case 71:case 72:case 73:h=null;break;case 74:case 75:for(var ne=[],M=0,ie=t;M<ie.length;)ne.push({args:[{name:"x",type:ie[M++]}],ret:z[M-1]});h=ne;break;case 76:case 77:for(var se=[],ae=0,le=t;ae<le.length;){var re=le[ae++];se.push({args:[{name:"x",type:z[ae-1]}],ret:re})}h=se;break;case 79:h=[{args:[{name:"x",type:Le.TInt},{name:"y",type:Le.TInt},{name:"z",type:Le.TInt}],ret:Le.TVoid},{args:[{name:"x",type:Le.TInt},{name:"y",type:Le.TInt}],ret:Le.TVoid},{args:[{name:"x",type:Le.TInt}],ret:Le.TVoid}];break;case 80:h=[];break;case 85:h=[{args:[{name:"buf",type:Le.TBuffer(Le.TInt,J0.SConst(0),X0.RW)},{name:"index",type:Le.TInt},{name:"data",type:Le.TInt}],ret:Le.TInt}];break;case 68:case 86:h=[];break;case 87:if(0<fe[c.__enum__].__constructs__[c._hx_index]._hx_name.indexOf("_")){var oe,I=fe[c.__enum__].__constructs__[c._hx_index]._hx_name,B=I.indexOf("_"),T=Jn.substr(I,0,B);switch(null==(R=u[T=T.charAt(0).toLowerCase()+Jn.substr(T,1,null)])&&(u[T]=R=[]),c._hx_index){case 81:case 82:case 83:oe=Tm.ivec3;break;case 84:oe=Le.TInt;break;default:throw tl.thrown("Unknown type for global var "+el.string(c))}T=(T=Jn.substr(I,B+1,null)).charAt(0).toLowerCase()+Jn.substr(T,1,null);R.push({name:T,type:oe}),h=null}else h=[{args:[{name:"value",type:Le.TInt}],ret:Tm.vec4}];break;case 88:if(0<fe[c.__enum__].__constructs__[c._hx_index]._hx_name.indexOf("_")){var ue,I=fe[c.__enum__].__constructs__[c._hx_index]._hx_name,B=I.indexOf("_"),T=Jn.substr(I,0,B),E=u[T=T.charAt(0).toLowerCase()+Jn.substr(T,1,null)];switch(null==E&&(u[T]=E=[]),c._hx_index){case 81:case 82:case 83:ue=Tm.ivec3;break;case 84:ue=Le.TInt;break;default:throw tl.thrown("Unknown type for global var "+el.string(c))}var F=(F=Jn.substr(I,B+1,null)).charAt(0).toLowerCase()+Jn.substr(F,1,null);E.push({name:F,type:ue}),h=null}else h=[{args:[{name:"value",type:Le.TInt}],ret:Tm.vec4}];break;case 89:h=O;break;default:if(!(0<fe[c.__enum__].__constructs__[c._hx_index]._hx_name.indexOf("_")))throw tl.thrown("Unsupported global "+el.string(c));var he,E=fe[c.__enum__].__constructs__[c._hx_index]._hx_name,F=E.indexOf("_"),D=Jn.substr(E,0,F),ce=u[D=D.charAt(0).toLowerCase()+Jn.substr(D,1,null)];switch(null==ce&&(u[D]=ce=[]),c._hx_index){case 81:case 82:case 83:he=Tm.ivec3;break;case 84:he=Le.TInt;break;default:throw tl.thrown("Unknown type for global var "+el.string(c))}D=(D=Jn.substr(E,F+1,null)).charAt(0).toLowerCase()+Jn.substr(D,1,null);ce.push({name:D,type:he}),h=null}null!=h&&(P=Mm.toString(c),e.h[P]={t:Le.TFun(h),g:c})}e.h.vertexID={t:Le.TInt,g:xe.VertexID},e.h.instanceID={t:Le.TInt,g:xe.InstanceID},e.h.fragCoord={t:Tm.vec4,g:xe.FragCoord},e.h.fragDepth={t:Le.TFloat,g:xe.FragDepth},e.h.frontFacing={t:Le.TBool,g:xe.FrontFacing};for(var _e=u,de=Object.keys(u),pe=de.length,M=0;M<pe;){for(var me=P=de[M++],R=_e[P],i=[],s=0;s<R.length;){var ge=R[s];++s,i.push({name:ge.name,kind:$0.Global,type:ge.type,id:0})}e.h[me]={t:Le.TStruct(i),g:null}}e.h.int=e.h.toInt,e.h.float=e.h.toFloat,e.h.reflect=e.h.lReflect,e.h.ivec2=e.h.iVec2;var P="iVec2",P=(Object.prototype.hasOwnProperty.call(e.h,P)&&delete e.h[P],e.h.ivec3=e.h.iVec3,"iVec3"),P=(Object.prototype.hasOwnProperty.call(e.h,P)&&delete e.h[P],e.h.ivec4=e.h.iVec4,"iVec4");return Object.prototype.hasOwnProperty.call(e.h,P)&&delete e.h[P],Object.prototype.hasOwnProperty.call(e.h,"lReflect")&&delete e.h.lReflect,Object.prototype.hasOwnProperty.call(e.h,"toInt")&&delete e.h.toInt,Object.prototype.hasOwnProperty.call(e.h,"toFloat")&&delete e.h.toFloat,Tm.GLOBALS=e},Tm.prototype={error:function(e,t){return km.t(e,t)},warning:function(e,t){},loadShader:function(e){throw tl.thrown("Not implemented")},check:function(e,t){this.vars=new at,this.inits=[],this.inLoop=!1,this.inWhile=!1;for(var n=[],i=(this.checkExpr(t,n,!1,!1),[]),s=0;s<n.length;){for(var a,l=n[s],r=(++s,l.p),o=l.f,u=[],h=0,c=o.args;h<c.length;){var _=c[h];++h,null==_.type&&this.error("Argument type required",r),null!=_.expr&&this.error("Optional argument not supported",r),null==_.kind&&(_.kind=$0.Local),_.kind!=$0.Local&&this.error("Argument should be local",r),0!=_.qualifiers.length&&this.error("No qualifier allowed for argument",r),u.push({id:Ue.allocVarId(),name:_.name,kind:$0.Local,type:_.type})}switch(o.name){case"fragment":a=iw.Fragment;break;case"main":a=iw.Main;break;case"vertex":a=iw.Vertex;break;default:a=Ae.startsWith(o.name,"__init__")?iw.Init:iw.Helper}0!=u.length&&a!=iw.Helper&&this.error(el.string(a)+" function should have no argument",r);for(var d=Ue.allocVarId(),l=o.name,p=[],m=0;m<u.length;){var g=u[m];++m,p.push({type:g.type,name:g.name})}var l={id:d,name:l,kind:$0.Function,type:Le.TFun([{args:p,ret:null==o.ret?Le.TVoid:o.ret}])},f=null==o.ret?Le.TVoid:o.ret;Object.prototype.hasOwnProperty.call(this.vars.h,l.name)&&this.error("Duplicate function name",r),this.vars.h[l.name]=l,i.push({kind:a,ref:l,args:u,ret:f,expr:null})}for(s=0,u=i.length;s<u;){var A=s++;this.typeFun(i[A],n[A].f.expr)}for(var x=[],s=0,u=this.inits.slice();s<u.length;){A=u[s];++s,A.v.kind==$0.Local&&(x.push({e:j.TBinop(tx.OpAssign,{e:j.TVar(A.v),p:A.e.p,t:A.v.type},A.e),p:A.e.p,t:A.v.type}),Jn.remove(this.inits,A))}0<x.length&&(d={id:Ue.allocVarId(),name:"__init__consts__",kind:$0.Function,type:Le.TFun([{args:[],ret:Le.TVoid}])},Object.prototype.hasOwnProperty.call(this.vars.h,d.name)&&this.error("assert",x[0].p),this.vars.h[d.name]=d,i.push({kind:iw.Init,ref:d,args:[],ret:Le.TVoid,expr:{e:j.TBlock(x),p:x[0].p,t:Le.TVoid}}));t=be.array(this.vars);return t.sort(function(e,t){return(e.id<0?-e.id:e.id)-(t.id<0?-t.id:t.id)}),{name:e,vars:t,funs:i}},saveVars:function(){for(var e=new at,t=Object.keys(this.vars.h),n=t.length,i=0;i<n;){var s=t[i++];e.h[s]=this.vars.h[s]}return e},typeFun:function(e,t){for(var n=this.saveVars(),i=0,s=e.args;i<s.length;){var a=s[i];++i,this.vars.h[a.name]=a}(this.curFun=e).expr=this.typeExpr(t,uw.NoValue),this.vars=n},tryUnify:function(e,t){if(U.enumEq(e,t))return!0;switch(e._hx_index){case 5:if(5==t._hx_index&&e.size==t.size&&e.t==t.t)return!0;break;case 10:if(10==t._hx_index)return e.dim==t.dim&&e.isArray==t.isArray;break;case 11:if(11==t._hx_index)return e.dim==t.dim&&e.isArray==t.isArray&&e.channels==t.channels;break;case 15:var n=e.t,i=e.size;if(15!=t._hx_index)break;var s=t.t,a=t.size;switch(i._hx_index){case 0:if(0!=a._hx_index)return!1;if(i.v!=a.v)return!1;break;case 1:if(1!=a._hx_index)return!1;if(i.v!=a.v)return!1;break;default:return!1}return this.tryUnify(n,s);case 17:if(17==t._hx_index&&e.size==t.size)return!0}return!1},unify:function(e,t,n){this.tryUnify(e,t)||this.error(Ue.toString(e)+" should be "+Ue.toString(t),n)},unifyExpr:function(e,t){this.tryUnify(e.t,t)||(e.t==Le.TInt&&t==Le.TFloat?this.toFloat(e):this.error(Ue.toString(e.t)+" should be "+Ue.toString(t),e.p))},checkWrite:function(e){var t=e.e;switch(t._hx_index){case 1:var n,i,s=t.v;switch(s.kind._hx_index){case 2:switch((n=s.type)._hx_index){case 11:i=!0;break;case 16:switch(n.kind._hx_index){case 2:case 5:i=!0;break;default:i=!1}break;default:i=!1}if(i)return;break;case 4:if(null==s.qualifiers||s.qualifiers.indexOf(ew.Final)<0)return;switch((n=s.type)._hx_index){case 11:i=!0;break;case 16:switch(n.kind._hx_index){case 2:case 5:i=!0;break;default:i=!1}break;default:i=!1}if(i)return;break;case 3:case 5:return}break;case 2:if(72==t.g._hx_index)return;break;case 9:case 16:case 21:return void this.checkWrite(t.e)}this.error("This expression cannot be assigned",e.p)},typeWith:function(e,t){return null==t?this.typeExpr(e,uw.Value):(e=this.typeExpr(e,uw.With(t)),this.unifyExpr(e,t),e)},typeExpr:function(n,e){var i=this,s=null;switch((P=n.expr)._hx_index){case 0:var t=l=P.c;switch(l._hx_index){case 0:s=Le.TVoid;break;case 1:s=Le.TBool;break;case 2:s=3==e._hx_index&&3==e.t._hx_index?(t=L.CFloat(l.v),Le.TFloat):Le.TInt;break;case 3:s=Le.TFloat;break;case 4:s=Le.TString}o=j.TConst(t);break;case 1:var a,l=P.i;if(null!=(d=this.vars.h[l])){switch(l){case"fragment":case"main":case"vertex":a=!1;break;default:a=!Ae.startsWith(l,"__init__")}a||this.error("Function cannot be accessed",n.pos),s=d.type,o=j.TVar(d)}else var r=this.globals.h[l],o=null!=r&&null!=r.g?(s=r.t,j.TGlobal(r.g)):"PI"==l?(s=Le.TFloat,j.TConst(L.CFloat(Math.PI))):this.error("Unknown identifier '"+l+"'",n.pos);break;case 2:s=(m=this.typeExpr(P.e,e)).t;o=j.TParenthesis(m);break;case 3:var l=P.e,u=P.f;if(1==(_=l.expr)._hx_index){var h=_.i;if(null==this.vars.h[h]&&null!=this.globals.h[h]&&null==this.globals.h[h].g){if(13!=(_=this.globals.h[h].t)._hx_index)throw tl.thrown("assert");for(var c=_.vl,_=0;_<c.length;){var d=c[_];if(++_,d.name==u)return{e:j.TGlobal(U.createEnum(xe,h.charAt(0).toUpperCase()+Jn.substr(h,1,null)+"_"+u.charAt(0).toUpperCase()+Jn.substr(u,1,null),null)),t:d.type,p:n.pos}}for(var p=h+" field should be ",_=[],h=0;h<c.length;)_.push(c[h++].name);o=this.error(p+_.join("|"),n.pos)}else{var m=this.typeExpr(l,uw.Value);switch(null==(k=this.fieldAccess(m,u,e,n.pos))&&this.error(Ue.toString(m.t)+" has no field '"+u+"'",n.pos),k._hx_index){case 0:_=k.e;s=_.t,o=_.e;break;case 1:o=this.error("Global function must be called immediately",n.pos)}}}else{m=this.typeExpr(l,uw.Value);switch(null==(k=this.fieldAccess(m,u,e,n.pos))&&this.error(Ue.toString(m.t)+" has no field '"+u+"'",n.pos),k._hx_index){case 0:l=k.e;s=l.t,o=l.e;break;case 1:o=this.error("Global function must be called immediately",n.pos)}}break;case 4:var l=P.op,m=this.typeExpr(P.e1,uw.Value),g=this.typeExpr(P.e2,uw.With(m.t));switch(l._hx_index){case 4:this.checkWrite(m),this.unify(g.t,m.t,g.p),s=m.t;break;case 20:this.checkWrite(m),this.unify(this.typeBinop(l.op,m,g,n.pos),m.t,g.p),s=m.t;break;default:s=this.typeBinop(l,m,g,n.pos)}o=j.TBinop(l,m,g);break;case 5:l=P.op,m=this.typeExpr(P.e1,uw.Value);switch(l._hx_index){case 0:case 1:switch(m.t._hx_index){case 1:case 3:break;default:this.error("Cannot increment "+Ue.toString(m.t),n.pos)}s=Le.TVoid,o=j.TBinop(tx.OpAssignOp(l==nx.OpIncrement?tx.OpAdd:tx.OpSub),m,{e:j.TConst(L.CInt(1)),t:Le.TInt,p:m.p});break;case 2:this.unifyExpr(m,Le.TBool),s=Le.TBool,o=j.TUnop(l,m);break;case 3:switch((u=m.t)._hx_index){case 1:case 3:break;case 5:switch(u.t._hx_index){case 0:case 1:break;default:this.error("Cannot negate "+Ue.toString(m.t),n.pos)}break;default:this.error("Cannot negate "+Ue.toString(m.t),n.pos)}s=m.t,o=j.TUnop(l,m);break;default:o=this.error("Operation non supported",n.pos)}break;case 6:l=P.e,u=P.args;if(3==(_=l.expr)._hx_index){h=_.f;if(1==(c=_.e.expr)._hx_index){if("Syntax"==c.i){0==u.length&&this.error("Syntax."+h+" should have a string as first argument",n.pos);r=0==(_=u[0].expr)._hx_index&&4==(c=_.c)._hx_index?c.v:this.error("Syntax."+h+" should have a string as first argument",u[0].pos);for(var f=[],_=1,c=u.length;_<c;){var A=u[_++];if(20==(v=A.expr)._hx_index){var x=v.name,z=v.e;switch(x){case"r":case"rw":case"w":var w,p=this.typeExpr(z,uw.Value);switch(x){case"r":w=sw.Read;break;case"rw":w=sw.ReadWrite;break;case"w":w=sw.Write;break;default:throw tl.thrown("assert")}f.push({e:p,access:w});break;default:this.error("Syntax."+h+" arguments should have an access meta of @r, @w or @rw",A.pos)}}else this.error("Syntax."+h+" arguments should have an access meta of @r, @w or @rw",A.pos)}return{e:j.TSyntax(h,r,f),t:Le.TVoid,p:n.pos}}var y=u,Q=function(e){var t=e.t;return 14==t._hx_index?(t=i.unifyCallParams(e,y,t.variants,n.pos),s=t.t,t.e):i.error(Ue.toString(e.t)+" cannot be called",n.pos)};if(3==(_=l.expr)._hx_index){h=_.f,m=this.typeExpr(_.e,uw.Value);switch(null==(k=this.fieldAccess(m,h,e,n.pos))&&this.error(Ue.toString(m.t)+" has no field '"+h+"'",n.pos),k._hx_index){case 0:o=Q(k.e);break;case 1:var _=k.g,h=k.arg,c=k.variants,b={e:j.TGlobal(_),t:Le.TFun(c),p:m.p};if(0==c.length){for(var v=[],x=0;x<y.length;)v.push(this.typeExpr(y[x++],uw.Value));v.unshift(h);m=this.specialGlobal(_,b,v,n.pos)}else{_=(m=this.unifyCallParams(b,y,c,n.pos)).e,c=b.t;if(8!=_._hx_index)throw tl.thrown("assert");if(14!=c._hx_index)throw tl.thrown("assert");if(1!=(v=c.variants).length)throw tl.thrown("assert");c=v[0];_.args.unshift(h),c.args.unshift({name:"_",type:h.t})}s=m.t,o=m.e}}else o=Q(this.typeExpr(l,uw.Value))}else{var C=u,V=function(e){var t=e.t;return 14==t._hx_index?(t=i.unifyCallParams(e,C,t.variants,n.pos),s=t.t,t.e):i.error(Ue.toString(e.t)+" cannot be called",n.pos)};if(3==(_=l.expr)._hx_index){h=_.f,m=this.typeExpr(_.e,uw.Value);switch(null==(k=this.fieldAccess(m,h,e,n.pos))&&this.error(Ue.toString(m.t)+" has no field '"+h+"'",n.pos),k._hx_index){case 0:o=V(k.e);break;case 1:_=k.g,h=k.arg,c=k.variants,b={e:j.TGlobal(_),t:Le.TFun(c),p:m.p};if(0==c.length){for(v=[],x=0;x<C.length;)v.push(this.typeExpr(C[x++],uw.Value));v.unshift(h);m=this.specialGlobal(_,b,v,n.pos)}else{_=(m=this.unifyCallParams(b,C,c,n.pos)).e,c=b.t;if(8!=_._hx_index)throw tl.thrown("assert");if(14!=c._hx_index)throw tl.thrown("assert");if(1!=(v=c.variants).length)throw tl.thrown("assert");c=v[0];_.args.unshift(h),c.args.unshift({name:"_",type:h.t})}s=m.t,o=m.e}}else o=V(this.typeExpr(l,uw.Value))}}else{var S=u,O=function(e){var t=e.t;return 14==t._hx_index?(t=i.unifyCallParams(e,S,t.variants,n.pos),s=t.t,t.e):i.error(Ue.toString(e.t)+" cannot be called",n.pos)};if(3==(u=l.expr)._hx_index){var k,_=u.f,m=this.typeExpr(u.e,uw.Value);switch(null==(k=this.fieldAccess(m,_,e,n.pos))&&this.error(Ue.toString(m.t)+" has no field '"+_+"'",n.pos),k._hx_index){case 0:o=O(k.e);break;case 1:u=k.g,_=k.arg,h=k.variants,b={e:j.TGlobal(u),t:Le.TFun(h),p:m.p};if(0==h.length){for(c=[],v=0;v<S.length;)c.push(this.typeExpr(S[v++],uw.Value));c.unshift(_);m=this.specialGlobal(u,b,c,n.pos)}else{u=(m=this.unifyCallParams(b,S,h,n.pos)).e,h=b.t;if(8!=u._hx_index)throw tl.thrown("assert");if(14!=h._hx_index)throw tl.thrown("assert");if(1!=(c=h.variants).length)throw tl.thrown("assert");h=c[0];u.args.unshift(_),h.args.unshift({name:"_",type:_.t})}s=m.t,o=m.e}}else o=O(this.typeExpr(l,uw.Value))}break;case 7:var M=this.saveVars(),I=P.el.slice(),B=[];for(e=this.propagate(e),0==I.length&&e!=uw.NoValue&&this.error("Value expected",n.pos);;){if(null==(m=I.shift()))break;8==(l=m.expr)._hx_index&&1<(u=l.v).length&&(W=u.shift(),I.unshift(m),m={expr:nw.EVars([W]),pos:m.pos});var W,T=this.typeExpr(m,8==m.expr._hx_index?uw.InBlock:0==I.length?e:uw.NoValue);0==I.length||Ue.hasSideEffect(T)||this.warning("This expression has no side effect",m.pos),B.push(T)}this.vars=M,s=e==uw.NoValue?Le.TVoid:B[B.length-1].t,o=j.TBlock(B);break;case 8:l=P.v;if(e!=uw.InBlock&&this.error("Cannot declare a variable outside of a block",n.pos),1!=l.length)throw tl.thrown("assert");null==(d=l[0]).kind&&(d.kind=$0.Local),d.kind!=$0.Local&&this.error("Should be local var",n.pos),0!=d.qualifiers.length&&this.error("Unexpected qualifier",n.pos);var r=this.makeVar(l[0],n.pos),E=null==d.expr?null:this.typeWith(d.expr,r.type);null==r.type&&(null==E&&this.error("Type required for unitialized local var",n.pos),r.type=E.t),this.vars.h[r.name]=r,s=Le.TVoid,o=j.TVarDecl(r,E);break;case 9:throw tl.thrown("assert");case 10:var l=P.eelse,N=(e=this.propagate(e),this.typeWith(P.econd,Le.TBool)),m=this.typeExpr(P.eif,e),g=null==l?null:this.typeExpr(l,e);o=(s=e==uw.NoValue?Le.TVoid:(null==g&&this.error("Missing else",n.pos),(this.tryUnify(m.t,g.t)?m:(this.unifyExpr(g,m.t),g)).t),j.TIf(N,m,g));break;case 11:s=Le.TVoid,o=j.TDiscard;break;case 12:s=Le.TVoid;r=this.typeExpr(P.loop,uw.Value);o=15==(l=r.t)._hx_index?(d={id:Ue.allocVarId(),name:P.v,type:l.t,kind:$0.Local},M=this.vars.h[d.name],this.vars.h[d.name]=d,F=this.inLoop,this.inLoop=!0,E=this.typeExpr(P.block,uw.NoValue),this.inLoop=F,null==M?(R=d.name,D=this.vars,Object.prototype.hasOwnProperty.call(D.h,R)&&delete D.h[R]):this.vars.h[d.name]=M,j.TFor(d,r,E)):this.error("Cannot iterate on "+Ue.toString(r.t),r.p);break;case 13:null==(l=P.e)!=(this.curFun.ret==Le.TVoid)&&this.error("This function should return "+Ue.toString(this.curFun.ret),n.pos),s=Le.TVoid,o=j.TReturn(null==l?null:this.typeWith(l,this.curFun.ret));break;case 14:this.inLoop||this.error("Break outside loop",n.pos),s=Le.TVoid,o=j.TBreak;break;case 15:this.inLoop||this.error("Continue outside loop",n.pos),s=Le.TVoid,o=j.TContinue;break;case 16:m=this.typeExpr(P.e,uw.Value),g=this.typeExpr(P.eindex,uw.With(Le.TInt));switch(this.unify(g.t,Le.TInt,g.p),(l=m.t)._hx_index){case 5:switch(l.t._hx_index){case 0:s=Le.TInt;break;case 1:s=Le.TFloat;break;default:this.error("Cannot index "+Ue.toString(m.t)+" : should be an array",n.pos)}break;case 6:s=Tm.vec3;break;case 7:case 8:s=Tm.vec4;break;case 12:s=Tm.vec2;break;case 15:u=l.size,_=g.e;0==u._hx_index?0==_._hx_index&&2==(h=_.c)._hx_index&&((c=h.v)>=u.v?this.error("Indexing outside array bounds",n.pos):c<0&&this.error("Cannot index with negative value",n.pos)):0==_._hx_index&&2==(u=_.c)._hx_index&&u.v<0&&this.error("Cannot index with negative value",n.pos),s=l.t;break;case 16:u=l.t,_=l.size;switch(l.kind._hx_index){case 0:case 3:l=g.e;0==_._hx_index?0==l._hx_index&&2==(h=l.c)._hx_index&&((c=h.v)>=_.v?this.error("Indexing outside array bounds",n.pos):c<0&&this.error("Cannot index with negative value",n.pos)):0==l._hx_index&&2==(_=l.c)._hx_index&&_.v<0&&this.error("Cannot index with negative value",n.pos),s=u;break;default:s=u}break;default:this.error("Cannot index "+Ue.toString(m.t)+" : should be an array",n.pos)}o=j.TArray(m,g);break;case 17:for(u=(0==(l=P.el).length&&this.error("Empty array not supported",n.pos),[]),_=0;_<l.length;)u.push(this.typeExpr(l[_++],uw.Value));for(var G=u[0].t,l=1,_=u.length;l<_;)this.unifyExpr(u[l++],G);s=Le.TArray(G,J0.SConst(u.length)),o=j.TArrayDecl(u);break;case 18:for(l=P.cases,u=P.def,T=this.typeExpr(P.e,uw.Value),_=[],h=0;h<l.length;){for(t=l[h],c=(++h,[]),v=0,x=t.values;v<x.length;)c.push(this.typeWith(x[v++],T.t));_.push({values:c,expr:this.typeExpr(t.expr,e)})}s=Le.TVoid,o=j.TSwitch(T,_,null==u?null:this.typeExpr(u,e));break;case 19:s=Le.TVoid;var N=this.typeWith(P.cond,Le.TBool),F=this.inLoop,D=this.inWhile,R=(this.inLoop=!0,this.inWhile=!0,this.typeExpr(P.loop,uw.NoValue));this.inLoop=F,this.inWhile=D,o=j.TWhile(N,R,P.normalWhile);break;case 20:for(var l=P.name,u=P.args,m=this.typeExpr(P.e,e),P=(s=m.t,[]),_=0;_<u.length;){t=u[_];switch(++_,(h=t.expr)._hx_index){case 0:p=h.c;break;case 1:p=L.CString(h.i);break;default:p=this.error("Metadata parameter should be constant",t.pos)}P.push(p)}o=j.TMeta(l,P,m)}if(null==s)throw tl.thrown("assert");return{e:o,t:s,p:n.pos}},propagate:function(e){return 2==e._hx_index?uw.NoValue:e},checkExpr:function(e,t,n,i){var s=this;switch((x=e.expr)._hx_index){case 6:var a=x.args;if(1==(r=x.e.expr)._hx_index)switch(r.i){case"extends":if(1==a.length){var l,r=a[0],o=[],u=((l=function(e){var t=e.expr;switch(t._hx_index){case 0:var n=t.c;4==n._hx_index?o.push(n.v):s.error("Should be a shader type path",e.pos);break;case 1:o.push(t.i);break;case 3:l(t.e),o.push(t.f);break;default:s.error("Should be a shader type path",e.pos)}})(r),null);try{u=this.loadShader(o.join("."))}catch(p){if(CA.lastError=p,!((_=tl.caught(p).unwrap())instanceof km))throw p;this.error(el.string(_),r.pos)}null!=u&&this.checkExpr(u,t,n,!0)}else this.error("This expression is not allowed at shader declaration level",e.pos);break;case"import":if(1==a.length){var r=a[0],h=[],c=null,u=((c=function(e){var t=e.expr;switch(t._hx_index){case 1:h.push(t.i);break;case 3:c(t.e),h.push(t.f);break;default:s.error("Should be a shader type path",e.pos)}})(r),null);try{u=this.loadShader(h.join("."))}catch(a){CA.lastError=a;var _=(p=tl.caught(a)).unwrap();if(p instanceof kp)throw p;this.error(el.string(_),r.pos)}null!=u&&this.checkExpr(u,t,!0,i)}else this.error("This expression is not allowed at shader declaration level",e.pos);break;default:this.error("This expression is not allowed at shader declaration level",e.pos)}else this.error("This expression is not allowed at shader declaration level",e.pos);break;case 7:for(a=x.el,r=0;r<a.length;)this.checkExpr(a[r++],t,n,i);break;case 8:for(a=x.v,r=0;r<a.length;){var d=a[r];if(++r,null==d.kind){d.kind=$0.Local;for(var p=0,_=d.qualifiers;p<_.length;)0==_[p++]._hx_index&&(d.kind=$0.Param)}var m=null;if(null!=d.expr&&(d.kind!=$0.Param&&d.kind!=$0.Local&&this.error("Cannot initialize variable declaration if not @param or local",d.expr.pos),g=this.typeExpr(d.expr,null==d.type?uw.Value:uw.With(d.type)),null==d.type?d.type=g.t:this.unify(g.t,d.type,d.expr.pos),this.checkConst(g),m=g),null==d.type&&this.error("Type required for variable declaration",e.pos),!n||d.kind!=$0.Param){Object.prototype.hasOwnProperty.call(this.vars.h,d.name)&&this.error("Duplicate var decl '"+d.name+"'",e.pos);var g=this.makeVar(d,e.pos),f=g.type;switch(f._hx_index){case 10:2==f.dim._hx_index&&1==f.isArray&&this.error("Unsupported texture type",e.pos);break;case 11:var A=f.channels;2==f.dim._hx_index?1!=f.isArray&&3!=A||this.error("Unsupported texture type",e.pos):3==A&&this.error("Unsupported texture type",e.pos)}null!=m?this.inits.push({v:g,e:m}):null!=g.qualifiers&&0<=g.qualifiers.indexOf(ew.Final)&&this.error("Final variable needs initializer",e.pos),this.vars.h[g.name]=g}}break;case 9:a=x.f;if(!n||"fragment"!=a.name&&"vertex"!=a.name&&!Ae.startsWith(a.name,"__init__")){for(var x=0,r=t.slice();x<r.length;){var w=r[x];++x,w.f.name==a.name&&w.inherit&&Jn.remove(t,w)}t.push({f:a,p:e.pos,inherit:i||n})}break;default:this.error("This expression is not allowed at shader declaration level",e.pos)}},checkConst:function(e){switch((i=e.e)._hx_index){case 0:break;case 3:this.checkConst(i.e);break;case 8:var t=i.args;if(2==(n=i.e.e)._hx_index)switch(n.g._hx_index){case 41:case 42:case 43:case 44:case 45:case 46:for(var n=0;n<t.length;)this.checkConst(t[n++]);break;default:this.error("This expression should be constant",e.p)}else this.error("This expression should be constant",e.p);break;case 17:for(var t=i.el,i=0;i<t.length;)this.checkConst(t[i++]);break;default:this.error("This expression should be constant",e.p)}},makeVar:function(e,t,n){var i={id:Ue.allocVarId(),name:e.name,kind:e.kind,type:e.type,qualifiers:e.qualifiers};if(null!=n&&(i.parent=n),null==i.kind?i.kind=null==n?$0.Local:n.kind:null==n||i.kind==n.kind||0==n.kind._hx_index&&3==i.kind._hx_index||this.error("Variable "+el.string(n.kind)+" cannot be changed to "+el.string(i.kind),t),0<e.qualifiers.length){i.qualifiers=e.qualifiers;for(var s=0,a=e.qualifiers;s<a.length;)switch(a[s++]._hx_index){case 0:for(var l=n;null!=l;)Ue.isStruct(l)||this.error("@const only allowed in structure",t),l=l.parent;i.kind!=$0.Global&&i.kind!=$0.Param&&this.error("@const only allowed on parameter or global",t);break;case 1:break;case 2:i.kind!=$0.Param&&this.error("@nullable only allowed on parameter or global",t);break;case 3:i.kind!=$0.Global&&this.error("@perObject only allowed on global",t);break;case 4:null!=n&&this.error("Cannot have an explicit name for a structure variable",t),i.kind!=$0.Global&&this.error("Explicit name is only allowed for global var",t);break;case 5:null!=n&&this.error("Cannot share a structure field",t),i.kind!=$0.Param&&this.error("Can only share a @param",t);break;case 6:var r=e.type;if(null==r)this.error("Precision qualifier not supported on "+el.string(e.type),t);else switch(r._hx_index){case 3:break;case 5:1!=r.t._hx_index&&this.error("Precision qualifier not supported on "+el.string(e.type),t);break;default:this.error("Precision qualifier not supported on "+el.string(e.type),t)}break;case 7:var o=e.type;if(null==o)this.error("Precision qualifier not supported on "+el.string(e.type),t);else switch(o._hx_index){case 1:case 3:break;case 5:1!=o.t._hx_index&&this.error("Precision qualifier not supported on "+el.string(e.type),t);break;default:this.error("Precision qualifier not supported on "+el.string(e.type),t)}break;case 8:break;case 9:i.kind!=$0.Input&&i.kind!=$0.Param&&(i.kind!=$0.Global||e.qualifiers.indexOf(ew.PerObject)<0)&&this.error("@perInstance only allowed on input/param",t);break;case 10:break;case 11:e.kind!=$0.Local&&this.error("Borrow should not have a type qualifier",t);break;case 12:var u=e.type;if(null==u)this.error("Sampler should be on sampler type or sampler array",t);else switch(u._hx_index){case 10:break;case 15:10!=u.t._hx_index&&this.error("Sampler should be on sampler type or sampler array",t);break;default:this.error("Sampler should be on sampler type or sampler array",t)}break;case 13:i.kind!=$0.Local&&this.error("final only allowed on local",t);break;case 14:i.kind!=$0.Local&&this.error("flat only allowed on local",t)}}return null!=i.type&&(i.type=this.makeVarType(i.type,i,t)),i},makeVarType:function(e,t,n){switch(e._hx_index){case 13:for(var i=e.vl.slice(),s=(t.type=Le.TStruct(i),0),a=i.length;s<a;){var l=s++,r=i[l];i[l]=this.makeVar({type:r.type,qualifiers:r.qualifiers,name:r.name,kind:r.kind,expr:null},n,t)}return t.type;case 15:case 16:var o,s=e.t,a=e.size,u=s;switch(15==s._hx_index&&this.error("Multidimentional arrays are not allowed",n),a._hx_index){case 0:o=a;break;case 1:for(var h,c=(h=a.v).name.split("."),_=null,a=0;a<c.length;){var d,p=c[a];if(++a,null==_){if(null==(_=this.vars.h[p])&&null!=t){for(var m=t;null!=m.parent;)m=m.parent;m.name==p&&(_=m)}}else if(13==(d=_.type)._hx_index){for(var g=d.vl,f=null,A=0;A<g.length;){r=g[A];if(++A,r.name==p){f=r;break}}_=f}else _=null;if(null==_)break}null==_&&this.error("Array size variable '"+h.name+"'not found",n),Ue.isConst(_)||this.error("Array size variable '"+h.name+"'should be a constant",n),o=J0.SVar(_)}switch(u=this.makeVarType(s,t,n),e._hx_index){case 15:return Le.TArray(u,o);case 16:return Le.TBuffer(u,o,e.kind);default:throw tl.thrown("assert")}break;default:return e}},isParentArray:function(e){if(null==e.parent)return!1;switch(e.parent.type._hx_index){case 13:return this.isParentArray(e.parent);case 15:case 16:return!0;default:return!1}},fieldAccess:function(e,t,n,i){var s,a;if(13==(o=e.t)._hx_index){for(var l=o.vl,r=null,o=0;o<l.length;){var u=l[o];if(++o,u.name==t){r=u;break}}d=null==r?null:this.isParentArray(r)?{e:j.TField(e,t),t:r.type,p:i}:{e:j.TVar(r),t:r.type,p:i}}else d=null;if(null!=d)return ow.FField(d);if(null==(d=this.globals.h[t])){var h,c,_,d,o=e.t;switch(t){case"fetch":case"fetchLod":switch(o._hx_index){case 10:h=xe.Texel;break;case 17:h=xe.ChannelFetch;break;default:h=null}break;case"get":switch(o._hx_index){case 10:h=xe.Texture;break;case 17:h=xe.ChannelRead;break;default:h=null}break;case"getLod":switch(o._hx_index){case 10:h=xe.TextureLod;break;case 17:h=xe.ChannelReadLod;break;default:h=null}break;case"size":switch(o._hx_index){case 10:case 11:h=xe.TextureSize;break;case 17:h=xe.ChannelTextureSize;break;default:h=null}break;case"store":h=11==o._hx_index?xe.ImageStore:null;break;default:h=null}null!=h&&("get"==t&&this.inWhile&&this.error("Cannot use .get() in while loop, use .getLod instead",i),c=this.globals,_=Mm.toString(h),d=c.h[_])}if(null!=d){if(14==(o=d.t)._hx_index){for(var l=o.variants,p=[],o=0;o<l.length;){var m,u=l[o];++o,0!=u.args.length&&this.tryUnify(e.t,u.args[0].type)&&((m=u.args.slice()).shift(),p.push({args:m,ret:u.ret}))}if(0<p.length||0==l.length)return ow.FGlobal(d.g,e,p)}if(28==d.g._hx_index&&15==e.t._hx_index)return ow.FField({e:j.TCall({e:j.TGlobal(xe.Length),t:Le.TVoid,p:i},[e]),t:Le.TInt,p:i})}switch((o=e.t)._hx_index){case 1:s=K0.VInt,a=1;break;case 2:s=K0.VBool,a=1;break;case 3:s=K0.VFloat,a=1;break;case 5:s=o.t,a=o.size;break;case 9:s=K0.VFloat,a=o.size;break;default:s=null,a=0}if(0<a&&t.length<=4){for(var g=[aw.X,aw.Y,aw.Z,aw.W],f=-1,A=[],o=0,l=t.length;o<l;){var x=o++,w="xrsygtzbpwaq".indexOf(t.charAt(x));if(w<0)return null;var y=w%3;if(f<0)f=y;else if(y!=f)return null;y=w/3|0;a<=y&&this.error(Ue.toString(e.t)+" does not have component "+t.charAt(x),i),A.push(g[y])}return ow.FField({e:j.TSwiz(e,A),t:1==A.length?Ue.toType(s):Le.TVec(A.length,s),p:i})}return null},getSizeType:function(e,t){switch(e){case 1:return t==K0.VInt?Le.TInt:Le.TFloat;case 2:return t==K0.VInt?Tm.ivec2:Tm.vec2;case 3:return t==K0.VInt?Tm.ivec3:Tm.vec3;case 4:return t==K0.VInt?Tm.ivec4:Tm.vec4;default:throw tl.thrown("assert")}},specialGlobal:function(e,t,n,i){var s,a=null;switch(e._hx_index){case 37:switch(1!=n.length&&this.error("TextureSize() requires one single argument",i),(u=n[0].t)._hx_index){case 10:case 11:a=this.getSizeType(Ue.getDimSize(u.dim,u.isArray),K0.VFloat);break;default:this.unify(n[0].t,Le.TSampler(q0.T2D,!1),n[0].p),a=Tm.vec2}break;case 41:var l=Le.TFloat,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||2!=u.size?r:!0)){for(var o=0,u=0;u<n.length;){var h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}2!=o&&1<o&&this.error(Mm.toString(e)+" requires 2 "+Ue.toString(l)+" values but has "+o,i)}a=Le.TVec(2,K0.VFloat);break;case 42:l=Le.TFloat,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||3!=u.size?r:!0)){for(o=0,u=0;u<n.length;){h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}3!=o&&1<o&&this.error(Mm.toString(e)+" requires 3 "+Ue.toString(l)+" values but has "+o,i)}a=Le.TVec(3,K0.VFloat);break;case 43:l=Le.TFloat,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||4!=u.size?r:!0)){for(o=0,u=0;u<n.length;){h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}4!=o&&1<o&&this.error(Mm.toString(e)+" requires 4 "+Ue.toString(l)+" values but has "+o,i)}a=Le.TVec(4,K0.VFloat);break;case 44:case 45:case 46:switch(e._hx_index){case 44:s=2;break;case 45:s=3;break;case 46:s=4;break;default:throw tl.thrown("assert")}if(1==n.length)switch(n[0].t._hx_index){case 1:case 3:break;default:l=Le.TInt,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||u.size!=s?r:!0)){for(o=0,u=0;u<n.length;){h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}o!=s&&1<o&&this.error(Mm.toString(e)+" requires "+s+" "+Ue.toString(l)+" values but has "+o,i)}}else{l=Le.TInt,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||u.size!=s?r:!0)){for(o=0,u=0;u<n.length;){h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}o!=s&&1<o&&this.error(Mm.toString(e)+" requires "+s+" "+Ue.toString(l)+" values but has "+o,i)}}a=Le.TVec(s,K0.VInt);break;case 47:l=Le.TBool,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||2!=u.size?r:!0)){for(o=0,u=0;u<n.length;){h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}2!=o&&1<o&&this.error(Mm.toString(e)+" requires 2 "+Ue.toString(l)+" values but has "+o,i)}a=Le.TVec(2,K0.VBool);break;case 48:l=Le.TBool,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||3!=u.size?r:!0)){for(o=0,u=0;u<n.length;){h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}3!=o&&1<o&&this.error(Mm.toString(e)+" requires 3 "+Ue.toString(l)+" values but has "+o,i)}a=Le.TVec(3,K0.VBool);break;case 49:l=Le.TBool,r=!1;if(!(r=1!=n.length||l!=Le.TInt&&l!=Le.TFloat||5!=(u=n[0].t)._hx_index||(c=u.t)!=K0.VInt&&c!=K0.VFloat||4!=u.size?r:!0)){for(o=0,u=0;u<n.length;){h=n[u];++u,5==(c=h.t)._hx_index?(Ue.toType(c.t)!=l&&this.unify(h.t,l,h.p),o+=c.size):(this.unifyExpr(h,l),++o)}4!=o&&1<o&&this.error(Mm.toString(e)+" requires 4 "+Ue.toString(l)+" values but has "+o,i)}a=Le.TVec(4,K0.VBool);break;case 50:for(var u=[],c=0;c<n.length;)u.push(n[c++].t);switch(u.length){case 1:12==u[0]._hx_index?a=Le.TMat2:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;case 2:var c=u[0],_=u[1];5==c._hx_index&&2==c.size&&1==c.t._hx_index&&5==_._hx_index&&2==_.size&&1==_.t._hx_index?a=Le.TMat2:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;case 4:3==u[0]._hx_index&&3==u[1]._hx_index&&3==u[2]._hx_index&&3==u[3]._hx_index?a=Le.TMat2:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;default:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i)}break;case 51:for(u=[],c=0;c<n.length;)u.push(n[c++].t);switch(u.length){case 1:switch(u[0]._hx_index){case 7:case 8:a=Le.TMat3;break;default:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i)}break;case 3:var c=u[0],_=u[1],d=u[2];5==c._hx_index&&3==c.size&&1==c.t._hx_index&&5==_._hx_index&&3==_.size&&1==_.t._hx_index&&5==d._hx_index&&3==d.size&&1==d.t._hx_index?a=Le.TMat3:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;case 9:3==u[0]._hx_index&&3==u[1]._hx_index&&3==u[2]._hx_index&&3==u[3]._hx_index&&3==u[4]._hx_index&&3==u[5]._hx_index&&3==u[6]._hx_index&&3==u[7]._hx_index&&3==u[8]._hx_index?a=Le.TMat3:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;default:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i)}break;case 52:for(u=[],c=0;c<n.length;)u.push(n[c++].t);switch(u.length){case 1:7==u[0]._hx_index?a=Le.TMat4:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;case 4:var c=u[0],_=u[1],d=u[2],p=u[3];5==c._hx_index&&4==c.size&&1==c.t._hx_index&&5==_._hx_index&&4==_.size&&1==_.t._hx_index&&5==d._hx_index&&4==d.size&&1==d.t._hx_index&&5==p._hx_index&&4==p.size&&1==p.t._hx_index?a=Le.TMat4:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;default:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i)}break;case 53:for(u=[],c=0;c<n.length;)u.push(n[c++].t);switch(u.length){case 1:7==u[0]._hx_index?a=Le.TMat3x4:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;case 3:c=u[0],_=u[1],d=u[2];5==c._hx_index&&4==c.size&&1==c.t._hx_index&&5==_._hx_index&&4==_.size&&1==_.t._hx_index&&5==d._hx_index&&4==d.size&&1==d.t._hx_index?a=Le.TMat3x4:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i);break;default:this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i)}break;case 68:a=Le.TVoid;break;case 80:for(u=[],c=0;c<n.length;)u.push(n[c++].t);3==u.length&&(c=u[0],_=u[2],11==c._hx_index)?(d=c.channels,this.unify(u[1],this.getSizeType(Ue.getDimSize(c.dim,c.isArray),K0.VInt),n[1].p),this.unify(_,1==d?Le.TFloat:Le.TVec(d,K0.VFloat),n[2].p),a=Le.TVoid):this.error("Cannot apply "+Mm.toString(e)+" to these parameters",i)}if(null==a)throw tl.thrown("Custom Global not supported "+el.string(e));return{e:j.TCall(t,n),t:a,p:i}},unifyCallParams:function(e,t,n,i){for(var s=1e3,a=-1e3,l=[],r=0;r<n.length;){var o=n[r],u=(++r,o.args.length);u<s&&(s=u),a<u&&(a=u),u==t.length&&l.push(o)}switch(l.length){case 0:if(0!=n.length)return this.error("Function expects "+(s==a?""+s:s+"-"+a)+" arguments",i);if(2!=(r=e.e)._hx_index)throw tl.thrown("assert");for(var h=r.g,r=[],c=0;c<t.length;)r.push(this.typeExpr(t[c++],uw.Value));return this.specialGlobal(h,e,r,i);case 1:for(var r=l[0],_=[],h=0,c=t.length;h<c;){var d=h++,p=r.args[d].type,m=this.typeExpr(t[d],uw.With(p));try{this.unifyExpr(m,p)}catch(b){CA.lastError=b;p=tl.caught(b).unwrap();throw p instanceof km?((w=p).msg+=" for argument '"+r.args[d].name+"'",tl.thrown(w)):b}_.push(m)}return 1<n.length&&(e.t=Le.TFun([r])),{e:j.TCall(e,_),t:r.ret,p:i};default:for(var g=null,f=-1,r=0;r<l.length;){for(var A=l[r],x=(++r,[]),h=0,c=t.length;h<c;){d=h++,m=this.typeExpr(t[d],uw.With(A.args[d].type));if(!this.tryUnify(m.t,A.args[d].type))break;x.push(m)}if(f<x.length&&(g=A,(f=x.length)==t.length))return e.t=Le.TFun([A]),{e:j.TCall(e,x),t:A.ret,p:i}}for(r=0,h=t.length;r<h;){d=r++;try{var w=this.typeExpr(t[d],uw.Value);this.unify(w.t,g.args[d].type,w.p)}catch(c){CA.lastError=c;var y,b=tl.caught(c).unwrap();throw b instanceof km?((y=b).msg+=" for argument '"+g.args[d].name+"'",tl.thrown(y)):c}}throw tl.thrown("assert")}},toFloat:function(e){if(e.t!=Le.TInt)throw tl.thrown("assert");var t=e.e;0==t._hx_index&&2==(t=t.c)._hx_index?e.e=j.TConst(L.CFloat(t.v)):e.e=j.TCall({e:j.TGlobal(xe.ToFloat),t:Le.TFun([]),p:e.p},[{e:e.e,t:e.t,p:e.p}]),e.t=Le.TFloat},typeBinop:function(e,t,n,i){switch(e._hx_index){case 4:throw tl.thrown("assert");case 5:case 6:case 7:case 8:case 9:case 10:switch(t.t._hx_index){case 2:if((e==tx.OpEq||e==tx.OpNotEq)&&n.t!=Le.TVoid)return this.unifyExpr(n,t.t),Le.TBool;var s=t.e,a=n.e;switch(s._hx_index){case 0:return 0==s.c._hx_index&&1==a._hx_index?(Ue.hasQualifier(a.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:return 0==a._hx_index&&0==a.c._hx_index?(Ue.hasQualifier(s.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:return this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 1:case 3:case 4:if(n.t!=Le.TVoid)return this.unifyExpr(n,t.t),Le.TBool;s=t.e,a=n.e;switch(s._hx_index){case 0:return 0==s.c._hx_index&&1==a._hx_index?(Ue.hasQualifier(a.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:return 0==a._hx_index&&0==a.c._hx_index?(Ue.hasQualifier(s.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:return this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 5:if(n.t!=Le.TVoid)return this.unifyExpr(n,t.t),t.t;s=t.e,a=n.e;switch(s._hx_index){case 0:return 0==s.c._hx_index&&1==a._hx_index?(Ue.hasQualifier(a.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:return 0==a._hx_index&&0==a.c._hx_index?(Ue.hasQualifier(s.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:return this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:s=t.e,a=n.e;switch(s._hx_index){case 0:return 0==s.c._hx_index&&1==a._hx_index?(Ue.hasQualifier(a.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:return 0==a._hx_index&&0==a.c._hx_index?(Ue.hasQualifier(s.v,ew.Nullable)||this.error("Variable is not declared as nullable",t.p),Le.TBool):this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:return this.error("Cannot compare "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}}break;case 11:case 12:case 13:case 16:case 17:case 18:return this.unifyExpr(t,Le.TInt),this.unifyExpr(n,Le.TInt),Le.TInt;case 14:case 15:return this.unifyExpr(t,Le.TBool),this.unifyExpr(n,Le.TBool),Le.TBool;case 0:case 1:case 2:case 3:case 19:s=t.t,a=n.t;if(1==e._hx_index)switch(s._hx_index){case 1:switch(a._hx_index){case 1:return Le.TInt;case 3:return this.toFloat(t),Le.TFloat;case 5:if(1==a.t._hx_index)return this.toFloat(t),n.t;switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 3:switch(a._hx_index){case 1:return this.toFloat(n),Le.TFloat;case 3:return Le.TFloat;case 5:if(1==a.t._hx_index)return n.t;switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 5:var l=s.size,r=s.t;switch(l){case 2:switch(r._hx_index){case 0:if(5==a._hx_index&&0==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VInt);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:switch(a._hx_index){case 1:return this.toFloat(n),t.t;case 3:return t.t;case 5:if(1==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VFloat);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 12:return Tm.vec2;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 3:switch(r._hx_index){case 0:if(5==a._hx_index&&0==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VInt);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:switch(a._hx_index){case 1:return this.toFloat(n),t.t;case 3:return t.t;case 5:if(1==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VFloat);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 6:case 8:return Tm.vec3;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 4:switch(r._hx_index){case 0:if(5==a._hx_index&&0==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VInt);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:switch(a._hx_index){case 1:return this.toFloat(n),t.t;case 3:return t.t;case 5:if(1==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VFloat);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 7:return Tm.vec4;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:switch(r._hx_index){case 0:if(5==a._hx_index&&0==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VInt);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:switch(a._hx_index){case 1:return this.toFloat(n),t.t;case 3:return t.t;case 5:if(1==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VFloat);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}}break;case 7:if(7==a._hx_index)return Le.TMat4;switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}else switch(s._hx_index){case 1:switch(a._hx_index){case 1:return Le.TInt;case 3:return this.toFloat(t),Le.TFloat;case 5:if(1==a.t._hx_index)return this.toFloat(t),n.t;switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 3:switch(a._hx_index){case 1:return this.toFloat(n),Le.TFloat;case 3:return Le.TFloat;case 5:if(1==a.t._hx_index)return n.t;switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 5:var o,l=s.size;switch(s.t._hx_index){case 0:if(5==a._hx_index&&0==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VInt);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);case 1:switch(a._hx_index){case 1:return this.toFloat(n),t.t;case 3:return t.t;case 5:if(1==a.t._hx_index&&l==a.size)return Le.TVec(l,K0.VFloat);switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i);default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;default:switch(e._hx_index){case 0:o="add";break;case 1:o="multiply";break;case 2:o="divide";break;case 3:o="subtract";break;default:throw tl.thrown("assert")}return this.error("Cannot "+o+" "+Ue.toString(t.t)+" and "+Ue.toString(n.t),i)}break;case 20:throw tl.thrown("assert");case 21:return this.unifyExpr(t,Le.TInt),this.unifyExpr(n,Le.TInt),Le.TArray(Le.TInt,J0.SConst(0));default:return this.error("Unsupported operator "+el.string(e),i)}},__class__:Tm},(i["hxsl.Clone"]=Em).__name__="hxsl.Clone",Em.shaderData=function(e){return(new Em).shader(e)},Em.prototype={tvar:function(e){var t=this.varMap.h[e.id];return null==t&&(t={id:Ue.allocVarId(),type:e.type,name:e.name,kind:e.kind},this.varMap.h[e.id]=t,null!=e.parent&&(t.parent=this.tvar(e.parent)),null!=e.qualifiers&&(t.qualifiers=e.qualifiers.slice()),t.type=this.ttype(e.type)),t},tfun:function(e){for(var t=this.ttype(e.ret),n=e.kind,i=this.tvar(e.ref),s=[],a=0,l=e.args;a<l.length;)s.push(this.tvar(l[a++]));return{ret:t,kind:n,ref:i,args:s,expr:this.texpr(e.expr)}},ttype:function(e){switch(e._hx_index){case 13:for(var t=e.vl,n=[],i=0;i<t.length;)n.push(this.tvar(t[i++]));return Le.TStruct(n);case 14:return Le.TFun(e.variants);case 15:var s,t=e.size,a=this.ttype(e.t);switch(t._hx_index){case 0:s=t;break;case 1:s=J0.SVar(this.tvar(t.v))}return Le.TArray(a,s);default:return e}},texpr:function(e){var t,n=Ue.map(e,Cn(this,this.texpr)),i=(n.t=this.ttype(e.t),n.e);switch(i._hx_index){case 1:t=j.TVar(this.tvar(i.v));break;case 7:t=j.TVarDecl(this.tvar(i.v),i.init);break;case 13:t=j.TFor(this.tvar(i.v),i.it,i.loop);break;default:t=n.e}return n.e=t,n},shader:function(e){for(var t=e.name,n=[],i=0,s=e.vars;i<s.length;)n.push(this.tvar(s[i++]));for(var i=[],s=0,a=e.funs;s<a.length;)i.push(this.tfun(a[s++]));return{name:t,vars:n,funs:i}},__class__:Em},(i["hxsl._Dce.VarRel"]=Fm).__name__="hxsl._Dce.VarRel",Fm.prototype={__class__:Fm},(i["hxsl._Dce.VarDeps"]=Dm).__name__="hxsl._Dce.VarDeps",Dm.prototype={__class__:Dm},(i["hxsl._Dce.WriteTo"]=Rm).__name__="hxsl._Dce.WriteTo",Rm.prototype={push:function(e,t){this.vars.push(e),this.bits.push(t)},pop:function(){this.vars.pop(),this.bits.pop()},append:function(e,t){for(var n=this.vars,i=0;i<n.length;)if(n[i++]==e)return void(this.bits[i-1]|=t);this.push(e,t)},appendTo:function(e){for(var t=this.vars,n=0;n<t.length;)e.append(t[n++],this.bits[n-1])},__class__:Rm},function(){this.fragDepthId=Ue.allocVarId()}),cw=((i["hxsl.Dce"]=hw).__name__="hxsl.Dce",hw.prototype={dce:function(e){this.used=new Je,this.channelVars=[];for(var t=[],n=0;n<e.length;)for(var i=0,s=e[n++].vars;i<s.length;){var a,l=s[i],r=(++i,this.get(l));if(l.kind==$0.Input&&t.push(r),l.kind!=$0.Output)switch((u=l.type)._hx_index){case 11:a=!0;break;case 16:a=2==u.kind._hx_index;break;default:a=!1}else a=!0;a&&(r.keep=15)}for(n=0;n<e.length;)for(i=0,s=e[n++].funs;i<s.length;)this.check(s[i++].expr,new Rm,new Rm);var o=[];do{for(l=this.used.iterator();l.hasNext();)0!=(c=l.next()).keep&&this.markRec(c,c.keep);for(;1<t.length&&0==t[t.length-1].used;)t.pop();for(n=0;n<t.length;)this.markRec(t[n++],15);for(o=[],i=0;i<e.length;)for(var s=0,u=e[i++].funs;s<u.length;)o.push(this.mapExpr(u[s++].expr,!1));this.markAsKeep=!1;for(var h=0;h<o.length;)this.checkBranches(o[h++])}while(this.markAsKeep);for(n=0;n<e.length;)for(i=0,s=e[n++].funs;i<s.length;)s[i++].expr=o.shift();for(l=this.used.iterator();l.hasNext();){var c=l.next();if(0==c.used&&c.v.kind!=$0.Input)for(n=0;n<e.length;)Jn.remove(e[n++].vars,c.v)}return e.slice()},get:function(e){var t=this.used.h[e.id];return null==t&&(t=new Dm(e),this.used.h[e.id]=t),t},markRec:function(e,t){if((e.used&t)!=t){e.used|=t&=~e.used;for(var n=0,i=e.adeps;n<i.length;){var s=i[n],a=(++n,this.makeFieldsBits(15,t));0!=(s.fields&a)&&this.markRec(s.v,this.extractFieldsBits(s.fields,t))}}},extractFieldsBits:function(e,t){return 15&((0==(1&t)?0:e)|(0==(2&t)?0:e>>4)|(0==(4&t)?0:e>>8)|(0==(8&t)?0:e>>12))},makeFieldsBits:function(e,t){return e*((1&t)+((2&t)<<3)+((4&t)<<6)+((8&t)<<9))},link:function(e,t,n){null==n&&(n=15);for(var i=this.get(e),s=t.vars,a=0;a<s.length;){var l,r=s[a],o=a++;null==r?0==i.keep&&(i.keep=15,this.markAsKeep=!0):(r=(null==(l=r.deps.h[e.id])&&(l=new Fm(i),r.deps.h[e.id]=l,r.adeps.push(l)),this.makeFieldsBits(n,t.bits[o])),(l.fields&r)!=r&&(l.fields|=r))}},swizBits:function(e){for(var t=0,n=0;n<e.length;)t|=1<<e[n++]._hx_index;return t},check:function(e,t,n){var i,s,z=this;switch((T=e.e)._hx_index){case 1:this.link(T.v,t);break;case 4:for(var a=T.el,Q=new Rm,l=0,r=a.length;l<r;){var o=l++;this.check(a[o],o<a.length-1?Q:t,n)}break;case 5:a=T.op,l=T.e2;switch((r=T.e1.e)._hx_index){case 1:var V=r.v;switch(a._hx_index){case 4:case 20:h=this.get(V);t.push(h,15),this.check(l,t,n),t.pop(),n.append(h,15);break;default:var V=this,O=t,W=n;Ue.iter(e,function(e){V.check(e,O,W)})}break;case 2:if(72==r.g._hx_index){h=this.get({id:this.fragDepthId,name:"FragDepth",type:Le.TFloat,kind:$0.Global});switch(a._hx_index){case 4:h.adeps=[],h.deps.h={};break;case 20:break;default:return}h.keep=15,t.push(h,15),this.check(l,t,n),t.pop()}else{var N=this,G=t,U=n;Ue.iter(e,function(e){N.check(e,G,U)})}break;case 9:var L=r.regs;switch((c=r.e.e)._hx_index){case 1:var u=c.v;switch(a._hx_index){case 4:case 20:var h=this.get(u),j=this.swizBits(L);t.push(h,j),this.check(l,t,n),t.pop(),n.append(h,j);break;default:var L=this,H=t,Y=n;Ue.iter(e,function(e){L.check(e,H,Y)})}break;case 16:u=c.index;if(1==(_=c.e.e)._hx_index){var c=_.v;switch(a._hx_index){case 4:case 20:h=this.get(c);t.push(h,15),this.check(u,t,n),this.check(l,t,n),t.pop(),n.append(h,15);break;default:var c=this,Z=t,X=n;Ue.iter(e,function(e){c.check(e,Z,X)})}}else{var u=this,q=t,K=n;Ue.iter(e,function(e){u.check(e,q,K)})}break;default:var _=this,J=t,$=n;Ue.iter(e,function(e){_.check(e,J,$)})}break;case 16:var ee=r.index;if(1==(p=r.e.e)._hx_index){var d=p.v;switch(a._hx_index){case 4:case 20:h=this.get(d);t.push(h,15),this.check(ee,t,n),this.check(l,t,n),t.pop(),n.append(h,15);break;default:var ee=this,te=t,ne=n;Ue.iter(e,function(e){ee.check(e,te,ne)})}}else{var p=this,ie=t,se=n;Ue.iter(e,function(e){p.check(e,ie,se)})}break;case 21:if(16==(d=r.e.e)._hx_index){var m,r=d.index;if(1==(m=d.e.e)._hx_index){d=m.v;switch(a._hx_index){case 4:case 20:h=this.get(d);t.push(h,15),this.check(r,t,n),this.check(l,t,n),t.pop(),n.append(h,15);break;default:var a=this,ae=t,le=n;Ue.iter(e,function(e){a.check(e,ae,le)})}}else{var l=this,re=t,oe=n;Ue.iter(e,function(e){l.check(e,re,oe)})}}else{var r=this,ue=t,he=n;Ue.iter(e,function(e){r.check(e,ue,he)})}break;default:var d=this,ce=t,_e=n;Ue.iter(e,function(e){d.check(e,ce,_e)})}break;case 7:null!=(m=T.init)?(t.push(this.get(T.v),15),this.check(m,t,n),t.pop()):(m=this,i=t,s=n,Ue.iter(e,function(e){m.check(e,i,s)}));break;case 8:var de,pe,g,me,ge,f,fe,Ae,xe,we,ye,A,be,ve,x,Ce,Se,w,ke,Me,y,Ie,Be,Te,Ee,b,Fe,De,v=T.args,C=T.e.e;if(2==C._hx_index)switch(C.g._hx_index){case 64:3==v.length?1==(C=v[0].e)._hx_index?(g=C.v,0==(C=v[2].e)._hx_index?2==(f=C.c)._hx_index?(C=f.v,this.check(v[1],t,n),null==this.channelVars[C]?(this.channelVars[C]=g,this.link(g,t)):this.link(this.channelVars[C],t)):(C=this,de=t,pe=n,Ue.iter(e,function(e){C.check(e,de,pe)})):(g=this,me=t,ge=n,Ue.iter(e,function(e){g.check(e,me,ge)}))):(f=this,fe=t,Ae=n,Ue.iter(e,function(e){f.check(e,fe,Ae)})):(xe=this,we=t,ye=n,Ue.iter(e,function(e){xe.check(e,we,ye)}));break;case 65:4==v.length?(A=v[2],1==(x=v[0].e)._hx_index?(w=x.v,0==(x=v[3].e)._hx_index?2==(y=x.c)._hx_index?(x=y.v,this.check(v[1],t,n),this.check(A,t,n),null==this.channelVars[x]?(this.channelVars[x]=w,this.link(w,t)):this.link(this.channelVars[x],t)):(A=this,be=t,ve=n,Ue.iter(e,function(e){A.check(e,be,ve)})):(x=this,Ce=t,Se=n,Ue.iter(e,function(e){x.check(e,Ce,Se)}))):(w=this,ke=t,Me=n,Ue.iter(e,function(e){w.check(e,ke,Me)}))):(y=this,Ie=t,Be=n,Ue.iter(e,function(e){y.check(e,Ie,Be)}));break;case 80:3==v.length?(b=v[1],S=v[2],1==(k=v[0].e)._hx_index?(h=this.get(k.v),t.push(h,15),this.check(b,t,n),this.check(S,t,n),t.pop(),n.append(h,15)):(v=this,Te=t,Ee=n,Ue.iter(e,function(e){v.check(e,Te,Ee)}))):(b=this,Fe=t,De=n,Ue.iter(e,function(e){b.check(e,Fe,De)}));break;default:var S=this,Re=t,Pe=n;Ue.iter(e,function(e){S.check(e,Re,Pe)})}else{var k=this,ze=t,Qe=n;Ue.iter(e,function(e){k.check(e,ze,Qe)})}break;case 9:var Ve,Oe,M=T.e.e;1==M._hx_index?this.link(M.v,t,this.swizBits(T.regs)):(M=this,Ve=t,Oe=n,Ue.iter(e,function(e){M.check(e,Ve,Oe)}));break;case 10:var I=T.eelse,B=new Rm;this.check(T.eif,t,B),null!=I&&this.check(I,t,B),B.appendTo(n),t.appendTo(B),this.check(T.econd,B,n);break;case 13:B=new Rm;this.check(T.loop,t,B),B.appendTo(n),this.check(T.it,B,n);break;case 19:B=new Rm;this.check(T.loop,t,B),B.appendTo(n),t.appendTo(B),this.check(T.e,B,n);break;case 22:for(var I=T.args,T=0;T<I.length;){var E=I[T];if(++T,E.access!=sw.Read)for(var F=[[]],D=[null],R=(D[0]=((n,i)=>function(e){var t=e.e;1==t._hx_index?i[0].push(z.get(t.v)):Ue.iter(e,n[0])})(D,F),D[0](E.e),0);R<F[0].length;){for(var h=F[0][R],P=(++R,t.push(h,15),0);P<I.length;){var We=I[P];++P,We.access!=sw.Write&&this.check(We.e,t,n)}t.pop(),n.append(h,15)}else this.check(E.e,t,n)}break;default:var T=this,Ne=t,Ge=n;Ue.iter(e,function(e){T.check(e,Ne,Ge)})}},checkBranches:function(e){var t,n=e.e;switch(n._hx_index){case 10:(t=new Rm).append(null,0),this.check(n.econd,t,new Rm);break;case 19:(t=new Rm).append(null,0),this.check(n.e,t,new Rm)}Ue.iter(e,Cn(this,this.checkBranches))},mapExpr:function(e,t){var n=this,i=e.e;switch(i._hx_index){case 4:for(var s=i.el,a=[],l=0,r=0;r<s.length;){var o=s[r++],u=t&&l==s.length-1,h=this.mapExpr(o,u);(Ue.hasSideEffect(h)||u)&&a.push(h),++l}return{e:j.TBlock(a),p:e.p,t:e.t};case 5:var c,s=i.e1,r=i.e2;switch(i.op._hx_index){case 4:switch((_=s.e)._hx_index){case 1:return 0==this.get(_.v).used?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)});case 2:return 72==_.g._hx_index?1==(d=r.e)._hx_index?0==this.get(d.v).used?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 9:return 1==(d=_.e.e)._hx_index?(c=d.v,0==this.get(c).used||0==(this.get(c).used&this.swizBits(_.regs))?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)})):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 16:return 1==(d=_.e.e)._hx_index?0==this.get(d.v).used?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});default:return Ue.map(e,function(e){return n.mapExpr(e,!0)})}break;case 20:switch((_=s.e)._hx_index){case 1:return 0==this.get(_.v).used?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)});case 2:return 72==_.g._hx_index?1==(s=r.e)._hx_index?0==this.get(s.v).used?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 9:return 1==(s=_.e.e)._hx_index?(r=s.v,0==this.get(r).used||0==(this.get(r).used&this.swizBits(_.regs))?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)})):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 16:return 1==(s=_.e.e)._hx_index?0==this.get(s.v).used?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});default:return Ue.map(e,function(e){return n.mapExpr(e,!0)})}break;default:return Ue.map(e,function(e){return n.mapExpr(e,!0)})}break;case 7:return 0==this.get(i.v).used?{e:j.TConst(L.CNull),t:e.t,p:e.p}:Ue.map(e,function(e){return n.mapExpr(e,!0)});case 8:s=i.args;if(2!=(r=i.e.e)._hx_index)return Ue.map(e,function(e){return n.mapExpr(e,!0)});switch(r.g._hx_index){case 64:return 3==s.length?0==(r=s[2].e)._hx_index?2==(_=r.c)._hx_index?(p=this.channelVars[_.v],{e:j.TCall({e:j.TGlobal(xe.Texture),p:e.p,t:Le.TVoid},[{e:j.TVar(p),t:p.type,p:e.p},this.mapExpr(s[1],!0)]),t:Le.TVoid,p:e.p}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 65:return 4==s.length?(r=s[2],0==(_=s[3].e)._hx_index?2==(d=_.c)._hx_index?(p=this.channelVars[d.v],{e:j.TCall({e:j.TGlobal(xe.TextureLod),p:e.p,t:Le.TVoid},[{e:j.TVar(p),t:p.type,p:e.p},this.mapExpr(s[1],!0),this.mapExpr(r,!0)]),t:Le.TVoid,p:e.p}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)})):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 66:switch(s.length){case 3:return 0==(r=s[2].e)._hx_index?2==(_=r.c)._hx_index?(p=this.channelVars[_.v],{e:j.TCall({e:j.TGlobal(xe.Texel),p:e.p,t:Le.TVoid},[{e:j.TVar(p),t:p.type,p:e.p},this.mapExpr(s[1],!0)]),t:Le.TVoid,p:e.p}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 4:var _,d,p,r=s[2];return 0==(_=s[3].e)._hx_index?2==(d=_.c)._hx_index?(p=this.channelVars[d.v],{e:j.TCall({e:j.TGlobal(xe.Texel),p:e.p,t:Le.TVoid},[{e:j.TVar(p),t:p.type,p:e.p},this.mapExpr(s[1],!0),this.mapExpr(r,!0)]),t:Le.TVoid,p:e.p}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});default:return Ue.map(e,function(e){return n.mapExpr(e,!0)})}break;case 67:switch(s.length){case 2:return 0==(r=s[1].e)._hx_index?2==(_=r.c)._hx_index?(p=this.channelVars[_.v],{e:j.TCall({e:j.TGlobal(xe.TextureSize),p:e.p,t:Le.TVoid},[{e:j.TVar(p),t:p.type,p:e.p}]),t:Le.TVoid,p:e.p}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});case 3:return 0==(r=s[2].e)._hx_index?2==(_=r.c)._hx_index?(p=this.channelVars[_.v],{e:j.TCall({e:j.TGlobal(xe.TextureSize),p:e.p,t:Le.TVoid},[{e:j.TVar(p),t:p.type,p:e.p},this.mapExpr(s[1],!0)]),t:Le.TVoid,p:e.p}):Ue.map(e,function(e){return n.mapExpr(e,!0)}):Ue.map(e,function(e){return n.mapExpr(e,!0)});default:return Ue.map(e,function(e){return n.mapExpr(e,!0)})}break;default:return Ue.map(e,function(e){return n.mapExpr(e,!0)})}break;case 10:var s=i.eelse,o=this.mapExpr(i.econd,!0),m=this.mapExpr(i.eif,t),g=null==s?null:this.mapExpr(s,t);return t||Ue.hasSideEffect(m)||null!=g&&Ue.hasSideEffect(g)?{e:j.TIf(o,m,g),p:o.p,t:o.t}:{e:j.TConst(L.CNull),t:o.t,p:o.p};case 13:var m=this.mapExpr(i.it,!0),f=this.mapExpr(i.loop,!1);return Ue.hasSideEffect(f)?{e:j.TFor(i.v,m,f),p:e.p,t:e.t}:{e:j.TConst(L.CNull),t:e.t,p:e.p};case 19:o=this.mapExpr(i.e,!0),f=this.mapExpr(i.loop,t);return Ue.hasSideEffect(f)?{e:j.TWhile(o,f,i.normalWhile),p:o.p,t:o.t}:{e:j.TConst(L.CNull),t:o.t,p:o.p};case 20:g=this.mapExpr(i.e,t);return t||Ue.hasSideEffect(g)?{e:j.TMeta(i.m,i.args,g),t:e.t,p:e.p}:{e:j.TConst(L.CNull),t:e.t,p:e.p};default:return Ue.map(e,function(e){return n.mapExpr(e,!0)})}},__class__:hw},(i["hxsl.Debug"]=Pm).__name__="hxsl.Debug",(i["hxsl.Eval"]=zm).__name__="hxsl.Eval",zm.prototype={setConstant:function(e,t){this.constants.h[e.id]=j.TConst(t)},mapVar:function(e,t){var n=this.varMap.h[e.__id__];if(null==n){if(null!=e.parent&&(this.mapVar(e.parent,t),null!=(n=this.varMap.h[e.__id__])))return e==n?n:this.mapVar(n,t);n={id:17==e.type._hx_index?e.id:Ue.allocVarId(),name:e.name,type:e.type,kind:e.kind};switch(null!=e.parent&&(n.parent=this.mapVar(e.parent,t)),null!=e.qualifiers&&(n.qualifiers=e.qualifiers.slice()),this.varMap.set(e,n),this.varMap.set(n,n),t&&this.mapped.push(e),(u=n.type)._hx_index){case 13:for(var i=u.vl,s=[],a=0;a<i.length;)s.push(this.mapVar(i[a++],t));n.type=Le.TStruct(s);break;case 15:i=u.t;if(1==(s=u.size)._hx_index){a=s.v;if(null!=(o=this.constants.h[a.id]))if(null==o)km.t("Integer value expected for array size constant "+a.name,null);else if(0==o._hx_index)if(2==(s=o.c)._hx_index){var l=s.v;switch((s=n.type)._hx_index){case 15:h=Le.TArray(i,J0.SConst(l));break;case 16:h=Le.TBuffer(i,J0.SConst(l),s.kind);break;default:throw tl.thrown("assert")}n.type=h}else km.t("Integer value expected for array size constant "+a.name,null);else km.t("Integer value expected for array size constant "+a.name,null);else{var r=this.mapVar(a,t);switch((s=n.type)._hx_index){case 15:h=Le.TArray(i,J0.SVar(r));break;case 16:h=Le.TBuffer(i,J0.SVar(r),s.kind);break;default:throw tl.thrown("assert")}n.type=h}}break;case 16:i=u.t;if(1==(s=u.size)._hx_index){var o,u=s.v;if(null!=(o=this.constants.h[u.id]))if(null==o)km.t("Integer value expected for array size constant "+u.name,null);else if(0==o._hx_index)if(2==(s=o.c)._hx_index){a=s.v;switch((s=n.type)._hx_index){case 15:h=Le.TArray(i,J0.SConst(a));break;case 16:h=Le.TBuffer(i,J0.SConst(a),s.kind);break;default:throw tl.thrown("assert")}n.type=h}else km.t("Integer value expected for array size constant "+u.name,null);else km.t("Integer value expected for array size constant "+u.name,null);else{var h,r=this.mapVar(u,t);switch((u=n.type)._hx_index){case 15:h=Le.TArray(i,J0.SVar(r));break;case 16:h=Le.TBuffer(i,J0.SVar(r),u.kind);break;default:throw tl.thrown("assert")}n.type=h}}}}return n},checkTextureRec:function(e){if(Ue.isTexture(e))return!0;switch(e._hx_index){case 13:for(var t=e.vl,n=0;n<t.length;)if(this.checkTextureRec(t[n++].type))return!0;return!1;case 15:return this.checkTextureRec(e.t);case 16:return!0}return!1},needsInline:function(e){for(var t=0,n=e.args;t<n.length;)if(this.checkTextureRec(n[t++].type))return!0;return!1},eval:function(e){for(var t=[],n=0,i=e.funs;n<i.length;){for(var s=i[n],a=(++n,s.kind),l=this.mapVar(s.ref,!1),r=[],o=0,u=s.args;o<u.length;)r.push(this.mapVar(u[o++],!1));a={kind:a,ref:l,args:r,ret:s.ret,expr:s.expr};s.kind==iw.Helper&&this.inlineCalls||this.needsInline(a)?this.funMap.set(a.ref,s):t.push(a)}for(n=0,i=t.length;n<i;)this.curFun=t[n++],this.curFun.expr=this.evalExpr(this.curFun.expr,!1);for(var h=e.name,n=[],i=0,r=e.vars;i<r.length;)n.push(this.mapVar(r[i++],!1));return{name:h,vars:n,funs:t}},hasReturn:function(e){return this.markReturn=!1,this.hasReturnLoop(e),this.markReturn},hasReturnLoop:function(e){12==e.e._hx_index?this.markReturn=!0:this.markReturn||Ue.iter(e,Cn(this,this.hasReturnLoop))},handleReturn:function(e,t){null==t&&(t=!1);var n,i=e.e;switch(i._hx_index){case 3:var s=this.handleReturn(i.e,t);return{e:j.TParenthesis(s),t:s.t,p:e.p};case 4:var a=0,l=(c=i.el).length,r=[];e:for(;a<l;){var o=c[a++];if(a==l)r.push(this.handleReturn(o,t));else{var u=o.e;switch(u._hx_index){case 10:var h=u.eif;if(null==u.eelse&&t&&this.hasReturn(h)){r.push(this.handleReturn({e:j.TIf(u.econd,h,{e:j.TBlock(c.slice(a)),t:o.t,p:o.p}),t:o.t,p:o.p}));break e}r.push(this.handleReturn(o));break;case 12:r.push(this.handleReturn(u.e,t));break e;default:r.push(this.handleReturn(o))}}}return{e:j.TBlock(r),t:t?0==r.length?Le.TVoid:r[r.length-1].t:e.t,p:e.p};case 10:return null!=(c=i.eelse)&&t?(s=this.handleReturn(i.econd),n=this.handleReturn(i.eif,t),{e:j.TIf(s,n,this.handleReturn(c,t)),t:n.t,p:e.p}):Ue.map(e,Cn(this,this.handleReturnDef));case 12:var c=i.e;return t||km.t("Cannot inline not final return",e.p),null==c?{e:j.TBlock([]),t:Le.TVoid,p:e.p}:this.handleReturn(c,!0);default:return Ue.map(e,Cn(this,this.handleReturnDef))}},handleReturnDef:function(e){return this.handleReturn(e)},evalCall:function(e,t,n,i){switch(e._hx_index){case 28:return 1==t.length&&1==(u=t[0].e)._hx_index&&15==(h=u.v.type)._hx_index&&0==(u=h.size)._hx_index?j.TConst(L.CInt(u.v)):null;case 39:return 1==t.length&&0==(u=t[0].e)._hx_index&&2==(h=u.c)._hx_index?j.TConst(L.CFloat(h.v)):null;case 64:case 65:if(0!=(u=t[0].e)._hx_index)throw km.t("Cannot eval complex channel "+fw.toString(t[0],!0)+" "+this.constantsToString(),i),tl.thrown("assert");if(2!=(h=u.c)._hx_index)throw km.t("Cannot eval complex channel "+fw.toString(t[0],!0)+" "+this.constantsToString(),i),tl.thrown("assert");var s=h.v,a=n[0];if(1!=(u=a.e)._hx_index)throw tl.thrown("assert");if(17!=(u=(a={e:j.TVar(this.mapVar(u.v,!1)),t:a.t,p:a.p}).t)._hx_index)throw tl.thrown("assert");for(var l=u.size,r=U.createEnumIndex(rw,7&s,null),o=[a],u=1,h=t.length;u<h;)o.push(t[u++]);o.push({e:j.TConst(L.CInt(s>>3)),t:Le.TInt,p:i});var c,_={e:j.TCall({e:j.TGlobal(e),t:Le.TVoid,p:i},o),t:Le.TVoid,p:i};switch(r._hx_index){case 0:var d={e:j.TConst(L.CFloat(0)),t:Le.TFloat,p:i};return 1==l?d.e:j.TCall({e:j.TGlobal([xe.Vec2,xe.Vec3,xe.Vec4][l-2]),t:Le.TVoid,p:i},[d]);case 1:case 2:case 3:case 4:switch(l){case 1:switch(r._hx_index){case 1:c=[aw.X];break;case 2:c=[aw.Y];break;case 3:c=[aw.Z];break;case 4:c=[aw.W];break;default:throw tl.thrown("Invalid channel value "+el.string(r)+" for "+l+" channels")}break;case 2:switch(r._hx_index){case 1:c=[aw.X,aw.Y];break;case 2:c=[aw.Y,aw.Z];break;case 3:c=[aw.Z,aw.W];break;default:throw tl.thrown("Invalid channel value "+el.string(r)+" for "+l+" channels")}break;case 3:switch(r._hx_index){case 1:c=[aw.X,aw.Y,aw.Z];break;case 2:c=[aw.Y,aw.Z,aw.W];break;default:throw tl.thrown("Invalid channel value "+el.string(r)+" for "+l+" channels")}break;default:throw tl.thrown("Invalid channel value "+el.string(r)+" for "+l+" channels")}return j.TSwiz(_,c);case 5:return j.TCall({e:j.TGlobal(xe.Unpack),t:Le.TVoid,p:i},[_]);case 6:return j.TCall({e:j.TGlobal(xe.UnpackNormal),t:Le.TVoid,p:i},[_])}break;case 68:for(u=0;u<t.length;){var p=t[u];++u,_p.trace(fw.toString(p),{fileName:p.p.file,lineNumber:0,className:null,methodName:null})}return j.TBlock([]);default:return null}},constantsToString:function(){for(var e=[],t=this.constants.keys();t.hasNext();){var n=t.next();e.push(n+" => "+fw.toString({e:this.constants.h[n],t:Le.TVoid,p:null},!0))}return e.toString()},ifBlock:function(e){return null==e||10!=e.e._hx_index?e:{e:j.TBlock([e]),t:e.t,p:e.p}},evalExpr:function(e,t){null==t&&(t=!0);var n=this,i=e.t;switch((D=e.e)._hx_index){case 0:s=e.e;break;case 1:var s,a=D.v;s=null!=(f=this.constants.h[a.id])?f:(i=(B=this.mapVar(a,!1)).type,j.TVar(B));break;case 2:s=e.e;break;case 3:s=0==(p=this.evalExpr(D.e,t)).e._hx_index?p.e:j.TParenthesis(p);break;case 4:for(var a=D.el,l=this.mapped.length,r=[],o=a.length-1,u=0,h=a.length;u<h;){var c=u++,_=t&&c==o;switch((p=this.evalExpr(a[c],_)).e._hx_index){case 0:case 1:_&&r.push(p);break;default:r.push(p)}}for(;this.mapped.length>l;){var d=this.mapped.pop();null!=(B=this.varMap.h[d.__id__])&&(this.varMap.remove(d),this.varMap.remove(B))}s=1==r.length&&this.curFun.kind!=iw.Init?r[0].e:j.TBlock(r);break;case 5:var a=D.op,p=this.evalExpr(D.e1),m=this.evalExpr(D.e2);switch(a._hx_index){case 0:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 2:s=0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v+u.v|0)):j.TBinop(a,p,m);break;case 3:s=0==h._hx_index&&3==(u=h.c)._hx_index?j.TConst(L.CFloat(A.v+u.v)):j.TBinop(a,p,m);break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 1:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 2:s=0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v*u.v|0)):j.TBinop(a,p,m);break;case 3:s=0==h._hx_index&&3==(u=h.c)._hx_index?j.TConst(L.CFloat(A.v*u.v)):j.TBinop(a,p,m);break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 2:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 2:s=0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v/u.v|0)):j.TBinop(a,p,m);break;case 3:s=0==h._hx_index&&3==(u=h.c)._hx_index?j.TConst(L.CFloat(A.v/u.v)):j.TBinop(a,p,m);break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 3:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 2:s=0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v-u.v|0)):j.TBinop(a,p,m);break;case 3:s=0==h._hx_index&&3==(u=h.c)._hx_index?j.TConst(L.CFloat(A.v-u.v)):j.TBinop(a,p,m);break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 4:case 21:s=j.TBinop(a,p,m);break;case 5:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 0:s=0==h._hx_index?0==h.c._hx_index?j.TConst(L.CBool(!0)):j.TConst(L.CBool(!1)):j.TBinop(a,p,m);break;case 1:u=A.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 1:s=j.TConst(L.CBool(0==(u==b.b?0:1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 2:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 2:s=j.TConst(L.CBool(u-b.v==0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 3:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 3:var g=b.v;s=j.TConst(L.CBool(0==(g<u?1:u==g?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 4:u=A.v;if(0==h._hx_index)switch((A=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 4:h=A.v;s=j.TConst(L.CBool(0==(h<u?1:u==h?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 6:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 0:s=0==h._hx_index?0==h.c._hx_index?j.TConst(L.CBool(!1)):j.TConst(L.CBool(!0)):j.TBinop(a,p,m);break;case 1:u=A.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 1:s=j.TConst(L.CBool(0!=(u==b.b?0:1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 2:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 2:s=j.TConst(L.CBool(u-b.v!=0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 3:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 3:g=b.v;s=j.TConst(L.CBool(0!=(g<u?1:u==g?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 4:u=A.v;if(0==h._hx_index)switch((A=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 4:h=A.v;s=j.TConst(L.CBool(0!=(h<u?1:u==h?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 7:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 0:s=0==h._hx_index?(h.c._hx_index,j.TConst(L.CBool(!1))):j.TBinop(a,p,m);break;case 1:u=A.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 1:s=j.TConst(L.CBool(0<(u==b.b?0:1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 2:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 2:s=j.TConst(L.CBool(0<u-b.v));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 3:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 3:g=b.v;s=j.TConst(L.CBool(0<(g<u?1:u==g?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 4:u=A.v;if(0==h._hx_index)switch((A=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 4:h=A.v;s=j.TConst(L.CBool(0<(h<u?1:u==h?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 8:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 0:s=0==h._hx_index?0==h.c._hx_index?j.TConst(L.CBool(!0)):j.TConst(L.CBool(!1)):j.TBinop(a,p,m);break;case 1:u=A.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 1:s=j.TConst(L.CBool(0<=(u==b.b?0:1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 2:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 2:s=j.TConst(L.CBool(0<=u-b.v));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 3:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 3:g=b.v;s=j.TConst(L.CBool(0<=(g<u?1:u==g?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 4:u=A.v;if(0==h._hx_index)switch((A=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!0));break;case 4:h=A.v;s=j.TConst(L.CBool(0<=(h<u?1:u==h?0:-1)));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 9:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 0:s=0==h._hx_index?0==h.c._hx_index?j.TConst(L.CBool(!1)):j.TConst(L.CBool(!0)):j.TBinop(a,p,m);break;case 1:u=A.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 1:s=j.TConst(L.CBool((u==b.b?0:1)<0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 2:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 2:s=j.TConst(L.CBool(u-b.v<0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 3:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 3:g=b.v;s=j.TConst(L.CBool((g<u?1:u==g?0:-1)<0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 4:u=A.v;if(0==h._hx_index)switch((A=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 4:h=A.v;s=j.TConst(L.CBool((h<u?1:u==h?0:-1)<0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 10:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 0:s=0==h._hx_index?(h.c._hx_index,j.TConst(L.CBool(!0))):j.TBinop(a,p,m);break;case 1:u=A.b;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 1:s=j.TConst(L.CBool((u==b.b?0:1)<=0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 2:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 2:s=j.TConst(L.CBool(u-b.v<=0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 3:u=A.v;if(0==h._hx_index)switch((b=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 3:g=b.v;s=j.TConst(L.CBool((g<u?1:u==g?0:-1)<=0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 4:u=A.v;if(0==h._hx_index)switch((A=h.c)._hx_index){case 0:s=j.TConst(L.CBool(!1));break;case 4:h=A.v;s=j.TConst(L.CBool((h<u?1:u==h?0:-1)<=0));break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 11:u=p.e,h=m.e;s=0==u._hx_index&&2==(A=u.c)._hx_index&&0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v&u.v)):j.TBinop(a,p,m);break;case 12:u=p.e,h=m.e;s=0==u._hx_index&&2==(A=u.c)._hx_index&&0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v|u.v)):j.TBinop(a,p,m);break;case 13:u=p.e,h=m.e;s=0==u._hx_index&&2==(A=u.c)._hx_index&&0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v^u.v)):j.TBinop(a,p,m);break;case 14:u=p.e,h=m.e;s=0==u._hx_index?1==(A=u.c)._hx_index?(u=A.b,0==h._hx_index&&1==(A=h.c)._hx_index?j.TConst(L.CBool(u&&A.b)):0==u?j.TConst(L.CBool(u)):m.e):0==h._hx_index&&1==(u=h.c)._hx_index?0==(A=u.b)?j.TConst(L.CBool(A)):p.e:j.TBinop(a,p,m):0==h._hx_index&&1==(u=h.c)._hx_index?0==(h=u.b)?j.TConst(L.CBool(h)):p.e:j.TBinop(a,p,m);break;case 15:u=p.e,h=m.e;s=0==u._hx_index?1==(A=u.c)._hx_index?(u=A.b,0==h._hx_index&&1==(A=h.c)._hx_index?j.TConst(L.CBool(u||A.b)):1==u?j.TConst(L.CBool(u)):m.e):0==h._hx_index&&1==(u=h.c)._hx_index?1==(A=u.b)?j.TConst(L.CBool(A)):p.e:j.TBinop(a,p,m):0==h._hx_index&&1==(u=h.c)._hx_index?1==(h=u.b)?j.TConst(L.CBool(h)):p.e:j.TBinop(a,p,m);break;case 16:u=p.e,h=m.e;s=0==u._hx_index&&2==(A=u.c)._hx_index&&0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v<<u.v)):j.TBinop(a,p,m);break;case 17:u=p.e,h=m.e;s=0==u._hx_index&&2==(A=u.c)._hx_index&&0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v>>u.v)):j.TBinop(a,p,m);break;case 18:u=p.e,h=m.e;s=0==u._hx_index&&2==(A=u.c)._hx_index&&0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v>>>u.v)):j.TBinop(a,p,m);break;case 19:u=p.e,h=m.e;if(0==u._hx_index)switch((A=u.c)._hx_index){case 2:s=0==h._hx_index&&2==(u=h.c)._hx_index?j.TConst(L.CInt(A.v%u.v|0)):j.TBinop(a,p,m);break;case 3:s=0==h._hx_index&&3==(u=h.c)._hx_index?j.TConst(L.CFloat(A.v%u.v)):j.TBinop(a,p,m);break;default:s=j.TBinop(a,p,m)}else s=j.TBinop(a,p,m);break;case 20:s=j.TBinop(a,p,m);break;default:throw tl.thrown("assert")}break;case 6:a=D.op;if(0==(u=(p=this.evalExpr(D.e1)).e)._hx_index){h=u.c;switch(a._hx_index){case 2:s=1==h._hx_index?j.TConst(L.CBool(!h.b)):j.TUnop(a,p);break;case 3:switch(h._hx_index){case 2:s=j.TConst(L.CInt(-h.v));break;case 3:s=j.TConst(L.CFloat(-h.v));break;default:s=j.TUnop(a,p)}break;default:s=j.TUnop(a,p)}}else s=j.TUnop(a,p);break;case 7:a=D.init;s=j.TVarDecl(this.mapVar(D.v,!0),null==a?null:this.evalExpr(a));break;case 8:for(var a=D.args,f=this.evalExpr(D.e),u=[],h=0;h<a.length;)u.push(this.evalExpr(a[h++]));switch((h=f.e)._hx_index){case 1:var A=h.v;if(null!=this.funMap.h.__keys__[A.__id__]){for(var x=this.funMap.h[A.__id__],w=[],y=[],A=0,b=x.args.length;A<b;){c=A++,d=[x.args[c]];switch((g=(p=u[c]).e)._hx_index){case 0:y.push(((e,t)=>function(){null==e[0]?n.constants.remove(t[0].id):n.constants.h[t[0].id]=e[0]})([this.constants.h[d[0].id]],d)),this.constants.h[d[0].id]=p.e;break;case 1:switch(g.v.kind._hx_index){case 0:case 1:case 2:y.push(((e,t)=>function(){null==e[0]?n.constants.remove(t[0].id):n.constants.h[t[0].id]=e[0]})([this.constants.h[d[0].id]],d)),this.constants.h[d[0].id]=p.e;break;default:var v=[this.varMap.h[d[0].__id__]];null==v[0]?y.push((e=>function(){n.varMap.remove(e[0])})(d)):(this.varMap.remove(d[0]),y.push(((e,t)=>function(){n.varMap.set(t[0],e[0])})(v,d))),w.push({e:j.TVarDecl(this.mapVar(d[0],!1),p),t:Le.TVoid,p:p.p})}break;default:var C=[this.varMap.h[d[0].__id__]];null==C[0]?y.push((e=>function(){n.varMap.remove(e[0])})(d)):(this.varMap.remove(d[0]),y.push(((e,t)=>function(){n.varMap.set(t[0],e[0])})(C,d))),w.push({e:j.TVarDecl(this.mapVar(d[0],!1),p),t:Le.TVoid,p:p.p})}}for(p=this.handleReturn(this.evalExpr(x.expr,!1),!0),A=0;A<y.length;)y[A++]();if(4==(A=p.e)._hx_index)for(b=A.el,A=0;A<b.length;)w.push(b[A++]);else w.push(p);s=j.TBlock(w)}else s=j.TCall(f,u);break;case 2:var S=this.evalCall(h.g,u,a,e.p);s=null!=S?S:j.TCall(f,u);break;default:s=km.t("Cannot eval non-static call expresssion '"+(new fw).exprString(f)+"'",f.p)}break;case 9:s=j.TSwiz(this.evalExpr(D.e),D.regs.slice());break;case 10:var k=a=D.eif,M=u=D.eelse,I=this.evalExpr(D.econd);s=0==(h=I.e)._hx_index?1==(A=h.c)._hx_index?A.b?this.evalExpr(a,t).e:null==u?j.TConst(L.CNull):this.evalExpr(u,t).e:t&&null!=u&&this.eliminateConditionals?j.TCall({e:j.TGlobal(xe.Mix),t:e.t,p:e.p},[this.evalExpr(u,!0),this.evalExpr(a,!0),{e:j.TCall({e:j.TGlobal(xe.ToFloat),t:Le.TFun([]),p:I.p},[I]),t:Le.TFloat,p:e.p}]):(k=this.evalExpr(a,t),null!=u&&0==(h=(M=this.evalExpr(u,t)).e)._hx_index&&0==h.c._hx_index&&(M=null),k=this.ifBlock(k),M=this.ifBlock(M),j.TIf(I,k,M)):t&&null!=u&&this.eliminateConditionals?j.TCall({e:j.TGlobal(xe.Mix),t:e.t,p:e.p},[this.evalExpr(u,!0),this.evalExpr(a,!0),{e:j.TCall({e:j.TGlobal(xe.ToFloat),t:Le.TFun([]),p:I.p},[I]),t:Le.TFloat,p:e.p}]):(k=this.evalExpr(a,t),null!=u&&0==(a=(M=this.evalExpr(u,t)).e)._hx_index&&0==a.c._hx_index&&(M=null),k=this.ifBlock(k),M=this.ifBlock(M),j.TIf(I,k,M));break;case 11:s=j.TDiscard;break;case 12:a=D.e;s=j.TReturn(null==a?null:this.evalExpr(a));break;case 13:var a=D.v,u=D.loop,B=this.mapVar(a,!0),I=this.evalExpr(D.it);if(5==(h=I.e)._hx_index)if(21==h.op._hx_index){A=h.e1.e;if(0==A._hx_index)if(2==(b=A.c)._hx_index){A=h.e2.e;if(0==A._hx_index)if(2==(h=A.c)._hx_index){A=h.v;if(this.unrollLoops){for(r=[],h=b.v;h<A;)this.constants.h[a.id]=j.TConst(L.CInt(h++)),r.push(this.evalExpr(u,!1));this.constants.remove(a.id),p=j.TBlock(r)}else p=j.TFor(B,I,this.ifBlock(this.evalExpr(u,!1)))}else p=j.TFor(B,I,this.ifBlock(this.evalExpr(u,!1)));else p=j.TFor(B,I,this.ifBlock(this.evalExpr(u,!1)))}else p=j.TFor(B,I,this.ifBlock(this.evalExpr(u,!1)));else p=j.TFor(B,I,this.ifBlock(this.evalExpr(u,!1)))}else p=j.TFor(B,I,this.ifBlock(this.evalExpr(u,!1)));else p=j.TFor(B,I,this.ifBlock(this.evalExpr(u,!1)));this.varMap.remove(a),s=p;break;case 14:s=j.TContinue;break;case 15:s=j.TBreak;break;case 16:p=this.evalExpr(D.e),m=this.evalExpr(D.index),a=p.e,u=m.e;if(17==a._hx_index){h=a.el;if(0==u._hx_index)if(2==(a=u.c)._hx_index)if(0<=(u=a.v)&&u<h.length)s=h[u].e;else{switch((a=p.t)._hx_index){case 15:case 16:i=a.t}s=j.TArray(p,m)}else{switch((a=p.t)._hx_index){case 15:case 16:i=a.t}s=j.TArray(p,m)}else{switch((a=p.t)._hx_index){case 15:case 16:i=a.t}s=j.TArray(p,m)}}else{switch((a=p.t)._hx_index){case 15:case 16:i=a.t}s=j.TArray(p,m)}break;case 17:for(a=D.el,u=[],h=0;h<a.length;)u.push(this.evalExpr(a[h++]));s=j.TArrayDecl(u);break;case 18:for(a=D.cases,u=D.def,p=this.evalExpr(D.e),h=[],A=0;A<a.length;){for(var f=a[A],b=(++A,[]),g=0,T=f.values;g<T.length;)b.push(this.evalExpr(T[g++]));h.push({values:b,expr:this.evalExpr(f.expr,t)})}var k=null==u?null:this.evalExpr(u,t),E=!1;if(0==(a=p.e)._hx_index){if(2!=(u=a.c)._hx_index)throw tl.thrown("Unsupported switch constant "+el.string(u));for(a=u.v,A=0;A<h.length;)for(f=h[A],b=(++A,0),g=f.values;b<g.length;)if(0==(T=g[b++].e)._hx_index){var F=T.c;switch(F._hx_index){case 2:case 3:if(F.v==a)return f.expr}}else E=!0}else E=!0;s=E?j.TSwitch(p,h,k):null==k?j.TBlock([]):k.e;break;case 19:s=j.TWhile(this.evalExpr(D.e),this.ifBlock(this.evalExpr(D.loop,!1)),D.normalWhile);break;case 20:a=D.m,u=D.e;"unroll"==a?(this.unrollLoops=!0,m=this.evalExpr(u,t),this.unrollLoops=!1):m=this.evalExpr(u,t),s=j.TMeta(a,D.args,m);break;case 21:s=j.TField(this.evalExpr(D.e),D.name);break;case 22:for(var a=D.target,u=D.code,h=D.args,D=[],A=0;A<h.length;){var R=h[A];++A,D.push({e:this.evalExpr(R.e),access:R.access})}s=j.TSyntax(a,u,D)}return{e:s,t:i,p:e.p}},__class__:zm},(i["hxsl._Flatten.Alloc"]=Qm).__name__="hxsl._Flatten.Alloc",Qm.prototype={__class__:Qm},fe["hxsl.ARead"]={__ename__:!0,__constructs__:null,AIndex:((R=function(e){return{_hx_index:0,a:e,__enum__:"hxsl.ARead",toString:o}})._hx_name="AIndex",R.__params__=["a"],R),AOffset:((R=function(e,t,n){return{_hx_index:1,a:e,stride:t,delta:n,__enum__:"hxsl.ARead",toString:o}})._hx_name="AOffset",R.__params__=["a","stride","delta"],R)}),_w=(cw.__constructs__=[cw.AIndex,cw.AOffset],cw.__empty_constructs__=[],function(){}),dw=((i["hxsl.Flatten"]=_w).__name__="hxsl.Flatten",_w.prototype={flatten:function(e,t){this.globals=[],this.params=[],this.outVars=[],this.textureFormats=[],this.varMap=new VA,this.allocData=new VA;for(var n,i=0,s=e.vars;i<s.length;)this.gatherVar(s[i++]);switch(t._hx_index){case 0:n="vertex";break;case 1:n="fragment";break;case 4:n="compute";break;default:throw tl.thrown("assert")}this.pack(n+"Globals",$0.Global,this.globals,K0.VFloat),this.pack(n+"Params",$0.Param,this.params,K0.VFloat);for(var a=this.globals.concat(this.params),i=(this.textureFormats.sort(function(e,t){return e.rw!=t.rw?e.rw-t.rw:e.arr!=t.arr?e.arr?1:-1:e.dim._hx_index-t.dim._hx_index}),0),s=this.textureFormats;i<s.length;){var l,r=s[i];++i,l=r.dim==q0.T2D?"":(l=r.dim,Jn.substr(fe[l.__enum__].__constructs__[l._hx_index]._hx_name,1,null)),0<r.rw&&(l="RW"+l+r.rw),r.arr&&(l+="Array"),this.packTextures(n+"Textures"+l,a,0==r.rw?Le.TSampler(r.dim,r.arr):Le.TRWTexture(r.dim,r.arr,r.rw))}this.packBuffers("buffers",a,X0.Uniform),this.packBuffers("storagebuffers",a,X0.Storage),this.packBuffers("rwbuffers",a,X0.RW);for(var i=[],s=0,o=e.funs;s<o.length;)i.push(this.mapFun(o[s++],Cn(this,this.mapExpr)));return{name:e.name,vars:this.outVars,funs:i}},mapFun:function(e,t){return{kind:e.kind,ret:e.ret,args:e.args,ref:e.ref,expr:t(e.expr)}},mkOp:function(e,t,n,i,s){var a=e.e;if(0==a._hx_index){a=a.c;if(2==a._hx_index)return{e:j.TConst(L.CInt(n(a.v,t))),t:Le.TInt,p:s}}return{e:j.TBinop(i,e,{e:j.TConst(L.CInt(t)),t:Le.TInt,p:s}),t:Le.TInt,p:s}},mkAdd:function(e,t,n){return 0==t?e:this.mkOp(e,t,function(e,t){return e+t},tx.OpAdd,n)},mkMult:function(e,t,n){return 1==t?e:this.mkOp(e,t,function(e,t){return e*t},tx.OpMult,n)},mapExpr:function(e){switch((x=e.e)._hx_index){case 1:var t=x.v;null!=(f=this.varMap.h[t.__id__])&&(e=this.access(f,t.type,e.p,cw.AIndex(f)));break;case 5:var t=x.e1,n=x.e2;if(4==x.op._hx_index)if(7==e.t._hx_index&&21==t.e._hx_index){if(21!=(l=t.e)._hx_index)throw tl.thrown("assert");var i=l.e,s=l.name;if(7!=t.t._hx_index)throw tl.thrown("assert");var a=-1;if(13==(t=i.t)._hx_index)for(var l=t.vl,r=0,t=0;t<l.length;){var o=l[t];if(++t,o.name==s){a=r;break}r+=Ue.size(o.type)}if(a<0)throw tl.thrown("assert");var u=a,h=this.mapExpr(i),c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(u>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),_={e:j.TBinop(tx.OpAssign,0==(3&u)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&u,4+(3&u))),t:Le.TVec(4,K0.VFloat),p:e.p},{e:j.TArray(n,{e:j.TConst(L.CInt(0)),t:Le.TInt,p:null}),t:Le.TVec(4,K0.VFloat),p:null}),t:e.t,p:e.p},a=u+4,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),d={e:j.TBinop(tx.OpAssign,0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p},{e:j.TArray(n,{e:j.TConst(L.CInt(1)),t:Le.TInt,p:null}),t:Le.TVec(4,K0.VFloat),p:null}),t:e.t,p:e.p},a=u+8,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),p={e:j.TBinop(tx.OpAssign,0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p},{e:j.TArray(n,{e:j.TConst(L.CInt(2)),t:Le.TInt,p:null}),t:Le.TVec(4,K0.VFloat),p:null}),t:e.t,p:e.p},a=u+12,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)});e={e:j.TBlock([_,d,p,{e:j.TBinop(tx.OpAssign,0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p},{e:j.TArray(n,{e:j.TConst(L.CInt(3)),t:Le.TInt,p:null}),t:Le.TVec(4,K0.VFloat),p:null}),t:e.t,p:e.p}]),t:e.t,p:e.p}}else e=Ue.map(e,Cn(this,this.mapExpr));else e=Ue.map(e,Cn(this,this.mapExpr));break;case 7:var m,t=x.v,n=x.init;e=13==t.type._hx_index?(b=Math.ceil(Ue.size(t.type)/4),m={id:Ue.allocVarId(),name:t.name,type:Le.TArray(Le.TVec(4,K0.VFloat),J0.SConst(b)),kind:t.kind,qualifiers:t.qualifiers},(f=new Qm(m,K0.VFloat,0,0)).v=t,this.varMap.set(t,f),{e:j.TVarDecl(m,null==n?null:this.mapExpr(n)),t:Le.TVoid,p:e.p}):Ue.map(e,Cn(this,this.mapExpr));break;case 16:t=x.e,n=x.index,l=t.e,i=t.p;if(1==l._hx_index){var t=l.v,g=n,f=this.varMap.h[t.__id__];if(_=null==f||16!=t.type._hx_index&&0==(l=n.e)._hx_index&&2==l.c._hx_index)e=Ue.map(e,Cn(this,this.mapExpr));else switch((l=t.type)._hx_index){case 5:switch(l.t._hx_index){case 0:case 1:e=Ue.map(e,Cn(this,this.mapExpr));break;default:throw tl.thrown("assert")}break;case 15:var A,s=l.t;if(Ue.isTexture(s))g=this.toInt(this.mapExpr(n)),e=this.access(f,s,i,cw.AOffset(f,1,g));else{if(0==(A=this.varSize4Bytes(s,f.t))||15==t.type._hx_index&&0!=(3&A))throw tl.thrown(new km("Dynamic access to an Array which size is not 4 components-aligned is not allowed",e.p));A=A+3>>2,g=this.toInt(this.mapExpr(n)),e=this.access(f,s,i,cw.AOffset(f,A,this.mkMult(g,A,i)))}break;case 16:switch((s=l.t)._hx_index){case 1:case 3:e=Ue.map(e,Cn(this,this.mapExpr));break;default:if(0==(A=this.varSize4Bytes(s,f.t))||15==t.type._hx_index&&0!=(3&A))throw tl.thrown(new km("Dynamic access to an Array which size is not 4 components-aligned is not allowed",e.p));A=A+3>>2,g=this.toInt(this.mapExpr(n)),e=this.access(f,s,i,cw.AOffset(f,A,this.mkMult(g,A,i)))}break;default:throw tl.thrown("assert")}}else e=Ue.map(e,Cn(this,this.mapExpr));break;case 21:t=x.e,n=x.name,a=-1;if(13==(x=t.t)._hx_index)for(var l=x.vl,r=0,x=0;x<l.length;){o=l[x];if(++x,o.name==n){a=r;break}r+=Ue.size(o.type)}if(a<0)throw tl.thrown("assert");u=a,h=this.mapExpr(t);switch((x=e.t)._hx_index){case 3:e={e:j.TSwiz(this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(u>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),_w.SWIZ.slice(3&u,1+(3&u))),t:Le.TFloat,p:e.p};break;case 5:t=x.size;if(1!=x.t._hx_index)throw tl.thrown("Unsupported type "+Ue.toString(e.t));var w=u+t-1>>2;if(u>>2==w){c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(u>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)});e=4==t&&0==(3&u)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&u,(3&u)+t)),t:1==t?Le.TFloat:Le.TVec(t,K0.VFloat),p:e.p}}else{var y,w=(w<<2)-u;switch(t){case 2:y=xe.Vec2;break;case 3:y=xe.Vec3;break;case 4:y=xe.Vec4;break;default:throw tl.thrown("assert")}var _={e:j.TGlobal(y),p:e.p,t:Le.TVoid},c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(u>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),d=4==w&&0==(3&u)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&u,(3&u)+w)),t:1==w?Le.TFloat:Le.TVec(w,K0.VFloat),p:e.p},a=u+w,b=t-w,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)});e={e:j.TCall(_,[d,4==b&&0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,(3&a)+b)),t:1==b?Le.TFloat:Le.TVec(b,K0.VFloat),p:e.p}]),t:e.t,p:e.p}}break;case 7:var _={e:j.TGlobal(xe.Mat4),p:e.p,t:Le.TVoid},c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(u>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),d=0==(3&u)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&u,4+(3&u))),t:Le.TVec(4,K0.VFloat),p:e.p},a=u+4,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),p=0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p},a=u+8,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),w=0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p},a=u+12,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)});e={e:j.TCall(_,[d,p,w,0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p}]),t:e.t,p:e.p};break;case 8:_={e:j.TGlobal(xe.Mat3x4),p:e.p,t:Le.TVoid},c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(u>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),d=0==(3&u)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&u,4+(3&u))),t:Le.TVec(4,K0.VFloat),p:e.p},a=u+4,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),p=0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p},a=u+8,c=this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(a>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)});e={e:j.TCall(_,[d,p,0==(3&a)?c:{e:j.TSwiz(c,_w.SWIZ.slice(3&a,4+(3&a))),t:Le.TVec(4,K0.VFloat),p:e.p}]),t:e.t,p:e.p};break;case 9:e={e:j.TCall({e:j.TGlobal(xe.UnpackSnorm4x8),p:e.p,t:Le.TVec(x.size,K0.VFloat)},[this.floatBitsToUint({e:j.TSwiz(this.optimize({e:j.TArray(h,{e:j.TConst(L.CInt(u>>2)),p:e.p,t:Le.TInt}),p:e.p,t:Le.TVec(4,K0.VFloat)}),_w.SWIZ.slice(3&u,1+(3&u))),t:Le.TFloat,p:e.p})]),t:e.t,p:e.p};break;default:throw tl.thrown("Unsupported type "+Ue.toString(e.t))}break;default:e=Ue.map(e,Cn(this,this.mapExpr))}return this.optimize(e)},access:function(e,t,n,i){switch(t._hx_index){case 6:var s=this.access(e,Le.TMat3x4,n,i);return{e:j.TCall({e:j.TGlobal(xe.Mat3),t:Le.TFun([]),p:n},[s]),t:Le.TMat3,p:n};case 7:s={e:j.TGlobal(xe.Mat4),t:Le.TFun([]),p:n};switch(i._hx_index){case 0:var a=i.a;o={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt(null==a.t?a.pos:a.pos>>2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:var a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?0:null==a.t?a.pos:a.pos>>2,n);o={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}switch(i._hx_index){case 0:a=i.a;u={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt((null==a.t?a.pos:a.pos>>2)+1)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?1:(null==a.t?a.pos:a.pos>>2)+1,n);u={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}switch(i._hx_index){case 0:a=i.a;h={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt((null==a.t?a.pos:a.pos>>2)+2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?2:(null==a.t?a.pos:a.pos>>2)+2,n);h={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}switch(i._hx_index){case 0:var a=i.a,r={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt((null==a.t?a.pos:a.pos>>2)+3)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?3:(null==a.t?a.pos:a.pos>>2)+3,n);r={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}return{e:j.TCall(s,[o,u,h,r]),t:Le.TMat4,p:n};case 8:var o,u,h,s={e:j.TGlobal(xe.Mat3x4),t:Le.TFun([]),p:n};switch(i._hx_index){case 0:a=i.a;o={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt(null==a.t?a.pos:a.pos>>2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?0:null==a.t?a.pos:a.pos>>2,n);o={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}switch(i._hx_index){case 0:a=i.a;u={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt((null==a.t?a.pos:a.pos>>2)+1)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?1:(null==a.t?a.pos:a.pos>>2)+1,n);u={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}switch(i._hx_index){case 0:a=i.a;h={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt((null==a.t?a.pos:a.pos>>2)+2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?2:(null==a.t?a.pos:a.pos>>2)+2,n);h={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}return{e:j.TCall(s,[o,u,h]),t:Le.TMat3x4,p:n};case 13:for(var a=t.vl,c=0,_=0;_<a.length;)c+=this.varSize(a[_++].type,e.t);for(var d=Math.ceil(c/4),a=[],_=0;_<d;){var p=_++;switch(i._hx_index){case 0:var m=i.a;s={e:j.TArray({e:j.TVar(m.g),t:m.g.type,p:n},{e:j.TConst(L.CInt((null==m.t?m.pos:m.pos>>2)+p)),t:Le.TInt,p:n}),t:Le.TVec(4,m.t),p:n};break;case 1:var g=i.a,l=this.mkAdd(i.delta,16==g.g.type._hx_index?p:(null==g.t?g.pos:g.pos>>2)+p,n);s={e:j.TArray({e:j.TVar(g.g),t:g.g.type,p:n},l),t:Le.TVec(4,g.t),p:n}}a.push(s)}return{e:j.TArrayDecl(a),t:Le.TArray(Le.TVec(4,K0.VFloat),J0.SConst(d)),p:n};case 15:a=t.t;if(0==(_=t.size)._hx_index){for(m=_.v,d=e.size/m|0,_=[],g=0;g<m;){var f=new Qm(e.g,e.t,e.pos+d*g++,d);_.push(this.access(f,a,n,cw.AIndex(f)))}return{e:j.TArrayDecl(_),t:a,p:n}}if(Ue.isTexture(t)){switch(i._hx_index){case 0:a=i.a;x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt(null==a.t?a.pos:a.pos>>2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?0:null==a.t?a.pos:a.pos>>2,n);x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}x.t=t}else{if(4<(c=this.varSize(t,e.t)))return km.t("Access not supported for "+Ue.toString(t),null);switch(i._hx_index){case 0:a=i.a;x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt(null==a.t?a.pos:a.pos>>2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?0:null==a.t?a.pos:a.pos>>2,n);x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}if(4==c){if(-1==e.pos)return{e:j.TCall({e:j.TGlobal(xe.Vec4),t:Le.TFun([]),p:n},[{e:j.TConst(L.CFloat(0)),t:Le.TFloat,p:n}]),t:Le.TVec(4,K0.VFloat),p:n}}else{for(var A=[],a=0;a<c;)A.push(Ue.SWIZ[a+++(3&e.pos)]);x={e:j.TSwiz(x,A),t:t,p:n}}switch(t._hx_index){case 1:x.t=Le.TFloat,x=this.toInt(x);break;case 5:a=t.size;0==t.t._hx_index&&(x.t=Le.TVec(a,K0.VFloat),x={e:j.TCall({e:j.TGlobal([xe.IVec2,xe.IVec3,xe.IVec4][a-2]),t:Le.TFun([]),p:n},[x]),t:t,p:n})}}return x;case 16:return{e:j.TVar(e.g),t:t,p:n};default:if(Ue.isTexture(t)){switch(i._hx_index){case 0:a=i.a;x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt(null==a.t?a.pos:a.pos>>2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?0:null==a.t?a.pos:a.pos>>2,n);x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}x.t=t}else{var x;if(4<(c=this.varSize(t,e.t)))return km.t("Access not supported for "+Ue.toString(t),null);switch(i._hx_index){case 0:a=i.a;x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},{e:j.TConst(L.CInt(null==a.t?a.pos:a.pos>>2)),t:Le.TInt,p:n}),t:Le.TVec(4,a.t),p:n};break;case 1:a=i.a,l=this.mkAdd(i.delta,16==a.g.type._hx_index?0:null==a.t?a.pos:a.pos>>2,n);x={e:j.TArray({e:j.TVar(a.g),t:a.g.type,p:n},l),t:Le.TVec(4,a.t),p:n}}if(4==c){if(-1==e.pos)return{e:j.TCall({e:j.TGlobal(xe.Vec4),t:Le.TFun([]),p:n},[{e:j.TConst(L.CFloat(0)),t:Le.TFloat,p:n}]),t:Le.TVec(4,K0.VFloat),p:n}}else{for(A=[],a=0;a<c;)A.push(Ue.SWIZ[a+++(3&e.pos)]);x={e:j.TSwiz(x,A),t:t,p:n}}switch(t._hx_index){case 1:x.t=Le.TFloat,x=this.toInt(x);break;case 5:a=t.size;0==t.t._hx_index&&(x.t=Le.TVec(a,K0.VFloat),x={e:j.TCall({e:j.TGlobal([xe.IVec2,xe.IVec3,xe.IVec4][a-2]),t:Le.TFun([]),p:n},[x]),t:t,p:n})}}return x}},floatBitsToUint:function(e){return{e:j.TCall({e:j.TGlobal(xe.FloatBitsToUint),t:Le.TFun([]),p:e.p},[e]),t:Le.TInt,p:e.p}},toInt:function(e){return e.t==Le.TInt?e:{e:j.TCall({e:j.TGlobal(xe.ToInt),t:Le.TFun([]),p:e.p},[e]),t:Le.TInt,p:e.p}},optimize:function(e){switch((r=e.e)._hx_index){case 8:var t=r.args,n=r.e.e;if(2==n._hx_index)if(53==n.g._hx_index)if(1==t.length)if(8==(n=t[0].e)._hx_index){var t=n.args,i=n.e.e;if(2==i._hx_index&&52==i.g._hx_index){for(var s=0,a=0;a<4;)a+=this.varSize(t[t.length-1-s].t,K0.VFloat),++s;if(4==a){for(var l,n=0,i=s;n<i;)++n,t.pop();if(8!=(n=e.e)._hx_index)throw tl.thrown("assert");return l=n.e,{e:j.TCall(l,t),t:e.t,p:e.p}}}}break;case 16:if(17==(t=r.e.e)._hx_index){var r,n=t.el,t=r.index.e;if(0==t._hx_index)if(2==(r=t.c)._hx_index){if(0<=(t=r.v)&&t<n.length)return n[t];km.t("Reading outside array bounds",e.p)}}}return e},packTextures:function(e,t,n){for(var i=[],s={id:Ue.allocVarId(),name:e,type:n,kind:$0.Param},a=0,l=[],r=0;r<t.length;){var o=t[r],u=(++r,1);if(!U.enumEq(o.type,n))switch((A=o.type)._hx_index){case 15:var h=A.size;if(0!=h._hx_index)continue;if(!U.enumEq(A.t,n))continue;u=h.v;break;case 17:if(10!=n._hx_index||1!=n.dim._hx_index||0!=n.isArray)continue;break;default:continue}var c=new Qm(s,null,a,u);if(null!=(c.v=o).qualifiers)for(var _=0,d=o.qualifiers;_<d.length;){var p=d[_];if(++_,12==p._hx_index)for(var m=p.name,g=0,f=u;g<f;)l[a+g++]=m}this.varMap.set(o,c),i.push(c),a+=u}if(s.type=Le.TArray(n,J0.SConst(a)),0<l.length){for(var r=0,A=a;r<A;){var x=r++;null==l[x]&&(l[x]="")}null==s.qualifiers&&(s.qualifiers=[]),s.qualifiers.push(ew.Sampler(l.join(",")))}return 0<i.length&&(this.outVars.push(s),this.allocData.set(s,i)),i},packBuffers:function(e,t,n){for(var i=[],e={id:Ue.allocVarId(),name:e,type:Le.TVoid,kind:$0.Param},s=0;s<t.length;){var a=t[s],l=(++s,a.type);if(16==l._hx_index){var r=l.t,o=l.size,u=l.kind;if(0==o._hx_index){var h=o.v;if(n==u){var c,_,d=Math.ceil(Ue.size(r)/4);switch(r._hx_index){case 1:case 3:switch(n._hx_index){case 1:case 2:case 4:case 5:_=!0;break;default:_=!1}c=_?a.type:Le.TBuffer(Le.TVec(4,K0.VFloat),J0.SConst(h*d),u);break;default:c=Le.TBuffer(Le.TVec(4,K0.VFloat),J0.SConst(h*d),u)}l={id:Ue.allocVarId(),name:a.name,type:c,kind:$0.Param},o=new Qm(l,null,i.length,1);o.t=K0.VFloat,o.v=a,i.push(o),this.varMap.set(a,o),this.outVars.push(l)}}}}e.type=Le.TArray(Le.TBuffer(Le.TVoid,J0.SConst(0),n),J0.SConst(i.length)),this.allocData.set(e,i)},pack:function(e,t,n,i){for(var s=[],a=0,l={id:Ue.allocVarId(),name:e,type:Le.TVec(0,i),kind:t},r=0;r<n.length;){var o=n[r];if(++r,!Ue.isTexture(o.type)&&16!=o.type._hx_index){var u=o.type;if(15!=u._hx_index||!Ue.isTexture(u.t)){var h=this.varSize(o.type,i);if(0==h){u=new Qm(l,i,-1,h);u.v=o,this.varMap.set(o,u)}else{for(var c=null,_=0;_<s.length;){var d=s[_];++_,null==d.v&&d.size>=h&&(null==c||c.size>d.size)&&(c=d)}null!=c?(0<(u=c.size-h)&&(s.splice(s.indexOf(c)+1,0,new Qm(l,i,c.pos+h,u)),c.size=h),c.v=o,this.varMap.set(o,c)):(u=new Qm(l,i,a,h),a+=h,u.v=o,this.varMap.set(o,u),s.push(u),0<(o=(4-h%4)%4)&&(u=new Qm(l,i,a,o),a+=o,s.push(u)))}}}}return l.type=Le.TArray(Le.TVec(4,i),J0.SConst(a>>2)),0<a&&(this.outVars.push(l),this.allocData.set(l,s)),l},varSize:function(e,t){switch(e._hx_index){case 1:case 3:if(t==K0.VFloat)return 1;throw tl.thrown(Ue.toString(e)+" size unknown for type "+el.string(t));case 5:if(t==e.t)return e.size;throw tl.thrown(Ue.toString(e)+" size unknown for type "+el.string(t));case 7:if(t==K0.VFloat)return 16;throw tl.thrown(Ue.toString(e)+" size unknown for type "+el.string(t));case 6:case 8:if(t==K0.VFloat)return 12;throw tl.thrown(Ue.toString(e)+" size unknown for type "+el.string(t));case 9:return e.size;case 13:for(var n=e.vl,i=0,s=0;s<n.length;)i+=this.varSize(n[s++].type,t);return i;case 15:if(0==(n=e.size)._hx_index)return this.varSize(e.t,t)*n.v;throw tl.thrown(Ue.toString(e)+" size unknown for type "+el.string(t));default:throw tl.thrown(Ue.toString(e)+" size unknown for type "+el.string(t))}},varSize4Bytes:function(e,t){switch(e._hx_index){case 9:if(4==e.size)return 1;throw tl.thrown(Ue.toString(e)+" 4 bytes size unknown for type"+el.string(t));case 13:for(var n=e.vl,i=0,s=0;s<n.length;)i+=this.varSize4Bytes(n[s++].type,t);return i;case 15:return 0==(n=e.size)._hx_index?this.varSize4Bytes(e.t,t)*n.v:this.varSize(e,t);default:return this.varSize(e,t)}},addTextureFormat:function(e,t,n){null==n&&(n=0);for(var i=0,s=this.textureFormats;i<s.length;){var a=s[i];if(++i,a.dim==e&&a.arr==t&&a.rw==n)return}this.textureFormats.push({dim:e,arr:t,rw:n})},gatherVar:function(e){var t=e.type;switch(t._hx_index){case 10:case 11:var n=e.type;this.addTextureFormat(t.dim,t.isArray,11==n._hx_index?n.channels:0);break;case 13:for(var n=t.vl,i=0;i<n.length;)this.gatherVar(n[i++]);return;case 15:switch((n=t.t)._hx_index){case 10:this.addTextureFormat(n.dim,n.isArray,0);break;case 11:this.addTextureFormat(n.dim,n.isArray,n.channels)}break;case 17:this.addTextureFormat(q0.T2D,!1)}switch(e.kind._hx_index){case 0:(Ue.hasQualifier(e,ew.PerObject)?this.params:this.globals).push(e);break;case 2:this.params.push(e);break;default:this.outVars.push(e)}},__class__:_w},function(){this.channels=[],this.map=new Je}),pw=((i["hxsl.Globals"]=dw).__name__="hxsl.Globals",dw.ALL=null,dw.MAP=null,dw.allocID=function(e){null==dw.MAP&&(dw.MAP=new at,dw.ALL=[]);var t=dw.MAP.h[e];return null==t&&(t=dw.ALL.length,dw.ALL.push(e),dw.MAP.h[e]=t),t},dw.prototype={set:function(e,t){var n=this.map,e=dw.allocID(e);n.h[e]=t},allocChannelID:function(e){for(var t=0,n=this.maxChannels;t<n;){var i=t++;if(this.channels[i]==e)return i}if(this.maxChannels==1<<Ue.MAX_CHANNELS_BITS)throw tl.thrown("Too many unique channels");i=this.maxChannels++;return this.channels[i]=e,i},__class__:dw},function(){this.computeLayout=[1,1,1],this.outIndex=0,this.uniformBuffer=0,this.exprIds=0,this.varNames=new Je,this.allNames=new at}),mw=((i["hxsl.GlslOut"]=pw).__name__="hxsl.GlslOut",pw.prototype={decl:function(e){for(var t=0,n=this.decls;t<n.length;)if(n[t++]==e)return;35==Jn.cca(e,0)?this.decls.unshift(e):this.decls.push(e)},getSamplerType:function(e,t){e="sampler"+Jn.substr(fe[e.__enum__].__constructs__[e._hx_index]._hx_name,1,null);return t&&(e+="Array"),e},addType:function(e){switch(e._hx_index){case 0:this.buf.b+="void";break;case 1:this.buf.b+="int";break;case 2:this.buf.b+="bool";break;case 3:this.buf.b+="float";break;case 4:this.buf.b+="string";break;case 5:var t=e.size;switch(e.t._hx_index){case 0:this.buf.b+="i";break;case 1:break;case 2:this.buf.b+="b"}this.buf.b+="vec",this.buf.b+=el.string(t);break;case 6:this.buf.b+="mat3";break;case 7:this.buf.b+="mat4";break;case 8:this.decl(pw.MAT34),this.buf.b+="_mat3x4";break;case 9:this.buf.b+="vec",this.buf.b+=el.string(e.size);break;case 10:var t=e.dim,n=e.isArray,i=this.getSamplerType(t,n);this.buf.b+=el.string(i),null==this.glES||!n&&t!=q0.T3D||this.decl("precision lowp "+i+";");break;case 11:t=e.dim;this.buf.b+=el.string("image"+Jn.substr(fe[t.__enum__].__constructs__[t._hx_index]._hx_name,1,null)+(e.isArray?"Array":""));break;case 12:this.buf.b+="mat2";break;case 13:for(t=e.vl,n=(this.buf.b+="struct { ",0);n<t.length;)this.addVar(t[n++]),this.buf.b+=";";this.buf.b+=" }";break;case 14:this.buf.b+="function";break;case 15:t=e.size;switch(this.addType(e.t),this.buf.b+="[",t._hx_index){case 0:switch(n=t.v){case 0:break;case 1:this.intelDriverFix?this.buf.b+="2":this.buf.b+=el.string(n);break;default:this.buf.b+=el.string(n)}break;case 1:var s=this.varName(t.v);this.buf.b+=el.string(s)}this.buf.b+="]";break;case 16:throw tl.thrown("assert");case 17:this.buf.b+=el.string("channel"+e.size)}},addVar:function(e){var t=e.type;switch(t._hx_index){case 15:var n=t.size,i=e.type;switch(e.type=t.t,this.addVar(e),e.type=i,this.buf.b+="[",n._hx_index){case 0:switch(a=n.v){case 0:break;case 1:this.intelDriverFix?this.buf.b+="2":this.buf.b+=el.string(a);break;default:this.buf.b+=el.string(a)}break;case 1:var s=this.varName(n.v);this.buf.b+=el.string(s)}this.buf.b+="]";break;case 16:var n=t.t,a=t.size,i=t.kind;switch(i._hx_index){case 0:case 3:break;case 1:case 4:this.buf.b+="storage_";break;case 2:case 5:this.buf.b+="rw_"}this.buf.b+=el.string((this.isVertex?"vertex_":"")+"uniform_buffer"+this.uniformBuffer++),this.buf.b+=" { ",e.type=Le.TArray(n,a),this.addVar(e),e.type=Le.TBuffer(n,a,i),this.buf.b+="; }";break;default:this.addType(e.type),this.buf.b+=" ";s=this.varName(e);this.buf.b+=el.string(s)}},addValue:function(e,t){var n=e.e;switch(n._hx_index){case 4:var i="_val"+this.exprIds++,s=this.buf,a=(this.buf=new b,this.addType(e.t),this.buf.b+=" ",this.buf.b+=el.string(i),this.buf.b+="(void)",n.el.slice()),l=a[a.length-1];a[a.length-1]={e:j.TReturn(l),t:e.t,p:l.p},this.addExpr({t:Le.TVoid,e:j.TBlock(a),p:e.p},""),this.exprValues.push(this.buf.b),this.buf=s,this.buf.b+=el.string(i),this.buf.b+="()";break;case 10:this.buf.b+="( ",this.addValue(n.econd,t),this.buf.b+=" ) ? ",this.addValue(n.eif,t),this.buf.b+=" : ",this.addValue(n.eelse,t);break;case 20:this.addValue(n.e,t);break;default:this.addExpr(e,t)}},addBlock:function(e,t){this.addExpr(e,t)},getFunName:function(e,t,n){switch(e._hx_index){case 20:if(n==Le.TInt&&null!=this.glES)return this.decl("int _imod( int x, int y ) { return int(mod(float(x),float(y))); }"),"_imod";break;case 25:this.decl("float invLerp(float v, float a, float b) { return clamp((v - a) / (b - a), 0.0, 1.0); }");break;case 34:switch((i=t[0].t)._hx_index){case 10:switch(i.dim._hx_index){case 1:if(null!=this.glES&&this.glES<=2)return"texture2D";break;case 3:if(null!=this.glES&&this.glES<=2)return"textureCube"}break;case 17:if(null!=this.glES&&this.glES<=2)return"texture2D"}break;case 35:switch((i=t[0].t)._hx_index){case 10:switch(i.dim._hx_index){case 1:if(null!=this.glES&&this.glES<=2)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"texture2DLodEXT";break;case 3:if(null!=this.glES&&this.glES<=2)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"textureCubeLodEXT"}break;case 17:if(null!=this.glES&&this.glES<=2)return this.decl("#extension GL_EXT_shader_texture_lod : enable"),"texture2DLodEXT"}break;case 36:return"texelFetch";case 37:var i,s="";switch((i=t[0].t)._hx_index){case 10:var a=i.dim,l=i.isArray,r=Ue.getDimSize(a,l),s=l?"Array":"";this.decl("vec"+r+" _texture"+s+"Size(sampler"+Jn.substr(fe[a.__enum__].__constructs__[a._hx_index]._hx_name,1,null)+s+" sampler, int lod) { return vec"+r+"(textureSize(sampler, lod)); }");break;case 11:return"vec"+Ue.getDimSize(i.dim,i.isArray)+"(imageSize";case 17:this.decl("vec2 _textureSize(sampler2D sampler, int lod) { return vec2(textureSize(sampler, lod)); }")}return"_texture"+s+"Size";case 51:if(t[0].t==Le.TMat3x4)return this.decl(pw.MAT34),this.decl("mat3 _mat3( _mat3x4 v ) { return mat3(v.a.xyz,v.b.xyz,v.c.xyz); }"),"_mat3";break;case 53:if(this.decl(pw.MAT34),1==t.length)return this.decl("_mat3x4 mat_to_34( mat4 m ) { return _mat3x4(m[0],m[1],m[2]); }"),"mat_to_34";break;case 55:this.decl("vec4 pack( float v ) { vec4 color = fract(v * vec4(1, 255, 255.*255., 255.*255.*255.)); return color - color.yzww * vec4(1. / 255., 1. / 255., 1. / 255., 0.); }");break;case 56:this.decl("float unpack( vec4 color ) { return dot(color,vec4(1., 1. / 255., 1. / (255. * 255.), 1. / (255. * 255. * 255.))); }");break;case 57:this.decl("vec4 packNormal( vec3 v ) { return vec4((v + vec3(1.)) * vec3(0.5),1.); }");break;case 58:this.decl("vec3 unpackNormal( vec4 v ) { return normalize((v.xyz - vec3(0.5)) * vec3(2.)); }");break;case 59:this.decl("vec2 screenToUv( vec2 v ) { return v * vec2(0.5,-0.5) + vec2(0.5,0.5); }");break;case 60:this.decl("vec2 uvToScreen( vec2 v ) { return v * vec2(2.,-2.) + vec2(-1., 1.); }");break;case 61:case 62:case 63:if(this.isVertex)throw tl.thrown("Can't use "+el.string(e)+" in vertex shader");this.version<300&&this.decl("#extension GL_OES_standard_derivatives:enable");break;case 75:this.version<330&&this.decl("#extension GL_ARB_shader_bit_encoding :enable"),this.decl("int _floatBitsToUint( float v) { return int(floatBitsToUint(v)); }"),this.decl("ivec2 _floatBitsToUint( vec2 v ) { return ivec2(floatBitsToUint(v)); }"),this.decl("ivec3 _floatBitsToUint( vec3 v ) { return ivec3(floatBitsToUint(v)); }"),this.decl("ivec4 _floatBitsToUint( vec4 v ) { return ivec4(floatBitsToUint(v)); }");break;case 74:case 76:this.version<330&&this.decl("#extension GL_ARB_shader_bit_encoding :enable");break;case 77:this.version<330&&this.decl("#extension GL_ARB_shader_bit_encoding :enable"),this.decl("float _uintBitsToFloat( int v ) { return uintBitsToFloat(uint(v)); }"),this.decl("vec2 _uintBitsToFloat( ivec2 v ) { return uintBitsToFloat(uvec2(v)); }"),this.decl("vec3 _uintBitsToFloat( ivec3 v ) { return uintBitsToFloat(uvec3(v)); }"),this.decl("vec4 _uintBitsToFloat( ivec4 v ) { return uintBitsToFloat(uvec4(v)); }")}return pw.GLOBALS[e._hx_index]},addExpr:function(e,t){var n=e.e;switch(n._hx_index){case 0:switch((a=n.c)._hx_index){case 0:this.buf.b+="null";break;case 1:this.buf.b+=el.string(a.b);break;case 2:this.buf.b+=el.string(a.v);break;case 3:var i=""+a.v;this.buf.b+=el.string(i),-1==i.indexOf(".")&&-1==i.indexOf("e")&&(this.buf.b+=".");break;case 4:this.buf.b+=el.string('"'+a.v+'"')}break;case 1:var s=this.varName(n.v);this.buf.b+=el.string(s);break;case 2:this.buf.b+=el.string(pw.GLOBALS[n.g._hx_index]);break;case 3:this.buf.b+="(",this.addValue(n.e,t),this.buf.b+=")";break;case 4:for(var a=n.el,l=(this.buf.b+="{\n",t+"\t"),r=0;r<a.length;){var o=a[r];++r,this.buf.b+=el.string(l),this.addExpr(o,l),this.newLine(o)}this.buf.b+=el.string(t),this.buf.b+="}";break;case 5:var a=n.op,r=n.e1,u=n.e2,h=r.t,c=u.t;switch(a._hx_index){case 1:5==h._hx_index&&3==h.size&&1==h.t._hx_index&&8==c._hx_index?(this.decl(pw.MAT34),this.decl("vec3 m3x4mult( vec3 v, _mat3x4 m) { vec4 ve = vec4(v,1.0); return vec3(dot(m.a,ve),dot(m.b,ve),dot(m.c,ve)); }"),20==a._hx_index&&(this.addValue(r,t),this.buf.b+=" = "),this.buf.b+="m3x4mult(",this.addValue(r,t),this.buf.b+=",",this.addValue(u,t),this.buf.b+=")"):(this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t));break;case 5:case 6:case 7:case 8:case 9:case 10:if(5==h._hx_index)if(5==c._hx_index){switch(this.buf.b+=el.string("vec"+h.size+"("),a._hx_index){case 5:s="equal";break;case 6:s="notEqual";break;case 7:s="greaterThan";break;case 8:s="greaterThanEqual";break;case 9:s="lessThan";break;case 10:s="lessThanEqual";break;default:throw tl.thrown("assert")}this.buf.b+=el.string(s),this.buf.b+="(",this.addValue(r,t),this.buf.b+=",",this.addValue(u,t),this.buf.b+="))"}else this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t);else this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t);break;case 18:this.decl("int _ushr( int i, int j ) { return int(uint(i) >> uint(j)); }"),this.buf.b+="_ushr(",this.addValue(r,t),this.buf.b+=",",this.addValue(u,t),this.buf.b+=")";break;case 19:e.t!=Le.TInt?(20==a._hx_index&&(this.addValue(r,t),this.buf.b+=" = "),this.addExpr({e:j.TCall({e:j.TGlobal(xe.Mod),t:Le.TFun([]),p:e.p},[r,u]),t:e.t,p:e.p},t)):(this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t));break;case 20:switch(a.op._hx_index){case 1:5==h._hx_index&&3==h.size&&1==h.t._hx_index&&8==c._hx_index?(this.decl(pw.MAT34),this.decl("vec3 m3x4mult( vec3 v, _mat3x4 m) { vec4 ve = vec4(v,1.0); return vec3(dot(m.a,ve),dot(m.b,ve),dot(m.c,ve)); }"),20==a._hx_index&&(this.addValue(r,t),this.buf.b+=" = "),this.buf.b+="m3x4mult(",this.addValue(r,t),this.buf.b+=",",this.addValue(u,t),this.buf.b+=")"):(this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t));break;case 19:e.t!=Le.TInt?(20==a._hx_index&&(this.addValue(r,t),this.buf.b+=" = "),this.addExpr({e:j.TCall({e:j.TGlobal(xe.Mod),t:Le.TFun([]),p:e.p},[r,u]),t:e.t,p:e.p},t)):(this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t));break;default:this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t)}break;default:this.addValue(r,t),this.buf.b+=" ",this.buf.b+=el.string(fw.opStr(a)),this.buf.b+=" ",this.addValue(u,t)}break;case 6:a=n.e1;switch(n.op._hx_index){case 0:s="++";break;case 1:s="--";break;case 2:s="!";break;case 3:s="-";break;case 4:s="~";break;default:throw tl.thrown("assert")}this.buf.b+=el.string(s),this.addValue(a,t);break;case 7:a=n.v,r=n.init;this.locals.h[a.id]=a,null!=r?(s=this.varName(a),this.buf.b+=el.string(s),this.buf.b+=" = ",this.addValue(r,t)):this.buf.b+="/*var*/";break;case 8:a=n.e,r=n.args;if(2==(u=a.e)._hx_index)switch((h=u.g)._hx_index){case 36:s=this.getFunName(h,r,e.t);this.buf.b+=el.string(s),this.buf.b+="(",this.addValue(r[0],t),this.buf.b+=", ",this.addValue(r[1],t),2!=r.length?(this.buf.b+=", ",this.addValue(r[2],t),this.buf.b+=")"):this.buf.b+=", 0)";break;case 37:s=this.getFunName(h,r,e.t);this.buf.b+=el.string(s),this.buf.b+="(",this.addValue(r[0],t),1!=r.length?(this.buf.b+=", ",this.addValue(r[1],t),this.buf.b+=")"):11==r[0].t._hx_index?this.buf.b+="))":this.buf.b+=", 0)";break;case 54:if(1==r.length){u=r[0];this.buf.b+="clamp(",this.addValue(u,t),this.buf.b+=", 0., 1.)"}else{2==(u=a.e)._hx_index?(s=this.getFunName(u.g,r,e.t),this.buf.b+=el.string(s)):this.addValue(a,t),this.buf.b+="(";for(var _=!0,u=0;u<r.length;){o=r[u++];_?_=!1:this.buf.b+=", ",this.addValue(o,t)}this.buf.b+=")"}break;case 79:break;case 80:if(3==r.length){var u=r[0],h=r[1],c=r[2],d=u.t;if(11!=d._hx_index)throw tl.thrown("assert");d=d.channels,this.buf.b+="imageStore(",this.addValue(u,t),this.buf.b+=",",this.addValue(h,t),this.buf.b+=",",4!=d&&(this.buf.b+="("),this.addValue(c,t),4!=d&&(this.buf.b+=el.string(")"+(1==d?".xxxx":2==d?".xyyy":".xyzz")))}else for(_=(2==(u=a.e)._hx_index?(s=this.getFunName(u.g,r,e.t),this.buf.b+=el.string(s)):this.addValue(a,t),this.buf.b+="(",!0),u=0;u<r.length;){o=r[u++];_?_=!1:this.buf.b+=", ",this.addValue(o,t)}this.buf.b+=")";break;case 85:this.buf.b+="atomicAdd(",this.addValue(r[0],t),this.buf.b+="[",this.addValue(r[1],t),this.buf.b+="],",this.addValue(r[2],t),this.buf.b+=")";break;default:for(_=(2==(u=a.e)._hx_index?(s=this.getFunName(u.g,r,e.t),this.buf.b+=el.string(s)):this.addValue(a,t),this.buf.b+="(",!0),u=0;u<r.length;){o=r[u++];_?_=!1:this.buf.b+=", ",this.addValue(o,t)}this.buf.b+=")"}else{for(_=(2==(u=a.e)._hx_index?(s=this.getFunName(u.g,r,e.t),this.buf.b+=el.string(s)):this.addValue(a,t),this.buf.b+="(",!0),a=0;a<r.length;){o=r[a++];_?_=!1:this.buf.b+=", ",this.addValue(o,t)}this.buf.b+=")"}break;case 9:a=n.e,r=n.regs;if(3==a.t._hx_index){for(u=0;u<r.length;)if(r[u++]!=aw.X)throw tl.thrown("assert");switch(r.length){case 1:this.addValue(a,t);break;case 2:this.decl("vec2 _vec2( float v ) { return vec2(v,v); }"),this.buf.b+="_vec2(",this.addValue(a,t),this.buf.b+=")";break;case 3:this.decl("vec3 _vec3( float v ) { return vec3(v,v,v); }"),this.buf.b+="_vec3(",this.addValue(a,t),this.buf.b+=")";break;case 4:this.decl("vec4 _vec4( float v ) { return vec4(v,v,v,v); }"),this.buf.b+="_vec4(",this.addValue(a,t),this.buf.b+=")";break;default:throw tl.thrown("assert")}}else{this.addValue(a,t),this.buf.b+=".";for(a=0;a<r.length;){var p,m=this.buf,g=m.b;switch(r[a++]._hx_index){case 0:p="x";break;case 1:p="y";break;case 2:p="z";break;case 3:p="w"}m.b=g+el.string(p)}}break;case 10:a=n.eif,r=n.eelse;this.buf.b+="if( ",this.addValue(n.econd,t),this.buf.b+=") ",this.addExpr(a,t),null!=r&&(this.isBlock(a)||(this.buf.b+=";"),this.buf.b+=" else ",this.addExpr(r,t));break;case 11:this.buf.b+="discard";break;case 12:null==(a=n.e)?this.buf.b+="return":(this.buf.b+="return ",this.addValue(a,t));break;case 13:a=n.v;if(this.locals.h[a.id]=a,5!=(r=n.it.e)._hx_index)throw tl.thrown("assert");if(21!=r.op._hx_index)throw tl.thrown("assert");this.buf.b+="for(",this.buf.b+=el.string(a.name+"="),this.addValue(r.e1,t),this.buf.b+=el.string(";"+a.name+"<"),this.addValue(r.e2,t),this.buf.b+=el.string(";"+a.name+"++) "),this.addBlock(n.loop,t);break;case 14:this.buf.b+="continue";break;case 15:this.buf.b+="break";break;case 16:this.addValue(n.e,t),this.buf.b+="[",this.addValue(n.index,t),this.buf.b+="]";break;case 17:a=n.el;if(15!=(r=e.t)._hx_index)throw tl.thrown("assert");this.addType(r.t),this.buf.b+=el.string("["+a.length+"]"),this.buf.b+="(";for(_=!0,r=0;r<a.length;){e=a[r++];_?_=!1:this.buf.b+=", ",this.addValue(e,t)}this.buf.b+=")";break;case 18:this.buf.b+="switch(...)";break;case 19:a=n.e,r=n.loop;0==n.normalWhile?(t+="\t",this.buf.b+="do ",this.addBlock(r,t),this.buf.b+=" while( ",this.addValue(a,t),this.buf.b+=" )"):(this.buf.b+="while( ",this.addValue(a,t),this.buf.b+=" ) ",this.addBlock(r,t));break;case 20:this.addExpr(n.e,t);break;case 21:this.addExpr(n.e,t),this.buf.b+=".",this.buf.b+=el.string(n.name);break;case 22:a=n.code,r=n.args;switch(n.target){case"code":case"glsl":for(var f=0,A=new ot("{(\\d+)}","g");A.matchSub(a,f);){var x=A.matchedPos(),w=(this.buf.b+=el.string(a.substring(f,x.pos)),el.parseInt(A.matched(1)));w<r.length&&this.addValue(r[w].e,t),f=x.pos+x.len}this.buf.b+=el.string(Jn.substr(a,f,null))}}},varName:function(e){if(e.kind==$0.Output){if(this.isVertex)return"gl_Position";if(null!=this.glES&&this.glES<=2)return null==this.outIndexes?"gl_FragColor":"gl_FragData["+this.outIndexes.h[e.id]+"]"}var t=this.varNames.h[e.id];if(null==t){if(t=e.name,e.kind==$0.Var&&(t+="_varying"),Object.prototype.hasOwnProperty.call(pw.KWDS.h,t)&&(t="_"+t),Object.prototype.hasOwnProperty.call(this.allNames.h,t)){var n=2;for(t+="_";Object.prototype.hasOwnProperty.call(this.allNames.h,t+n);)++n;t+=n}this.varNames.h[e.id]=t,this.allNames.h[t]=e.id}return t},newLine:function(e){this.isBlock(e)?this.buf.b+="\n":this.buf.b+=";\n"},isBlock:function(e){var t=e.e;switch(t._hx_index){case 4:return!0;case 13:return this.isBlock(t.loop);case 19:return 1==t.normalWhile&&this.isBlock(t.loop);default:return!1}},initVar:function(e){switch(e.kind._hx_index){case 0:case 2:switch((t=e.type)._hx_index){case 15:11==(n=t.t)._hx_index?this.buf.b+=el.string("layout("+Jn.substr("rgba",0,n.channels)+"32f) uniform "):this.buf.b+="uniform ";break;case 16:switch((n=t.kind)._hx_index){case 1:case 4:if(this.version<430)throw tl.thrown("SSBO are available since version 4.3");this.buf.b+="layout(std430) readonly buffer ";break;case 2:case 5:if(this.version<430)throw tl.thrown("SSBO are available since version 4.3");this.buf.b+="layout(std430) buffer ";break;default:switch(this.buf.b+="layout(std140) ",n._hx_index){case 0:case 3:this.buf.b+="uniform ";break;default:throw tl.thrown("assert")}}break;default:this.buf.b+="uniform "}break;case 1:this.buf.b+=el.string(null!=this.glES&&this.glES<=2?"attribute ":"in ");break;case 3:Ue.hasQualifier(e,ew.Flat)&&(this.buf.b+="flat "),this.buf.b+=el.string(null!=this.glES&&this.glES<=2?"varying ":this.isVertex?"out ":"in ");break;case 4:break;case 5:if(null!=this.glES&&this.glES<=2)return void(this.outIndexes.h[e.id]=this.outIndex++);if(this.isVertex)return;null!=this.glES&&(this.buf.b+=el.string("layout(location="+this.outIndex+++") ")),this.buf.b+="out ";break;case 6:return}if(null!=e.qualifiers)for(var t=0,n=e.qualifiers;t<n.length;){var i=n[t];if(++t,6==i._hx_index)switch(i.p._hx_index){case 0:this.buf.b+="lowp ";break;case 1:this.buf.b+="mediump ";break;case 2:this.buf.b+="highp "}}this.addVar(e),this.buf.b+=";\n"},initVars:function(e){this.outIndex=0,this.uniformBuffer=0,this.outIndexes=new Je;for(var t=0,n=e.vars;t<n.length;)this.initVar(n[t++]);this.buf.b+="\n",this.outIndex<2?this.outIndexes=null:!this.isVertex&&null!=this.glES&&this.glES<=2&&this.decl("#extension GL_EXT_draw_buffers : enable")},collectGlobals:function(e,t){switch((n=t.e)._hx_index){case 2:e.set(n.g,!0);break;case 8:var n,i,s,a=n.args,l=n.e.e;if(2==l._hx_index)if(79==l.g._hx_index)switch(a.length){case 1:0==(n=a[0].e)._hx_index?2==(l=n.c)._hx_index?this.computeLayout=[l.v,1,1]:(n=this,i=e,Ue.iter(t,function(e){n.collectGlobals(i,e)})):(l=this,s=e,Ue.iter(t,function(e){l.collectGlobals(s,e)}));break;case 2:var r,o,u,h,c,_,d,p=a[0].e;0==p._hx_index?2==(o=p.c)._hx_index?0==(p=a[1].e)._hx_index?2==(h=p.c)._hx_index?this.computeLayout=[o.v,h.v,1]:(p=this,r=e,Ue.iter(t,function(e){p.collectGlobals(r,e)})):(o=this,u=e,Ue.iter(t,function(e){o.collectGlobals(u,e)})):(h=this,c=e,Ue.iter(t,function(e){h.collectGlobals(c,e)})):(_=this,d=e,Ue.iter(t,function(e){_.collectGlobals(d,e)}));break;case 3:var m,g,f,A,x,w,y,b,v,C,S=a[0].e;0==S._hx_index?2==(f=S.c)._hx_index?0==(S=a[1].e)._hx_index?2==(x=S.c)._hx_index?0==(S=a[2].e)._hx_index?2==(a=S.c)._hx_index?this.computeLayout=[f.v,x.v,a.v]:(a=this,m=e,Ue.iter(t,function(e){a.collectGlobals(m,e)})):(S=this,g=e,Ue.iter(t,function(e){S.collectGlobals(g,e)})):(f=this,A=e,Ue.iter(t,function(e){f.collectGlobals(A,e)})):(x=this,w=e,Ue.iter(t,function(e){x.collectGlobals(w,e)})):(y=this,b=e,Ue.iter(t,function(e){y.collectGlobals(b,e)})):(v=this,C=e,Ue.iter(t,function(e){v.collectGlobals(C,e)}));break;default:var k=this,M=e;Ue.iter(t,function(e){k.collectGlobals(M,e)})}else{var I=this,B=e;Ue.iter(t,function(e){I.collectGlobals(B,e)})}else{var T=this,E=e;Ue.iter(t,function(e){T.collectGlobals(E,e)})}break;default:var F=this,D=e;Ue.iter(t,function(e){F.collectGlobals(D,e)})}},run:function(e){for(var t=new PA,n=0,i=e.funs;n<i.length;)this.collectGlobals(t,i[n++].expr);if(this.locals=new Je,this.decls=[],this.buf=new b,this.exprValues=[],1!=e.funs.length)throw tl.thrown("assert");var s=e.funs[0],e=(this.isVertex=s.kind==iw.Vertex,this.isCompute=s.kind==iw.Main,this.isCompute||(this.isVertex?this.decl("precision highp float;"):this.decl("precision mediump float;")),this.initVars(e),this.isCompute&&this.decl("layout(local_size_x = "+this.computeLayout[0]+", local_size_y = "+this.computeLayout[1]+", local_size_z = "+this.computeLayout[2]+") in;"),this.buf);if(this.buf=new b,this.buf.b+="void main(void) {\n",4==(n=s.expr.e)._hx_index)for(i=n.el,n=0;n<i.length;){var a=i[n];++n,this.buf.b+="\t",this.addExpr(a,"\t"),this.newLine(a)}else this.addExpr(s.expr,"");this.isVertex&&(this.buf.b+="\tgl_Position.z += gl_Position.z - gl_Position.w;\n"),this.buf.b+="}",this.exprValues.push(this.buf.b),this.buf=e;for(var l=be.array(this.locals),n=(l.sort(function(e,t){return X.compare(e.name,t.name)}),0);n<l.length;)this.addVar(l[n++]),this.buf.b+=";\n";this.buf.b+="\n";for(n=0,i=this.exprValues;n<i.length;)this.buf.b+=el.string(i[n++]),this.buf.b+="\n\n";return null!=this.glES?this.decl("#version "+(this.version<100?100:this.version)+(150<this.version?" es":"")):this.isCompute||430<=this.version?this.decl("#version 430"):null!=this.version?this.decl("#version "+(150<this.version?150:this.version)):this.decl("#version 130"),this.decls.push(this.buf.b),this.buf=null,this.decls.join("\n")},__class__:pw},(i["hxsl._Linker.AllocatedVar"]=Vm).__name__="hxsl._Linker.AllocatedVar",Vm.prototype={__class__:Vm},(i["hxsl._Linker.ShaderInfos"]=Om).__name__="hxsl._Linker.ShaderInfos",Om.prototype={__class__:Om},function(e){this.debugDepth=0,this.mode=e}),gw=((i["hxsl.Linker"]=mw).__name__="hxsl.Linker",mw.prototype={error:function(e,t){return km.t(e,t)},mergeVar:function(e,t,n,i,s){switch(t.kind._hx_index){case 2:if(null!=s&&Ue.hasBorrowQualifier(n,s))break;throw tl.thrown("assert");case 0:case 1:case 3:case 4:case 5:break;case 6:throw tl.thrown("assert")}t.kind!=n.kind&&t.kind!=$0.Local&&n.kind!=$0.Local&&this.error("'"+e+"' kind does not match : "+el.string(t.kind)+" should be "+el.string(n.kind),i);var a=t.type,l=n.type;if(13==a._hx_index){var r=a.vl;if(13==l._hx_index)for(a=l.vl,l=0;l<r.length;){for(var o=r[l],u=(++l,null),h=0;h<a.length;){var c=a[h];if(++h,o.name==c.name){u=c;break}}null==u?a.push(this.allocVar(o,i,s).v):this.mergeVar(e+"."+u.name,o,u,i,s)}else U.enumEq(t.type,n.type)||this.error("'"+e+"' type does not match : "+Ue.toString(t.type)+" should be "+Ue.toString(n.type),i)}else U.enumEq(t.type,n.type)||this.error("'"+e+"' type does not match : "+Ue.toString(t.type)+" should be "+Ue.toString(n.type),i)},allocVar:function(e,t,n,i,s){if(null!=e.parent&&null==s){var a=(s=this.allocVar(e.parent,t,n)).v;for(i=a.name,a=a.parent;null!=a;)i=a.name+"."+i,a=a.parent}var l=null==i?e.name:i+"."+e.name;if(null!=e.qualifiers)for(var r=0,o=e.qualifiers;r<o.length;){var u=o[r];++r,4==u._hx_index&&(l=u.n)}var h=l.toLowerCase(),c=this.varMap.h[h],_=e.name;if(null!=c){for(var r=0,o=c.merged;r<o.length;)if(o[r++]==e)return c;if(!(!((e.kind!=$0.Param||Ue.hasBorrowQualifier(c.v,n)||Ue.hasQualifier(e,ew.Shared)||this.isBatchShader)&&e.kind!=$0.Function&&(e.kind!=$0.Var&&e.kind!=$0.Local||!Ue.hasQualifier(e,ew.Private))&&((d=c.v).kind!=$0.Param||Ue.hasBorrowQualifier(e,c.rootShaderName)||Ue.hasQualifier(d,ew.Shared)||this.isBatchShader)&&d.kind!=$0.Function)||(d.kind==$0.Var||d.kind==$0.Local)&&Ue.hasQualifier(d,ew.Private)||e.kind==$0.Param&&c.v.kind==$0.Param))return c.merged.push(e),this.mergeVar(l,e,c.v,t,c.rootShaderName),this.varIdMap.h[e.id]=c.id,c;for(var d,p=2;null!=(m=this.varMap.h[h+p]);){for(r=0,o=m.merged;r<o.length;)if(o[r++]==e)return m;++p}e.kind==$0.Input?(d=this.varMap,Object.prototype.hasOwnProperty.call(d.h,h)&&delete d.h[h],(this.varMap.h[h+p]=c).v.name+=p,c.path+=p):(_+=p,l+=p,h+=p)}var m,c={id:Ue.allocVarId(),name:_,type:e.type,kind:e.kind,qualifiers:e.qualifiers,parent:null==s?null:s.v};if((m=new Vm).v=c,m.merged=[e],m.path=l,m.id=c.id,m.parent=s,m.instanceIndex=this.curInstance,m.rootShaderName=n,this.allVars.push(m),this.varMap.h[h]=m,13==(r=c.type)._hx_index){for(var o=r.vl,r=[],g=0;g<o.length;)r.push(this.allocVar(o[g++],t,n,l,m).v);c.type=Le.TStruct(r)}return m},mapExprVar:function(e){switch((d=e.e)._hx_index){case 1:var t=d.v;if(this.locals.h.hasOwnProperty(t.id))break;var n=this.allocVar(t,e.p);if(null!=this.curShader&&!this.curShader.writeMap.h.hasOwnProperty(n.id)){if(Pm.TRACE)for(var t=0,i=this.debugDepth;t<i;)++t;if(this.curShader.readMap.h.hasOwnProperty(n.id)||(this.curShader.readMap.h[n.id]=n,this.curShader.readVars.push(n)),null==this.curShader.vertex&&n.v.kind==$0.Var){if(Pm.TRACE)for(t=0,i=this.debugDepth;t<i;)++t;this.curShader.vertex=!1}}return{e:j.TVar(n.v),t:n.v.type,p:e.p};case 5:var s,t=d.op,i=d.e1,a=d.e2,l=i.e;switch(t._hx_index){case 4:switch(l._hx_index){case 1:var r=l.v;if(!this.locals.h.hasOwnProperty(r.id)){var o=this.mapExprVar(a),n=this.allocVar(r,i.p);if(null!=this.curShader&&!this.curShader.writeMap.h.hasOwnProperty(n.id)){if(Pm.TRACE)for(var u=0,h=this.debugDepth;u<h;)++u;this.curShader.writeMap.h[n.id]=n,this.curShader.writeVars.push(n)}return{e:j.TBinop(t,{e:j.TVar(n.v),t:n.v.type,p:e.p},o),t:e.t,p:e.p}}if(this.locals.h.hasOwnProperty(r.id))break;var c=this.mapExprVar(i),o=this.mapExprVar(a),n=this.allocVar(r,c.p);if(null!=this.curShader&&!this.curShader.writeMap.h.hasOwnProperty(n.id)){if(Pm.TRACE)for(var r=0,u=this.debugDepth;r<u;)++r;this.curShader.writeMap.h[n.id]=n,this.curShader.writeVars.push(n)}return{e:j.TBinop(t,c,o),t:e.t,p:e.p};case 2:if(72==l.g._hx_index)return null!=this.curShader&&(this.curShader.hasFragDepth=!0),1==(r=(o=this.mapExprVar(a)).e)._hx_index&&(s=this.allocVar(r.v,o.p),this.curShader.readMap.h.hasOwnProperty(s.id)||(this.curShader.readMap.h[s.id]=s,this.curShader.readVars.push(s))),{e:j.TBinop(t,{e:j.TGlobal(xe.FragDepth),t:Le.TFloat,p:e.p},o),t:e.t,p:e.p};break;case 9:if(1==(r=l.e.e)._hx_index){u=r.v;if(!this.locals.h.hasOwnProperty(u.id)){c=this.mapExprVar(i),o=this.mapExprVar(a),n=this.allocVar(u,c.p);if(null!=this.curShader&&!this.curShader.writeMap.h.hasOwnProperty(n.id)){if(Pm.TRACE)for(var r=0,u=this.debugDepth;r<u;)++r;this.curShader.writeMap.h[n.id]=n,this.curShader.writeVars.push(n)}return{e:j.TBinop(t,c,o),t:e.t,p:e.p}}}}break;case 20:switch(l._hx_index){case 1:r=l.v;if(this.locals.h.hasOwnProperty(r.id))break;c=this.mapExprVar(i),o=this.mapExprVar(a),n=this.allocVar(r,c.p);if(null!=this.curShader&&!this.curShader.writeMap.h.hasOwnProperty(n.id)){if(Pm.TRACE)for(r=0,u=this.debugDepth;r<u;)++r;this.curShader.writeMap.h[n.id]=n,this.curShader.writeVars.push(n)}return{e:j.TBinop(t,c,o),t:e.t,p:e.p};case 2:if(72==l.g._hx_index)return null!=this.curShader&&(this.curShader.hasFragDepth=!0),1==(r=(o=this.mapExprVar(a)).e)._hx_index&&(s=this.allocVar(r.v,o.p),this.curShader.readMap.h.hasOwnProperty(s.id)||(this.curShader.readMap.h[s.id]=s,this.curShader.readVars.push(s))),{e:j.TBinop(t,{e:j.TGlobal(xe.FragDepth),t:Le.TFloat,p:e.p},o),t:e.t,p:e.p};break;case 9:if(1==(r=l.e.e)._hx_index){l=r.v;if(!this.locals.h.hasOwnProperty(l.id)){c=this.mapExprVar(i),o=this.mapExprVar(a),n=this.allocVar(l,c.p);if(null!=this.curShader&&!this.curShader.writeMap.h.hasOwnProperty(n.id)){if(Pm.TRACE)for(i=0,a=this.debugDepth;i<a;)++i;this.curShader.writeMap.h[n.id]=n,this.curShader.writeVars.push(n)}return{e:j.TBinop(t,c,o),t:e.t,p:e.p}}}}}break;case 7:this.locals.h[d.v.id]=!0;break;case 11:null!=this.curShader&&(this.curShader.vertex=!1,this.curShader.hasDiscard=!0);break;case 13:this.locals.h[d.v.id]=!0;break;case 22:for(var t=d.target,i=d.code,a=d.args,_=[],d=0;d<a.length;){var p=a[d];switch(++d,p.access._hx_index){case 0:c=this.mapExprVar(p.e);break;case 1:c=this.mapExprVar(null!=this.curShader?this.mapSyntaxWrite(p.e):p.e);break;case 2:o=this.mapExprVar(p.e);c=o=null!=this.curShader?this.mapSyntaxWrite(o):o}_.push({e:c,access:p.access})}return null!=this.curShader&&(this.curShader.hasSyntax=!0),{e:j.TSyntax(t,i,_),t:e.t,p:e.p}}return Ue.map(e,Cn(this,this.mapExprVar))},mapSyntaxWrite:function(e){if(1!=(n=e.e)._hx_index)return Ue.map(e,Cn(this,this.mapSyntaxWrite));var t=this.allocVar(n.v,e.p);if(!this.curShader.writeMap.h.hasOwnProperty(t.id)){if(Pm.TRACE)for(var n=0,i=this.debugDepth;n<i;)++n;this.curShader.writeMap.h[t.id]=t,this.curShader.writeVars.push(t)}return{e:j.TVar(t.v),t:t.v.type,p:e.p}},addShader:function(e,t,n,i){e=new Om(e,t);if((this.curShader=e).priority=i,e.body=this.mapExprVar(n),this.shaders.push(e),this.curShader=null,Pm.TRACE)for(var s=0,a=this.debugDepth;s<a;)++s;return e},sortByPriorityDesc:function(e,t){return e.priority==t.priority?e.uid-t.uid:t.priority-e.priority},buildDependency:function(e,t,n){for(var i=!n,s=0,a=this.shaders;s<a.length;){var l=a[s];if(++s,l==e)i=!0;else if(i&&l.writeMap.h.hasOwnProperty(t.id)){if(e.vertex){if(0==l.vertex)continue;null==l.vertex&&(l.vertex=!0)}if(Pm.TRACE)for(var r=0,o=this.debugDepth;r<o;)++r;if(e.deps.set(l,!0),this.debugDepth++,this.initDependencies(l),this.debugDepth--,!l.readMap.h.hasOwnProperty(t.id))return}}t.v.kind==$0.Var&&this.error("Variable "+t.path+" required by "+e.name+" is missing initializer",null)},initDependencies:function(e){if(null==e.deps){e.deps=new VA;for(var t=0,n=e.readVars;t<n.length;){var i=n[t];++t,this.buildDependency(e,i,e.writeMap.h.hasOwnProperty(i.id))}}},collect:function(e,t,n){if(e.onStack&&this.error("Loop in shader dependencies ("+e.name+")",null),e.marked!=n){e.marked=n,e.onStack=!0;for(var i=[],s=e.deps.keys();s.hasNext();)i.push(s.next());i.sort(Cn(this,this.sortByPriorityDesc));for(var a=0;a<i.length;)this.collect(i[a++],t,n);if(null==e.vertex){if(Pm.TRACE)for(i=0,a=this.debugDepth;i<a;)++i;e.vertex=n}if(e.vertex==n){if(Pm.TRACE)for(i=0,a=this.debugDepth;i<a;)++i;t.push(e)}e.onStack=!1}},link:function(e){if(Pm.TRACE)for(var t=0,n=this.debugDepth;t<n;)++t;this.varMap=new at,this.varIdMap=new Je,this.allVars=[],this.shaders=[],this.locals=new Je;for(var i=[],t=[],s=0,a=e;s<a.length;){var l,r=a[s];e.indexOf(r)<s++?(l=Em.shaderData(r),i.push({origin:r,cloned:l}),t.push(l)):t.push(r)}this.curInstance=0;for(var u=[],n=0;n<t.length;){for(var o=t[n],h=(++n,this.isBatchShader=this.mode==Aw.Batch&&Ae.startsWith(o.name,"batchShader_"),0),c=o.vars;h<c.length;){var _=c[h],d=(++h,this.allocVar(_,null,o.name));this.isBatchShader&&d.v.kind==$0.Param&&!Ae.startsWith(d.path,"Batch_")&&(d.v.kind=$0.Local,null==d.v.qualifiers&&(d.v.qualifiers=[]),Ue.hasQualifier(d.v,ew.Flat)||d.v.qualifiers.push(ew.Flat)),_.kind==$0.Output&&u.push(_)}for(var p=0,m=o.funs;p<m.length;){var g=m[p];++p,this.allocVar(g.ref,g.expr.p).kind=g.kind}this.curInstance++}for(var f=0,A=[-3e3],x=[-2e3],w=[-1e3],y=[-2500],n=0;n<t.length;){for(o=t[n],h=(++n,0),c=o.funs;h<c.length;){var b,v,C,g=c[h];if(++h,null==(_=this.allocVar(g.ref,g.expr.p)).kind)throw tl.thrown("assert");switch(_.kind._hx_index){case 0:case 1:if(this.mode==Aw.Compute)throw b=_.kind,tl.thrown("Unexpected "+fe[b.__enum__].__constructs__[b._hx_index]._hx_name.toLowerCase()+"() function in compute shader");this.addShader(o.name+"."+(_.kind==iw.Vertex?"vertex":"fragment"),_.kind==iw.Vertex,g.expr,f+(_.kind==iw.Vertex?-1500:-500));break;case 2:switch(g.ref.name){case"__init__fragment":v=w,C=!1;break;case"__init__main":v=y,C=!1;break;case"__init__vertex":v=x,C=!0;break;default:v=A,C=null}if(4==(p=g.expr.e)._hx_index)for(var m=p.el,z=0,S=0;S<m.length;)this.addShader(o.name+"."+g.ref.name+z++,C,m[S++],v[0]++);else this.addShader(o.name+"."+g.ref.name,C,g.expr,v[0]++);break;case 3:throw tl.thrown("Unexpected helper function in linker "+_.v.name);case 4:if(this.mode!=Aw.Compute)throw tl.thrown("Unexpected main() outside compute shader");this.addShader(o.name,!0,g.expr,f).isCompute=!0}}++f}this.shaders.sort(Cn(this,this.sortByPriorityDesc));for(var Q=0,t=0,n=this.shaders;t<n.length;)n[t++].uid=Q++;for(var k=new Om("<entry>",!1),t=(k.deps=new VA,0);t<u.length;)this.buildDependency(k,this.allocVar(u[t++],null),!1);for(t=0,n=this.shaders;t<n.length;){o=n[t];++t,(o.hasDiscard||o.isCompute||o.hasFragDepth)&&(this.initDependencies(o),k.deps.set(o,!0))}for(t=0,n=this.shaders;t<n.length;){o=n[t];if(++t,null==o.vertex){for(var M=!0,h=0,c=o.readVars;h<c.length;)if(c[h++].v.kind!=$0.Param){M=!1;break}if(M){if(Pm.TRACE)for(p=0,m=this.debugDepth;p<m;)++p;o.vertex=!1}}}for(t=0,n=this.shaders;t<n.length;){o=n[t];if(++t,null!=o.deps){if(null==o.vertex)for(var I=o.deps.keys();I.hasNext();)if(0==I.next().vertex){if(Pm.TRACE)for(h=0,c=this.debugDepth;h<c;)++h;o.vertex=!1;break}if(o.vertex)for(var B=o.deps.keys();B.hasNext();){var T=B.next();if(null==T.vertex){if(Pm.TRACE)for(p=0,m=this.debugDepth;p<m;)++p;T.vertex=!0}}}}_=[],g=[];if(this.collect(k,_,!0),this.collect(k,g,!1),g.pop()!=k)throw tl.thrown("assert");for(t=0,n=this.shaders;t<n.length;)n[t++].marked=null;for(t=0,n=_.concat(g);t<n.length;){for(o=n[t],I=(++t,o.deps.keys());I.hasNext();)null==(B=I.next()).marked&&this.error(B.name+" needed by "+o.name+" is unreachable",null);o.marked=!0}for(var u=[],E={},F=function(e){for(;;){if(E.hasOwnProperty(e.id))return;if(E[e.id]=!0,null==e.v.parent)return void u.push(e.v);e=e.parent}},t=0,n=_.concat(g);t<n.length;){for(o=n[t],h=(++t,0),c=o.readVars;h<c.length;)F(c[h++]);for(p=0,m=o.writeVars;p<m.length;)F(m[p++])}for(var D=null,D=function(e){if(13==(i=e.type)._hx_index){var t=i.vl;if(e.kind!=$0.Input){for(var n=[],i=0;i<t.length;){var s=t[i];++i,E.hasOwnProperty(s.id)&&(D(s),n.push(s))}e.type=Le.TStruct(n)}}},t=0;t<u.length;)D(u[t++]);for(var R=function(e,t,n){for(var t={id:Ue.allocVarId(),name:t,type:Le.TFun([{ret:Le.TVoid,args:[]}]),kind:$0.Function},i=(u.push(t),[]),s=0;s<n.length;){var a=n[s],l=(++s,a.body.e);if(4==l._hx_index)for(var r=l.el,o=0;o<r.length;)i.push(r[o++]);else i.push(a.body)}return{kind:e,ref:t,ret:Le.TVoid,args:[],expr:{e:j.TBlock(i),t:Le.TVoid,p:0==i.length?null:i[0].p}}},R=this.mode==Aw.Compute?[R(iw.Main,"main",_)]:[R(iw.Vertex,"vertex",_),R(iw.Fragment,"fragment",g)],t=0;t<i.length;)for(I=i[t],n=(++t,0),h=I.cloned.vars.length;n<h;){var P=n++;this.allocVar(I.cloned.vars[P],null).merged.unshift(I.origin.vars[P])}return{name:"out",vars:u,funs:R}},__class__:mw},(i["hxsl.MacroParser"]=Wm).__name__="hxsl.MacroParser",Wm.prototype={error:function(e,t){return km.t(e,t)},applyMeta:function(e,t){var i,s,a,l,r=this;if(null==(m=e.params))this.error("Invalid meta parameter for "+e.name,e.pos);else switch(m.length){case 0:break;case 1:if(0==(n=(_=m[0]).expr)._hx_index)switch((d=n.c)._hx_index){case 0:var o,u,n=d.v;if("const"==e.name)return void t.qualifiers.push(ew.Const(el.parseInt(n)));if("perInstance"==e.name)return void t.qualifiers.push(ew.PerInstance(el.parseInt(n)));if("borrow"==e.name)return o=[],u=null,(u=function(e){var t=e.expr;switch(t._hx_index){case 0:var n=t.c;switch(n._hx_index){case 2:case 3:o.push(n.s);break;default:r.error("Should be a shader type path",e.pos)}break;case 3:u(t.e),o.push(t.field);break;default:r.error("Should be a shader type path",e.pos)}})(_),void t.qualifiers.push(ew.Borrow(o.join(".")));this.error("Invalid meta parameter for "+e.name,e.pos);break;case 2:var h,c,n=d.s;if("var"==e.name||"global"==e.name||"input"==e.name)t.qualifiers.push(ew.Name(n));else{if("doc"==e.name)return void t.qualifiers.push(ew.Doc(n));if("sampler"==e.name)return void t.qualifiers.push(ew.Sampler(n));if("borrow"==e.name)return h=[],c=null,(c=function(e){var t=e.expr;switch(t._hx_index){case 0:var n=t.c;switch(n._hx_index){case 2:case 3:h.push(n.s);break;default:r.error("Should be a shader type path",e.pos)}break;case 3:c(t.e),h.push(t.field);break;default:r.error("Should be a shader type path",e.pos)}})(_),void t.qualifiers.push(ew.Borrow(h.join(".")));this.error("Invalid meta parameter for "+e.name,e.pos)}break;default:if("borrow"==e.name)return i=[],s=null,(s=function(e){var t=e.expr;switch(t._hx_index){case 0:var n=t.c;switch(n._hx_index){case 2:case 3:i.push(n.s);break;default:r.error("Should be a shader type path",e.pos)}break;case 3:s(t.e),i.push(t.field);break;default:r.error("Should be a shader type path",e.pos)}})(_),void t.qualifiers.push(ew.Borrow(i.join(".")));this.error("Invalid meta parameter for "+e.name,e.pos)}else{if("borrow"==e.name)return a=[],l=null,(l=function(e){var t=e.expr;switch(t._hx_index){case 0:var n=t.c;switch(n._hx_index){case 2:case 3:a.push(n.s);break;default:r.error("Should be a shader type path",e.pos)}break;case 3:l(t.e),a.push(t.field);break;default:r.error("Should be a shader type path",e.pos)}})(_),void t.qualifiers.push(ew.Borrow(a.join(".")));this.error("Invalid meta parameter for "+e.name,e.pos)}break;case 2:var _=m[1],n=m[0].expr;if(0==n._hx_index)switch((m=n.c)._hx_index){case 0:var d,n=m.v;if(0==(d=_.expr)._hx_index){var p=d.c;switch(p._hx_index){case 0:if("range"==e.name)return void t.qualifiers.push(ew.Range(parseFloat(n),parseFloat(p.v)));this.error("Invalid meta parameter for "+e.name,e.pos);break;case 1:if("range"==e.name)return void t.qualifiers.push(ew.Range(parseFloat(n),parseFloat(p.f)));this.error("Invalid meta parameter for "+e.name,e.pos);break;default:this.error("Invalid meta parameter for "+e.name,e.pos)}}else this.error("Invalid meta parameter for "+e.name,e.pos);break;case 1:var n=m.f,m=_.expr;if(0==m._hx_index)switch((_=m.c)._hx_index){case 0:if("range"==e.name)return void t.qualifiers.push(ew.Range(parseFloat(n),parseFloat(_.v)));this.error("Invalid meta parameter for "+e.name,e.pos);break;case 1:if("range"==e.name)return void t.qualifiers.push(ew.Range(parseFloat(n),parseFloat(_.f)));this.error("Invalid meta parameter for "+e.name,e.pos);break;default:this.error("Invalid meta parameter for "+e.name,e.pos)}else this.error("Invalid meta parameter for "+e.name,e.pos);break;default:this.error("Invalid meta parameter for "+e.name,e.pos)}else this.error("Invalid meta parameter for "+e.name,e.pos);break;default:this.error("Invalid meta parameter for "+e.name,e.pos)}switch(e.name){case"const":t.qualifiers.push(ew.Const());break;case"flat":t.qualifiers.push(ew.Flat);break;case"global":null==t.kind?t.kind=$0.Global:this.error("Duplicate type qualifier",e.pos);break;case"highp":t.qualifiers.push(ew.Precision(tw.High));break;case"ignore":t.qualifiers.push(ew.Ignore);break;case"input":null==t.kind?t.kind=$0.Input:this.error("Duplicate type qualifier",e.pos);break;case"lowp":t.qualifiers.push(ew.Precision(tw.Low));break;case"mediump":t.qualifiers.push(ew.Precision(tw.Medium));break;case"nullable":t.qualifiers.push(ew.Nullable);break;case"param":null==t.kind?t.kind=$0.Param:this.error("Duplicate type qualifier",e.pos);break;case"perInstance":t.qualifiers.push(ew.PerInstance(1));break;case"perObject":t.qualifiers.push(ew.PerObject);break;case"private":t.qualifiers.push(ew.Private);break;case"shared":t.qualifiers.push(ew.Shared);break;case"var":null==t.kind?t.kind=$0.Var:this.error("Duplicate type qualifier",e.pos);break;default:this.error("Unsupported qualifier "+e.name,e.pos)}},getTexDim:function(e,t){var n=!1;switch(Ae.endsWith(e,"Array")&&(n=!0,e=Jn.substr(e,0,-5)),e){case"1D":return t(q0.T1D,n);case"2D":return t(q0.T2D,n);case"3D":return t(q0.T3D,n);case"Cube":return t(q0.TCube,n);default:return null}},parseType:function(e,t){switch(e._hx_index){case 0:var n,i,s=(u=e.p).name,a=u.params,l=u.sub;if(0==u.pack.length)if(null==a){if(null==l&&Ae.startsWith(s,"RWTexture")){if(null==(u=a[0]))n=0;else if(0==u._hx_index)if(0==(r=u.t)._hx_index){var r=(u=r.p).params;if(0==u.pack.length)if(null==r)n=0;else if(0==r.length)if(null==u.sub)switch(u.name){case"Float":n=1;break;case"Vec2":n=2;break;case"Vec3":n=3;break;case"Vec4":n=4;break;default:n=0}else n=0;else n=0;else n=0}else n=0;else n=0;if(0==n&&this.error("Unsupported RWTexture parameter, should be Float|Vec2|Vec3|Vec4",t),null!=(m=this.getTexDim(Jn.substr(s,9,null),function(e,t){return Le.TRWTexture(e,t,n)})))return m}}else switch(a.length){case 0:if(null==l)switch(s){case"BVec2":return Le.TVec(2,K0.VBool);case"BVec3":return Le.TVec(3,K0.VBool);case"BVec4":return Le.TVec(4,K0.VBool);case"Bool":return Le.TBool;case"Bytes2":return Le.TBytes(2);case"Bytes3":return Le.TBytes(3);case"Bytes4":return Le.TBytes(4);case"Channel":return Le.TChannel(1);case"Channel2":return Le.TChannel(2);case"Channel3":return Le.TChannel(3);case"Channel4":return Le.TChannel(4);case"Float":return Le.TFloat;case"IVec2":return Le.TVec(2,K0.VInt);case"IVec3":return Le.TVec(3,K0.VInt);case"IVec4":return Le.TVec(4,K0.VInt);case"Int":return Le.TInt;case"Mat2":return Le.TMat2;case"Mat3":return Le.TMat3;case"Mat3x4":return Le.TMat3x4;case"Mat4":return Le.TMat4;case"String":return Le.TString;case"Vec2":return Le.TVec(2,K0.VFloat);case"Vec3":return Le.TVec(3,K0.VFloat);case"Vec4":return Le.TVec(4,K0.VFloat);default:if(Ae.startsWith(s,"Sampler"))if(null!=(m=this.getTexDim(Jn.substr(s,7,null),function(e,t){return Le.TSampler(e,t)})))return m}break;case 1:var o,u=a[0];if(null==l)if(Ae.startsWith(s,"RWTexture")){if(null==(r=a[0]))o=0;else if(0==r._hx_index)if(0==(h=r.t)._hx_index){var h=(r=h.p).params;if(0==r.pack.length)if(null==h)o=0;else if(0==h.length)if(null==r.sub)switch(r.name){case"Float":o=1;break;case"Vec2":o=2;break;case"Vec3":o=3;break;case"Vec4":o=4;break;default:o=0}else o=0;else o=0;else o=0}else o=0;else o=0;if(0==o&&this.error("Unsupported RWTexture parameter, should be Float|Vec2|Vec3|Vec4",t),null!=(m=this.getTexDim(Jn.substr(s,9,null),function(e,t){return Le.TRWTexture(e,t,o)})))return m}else switch(s){case"RWBuffer":case"RWPartialBuffer":case"StorageBuffer":case"StoragePartialBuffer":if(null!=(m=0==u._hx_index?this.parseType(u.t,t):null))switch(s){case"RWBuffer":return Le.TBuffer(m,J0.SConst(0),X0.RW);case"RWPartialBuffer":return Le.TBuffer(m,J0.SConst(0),X0.RWPartial);case"StorageBuffer":return Le.TBuffer(m,J0.SConst(0),X0.Storage);case"StoragePartialBuffer":return Le.TBuffer(m,J0.SConst(0),X0.StoragePartial);default:throw tl.thrown("assert")}}break;case 2:var c,u=a[0],r=a[1];if(null==l)if(Ae.startsWith(s,"RWTexture")){if(null==(h=a[0]))c=0;else if(0==h._hx_index)if(0==(_=h.t)._hx_index){var _=(h=_.p).params;if(0==h.pack.length)if(null==_)c=0;else if(0==_.length)if(null==h.sub)switch(h.name){case"Float":c=1;break;case"Vec2":c=2;break;case"Vec3":c=3;break;case"Vec4":c=4;break;default:c=0}else c=0;else c=0;else c=0}else c=0;else c=0;if(0==c&&this.error("Unsupported RWTexture parameter, should be Float|Vec2|Vec3|Vec4",t),null!=(m=this.getTexDim(Jn.substr(s,9,null),function(e,t){return Le.TRWTexture(e,t,c)})))return m}else switch(s){case"Array":case"Buffer":case"PartialBuffer":case"RWBuffer":case"RWPartialBuffer":case"StorageBuffer":case"StoragePartialBuffer":var d,p,m=0==u._hx_index?this.parseType(u.t,t):null;switch(r._hx_index){case 0:p=0==(u=r.t)._hx_index&&(u=(h=u.p).name,null!=(_=h.params))&&0==_.length&&null==h.sub?((d=h.pack.slice()).push(u),J0.SVar({id:0,type:null,name:d.join("."),kind:null})):null;break;case 1:p=0==(u=r.e.expr)._hx_index&&0==(r=u.c)._hx_index?J0.SConst(el.parseInt(r.v)):null}if(null!=m&&null!=p)switch(s){case"Array":return Le.TArray(m,p);case"Buffer":return Le.TBuffer(m,p,X0.Uniform);case"PartialBuffer":return Le.TBuffer(m,p,X0.Partial);case"RWBuffer":return Le.TBuffer(m,p,X0.RW);case"RWPartialBuffer":return Le.TBuffer(m,p,X0.RWPartial);case"StorageBuffer":return Le.TBuffer(m,p,X0.Storage);case"StoragePartialBuffer":return Le.TBuffer(m,p,X0.StoragePartial);default:throw tl.thrown("assert")}}break;default:if(null==l&&Ae.startsWith(s,"RWTexture")){if(null==(u=a[0]))i=0;else if(0==u._hx_index)if(0==(a=u.t)._hx_index){a=(u=a.p).params;if(0==u.pack.length)if(null==a)i=0;else if(0==a.length)if(null==u.sub)switch(u.name){case"Float":i=1;break;case"Vec2":i=2;break;case"Vec3":i=3;break;case"Vec4":i=4;break;default:i=0}else i=0;else i=0;else i=0}else i=0;else i=0;if(0==i&&this.error("Unsupported RWTexture parameter, should be Float|Vec2|Vec3|Vec4",t),null!=(m=this.getTexDim(Jn.substr(s,9,null),function(e,t){return Le.TRWTexture(e,t,i)})))return m}}break;case 2:for(u=e.fields,s=[],a=0;a<u.length;){var g,f=u[a];if(++a,0==(l=f.kind)._hx_index){for(var r=l.t,A=(null!=(h=l.e)&&this.error("No expression allowed in structure",h.pos),{name:f.name,type:null==r?null:this.parseType(r,f.pos),qualifiers:[],kind:null,expr:null}),_=0,x=f.meta;_<x.length;)this.applyMeta(x[_++],A);g={id:0,name:A.name,type:A.type,kind:A.kind,qualifiers:A.qualifiers}}else g=this.error("Only variables are allowed in structures",f.pos);s.push(g)}return Le.TStruct(s)}return this.error("Unsupported type "+Sp.toString(e),t),null},parseExpr:function(e){var t;switch((m=e.expr)._hx_index){case 0:switch((n=m.c)._hx_index){case 0:t=nw.EConst(L.CInt(el.parseInt(n.v)));break;case 1:t=nw.EConst(L.CFloat(parseFloat(n.f)));break;case 2:t=nw.EConst(L.CString(n.s));break;case 3:switch(i=n.s){case"discard":t=nw.EDiscard;break;case"false":t=nw.EConst(L.CBool(!1));break;case"null":t=nw.EConst(L.CNull);break;case"true":t=nw.EConst(L.CBool(!0));break;default:t=nw.EIdent(i)}break;case 4:t=null}break;case 1:t=nw.EArray(this.parseExpr(m.e1),this.parseExpr(m.e2));break;case 2:t=nw.EBinop(m.op,this.parseExpr(m.e1),this.parseExpr(m.e2));break;case 3:t=nw.EField(this.parseExpr(m.e),m.field);break;case 4:t=nw.EParenthesis(this.parseExpr(m.e));break;case 5:t=0==m.fields.length?nw.EBlock([]):null;break;case 6:for(var n=m.values,i=[],s=0;s<n.length;)i.push(this.parseExpr(n[s++]));t=nw.EArrayDecl(i);break;case 7:for(var n=m.params,a=this.parseExpr(m.e),i=[],s=0;s<n.length;)i.push(this.parseExpr(n[s++]));t=nw.ECall(a,i);break;case 9:n=m.op,i=m.e;m.postFix,t=nw.EUnop(n,this.parseExpr(i));break;case 10:for(n=m.vars,i=[],s=0;s<n.length;){var l=n[s];++s,i.push({name:l.name,expr:null==l.expr?null:this.parseExpr(l.expr),type:null==l.type?null:this.parseType(l.type,e.pos),kind:null,qualifiers:l.isFinal?[ew.Final]:[]})}t=nw.EVars(i);break;case 11:n=m.kind,i=m.f;if(null==n)t=null;else if(1==n._hx_index){s=n.name;if(null!=i.expr){a=null==i.ret?null:null!=(n=i.ret)&&0==n._hx_index&&"Void"==(r=n.p).name&&0==r.pack.length&&null==r.sub?Le.TVoid:this.parseType(i.ret,e.pos);for(var n=[],r=0,o=i.args;r<o.length;){var u=o[r];++r,n.push({name:u.name,type:null==u.type?null:this.parseType(u.type,e.pos),kind:$0.Local,qualifiers:[],expr:null==u.value?u.opt?{expr:nw.EConst(L.CNull),pos:e.pos}:null:this.parseExpr(u.value)})}t=nw.EFunction({name:s,ret:a,args:n,expr:this.parseExpr(i.expr)})}else t=null}else t=null;break;case 12:for(n=m.exprs,i=[],s=0;s<n.length;)i.push(this.parseExpr(n[s++]));t=nw.EBlock(i);break;case 13:t=2==(n=m.it.expr)._hx_index&&23==n.op._hx_index&&0==(i=n.e1.expr)._hx_index&&3==(s=i.c)._hx_index?nw.EFor(s.s,this.parseExpr(n.e2),this.parseExpr(m.expr)):null;break;case 14:n=m.eelse;t=nw.EIf(this.parseExpr(m.econd),this.parseExpr(m.eif),null==n?null:this.parseExpr(n));break;case 15:t=nw.EWhile(this.parseExpr(m.econd),this.parseExpr(m.e),m.normalWhile);break;case 16:for(n=m.cases,i=m.edef,a=this.parseExpr(m.e),s=[],r=0;r<n.length;){for(var h=n[r],c=(++r,null==h.expr?{expr:nw.EBlock([]),pos:h.values[0].pos}:this.parseExpr(h.expr)),o=[],_=0,d=h.values;_<d.length;)o.push(this.parseExpr(d[_++]));s.push({expr:c,values:o})}t=nw.ESwitch(a,s,null==i?null:this.parseExpr(i));break;case 18:n=m.e;t=nw.EReturn(null==n?null:this.parseExpr(n));break;case 19:t=nw.EBreak;break;case 20:t=nw.EContinue;break;case 25:n=m.eelse;t=nw.EIf(this.parseExpr(m.econd),this.parseExpr(m.eif),null==n?null:this.parseExpr(n));break;case 27:var n=m.s,p=this.parseExpr(m.e);if(8==(m=p.expr)._hx_index){for(var i=m.v,m=0;m<i.length;)this.applyMeta(n,i[m++]);t=p.expr}else switch(n.name){case":extends":t=nw.ECall({expr:nw.EIdent("extends"),pos:n.pos},[p]);break;case":import":t=nw.ECall({expr:nw.EIdent("import"),pos:n.pos},[p]);break;default:for(var g=n.name,m=[],i=0,s=n.params;i<s.length;)m.push(this.parseExpr(s[i++]));t=nw.EMeta(g,m,p)}break;default:t=null}return null==t&&this.error("Unsupported expression",e.pos),{expr:t,pos:e.pos}},__class__:Wm},fe["hxsl.Output"]={__ename__:!0,__constructs__:null,Const:((R=function(e){return{_hx_index:0,v:e,__enum__:"hxsl.Output",toString:o}})._hx_name="Const",R.__params__=["v"],R),Value:((R=function(e,t){return{_hx_index:1,v:e,size:t,__enum__:"hxsl.Output",toString:o}})._hx_name="Value",R.__params__=["v","size"],R),PackNormal:((R=function(e){return{_hx_index:2,v:e,__enum__:"hxsl.Output",toString:o}})._hx_name="PackNormal",R.__params__=["v"],R),PackFloat:((R=function(e){return{_hx_index:3,v:e,__enum__:"hxsl.Output",toString:o}})._hx_name="PackFloat",R.__params__=["v"],R),Vec2:((R=function(e){return{_hx_index:4,a:e,__enum__:"hxsl.Output",toString:o}})._hx_name="Vec2",R.__params__=["a"],R),Vec3:((R=function(e){return{_hx_index:5,a:e,__enum__:"hxsl.Output",toString:o}})._hx_name="Vec3",R.__params__=["a"],R),Vec4:((R=function(e){return{_hx_index:6,a:e,__enum__:"hxsl.Output",toString:o}})._hx_name="Vec4",R.__params__=["a"],R),Swiz:((R=function(e,t){return{_hx_index:7,a:e,swiz:t,__enum__:"hxsl.Output",toString:o}})._hx_name="Swiz",R.__params__=["a","swiz"],R)}),fw=(gw.__constructs__=[gw.Const,gw.Value,gw.PackNormal,gw.PackFloat,gw.Vec2,gw.Vec3,gw.Vec4,gw.Swiz],gw.__empty_constructs__=[],function(e){this.varId=e=null==e?!1:e}),Aw=((i["hxsl.Printer"]=fw).__name__="hxsl.Printer",fw.opStr=function(e){switch(e._hx_index){case 0:return"+";case 1:return"*";case 2:return"/";case 3:return"-";case 4:return"=";case 5:return"==";case 6:return"!=";case 7:return">";case 8:return">=";case 9:return"<";case 10:return"<=";case 11:return"&";case 12:return"|";case 13:return"^";case 14:return"&&";case 15:return"||";case 16:return"<<";case 17:return">>";case 18:return">>>";case 19:return"%";case 20:return fw.opStr(e.op)+"=";case 21:return"...";case 22:return"=>";default:return"??"+el.string(e)}},fw.toString=function(e,t){return new fw(t=null==t?!1:t).exprString(e)},fw.shaderToString=function(e,t){return new fw(t=null==t?!1:t).shaderString(e)},fw.prototype={shaderString:function(e){this.buffer=new b;for(var t=0,n=e.vars;t<n.length;)this.addVar(n[t++],null),this.buffer.b+=";\n";0<e.vars.length&&(this.buffer.b+="\n");for(t=0,n=e.funs;t<n.length;)this.addFun(n[t++]),this.buffer.b+="\n\n";return this.buffer.b},exprString:function(e){return this.buffer=new b,this.addExpr(e,""),this.buffer.b},addVar:function(e,t,n,i){if(null==n&&(n=""),null!=e.qualifiers)for(var s=0,a=e.qualifiers;s<a.length;){var l=a[s];switch(++s,l._hx_index){case 0:var r=l.max;u="const"+(null==r?"":"("+r+")");break;case 1:u="private";break;case 2:u="nullable";break;case 3:u="perObject";break;case 4:u="name('"+l.n+"')";break;case 5:u="shared";break;case 6:r=l.p;u=fe[r.__enum__].__constructs__[r._hx_index]._hx_name.toLowerCase()+"p";break;case 7:u="range("+l.min+","+l.max+")";break;case 8:u="ignore";break;case 9:u="perInstance("+l.v+")";break;case 10:u='doc("'+Ae.replace(l.s,'"','\\"')+'")';break;case 11:u="borrow("+l.source+")";break;case 12:u="sampler("+l.name+")";break;case 13:u="final";break;case 14:u="flat"}this.buffer.b+=el.string("@"+u+" ")}if(e.kind!=t)switch(e.kind._hx_index){case 0:this.buffer.b+="@global ";break;case 1:this.buffer.b+="@input ";break;case 2:this.buffer.b+="@param ";break;case 3:this.buffer.b+="@varying ";break;case 4:this.buffer.b+="@local ";break;case 5:this.buffer.b+="@output ";break;case 6:this.buffer.b+="@function "}if(this.buffer.b+="var ",e.parent==i?this.buffer.b+=el.string(e.name+(this.varId?"@"+e.id:"")):this.addVarName(e),this.buffer.b+=" : ",13==(s=e.type)._hx_index){for(var a=s.vl,o=(this.buffer.b+="{",!0),s=0;s<a.length;){var u=a[s];++s,o?o=!1:this.buffer.b+=", ",this.addVar(u,u.kind,n,u)}this.buffer.b+="}"}else{u=Ue.toString(e.type);this.buffer.b+=el.string(u)}},addFun:function(e){this.buffer.b+=el.string("function "+e.ref.name+"(");for(var t=!0,n=0,i=e.args;n<i.length;){var s=i[n++];t?(this.buffer.b+=" ",t=!1):this.buffer.b+=", ",this.addVar(s,$0.Local)}0<e.args.length&&(this.buffer.b+=" ");var a=") : "+Ue.toString(e.ret)+" ";this.buffer.b+=el.string(a),this.addExpr(e.expr,"")},addVarName:function(e){null!=e.parent&&(this.addVarName(e.parent),this.buffer.b+="."),this.buffer.b+=el.string(e.name),this.varId&&(this.buffer.b+=el.string("@"+e.id))},addConst:function(e){var t,n=this.buffer,i=n.b;switch(e._hx_index){case 0:t="null";break;case 1:t=e.b;break;case 2:case 3:t=e.v;break;case 4:t='"'+e.v+'"'}n.b=i+el.string(t)},addExpr:function(e,t){switch((c=e.e)._hx_index){case 0:this.addConst(c.c);break;case 1:this.addVarName(c.v);break;case 2:var n=Mm.toString(c.g);this.buffer.b+=el.string(n);break;case 3:this.buffer.b+="(",this.addExpr(c.e,t),this.buffer.b+=")";break;case 4:for(var i=c.el,s=(this.buffer.b+="{",t+="\t",0);s<i.length;){e=i[s++];this.buffer.b+=el.string("\n"+t),this.addExpr(e,t),this.buffer.b+=";"}t=Jn.substr(t,1,null),0<i.length&&(this.buffer.b+=el.string("\n"+t)),this.buffer.b+="}";break;case 5:this.addExpr(c.e1,t),this.buffer.b+=el.string(" "+fw.opStr(c.op)+" "),this.addExpr(c.e2,t);break;case 6:i=c.e1;switch(c.op._hx_index){case 0:n="++";break;case 1:n="--";break;case 2:n="!";break;case 3:n="-";break;case 4:n="~";break;default:throw tl.thrown("assert")}this.buffer.b+=el.string(n),this.addExpr(i,t);break;case 7:i=c.init;this.addVar(c.v,$0.Local,t),null!=i&&(this.buffer.b+=" = ",this.addExpr(i,t));break;case 8:for(var i=c.args,a=(this.addExpr(c.e,t),this.buffer.b+="(",!0),s=0;s<i.length;){e=i[s++];a?a=!1:this.buffer.b+=", ",this.addExpr(e,t)}this.buffer.b+=")";break;case 9:for(i=c.regs,s=(this.addExpr(c.e,t),this.buffer.b+=".",0);s<i.length;)this.buffer.b+=el.string(fw.SWIZ[i[s++]._hx_index]);break;case 10:i=c.eelse;this.buffer.b+="if( ",this.addExpr(c.econd,t),this.buffer.b+=" ) ",this.addExpr(c.eif,t),null!=i&&(this.buffer.b+=" else ",this.addExpr(i,t));break;case 11:this.buffer.b+="discard";break;case 12:i=c.e;this.buffer.b+="return",null!=i&&(this.buffer.b+=" ",this.addExpr(i,t));break;case 13:this.buffer.b+="for( ",this.addVarName(c.v),this.buffer.b+=" in ",this.addExpr(c.it,t),this.buffer.b+=" ) ",this.addExpr(c.loop,t);break;case 14:this.buffer.b+="continue";break;case 15:this.buffer.b+="break";break;case 16:this.addExpr(c.e,t),this.buffer.b+="[",this.addExpr(c.index,t),this.buffer.b+="]";break;case 17:for(i=c.el,a=(this.buffer.b+="[",!0),s=0;s<i.length;){e=i[s++];a?a=!1:this.buffer.b+=", ",this.addExpr(e,t)}this.buffer.b+="]";break;case 18:for(var i=c.cases,s=c.def,l=(this.buffer.b+="switch( ",this.addExpr(c.e,t),this.buffer.b+=") {",t),r=0;r<i.length;){for(var o=i[r],a=(++r,this.buffer.b+=el.string("\n"+t),this.buffer.b+="case ",!0),u=0,h=o.values;u<h.length;){n=h[u++];a?a=!1:this.buffer.b+=", ",this.addExpr(n,t)}t+="\t",this.buffer.b+=el.string(":\n"+t),this.addExpr(o.expr,t),t=l}null!=s&&(this.buffer.b+=el.string("\n"+t),this.buffer.b+=el.string("default:\n"+(t+="\t")),this.addExpr(s,t),t=l),this.buffer.b+=el.string("\n"+t+"}");break;case 19:i=c.e,s=c.loop;0==c.normalWhile?(l=t,this.buffer.b+=el.string("do {\n"+(t+="\t")),this.addExpr(s,t),this.buffer.b+=el.string("\n"+(t=l)+"} while( "),this.addExpr(i,l),this.buffer.b+=" )"):(this.buffer.b+="while( ",this.addExpr(i,t),l=t,this.buffer.b+=el.string(" ) {\n"+(t+="\t")),this.addExpr(s,t),this.buffer.b+=el.string("\n"+(t=l)+"}"));break;case 20:i=c.args,s=c.e;if(this.buffer.b+="@",this.buffer.b+=el.string(c.m),0<i.length){this.buffer.b+="(";for(a=!0,r=0;r<i.length;){o=i[r++];a?a=!1:this.buffer.b+=", ",this.addConst(o)}this.buffer.b+=")"}this.buffer.b+=" ",this.addExpr(s,t);break;case 21:this.addExpr(c.e,t),this.buffer.b+=".",this.buffer.b+=el.string(c.name);break;case 22:for(var i=c.args,c=(this.buffer.b+="Syntax.",this.buffer.b+=el.string(c.target),this.buffer.b+="(",this.addConst(L.CString(c.code)),0);c<i.length;){var _=i[c];switch(++c,_.access._hx_index){case 0:this.buffer.b+=", @r ";break;case 1:this.buffer.b+=", @w ";break;case 2:this.buffer.b+=", @rw "}this.addExpr(_.e,t)}this.buffer.b+=")"}},__class__:fw},fe["hxsl.LinkMode"]={__ename__:!0,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"hxsl.LinkMode",toString:o},Batch:{_hx_name:"Batch",_hx_index:1,__enum__:"hxsl.LinkMode",toString:o},Compute:{_hx_name:"Compute",_hx_index:2,__enum__:"hxsl.LinkMode",toString:o}}),xw=(Aw.__constructs__=[Aw.Default,Aw.Batch,Aw.Compute],Aw.__empty_constructs__=[Aw.Default,Aw.Batch,Aw.Compute],function(e,t,n,i,s){this.name=e,this.pos=t,this.instance=n,this.index=i,this.type=s}),ww=((i["hxsl.AllocParam"]=xw).__name__="hxsl.AllocParam",xw.prototype={__class__:xw},function(e,t,n){this.pos=e,this.path=t,this.gid=dw.allocID(t),this.type=n}),yw=((i["hxsl.AllocGlobal"]=ww).__name__="hxsl.AllocGlobal",ww.prototype={__class__:ww},function(){}),bw=((i["hxsl.RuntimeShaderData"]=yw).__name__="hxsl.RuntimeShaderData",yw.prototype={__class__:yw},function(e,t){this.shader=e,this.bits=t}),vw=((i["hxsl.ShaderInstanceDesc"]=bw).__name__="hxsl.ShaderInstanceDesc",bw.prototype={__class__:bw},function(){this.id=vw.UID++}),Cw=((i["hxsl.RuntimeShader"]=vw).__name__="hxsl.RuntimeShader",vw.prototype={getShaders:function(){return this.mode==Aw.Compute?[this.vertex]:[this.vertex,this.fragment]},__class__:vw},(i["hxsl.Serializer"]=Nm).__name__="hxsl.Serializer",Nm.prototype={readVarInt:function(){var e=this.input.readByte();return e<128?e:255==e?this.input.readInt32():(127&e)<<8|this.input.readByte()},readType:function(){switch(this.input.readByte()){case 0:return Le.TVoid;case 1:return Le.TInt;case 2:return Le.TBool;case 3:return Le.TFloat;case 4:return Le.TString;case 5:var e=this.input.readByte();return null==(l=Nm.TVECS.h[e])&&(l=Le.TVec(7&e,U.createEnumIndex(K0,e>>3,null)),Nm.TVECS.h[e]=l),l;case 6:return Le.TMat3;case 7:return Le.TMat4;case 8:return Le.TMat3x4;case 9:return Le.TBytes(this.input.readInt32());case 10:return 0==this.version?Le.TSampler(q0.T2D,!1):(o=this.input.readByte(),Le.TSampler(Nm.TDIMS[o>>1],0!=(1&o)));case 11:return 0==this.version?Le.TSampler(q0.T2D,!0):(o=this.input.readByte(),Le.TRWTexture(Nm.TDIMS[o>>3],0!=(1&o),1+(o>>1&3)));case 12:return 0==this.version?Le.TSampler(q0.TCube,!1):Le.TMat2;case 13:var e=this.readVarInt(),t=this.types[e];if(null==t){for(var n=Cn(this,this.readVar),i=[],s=0,a=this.readVarInt();s<a;)++s,i.push(n());t=Le.TStruct(i),this.types[e]=t}return t;case 14:return Le.TFun(null);case 15:var t=this.readType(),l=this.readVar();return Le.TArray(t,null==l?J0.SConst(this.readVarInt()):J0.SVar(l));case 16:var r,o=this.input.readByte(),e=X0.Uniform,t=(0==(128&o)?(r=this.input).set_position(r.pos-1):e=U.createEnumIndex(X0,127&o,null),this.readType()),l=this.readVar();return Le.TBuffer(t,null==l?J0.SConst(this.readVarInt()):J0.SVar(l),e);case 17:return Le.TChannel(this.input.readByte());case 18:if(0==this.version)return Le.TMat2;throw tl.thrown("assert");default:throw tl.thrown("assert")}},readString:function(){var e=this.readVarInt();return this.input.read(e).getString(0,e)},readConst:function(){switch(this.input.readByte()){case 0:return L.CNull;case 1:return L.CBool(0!=this.input.readByte());case 2:return L.CInt(this.input.readInt32());case 3:return L.CFloat(this.input.readDouble());case 4:return L.CString(this.readString());default:throw tl.thrown("assert")}},readExpr:function(){var e=this.input.readByte();if(0==e--)return null;switch(e){case 0:l=j.TConst(this.readConst());break;case 1:l=j.TVar(this.readVar());break;case 2:l=j.TGlobal(Nm.TGLOBALS[this.input.readByte()]);break;case 3:l=j.TParenthesis(this.readExpr());break;case 4:for(var t=Cn(this,this.readExpr),n=[],i=0,s=this.readVarInt();i<s;)++i,n.push(t());l=j.TBlock(n);break;case 5:var a=this.input.readByte(),l=j.TBinop(128<=a?tx.OpAssignOp(Nm.BOPS[127&a]):Nm.BOPS[a],this.readExpr(),this.readExpr());break;case 6:l=j.TUnop(Nm.UNOPS[this.input.readByte()],this.readExpr());break;case 7:l=j.TVarDecl(this.readVar(),this.readExpr());break;case 8:for(var r=this.readExpr(),t=Cn(this,this.readExpr),n=[],i=0,s=this.readVarInt();i<s;)++i,n.push(t());l=j.TCall(r,n);break;case 9:var r=this.readExpr(),o=this.input.readUInt16(),a=Nm.TSWIZ.h[o];if(null==a){for(n=[],i=0,s=1+(3&o);i<s;)n.push(Nm.REGS[o>>2*i+++2&3]);Nm.TSWIZ.h[o]=a=n}l=j.TSwiz(r,a);break;case 10:l=j.TIf(this.readExpr(),this.readExpr(),this.readExpr());break;case 11:l=j.TDiscard;break;case 12:l=j.TReturn(this.readExpr());break;case 13:l=j.TFor(this.readVar(),this.readExpr(),this.readExpr());break;case 14:l=j.TContinue;break;case 15:l=j.TBreak;break;case 16:l=j.TArray(this.readExpr(),this.readExpr());break;case 17:for(t=Cn(this,this.readExpr),n=[],i=0,s=this.readVarInt();i<s;)++i,n.push(t());l=j.TArrayDecl(n);break;case 18:for(r=this.readExpr(),n=[],i=0,s=this.readVarInt();i<s;){++i;for(var t=Cn(this,this.readExpr),u=[],h=0,c=this.readVarInt();h<c;)++h,u.push(t());n.push({values:u,expr:this.readExpr()})}l=j.TSwitch(r,n,this.readExpr());break;case 19:l=j.TWhile(this.readExpr(),this.readExpr(),0!=this.input.readByte());break;case 20:for(r=this.readString(),t=Cn(this,this.readConst),n=[],i=0,s=this.readVarInt();i<s;)++i,n.push(t());l=j.TMeta(r,n,this.readExpr());break;case 21:l=j.TField(this.readExpr(),this.readString());break;case 22:for(r=this.readString(),a=this.readString(),n=[],i=0,s=this.readVarInt();i<s;)++i,n.push({e:this.readExpr(),access:U.createEnumIndex(sw,this.input.readByte(),null),read:!1,write:!1});l=j.TSyntax(r,a,n);break;default:throw tl.thrown("assert")}return{e:l,t:this.readType(),p:null}},readVar:function(){var e=this.readVarInt();if(0==e)return null;var t=this.varMap.h[e];if(null==t){t={id:Ue.allocVarId(),name:this.readString(),type:null,kind:null},(this.varMap.h[e]=t).type=this.readType(),t.kind=Nm.VKINDS[this.input.readByte()],t.parent=this.readVar();var n=this.input.readByte();if(0<n){t.qualifiers=[];for(var i=0;i<n;){switch(++i,this.input.readByte()){case 0:var s=this.input.readInt32(),a=ew.Const(0==s?null:s);break;case 1:a=ew.Private;break;case 2:a=ew.Nullable;break;case 3:a=ew.PerObject;break;case 4:a=ew.Name(this.readString());break;case 5:a=ew.Shared;break;case 6:a=ew.Precision(Nm.PRECS[this.input.readByte()]);break;case 7:a=ew.Range(this.input.readDouble(),this.input.readDouble());break;case 8:a=ew.Ignore;break;case 9:a=ew.PerInstance(this.input.readInt32());break;case 10:a=ew.Doc(this.readString());break;case 11:a=ew.Borrow(this.readString());break;case 12:a=ew.Sampler(this.readString());break;case 13:a=ew.Final;break;case 14:a=ew.Flat;break;default:throw tl.thrown("assert")}t.qualifiers.push(a)}}}return t},readFun:function(){for(var e=Nm.FKIND[this.input.readByte()],t=this.readVar(),n=Cn(this,this.readVar),i=[],s=0,a=this.readVarInt();s<a;)++s,i.push(n());return{kind:e,ref:t,args:i,ret:this.readType(),expr:this.readExpr()}},unserialize:function(e){if(this.input=new HA(TA.decode(e,!1)),this.input.readByte()!=(255&Nm.SIGN)||this.input.readByte()!=(Nm.SIGN>>8&255))throw tl.thrown("Invalid HXSL data");if(this.version=this.input.readByte()-139,this.version<0||1<this.version)throw tl.thrown("Invalid HXSL data");this.varMap=new Je,this.types=[];for(var e=this.readString(),t=Cn(this,this.readVar),n=[],i=0,s=this.readVarInt();i<s;)++i,n.push(t());for(var t=Cn(this,this.readFun),i=[],s=0,a=this.readVarInt();s<a;)++s,i.push(t());return{name:e,vars:n,funs:i}},__class__:Nm},function(e,t){this.s=e,this.next=t}),Sw=((i["hxsl.ShaderList"]=Cw).__name__="hxsl.ShaderList",Cw.addSort=function(e,t){for(var n,i=null,s=t;null!=s&&s.s.priority<e.priority;)s=(i=s).next;return null==i?(n=new Cw(e,t),Cw.checkSize(n),n):(i.next=new Cw(e,i.next),Cw.checkSize(t),t)},Cw.checkSize=function(e){if(!(Cw.MAX_LIST_SIZE<=0)){for(var t=e,n=0;null!=t;){if(!Cw.ALLOW_DUPLICATES&&null!=t.next&&t.next.s==t.s)throw tl.thrown("Duplicate shader "+el.string(t.s));++n,t=t.next}if(n>Cw.MAX_LIST_SIZE)throw tl.thrown("Too many shaders")}},Cw.prototype={__class__:Cw},(i["hxsl.ShaderInstance"]=Gm).__name__="hxsl.ShaderInstance",Gm.prototype={__class__:Gm},(i["hxsl.ShaderGlobal"]=Um).__name__="hxsl.ShaderGlobal",Um.prototype={__class__:Um},(i["hxsl.ShaderConst"]=Lm).__name__="hxsl.ShaderConst",Lm.prototype={__class__:Lm},function(e,t){if(this.instanceCache=new Je,this.consts=null,this.globals=[],""!=e){this.module=t,this.data=(new Nm).unserialize(e);for(var n=0,i=this.data.vars;n<i.length;)this.initVarId(i[n++]);this.data=Sw.compactMem(this.data),this.initialize(),this.initLiveReload()}}),kw=((i["hxsl.SharedShader"]=Sw).__name__="hxsl.SharedShader",Sw.mergeVars=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;){var i=e[n],s=t[n++];if(i.name!=s.name)return!1;s.id=i.id;i=i.type,s=s.type;if(13==i._hx_index){i=i.vl;if(13==s._hx_index){s=s.vl;if(i.length!=s.length)return!1;if(!Sw.mergeVars(i,s))return!1}}}return!0},Sw.loadShader=function(e,t){var n,i=e.getText(),s=new Vx;try{n=s.parseModule(i,e.get_path())}catch(r){if(CA.lastError=r,nl.__instanceof(tl.caught(r).unwrap(),Fx))return null;throw r}for(var a=t.split(".").pop(),l=null,r=0;r<n.length;){var o=n[r];if(++r,2==o._hx_index){o=o.c;if(o.name==a)for(var u=0,h=o.fields;u<h.length;){var c=h[u];if(++u,"SRC"==c.name){c=c.kind;1==c._hx_index&&(l=c.v.expr);break}}}}return null==l?null:(s=new Op({file:e.get_path(),min:0,max:0}).convert(l),(new Wm).parseExpr(s))},Sw.compactMem=function(e){return e},Sw.prototype={initialize:function(){for(var e=0,t=this.data.vars;e<t.length;)this.browseVar(t[e++])},makeBufferType:function(e,t,n){if(13!=t._hx_index)throw tl.thrown("assert");for(var i=t.vl,s=[],a=n.inputs,l=0;l<a.length;)s.push(a[l++]);for(var r=[],o=0;o<s.length;){var u,h=s[o++],c=h.name;switch(h.type){case 1:u=Le.TFloat;break;case 2:u=Le.TVec(2,K0.VFloat);break;case 3:u=Le.TVec(3,K0.VFloat);break;case 4:u=Le.TVec(4,K0.VFloat);break;case 9:u=Le.TBytes(4);break;case 16:u=Le.TMat4}if(Ae.endsWith(h.name,"__m0")){for(var _=h.type,d=_==nl.__cast(9,A1)?1:_,p=2;null!=s[o+p-1]&&Ae.endsWith(s[o+p-1].name,"__m"+p);)++p;switch(p){case 2:if(2!=d)throw tl.thrown("Unsupported matrix format");u=Le.TMat2;break;case 3:switch(d){case 3:u=Le.TMat3;break;case 4:u=Le.TMat3x4;break;default:throw tl.thrown("Unsupported matrix format")}break;case 4:if(4!=d)throw tl.thrown("Unsupported matrix format");u=Le.TMat4;break;default:throw tl.thrown("Unsupported matrix format")}c=Jn.substr(h.name,0,-4),o+=p-1}r.push({id:Ue.allocVarId(),name:c,type:u,kind:e.kind,parent:e})}for(s=0;s<i.length;){for(var e=i[s],m=(++s,!1),g=0;g<r.length;){var f=r[g];if(++g,e.name==f.name){var A=e.type,x=f.type;switch(A._hx_index){case 3:if(3==x._hx_index||U.enumEq(e.type,f.type))break;throw tl.thrown("Buffer "+this.data.name+"."+e.name+":"+Ue.toString(e.type)+" should be "+Ue.toString(f.type));case 5:if(1==A.t._hx_index){if(5==x._hx_index){if(1==x.t._hx_index){if(A.size>x.size&&!U.enumEq(e.type,f.type))throw tl.thrown("Buffer "+this.data.name+"."+e.name+":"+Ue.toString(e.type)+" should be "+Ue.toString(f.type))}else if(!U.enumEq(e.type,f.type))throw tl.thrown("Buffer "+this.data.name+"."+e.name+":"+Ue.toString(e.type)+" should be "+Ue.toString(f.type))}else if(!U.enumEq(e.type,f.type))throw tl.thrown("Buffer "+this.data.name+"."+e.name+":"+Ue.toString(e.type)+" should be "+Ue.toString(f.type))}else if(!U.enumEq(e.type,f.type))throw tl.thrown("Buffer "+this.data.name+"."+e.name+":"+Ue.toString(e.type)+" should be "+Ue.toString(f.type));break;default:if(!U.enumEq(e.type,f.type))throw tl.thrown("Buffer "+this.data.name+"."+e.name+":"+Ue.toString(e.type)+" should be "+Ue.toString(f.type))}m=!0;break}}if(!m)throw tl.thrown("Buffer is missing "+this.data.name+"."+e.name+":"+Ue.toString(e.type))}return Le.TStruct(r)},makeInstance:function(e){for(var t=new zm,n=this.consts,i=[];null!=n;){switch((o=n.v.type)._hx_index){case 1:t.setConstant(n.v,L.CInt(e>>>n.pos&(1<<n.bits)-1));break;case 2:t.setConstant(n.v,L.CBool(0!=(e>>>n.pos&1)));break;case 16:var s,a=o.size,l={id:n.v.id,name:n.v.name,kind:n.v.kind,type:null},r=this.makeBufferType(l,o.t,Lx.fromID(e>>>n.pos&(1<<n.bits)-1));switch(o.kind._hx_index){case 3:s=X0.Uniform;break;case 4:s=X0.Storage;break;case 5:s=X0.RW;break;default:throw tl.thrown("assert")}l.type=Le.TBuffer(r,a,s),t.varMap.set(n.v,l),i.push(l);break;case 17:t.setConstant(n.v,L.CInt(e>>>n.pos&(1<<n.bits)-1));break;default:throw tl.thrown("assert")}n=n.next}for(var o=0;o<i.length;){var u,l=i[o];++o,16==(a=l.type)._hx_index&&1==(u=a.size)._hx_index&&null!=(n=t.constants.h[u.v.id])&&0==n._hx_index&&2==(u=n.c)._hx_index&&(l.type=Le.TBuffer(a.t,J0.SConst(u.v),a.kind))}t.inlineCalls=!0,t.unrollLoops=Sw.UNROLL_LOOPS;for(var h=t.eval(this.data),h=Sw.compactMem(h),c=new Gm(h),o=this.paramsCount=0,a=this.data.vars;o<a.length;)this.addParam(t,c,a[o++]);return this.instanceCache.h[e]=c},addParam:function(e,t,n){if(13==(s=n.type)._hx_index)for(var i=s.vl,s=0;s<i.length;)this.addParam(e,t,i[s++]);else n.kind==$0.Param&&(t.params.h[e.varMap.h[n.__id__].id]=this.paramsCount,this.paramsCount++)},initVarId:function(e){if(e.id=Ue.allocVarId(),13==(n=e.type)._hx_index)for(var t=n.vl,n=0;n<t.length;)this.initVarId(t[n++])},browseVar:function(e,t){if(null==t?t=Ue.getName(e):t+="."+e.name,13==(i=e.type)._hx_index)for(var n=i.vl,i=0;i<n.length;)this.browseVar(n[i++],t);else{var s,a=0;e.kind==$0.Global&&(a=dw.allocID(t),this.globals.push(new Um(e,a))),Ue.isConst(e)&&0<(s=Ue.getConstBits(e))&&((e=new Lm(e,null==this.consts?0:this.consts.pos+this.consts.bits,s)).globalId=a,e.next=this.consts,this.consts=e)}},initLiveReload:function(){null!=this.module&&fm.isActive()&&((Sw.SHADER_RESOLVE.h[this.data.name]=this).file=fm.resolve(this.module.split(".").join("/")+".hx"),null!=this.file)&&this.file.watch(Cn(this,this.onFileReload))},onFileReload:function(){for(var e=Sw.SHADER_RESOLVE.h,t=Object.keys(e),n=t.length,i=0;i<n;){var s=e[t[i++]];s.file==this.file&&s.reloadShader()}},reloadShader:function(){try{var t=Sw.loadShader(this.file,this.data.name);null!=t&&((n=new Tm).loadShader=function(e){var t=Sw.SHADER_RESOLVE.h[e];if(null==t)throw tl.thrown("Could not resolve shader "+e);if(null==t.file)throw tl.thrown("Shader "+e+" can't be live reload because of missing live path");return Sw.loadShader(t.file,t.data.name)},this.applyChanges(n.check(this.data.name,t)))}catch(e){CA.lastError=e;var n=tl.caught(e).unwrap();if(!(n instanceof km))throw e;t=n,n=this.file.getText();_p.trace(t.msg,{methodName:null,className:null,fileName:t.pos.file,lineNumber:Jn.substr(n,0,t.pos.min).split("\n").length})}},applyChanges:function(e){return!!Sw.mergeVars(this.data.vars,e.vars)&&(this.data=Sw.compactMem(e),this.instanceCache=new Je,!0)},__class__:Sw},(i["hxsl._Splitter.VarProps"]=jm).__name__="hxsl._Splitter.VarProps",jm.prototype={__class__:jm},function(){}),Mw=((i["hxsl.Splitter"]=kw).__name__="hxsl.Splitter",kw.prototype={split:function(e,t){for(var n=this,i=(this.isBatchShader=t,null),s=new Je,a=[],l=null,r=new Je,o=[],u=!1,h=(this.varNames=new at,this.varMap=new VA,0),c=e.funs;h<c.length;){var _=c[h];switch(++h,_.kind._hx_index){case 1:this.vars=r,this.avars=o,this.checkExpr((l=_).expr);break;case 0:case 4:this.vars=s,this.avars=a,i=_,this.checkExpr(_.expr),_.kind==iw.Main&&(u=!0);break;default:throw tl.thrown("assert")}}for(var d=[],p=a.length,h=0;h<p;){var m,g=[a[h++]],f=[g[0].v];if(!g[0].local){switch(f[0].kind._hx_index){case 3:case 4:var A=r.h[g[0].origin.id];f[0].kind=null!=A&&0<A.read?$0.Var:$0.Local}switch(f[0].kind._hx_index){case 3:case 5:(0<g[0].read||1<g[0].write)&&(b={id:Ue.allocVarId(),name:f[0].name,kind:$0.Local,type:f[0].type},this.uniqueName(b),this.varMap.set(g[0].origin,b),(y=new jm(b)).read++,s.h[b.id]=y,m=i.expr.p,d.push((e=>function(){n.addExpr(i,e[0])})([{e:j.TBinop(tx.OpAssign,{e:j.TVar(f[0]),t:b.type,p:m},{e:j.TVar(b),t:f[0].type,p:m}),t:b.type,p:m}])),f[0].kind==$0.Var)&&d.push(((e,t)=>function(){n.varMap.set(t[0].origin,e[0])})(f,g))}}}for(i={ret:i.ret,ref:i.ref,kind:i.kind,args:i.args,expr:this.mapVars(i.expr)},h=0;h<d.length;)d[h++]();for(var x=[],h=0;h<o.length;){var w=o[h];switch(++h,(C=w.v).kind._hx_index){case 1:var y,b={id:Ue.allocVarId(),name:C.name,kind:$0.Var,type:C.type},v=(this.uniqueName(b),s.h[w.origin.id]);null==v&&(v=new jm(C),s.h[w.origin.id]=v),v.read++,this.varMap.set(w.origin,b),(y=new jm(b)).origin=w.origin,r.h[w.origin.id]=y,s.h[b.id]=y,this.addExpr(i,{e:j.TBinop(tx.OpAssign,{e:j.TVar(b),t:C.type,p:i.expr.p},{e:j.TVar(C),t:C.type,p:i.expr.p}),t:C.type,p:i.expr.p});break;case 3:0<w.write&&(v={id:Ue.allocVarId(),name:C.name,kind:$0.Local,type:C.type},this.uniqueName(v),x.push({e:j.TVarDecl(v,{e:j.TVar(C),t:C.type,p:l.expr.p}),t:Le.TVoid,p:l.expr.p}),this.varMap.set(w.origin,v))}}for(var C=s.iterator();C.hasNext();)this.checkVar(C.next(),!0,s,i.expr.p);for(C=r.iterator();C.hasNext();)this.checkVar(C.next(),!1,s,l.expr.p);if(null!=l)if(4==(h=(l={ret:l.ret,ref:l.ref,kind:l.kind,args:l.args,expr:this.mapVars(l.expr)}).expr.e)._hx_index)for(c=h.el,h=0;h<x.length;)c.unshift(x[h++]);else x.push(l.expr),l.expr={e:j.TBlock(x),t:Le.TVoid,p:l.expr.p};for(h=[],C=s.iterator();C.hasNext();)(S=C.next()).local||h.push(S);for(var S,c=[],C=r.iterator();C.hasNext();)(S=C.next()).local||c.push(S);if(h.sort(function(e,t){var n=(null==e.origin?e.v:e.origin).id-(null==t.origin?t.v:t.origin).id;return 0!=n?n:e.v.id-t.v.id}),c.sort(function(e,t){var n=(null==e.origin?e.v:e.origin).id-(null==t.origin?t.v:t.origin).id;return 0!=n?n:e.v.id-t.v.id}),u){for(var k=[],M=0;M<h.length;)k.push(h[M++].v);return[{name:"main",vars:k,funs:[i]}]}for(k=[],M=0;M<h.length;)k.push(h[M++].v);for(t={name:"vertex",vars:k,funs:[i]},h=[],k=0;k<c.length;)h.push(c[k++].v);return[t,{name:"fragment",vars:h,funs:[l]}]},addExpr:function(e,t){var n=e.expr.e;4==n._hx_index?n.el.push(t):e.expr={e:j.TBlock([e.expr,t]),t:Le.TVoid,p:e.expr.p}},checkVar:function(e,t,n,i){switch(e.v.kind._hx_index){case 3:if(!t){var s=n.h[e.origin.id];if(null!=s&&s.v.kind==$0.Input)return;if(e.requireInit&&(null==s||0==s.write))throw tl.thrown(new km("Varying "+e.v.name+" is not written by vertex shader",i))}break;case 4:if(e.requireInit&&(null==e.origin.parent||"global"!=e.origin.parent.name&&!this.isBatchShader))throw tl.thrown(new km("Variable "+e.v.name+" is used without being initialized",i))}},mapVars:function(e){var t=e.e;switch(t._hx_index){case 1:return null==(n=this.varMap.h[t.v.__id__])?e:{e:j.TVar(n),t:e.t,p:e.p};case 7:var n,i=t.init;return null==(n=this.varMap.h[t.v.__id__])?Ue.map(e,Cn(this,this.mapVars)):{e:j.TVarDecl(n,null==i?null:this.mapVars(i)),t:e.t,p:e.p};case 13:return null==(n=this.varMap.h[t.v.__id__])?Ue.map(e,Cn(this,this.mapVars)):{e:j.TFor(n,this.mapVars(t.it),this.mapVars(t.loop)),t:e.t,p:e.p};default:return Ue.map(e,Cn(this,this.mapVars))}},get:function(e){var t=this.vars.h[e.id];if(null==t){var n=this.varMap.h[e.__id__];if(null==n){if(e.kind==$0.Global||e.kind==$0.Output||e.kind==$0.Input)n=e;else{if(n={id:Ue.allocVarId(),name:e.name,kind:e.kind,type:e.type},null!=e.qualifiers)for(var i=0,s=e.qualifiers;i<s.length;){var a=s[i];switch(++i,a._hx_index){case 0:case 4:case 6:case 7:break;case 1:case 2:case 3:case 5:case 8:case 9:case 10:case 11:case 12:break;case 13:case 14:null==n.qualifiers&&(n.qualifiers=[]),n.qualifiers.push(a)}}this.uniqueName(n)}this.varMap.set(e,n)}(t=new jm(n)).origin=e,this.vars.h[e.id]=t,this.avars.push(t)}return t},uniqueName:function(e){if(e.kind!=$0.Global&&e.kind!=$0.Output&&e.kind!=$0.Input){var t=this.varNames.h[e.name];if(null!=t&&t!=e){for(var n=e.name;48<=Jn.cca(n,n.length-1)&&Jn.cca(n,n.length-1)<=57;)n=Jn.substr(n,0,-1);for(var i=n==e.name?2:el.parseInt(Jn.substr(e.name,n.length,null));Object.prototype.hasOwnProperty.call(this.varNames.h,n+i);)++i;e.name=n+i}this.varNames.h[e.name]=e}},checkExpr:function(e){var i=this;switch((u=e.e)._hx_index){case 1:0==(l=this.get(u.v)).write&&(l.requireInit=!0),l.read++;break;case 5:var t,n=u.e1,s=u.e2;switch(u.op._hx_index){case 4:switch((t=n.e)._hx_index){case 1:(l=this.get(t.v)).write++,this.checkExpr(s);break;case 9:var a=t.e.e;1==a._hx_index?((l=this.get(a.v)).write++,this.checkExpr(s)):Ue.iter(e,Cn(this,this.checkExpr));break;default:Ue.iter(e,Cn(this,this.checkExpr))}break;case 20:switch((t=n.e)._hx_index){case 1:0==(l=this.get(t.v)).write&&(l.requireInit=!0),l.read++,l.write++,this.checkExpr(s);break;case 9:1==(n=t.e.e)._hx_index?(0==(l=this.get(n.v)).write&&(l.requireInit=!0),l.read++,l.write++,this.checkExpr(s)):Ue.iter(e,Cn(this,this.checkExpr));break;default:Ue.iter(e,Cn(this,this.checkExpr))}break;default:Ue.iter(e,Cn(this,this.checkExpr))}break;case 7:var l,n=u.init;(l=this.get(u.v)).local=!0,null!=n&&(this.checkExpr(n),l.write++);break;case 13:this.checkExpr(u.it),(l=this.get(u.v)).local=!0,l.write++,this.checkExpr(u.loop);break;case 22:for(var n=u.args,r=null,o=null,o=function(e){var t=e.e;if(1==t._hx_index){var n=i.get(t.v);switch(r.access._hx_index){case 0:n.read--;break;case 1:n.write++;break;case 2:n.read--,n.write++}}else Ue.iter(e,o)},u=0,s=n.length;u<s;)r=n[u++],o(r.e),this.checkExpr(r.e);break;default:Ue.iter(e,Cn(this,this.checkExpr))}},__class__:kw},function(){}),Iw=((i["js.html._CanvasElement.CanvasUtil"]=Mw).__name__="js.html._CanvasElement.CanvasUtil",Mw.getContextWebGL=function(e,t){var n=e.getContext("webgl",t);return null!=n||null!=(n=e.getContext("experimental-webgl",t))?n:null},Math.__name__="Math",(i["polygonal.ds.Itr"]=Hm).__name__="polygonal.ds.Itr",Hm.__isInterface__=!0,Hm.prototype={__class__:Hm},function(e){this.mObject=e,this.mData=this.mObject.mData;e=this.mObject;this.mS=e.mW*e.mH,this.mI=0}),Bw=((i["polygonal.ds.Array2Iterator"]=Iw).__name__="polygonal.ds.Array2Iterator",Iw.__interfaces__=[Hm],Iw.prototype={hasNext:function(){return this.mI<this.mS},next:function(){return this.mData[this.mI++]},__class__:Iw},function(e,t){null==t&&(t=0),this.x=e=null==e?0:e,this.y=t}),Tw=((i["polygonal.ds.Array2Cell"]=Bw).__name__="polygonal.ds.Array2Cell",Bw.prototype={__class__:Bw},function(e,t,n){null==n&&(n=0),null==t&&(t=0),this.x=e=null==e?0:e,this.y=t,this.z=n}),Ew=((i["polygonal.ds.Array3Cell"]=Tw).__name__="polygonal.ds.Array3Cell",Tw.prototype={__class__:Tw},(i["polygonal.ds.tools.GrowthRate"]=Ym).__name__="polygonal.ds.tools.GrowthRate",Ym.compute=function(e,t){if(0<e)t+=e;else switch(e){case-3:t<<=1;break;case-2:t=1+(3*t>>1);break;case-1:var n=t+1;t=(n>>3)+(n<9?3:6),t+=n;break;case 0:throw tl.thrown("out of space")}return t},function(){}),Fw=((i["polygonal.ds.tools.NativeArrayTools"]=Ew).__name__="polygonal.ds.tools.NativeArrayTools",Ew.toArray=function(e,t,n,i){if(0==n)return[];var s=new Array(n);if(0==t)for(var a=0;a<n;)s[l=a++]=e[l];else for(var l,a=t,r=t+n;a<r;)s[(l=a++)-t]=e[l];return s},Ew.blit=function(e,t,n,i,s){if(0<s)if(e==n){if(t<i)for(var a=t+s,l=i+s,r=0;r<s;)++r,e[--l]=e[--a];else if(i<t)for(a=t,l=i,r=0;r<s;)++r,e[l]=e[a],++a,++l}else if(0==t&&0==i)for(r=0;r<s;)n[a=r++]=e[a];else if(0==t)for(r=0;r<s;)n[i+(a=r++)]=e[a];else if(0==i)for(r=0;r<s;)n[a=r++]=e[t+a];else for(r=0;r<s;)n[i+(a=r++)]=e[t+a]},Ew.nullify=function(e,t,n){for(var i=t=null==t?0:t,s=(n=null==n?0:n)<=0?e.length:t+n;i<s;)e[i++]=null;return e},function(e,t,n){null==n&&(n=-1),this.mCapacity=16,this.size=0,this.growthRate=-1,this.mFactory=e,this.mDispose=null==t?function(e){}:t,this.maxSize=n,this.mPool=new Array(this.mCapacity)}),Dw=((i["polygonal.ds.tools.ObjectPool"]=Fw).__name__="polygonal.ds.tools.ObjectPool",Fw.prototype={free:function(){for(var e=0,t=this.mCapacity;e<t;)this.mDispose(this.mPool[e++]);Ew.nullify(this.mPool),this.mPool=null,this.mFactory=null,this.mDispose=null},resize:function(){var e=Ym.compute(this.growthRate,this.mCapacity),t=new Array(e);this.mCapacity=e,Ew.blit(this.mPool,0,t,0,this.size),this.mPool=t},__class__:Fw},(i["spine.Animation"]=Zm).__name__="spine.Animation",Zm.prototype={setTimelines:function(e){if(null==e)throw tl.thrown(new Dw("timelines cannot be null."));for(var t=(this.timelines=e).length,n=this.timelineIds,i=(n.splice(0,n.length),0);i<t;)gy.addAll(this.timelineIds,e[i].getPropertyIds()),++i},hasTimeline:function(e){for(var t=0,n=e;t<n.length;)if(-1!=this.timelineIds.indexOf(n[t++]))return!0;return!1},getDuration:function(){return this.duration},__class__:Zm},(i["spine.Timeline"]=Xm).__name__="spine.Timeline",Xm.search=function(e,t){for(var n=e.length,i=1;i<n;){if(e[i]>t)return i-1;++i}return n-1},Xm.searchWithStep=function(e,t,n){for(var i=e.length,s=n;s<i;){if(e[s]>t)return s-n;s+=n}return i-n},Xm.prototype={getPropertyIds:function(){return this._propertyIds},getFrameEntries:function(){return 1},getFrameCount:function(){return this.frames.length/this.getFrameEntries()|0},getDuration:function(){return this.frames[this.frames.length-this.getFrameEntries()]},apply:function(e,t,n,i,s,a,l){},__class__:Xm},(i["spine.BoneTimeline"]=qm).__name__="spine.BoneTimeline",qm.__isInterface__=!0,(i["spine.SlotTimeline"]=Km).__name__="spine.SlotTimeline",Km.__isInterface__=!0,(i["spine.CurveTimeline"]=Jm).__name__="spine.CurveTimeline",Jm.__super__=Xm,Jm.prototype=e(Xm.prototype,{setStepped:function(e){this.curves[e]=1},shrink:function(e){e=this.getFrameCount()+18*e;if(this.curves.length>e){var t=e,n=0|(t=null==e?0:e),i=[];if(0<t){var s=i.length;if(n<s)i.splice(n,n-s);else if(s<n)for(;s<n;)i.push(0),++s}_y.copy(this.curves,0,i,0,e),this.curves=i}},setBezier:function(e,t,n,i,s,a,l,r,o,u,h){for(var c=this.curves,_=this.getFrameCount()+18*e,e=(0==n&&(c[t]=2+_),.03*(i-2*a+r)),n=.03*(s-2*l+o),d=.006*(3*(a-r)-i+u),p=.006*(3*(l-o)-s+h),m=2*e+d,g=2*n+p,f=.3*(a-i)+e+.16666667*d,A=.3*(l-s)+n+.16666667*p,x=i+f,w=s+A,y=_+18;_<y;)c[_]=x,c[_+1]=w,f+=m,A+=g,m+=d,g+=p,x+=f,w+=A,_+=2},getBezierValue:function(e,t,n,i){var s=this.curves;if(s[i]>e)return r=this.frames[t],(l=this.frames[t+n])+(e-r)/(s[i]-r)*(s[i+1]-l);var a=i+18;for(i+=2;i<a;){if(s[i]>=e)return r=s[i-2],(l=s[i-1])+(e-r)/(s[i]-r)*(s[i+1]-l);i+=2}t+=this.getFrameEntries();var l,r=s[a-2];return(l=s[a-1])+(e-r)/(this.frames[t]-r)*(this.frames[t+n]-l)},__class__:Jm}),(i["spine.CurveTimeline1"]=$m).__name__="spine.CurveTimeline1",$m.__super__=Jm,$m.prototype=e(Jm.prototype,{getFrameEntries:function(){return 2},setFrame:function(e,t,n){this.frames[e<<=1]=t,this.frames[e+1]=n},getCurveValue:function(e){for(var t=this.frames,n=t.length-2,i=2;i<=n;){if(t[i]>e){n=i-2;break}i+=2}var s,a,l=0|this.curves[n>>1];return 0==l?(s=t[n],(a=t[n+1])+(e-s)/(t[n+2]-s)*(t[n+2+1]-a)):1==l?t[n+1]:this.getBezierValue(e,n,1,l-2)},__class__:$m}),(i["spine.CurveTimeline2"]=eg).__name__="spine.CurveTimeline2",eg.__super__=Jm,eg.prototype=e(Jm.prototype,{getFrameEntries:function(){return 3},__class__:eg}),(i["spine.RotateTimeline"]=tg).__name__="spine.RotateTimeline",tg.__interfaces__=[qm],tg.__super__=$m,tg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){if(n<this.frames[0])return 0==a?void(r.rotation=r.data.rotation):void(1==a&&(r.rotation+=(r.data.rotation-r.rotation)*s));var o=this.getCurveValue(n);do{if(0==a){r.rotation=r.data.rotation+o*s;break}}while(1==a||2==a?(o+=r.data.rotation-r.rotation,r.rotation+=o*s):3==a&&(r.rotation+=o*s),0)}},__class__:tg}),(i["spine.TranslateTimeline"]=ng).__name__="spine.TranslateTimeline",ng.__interfaces__=[qm],ng.__super__=eg,ng.prototype=e(eg.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){var o=this.frames;if(n<o[0])return 0==a?(r.x=r.data.x,void(r.y=r.data.y)):void(1==a&&(r.x+=(r.data.x-r.x)*s,r.y+=(r.data.y-r.y)*s));var u=0,h=0,c=Xm.searchWithStep(o,n,3),_=0|this.curves[c/3|0];do{if(0==_){var d=o[c],u=o[c+1],h=o[c+2],d=(n-d)/(o[c+3]-d);u+=(o[c+3+1]-u)*d,h+=(o[c+3+2]-h)*d;break}if(1==_){u=o[c+1],h=o[c+2];break}}while(u=this.getBezierValue(n,c,1,_-2|0),h=this.getBezierValue(n,c,2,18+_-2),0);do{if(0==a){r.x=r.data.x+u*s,r.y=r.data.y+h*s;break}if(1==a){r.x+=(r.data.x+u-r.x)*s,r.y+=(r.data.y+h-r.y)*s;break}if(2==a){r.x+=(r.data.x+u-r.x)*s,r.y+=(r.data.y+h-r.y)*s;break}}while(3==a&&(r.x+=u*s,r.y+=h*s),0)}},__class__:ng}),(i["spine.TranslateXTimeline"]=ig).__name__="spine.TranslateXTimeline",ig.__interfaces__=[qm],ig.__super__=$m,ig.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){if(n<this.frames[0])return 0==a?void(r.x=r.data.x):void(1==a&&(r.x+=(r.data.x-r.x)*s));var o=this.getCurveValue(n);do{if(0==a){r.x=r.data.x+o*s;break}if(1==a){r.x+=(r.data.x+o-r.x)*s;break}if(2==a){r.x+=(r.data.x+o-r.x)*s;break}}while(3==a&&(r.x+=o*s),0)}},__class__:ig}),(i["spine.TranslateYTimeline"]=sg).__name__="spine.TranslateYTimeline",sg.__interfaces__=[qm],sg.__super__=$m,sg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){if(n<this.frames[0])return 0==a?void(r.y=r.data.y):void(1==a&&(r.y+=(r.data.y-r.y)*s));var o=this.getCurveValue(n);do{if(0==a){r.y=r.data.y+o*s;break}if(1==a){r.y+=(r.data.y+o-r.y)*s;break}if(2==a){r.y+=(r.data.y+o-r.y)*s;break}}while(3==a&&(r.y+=o*s),0)}},__class__:sg}),(i["spine.ScaleTimeline"]=ag).__name__="spine.ScaleTimeline",ag.__interfaces__=[qm],ag.__super__=eg,ag.prototype=e(eg.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){var o=this.frames;if(n<o[0])return 0==a?(r.scaleX=r.data.scaleX,void(r.scaleY=r.data.scaleY)):void(1==a&&(r.scaleX+=(r.data.scaleX-r.scaleX)*s,r.scaleY+=(r.data.scaleY-r.scaleY)*s));var u=0,h=0,c=Xm.searchWithStep(o,n,3),_=0|this.curves[c/3|0];do{if(0==_){var d=o[c],u=o[c+1],h=o[c+2],d=(n-d)/(o[c+3]-d);u+=(o[c+3+1]-u)*d,h+=(o[c+3+2]-h)*d;break}if(1==_){u=o[c+1],h=o[c+2];break}}while(u=this.getBezierValue(n,c,1,_-2|0),h=this.getBezierValue(n,c,2,18+_-2),0);if(u*=r.data.scaleX,h*=r.data.scaleY,1==s)3==a?(r.scaleX+=u-r.data.scaleX,r.scaleY+=h-r.data.scaleY):(r.scaleX=u,r.scaleY=h);else{var p=0,m=0;if(1==l)do{if(0==a){p=r.data.scaleX,m=r.data.scaleY,r.scaleX=p+(Math.abs(u)*(0<p?1:p<0?-1:0)-p)*s,r.scaleY=m+(Math.abs(h)*(0<m?1:m<0?-1:0)-m)*s;break}if(1==a){p=r.scaleX,m=r.scaleY,r.scaleX=p+(Math.abs(u)*(0<p?1:p<0?-1:0)-p)*s,r.scaleY=m+(Math.abs(h)*(0<m?1:m<0?-1:0)-m)*s;break}if(2==a){p=r.scaleX,m=r.scaleY,r.scaleX=p+(Math.abs(u)*(0<p?1:p<0?-1:0)-p)*s,r.scaleY=m+(Math.abs(h)*(0<m?1:m<0?-1:0)-m)*s;break}}while(3==a&&(r.scaleX+=(u-r.data.scaleX)*s,r.scaleY+=(h-r.data.scaleY)*s),0);else do{if(0==a){p=Math.abs(r.data.scaleX)*(0<u?1:u<0?-1:0),m=Math.abs(r.data.scaleY)*(0<h?1:h<0?-1:0),r.scaleX=p+(u-p)*s,r.scaleY=m+(h-m)*s;break}if(1==a){p=Math.abs(r.scaleX)*(0<u?1:u<0?-1:0),m=Math.abs(r.scaleY)*(0<h?1:h<0?-1:0),r.scaleX=p+(u-p)*s,r.scaleY=m+(h-m)*s;break}if(2==a){p=Math.abs(r.scaleX)*(0<u?1:u<0?-1:0),m=Math.abs(r.scaleY)*(0<h?1:h<0?-1:0),r.scaleX=p+(u-p)*s,r.scaleY=m+(h-m)*s;break}}while(3==a&&(r.scaleX+=(u-r.data.scaleX)*s,r.scaleY+=(h-r.data.scaleY)*s),0)}}},__class__:ag}),(i["spine.ScaleXTimeline"]=lg).__name__="spine.ScaleXTimeline",lg.__interfaces__=[qm],lg.__super__=$m,lg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){if(n<this.frames[0])return 0==a?void(r.scaleX=r.data.scaleX):void(1==a&&(r.scaleX+=(r.data.scaleX-r.scaleX)*s));var o=this.getCurveValue(n)*r.data.scaleX;if(1==s)3==a?r.scaleX+=o-r.data.scaleX:r.scaleX=o;else{var u=0;if(1==l)do{if(0==a){u=r.data.scaleX,r.scaleX=u+(Math.abs(o)*(0<u?1:u<0?-1:0)-u)*s;break}if(1==a){u=r.scaleX,r.scaleX=u+(Math.abs(o)*(0<u?1:u<0?-1:0)-u)*s;break}if(2==a){u=r.scaleX,r.scaleX=u+(Math.abs(o)*(0<u?1:u<0?-1:0)-u)*s;break}}while(3==a&&(r.scaleX+=(o-r.data.scaleX)*s),0);else do{if(0==a){u=Math.abs(r.data.scaleX)*(0<o?1:o<0?-1:0),r.scaleX=u+(o-u)*s;break}if(1==a){u=Math.abs(r.scaleX)*(0<o?1:o<0?-1:0),r.scaleX=u+(o-u)*s;break}if(2==a){u=Math.abs(r.scaleX)*(0<o?1:o<0?-1:0),r.scaleX=u+(o-u)*s;break}}while(3==a&&(r.scaleX+=(o-r.data.scaleX)*s),0)}}},__class__:lg}),(i["spine.ScaleYTimeline"]=rg).__name__="spine.ScaleYTimeline",rg.__interfaces__=[qm],rg.__super__=$m,rg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){if(n<this.frames[0])return 0==a?void(r.scaleY=r.data.scaleY):void(1==a&&(r.scaleY+=(r.data.scaleY-r.scaleY)*s));var o=this.getCurveValue(n)*r.data.scaleY;if(1==s)3==a?r.scaleY+=o-r.data.scaleY:r.scaleY=o;else{var u=0;if(1==l)do{if(0==a){u=r.data.scaleY,r.scaleY=u+(Math.abs(o)*(0<u?1:u<0?-1:0)-u)*s;break}if(1==a){u=r.scaleY,r.scaleY=u+(Math.abs(o)*(0<u?1:u<0?-1:0)-u)*s;break}if(2==a){u=r.scaleY,r.scaleY=u+(Math.abs(o)*(0<u?1:u<0?-1:0)-u)*s;break}}while(3==a&&(r.scaleY+=(o-r.data.scaleY)*s),0);else do{if(0==a){u=Math.abs(r.data.scaleY)*(0<o?1:o<0?-1:0),r.scaleY=u+(o-u)*s;break}if(1==a){u=Math.abs(r.scaleY)*(0<o?1:o<0?-1:0),r.scaleY=u+(o-u)*s;break}if(2==a){u=Math.abs(r.scaleY)*(0<o?1:o<0?-1:0),r.scaleY=u+(o-u)*s;break}}while(3==a&&(r.scaleY+=(o-r.data.scaleY)*s),0)}}},__class__:rg}),(i["spine.ShearTimeline"]=og).__name__="spine.ShearTimeline",og.__interfaces__=[qm],og.__super__=eg,og.prototype=e(eg.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){var o=this.frames;if(n<o[0])return 0==a?(r.shearX=r.data.shearX,void(r.shearY=r.data.shearY)):void(1==a&&(r.shearX+=(r.data.shearX-r.shearX)*s,r.shearY+=(r.data.shearY-r.shearY)*s));var u=0,h=0,c=Xm.searchWithStep(o,n,3),_=0|this.curves[c/3|0];do{if(0==_){var d=o[c],u=o[c+1],h=o[c+2],d=(n-d)/(o[c+3]-d);u+=(o[c+3+1]-u)*d,h+=(o[c+3+2]-h)*d;break}if(1==_){u=o[c+1],h=o[c+2];break}}while(u=this.getBezierValue(n,c,1,_-2|0),h=this.getBezierValue(n,c,2,18+_-2),0);do{if(0==a){r.shearX=r.data.shearX+u*s,r.shearY=r.data.shearY+h*s;break}if(1==a){r.shearX+=(r.data.shearX+u-r.shearX)*s,r.shearY+=(r.data.shearY+h-r.shearY)*s;break}if(2==a){r.shearX+=(r.data.shearX+u-r.shearX)*s,r.shearY+=(r.data.shearY+h-r.shearY)*s;break}}while(3==a&&(r.shearX+=u*s,r.shearY+=h*s),0)}},__class__:og}),(i["spine.ShearXTimeline"]=ug).__name__="spine.ShearXTimeline",ug.__interfaces__=[qm],ug.__super__=$m,ug.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){if(n<this.frames[0])return 0==a?void(r.shearX=r.data.shearX):void(1==a&&(r.shearX+=(r.data.shearX-r.shearX)*s));var o=this.getCurveValue(n);do{if(0==a){r.shearX=r.data.shearX+o*s;break}if(1==a){r.shearX+=(r.data.shearX+o-r.shearX)*s;break}if(2==a){r.shearX+=(r.data.shearX+o-r.shearX)*s;break}}while(3==a&&(r.shearX+=o*s),0)}},__class__:ug}),(i["spine.ShearYTimeline"]=hg).__name__="spine.ShearYTimeline",hg.__interfaces__=[qm],hg.__super__=$m,hg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r=e.bones[this.boneIndex];if(r.active){if(n<this.frames[0])return 0==a?void(r.shearY=r.data.shearY):void(1==a&&(r.shearY+=(r.data.shearY-r.shearY)*s));var o=this.getCurveValue(n);do{if(0==a){r.shearY=r.data.shearY+o*s;break}if(1==a){r.shearY+=(r.data.shearY+o-r.shearY)*s;break}if(2==a){r.shearY+=(r.data.shearY+o-r.shearY)*s;break}}while(3==a&&(r.shearY+=o*s),0)}},__class__:hg}),(i["spine.RGBATimeline"]=cg).__name__="spine.RGBATimeline",cg.__interfaces__=[Km],cg.__super__=Jm,cg.prototype=e(Jm.prototype,{getFrameEntries:function(){return 5},apply:function(e,t,n,i,s,a,l){e=e.slots[this.slotIndex];if(e.bone.active){var r=this.frames,o=e.color;if(n<r[0])return u=e.data.color,0==a?(o.r=u.r,o.g=u.g,o.b=u.b,void(o.a=u.a)):void(1==a&&(o.r+=(u.r-o.r)*s,o.g+=(u.g-o.g)*s,o.b+=(u.b-o.b)*s,o.a+=(u.a-o.a)*s));var u,h=0,c=0,_=0,d=0,p=Xm.searchWithStep(r,n,5),m=0|this.curves[p/5|0];do{if(0==m){var g=r[p],h=r[p+1],c=r[p+2],_=r[p+3],d=r[p+4],g=(n-g)/(r[p+5]-g);h+=(r[p+5+1]-h)*g,c+=(r[p+5+2]-c)*g,_+=(r[p+5+3]-_)*g,d+=(r[p+5+4]-d)*g;break}if(1==m){h=r[p+1],c=r[p+2],_=r[p+3],d=r[p+4];break}}while(h=this.getBezierValue(n,p,1,m-2|0),c=this.getBezierValue(n,p,2,18+m-2),_=this.getBezierValue(n,p,3,36+m-2),d=this.getBezierValue(n,p,4,54+m-2),0);1==s?(o.r=h,o.g=c,o.b=_,o.a=d):(0==a&&(u=e.data.color,o.r=u.r,o.g=u.g,o.b=u.b,o.a=u.a),o.r+=(h-o.r)*s,o.g+=(c-o.g)*s,o.b+=(_-o.b)*s,o.a+=(d-o.a)*s)}},__class__:cg}),(i["spine.RGBTimeline"]=_g).__name__="spine.RGBTimeline",_g.__interfaces__=[Km],_g.__super__=Jm,_g.prototype=e(Jm.prototype,{getFrameEntries:function(){return 4},apply:function(e,t,n,i,s,a,l){e=e.slots[this.slotIndex];if(e.bone.active){var r=this.frames,o=e.color;if(n<r[0])return u=e.data.color,0==a?(o.r=u.r,o.g=u.g,void(o.b=u.b)):void(1==a&&(o.r+=(u.r-o.r)*s,o.g+=(u.g-o.g)*s,o.b+=(u.b-o.b)*s));var u,h=0,c=0,_=0,d=Xm.searchWithStep(r,n,4),p=0|this.curves[d>>2];do{if(0==p){var m=r[d],h=r[d+1],c=r[d+2],_=r[d+3],m=(n-m)/(r[d+4]-m);h+=(r[d+4+1]-h)*m,c+=(r[d+4+2]-c)*m,_+=(r[d+4+3]-_)*m;break}if(1==p){h=r[d+1],c=r[d+2],_=r[d+3];break}}while(h=this.getBezierValue(n,d,1,p-2),c=this.getBezierValue(n,d,2,18+p-2),_=this.getBezierValue(n,d,3,36+p-2),0);1==s?(o.r=h,o.g=c,o.b=_):(0==a&&(u=e.data.color,o.r=u.r,o.g=u.g,o.b=u.b),o.r+=(h-o.r)*s,o.g+=(c-o.g)*s,o.b+=(_-o.b)*s)}},__class__:_g}),(i["spine.AlphaTimeline"]=dg).__name__="spine.AlphaTimeline",dg.__interfaces__=[Km],dg.__super__=$m,dg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){var r,o,e=e.slots[this.slotIndex];if(e.bone.active)return r=e.color,n<this.frames[0]?(o=e.data.color,0==a?void(r.a=o.a):void(1==a&&(r.a+=(o.a-r.a)*s))):(o=this.getCurveValue(n),void(1==s?r.a=o:(0==a&&(r.a=e.data.color.a),r.a+=(o-r.a)*s)))},__class__:dg}),(i["spine.RGBA2Timeline"]=pg).__name__="spine.RGBA2Timeline",pg.__interfaces__=[Km],pg.__super__=Jm,pg.prototype=e(Jm.prototype,{getFrameEntries:function(){return 8},apply:function(e,t,n,i,s,a,l){e=e.slots[this.slotIndex];if(e.bone.active){var r=this.frames,o=e.color,u=e.darkColor;if(n<r[0])return h=e.data.color,c=e.data.darkColor,0==a?(o.r=h.r,o.g=h.g,o.b=h.b,o.a=h.a,u.r=c.r,u.g=c.g,void(u.b=c.b)):void(1==a&&(o.r+=(h.r-o.r)*s,o.g+=(h.g-o.g)*s,o.b+=(h.b-o.b)*s,o.a+=(h.a-o.a)*s,u.r+=(c.r-u.r)*s,u.g+=(c.g-u.g)*s,u.b+=(c.b-u.b)*s));var h,c,_=0,d=0,p=0,m=0,g=0,f=0,A=0,x=Xm.searchWithStep(r,n,8),w=0|this.curves[x>>3];do{if(0==w){var y=r[x],_=r[x+1],d=r[x+2],p=r[x+3],m=r[x+4],g=r[x+5],f=r[x+6],A=r[x+7],y=(n-y)/(r[x+8]-y);_+=(r[x+8+1]-_)*y,d+=(r[x+8+2]-d)*y,p+=(r[x+8+3]-p)*y,m+=(r[x+8+4]-m)*y,g+=(r[x+8+5]-g)*y,f+=(r[x+8+6]-f)*y,A+=(r[x+8+7]-A)*y;break}if(1==w){_=r[x+1],d=r[x+2],p=r[x+3],m=r[x+4],g=r[x+5],f=r[x+6],A=r[x+7];break}}while(_=this.getBezierValue(n,x,1,w-2),d=this.getBezierValue(n,x,2,18+w-2),p=this.getBezierValue(n,x,3,36+w-2),m=this.getBezierValue(n,x,4,54+w-2),g=this.getBezierValue(n,x,5,72+w-2),f=this.getBezierValue(n,x,6,90+w-2),A=this.getBezierValue(n,x,7,108+w-2),0);1==s?(o.r=_,o.g=d,o.b=p,o.a=m,u.r=g,u.g=f,u.b=A):(0==a&&(h=e.data.color,o.r=h.r,o.g=h.g,o.b=h.b,o.a=h.a,c=e.data.darkColor,u.r=c.r,u.g=c.g,u.b=c.b),o.r+=(_-o.r)*s,o.g+=(d-o.g)*s,o.b+=(p-o.b)*s,o.a+=(m-o.a)*s,u.r+=(g-u.r)*s,u.g+=(f-u.g)*s,u.b+=(A-u.b)*s)}},__class__:pg}),(i["spine.RGB2Timeline"]=mg).__name__="spine.RGB2Timeline",mg.__interfaces__=[Km],mg.__super__=Jm,mg.prototype=e(Jm.prototype,{getFrameEntries:function(){return 7},apply:function(e,t,n,i,s,a,l){e=e.slots[this.slotIndex];if(e.bone.active){var r=this.frames,o=e.color,u=e.darkColor;if(n<r[0])return h=e.data.color,c=e.data.darkColor,0==a?(o.r=h.r,o.g=h.g,o.b=h.b,u.r=c.r,u.g=c.g,void(u.b=c.b)):void(1==a&&(o.r+=(h.r-o.r)*s,o.g+=(h.g-o.g)*s,o.b+=(h.b-o.b)*s,u.r+=(c.r-u.r)*s,u.g+=(c.g-u.g)*s,u.b+=(c.b-u.b)*s));var h,c,_=0,d=0,p=0,m=0,g=0,f=0,A=Xm.searchWithStep(r,n,7),x=0|this.curves[A/7|0];do{if(0==x){var w=r[A],_=r[A+1],d=r[A+2],p=r[A+3],m=r[A+4],g=r[A+5],f=r[A+6],w=(n-w)/(r[A+7]-w);_+=(r[A+7+1]-_)*w,d+=(r[A+7+2]-d)*w,p+=(r[A+7+3]-p)*w,m+=(r[A+7+4]-m)*w,g+=(r[A+7+5]-g)*w,f+=(r[A+7+6]-f)*w;break}if(1==x){_=r[A+1],d=r[A+2],p=r[A+3],m=r[A+4],g=r[A+5],f=r[A+6];break}}while(_=this.getBezierValue(n,A,1,x-2|0),d=this.getBezierValue(n,A,2,18+x-2),p=this.getBezierValue(n,A,3,36+x-2),m=this.getBezierValue(n,A,4,54+x-2),g=this.getBezierValue(n,A,5,72+x-2),f=this.getBezierValue(n,A,6,90+x-2),0);1==s?(o.r=_,o.g=d,o.b=p,u.r=m,u.g=g,u.b=f):(0==a&&(h=e.data.color,c=e.data.darkColor,o.r=h.r,o.g=h.g,o.b=h.b,u.r=c.r,u.g=c.g,u.b=c.b),o.r+=(_-o.r)*s,o.g+=(d-o.g)*s,o.b+=(p-o.b)*s,u.r+=(m-u.r)*s,u.g+=(g-u.g)*s,u.b+=(f-u.b)*s)}},__class__:mg}),(i["spine.AttachmentTimeline"]=gg).__name__="spine.AttachmentTimeline",gg.__interfaces__=[Km],gg.__super__=Xm,gg.prototype=e(Xm.prototype,{getFrameCount:function(){return this.frames.length},apply:function(e,t,n,i,s,a,l){var r,o,u,h,c,_=e.slots[this.slotIndex];_.bone.active&&(1==l?0==a&&(o=null==(r=_.data.attachmentName)?null:e.getAttachment(this.slotIndex,r),_.attachment!=o)&&(o instanceof Xw&&_.attachment instanceof Xw&&(h=_.attachment,(null!=(u=o).deformAttachment?u.deformAttachment:u)==(null!=h.deformAttachment?h.deformAttachment:h))||(c=_.deform).splice(0,c.length),_.attachment=o,_.attachmentTime=_.bone.skeleton.time):n<this.frames[0]?0!=a&&1!=a||(o=null==(r=_.data.attachmentName)?null:e.getAttachment(this.slotIndex,r),_.attachment!=o&&(o instanceof Xw&&_.attachment instanceof Xw&&(u=o,h=_.attachment,(null!=u.deformAttachment?u.deformAttachment:u)==(null!=h.deformAttachment?h.deformAttachment:h))||(c=_.deform).splice(0,c.length),_.attachment=o,_.attachmentTime=_.bone.skeleton.time)):(o=null==(r=this.attachmentNames[Xm.search(this.frames,n)])?null:e.getAttachment(this.slotIndex,r),_.attachment!=o&&(o instanceof Xw&&_.attachment instanceof Xw&&(u=o,h=_.attachment,(null!=u.deformAttachment?u.deformAttachment:u)==(null!=h.deformAttachment?h.deformAttachment:h))||(c=_.deform).splice(0,c.length),_.attachment=o,_.attachmentTime=_.bone.skeleton.time)))},__class__:gg}),(i["spine.DeformTimeline"]=fg).__name__="spine.DeformTimeline",fg.__interfaces__=[Km],fg.__super__=Jm,fg.prototype=e(Jm.prototype,{getFrameCount:function(){return this.frames.length},setBezier:function(e,t,n,i,s,a,l,r,o,u,h){for(var c=this.curves,_=this.frames.length+18*e,e=(0==n&&(c[t]=2+_),.03*(i-2*a+r)),n=.03*o-.06*l,d=.006*(3*(a-r)-i+u),p=.018*(l-o+.33333333),m=2*e+d,g=2*n+p,f=.3*(a-i)+e+.16666667*d,A=.3*l+n+.16666667*p,x=i+f,w=A,y=_+18;_<y;)c[_]=x,c[_+1]=w,f+=m,A+=g,m+=d,g+=p,x+=f,w+=A,_+=2},getCurvePercent:function(e,t){var n=this.curves,i=0|n[t],s=i;if(0==s)return(e-(r=this.frames[t]))/(this.frames[t+this.getFrameEntries()]-r);if(1==s)return 0;if(e<n[i-=2])return r=this.frames[t],n[i+1]*(e-r)/(n[i]-r);var a=i+18;for(i+=2;i<a;){if(n[i]>=e)return r=n[i-2],(l=n[i-1])+(e-r)/(n[i]-r)*(n[i+1]-l);i+=2}var l,r=n[a-2];return(l=n[a-1])+(1-l)*(e-r)/(this.frames[t+this.getFrameEntries()]-r)},apply:function(e,t,n,P,i,s,z){e=e.slots[this.slotIndex];if(e.bone.active){var a=e.attachment;if(!(!(a instanceof Xw)||(null!=(h=a).deformAttachment?h.deformAttachment:h)!=this.attachment)){var l=e.deform,e=(0==l.length&&(s=0),this.vertices),r=e[0].length,o=this.frames;if(n<o[0]){var u,h=a,c=s;if(0==c)l.splice(0,l.length);else if(1==c){if(1==i)return void l.splice(0,l.length);if(r<(u=l.length))l.splice(r,r-u);else if(u<r)for(;u<r;)l.push(0),++u;var _=l;if(null==h.bones)for(var d=h.vertices,p=0;p<r;)_[p]+=(d[p]-_[p])*i,++p;else{i=1-i;for(var m=0;m<r;)_[m]*=i,++m}}}else{if(r<(u=l.length))l.splice(r,r-u);else if(u<r)for(;u<r;)l.push(0),++u;_=l;if(o[o.length-1]<=n){var g=e[o.length-1];if(1==i)if(3==s)if(null==(h=a).bones)for(d=h.vertices,p=0;p<r;)_[p]+=g[p]-d[p],++p;else for(p=0;p<r;)_[p]+=g[p],++p;else _y.copy(g,0,_,0,r);else do{var f=s;if(0==f){if(null==(h=a).bones)for(d=h.vertices,p=0;p<r;){var A=d[p];_[p]=A+(g[p]-A)*i,++p}else for(m=0;m<r;)_[m]=g[m]*i,++m;break}if(1==f){for(var x=0;x<r;)_[x]+=(g[x]-_[x])*i,++x;break}if(2==f){for(var w=0;w<r;)_[w]+=(g[w]-_[w])*i,++w;break}if(3==f)if(null==(I=a).bones)for(var y=I.vertices,b=0;b<r;)_[b]+=(g[b]-y[b])*i,++b;else for(var v=0;v<r;)_[v]+=g[v]*i,++v}while(0)}else{var c=Xm.search(o,n),C=this.getCurvePercent(n,c),S=e[c],k=e[c+1];if(1==i)if(3==s)if(null==(h=a).bones)for(d=h.vertices,p=0;p<r;){var M=S[p];_[p]+=M+(k[p]-M)*C-d[p],++p}else for(p=0;p<r;){M=S[p];_[p]+=M+(k[p]-M)*C,++p}else for(p=0;p<r;){M=S[p];_[p]=M+(k[p]-M)*C,++p}else do{var I,B=s;if(0==B){if(null==(h=a).bones)for(d=h.vertices,p=0;p<r;){M=S[p],A=d[p];_[p]=A+(M+(k[p]-M)*C-A)*i,++p}else for(m=0;m<r;){var T=S[m];_[m]=(T+(k[m]-T)*C)*i,++m}break}if(1==B){for(x=0;x<r;){var E=S[x];_[x]+=(E+(k[x]-E)*C-_[x])*i,++x}break}if(2==B){for(w=0;w<r;){var F=S[w];_[w]+=(F+(k[w]-F)*C-_[w])*i,++w}break}if(3==B)if(null==(I=a).bones)for(y=I.vertices,b=0;b<r;){var D=S[b];_[b]+=(D+(k[b]-D)*C-y[b])*i,++b}else for(v=0;v<r;){var R=S[v];_[v]+=(R+(k[v]-R)*C)*i,++v}}while(0)}}}}},__class__:fg}),(i["spine.EventTimeline"]=Ag).__name__="spine.EventTimeline",Ag.__super__=Xm,Ag.prototype=e(Xm.prototype,{getFrameCount:function(){return this.frames.length},apply:function(e,t,n,i,s,a,l){if(null!=i){var r=this.frames,o=r.length;if(n<t)this.apply(e,t,999999999,i,s,a,l),t=-1;else if(t>=r[o-1])return;if(!(n<r[0])){var u=0;if(t<r[0])u=0;else for(var h=r[u=Xm.search(r,t)+1];0<u&&r[u-1]==h;)--u;for(;u<o&&n>=r[u];)i.push(this.events[u]),++u}}},__class__:Ag}),(i["spine.DrawOrderTimeline"]=xg).__name__="spine.DrawOrderTimeline",xg.__super__=Xm,xg.prototype=e(Xm.prototype,{getFrameCount:function(){return this.frames.length},apply:function(e,t,n,i,s,a,l){if(1==l)0==a&&_y.copy(e.slots,0,e.drawOrder,0,e.slots.length);else if(n<this.frames[0])0!=a&&1!=a||_y.copy(e.slots,0,e.drawOrder,0,e.slots.length);else{var r=this.drawOrders[Xm.search(this.frames,n)];if(null==r)_y.copy(e.slots,0,e.drawOrder,0,e.slots.length);else for(var o=e.slots,u=e.drawOrder,h=0,c=r.length;h<c;)u[h]=o[r[h]],++h}},__class__:xg}),(i["spine.IkConstraintTimeline"]=wg).__name__="spine.IkConstraintTimeline",wg.__super__=Jm,wg.prototype=e(Jm.prototype,{getFrameEntries:function(){return 6},apply:function(e,t,n,i,s,a,l){e=e.ikConstraints[this.ikConstraintIndex];if(e.active){var r=this.frames;if(n<r[0])return 0==a?(e.mix=e.data.mix,e.softness=e.data.softness,e.bendDirection=e.data.bendDirection,e.compress=e.data.compress,void(e.stretch=e.data.stretch)):void(1==a&&(e.mix+=(e.data.mix-e.mix)*s,e.softness+=(e.data.softness-e.softness)*s,e.bendDirection=e.data.bendDirection,e.compress=e.data.compress,e.stretch=e.data.stretch));var o=0,u=0,h=Xm.searchWithStep(r,n,6),c=0|this.curves[h/6|0];do{if(0==c){var _=r[h],o=r[h+1],u=r[h+2],_=(n-_)/(r[h+6]-_);o+=(r[h+6+1]-o)*_,u+=(r[h+6+2]-u)*_;break}if(1==c){o=r[h+1],u=r[h+2];break}}while(o=this.getBezierValue(n,h,1,c-2|0),u=this.getBezierValue(n,h,2,18+c-2),0);0==a?(e.mix=e.data.mix+(o-e.data.mix)*s,e.softness=e.data.softness+(u-e.data.softness)*s,1==l?(e.bendDirection=e.data.bendDirection,e.compress=e.data.compress,e.stretch=e.data.stretch):(e.bendDirection=0|r[h+3],e.compress=0!=r[h+4],e.stretch=0!=r[h+5])):(e.mix+=(o-e.mix)*s,e.softness+=(u-e.softness)*s,0==l&&(e.bendDirection=0|r[h+3],e.compress=0!=r[h+4],e.stretch=0!=r[h+5]))}},__class__:wg}),(i["spine.TransformConstraintTimeline"]=yg).__name__="spine.TransformConstraintTimeline",yg.__super__=Jm,yg.prototype=e(Jm.prototype,{getFrameEntries:function(){return 7},apply:function(e,t,n,i,s,a,l){e=e.transformConstraints[this.transformConstraintIndex];if(e.active){var r=this.frames;if(n<r[0])return o=e.data,0==a?(e.mixRotate=o.mixRotate,e.mixX=o.mixX,e.mixY=o.mixY,e.mixScaleX=o.mixScaleX,e.mixScaleY=o.mixScaleY,void(e.mixShearY=o.mixShearY)):void(1==a&&(e.mixRotate+=(o.mixRotate-e.mixRotate)*s,e.mixX+=(o.mixX-e.mixX)*s,e.mixY+=(o.mixY-e.mixY)*s,e.mixScaleX+=(o.mixScaleX-e.mixScaleX)*s,e.mixScaleY+=(o.mixScaleY-e.mixScaleY)*s,e.mixShearY+=(o.mixShearY-e.mixShearY)*s));var o,u=0,h=0,c=0,_=0,d=0,p=0,m=Xm.searchWithStep(r,n,7),g=0|this.curves[m/7|0];do{if(0==g){var f=r[m],u=r[m+1],h=r[m+2],c=r[m+3],_=r[m+4],d=r[m+5],p=r[m+6],f=(n-f)/(r[m+7]-f);u+=(r[m+7+1]-u)*f,h+=(r[m+7+2]-h)*f,c+=(r[m+7+3]-c)*f,_+=(r[m+7+4]-_)*f,d+=(r[m+7+5]-d)*f,p+=(r[m+7+6]-p)*f;break}if(1==g){u=r[m+1],h=r[m+2],c=r[m+3],_=r[m+4],d=r[m+5],p=r[m+6];break}}while(u=this.getBezierValue(n,m,1,g-2|0),h=this.getBezierValue(n,m,2,18+g-2),c=this.getBezierValue(n,m,3,36+g-2),_=this.getBezierValue(n,m,4,54+g-2),d=this.getBezierValue(n,m,5,72+g-2),p=this.getBezierValue(n,m,6,90+g-2),0);0==a?(o=e.data,e.mixRotate=o.mixRotate+(u-o.mixRotate)*s,e.mixX=o.mixX+(h-o.mixX)*s,e.mixY=o.mixY+(c-o.mixY)*s,e.mixScaleX=o.mixScaleX+(_-o.mixScaleX)*s,e.mixScaleY=o.mixScaleY+(d-o.mixScaleY)*s,e.mixShearY=o.mixShearY+(p-o.mixShearY)*s):(e.mixRotate+=(u-e.mixRotate)*s,e.mixX+=(h-e.mixX)*s,e.mixY+=(c-e.mixY)*s,e.mixScaleX+=(_-e.mixScaleX)*s,e.mixScaleY+=(d-e.mixScaleY)*s,e.mixShearY+=(p-e.mixShearY)*s)}},__class__:yg}),(i["spine.PathConstraintPositionTimeline"]=bg).__name__="spine.PathConstraintPositionTimeline",bg.__super__=$m,bg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){e=e.pathConstraints[this.pathConstraintIndex];if(e.active)return n<this.frames[0]?0==a?void(e.position=e.data.position):void(1==a&&(e.position+=(e.data.position-e.position)*s)):(n=this.getCurveValue(n),void(0==a?e.position=e.data.position+(n-e.data.position)*s:e.position+=(n-e.position)*s))},__class__:bg}),(i["spine.PathConstraintSpacingTimeline"]=vg).__name__="spine.PathConstraintSpacingTimeline",vg.__super__=$m,vg.prototype=e($m.prototype,{apply:function(e,t,n,i,s,a,l){e=e.pathConstraints[this.pathConstraintIndex];if(e.active)return n<this.frames[0]?0==a?void(e.spacing=e.data.spacing):void(1==a&&(e.spacing+=(e.data.spacing-e.spacing)*s)):(n=this.getCurveValue(n),void(0==a?e.spacing=e.data.spacing+(n-e.data.spacing)*s:e.spacing+=(n-e.spacing)*s))},__class__:vg}),(i["spine.PathConstraintMixTimeline"]=Cg).__name__="spine.PathConstraintMixTimeline",Cg.__super__=Jm,Cg.prototype=e(Jm.prototype,{getFrameEntries:function(){return 4},apply:function(e,t,n,i,s,a,l){e=e.pathConstraints[this.pathConstraintIndex];if(e.active){var r=this.frames;if(n<r[0])return o=e.data,0==a?(e.mixRotate=o.mixRotate,e.mixX=o.mixX,void(e.mixY=o.mixY)):void(1==a&&(e.mixRotate+=(o.mixRotate-e.mixRotate)*s,e.mixX+=(o.mixX-e.mixX)*s,e.mixY+=(o.mixY-e.mixY)*s));var o,u=0,h=0,c=0,_=Xm.searchWithStep(r,n,4),d=0|this.curves[_>>2];do{if(0==d){var p=r[_],u=r[_+1],h=r[_+2],c=r[_+3],p=(n-p)/(r[_+4]-p);u+=(r[_+4+1]-u)*p,h+=(r[_+4+2]-h)*p,c+=(r[_+4+3]-c)*p;break}if(1==d){u=r[_+1],h=r[_+2],c=r[_+3];break}}while(u=this.getBezierValue(n,_,1,d-2),h=this.getBezierValue(n,_,2,18+d-2),c=this.getBezierValue(n,_,3,36+d-2),0);0==a?(o=e.data,e.mixRotate=o.mixRotate+(u-o.mixRotate)*s,e.mixX=o.mixX+(h-o.mixX)*s,e.mixY=o.mixY+(c-o.mixY)*s):(e.mixRotate+=(u-e.mixRotate)*s,e.mixX+=(h-e.mixX)*s,e.mixY+=(c-e.mixY)*s)}},__class__:Cg}),(i["spine.support.error.Error"]=Sg).__name__="spine.support.error.Error",Sg.prototype={toString:function(){return null!=this.message?this.message:"Error"},__class__:Sg},function(e){Sg.call(this,e=null==e?"":e),this.name="IllegalArgumentException"}),Rw=((i["spine.support.error.IllegalArgumentException"]=Dw).__name__="spine.support.error.IllegalArgumentException",Dw.__super__=Sg,Dw.prototype=e(Sg.prototype,{__class__:Dw}),function(e){if(this.trackEntryPool=new zw,this.unkeyedState=0,this.timeScale=1,this.animationsChanged=!1,this.propertyIds=[],this.queue=null,this.listeners=new Ay,this.events=[],this.tracks=[],this.queue=new Pw,this.queue.AnimationState_this=this,null==e)throw tl.thrown(new Dw("data cannot be null."));this.data=e}),Pw=((i["spine.AnimationState"]=Rw).__name__="spine.AnimationState",Rw.prototype={updateMixingFrom:function(e,t){var n,i,s=e.mixingFrom;return null==s||(n=this.updateMixingFrom(s,t),s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,0<e.mixTime&&e.mixTime>=e.mixDuration?(0!=s.totalAlpha&&0!=e.mixDuration||(e.mixingFrom=s.mixingFrom,null!=s.mixingFrom&&(s.mixingFrom.mixingTo=e),e.interruptAlpha=s.interruptAlpha,(i=this.queue).objects.push(2),i.objects.push(s),i.AnimationState_this.animationsChanged=!0),n):(s.trackTime+=t*s.timeScale,e.mixTime+=t,!1))},apply:function(e){if(null==e)throw tl.thrown(new Dw("skeleton cannot be null."));if(this.animationsChanged){this.animationsChanged=!1;(T=this.propertyIds).splice(0,T.length);for(var t=this.tracks.length,z=this.tracks,n=0;n<t;){var i=F=z[n];if(null==F);else{for(;null!=i.mixingFrom;)i=i.mixingFrom;for(;;){if(null==i.mixingTo||3!=i.mixBlend){var s=i.mixingTo,a=i.animation.timelines,l=i.animation.timelines.length;if(l<(w=(T=i.timelineMode).length))T.splice(l,l-w);else if(w<l)for(;w<l;)T.push(0),++w;var r=T,o=i.timelineHoldMix,o=(o.splice(0,o.length),i.timelineHoldMix),Q=o.length,V=(l<Q?o.splice(l,l-Q):Q<l&&(o[l-1]=null),o),O=this.propertyIds;if(null!=s&&s.holdPrevious)for(var u=0;u<l;)r[u]=gy.addAll(O,a[u].getPropertyIds())?3:2,++u;else for(;;){for(var h=0,c=0;c<l;){var W=(P=a[c]).getPropertyIds();if(gy.addAll(O,W))if(null==s||P instanceof gg||P instanceof xg||P instanceof Ag||!s.animation.hasTimeline(W))r[c]=1;else{for(var _=s.mixingTo;null!=_;){if(!_.animation.hasTimeline(W)){if(0<_.mixDuration){r[c]=4,V[c]=_,h=2;break}break}_=_.mixingTo}if(2==h){h=0,++c;continue}if(1<=h)break;r[c]=3}else r[c]=0;++c}if(0==h)break}}if(null==(i=i.mixingTo))break}}++n}}for(var N=this.events,G=!1,z=this.tracks,n=0,t=this.tracks.length;n<t;){if(null==(F=z[n])||0<F.delay);else{var d,G=!0,p=0==n?1:F.mixBlend,m=F.alpha,U=(null!=F.mixingFrom?m*=this.applyMixingFrom(F,e,p):F.trackTime>=F.trackEnd&&null==F.next&&(m=0),F.animationLast),g=d=F.loop?0==(d=F.animationEnd-F.animationStart)?F.animationStart:F.trackTime%d+F.animationStart:Math.min(F.trackTime+F.animationStart,F.animationEnd),L=N,f=(F.reverse&&(g=F.animation.duration-g,L=null),F.animation.timelines.length),a=F.animation.timelines;if(0==n&&1==m||3==p)for(var A=0;A<f;){var x,j=a[A];j instanceof gg?(x=e.slots[(P=j).slotIndex]).bone.active&&(g<P.frames[0]?0!=p&&1!=p||this.setAttachment(e,x,x.data.attachmentName,!0):this.setAttachment(e,x,P.attachmentNames[Xm.search(P.frames,g)],!0),x.attachmentState<=this.unkeyedState)&&(x.attachmentState=this.unkeyedState+1):j.apply(e,U,g,L,m,p,0),++A}else{var r=F.timelineMode,H=F.timelinesRotation.length!=f<<1;if(H){var w,y=f<<1;if(y<(w=(T=F.timelinesRotation).length))T.splice(y,y-w);else if(w<y)for(;w<y;)T.push(0),++w}for(var Y=F.timelinesRotation,b=0;b<f;){var v,C,S=a[b],Z=0==r[b]?p:0;S instanceof tg?this.applyRotateTimeline(S,e,g,m,Z,Y,b<<1,H):S instanceof gg?(C=e.slots[(v=S).slotIndex]).bone.active&&(g<v.frames[0]?0!=p&&1!=p||this.setAttachment(e,C,C.data.attachmentName,!0):this.setAttachment(e,C,v.attachmentNames[Xm.search(v.frames,g)],!0),C.attachmentState<=this.unkeyedState)&&(C.attachmentState=this.unkeyedState+1):S.apply(e,U,g,L,m,Z,0),++b}}for(var X=F.animationStart,k=F.animationEnd,M=k-X,q=F.trackLast%M,K=this.events,u=0,J=this.events.length;u<J;){var $=K[u];if($.time<q)break;k<$.time?++u:((B=this.queue).objects.push(5),B.objects.push(F),B.objects.push($),++u)}for((F.loop?0==M||q>F.trackTime%M:k<=d&&F.animationLast<k)&&((M=this.queue).objects.push(4),M.objects.push(F));u<J;){var ee,te=K[u];te.time<X?++u:((ee=this.queue).objects.push(5),ee.objects.push(F),ee.objects.push(te),++u)}N.splice(0,N.length),F.nextAnimationLast=d,F.nextTrackLast=F.trackTime}++n}for(var I,B,ne=this.unkeyedState+1,ie=e.slots,n=0,t=e.slots.length;n<t;)(F=ie[n]).attachmentState==ne&&(I=null==(I=F.data.attachmentName)?null:e.getAttachment(F.data.index,I),F.attachment!=I)&&(I instanceof Xw&&F.attachment instanceof Xw&&(S=F.attachment,(null!=(P=I).deformAttachment?P.deformAttachment:P)==(null!=S.deformAttachment?S.deformAttachment:S))||(T=F.deform).splice(0,T.length),F.attachment=I,F.attachmentTime=F.bone.skeleton.time),++n;if(this.unkeyedState+=2,!(B=this.queue).drainDisabled){B.drainDisabled=!0;for(var T,se=B.AnimationState_this.listeners,n=0;n<B.objects.length;){var E=B.objects[n],F=B.objects[n+1],D=se.array.length,R=se.begin();do{if(0==E){null!=F.listener&&F.listener.start(F);for(A=0;A<D;)R[A].start(F),++A;break}if(1==E){null!=F.listener&&F.listener.interrupt(F);for(b=0;b<D;)R[b].interrupt(F),++b;break}if(2==E){null!=F.listener&&F.listener.end(F);for(var ae=0;ae<D;)R[ae].end(F),++ae;null!=F.listener&&F.listener.dispose(F);for(var le=0;le<D;)R[le].dispose(F),++le;B.AnimationState_this.trackEntryPool.free(F);break}if(3==E){null!=F.listener&&F.listener.dispose(F);for(var re=0;re<D;)R[re].dispose(F),++re;B.AnimationState_this.trackEntryPool.free(F);break}if(4==E){null!=F.listener&&F.listener.complete(F);for(var oe=0;oe<D;)R[oe].complete(F),++oe;break}if(5==E){for(var P=B.objects[2+n++],ue=(null!=F.listener&&F.listener.event(F,P),0);ue<D;)R[ue].event(F,P),++ue;break}}while(0);se.end(),n+=2}(T=B.objects).splice(0,T.length),B.drainDisabled=!1}return G},applyMixingFrom:function(e,t,n){var i,s=e.mixingFrom,a=(null!=s.mixingFrom&&this.applyMixingFrom(s,t,n),0),l=(0==e.mixDuration?(a=1)==n&&(n=0):(1<(a=e.mixTime/e.mixDuration)&&(a=1),1!=n&&(n=s.mixBlend)),a<s.attachmentThreshold),r=a<s.drawOrderThreshold,o=s.animation.timelines.length,u=s.animation.timelines,h=s.alpha*e.interruptAlpha,c=h*(1-a),_=s.animationLast,d=i=s.loop?0==(F=s.animationEnd-s.animationStart)?s.animationStart:s.trackTime%F+s.animationStart:Math.min(s.trackTime+s.animationStart,s.animationEnd),p=null;if(s.reverse?d=s.animation.duration-d:a<s.eventThreshold&&(p=this.events),3==n)for(var m=0;m<o;)u[m].apply(t,_,d,p,c,n,1),++m;else{var g=s.timelineMode,f=s.timelineHoldMix,A=s.timelinesRotation.length!=o<<1;if(A){var x,w=o<<1,y=(x=s.timelinesRotation).length;if(w<y)x.splice(w,w-y);else if(y<w)for(;y<w;)x.push(0),++y}for(var z=s.timelinesRotation,m=s.totalAlpha=0;m<o;){for(var b,v,C=u[m],S=1,k=0,M=0,I=!1;;){var B=g[m];if(0==B){if(!r&&C instanceof xg){I=!0;break}k=n,M=c;break}if(1==B){k=0,M=c;break}if(2==B){k=n,M=h;break}if(3==B){k=0,M=h;break}k=0,B=f[m],M=h*Math.max(0,1-B.mixTime/B.mixDuration);break}I?++m:(s.totalAlpha+=M,C instanceof tg?this.applyRotateTimeline(C,t,d,M,k,z,m<<1,A):C instanceof gg?(v=t.slots[(b=C).slotIndex]).bone.active&&(d<b.frames[0]?0!=k&&1!=k||this.setAttachment(t,v,v.data.attachmentName,l):this.setAttachment(t,v,b.attachmentNames[Xm.search(b.frames,d)],l),v.attachmentState<=this.unkeyedState)&&(v.attachmentState=this.unkeyedState+1):C.apply(t,_,d,p,M,k,S=r&&C instanceof xg&&0==k?0:S),++m)}}if(0<e.mixDuration){for(var T=s.animationStart,E=s.animationEnd,F=E-T,D=s.trackLast%F,p=this.events,m=0,R=this.events.length;m<R;){if((C=p[m]).time<D)break;E<C.time?++m:((P=this.queue).objects.push(5),P.objects.push(s),P.objects.push(C),++m)}var P;for((s.loop?0==F||D>s.trackTime%F:E<=i&&s.animationLast<E)&&((P=this.queue).objects.push(4),P.objects.push(s));m<R;)(C=p[m]).time<T?++m:((P=this.queue).objects.push(5),P.objects.push(s),P.objects.push(C),++m)}return(x=this.events).splice(0,x.length),s.nextAnimationLast=i,s.nextTrackLast=s.trackTime,a},setAttachment:function(e,t,n,i){e=null==n?null:e.getAttachment(t.data.index,n);t.attachment!=e&&(e instanceof Xw&&t.attachment instanceof Xw&&(n=t.attachment,(null!=e.deformAttachment?e.deformAttachment:e)==(null!=n.deformAttachment?n.deformAttachment:n))||(n=t.deform).splice(0,n.length),t.attachment=e,t.attachmentTime=t.bone.skeleton.time),i&&(t.attachmentState=this.unkeyedState+2)},applyRotateTimeline:function(e,t,n,i,s,a,l,r){if(r&&(a[l]=0),1==i)e.apply(t,0,n,null,1,s,0);else{t=t.bones[e.boneIndex];if(t.active){var o=0,u=0;if(n<e.frames[0]){if(0==s)return void(t.rotation=t.data.rotation);if(1!=s)return;o=t.rotation,u=t.data.rotation}else o=(0==s?t.data:t).rotation,u=t.data.rotation+e.getCurveValue(n);var h,s=0,e=u-o;0==(e-=360*(16384-(16384.499999999996-e/360|0)))?s=a[l]:(u=n=0,u=r?(n=0,e):(n=a[l],a[l+1]),r=0<=n,(0<u?1:u<0?-1:0)!=((h=0<e)?1:e<0?-1:0)&&Math.abs(u)<=90&&(180<Math.abs(n)&&(n+=360*(0<n?1:n<0?-1:0)),r=h),s=e+n-n%360,r!=h&&(s+=360*(0<n?1:n<0?-1:0)),a[l]=s),a[l+1]=e,t.rotation=o+s*i}}},__class__:Rw},(i["spine.support.utils.Poolable"]=kg).__name__="spine.support.utils.Poolable",kg.__isInterface__=!0,kg.prototype={__class__:kg},(i["spine.TrackEntry"]=Mg).__name__="spine.TrackEntry",Mg.__interfaces__=[kg],Mg.prototype={reset:function(){this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null;var e=this.timelineMode;e.splice(0,e.length),(e=this.timelineHoldMix).splice(0,e.length),(e=this.timelinesRotation).splice(0,e.length)},getTrackComplete:function(){var e=this.animationEnd-this.animationStart;if(0!=e){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime},__class__:Mg},function(){this.drainDisabled=!1,this.objects=[]}),zw=((i["spine.EventQueue"]=Pw).__name__="spine.EventQueue",Pw.prototype={__class__:Pw},(i["spine.support.utils.Pool"]=Ig).__name__="spine.support.utils.Pool",Ig.prototype={free:function(e){if(null==e)throw tl.thrown(new Dw("object cannot be null."));this.freeObjects.length<this.max&&(this.freeObjects.push(e),this.peak=Math.max(this.peak,this.freeObjects.length)),this.reset(e)},reset:function(e){nl.__implements(e,kg)&&nl.__cast(e,kg).reset()},freeAll:function(e){if(null==e)throw tl.thrown(new Dw("objects cannot be null."));for(var t=this.freeObjects,n=this.max,i=0;i<e.length;){var s=e[i];null==s?++i:(t.length<n&&t.push(s),this.reset(s),++i)}this.peak=Math.max(this.peak,t.length)},newObject:function(){return null},obtain:function(){return 0==this.freeObjects.length?this.newObject():this.freeObjects.pop()},__class__:Ig},function(e,t){Ig.call(this,e,t)}),Qw=((i["spine._AnimationState.TrackEntryPool"]=zw).__name__="spine._AnimationState.TrackEntryPool",zw.__super__=Ig,zw.prototype=e(Ig.prototype,{newObject:function(){return new Mg},__class__:zw}),function(e){if(this.defaultMix=0,this.tempAnimationStateDataKey=new Vw,this.animationToMixTime=new Je,null==e)throw tl.thrown(new Dw("skeletonData cannot be null."));this.skeletonData=e}),Vw=((i["spine.AnimationStateData"]=Qw).__name__="spine.AnimationStateData",Qw.prototype={__class__:Qw},function(){this.a2=null}),Ow=((i["spine.AnimationStateDataKey"]=Vw).__name__="spine.AnimationStateDataKey",Vw.prototype={getHashCode:function(){return 31*(31+this.a1.hashCode)+this.a2.hashCode},equals:function(e){if(this!=e){if(null==e)return!1;if(null==this.a1){if(null!=e.a1)return!1}else if(this.a1!=e.a1)return!1;if(null==this.a2){if(null!=e.a2)return!1}else if(this.a2!=e.a2)return!1}return!0},__class__:Vw},(i["spine.Updatable"]=Bg).__name__="spine.Updatable",Bg.__isInterface__=!0,Bg.prototype={__class__:Bg},(i["spine.Bone"]=Tg).__name__="spine.Bone",Tg.__interfaces__=[Bg],Tg.prototype={update:function(){this.updateWorldTransformWithData(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},updateWorldTransformWithData:function(e,t,n,i,s,a,l){this.ax=e,this.ay=t,this.arotation=n,this.ascaleX=i,this.ascaleY=s,this.ashearX=a,this.ashearY=l;var r,o,u,h=this.parent;if(null==h)m=n+90+l,o=(r=this.skeleton).scaleX,u=r.scaleY,this.a=Math.cos((n+a)*xy.degRad)*i*o,this.b=Math.cos(m*xy.degRad)*s*o,this.c=Math.sin((n+a)*xy.degRad)*i*u,this.d=Math.sin(m*xy.degRad)*s*u,this.worldX=e*o+r.x,this.worldY=t*u+r.y;else{var c=h.a,_=h.b,d=h.c,p=h.d;this.worldX=c*e+_*t+h.worldX,this.worldY=d*e+p*t+h.worldY;do{var m,g=this.data.transformMode;if(0==g)return m=n+90+l,f=Math.cos((n+a)*xy.degRad)*i,x=Math.cos(m*xy.degRad)*s,A=Math.sin((n+a)*xy.degRad)*i,w=Math.sin(m*xy.degRad)*s,this.a=c*f+_*A,this.b=c*x+_*w,this.c=d*f+p*A,void(this.d=d*x+p*w);if(1==g){var f=n+90+l;this.a=Math.cos((n+a)*xy.degRad)*i,this.b=Math.cos(f*xy.degRad)*s,this.c=Math.sin((n+a)*xy.degRad)*i,this.d=Math.sin(f*xy.degRad)*s;break}if(2==g){var A=c*c+d*d,x=0,w=n+a-(x=1e-4<A?(A=Math.abs(c*p-_*d)/A,c/=this.skeleton.scaleX,_=(d/=this.skeleton.scaleY)*A,p=c*A,Math.atan2(d,c)*xy.radDeg):(d=c=0,90-Math.atan2(p,_)*xy.radDeg)),y=n+l-x+90,b=Math.cos(w*xy.degRad)*i,v=Math.cos(y*xy.degRad)*s,C=Math.sin(w*xy.degRad)*i,y=Math.sin(y*xy.degRad)*s;this.a=c*b-_*C,this.b=c*v-_*y,this.c=d*b+p*C,this.d=d*v+p*y;break}if(3==g){var b=Math.cos(n*xy.degRad),C=Math.sin(n*xy.degRad),v=(c*b+_*C)/this.skeleton.scaleX,y=(d*b+p*C)/this.skeleton.scaleY,S=Math.sqrt(v*v+y*y),k=(v*=S=1e-5<S?1/S:S,y*=S,S=Math.sqrt(v*v+y*y),3==this.data.transformMode&&c*p-_*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S),1.57079635+Math.atan2(y,v)),M=Math.cos(k)*S,k=Math.sin(k)*S,S=Math.cos(a*xy.degRad)*i,I=Math.cos((90+l)*xy.degRad)*s,B=Math.sin(a*xy.degRad)*i,T=Math.sin((90+l)*xy.degRad)*s;this.a=v*S+M*B,this.b=v*I+M*T,this.c=y*S+k*B,this.d=y*I+k*T;break}if(4==g){var M=Math.cos(n*xy.degRad),S=Math.sin(n*xy.degRad),B=(c*M+_*S)/this.skeleton.scaleX,I=(d*M+p*S)/this.skeleton.scaleY,k=Math.sqrt(B*B+I*I),T=(B*=k=1e-5<k?1/k:k,I*=k,k=Math.sqrt(B*B+I*I),3==this.data.transformMode&&c*p-_*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(k=-k),1.57079635+Math.atan2(I,B)),g=Math.cos(T)*k,E=Math.sin(T)*k,F=Math.cos(a*xy.degRad)*i,D=Math.cos((90+l)*xy.degRad)*s,R=Math.sin(a*xy.degRad)*i,P=Math.sin((90+l)*xy.degRad)*s;this.a=B*F+g*R,this.b=B*D+g*P,this.c=I*F+E*R,this.d=I*D+E*P;break}}while(0);this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}},__class__:Tg},(i["spine.BoneData"]=Eg).__name__="spine.BoneData",Eg.prototype={__class__:Eg},(i["spine.ConstraintData"]=Fg).__name__="spine.ConstraintData",Fg.prototype={__class__:Fg},(i["spine.Event"]=Dg).__name__="spine.Event",Dg.prototype={__class__:Dg},(i["spine.EventData"]=Rg).__name__="spine.EventData",Rg.prototype={__class__:Rg},(i["spine.IkConstraint"]=Pg).__name__="spine.IkConstraint",Pg.__interfaces__=[Bg],Pg.applyOne=function(e,t,n,i,s,a,l){if(null==e)throw tl.thrown(new Dw("bone cannot be null."));var r=e.parent,o=r.a,u=r.b,h=r.c,c=r.d,_=-e.ashearX-e.arotation,d=0,p=0;do{var m,g,f=e.data.transformMode;if(1==f){d=t-e.worldX,p=n-e.worldY;break}}while(p=2==f?(w=Math.abs(o*c-u*h)/(o*o+h*h),f=o/e.skeleton.scaleX,u=-(m=h/e.skeleton.scaleY)*w*e.skeleton.scaleX,c=f*w*e.skeleton.scaleY,_+=Math.atan2(m,f)*xy.radDeg,d=((m=t-r.worldX)*c-(f=n-r.worldY)*u)/(g=o*c-u*h)-e.ax,(f*o-m*h)/g-e.ay):(d=((f=t-r.worldX)*c-(m=n-r.worldY)*u)/(g=o*c-u*h)-e.ax,(m*o-f*h)/g-e.ay),0);_+=Math.atan2(p,d)*xy.radDeg,e.ascaleX<0&&(_+=180),180<_?_-=360:_<-180&&(_+=360);var A,x,w,y=e.ascaleX,b=e.ascaleY;(i||s)&&(3!=(A=e.data.transformMode)&&4!=A||(d=t-e.worldX,p=n-e.worldY),A=e.data.length*y,x=Math.sqrt(d*d+p*p),i&&x<A||s&&A<x&&1e-4<A)&&(y*=w=(x/A-1)*l+1,a)&&(b*=w),e.updateWorldTransformWithData(e.ax,e.ay,e.arotation+_*l,y,b,e.ashearX,e.ashearY)},Pg.apply=function(e,t,n,i,s,z,Q,a,l){if(null==e)throw tl.thrown(new Dw("parent cannot be null."));if(null==t)throw tl.thrown(new Dw("child cannot be null."));var V=e.ax,O=e.ay,r=e.ascaleX,o=e.ascaleY,W=r,N=o,u=t.ascaleX,G=0,U=0,h=0,h=r<0?(r=-r,G=180,-1):(G=0,1),U=(o<0&&(o=-o,h=-h),u<0?(u=-u,180):0),c=t.ax,_=0,d=0,p=0,m=e.a,g=e.b,f=e.c,A=e.d,L=Math.abs(r-o)<=1e-4,p=!L||z?(_=0,d=m*c+e.worldX,f*c+e.worldY):(d=m*c+g*(_=t.ay)+e.worldX,f*c+A*_+e.worldY),x=e.parent,w=1/((m=x.a)*(A=x.d)-(g=x.b)*(f=x.c)),d=((S=d-x.worldX)*A-(k=p-x.worldY)*g)*w-V,p=(k*m-S*f)*w-O,y=Math.sqrt(d*d+p*p),b=t.data.length*u,v=0,C=0;if(y<1e-4)Pg.applyOne(e,n,i,!1,z,!1,l),t.updateWorldTransformWithData(c,_,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);else{var S,k,M=((S=n-x.worldX)*A-(k=i-x.worldY)*g)*w-V,I=(k*m-S*f)*w-O,B=M*M+I*I;0!=a&&(a*=r*(u+1)*.5,0<(p=(d=Math.sqrt(B))-y-b*r+a))&&(B=(M-=(n=(p-a*(1-(n=Math.min(1,p/(2*a))-1)*n))/d)*M)*M+(I-=n*I)*I);do{if(L){var T=(B-y*y-(b*=r)*b)/(2*y*b);T<-1?(T=-1,C=3.1415927*s):1<T?(T=1,C=0,z&&(W*=m=(Math.sqrt(B)/(y+b)-1)*l+1,Q)&&(N*=m)):C=Math.acos(T)*s,m=y+b*T,g=b*Math.sin(C),v=Math.atan2(I*m-M*g,M*m+I*g)}else{var T=(m=r*b)*m,E=(g=o*b)*g,j=Math.atan2(I,M),F=-2*E*y,D=E-T;if(0<=(A=F*F-4*D*(f=E*y*y+T*B-T*E))){var R=Math.sqrt(A),F=(R=.5*-(F+(R=F<0?-R:R)))/D,D=f/R,R=Math.abs(F)<Math.abs(D)?F:D;if(R*R<=B){k=Math.sqrt(B-R*R)*s,v=j-Math.atan2(k,R),C=Math.atan2(k/o,(R-y)/r);break}}var F=3.1415927,D=y-m,R=D*D,H=0,Y=0,P=y+m,Z=P*P,X=0;-1<=(f=-m*y/(T-E))&&f<=1&&(f=Math.acos(f),(A=(S=m*Math.cos(f)+y)*S+(k=g*Math.sin(f))*k)<R&&(F=f,R=A,D=S,H=k),Z<A)&&(Y=f,Z=A,P=S,X=k),C=B<=.5*(R+Z)?(v=j-Math.atan2(H*s,D),F*s):(v=j-Math.atan2(X*s,P),Y*s)}}while(0);i=Math.atan2(_,c)*h,x=e.arotation;180<(v=(v-i)*xy.radDeg+G-x)?v-=360:v<-180&&(v+=360),e.updateWorldTransformWithData(V,O,x+v*l,W,N,0,0),x=t.arotation,180<(C=((C+i)*xy.radDeg-t.ashearX)*h+U-x)?C-=360:C<-180&&(C+=360),t.updateWorldTransformWithData(c,_,x+C*l,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}},Pg.prototype={update:function(){if(0!=this.mix){var e=this.target,t=this.bones;do{var n=this.bones.length;if(1==n){Pg.applyOne(t[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break}if(2==n){Pg.apply(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}while(0)}},__class__:Pg},(i["spine.IkConstraintData"]=zg).__name__="spine.IkConstraintData",zg.__super__=Fg,zg.prototype=e(Fg.prototype,{__class__:zg}),(i["spine.PathConstraint"]=Qg).__name__="spine.PathConstraint",Qg.__interfaces__=[Bg],Qg.prototype={update:function(){var z=this.target.attachment;if(z instanceof $w){var Q=this.mixRotate,V=this.mixX,O=this.mixY;if(0!=Q||0!=V||0!=O){var W=this.data,N=0==W.rotateMode,G=2==W.rotateMode,U=this.bones.length,e=N?U:U+1,L=this.bones;if(e<(b=(y=this.spaces).length))y.splice(e,e-b);else if(b<e)for(;b<e;)y.push(0),++b;var j,H=y;if(G){if(U<(b=(y=this.lengths).length))y.splice(U,U-b);else if(b<U)for(;b<U;)y.push(0),++b;j=y}else j=null;var Y=this.spacing;do{var Z=W.spacingMode;if(2==Z){if(G)for(var t=0,n=e-1;t<n;){var X=(i=L[t]).data.length;X<Qg.epsilon?j[t]=0:(S=X*i.a,ze=X*i.c,j[t]=Math.sqrt(S*S+ze*ze)),++t}py.fill(H,1,e,Y);break}if(3==Z){for(var q=0,K=0,J=e-1;K<J;){var $=(F=L[K]).data.length;$<Qg.epsilon?(G&&(j[K]=0),H[++K]=Y):(c=$*F.a,_=$*F.c,us=Math.sqrt(c*c+_*_),G&&(j[K]=us),q+=H[++K]=us)}if(0<q)for(var q=e/q*Y,ee=1;ee<e;)H[ee]*=q,++ee;break}for(var te=0==W.spacingMode,ne=0,ie=e-1;ne<ie;){var se=(Je=L[ne]).data.length;se<Qg.epsilon?(G&&(j[ne]=0),H[++ne]=Y):(me=se*Je.a,ge=se*Je.c,cs=Math.sqrt(me*me+ge*ge),G&&(j[ne]=cs),H[++ne]=(te?se+Y:Y)*cs/se)}}while(0);var i=z,s=this.target,ae=this.position,le=this.spaces,re=3*e+2;if(re<(b=(y=this.positions).length))y.splice(re,re-b);else if(b<re)for(;b<re;)y.push(0),++b;var a=y,l=null,oe=i.closed,r=i.worldVerticesLength,ue=r/6|0,he=-1;if(i.constantSpeed){if(oe){if((r+=2)<(b=(y=this.world).length))y.splice(r,r-b);else if(b<r)for(;b<r;)y.push(0),++b;l=y;o=(ce=2*((ce=r-4)>>1),s.deform),u=i.vertices;if(null==(v=i.bones)){0<o.length&&(u=o);for(S=(C=s.bone).worldX,ze=C.worldY,Qe=C.a,k=C.b,Ve=C.c,Oe=C.d,M=2,f=0;f<ce;){I=u[M],B=u[M+1];l[f]=I*Qe+B*k+S,l[f+1]=I*Ve+B*Oe+ze,M+=2,f+=2}}else{for(M=0,Ne=0,t=0;t<2;)M+=(n=v[M])+1,Ne+=n,t+=2;Ge=s.bone.skeleton.getBones();if(0==o.length)for(f=0,k=3*Ne;f<ce;){T=0,E=0,n=v[M++];for(n+=M;M<n;){F=Ge[v[M]],I=u[k],B=u[k+1],D=u[k+2];T+=(I*F.a+B*F.b+F.worldX)*D,E+=(I*F.c+B*F.d+F.worldY)*D,++M,k+=3}l[f]=T,l[f+1]=E,f+=2}else for(f=0,k=3*Ne,Xe=Ne<<1;f<ce;){T=0,E=0,n=v[M++];for(n+=M;M<n;){F=Ge[v[M]],I=u[k]+o[Xe],B=u[k+1]+o[Xe+1],D=u[k+2];T+=(I*F.a+B*F.b+F.worldX)*D,E+=(I*F.c+B*F.d+F.worldY)*D,++M,k+=3,Xe+=2}l[f]=T,l[f+1]=E,f+=2}}var ce=2,z=r-4,o=(ce=2+z,s.deform),u=i.vertices;if(null==(v=i.bones)){0<o.length&&(u=o);for(S=(C=s.bone).worldX,ze=C.worldY,Qe=C.a,k=C.b,Ve=C.c,Oe=C.d,M=0,f=z;f<ce;){I=u[M],B=u[M+1];l[f]=I*Qe+B*k+S,l[f+1]=I*Ve+B*Oe+ze,M+=2,f+=2}}else{M=0,Ge=(0,s.bone.skeleton.getBones());if(0==o.length)for(f=z,k=0;f<ce;){T=0,E=0,n=v[M++];for(n+=M;M<n;){F=Ge[v[M]],I=u[k],B=u[k+1],D=u[k+2];T+=(I*F.a+B*F.b+F.worldX)*D,E+=(I*F.c+B*F.d+F.worldY)*D,++M,k+=3}l[f]=T,l[f+1]=E,f+=2}else for(f=z,k=0,Xe=0;f<ce;){T=0,E=0,n=v[M++];for(n+=M;M<n;){F=Ge[v[M]],I=u[k]+o[Xe],B=u[k+1]+o[Xe+1],D=u[k+2];T+=(I*F.a+B*F.b+F.worldX)*D,E+=(I*F.c+B*F.d+F.worldY)*D,++M,k+=3,Xe+=2}l[f]=T,l[f+1]=E,f+=2}}l[r-2]=l[0],l[r-1]=l[1]}else{if(--ue,(r-=4)<(b=(y=this.world).length))y.splice(r,r-b);else if(b<r)for(;b<r;)y.push(0),++b;l=y;o=(ce=2*((ce=r)>>1),s.deform),u=i.vertices;if(null==(v=i.bones)){0<o.length&&(u=o);for(S=(C=s.bone).worldX,ze=C.worldY,Qe=C.a,k=C.b,Ve=C.c,Oe=C.d,M=2,f=0;f<ce;){I=u[M],B=u[M+1];l[f]=I*Qe+B*k+S,l[f+1]=I*Ve+B*Oe+ze,M+=2,f+=2}}else{for(M=0,Ne=0,t=0;t<2;)M+=(n=v[M])+1,Ne+=n,t+=2;Ge=s.bone.skeleton.getBones();if(0==o.length)for(f=0,k=3*Ne;f<ce;){T=0,E=0,n=v[M++];for(n+=M;M<n;){i=Ge[v[M]],I=u[k],B=u[k+1],D=u[k+2];T+=(I*i.a+B*i.b+i.worldX)*D,E+=(I*i.c+B*i.d+i.worldY)*D,++M,k+=3}l[f]=T,l[f+1]=E,f+=2}else for(f=0,k=3*Ne,Xe=Ne<<1;f<ce;){T=0,E=0,n=v[M++];for(n+=M;M<n;){i=Ge[v[M]],I=u[k]+o[Xe],B=u[k+1]+o[Xe+1],D=u[k+2];T+=(I*i.a+B*i.b+i.worldX)*D,E+=(I*i.c+B*i.d+i.worldY)*D,++M,k+=3,Xe+=2}l[f]=T,l[f+1]=E,f+=2}}}if(ue<(b=(y=this.curves).length))y.splice(ue,ue-b);else if(b<ue)for(;b<ue;)y.push(0),++b;for(var _e=y,h=0,c=l[0],_=l[1],d=0,p=0,de=0,pe=0,me=0,ge=0,fe=0,Ae=0,xe=0,we=0,ye=0,be=0,m=0,g=0,t=0,f=2;t<ue;)d=l[f],p=l[f+1],de=l[f+2],pe=l[f+3],ye=2*(fe=.1875*(c-2*d+de))+(xe=.09375*(3*(d-de)-c+(me=l[f+4]))),be=2*(Ae=.1875*(_-2*p+pe))+(we=.09375*(3*(p-pe)-_+(ge=l[f+5]))),m=.75*(d-c)+fe+.16666667*xe,g=.75*(p-_)+Ae+.16666667*we,h+=Math.sqrt(m*m+g*g),m+=ye,g+=be,ye+=xe,be+=we,h+=Math.sqrt(m*m+g*g),m+=ye,g+=be,h+=Math.sqrt(m*m+g*g),m+=ye+xe,g+=be+we,h+=Math.sqrt(m*m+g*g),_e[t]=h,c=me,_=ge,++t,f+=6;1==this.data.positionMode&&(ae*=h);Fe=0;do{var ve=this.data.spacingMode;if(2==ve){Fe=h;break}if(3==ve){Fe=h/e;break}}while(Fe=1,0);for(var Ce=this.segments,Se=0,t=0,A=0,x=0,ke=0;t<e;){var Me,w=ae+=Re=le[t]*Fe;if(oe)(w%=h)<0&&(w+=h),x=0;else{if(w<0){Ot=l[0],Wt=l[1],R=Math.atan2(l[3]-Wt,l[2]-Ot);a[A]=Ot+w*Math.cos(R),a[A+1]=Wt+w*Math.sin(R),a[A+2]=R,++t,A+=3;continue}if(h<w){Vt=w-h,ns=l[(K=r-4)+2],is=l[K+3],Nt=Math.atan2(is-l[K+1],ns-l[K]);a[A]=ns+Vt*Math.cos(Nt),a[A+1]=is+Vt*Math.sin(Nt),a[A+2]=Nt,++t,A+=3;continue}}for(;;){if(!((us=_e[x])<w)){0==x?w/=us:w=(w-(Pe=_e[x-1]))/(us-Pe);break}++x}if(x!=he){var Ie=6*(he=x);for(c=l[Ie],_=l[Ie+1],d=l[Ie+2],p=l[Ie+3],de=l[Ie+4],pe=l[Ie+5],ye=2*(fe=.03*(c-2*d+de))+(xe=.006*(3*(d-de)-c+(me=l[Ie+6]))),be=2*(Ae=.03*(_-2*p+pe))+(we=.006*(3*(p-pe)-_+(ge=l[Ie+7]))),m=.3*(d-c)+fe+.16666667*xe,g=.3*(p-_)+Ae+.16666667*we,Se=Math.sqrt(m*m+g*g),Ce[0]=Se,Ie=1;Ie<8;)m+=ye,g+=be,ye+=xe,be+=we,Se+=Math.sqrt(m*m+g*g),Ce[Ie]=Se,++Ie;m+=ye,g+=be,Se+=Math.sqrt(m*m+g*g),Ce[8]=Se,m+=ye+xe,g+=be+we,Se+=Math.sqrt(m*m+g*g),Ce[9]=Se,ke=0}for(w*=Se;;){if(!((cs=Ce[ke])<w)){0==ke?w/=cs:w=ke+(w-(Me=Ce[ke-1]))/(cs-Me);break}++ke}var Be=.1*w,Te=N||0<t&&Re<Qg.epsilon;Be<Qg.epsilon||isNaN(Be)?(a[A]=c,a[A+1]=_,a[A+2]=Math.atan2(p-_,d-c)):(S=c*(Xi=(Zi=(Yi=1-Be)*Yi)*Yi)+d*(Ji=Yi*(Ki=3*(qi=Yi*Be)))+de*($i=Ki*Be)+me*(Hi=(ji=Be*Be)*Be),ze=_*Xi+p*Ji+pe*$i+ge*Hi,a[A]=S,a[A+1]=ze,Te&&(a[A+2]=Be<.001?Math.atan2(p-_,d-c):Math.atan2(ze-(_*Zi+p*qi*2+pe*ji),S-(c*Zi+d*qi*2+de*ji)))),++t,A+=3}}else{var y,b,Ee=i.lengths,h=Ee[ue-=oe?1:2],Fe=(1==this.data.positionMode&&(ae*=h),0);do{var De=this.data.spacingMode;if(2==De){Fe=h;break}if(3==De){Fe=h/e;break}}while(Fe=1,0);if(8<(b=(y=this.world).length))y.splice(8,8-b);else if(b<8)for(;b<8;)y.push(0),++b;for(var l=y,t=0,A=0,x=0;t<e;){var Re,Pe,w=ae+=Re=le[t]*Fe;if(oe)(w%=h)<0&&(w+=h),x=0;else{if(w<0){if(-2!=he){var v,he=-2,o=s.deform,u=i.vertices;if(null==(v=i.bones)){0<o.length&&(u=o);for(var C,S=(C=s.bone).worldX,ze=C.worldY,Qe=C.a,k=C.b,Ve=C.c,Oe=C.d,M=2,f=0;f<4;){var I=u[M],B=u[M+1];l[f]=I*Qe+B*k+S,l[f+1]=I*Ve+B*Oe+ze,M+=2,f+=2}}else{for(var We=0,Ne=0,K=0;K<2;)We+=(n=v[We])+1,Ne+=n,K+=2;var Ge=s.bone.skeleton.getBones();if(0==o.length)for(var Ue=0,Le=3*Ne;Ue<4;){var T=0,E=0,J=v[We++];for(J+=We;We<J;){var F=Ge[v[We]],je=u[Le],He=u[Le+1],D=u[Le+2];T+=(je*F.a+He*F.b+F.worldX)*D,E+=(je*F.c+He*F.d+F.worldY)*D,++We,Le+=3}l[Ue]=T,l[Ue+1]=E,Ue+=2}else for(var Ye=0,Ze=3*Ne,Xe=Ne<<1;Ye<4;){var qe=0,Ke=0,ie=v[We++];for(ie+=We;We<ie;){var Je=Ge[v[We]],$e=u[Ze]+o[Xe],et=u[Ze+1]+o[Xe+1],tt=u[Ze+2];qe+=($e*Je.a+et*Je.b+Je.worldX)*tt,Ke+=($e*Je.c+et*Je.d+Je.worldY)*tt,++We,Ze+=3,Xe+=2}l[Ye]=qe,l[Ye+1]=Ke,Ye+=2}}}var c=l[0],_=l[1],R=Math.atan2(l[3]-_,l[2]-c);a[A]=c+w*Math.cos(R),a[A+1]=_+w*Math.sin(R),a[A+2]=R,++t,A+=3;continue}if(h<w){if(-3!=he){he=-3;var nt=r-6,it=s.deform,st=i.vertices,at=i.bones;if(null==at){0<it.length&&(st=it);for(var lt=s.bone,me=lt.worldX,ge=lt.worldY,rt=lt.a,ot=lt.b,ut=lt.c,ht=lt.d,ct=nt,_t=0;_t<4;){var dt=st[ct],pt=st[ct+1];l[_t]=dt*rt+pt*ot+me,l[_t+1]=dt*ut+pt*ht+ge,ct+=2,_t+=2}}else{for(var mt=0,gt=0,ee=0;ee<nt;){var ft=at[mt];mt+=ft+1,gt+=ft,ee+=2}var At=s.bone.skeleton.getBones();if(0==it.length)for(var xt=0,wt=3*gt;xt<4;){var yt=0,bt=0,vt=at[mt++];for(vt+=mt;mt<vt;){var Ct=At[at[mt]],St=st[wt],kt=st[wt+1],Mt=st[wt+2];yt+=(St*Ct.a+kt*Ct.b+Ct.worldX)*Mt,bt+=(St*Ct.c+kt*Ct.d+Ct.worldY)*Mt,++mt,wt+=3}l[xt]=yt,l[xt+1]=bt,xt+=2}else for(var It=0,Bt=3*gt,Tt=gt<<1;It<4;){var Et=0,Ft=0,Dt=at[mt++];for(Dt+=mt;mt<Dt;){var Rt=At[at[mt]],Pt=st[Bt]+it[Tt],zt=st[Bt+1]+it[Tt+1],Qt=st[Bt+2];Et+=(Pt*Rt.a+zt*Rt.b+Rt.worldX)*Qt,Ft+=(Pt*Rt.c+zt*Rt.d+Rt.worldY)*Qt,++mt,Bt+=3,Tt+=2}l[It]=Et,l[It+1]=Ft,It+=2}}}var Vt=w-h,Ot=l[2],Wt=l[3],Nt=Math.atan2(Wt-l[1],Ot-l[0]);a[A]=Ot+Vt*Math.cos(Nt),a[A+1]=Wt+Vt*Math.sin(Nt),a[A+2]=Nt,++t,A+=3;continue}}for(;;){if(!((us=Ee[x])<w)){0==x?w/=us:w=(w-(Pe=Ee[x-1]))/(us-Pe);break}++x}if(x!=he)if(he=x,oe&&x==ue){var Gt=r-4,Ut=s.deform,Lt=i.vertices,jt=i.bones;if(null==jt){0<Ut.length&&(Lt=Ut);for(var lt=s.bone,Ht=lt.worldX,Yt=lt.worldY,Zt=lt.a,Xt=lt.b,qt=lt.c,Kt=lt.d,Jt=Gt,$t=0;$t<4;){var en=Lt[Jt],tn=Lt[Jt+1];l[$t]=en*Zt+tn*Xt+Ht,l[$t+1]=en*qt+tn*Kt+Yt,Jt+=2,$t+=2}}else{for(var nn=0,sn=0,ne=0;ne<Gt;){var an=jt[nn];nn+=an+1,sn+=an,ne+=2}var ln=s.bone.skeleton.getBones();if(0==Ut.length)for(var rn=0,on=3*sn;rn<4;){var un=0,hn=0,cn=jt[nn++];for(cn+=nn;nn<cn;){var _n=ln[jt[nn]],dn=Lt[on],pn=Lt[on+1],mn=Lt[on+2];un+=(dn*_n.a+pn*_n.b+_n.worldX)*mn,hn+=(dn*_n.c+pn*_n.d+_n.worldY)*mn,++nn,on+=3}l[rn]=un,l[rn+1]=hn,rn+=2}else for(var gn=0,fn=3*sn,An=sn<<1;gn<4;){var xn=0,wn=0,yn=jt[nn++];for(yn+=nn;nn<yn;){var bn=ln[jt[nn]],vn=Lt[fn]+Ut[An],Cn=Lt[fn+1]+Ut[An+1],Sn=Lt[fn+2];xn+=(vn*bn.a+Cn*bn.b+bn.worldX)*Sn,wn+=(vn*bn.c+Cn*bn.d+bn.worldY)*Sn,++nn,fn+=3,An+=2}l[gn]=xn,l[gn+1]=wn,gn+=2}}var kn=s.deform,Mn=i.vertices,In=i.bones;if(null==In){0<kn.length&&(Mn=kn);for(var Bn=s.bone,Tn=Bn.worldX,En=Bn.worldY,Fn=Bn.a,Dn=Bn.b,Rn=Bn.c,Pn=Bn.d,zn=0,Qn=4;Qn<8;){var Vn=Mn[zn],On=Mn[zn+1];l[Qn]=Vn*Fn+On*Dn+Tn,l[Qn+1]=Vn*Rn+On*Pn+En,zn+=2,Qn+=2}}else{var Wn=0,Nn=(0,s.bone.skeleton.getBones());if(0==kn.length)for(var Gn=4,Un=0;Gn<8;){var Ln=0,jn=0,Hn=In[Wn++];for(Hn+=Wn;Wn<Hn;){var Yn=Nn[In[Wn]],Zn=Mn[Un],Xn=Mn[Un+1],qn=Mn[Un+2];Ln+=(Zn*Yn.a+Xn*Yn.b+Yn.worldX)*qn,jn+=(Zn*Yn.c+Xn*Yn.d+Yn.worldY)*qn,++Wn,Un+=3}l[Gn]=Ln,l[Gn+1]=jn,Gn+=2}else for(var Kn=4,Jn=0,$n=0;Kn<8;){var ei=0,ti=0,ni=In[Wn++];for(ni+=Wn;Wn<ni;){var ii=Nn[In[Wn]],si=Mn[Jn]+kn[$n],ai=Mn[Jn+1]+kn[$n+1],li=Mn[Jn+2];ei+=(si*ii.a+ai*ii.b+ii.worldX)*li,ti+=(si*ii.c+ai*ii.d+ii.worldY)*li,++Wn,Jn+=3,$n+=2}l[Kn]=ei,l[Kn+1]=ti,Kn+=2}}}else{var ri=6*x+2,oi=s.deform,ui=i.vertices,hi=i.bones;if(null==hi){0<oi.length&&(ui=oi);for(var Bn=s.bone,ci=Bn.worldX,_i=Bn.worldY,di=Bn.a,pi=Bn.b,mi=Bn.c,gi=Bn.d,fi=ri,Ai=0;Ai<8;){var xi=ui[fi],wi=ui[fi+1];l[Ai]=xi*di+wi*pi+ci,l[Ai+1]=xi*mi+wi*gi+_i,fi+=2,Ai+=2}}else{for(var yi=0,bi=0,vi=0;vi<ri;){var Ci=hi[yi];yi+=Ci+1,bi+=Ci,vi+=2}var Si=s.bone.skeleton.getBones();if(0==oi.length)for(var ki=0,Mi=3*bi;ki<8;){var Ii=0,Bi=0,Ti=hi[yi++];for(Ti+=yi;yi<Ti;){var Ei=Si[hi[yi]],Fi=ui[Mi],Di=ui[Mi+1],Ri=ui[Mi+2];Ii+=(Fi*Ei.a+Di*Ei.b+Ei.worldX)*Ri,Bi+=(Fi*Ei.c+Di*Ei.d+Ei.worldY)*Ri,++yi,Mi+=3}l[ki]=Ii,l[ki+1]=Bi,ki+=2}else for(var Pi=0,zi=3*bi,Qi=bi<<1;Pi<8;){var Vi=0,Oi=0,Wi=hi[yi++];for(Wi+=yi;yi<Wi;){var Ni=Si[hi[yi]],Gi=ui[zi]+oi[Qi],Ui=ui[zi+1]+oi[Qi+1],Li=ui[zi+2];Vi+=(Gi*Ni.a+Ui*Ni.b+Ni.worldX)*Li,Oi+=(Gi*Ni.c+Ui*Ni.d+Ni.worldY)*Li,++yi,zi+=3,Qi+=2}l[Pi]=Vi,l[Pi+1]=Oi,Pi+=2}}}var ji,Hi,Yi,Zi,Xi,qi,Ki,Ji,$i,es,ts,ns=l[0],is=l[1],d=l[2],p=l[3],de=l[4],pe=l[5],Te=N||0<t&&Re<Qg.epsilon;w<Qg.epsilon||isNaN(w)?(a[A]=ns,a[A+1]=is,a[A+2]=Math.atan2(p-is,d-ns)):(Hi=(ji=w*w)*w,es=ns*(Xi=(Zi=(Yi=1-w)*Yi)*Yi)+d*(Ji=Yi*(Ki=3*(qi=Yi*w)))+de*($i=Ki*w)+l[6]*Hi,ts=is*Xi+p*Ji+pe*$i+l[7]*Hi,a[A]=es,a[A+1]=ts,Te&&(a[A+2]=w<.001?Math.atan2(p-is,d-ns):Math.atan2(ts-(is*Zi+p*qi*2+pe*ji),es-(ns*Zi+d*qi*2+de*ji)))),++t,A+=3}}for(var ss,as=(ss=a)[0],ls=ss[1],rs=W.offsetRotation,os=!1,t=(0==rs?os=1==W.rotateMode:(os=!1,rs*=0<(w=this.target.bone).a*w.d-w.b*w.c?xy.degRad:-xy.degRad),0),w=3;t<U;){(i=L[t]).worldX+=(as-i.worldX)*V,i.worldY+=(ls-i.worldY)*O;var us,hs,cs,_s,ds,ps,ms,gs,P=(S=ss[w])-as,fs=(ze=ss[w+1])-ls,P=(G&&(us=j[t],Qg.epsilon<=us)&&(hs=(Math.sqrt(P*P+fs*fs)/us-1)*Q+1,i.a*=hs,i.c*=hs),as=S,ls=ze,0<Q&&(Qe=i.a,k=i.b,Ve=i.c,Oe=i.d,_s=hs=R=0,R=N?ss[w-1]:H[t+1]<Qg.epsilon?ss[w+2]:Math.atan2(fs,P),R-=Math.atan2(Ve,Qe),os?(hs=Math.cos(R),_s=Math.sin(R),as=S+((cs=i.data.length)*(hs*Qe-_s*Ve)-P)*Q,ls=ze+(cs*(_s*Qe+hs*Ve)-fs)*Q):R+=rs,3.1415927<R?R-=6.2831854:R<-3.1415927&&(R+=6.2831854),R*=Q,hs=Math.cos(R),_s=Math.sin(R),i.a=hs*Qe-_s*Ve,i.b=hs*k-_s*Oe,i.c=_s*Qe+hs*Ve,i.d=_s*k+hs*Oe),i.parent);null==P?(i.ax=i.worldX-i.skeleton.x,i.ay=i.worldY-i.skeleton.y,rt=i.a,Le=i.b,ut=i.c,ht=i.d,i.arotation=Math.atan2(ut,rt)*xy.radDeg,i.ascaleX=Math.sqrt(rt*rt+ut*ut),i.ascaleY=Math.sqrt(Le*Le+ht*ht),i.ashearX=0,i.ashearY=Math.atan2(rt*Le+ut*ht,rt*ht-Le*ut)*xy.radDeg):(fs=P.a,_s=P.b,ms=P.c,ds=P.d,gs=i.worldX-P.worldX,P=i.worldY-P.worldY,i.ax=gs*ds*(ps=1/(fs*ds-_s*ms))-P*_s*ps,i.ay=P*fs*ps-gs*ms*ps,ds=(P=ps*ds)*i.a-(gs=ps*_s)*i.c,P=P*i.b-gs*i.d,ps=(gs=ps*fs)*i.c-(fs=ps*ms)*i.a,ms=gs*i.d-fs*i.b,i.ashearX=0,i.ascaleX=Math.sqrt(ds*ds+ps*ps),1e-4<i.ascaleX?(i.ascaleY=(gs=ds*ms-P*ps)/i.ascaleX,i.ashearY=Math.atan2(ds*P+ps*ms,gs)*xy.radDeg,i.arotation=Math.atan2(ps,ds)*xy.radDeg):(i.ascaleX=0,i.ascaleY=Math.sqrt(P*P+ms*ms),i.ashearY=0,i.arotation=90-Math.atan2(ms,P)*xy.radDeg)),++t,w+=3}}}},__class__:Qg},(i["spine.PathConstraintData"]=Vg).__name__="spine.PathConstraintData",Vg.__super__=Fg,Vg.prototype=e(Fg.prototype,{__class__:Vg}),function(e){if(this.y=0,this.x=0,this.scaleY=1,this.scaleX=1,this.time=0,this.cache=[],null==e)throw tl.thrown(new Dw("data cannot be null."));this.data=e,this.bones=[];for(var t=this.bones,n=0,i=e.bones;n<i.length;){var s=i[n],a=(++n,null);null==s.parent?a=new Tg(s,this,null):(R=t[s.parent.index],a=new Tg(s,this,R),R.children.push(a)),this.bones.push(a)}this.slots=[],this.drawOrder=[];for(n=0,i=e.slots;n<i.length;){var z=i[n],l=(++n,new Lw(z,t[z.boneData.index]));this.slots.push(l),this.drawOrder.push(l)}this.ikConstraints=[];for(n=0,i=e.ikConstraints;n<i.length;)this.ikConstraints.push(new Pg(i[n++],this));this.transformConstraints=[];for(n=0,i=e.transformConstraints;n<i.length;)this.transformConstraints.push(new Hw(i[n++],this));this.pathConstraints=[];for(n=0,i=e.pathConstraints;n<i.length;)this.pathConstraints.push(new Qg(i[n++],this));this.color=new sy(1,1,1,1);for(var e=this.cache,Q=(e.splice(0,e.length),this.bones.length),t=this.bones,r=0;r<Q;)(R=t[r]).sorted=R.data.skinRequired,R.active=!R.sorted,++r;if(null!=this.skin)for(var V=this.skin.bones,r=0,O=this.skin.bones.length;r<O;){for(a=t[V[r].index];a.sorted=!1,a.active=!0,null!=(a=a.parent););++r}for(var W=this.ikConstraints.length,N=this.transformConstraints.length,G=this.pathConstraints.length,U=this.ikConstraints,L=this.transformConstraints,j=this.pathConstraints,H=W+N+G;;){for(var o=0,r=0;r<H;){for(var Y=0;Y<W;){if((R=U[Y]).data.order==r){if(R.active=R.target.active&&(!R.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(R.data)),R.active){var u=R.target,u=(u.sorted||(null==(P=u.parent)||P.sorted||(null!=(gt=P.parent)&&this.sortBone(gt),P.sorted=!0,this.cache.push(P)),u.sorted=!0,this.cache.push(u)),R.bones),h=0<u.length?u[0]:null;if(h.sorted||(null==(p=h.parent)||p.sorted||(null!=(m=p.parent)&&this.sortBone(m),p.sorted=!0,this.cache.push(p)),h.sorted=!0,this.cache.push(h)),1==u.length){this.cache.push(R);for(var Z=h.children,X=0,O=Z.length;X<O;){var c=Z[X];if(c.active){if(c.sorted)for(var q=c.children,_=0,K=q.length;_<K;){var d=q[_];d.active?(d.sorted&&this.sortReset(d.children),d.sorted=!1,++_):++_}c.sorted=!1}++X}}else{for(var p,m=0==u.length?null:u[u.length-1],J=(m.sorted||(null==(p=m.parent)||p.sorted||(null!=(u=p.parent)&&this.sortBone(u),p.sorted=!0,this.cache.push(p)),m.sorted=!0,this.cache.push(m)),this.cache.push(R),h.children),$=0,ee=J.length;$<ee;){var te=J[$];if(te.active){if(te.sorted)for(var ne=te.children,ie=0,se=ne.length;ie<se;){var ae=ne[ie];ae.active?(ae.sorted&&this.sortReset(ae.children),ae.sorted=!1,++ie):++ie}te.sorted=!1}++$}m.sorted=!0}}o=2;break}++Y}if(2==o)o=0;else{if(1<=o)break;for(var le=0;le<N;){var g=L[le];if(g.data.order==r){if(g.active=g.target.active&&(!g.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(g.data)),g.active){(a=g.target).sorted||(null==(f=a.parent)||f.sorted||(null!=(re=f.parent)&&this.sortBone(re),f.sorted=!0,this.cache.push(f)),a.sorted=!0,this.cache.push(a));var f,re,oe=g.bones,ue=g.bones.length;if(g.data.local)for(var he=0;he<ue;){var A,x,w=oe[he],ce=w.parent;ce.sorted||(null==(x=ce.parent)||x.sorted||(null!=(A=x.parent)&&this.sortBone(A),x.sorted=!0,this.cache.push(x)),ce.sorted=!0,this.cache.push(ce)),w.sorted||(null==(A=w.parent)||A.sorted||(null!=(x=A.parent)&&this.sortBone(x),A.sorted=!0,this.cache.push(A)),w.sorted=!0,this.cache.push(w)),++he}else for(var _e=0;_e<ue;){var y,de,pe=oe[_e];pe.sorted||(null==(y=pe.parent)||y.sorted||(null!=(de=y.parent)&&this.sortBone(de),y.sorted=!0,this.cache.push(y)),pe.sorted=!0,this.cache.push(pe)),++_e}this.cache.push(g);for(var me=0;me<ue;){for(var ge=oe[me].children,fe=0,Ae=ge.length;fe<Ae;){var xe=ge[fe];if(xe.active){if(xe.sorted)for(var we=xe.children,ye=0,be=we.length;ye<be;){var ve=we[ye];ve.active?(ve.sorted&&this.sortReset(ve.children),ve.sorted=!1,++ye):++ye}xe.sorted=!1}++fe}++me}for(var Ce=0;Ce<ue;)oe[Ce].sorted=!0,++Ce}o=2;break}++le}if(2==o)o=0;else{if(1<=o)break;for(var Se=0;Se<G;){var b=j[Se];if(b.data.order==r){if(b.active=b.target.bone.active&&(!b.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(b.data)),b.active){var ke=(l=b.target).data.index,v=l.bone;if(null!=this.skin)for(var Me=this.skin,Ie=dy.orderedItems(Me.attachments),Be=0,Te=dy.get_size(Me.attachments);Be<Te;){var C=Ie[Be];if(C.slotIndex==ke){C=C.attachment;if(C instanceof $w){var Ee,Fe=C.bones;if(null==Fe)v.sorted||(null==(C=v.parent)||C.sorted||(null!=(Ee=C.parent)&&this.sortBone(Ee),C.sorted=!0,this.cache.push(C)),v.sorted=!0,this.cache.push(v));else for(var De=this.bones,S=0,Re=Fe.length;S<Re;){var Pe=Fe[S++];for(Pe+=S;S<Pe;){var k,ze,Qe=De[Fe[S++]];Qe.sorted||(null==(k=Qe.parent)||k.sorted||(null!=(ze=k.parent)&&this.sortBone(ze),k.sorted=!0,this.cache.push(k)),Qe.sorted=!0,this.cache.push(Qe))}}}}++Be}if(null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin)for(var Me=this.data.defaultSkin,Ve=dy.orderedItems(Me.attachments),Oe=0,We=dy.get_size(Me.attachments);Oe<We;){var M=Ve[Oe];if(M.slotIndex==ke){M=M.attachment;if(M instanceof $w){var Ne,Ge=M.bones;if(null==Ge)v.sorted||(null==(M=v.parent)||M.sorted||(null!=(Ne=M.parent)&&this.sortBone(Ne),M.sorted=!0,this.cache.push(M)),v.sorted=!0,this.cache.push(v));else for(var Ue=this.bones,I=0,Le=Ge.length;I<Le;){var je=Ge[I++];for(je+=I;I<je;){var B,He,Ye=Ue[Ge[I++]];Ye.sorted||(null==(B=Ye.parent)||B.sorted||(null!=(He=B.parent)&&this.sortBone(He),B.sorted=!0,this.cache.push(B)),Ye.sorted=!0,this.cache.push(Ye))}}}}++Oe}var T=l.attachment;if(T instanceof $w&&T instanceof $w){var Ze,Xe=T.bones;if(null==Xe)v.sorted||(null==(T=v.parent)||T.sorted||(null!=(Ze=T.parent)&&this.sortBone(Ze),T.sorted=!0,this.cache.push(T)),v.sorted=!0,this.cache.push(v));else for(var qe=this.bones,E=0,Ke=Xe.length;E<Ke;){var Je=Xe[E++];for(Je+=E;E<Je;){var F,$e,et=qe[Xe[E++]];et.sorted||(null==(F=et.parent)||F.sorted||(null!=($e=F.parent)&&this.sortBone($e),F.sorted=!0,this.cache.push(F)),et.sorted=!0,this.cache.push(et))}}}for(var tt=b.bones,nt=b.bones.length,it=0;it<nt;){var D,st,at=tt[it];at.sorted||(null==(D=at.parent)||D.sorted||(null!=(st=D.parent)&&this.sortBone(st),D.sorted=!0,this.cache.push(D)),at.sorted=!0,this.cache.push(at)),++it}this.cache.push(b);for(var lt=0;lt<nt;){for(var rt=tt[lt].children,ot=0,ut=rt.length;ot<ut;){var ht=rt[ot];if(ht.active){if(ht.sorted)for(var ct=ht.children,_t=0,dt=ct.length;_t<dt;){var pt=ct[_t];pt.active?(pt.sorted&&this.sortReset(pt.children),pt.sorted=!1,++_t):++_t}ht.sorted=!1}++ot}++lt}for(var mt=0;mt<nt;)tt[mt].sorted=!0,++mt}o=2;break}++Se}if(2==o)o=0;else if(1<=o)break}}++r}if(0==o)break}for(var R,P,gt,r=0;r<Q;)(R=t[r]).sorted||(null==(P=R.parent)||P.sorted||(null!=(gt=P.parent)&&this.sortBone(gt),P.sorted=!0,this.cache.push(P)),R.sorted=!0,this.cache.push(R)),++r}),Ww=((i["spine.Skeleton"]=Ow).__name__="spine.Skeleton",Ow.prototype={sortBone:function(e){var t;e.sorted||(null!=(t=e.parent)&&this.sortBone(t),e.sorted=!0,this.cache.push(e))},sortReset:function(e){for(var t=0,n=e.length;t<n;){var i=e[t];i.active?(i.sorted&&this.sortReset(i.children),i.sorted=!1,++t):++t}},getBones:function(){return this.bones},findBone:function(e){if(null==e)throw tl.thrown(new Dw("boneName cannot be null."));for(var t=this.bones,n=0,i=this.bones.length;n<i;){var s=t[n];if(s.data.name==e)return s;++n}return null},findSlot:function(e){if(null==e)throw tl.thrown(new Dw("slotName cannot be null."));for(var t=this.slots,n=0,i=this.slots.length;n<i;){var s=t[n];if(s.data.name==e)return s;++n}return null},setSkin:function(e){if(e!=this.skin){if(null!=e)if(null!=this.skin)for(var z=this.slots,t=0,Q=dy.orderedItems(this.skin.attachments);t<Q.length;){var n=Q[t];if(++t,(R=z[I=n.slotIndex]).attachment==n.attachment){var i=n.name,s=e.lookup;if(I<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==i)throw tl.thrown(new Dw("name cannot be null."));s.slotIndex=I;var a=0;if(0==(s.name=i).length)h=0;else{for(var l=0,V=i.length;l<V;)a=(a<<5)-a+Jn.cca(i,l++);h=a}s.hashCode=h+37*I|0;var O=e.lookup,r=null;if(null!=(T=e.attachments.h[O.hashCode]))for(var W=0,N=T.length;W<N;){var o=T[W++];if(null!=(L=O)&&o.slotIndex==(m=L).slotIndex&&o.name==m.name){r=o;break}}null!=(E=null!=r?r.attachment:null)&&R.attachment!=E&&((!(E instanceof Xw&&R.attachment instanceof Xw)||(x=R.attachment,(null!=(f=E).deformAttachment?f.deformAttachment:f)!=(null!=x.deformAttachment?x.deformAttachment:x)))&&(U=R.deform).splice(0,U.length),R.attachment=E,R.attachmentTime=R.bone.skeleton.time)}}else for(var z=this.slots,u=0,G=this.slots.length;u<G;){if(null!=(i=(R=z[u]).data.attachmentName)){s=e.lookup;if(u<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==i)throw tl.thrown(new Dw("name cannot be null."));s.slotIndex=u;var h,a=0;if(0==(s.name=i).length)h=0;else{for(t=0,Q=i.length;t<Q;)a=(a<<5)-a+Jn.cca(i,t++);h=a}s.hashCode=h+37*u|0;var U,O=e.lookup,r=null;if(null!=(T=e.attachments.h[O.hashCode]))for(l=0,V=T.length;l<V;){var L,n=T[l++];if(null!=(L=O)&&n.slotIndex==(m=L).slotIndex&&n.name==m.name){r=n;break}}null!=(E=null!=(o=r)?o.attachment:null)&&R.attachment!=E&&((!(E instanceof Xw&&R.attachment instanceof Xw)||(x=R.attachment,(null!=(f=E).deformAttachment?f.deformAttachment:f)!=(null!=x.deformAttachment?x.deformAttachment:x)))&&(U=R.deform).splice(0,U.length),R.attachment=E,R.attachmentTime=R.bone.skeleton.time)}++u}this.skin=e;for(var j=this.cache,H=(j.splice(0,j.length),this.bones.length),Y=this.bones,u=0;u<H;)(R=Y[u]).sorted=R.data.skinRequired,R.active=!R.sorted,++u;if(null!=this.skin)for(var Z=this.skin.bones,u=0,G=this.skin.bones.length;u<G;){for(var c=Y[Z[u].index];c.sorted=!1,c.active=!0,null!=(c=c.parent););++u}for(var X=this.ikConstraints.length,q=this.transformConstraints.length,K=this.pathConstraints.length,J=this.ikConstraints,$=this.transformConstraints,ee=this.pathConstraints,te=X+q+K;;){for(var _=0,u=0;u<te;){for(var ne=0;ne<X;){if((R=J[ne]).data.order==u){if(R.active=R.target.active&&(!R.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(R.data)),R.active){var d=R.target,d=(d.sorted||(null==(P=d.parent)||P.sorted||(null!=(Bt=P.parent)&&this.sortBone(Bt),P.sorted=!0,this.cache.push(P)),d.sorted=!0,this.cache.push(d)),R.bones),p=0<d.length?d[0]:null;if(p.sorted||(null==(g=p.parent)||g.sorted||(null!=(A=g.parent)&&this.sortBone(A),g.sorted=!0,this.cache.push(g)),p.sorted=!0,this.cache.push(p)),1==d.length){this.cache.push(R);for(var ie=p.children,se=0,G=ie.length;se<G;){if((r=ie[se]).active){if(r.sorted)for(var m,ae=r.children,le=0,re=ae.length;le<re;)(m=ae[le]).active?(m.sorted&&this.sortReset(m.children),m.sorted=!1,++le):++le;r.sorted=!1}++se}}else{for(var g,f,A=0==d.length?null:d[d.length-1],oe=(A.sorted||(null==(g=A.parent)||g.sorted||(null!=(d=g.parent)&&this.sortBone(d),g.sorted=!0,this.cache.push(g)),A.sorted=!0,this.cache.push(A)),this.cache.push(R),p.children),ue=0,he=oe.length;ue<he;){if((f=oe[ue]).active){if(f.sorted)for(var x,ce=f.children,_e=0,de=ce.length;_e<de;)(x=ce[_e]).active?(x.sorted&&this.sortReset(x.children),x.sorted=!1,++_e):++_e;f.sorted=!1}++ue}A.sorted=!0}}_=2;break}++ne}if(2==_)_=0;else{if(1<=_)break;for(var pe=0;pe<q;){var w=$[pe];if(w.data.order==u){if(w.active=w.target.active&&(!w.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(w.data)),w.active){(c=w.target).sorted||(null==(y=c.parent)||y.sorted||(null!=(me=y.parent)&&this.sortBone(me),y.sorted=!0,this.cache.push(y)),c.sorted=!0,this.cache.push(c));var y,me,ge=w.bones,fe=w.bones.length;if(w.data.local)for(var Ae=0;Ae<fe;){var b,v,C=ge[Ae],xe=C.parent;xe.sorted||(null==(v=xe.parent)||v.sorted||(null!=(b=v.parent)&&this.sortBone(b),v.sorted=!0,this.cache.push(v)),xe.sorted=!0,this.cache.push(xe)),C.sorted||(null==(b=C.parent)||b.sorted||(null!=(v=b.parent)&&this.sortBone(v),b.sorted=!0,this.cache.push(b)),C.sorted=!0,this.cache.push(C)),++Ae}else for(var we=0;we<fe;){var S,ye,be=ge[we];be.sorted||(null==(S=be.parent)||S.sorted||(null!=(ye=S.parent)&&this.sortBone(ye),S.sorted=!0,this.cache.push(S)),be.sorted=!0,this.cache.push(be)),++we}this.cache.push(w);for(var ve=0;ve<fe;){for(var Ce=ge[ve].children,Se=0,ke=Ce.length;Se<ke;){var Me=Ce[Se];if(Me.active){if(Me.sorted)for(var Ie=Me.children,Be=0,Te=Ie.length;Be<Te;){var Ee=Ie[Be];Ee.active?(Ee.sorted&&this.sortReset(Ee.children),Ee.sorted=!1,++Be):++Be}Me.sorted=!1}++Se}++ve}for(var Fe=0;Fe<fe;)ge[Fe].sorted=!0,++Fe}_=2;break}++pe}if(2==_)_=0;else{if(1<=_)break;for(var De=0;De<K;){var k=ee[De];if(k.data.order==u){if(k.active=k.target.bone.active&&(!k.data.skinRequired||null!=this.skin&&-1!=this.skin.constraints.indexOf(k.data)),k.active){var M=k.target,I=M.data.index,B=M.bone;if(null!=this.skin)for(var Re=this.skin,T=dy.orderedItems(Re.attachments),Pe=0,ze=dy.get_size(Re.attachments);Pe<ze;){var E,F=T[Pe];if(F.slotIndex==I)if((E=F.attachment)instanceof $w){var Qe,Ve=E.bones;if(null==Ve)B.sorted||(null==(F=B.parent)||F.sorted||(null!=(Qe=F.parent)&&this.sortBone(Qe),F.sorted=!0,this.cache.push(F)),B.sorted=!0,this.cache.push(B));else for(var Oe=this.bones,We=0,Ne=Ve.length;We<Ne;){var Ge=Ve[We++];for(Ge+=We;We<Ge;){var Ue,Le,je=Oe[Ve[We++]];je.sorted||(null==(Ue=je.parent)||Ue.sorted||(null!=(Le=Ue.parent)&&this.sortBone(Le),Ue.sorted=!0,this.cache.push(Ue)),je.sorted=!0,this.cache.push(je))}}}++Pe}if(null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin)for(var Re=this.data.defaultSkin,He=dy.orderedItems(Re.attachments),Ye=0,Ze=dy.get_size(Re.attachments);Ye<Ze;){var D=He[Ye];if(D.slotIndex==I){D=D.attachment;if(D instanceof $w){var Xe,qe=D.bones;if(null==qe)B.sorted||(null==(D=B.parent)||D.sorted||(null!=(Xe=D.parent)&&this.sortBone(Xe),D.sorted=!0,this.cache.push(D)),B.sorted=!0,this.cache.push(B));else for(var Ke=this.bones,Je=0,$e=qe.length;Je<$e;){var et=qe[Je++];for(et+=Je;Je<et;){var tt,nt,it=Ke[qe[Je++]];it.sorted||(null==(tt=it.parent)||tt.sorted||(null!=(nt=tt.parent)&&this.sortBone(nt),tt.sorted=!0,this.cache.push(tt)),it.sorted=!0,this.cache.push(it))}}}}++Ye}M=M.attachment;if(M instanceof $w&&M instanceof $w){var st,at=M.bones;if(null==at)B.sorted||(null==(M=B.parent)||M.sorted||(null!=(st=M.parent)&&this.sortBone(st),M.sorted=!0,this.cache.push(M)),B.sorted=!0,this.cache.push(B));else for(var lt=this.bones,rt=0,ot=at.length;rt<ot;){var ut=at[rt++];for(ut+=rt;rt<ut;){var ht,ct,_t=lt[at[rt++]];_t.sorted||(null==(ht=_t.parent)||ht.sorted||(null!=(ct=ht.parent)&&this.sortBone(ct),ht.sorted=!0,this.cache.push(ht)),_t.sorted=!0,this.cache.push(_t))}}}for(var dt=k.bones,pt=k.bones.length,mt=0;mt<pt;){var gt,ft,At=dt[mt];At.sorted||(null==(gt=At.parent)||gt.sorted||(null!=(ft=gt.parent)&&this.sortBone(ft),gt.sorted=!0,this.cache.push(gt)),At.sorted=!0,this.cache.push(At)),++mt}this.cache.push(k);for(var xt=0;xt<pt;){for(var wt=dt[xt].children,yt=0,bt=wt.length;yt<bt;){var vt=wt[yt];if(vt.active){if(vt.sorted)for(var Ct=vt.children,St=0,kt=Ct.length;St<kt;){var Mt=Ct[St];Mt.active?(Mt.sorted&&this.sortReset(Mt.children),Mt.sorted=!1,++St):++St}vt.sorted=!1}++yt}++xt}for(var It=0;It<pt;)dt[It].sorted=!0,++It}_=2;break}++De}if(2==_)_=0;else if(1<=_)break}}++u}if(0==_)break}for(var R,P,Bt,u=0;u<H;)(R=Y[u]).sorted||(null==(P=R.parent)||P.sorted||(null!=(Bt=P.parent)&&this.sortBone(Bt),P.sorted=!0,this.cache.push(P)),R.sorted=!0,this.cache.push(R)),++u}},getAttachment:function(e,t){if(null==t)throw tl.thrown(new Dw("attachmentName cannot be null."));if(null!=this.skin){var n=(h=this.skin).lookup;if(e<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==t)throw tl.thrown(new Dw("name cannot be null."));n.slotIndex=e;var i=0;if(0==(n.name=t).length)c=0;else{for(var s=0,a=t.length;s<a;)i=(i<<5)-i+Jn.cca(t,s++);c=i}n.hashCode=c+37*e|0;var l=h.lookup,r=null;if(null!=(_=h.attachments.h[l.hashCode]))for(s=0,a=_.length;s<a;){var o=_[s++];if(null!=(d=l)&&o.slotIndex==(p=d).slotIndex&&o.name==p.name){r=o;break}}var u=null!=(o=r)?o.attachment:null;if(null!=u)return u}if(null==this.data.defaultSkin)return null;var h,n=(h=this.data.defaultSkin).lookup;if(e<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==t)throw tl.thrown(new Dw("name cannot be null."));n.slotIndex=e;var c,i=0;if(0==(n.name=t).length)c=0;else{for(s=0,a=t.length;s<a;)i=(i<<5)-i+Jn.cca(t,s++);c=i}n.hashCode=c+37*e|0;var _,l=h.lookup,r=null;if(null!=(_=h.attachments.h[l.hashCode]))for(s=0,a=_.length;s<a;){var d,p,o=_[s++];if(null!=(d=l)&&o.slotIndex==(p=d).slotIndex&&o.name==p.name){r=o;break}}return null!=(o=r)?o.attachment:null},__class__:Ow},(i["spine.SkeletonData"]=Og).__name__="spine.SkeletonData",Og.prototype={findBone:function(e){if(null==e)throw tl.thrown(new Dw("boneName cannot be null."));for(var t=this.bones,n=0,i=this.bones.length;n<i;){var s=t[n];if(s.name==e)return s;++n}return null},findSlot:function(e){if(null==e)throw tl.thrown(new Dw("slotName cannot be null."));for(var t=this.slots,n=0,i=this.slots.length;n<i;){var s=t[n];if(s.name==e)return s;++n}return null},findSkin:function(e){if(null==e)throw tl.thrown(new Dw("skinName cannot be null."));for(var t=0,n=this.skins;t<n.length;){var i=n[t];if(++t,i.name==e)return i}return null},findEvent:function(e){if(null==e)throw tl.thrown(new Dw("eventDataName cannot be null."));for(var t=0,n=this.events;t<n.length;){var i=n[t];if(++t,i.name==e)return i}return null},getAnimations:function(){return this.animations},findAnimation:function(e){if(null==e)throw tl.thrown(new Dw("animationName cannot be null."));for(var t=this.animations,n=0,i=this.animations.length;n<i;){var s=t[n];if(s.name==e)return s;++n}return null},getIkConstraints:function(){return this.ikConstraints},findIkConstraint:function(e){if(null==e)throw tl.thrown(new Dw("constraintName cannot be null."));for(var t=this.ikConstraints,n=0,i=this.ikConstraints.length;n<i;){var s=t[n];if(s.name==e)return s;++n}return null},getTransformConstraints:function(){return this.transformConstraints},findTransformConstraint:function(e){if(null==e)throw tl.thrown(new Dw("constraintName cannot be null."));for(var t=this.transformConstraints,n=0,i=this.transformConstraints.length;n<i;){var s=t[n];if(s.name==e)return s;++n}return null},findPathConstraint:function(e){if(null==e)throw tl.thrown(new Dw("constraintName cannot be null."));for(var t=this.pathConstraints,n=0,i=this.pathConstraints.length;n<i;){var s=t[n];if(s.name==e)return s;++n}return null},__class__:Og},(i["spine.SkeletonLoader"]=Wg).__name__="spine.SkeletonLoader",Wg.prototype={__class__:Wg},function(e){Wg.call(this,e)}),Nw=((i["spine.SkeletonJson"]=Ww).__name__="spine.SkeletonJson",Ww.__super__=Wg,Ww.prototype=e(Wg.prototype,{readSkeletonData:function(e){if(null==e)throw tl.thrown(new Dw("root cannot be null."));for(var t=this.scale,n=new Og,i=e.get("skeleton"),s=(null!=i&&(n.hash=i.getString("hash",null),n.version=i.getString("spine",null),n.x=i.getFloat("x",0),n.y=i.getFloat("y",0),n.width=i.getFloat("width",0),n.height=i.getFloat("height",0),n.fps=i.getFloat("fps",30),n.imagesPath=i.getString("images",null),n.audioPath=i.getString("audio",null)),e.getChild("bones"));null!=s;){var a=null,z=s.getString("parent",null);if(null!=z&&null==(a=n.findBone(z)))throw tl.thrown(new fy("Parent bone not found: "+z));switch((u=new Eg(n.bones.length,s.getString("name"),a)).length=s.getFloat("length",0)*t,u.x=s.getFloat("x",0)*t,u.y=s.getFloat("y",0)*t,u.rotation=s.getFloat("rotation",0),u.scaleX=s.getFloat("scaleX",1),u.scaleY=s.getFloat("scaleY",1),u.shearX=s.getFloat("shearX",0),u.shearY=s.getFloat("shearY",0),s.getString("transform","normal")){case"noRotationOrReflection":F=2;break;case"noScale":F=3;break;case"noScaleOrReflection":F=4;break;case"normal":F=0;break;case"onlyTranslation":F=1;break;default:F=0}u.transformMode=F,u.skinRequired=s.getBoolean("skin",!1),null!=(o=s.getString("color",null))&&sy.valueOfIntoColor(o,u.color),n.bones.push(u),s=s.get_next()}for(var l=e.getChild("slots");null!=l;){var Q=l.getString("name"),r=l.getString("bone"),V=n.findBone(r);if(null==V)throw tl.thrown(new fy("Slot bone not found: "+r));var o,u=new jw(n.slots.length,Q,V),r=(null!=(o=l.getString("color",null))&&sy.valueOfIntoColor(o,u.color),l.getString("dark",null));switch(null!=r&&(u.darkColor=sy.valueOf(r)),u.attachmentName=l.getString("attachment",null),l.getString("blend","normal")){case"additive":F=1;break;case"multiply":F=2;break;case"normal":F=0;break;case"screen":F=3;break;default:F=0}u.blendMode=F,n.slots.push(u),l=l.get_next()}for(var h=e.getChild("ik");null!=h;){(u=new zg(h.getString("name"))).order=h.getInt("order",0),u.skinRequired=h.getBoolean("skin",!1);for(var c=h.getChild("bones");null!=c;){if(null==(g=n.findBone(c.asString())))throw tl.thrown(new fy("IK bone not found: "+el.string(c)));u.bones.push(g),c=c.get_next()}var _=h.getString("target");if(u.target=n.findBone(_),null==u.target)throw tl.thrown(new fy("IK target bone not found: "+_));u.mix=h.getFloat("mix",1),u.softness=h.getFloat("softness",0)*t,u.bendDirection=h.getBoolean("bendPositive",!0)?1:-1,u.compress=h.getBoolean("compress",!1),u.stretch=h.getBoolean("stretch",!1),u.uniform=h.getBoolean("uniform",!1),n.ikConstraints.push(u),h=h.get_next()}for(h=e.getChild("transform");null!=h;){for(c=((u=new Yw(h.getString("name"))).order=h.getInt("order",0),u.skinRequired=h.getBoolean("skin",!1),h.getChild("bones"));null!=c;){if(null==(g=n.findBone(c.asString())))throw tl.thrown(new fy("Transform constraint bone not found: "+el.string(c)));u.bones.push(g),c=c.get_next()}_=h.getString("target");if(u.target=n.findBone(_),null==u.target)throw tl.thrown(new fy("Transform constraint target bone not found: "+_));u.local=h.getBoolean("local",!1),u.relative=h.getBoolean("relative",!1),u.offsetRotation=h.getFloat("rotation",0),u.offsetX=h.getFloat("x",0)*t,u.offsetY=h.getFloat("y",0)*t,u.offsetScaleX=h.getFloat("scaleX",0),u.offsetScaleY=h.getFloat("scaleY",0),u.offsetShearY=h.getFloat("shearY",0),u.mixRotate=h.getFloat("mixRotate",1),u.mixX=h.getFloat("mixX",1),u.mixY=h.getFloat("mixY",u.mixX),u.mixScaleX=h.getFloat("mixScaleX",1),u.mixScaleY=h.getFloat("mixScaleY",u.mixScaleX),u.mixShearY=h.getFloat("mixShearY",1),n.transformConstraints.push(u),h=h.get_next()}for(h=e.getChild("path");null!=h;){for(c=((u=new Vg(h.getString("name"))).order=h.getInt("order",0),u.skinRequired=h.getBoolean("skin",!1),h.getChild("bones"));null!=c;){if(null==(g=n.findBone(c.asString())))throw tl.thrown(new fy("Path bone not found: "+el.string(c)));u.bones.push(g),c=c.get_next()}var d,p,_=h.getString("target");if(u.target=n.findSlot(_),null==u.target)throw tl.thrown(new fy("Path target slot not found: "+_));switch(h.getString("positionMode","percent")){case"fixed":F=0;break;case"percent":F=1;break;default:F=0}switch(u.positionMode=F,h.getString("spacingMode","length")){case"fixed":d=1;break;case"length":d=0;break;case"percent":d=2;break;case"proportional":d=3;break;default:d=0}switch(u.spacingMode=d,h.getString("rotateMode","tangent")){case"chain":p=1;break;case"chainScale":p=2;break;default:p=0}u.rotateMode=p,u.offsetRotation=h.getFloat("rotation",0),u.position=h.getFloat("position",0),0==u.positionMode&&(u.position*=t),u.spacing=h.getFloat("spacing",0),0!=u.spacingMode&&1!=u.spacingMode||(u.spacing*=t),u.mixRotate=h.getFloat("mixRotate",1),u.mixX=h.getFloat("mixX",1),u.mixY=h.getFloat("mixY",1),n.pathConstraints.push(u),h=h.get_next()}for(var m=e.getChild("skins");null!=m;){for(var g,f=new Gw(m.getString("name")),c=m.getChild("bones");null!=c;){if(null==(g=n.findBone(c.asString())))throw tl.thrown(new fy("Skin bone not found: "+el.string(c)));f.bones.push(g),c=c.get_next()}for(var A=m.getChild("ik");null!=A;){var O=n.findIkConstraint(A.asString());if(null==O)throw tl.thrown(new fy("Skin IK constraint not found: "+el.string(A)));f.constraints.push(O),A=A.get_next()}for(var x=m.getChild("transform");null!=x;){var W=n.findTransformConstraint(x.asString());if(null==W)throw tl.thrown(new fy("Skin transform constraint not found: "+el.string(x)));f.constraints.push(W),x=x.get_next()}for(var w=m.getChild("path");null!=w;){var N=n.findPathConstraint(w.asString());if(null==N)throw tl.thrown(new fy("Skin path constraint not found: "+el.string(w)));f.constraints.push(N),w=w.get_next()}for(var y=m.getChild("attachments");null!=y;){var G=n.findSlot(y.get_name());if(null==G)throw tl.thrown(new fy("Slot not found: "+y.get_name()));for(var b=y.get_child();null!=b;){try{var U=this.readAttachment(b,f,G.index,b.get_name(),n);if(null!=U){var L=G.index,v=b.get_name();if(null==U)throw tl.thrown(new Dw("attachment cannot be null."));var j=new Uw(L,v,U);if(!dy.add(f.attachments,j)){var C=f.attachments.h[j.hashCode],S=null;if(null!=C)for(var k=0,M=C.length;k<M;){var H=C[k++];if(F=null!=(E=j)&&(B=E,H.slotIndex==B.slotIndex)&&H.name==B.name){S=H;break}}S.attachment=U}}}catch(T){CA.lastError=T;var Y=tl.caught(T).unwrap();throw tl.thrown(new fy("Error reading attachment: "+b.get_name()+", skin: "+el.string(f),Y))}b=b.get_next()}y=y.get_next()}n.skins.push(f),"default"==f.name&&(n.defaultSkin=f),m=m.get_next()}for(var Z=this.linkedMeshes,X=0,q=this.linkedMeshes.length;X<q;){if(null==(f=null==(S=Z[X]).skin?n.defaultSkin:n.findSkin(S.skin)))throw tl.thrown(new fy("Skin not found: "+S.skin));var L=S.slotIndex,v=S.parent,I=f.lookup;if(L<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==v)throw tl.thrown(new Dw("name cannot be null."));I.slotIndex=L;var K,J=0;if(0==(I.name=v).length)K=0;else{for(k=0,M=v.length;k<M;)J=(J<<5)-J+Jn.cca(v,k++);K=J}I.hashCode=K+37*L|0;var $=f.lookup,B=null;if(null!=(C=f.attachments.h[$.hashCode]))for(var T=0,Y=C.length;T<Y;){var E,F,c=C[T++];if(F=null!=(E=$)&&c.slotIndex==E.slotIndex&&c.name==E.name){B=c;break}}if(null==(a=null!=(A=B)?A.attachment:null))throw tl.thrown(new fy("Parent mesh not found: "+S.parent));S.mesh.deformAttachment=S.inheritDeform?a:S.mesh;var I=S.mesh,D=a;null!=(I.parentMesh=D)&&(I.bones=D.bones,I.vertices=D.vertices,I.regionUVs=D.regionUVs,I.triangles=D.triangles,I.hullLength=D.hullLength,I.worldVerticesLength=D.worldVerticesLength,I.edges=D.edges,I.width=D.width,I.height=D.height),S.mesh.updateUVs(),++X}for(var i=this.linkedMeshes,R=(i.splice(0,i.length),e.getChild("events"));null!=R;)(u=new Rg(R.get_name())).intValue=R.getInt("int",0),u.floatValue=R.getFloat("float",0),u.stringValue=R.getString("string",""),u.audioPath=R.getString("audio",null),null!=u.audioPath&&(u.volume=R.getFloat("volume",1),u.balance=R.getFloat("balance",0)),n.events.push(u),R=R.get_next();for(var P=e.getChild("animations");null!=P;){try{this.readAnimation(P,P.get_name(),n)}catch(k){CA.lastError=k;M=tl.caught(k).unwrap();throw tl.thrown(new fy("Error reading animation: "+P.get_name(),M))}P=P.get_next()}return n},readAttachment:function(e,t,n,i,s){var a,l=this.scale;switch(i=e.getString("name",i),e.getString("type","region")){case"boundingbox":a=1;break;case"clipping":a=6;break;case"linkedmesh":a=3;break;case"mesh":a=2;break;case"path":a=4;break;case"point":a=5;break;default:a=0}if(0==a){var r=e.getString("path",i),o=this.attachmentLoader.newRegionAttachment(t,i,r);if(null==o)return null;o.path=r,o.x=e.getFloat("x",0)*l,o.y=e.getFloat("y",0)*l,o.scaleX=e.getFloat("scaleX",1),o.scaleY=e.getFloat("scaleY",1),o.rotation=e.getFloat("rotation",0),o.width=e.getFloat("width")*l,o.height=e.getFloat("height")*l;var r=e.getString("color",null),r=(null!=r&&sy.valueOfIntoColor(r,o.color),o.width),u=o.height,h=r/2,c=u/2,_=-h,d=-c,r=(o.region instanceof oy&&(_+=(p=o.region).offsetX/p.originalWidth*r,d+=p.offsetY/p.originalHeight*u,90==p.degrees?(h-=(p.originalWidth-p.offsetX-p.packedHeight)/p.originalWidth*r,c-=(p.originalHeight-p.offsetY-p.packedWidth)/p.originalHeight*u):(h-=(p.originalWidth-p.offsetX-p.packedWidth)/p.originalWidth*r,c-=(p.originalHeight-p.offsetY-p.packedHeight)/p.originalHeight*u)),o.scaleX),p=o.scaleY,u=(_*=r,d*=p,h*=r,c*=p,o.rotation),r=Math.cos(xy.degRad*u),p=Math.sin(xy.degRad*u),u=o.x,m=o.y,g=_*r+u,_=_*p,f=d*r+m,d=d*p,u=h*r+u,h=h*p,r=c*r+m,m=c*p,c=o.offset;return c[0]=g-d,c[1]=f+_,c[2]=g-m,c[3]=r+_,c[4]=u-m,c[5]=r+h,c[6]=u-d,c[7]=f+h,o}if(1==a){p=this.attachmentLoader.newBoundingBoxAttachment(t,i);if(null==p)return null;this.readVertices(e,p,e.getInt("vertexCount")<<1);g=e.getString("color",null);return null!=g&&sy.valueOfIntoColor(g,p.color),p}if(2==a){_=e.getString("path",i),m=this.attachmentLoader.newMeshAttachment(t,i,_);if(null==m)return null;m.path=_;r=e.getString("color",null),u=(null!=r&&sy.valueOfIntoColor(r,m.color),m.width=e.getFloat("width",0)*l,m.height=e.getFloat("height",0)*l,e.getString("parent",null));return null!=u?this.linkedMeshes.push(new Nw(m,e.getString("skin",null),n,u,e.getBoolean("deform",!0))):(d=e.require("uvs").asFloatArray(),this.readVertices(e,m,d.length),m.triangles=e.require("triangles").asShortArray(),m.regionUVs=d,m.updateUVs(),e.has("hull")&&(m.hullLength=e.require("hull").asInt()<<1),e.has("edges")&&(m.edges=e.require("edges").asShortArray())),m}if(3==a){c=e.getString("path",i),f=this.attachmentLoader.newMeshAttachment(t,i,c);if(null==f)return null;f.path=c;h=e.getString("color",null),o=(null!=h&&sy.valueOfIntoColor(h,f.color),f.width=e.getFloat("width",0)*l,f.height=e.getFloat("height",0)*l,e.getString("parent",null));return null!=o?this.linkedMeshes.push(new Nw(f,e.getString("skin",null),n,o,e.getBoolean("deform",!0))):(g=e.require("uvs").asFloatArray(),this.readVertices(e,f,g.length),f.triangles=e.require("triangles").asShortArray(),f.regionUVs=g,f.updateUVs(),e.has("hull")&&(f.hullLength=e.require("hull").asInt()<<1),e.has("edges")&&(f.edges=e.require("edges").asShortArray())),f}if(4==a){p=this.attachmentLoader.newPathAttachment(t,i);if(null==p)return null;p.closed=e.getBoolean("closed",!1),p.constantSpeed=e.getBoolean("constantSpeed",!0);var _=e.getInt("vertexCount"),r=(this.readVertices(e,p,_<<1),_/3),A=0|(r=null==r?0:r),x=[];if(0<r){var w=x.length;if(A<w)x.splice(A,A-w);else if(w<A)for(;w<A;)x.push(0),++w}for(var y=0,b=e.require("lengths").get_child();null!=b;)x[y++]=b.asFloat()*l,b=b.get_next();p.lengths=x;u=e.getString("color",null);return null!=u&&sy.valueOfIntoColor(u,p.color),p}if(5==a){d=this.attachmentLoader.newPointAttachment(t,i);if(null==d)return null;d.x=e.getFloat("x",0)*l,d.y=e.getFloat("y",0)*l,d.rotation=e.getFloat("rotation",0);m=e.getString("color",null);return null!=m&&sy.valueOfIntoColor(m,d.color),d}if(6!=a)return null;c=this.attachmentLoader.newClippingAttachment(t,i);if(null==c)return null;h=e.getString("end",null);if(null!=h){n=s.findSlot(h);if(null==n)throw tl.thrown(new fy("Clipping end slot not found: "+h));c.endSlot=n}this.readVertices(e,c,e.getInt("vertexCount")<<1);o=e.getString("color",null);return null!=o&&sy.valueOfIntoColor(o,c.color),c},readVertices:function(e,t,n){t.worldVerticesLength=n;var i=e.require("vertices").asFloatArray();if(n==i.length){if(1!=this.scale)for(var s=0,a=i.length;s<a;)i[s]*=this.scale,++s;t.vertices=i}else{for(var l=[],r=[],s=0,a=i.length;s<a;)for(var o=0|i[s++],u=(r.push(o),s+(o<<2));s<u;)r.push(0|i[s]),l.push(i[s+1]*this.scale),l.push(i[s+2]*this.scale),l.push(i[s+3]),s+=4;t.bones=r,t.vertices=l}},readAnimation:function(z,Q,e){for(var V=this.scale,t=[],n=z.getChild("slots");null!=n;){if(null==(Ln=e.findSlot(n.get_name())))throw tl.thrown(new fy("Slot not found: "+n.get_name()));for(var i=n.get_child();null!=i;){if(null==(F=i.get_child()));else{var s=i.get_size();if("attachment"==(B=i.get_name())){for(var a=new gg(s,Ln.index),l=0;null!=F;){var r=F.getFloat("time",0),O=F.getString("name");a.frames[l]=r,a.attachmentNames[l]=O,F=F.get_next(),++l}t.push(a)}else if("rgba"==B){for(var o=new cg(s,s<<2,Ln.index),W=F.getFloat("time",0),N=F.getString("color"),G=el.parseInt("0x"+N.substring(0,2))/255,U=el.parseInt("0x"+N.substring(2,4))/255,L=el.parseInt("0x"+N.substring(4,6))/255,j=el.parseInt("0x"+N.substring(6,8))/255,u=0,h=0;;){var H=u;if(H*=5,o.frames[H]=W,o.frames[1+H]=G,o.frames[2+H]=U,o.frames[3+H]=L,o.frames[4+H]=j,null==(D=F.get_next())){o.shrink(h);break}var c=D.getFloat("time",0),N=D.getString("color"),H=el.parseInt("0x"+N.substring(0,2))/255,Y=el.parseInt("0x"+N.substring(2,4))/255,Z=el.parseInt("0x"+N.substring(4,6))/255,X=el.parseInt("0x"+N.substring(6,8))/255;null!=(R=F.get("curve"))&&((P=R).isString()?"stepped"==R.asString()&&o.setStepped(u):(yn=(P=R.getAtIndex(0)).asFloat(),bn=(P=P.get_next()).asFloat(),vn=(P=P.get_next()).asFloat(),P=P.get_next(),o.setBezier(h,u,0,W,G,yn,bn,vn,P.asFloat(),c,H),++h),(T=R).isString()?"stepped"==R.asString()&&o.setStepped(u):(Wt=(T=R.getAtIndex(4)).asFloat(),Nt=(T=T.get_next()).asFloat(),Gt=(T=T.get_next()).asFloat(),T=T.get_next(),o.setBezier(h,u,1,W,U,Wt,Nt,Gt,T.asFloat(),c,Y),++h),(E=R).isString()?"stepped"==R.asString()&&o.setStepped(u):(Ut=(E=R.getAtIndex(8)).asFloat(),Lt=(E=E.get_next()).asFloat(),jt=(E=E.get_next()).asFloat(),E=E.get_next(),o.setBezier(h,u,2,W,L,Ut,Lt,jt,E.asFloat(),c,Z),++h),(k=R).isString()?"stepped"==R.asString()&&o.setStepped(u):(vt=(k=R.getAtIndex(12)).asFloat(),Ct=(k=k.get_next()).asFloat(),St=(k=k.get_next()).asFloat(),k=k.get_next(),o.setBezier(h,u,3,W,j,vt,Ct,St,k.asFloat(),c,X),++h)),W=c,G=H,U=Y,L=Z,j=X,F=D,++u}t.push(o)}else if("rgb"==B){for(var q=new _g(s,3*s,Ln.index),K=F.getFloat("time",0),J=F.getString("color"),$=el.parseInt("0x"+J.substring(0,2))/255,ee=el.parseInt("0x"+J.substring(2,4))/255,te=el.parseInt("0x"+J.substring(4,6))/255,ne=0,ie=0;;){var se=ne,se=(se<<=2,q.frames[se]=K,q.frames[1+se]=$,q.frames[2+se]=ee,q.frames[3+se]=te,F.get_next());if(null==se){q.shrink(ie);break}var _,ae,le,re,oe=se.getFloat("time",0),J=se.getString("color"),ue=el.parseInt("0x"+J.substring(0,2))/255,he=el.parseInt("0x"+J.substring(2,4))/255,ce=el.parseInt("0x"+J.substring(4,6))/255;null!=(M=F.get("curve"))&&((I=M).isString()?"stepped"==M.asString()&&q.setStepped(ne):(kt=(I=M.getAtIndex(0)).asFloat(),Mt=(I=I.get_next()).asFloat(),It=(I=I.get_next()).asFloat(),I=I.get_next(),q.setBezier(ie,ne,0,K,$,kt,Mt,It,I.asFloat(),oe,ue),++ie),(_=M).isString()?"stepped"==M.asString()&&q.setStepped(ne):(Bt=(_=M.getAtIndex(4)).asFloat(),Tt=(_=_.get_next()).asFloat(),Et=(_=_.get_next()).asFloat(),_=_.get_next(),q.setBezier(ie,ne,1,K,ee,Bt,Tt,Et,_.asFloat(),oe,he),++ie),(_=M).isString()?"stepped"==M.asString()&&q.setStepped(ne):(ae=(_=M.getAtIndex(8)).asFloat(),le=(_=_.get_next()).asFloat(),re=(_=_.get_next()).asFloat(),_=_.get_next(),q.setBezier(ie,ne,2,K,te,ae,le,re,_.asFloat(),oe,ce),++ie)),K=oe,$=ue,ee=he,te=ce,F=se,++ne}t.push(q)}else if("alpha"==B)t.push(this.readTimeline(F,new dg(s,s,Ln.index),0,1));else if("rgba2"==B){for(var d=new pg(s,7*s,Ln.index),_e=F.getFloat("time",0),p=F.getString("light"),de=el.parseInt("0x"+p.substring(0,2))/255,pe=el.parseInt("0x"+p.substring(2,4))/255,me=el.parseInt("0x"+p.substring(4,6))/255,ge=el.parseInt("0x"+p.substring(6,8))/255,fe=(p=F.getString("dark"),el.parseInt("0x"+p.substring(0,2))/255),Ae=el.parseInt("0x"+p.substring(2,4))/255,xe=el.parseInt("0x"+p.substring(4,6))/255,m=0,g=0;;){var f=m,f=(f<<=3,d.frames[f]=_e,d.frames[1+f]=de,d.frames[2+f]=pe,d.frames[3+f]=me,d.frames[4+f]=ge,d.frames[5+f]=fe,d.frames[6+f]=Ae,d.frames[7+f]=xe,F.get_next());if(null==f){d.shrink(g);break}var we,ye,be,ve,Ce,Se,ke,Me,Ie,A,Be,Te,Ee=f.getFloat("time",0),p=f.getString("light"),Fe=el.parseInt("0x"+p.substring(0,2))/255,De=el.parseInt("0x"+p.substring(2,4))/255,Re=el.parseInt("0x"+p.substring(4,6))/255,Pe=el.parseInt("0x"+p.substring(6,8))/255,ze=(p=f.getString("dark"),el.parseInt("0x"+p.substring(0,2))/255),Qe=el.parseInt("0x"+p.substring(2,4))/255,Ve=el.parseInt("0x"+p.substring(4,6))/255,x=F.get("curve");null!=x&&((A=x).isString()?"stepped"==x.asString()&&d.setStepped(m):(we=(A=x.getAtIndex(0)).asFloat(),ye=(A=A.get_next()).asFloat(),be=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,m,0,_e,de,we,ye,be,A.asFloat(),Ee,Fe),++g),(we=x).isString()?"stepped"==x.asString()&&d.setStepped(m):(ye=(we=x.getAtIndex(4)).asFloat(),be=(we=we.get_next()).asFloat(),A=(we=we.get_next()).asFloat(),we=we.get_next(),d.setBezier(g,m,1,_e,pe,ye,be,A,we.asFloat(),Ee,De),++g),(A=x).isString()?"stepped"==x.asString()&&d.setStepped(m):(ve=(A=x.getAtIndex(8)).asFloat(),Ce=(A=A.get_next()).asFloat(),Se=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,m,2,_e,me,ve,Ce,Se,A.asFloat(),Ee,Re),++g),(ve=x).isString()?"stepped"==x.asString()&&d.setStepped(m):(Ce=(ve=x.getAtIndex(12)).asFloat(),Se=(ve=ve.get_next()).asFloat(),A=(ve=ve.get_next()).asFloat(),ve=ve.get_next(),d.setBezier(g,m,3,_e,ge,Ce,Se,A,ve.asFloat(),Ee,Pe),++g),(A=x).isString()?"stepped"==x.asString()&&d.setStepped(m):(ke=(A=x.getAtIndex(16)).asFloat(),Me=(A=A.get_next()).asFloat(),Ie=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,m,4,_e,fe,ke,Me,Ie,A.asFloat(),Ee,ze),++g),(ke=x).isString()?"stepped"==x.asString()&&d.setStepped(m):(Me=(ke=x.getAtIndex(20)).asFloat(),Ie=(ke=ke.get_next()).asFloat(),A=(ke=ke.get_next()).asFloat(),ke=ke.get_next(),d.setBezier(g,m,5,_e,Ae,Me,Ie,A,ke.asFloat(),Ee,Qe),++g),(A=x).isString()?"stepped"==x.asString()&&d.setStepped(m):(x=(A=x.getAtIndex(24)).asFloat(),Be=(A=A.get_next()).asFloat(),Te=(A=A.get_next()).asFloat(),A=A.get_next(),d.setBezier(g,m,6,_e,xe,x,Be,Te,A.asFloat(),Ee,Ve),++g)),_e=Ee,de=Fe,pe=De,me=Re,ge=Pe,fe=ze,Ae=Qe,xe=Ve,F=f,++m}t.push(d)}else{if("rgb2"!=B)throw tl.thrown(new iy("Invalid timeline type for a slot: "+B+" ("+n.get_name()+")"));for(var w=new mg(s,6*s,Ln.index),Oe=F.getFloat("time",0),y=F.getString("light"),We=el.parseInt("0x"+y.substring(0,2))/255,Ne=el.parseInt("0x"+y.substring(2,4))/255,Ge=el.parseInt("0x"+y.substring(4,6))/255,Ue=(y=F.getString("dark"),el.parseInt("0x"+y.substring(0,2))/255),Le=el.parseInt("0x"+y.substring(2,4))/255,je=el.parseInt("0x"+y.substring(4,6))/255,b=0,v=0;;){var He=b,He=(He*=7,w.frames[He]=Oe,w.frames[1+He]=We,w.frames[2+He]=Ne,w.frames[3+He]=Ge,w.frames[4+He]=Ue,w.frames[5+He]=Le,w.frames[6+He]=je,F.get_next());if(null==He){w.shrink(v);break}var Ye,Ze,Xe,qe,Ke,Je,$e,et,tt,C,nt=He.getFloat("time",0),y=He.getString("light"),it=el.parseInt("0x"+y.substring(0,2))/255,st=el.parseInt("0x"+y.substring(2,4))/255,at=el.parseInt("0x"+y.substring(4,6))/255,lt=(y=He.getString("dark"),el.parseInt("0x"+y.substring(0,2))/255),rt=el.parseInt("0x"+y.substring(2,4))/255,ot=el.parseInt("0x"+y.substring(4,6))/255,S=F.get("curve");null!=S&&((C=S).isString()?"stepped"==S.asString()&&w.setStepped(b):(Ye=(C=S.getAtIndex(0)).asFloat(),Ze=(C=C.get_next()).asFloat(),Xe=(C=C.get_next()).asFloat(),C=C.get_next(),w.setBezier(v,b,0,Oe,We,Ye,Ze,Xe,C.asFloat(),nt,it),++v),(Ye=S).isString()?"stepped"==S.asString()&&w.setStepped(b):(Ze=(Ye=S.getAtIndex(4)).asFloat(),Xe=(Ye=Ye.get_next()).asFloat(),C=(Ye=Ye.get_next()).asFloat(),Ye=Ye.get_next(),w.setBezier(v,b,1,Oe,Ne,Ze,Xe,C,Ye.asFloat(),nt,st),++v),(C=S).isString()?"stepped"==S.asString()&&w.setStepped(b):(qe=(C=S.getAtIndex(8)).asFloat(),Ke=(C=C.get_next()).asFloat(),Je=(C=C.get_next()).asFloat(),C=C.get_next(),w.setBezier(v,b,2,Oe,Ge,qe,Ke,Je,C.asFloat(),nt,at),++v),(qe=S).isString()?"stepped"==S.asString()&&w.setStepped(b):(Ke=(qe=S.getAtIndex(12)).asFloat(),Je=(qe=qe.get_next()).asFloat(),C=(qe=qe.get_next()).asFloat(),qe=qe.get_next(),w.setBezier(v,b,3,Oe,Ue,Ke,Je,C,qe.asFloat(),nt,lt),++v),(C=S).isString()?"stepped"==S.asString()&&w.setStepped(b):($e=(C=S.getAtIndex(16)).asFloat(),et=(C=C.get_next()).asFloat(),tt=(C=C.get_next()).asFloat(),C=C.get_next(),w.setBezier(v,b,4,Oe,Le,$e,et,tt,C.asFloat(),nt,rt),++v),($e=S).isString()?"stepped"==S.asString()&&w.setStepped(b):(et=($e=S.getAtIndex(20)).asFloat(),tt=($e=$e.get_next()).asFloat(),C=($e=$e.get_next()).asFloat(),$e=$e.get_next(),w.setBezier(v,b,5,Oe,je,et,tt,C,$e.asFloat(),nt,ot),++v)),Oe=nt,We=it,Ne=st,Ge=at,Ue=lt,Le=rt,je=ot,F=He,++b}t.push(w)}}i=i.get_next()}n=n.get_next()}for(var ut=z.getChild("bones");null!=ut;){var ht=e.findBone(ut.get_name());if(null==ht)throw tl.thrown(new fy("Bone not found: "+ut.get_name()));for(i=ut.get_child();null!=i;){if(null==(F=i.get_child()));else{s=i.get_size();if("rotate"==(B=i.get_name()))t.push(this.readTimeline(F,new tg(s,s,ht.index),0,1));else if("translate"==B)t.push(this.readTimeline2(F,new ng(s,s<<1,ht.index),"x","y",0,V));else if("translatex"==B)t.push(this.readTimeline(F,new ig(s,s,ht.index),0,V));else if("translatey"==B)t.push(this.readTimeline(F,new sg(s,s,ht.index),0,V));else if("scale"==B)t.push(this.readTimeline2(F,new ag(s,s<<1,ht.index),"x","y",1,1));else if("scalex"==B)t.push(this.readTimeline(F,new lg(s,s,ht.index),1,1));else if("scaley"==B)t.push(this.readTimeline(F,new rg(s,s,ht.index),1,1));else if("shear"==B)t.push(this.readTimeline2(F,new og(s,s<<1,ht.index),"x","y",0,1));else if("shearx"==B)t.push(this.readTimeline(F,new ug(s,s,ht.index),0,1));else{if("sheary"!=B)throw tl.thrown(new iy("Invalid timeline type for a bone: "+B+" ("+ut.get_name()+")"));t.push(this.readTimeline(F,new hg(s,s,ht.index),0,1))}}i=i.get_next()}ut=ut.get_next()}for(i=z.getChild("ik");null!=i;){if(null==(F=i.get_child()));else{for(var ct=e.findIkConstraint(i.get_name()),a=new wg(i.get_size(),i.get_size()<<1,e.getIkConstraints().indexOf(ct)),r=F.getFloat("time",0),_t=F.getFloat("mix",1),dt=F.getFloat("softness",0)*V,l=0,h=0;;){var u=l,pt=F.getBoolean("bendPositive",!0)?1:-1,mt=F.getBoolean("compress",!1),gt=F.getBoolean("stretch",!1);if(u*=6,a.frames[u]=r,a.frames[u+1]=_t,a.frames[u+2]=dt,a.frames[u+3]=pt,a.frames[u+4]=mt?1:0,a.frames[u+5]=gt?1:0,null==(D=F.get_next())){a.shrink(h);break}c=D.getFloat("time",0),pt=D.getFloat("mix",1),mt=D.getFloat("softness",0)*V;null!=(R=F.get("curve"))&&((P=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(yn=(P=R.getAtIndex(0)).asFloat(),bn=(P=P.get_next()).asFloat(),vn=(P=P.get_next()).asFloat(),P=P.get_next(),a.setBezier(h,l,0,r,_t,yn,bn,vn,P.asFloat(),c,pt),++h),(T=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(Wt=(T=R.getAtIndex(4)).asFloat(),Nt=(T=T.get_next()).asFloat()*V,Gt=(T=T.get_next()).asFloat(),T=T.get_next(),a.setBezier(h,l,1,r,dt,Wt,Nt,Gt,T.asFloat()*V,c,mt),++h)),r=c,_t=pt,dt=mt,F=D,++l}t.push(a)}i=i.get_next()}for(i=z.getChild("transform");null!=i;){if(null==(F=i.get_child()));else{for(var ct=e.findTransformConstraint(i.get_name()),a=new yg(i.get_size(),6*i.get_size(),e.getTransformConstraints().indexOf(ct)),r=F.getFloat("time",0),ft=F.getFloat("mixRotate",1),At=F.getFloat("mixX",1),xt=F.getFloat("mixY",At),wt=F.getFloat("mixScaleX",1),yt=F.getFloat("mixScaleY",wt),bt=F.getFloat("mixShearY",1),l=0,h=0;;){u=l;if(u*=7,a.frames[u]=r,a.frames[u+1]=ft,a.frames[u+2]=At,a.frames[u+3]=xt,a.frames[u+4]=wt,a.frames[u+5]=yt,a.frames[u+6]=bt,null==(D=F.get_next())){a.shrink(h);break}var k,vt,Ct,St,M,kt,Mt,It,I,Bt,Tt,Et,c=D.getFloat("time",0),Ft=D.getFloat("mixRotate",1),Dt=D.getFloat("mixX",1),Rt=D.getFloat("mixY",Dt),Pt=D.getFloat("mixScaleX",1),zt=D.getFloat("mixScaleY",Pt),Qt=D.getFloat("mixShearY",1);null!=(R=F.get("curve"))&&((P=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(yn=(P=R.getAtIndex(0)).asFloat(),bn=(P=P.get_next()).asFloat(),vn=(P=P.get_next()).asFloat(),P=P.get_next(),a.setBezier(h,l,0,r,ft,yn,bn,vn,P.asFloat(),c,Ft),++h),(T=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(Wt=(T=R.getAtIndex(4)).asFloat(),Nt=(T=T.get_next()).asFloat(),Gt=(T=T.get_next()).asFloat(),T=T.get_next(),a.setBezier(h,l,1,r,At,Wt,Nt,Gt,T.asFloat(),c,Dt),++h),(E=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(Ut=(E=R.getAtIndex(8)).asFloat(),Lt=(E=E.get_next()).asFloat(),jt=(E=E.get_next()).asFloat(),E=E.get_next(),a.setBezier(h,l,2,r,xt,Ut,Lt,jt,E.asFloat(),c,Rt),++h),(k=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(vt=(k=R.getAtIndex(12)).asFloat(),Ct=(k=k.get_next()).asFloat(),St=(k=k.get_next()).asFloat(),k=k.get_next(),a.setBezier(h,l,3,r,wt,vt,Ct,St,k.asFloat(),c,Pt),++h),(M=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(kt=(M=R.getAtIndex(16)).asFloat(),Mt=(M=M.get_next()).asFloat(),It=(M=M.get_next()).asFloat(),M=M.get_next(),a.setBezier(h,l,4,r,yt,kt,Mt,It,M.asFloat(),c,zt),++h),(I=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(Bt=(I=R.getAtIndex(20)).asFloat(),Tt=(I=I.get_next()).asFloat(),Et=(I=I.get_next()).asFloat(),I=I.get_next(),a.setBezier(h,l,5,r,bt,Bt,Tt,Et,I.asFloat(),c,Qt),++h)),r=c,ft=Ft,At=Dt,xt=Rt,yt=zt,wt=wt=Pt,F=D,++l}t.push(a)}i=i.get_next()}for(var Vt=z.getChild("path");null!=Vt;){if(null==(ct=e.findPathConstraint(Vt.get_name())))throw tl.thrown(new fy("Path constraint not found: "+Vt.get_name()));for(var Ot=e.pathConstraints.indexOf(ct),i=Vt.get_child();null!=i;){if(null==(F=i.get_child()));else{var B,s=i.get_size();if("position"==(B=i.get_name()))t.push(this.readTimeline(F,new bg(s,s,Ot),0,0==ct.positionMode?V:1));else if("spacing"==B)t.push(this.readTimeline(F,new vg(s,s,Ot),0,0==ct.spacingMode||1==ct.spacingMode?V:1));else if("mix"==B){for(a=new Cg(s,3*s,Ot),r=F.getFloat("time",0),ft=F.getFloat("mixRotate",1),At=F.getFloat("mixX",1),xt=F.getFloat("mixY",At),l=0,h=0;;){u=l;if(u<<=2,a.frames[u]=r,a.frames[u+1]=ft,a.frames[u+2]=At,a.frames[u+3]=xt,null==(D=F.get_next())){a.shrink(h);break}var T,Wt,Nt,Gt,E,Ut,Lt,jt,c=D.getFloat("time",0),Ft=D.getFloat("mixRotate",1),Dt=D.getFloat("mixX",1),Rt=D.getFloat("mixY",Dt);null!=(R=F.get("curve"))&&((P=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(yn=(P=R.getAtIndex(0)).asFloat(),bn=(P=P.get_next()).asFloat(),vn=(P=P.get_next()).asFloat(),P=P.get_next(),a.setBezier(h,l,0,r,ft,yn,bn,vn,P.asFloat(),c,Ft),++h),(T=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(Wt=(T=R.getAtIndex(4)).asFloat(),Nt=(T=T.get_next()).asFloat(),Gt=(T=T.get_next()).asFloat(),T=T.get_next(),a.setBezier(h,l,1,r,At,Wt,Nt,Gt,T.asFloat(),c,Dt),++h),(E=R).isString()?"stepped"==R.asString()&&a.setStepped(l):(Ut=(E=R.getAtIndex(8)).asFloat(),Lt=(E=E.get_next()).asFloat(),jt=(E=E.get_next()).asFloat(),E=E.get_next(),a.setBezier(h,l,2,r,xt,Ut,Lt,jt,E.asFloat(),c,Rt),++h)),r=c,ft=Ft,At=Dt,xt=Rt,F=D,++l}t.push(a)}}i=i.get_next()}Vt=Vt.get_next()}for(var Ht=z.getChild("deform");null!=Ht;){var Yt=e.findSkin(Ht.get_name());if(null==Yt)throw tl.thrown(new fy("Skin not found: "+Ht.get_name()));for(n=Ht.get_child();null!=n;){if(null==(Ln=e.findSlot(n.get_name())))throw tl.thrown(new fy("Slot not found: "+n.get_name()));for(var F,i=n.get_child();null!=i;){if(null==(F=i.get_child()));else{var Zt=Ln.index,Xt=i.get_name(),qt=Yt.lookup;if(Zt<0)throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==Xt)throw tl.thrown(new Dw("name cannot be null."));qt.slotIndex=Zt;var Kt,Jt=0;if(0==(qt.name=Xt).length)Kt=0;else{for(var $t=0,en=Xt.length;$t<en;)Jt=(Jt<<5)-Jt+Jn.cca(Xt,$t++);Kt=Jt}qt.hashCode=Kt+37*Zt|0;var tn=Yt.lookup,nn=Yt.attachments.h[tn.hashCode],sn=null;if(null!=nn)for(var an=0,ln=nn.length;an<ln;){var rn=nn[an++];if(null!=tn&&rn.slotIndex==tn.slotIndex&&rn.name==tn.name){sn=rn;break}}qt=null!=sn?sn.attachment:null;if(null==qt)throw tl.thrown(new fy("Deform attachment not found: "+i.get_name()));for(var on=null!=qt.bones,un=qt.vertices,hn=on?(un.length/3|0)<<1:un.length,a=new fg(i.get_size(),i.get_size(),Ln.index,qt),r=F.getFloat("time",0),l=0,h=0;;){var D,cn=null,_n=F.get("vertices");if(null==_n)if(on){var dn=0|(Wn=null==(Wn=hn)?0:Wn),pn=[];if(0<Wn)if(dn<(Nn=pn.length))pn.splice(dn,dn-Nn);else if(Nn<dn)for(;Nn<dn;)pn.push(0),++Nn;cn=pn}else cn=un;else{var mn=0|(Gn=null==(Gn=hn)?0:Gn),gn=[];if(0<Gn)if(mn<(Un=gn.length))gn.splice(mn,mn-Un);else if(Un<mn)for(;Un<mn;)gn.push(0),++Un;var cn=gn,fn=F.getInt("offset",0);if(_y.copy(_n.asFloatArray(),0,gn,fn,_n.get_size()),1!=V)for(var An=fn,xn=fn+_n.get_size();An<xn;)gn[An]*=V,++An;if(!on)for(var wn=0;wn<hn;)gn[wn]+=un[wn],++wn}if(a.frames[l]=r,a.vertices[l]=cn,null==(D=F.get_next())){a.shrink(h);break}var R,c=D.getFloat("time",0);if(null!=(R=F.get("curve"))){var P=R;if(R.isString())"stepped"==R.asString()&&a.setStepped(l);else{for(var yn=(P=R.getAtIndex(0)).asFloat(),bn=(P=P.get_next()).asFloat(),vn=(P=P.get_next()).asFloat(),fn=(P=P.get_next()).asFloat(),Cn=a.curves,Sn=a.frames.length+18*h,_n=(Cn[l]=2+Sn,.03*(r-2*yn+vn)),cn=.03*fn-.06*bn,kn=.006*(3*(yn-vn)-r+c),Mn=.018*(bn-fn+.33333333),In=2*_n+kn,Bn=2*cn+Mn,Tn=.3*(yn-r)+_n+.16666667*kn,En=.3*bn+cn+.16666667*Mn,Fn=r+Tn,Dn=En,Rn=Sn+18;Sn<Rn;)Cn[Sn]=Fn,Cn[Sn+1]=Dn,Tn+=In,En+=Bn,In+=kn,Bn+=Mn,Fn+=Tn,Dn+=En,Sn+=2;++h}}r=c,F=D,++l}t.push(a)}i=i.get_next()}n=n.get_next()}Ht=Ht.get_next()}var Pn=z.get("drawOrder");if(null!=Pn){for(var a=new xg(Pn.get_size()),zn=e.slots.length,l=0,Qn=Pn.get_child();null!=Qn;){var Vn=null,On=Qn.get("offsets");if(null!=On){var Wn,Nn,dn=0|(Wn=null==(Wn=zn)?0:Wn),pn=[];if(0!=Wn)if(dn<(Nn=pn.length))pn.splice(dn,dn-Nn);else if(Nn<dn)for(;Nn<dn;)pn.push(0),++Nn;for(Vn=pn,An=zn-1;0<=An;)pn[An]=-1,--An;var Gn,Un,mn=0|(Gn=null==(Gn=zn-On.get_size())?0:Gn),gn=[];if(0!=Gn)if(mn<(Un=gn.length))gn.splice(mn,mn-Un);else if(Un<mn)for(;Un<mn;)gn.push(0),++Un;for(var Ln,jn=0,Hn=0,Yn=On.get_child();null!=Yn;){if(null==(Ln=e.findSlot(Yn.getString("slot"))))throw tl.thrown(new fy("Slot not found: "+Yn.getString("slot")));for(;jn!=Ln.index;)gn[Hn++]=jn++;pn[jn+++Yn.getInt("offset")]=jn-1,Yn=Yn.get_next()}for(;jn<zn;)gn[Hn++]=jn++;for(wn=zn-1;0<=wn;)-1==pn[wn]&&(pn[wn]=gn[--Hn]),--wn}r=Qn.getFloat("time",0);a.frames[l]=r,a.drawOrders[l]=Vn,Qn=Qn.get_next(),++l}t.push(a)}Pn=z.get("events");if(null!=Pn){for(var a=new Ag(Pn.get_size()),l=0,Zn=Pn.get_child();null!=Zn;){var Xn=e.findEvent(Zn.getString("name"));if(null==Xn)throw tl.thrown(new fy("Event not found: "+Zn.getString("name")));var qn=new Dg(Zn.getFloat("time",0),Xn);qn.intValue=Zn.getInt("int",Xn.intValue),qn.floatValue=Zn.getFloat("float",Xn.floatValue),qn.stringValue=Zn.getString("string",Xn.stringValue),null!=qn.data.audioPath&&(qn.volume=Zn.getFloat("volume",Xn.volume),qn.balance=Zn.getFloat("balance",Xn.balance)),a.frames[l]=qn.time,a.events[l]=qn,Zn=Zn.get_next(),++l}t.push(a)}for(var Kn=0,An=0,xn=t.length;An<xn;)Kn=Math.max(Kn,t[An].getDuration()),++An;e.animations.push(new Zm(Q,t,Kn))},readTimeline:function(e,t,n,i){for(var s=e.getFloat("time",0),a=e.getFloat("value",n)*i,l=0,r=0;;){t.setFrame(l,s,a);var o=e.get_next();if(null==o)return t.shrink(r),t;var u,h,c,_=o.getFloat("time",0),d=o.getFloat("value",n)*i,p=e.get("curve");null!=p&&((u=p).isString()?"stepped"==p.asString()&&t.setStepped(l):(p=(u=p.getAtIndex(0)).asFloat(),h=(u=u.get_next()).asFloat()*i,c=(u=u.get_next()).asFloat(),u=u.get_next(),t.setBezier(r,l,0,s,a,p,h,c,u.asFloat()*i,_,d),++r)),s=_,a=d,e=o,++l}},readTimeline2:function(e,t,n,i,s,a){for(var l=e.getFloat("time",0),r=e.getFloat(n,s)*a,o=e.getFloat(i,s)*a,u=0,h=0;;){var c=u,c=(c*=3,t.frames[c]=l,t.frames[1+c]=r,t.frames[2+c]=o,e.get_next());if(null==c)return t.shrink(h),t;var _,d,p,m,g=c.getFloat("time",0),f=c.getFloat(n,s)*a,A=c.getFloat(i,s)*a,x=e.get("curve");null!=x&&((m=x).isString()?"stepped"==x.asString()&&t.setStepped(u):(_=(m=x.getAtIndex(0)).asFloat(),d=(m=m.get_next()).asFloat()*a,p=(m=m.get_next()).asFloat(),m=m.get_next(),t.setBezier(h,u,0,l,r,_,d,p,m.asFloat()*a,g,f),++h),(_=x).isString()?"stepped"==x.asString()&&t.setStepped(u):(d=(_=x.getAtIndex(4)).asFloat(),p=(_=_.get_next()).asFloat()*a,m=(_=_.get_next()).asFloat(),_=_.get_next(),t.setBezier(h,u,1,l,o,d,p,m,_.asFloat()*a,g,A),++h)),l=g,r=f,o=A,e=c,++u}},__class__:Ww}),function(e,t,n,i,s){this.inheritDeform=!1,this.slotIndex=0,this.skin=null,this.mesh=e,this.skin=t,this.slotIndex=n,this.parent=i,this.inheritDeform=s}),Gw=((i["spine.LinkedMesh"]=Nw).__name__="spine.LinkedMesh",Nw.prototype={__class__:Nw},function(e){if(this.lookup=new Uw(0,"",null),this.constraints=[],this.bones=[],this.attachments=new Je,null==e)throw tl.thrown(new Dw("name cannot be null."));this.name=e,dy.orderedItems(this.attachments)}),Uw=((i["spine.Skin"]=Gw).__name__="spine.Skin",Gw.prototype={toString:function(){return this.name},__class__:Gw},function(e,t,n){if(this.hashCode=0,e<(this.slotIndex=0))throw tl.thrown(new Dw("slotIndex must be >= 0."));if(null==t)throw tl.thrown(new Dw("name cannot be null."));this.slotIndex=e;var i,s=0;if(0==(this.name=t).length)i=0;else{for(var a=0,l=t.length;a<l;)s=(s<<5)-s+Jn.cca(t,a++);i=s}this.hashCode=i+37*e|0,this.attachment=n}),Lw=((i["spine.SkinEntry"]=Uw).__name__="spine.SkinEntry",Uw.prototype={__class__:Uw},function(e,t){if(this.attachmentState=0,this.deform=[],this.attachmentTime=0,this.color=new sy,null==e)throw tl.thrown(new Dw("data cannot be null."));if(null==t)throw tl.thrown(new Dw("bone cannot be null."));this.data=e,this.bone=t,this.darkColor=null==e.darkColor?null:new sy;var n,i,s,a,t=this.color,e=this.data.color;t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,null!=this.darkColor&&(t=this.darkColor,e=this.data.darkColor,t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a),null==this.data.attachmentName?this.attachment!=(n=null)&&(n instanceof Xw&&this.attachment instanceof Xw&&(s=this.attachment,(null!=(i=n).deformAttachment?i.deformAttachment:i)==(null!=s.deformAttachment?s.deformAttachment:s))||(a=this.deform).splice(0,a.length),this.attachment=n,this.attachmentTime=this.bone.skeleton.time):(this.attachment=null,n=this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName),this.attachment!=n&&(n instanceof Xw&&this.attachment instanceof Xw&&(s=this.attachment,(null!=(i=n).deformAttachment?i.deformAttachment:i)==(null!=s.deformAttachment?s.deformAttachment:s))||(a=this.deform).splice(0,a.length),this.attachment=n,this.attachmentTime=this.bone.skeleton.time))}),jw=((i["spine.Slot"]=Lw).__name__="spine.Slot",Lw.prototype={__class__:Lw},function(e,t,n){if(this.color=new sy(1,1,1,1),e<(this.index=0))throw tl.thrown(new Dw("index must be >= 0."));if(null==t)throw tl.thrown(new Dw("name cannot be null."));if(null==n)throw tl.thrown(new Dw("boneData cannot be null."));this.index=e,this.name=t,this.boneData=n}),Hw=((i["spine.SlotData"]=jw).__name__="spine.SlotData",jw.prototype={__class__:jw},function(e,t){if(this.temp=new cy,this.active=!1,this.mixShearY=0,this.mixScaleY=0,this.mixScaleX=0,this.mixY=0,this.mixX=0,this.mixRotate=0,null==e)throw tl.thrown(new Dw("data cannot be null."));if(null==t)throw tl.thrown(new Dw("skeleton cannot be null."));this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=[];for(var n=0,i=e.bones;n<i.length;)this.bones.push(t.findBone(i[n++].name));this.target=t.findBone(e.target.name)}),Yw=((i["spine.TransformConstraint"]=Hw).__name__="spine.TransformConstraint",Hw.__interfaces__=[Bg],Hw.prototype={update:function(){if(0!=this.mixRotate||0!=this.mixX||0!=this.mixY||0!=this.mixScaleX||0!=this.mixScaleX||0!=this.mixShearY)if(this.data.local)if(this.data.relative)for(var e=this.mixRotate,t=this.mixX,z=this.mixY,n=this.mixScaleX,i=this.mixScaleY,s=this.mixShearY,a=this.target,Q=this.bones,l=0,V=this.bones.length;l<V;)(_=Q[l]).updateWorldTransformWithData(_.ax+(a.ax+this.data.offsetX)*t,_.ay+(a.ay+this.data.offsetY)*z,_.arotation+(a.arotation+this.data.offsetRotation)*e,_.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*n+1),_.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*i+1),_.ashearX,_.ashearY+(a.ashearY+this.data.offsetShearY)*s),++l;else for(e=this.mixRotate,t=this.mixX,z=this.mixY,n=this.mixScaleX,i=this.mixScaleY,s=this.mixShearY,a=this.target,Q=this.bones,l=0,V=this.bones.length;l<V;){var O=(_=Q[l]).arotation,r=(0!=e&&(p=a.arotation-O+this.data.offsetRotation,O+=(p-=360*(16384-(16384.499999999996-p/360|0)))*e),_.ax),o=_.ay,W=(r+=(a.ax-r+this.data.offsetX)*t,o+=(a.ay-o+this.data.offsetY)*z,_.ascaleX),N=_.ascaleY,G=(0!=n&&0!=W&&(W=(W+(a.ascaleX-W+this.data.offsetScaleX)*n)/W),0!=i&&0!=N&&(N=(N+(a.ascaleY-N+this.data.offsetScaleY)*i)/N),_.ashearY);0!=s&&(b=a.ashearY-G+this.data.offsetShearY,G+=(b-=360*(16384-(16384.499999999996-b/360|0)))*s),_.updateWorldTransformWithData(r,o,O,W,N,_.ashearX,G),++l}else if(this.data.relative)for(var e=this.mixRotate,t=this.mixX,z=this.mixY,n=this.mixScaleX,i=this.mixScaleY,s=this.mixShearY,U=0!=t||0!=z,u=(a=this.target).a,h=a.b,c=a.c,L=0<u*(d=a.d)-h*c?xy.degRad:-xy.degRad,j=this.data.offsetRotation*L,H=this.data.offsetShearY*L,Q=this.bones,l=0,V=this.bones.length;l<V;){var _=Q[l];if(0!=e&&(Y=_.a,Z=_.b,X=_.c,q=_.d,3.1415927<(p=Math.atan2(c,u)+j)?p-=6.2831854:p<-3.1415927&&(p+=6.2831854),p*=e,m=Math.cos(p),g=Math.sin(p),_.a=m*Y-g*X,_.b=m*Z-g*q,_.c=g*Y+m*X,_.d=g*Z+m*q),U){if((f=this.temp).x=this.data.offsetX,f.y=this.data.offsetY,null==f)throw tl.thrown(new Dw("local cannot be null."));r=f.x,o=f.y;f.x=r*a.a+o*a.b+a.worldX,f.y=r*a.c+o*a.d+a.worldY,_.worldX+=f.x*t,_.worldY+=f.y*z}0!=n&&(A=(Math.sqrt(u*u+c*c)-1+this.data.offsetScaleX)*n+1,_.a*=A,_.c*=A),0!=i&&(x=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleY)*i+1,_.b*=x,_.d*=x),0<s&&(3.1415927<(b=Math.atan2(d,h)-Math.atan2(c,u))?b-=6.2831854:b<-3.1415927&&(b+=6.2831854),w=_.b,y=_.d,b=Math.atan2(y,w)+(b-1.57079635+H)*s,J=Math.sqrt(w*w+y*y),_.b=Math.cos(b)*J,_.d=Math.sin(b)*J),null==(v=_.parent)?(_.ax=_.worldX-_.skeleton.x,_.ay=_.worldY-_.skeleton.y,C=_.a,S=_.b,k=_.c,M=_.d,_.arotation=Math.atan2(k,C)*xy.radDeg,_.ascaleX=Math.sqrt(C*C+k*k),_.ascaleY=Math.sqrt(S*S+M*M),_.ashearX=0,_.ashearY=Math.atan2(C*S+k*M,C*M-S*k)*xy.radDeg):(I=v.a,B=v.b,T=v.c,E=1/(I*($=v.d)-B*T),ee=_.worldX-v.worldX,te=_.worldY-v.worldY,_.ax=ee*$*E-te*B*E,_.ay=te*I*E-ee*T*E,F=(ne=E*$)*_.a-(se=E*B)*_.c,D=ne*_.b-se*_.d,R=(ie=E*I)*_.c-(ae=E*T)*_.a,P=ie*_.d-ae*_.b,_.ashearX=0,_.ascaleX=Math.sqrt(F*F+R*R),1e-4<_.ascaleX?(_.ascaleY=(le=F*P-D*R)/_.ascaleX,_.ashearY=Math.atan2(F*D+R*P,le)*xy.radDeg,_.arotation=Math.atan2(R,F)*xy.radDeg):(_.ascaleX=0,_.ascaleY=Math.sqrt(D*D+P*P),_.ashearY=0,_.arotation=90-Math.atan2(P,D)*xy.radDeg)),++l}else for(var d,e=this.mixRotate,t=this.mixX,z=this.mixY,n=this.mixScaleX,i=this.mixScaleY,s=this.mixShearY,U=0!=t||0!=z,u=(a=this.target).a,h=a.b,c=a.c,L=0<u*(d=a.d)-h*c?xy.degRad:-xy.degRad,j=this.data.offsetRotation*L,H=this.data.offsetShearY*L,Q=this.bones,l=0,V=this.bones.length;l<V;){var Y,Z,X,q,p,m,g,f,A,x,w,y,K,b,J,v,C,S,k,M,I,B,T,$,E,ee,te,ne,ie,se,ae,F,D,R,P,le,_=Q[l];if(0!=e&&(Y=_.a,Z=_.b,X=_.c,q=_.d,3.1415927<(p=Math.atan2(c,u)-Math.atan2(X,Y)+j)?p-=6.2831854:p<-3.1415927&&(p+=6.2831854),p*=e,m=Math.cos(p),g=Math.sin(p),_.a=m*Y-g*X,_.b=m*Z-g*q,_.c=g*Y+m*X,_.d=g*Z+m*q),U){if((f=this.temp).x=this.data.offsetX,f.y=this.data.offsetY,null==f)throw tl.thrown(new Dw("local cannot be null."));r=f.x,o=f.y;f.x=r*a.a+o*a.b+a.worldX,f.y=r*a.c+o*a.d+a.worldY,_.worldX+=(f.x-_.worldX)*t,_.worldY+=(f.y-_.worldY)*z}0!=n&&(0!=(A=Math.sqrt(_.a*_.a+_.c*_.c))&&(A=(A+(Math.sqrt(u*u+c*c)-A+this.data.offsetScaleX)*n)/A),_.a*=A,_.c*=A),0!=i&&(0!=(x=Math.sqrt(_.b*_.b+_.d*_.d))&&(x=(x+(Math.sqrt(h*h+d*d)-x+this.data.offsetScaleY)*i)/x),_.b*=x,_.d*=x),0<s&&(w=_.b,y=_.d,K=Math.atan2(y,w),3.1415927<(b=Math.atan2(d,h)-Math.atan2(c,u)-(K-Math.atan2(_.c,_.a)))?b-=6.2831854:b<-3.1415927&&(b+=6.2831854),b=K+(b+H)*s,J=Math.sqrt(w*w+y*y),_.b=Math.cos(b)*J,_.d=Math.sin(b)*J),null==(v=_.parent)?(_.ax=_.worldX-_.skeleton.x,_.ay=_.worldY-_.skeleton.y,C=_.a,S=_.b,k=_.c,M=_.d,_.arotation=Math.atan2(k,C)*xy.radDeg,_.ascaleX=Math.sqrt(C*C+k*k),_.ascaleY=Math.sqrt(S*S+M*M),_.ashearX=0,_.ashearY=Math.atan2(C*S+k*M,C*M-S*k)*xy.radDeg):(I=v.a,B=v.b,T=v.c,E=1/(I*($=v.d)-B*T),ee=_.worldX-v.worldX,te=_.worldY-v.worldY,_.ax=ee*$*E-te*B*E,_.ay=te*I*E-ee*T*E,F=(ne=E*$)*_.a-(se=E*B)*_.c,D=ne*_.b-se*_.d,R=(ie=E*I)*_.c-(ae=E*T)*_.a,P=ie*_.d-ae*_.b,_.ashearX=0,_.ascaleX=Math.sqrt(F*F+R*R),1e-4<_.ascaleX?(_.ascaleY=(le=F*P-D*R)/_.ascaleX,_.ashearY=Math.atan2(F*D+R*P,le)*xy.radDeg,_.arotation=Math.atan2(R,F)*xy.radDeg):(_.ascaleX=0,_.ascaleY=Math.sqrt(D*D+P*P),_.ashearY=0,_.arotation=90-Math.atan2(P,D)*xy.radDeg)),++l}},__class__:Hw},function(e){this.local=!1,this.relative=!1,this.offsetShearY=0,this.offsetScaleY=0,this.offsetScaleX=0,this.offsetY=0,this.offsetX=0,this.offsetRotation=0,this.mixShearY=0,this.mixScaleY=0,this.mixScaleX=0,this.mixY=0,this.mixX=0,this.mixRotate=0,this.bones=[],Fg.call(this,e)}),Zw=((i["spine.TransformConstraintData"]=Yw).__name__="spine.TransformConstraintData",Yw.__super__=Fg,Yw.prototype=e(Fg.prototype,{__class__:Yw}),(i["spine.attachments.AttachmentLoader"]=Ng).__name__="spine.attachments.AttachmentLoader",Ng.__isInterface__=!0,Ng.prototype={__class__:Ng},function(e){if(null==e)throw tl.thrown(new Dw("atlas cannot be null."));this.atlas=e}),Xw=((i["spine.attachments.AtlasAttachmentLoader"]=Zw).__name__="spine.attachments.AtlasAttachmentLoader",Zw.__interfaces__=[Ng],Zw.prototype={newRegionAttachment:function(e,t,n){var i=this.atlas.findRegion(n);if(null==i)throw tl.thrown(new iy("Region not found in atlas: "+n+" (region attachment: "+t+")"));n=new ty(t);if(null==i)throw tl.thrown(new Dw("region cannot be null."));n.region=i;t=n.uvs;return i instanceof oy&&90==i.degrees?(t[4]=i.u,t[5]=i.v2,t[6]=i.u,t[7]=i.v,t[0]=i.u2,t[1]=i.v,t[2]=i.u2,t[3]=i.v2):(t[2]=i.u,t[3]=i.v2,t[4]=i.u,t[5]=i.v,t[6]=i.u2,t[7]=i.v,t[0]=i.u2,t[1]=i.v2),n},newMeshAttachment:function(e,t,n){var i=this.atlas.findRegion(n);if(null==i)throw tl.thrown(new iy("Region not found in atlas: "+n+" (mesh attachment: "+t+")"));n=new Jw(t);return n.setRegion(i),n},newBoundingBoxAttachment:function(e,t){return new qw(t)},newClippingAttachment:function(e,t){return new Kw(t)},newPathAttachment:function(e,t){return new $w(t)},newPointAttachment:function(e,t){return new ey(t)},__class__:Zw},(i["spine.attachments.Attachment"]=Gg).__name__="spine.attachments.Attachment",Gg.prototype={toString:function(){return this.name},__class__:Gg},function(e){this.deformAttachment=null,this.worldVerticesLength=0,this.id=Xw.nextID++,Gg.call(this,e)}),qw=((i["spine.attachments.VertexAttachment"]=Xw).__name__="spine.attachments.VertexAttachment",Xw.__super__=Gg,Xw.prototype=e(Gg.prototype,{__class__:Xw}),function(e){this.color=new sy(.38,.94,0,1),Xw.call(this,e)}),Kw=((i["spine.attachments.BoundingBoxAttachment"]=qw).__name__="spine.attachments.BoundingBoxAttachment",qw.__super__=Xw,qw.prototype=e(Xw.prototype,{__class__:qw}),function(e){this.color=new sy(.2275,.2275,.8078,1),Xw.call(this,e)}),Jw=((i["spine.attachments.ClippingAttachment"]=Kw).__name__="spine.attachments.ClippingAttachment",Kw.__super__=Xw,Kw.prototype=e(Xw.prototype,{__class__:Kw}),function(e){this.height=0,this.width=0,this.hullLength=0,this.color=new sy(1,1,1,1),this.uvs=null,Xw.call(this,e)}),$w=((i["spine.attachments.MeshAttachment"]=Jw).__name__="spine.attachments.MeshAttachment",Jw.__super__=Xw,Jw.prototype=e(Xw.prototype,{setRegion:function(e){if(null==e)throw tl.thrown(new Dw("region cannot be null."));this.region=e},getRegion:function(){if(null==this.region)throw tl.thrown(new ny("Region has not been set: "+el.string(this)));return this.region},updateUVs:function(){var e=this.regionUVs;if(null==this.uvs||this.uvs.length!=e.length){var t=e.length,n=0|(t=null==t?0:t),i=[];if(0<t){var s=i.length;if(n<s)i.splice(n,n-s);else if(s<n)for(;s<n;)i.push(0),++s}this.uvs=i}var a=this.uvs,l=a.length,r=0,o=0,u=0,h=0;if(this.region instanceof oy){var r=this.region.u,o=this.region.v,t=this.region,c=t.page.width,_=t.page.height,d=t.degrees;if(90==d){r-=(t.originalHeight-t.offsetY-t.packedWidth)/c,o-=(t.originalWidth-t.offsetX-t.packedHeight)/_;for(var u=t.originalHeight/c,h=t.originalWidth/_,p=0;p<l;)a[p]=r+e[p+1]*u,a[p+1]=o+(1-e[p])*h,p+=2;return}if(180==d){r-=(t.originalWidth-t.offsetX-t.packedWidth)/c,o-=t.offsetY/_,u=t.originalWidth/c,h=t.originalHeight/_;for(var m=0;m<l;)a[m]=r+(1-e[m])*u,a[m+1]=o+(1-e[m+1])*h,m+=2;return}if(270==d){r-=t.offsetY/c,o-=t.offsetX/_,u=t.originalHeight/c,h=t.originalWidth/_;for(var g=0;g<l;)a[g]=r+(1-e[g+1])*u,a[g+1]=o+e[g]*h,g+=2;return}r-=t.offsetX/c,o-=(t.originalHeight-t.offsetY-t.packedHeight)/_,u=t.originalWidth/c,h=t.originalHeight/_}else null==this.region?(r=o=0,u=h=1):(r=this.region.u,o=this.region.v,u=this.region.u2-r,h=this.region.v2-o);for(p=0;p<l;)a[p]=r+e[p]*u,a[p+1]=o+e[p+1]*h,p+=2},__class__:Jw}),function(e){this.color=new sy(1,.5,0,1),this.constantSpeed=!1,this.closed=!1,Xw.call(this,e)}),ey=((i["spine.attachments.PathAttachment"]=$w).__name__="spine.attachments.PathAttachment",$w.__super__=Xw,$w.prototype=e(Xw.prototype,{__class__:$w}),function(e){this.color=new sy(.9451,.9451,0,1),this.rotation=0,this.y=0,this.x=0,Gg.call(this,e)}),ty=((i["spine.attachments.PointAttachment"]=ey).__name__="spine.attachments.PointAttachment",ey.__super__=Gg,ey.prototype=e(Gg.prototype,{__class__:ey}),function(e){this.color=new sy(1,1,1,1);var t=[],n=t.length;if(8<n)t.splice(8,8-n);else if(n<8)for(;n<8;)t.push(0),++n;if(this.offset=t,8<(n=(t=[]).length))t.splice(8,8-n);else if(n<8)for(;n<8;)t.push(0),++n;this.uvs=t,this.height=0,this.width=0,this.rotation=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,Gg.call(this,e)}),ny=((i["spine.attachments.RegionAttachment"]=ty).__name__="spine.attachments.RegionAttachment",ty.__super__=Gg,ty.prototype=e(Gg.prototype,{__class__:ty}),function(e){Sg.call(this,e=null==e?"":e),this.name="IllegalStateException"}),iy=((i["spine.support.error.IllegalStateException"]=ny).__name__="spine.support.error.IllegalStateException",ny.__super__=Sg,ny.prototype=e(Sg.prototype,{__class__:ny}),function(e){Sg.call(this,e=null==e?"":e),this.name="RuntimeException"}),sy=((i["spine.support.error.RuntimeException"]=iy).__name__="spine.support.error.RuntimeException",iy.__super__=Sg,iy.prototype=e(Sg.prototype,{__class__:iy}),function(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0),this.r=e=null==e?0:e,this.g=t,this.b=n,this.a=i}),ay=((i["spine.support.graphics.Color"]=sy).__name__="spine.support.graphics.Color",sy.valueOf=function(e){return"#"==e.charAt(0)&&(e=e.substring(1)),"0x"==Jn.substr(e,0,2)&&(e=e.substring(2)),new sy(el.parseInt("0x"+e.substring(0,2))/255,el.parseInt("0x"+e.substring(2,4))/255,el.parseInt("0x"+e.substring(4,6))/255,(8!=e.length?255:el.parseInt("0x"+e.substring(6,8)))/255)},sy.valueOfIntoColor=function(e,t){"#"==e.charAt(0)&&(e=e.substring(1)),"0x"==Jn.substr(e,0,2)&&(e=e.substring(2));var n=el.parseInt("0x"+e.substring(0,2)),i=el.parseInt("0x"+e.substring(2,4)),s=el.parseInt("0x"+e.substring(4,6)),e=8!=e.length?255:el.parseInt("0x"+e.substring(6,8));return null==t?t=new sy(n/255,i/255,s/255,e/255):(t.r=n/255,t.g=i/255,t.b=s/255,t.a=e/255),t},sy.prototype={__class__:sy},function(e,t){this.regions=[],this.pages=[],null!=e&&this.load(null==e?"null":""+e,t)}),ly=((i["spine.support.graphics.TextureAtlas"]=ay).__name__="spine.support.graphics.TextureAtlas",ay.prototype={load:function(e,t){if(null==t)throw tl.thrown(new Dw("textureLoader cannot be null."));this.textureLoader=t;for(var n=new ly(e),i=[null,null,null,null],s=null;;){var a=n.readLine();if(null==a)break;if(0==(a=n.trim(a)).length)s=null;else if(null==s){(s=new ry).name=a,s.uWrap=uy.clampToEdge,s.vWrap=uy.clampToEdge;for(var l=n.nextLineKey();null!=l;){switch(l){case"filter":n.readTuple(i),s.minFilter=i[0],s.magFilter=i[1];break;case"format":s.format=n.readValue();break;case"repeat":var r=n.readValue();"x"==r?s.uWrap=uy.repeat:"y"==r?s.vWrap=uy.repeat:"xy"==r&&(s.uWrap=s.vWrap=uy.repeat);break;case"scale":n.readTuple(i),s.scale=parseFloat(i[0]);break;case"size":n.readTuple(i),s.width=el.parseInt(i[0]),s.height=el.parseInt(i[1]);break;default:n.readLine()}l=n.nextLineKey()}null==s.format&&(s.format="rgba8888"),t.loadPage(s,a),this.pages[this.pages.length]=s}else{for(var o=new oy,u=(o.name=a,o.page=s,0),h=0,c=0,_=0,d=0,p=0,m=n.nextLineKey();null!=m;){switch(m){case"bounds":n.readTuple(i),u=el.parseInt(i[0]),h=el.parseInt(i[1]),c=el.parseInt(i[2]),_=el.parseInt(i[3]);break;case"index":o.index=el.parseInt(n.readValue());break;case"offset":n.readTuple(i),o.offsetX=el.parseInt(i[0]),o.offsetY=el.parseInt(i[1]);break;case"offsets":n.readTuple(i),o.offsetX=el.parseInt(i[0]),o.offsetY=el.parseInt(i[1]),d=el.parseInt(i[2]),p=el.parseInt(i[3]);break;case"orig":n.readTuple(i),d=el.parseInt(i[0]),p=el.parseInt(i[1]);break;case"pad":n.readTuple(i),o.pads=[el.parseInt(i[0]),el.parseInt(i[1]),el.parseInt(i[2]),el.parseInt(i[3])];break;case"rotate":var g=n.readValue();o.degrees="true"==g||"90"==g?90:0;break;case"size":n.readTuple(i),c=el.parseInt(i[0]),_=el.parseInt(i[1]);break;case"split":n.readTuple(i),o.splits=[el.parseInt(i[0]),el.parseInt(i[1]),el.parseInt(i[2]),el.parseInt(i[3])];break;case"xy":n.readTuple(i),u=el.parseInt(i[0]),h=el.parseInt(i[1]);break;default:n.readLine()}m=n.nextLineKey()}o.u=u/s.width,o.v=h/s.height,90==o.degrees?(o.u2=(u+_)/s.width,o.v2=(h+c)/s.height):(o.u2=(u+c)/s.width,o.v2=(h+_)/s.height),o.x=u,o.y=h,o.width=0|Math.abs(c),o.height=0|Math.abs(_),o.originalWidth=0!=d?d:o.width,o.originalHeight=0!=p?p:o.height,90==o.degrees?(o.packedWidth=o.height,o.packedHeight=o.width):(o.packedWidth=o.width,o.packedHeight=o.height),t.loadRegion(o),this.regions[this.regions.length]=o}}},findRegion:function(e){for(var t=0,n=this.regions.length;t<n;){if(this.regions[t].name==e)return this.regions[t];++t}return null},__class__:ay},function(e){this.lines=Ae.replace(Ae.replace(Ae.trim(e),"\r\n","\n"),"\r","\n").split("\n"),this.index=0}),ry=((i["spine.support.graphics.Reader"]=ly).__name__="spine.support.graphics.Reader",ly.prototype={trim:function(e){return Ae.trim(e)},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},nextLineKey:function(){var e,t;return!(this.index>=this.lines.length)&&-1!=(t=(e=this.lines[this.index]).indexOf(":"))?Ae.trim(e.substring(0,t)):null},readValue:function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw tl.thrown(new Sg("Invalid line: "+e));return this.trim(e.substring(t+1))},readTuple:function(e){var t=this.readLine(),n=t.indexOf(":");if(-1==n)throw tl.thrown(new Sg("Invalid line: "+t));for(var i=0,s=n+1;i<3;){var a=t.indexOf(",",s);if(-1==a)break;e[i]=this.trim(Jn.substr(t,s,a-s)),s=a+1,++i}return e[i]=this.trim(t.substring(s)),i+1},__class__:ly},function(){this.scale=1,this.height=0,this.width=0}),oy=((i["spine.support.graphics.AtlasPage"]=ry).__name__="spine.support.graphics.AtlasPage",ry.prototype={__class__:ry},(i["spine.support.graphics.TextureRegion"]=Ug).__name__="spine.support.graphics.TextureRegion",Ug.prototype={__class__:Ug},function(){this.degrees=0,this.index=-1,this.originalHeight=0,this.originalWidth=0,this.offsetY=0,this.offsetX=0,this.packedHeight=0,this.packedWidth=0,this.height=0,this.width=0,this.y=0,this.x=0,Ug.call(this)}),uy=((i["spine.support.graphics.AtlasRegion"]=oy).__name__="spine.support.graphics.AtlasRegion",oy.__super__=Ug,oy.prototype=e(Ug.prototype,{__class__:oy}),function(e,t){this.ordinal=e,this.name=t}),hy=((i["spine.support.graphics.TextureWrap"]=uy).__name__="spine.support.graphics.TextureWrap",uy.prototype={__class__:uy},function(){}),cy=((i["spine.support.math.MathUtils"]=hy).__name__="spine.support.math.MathUtils",function(e,t){null==t&&(t=0),null==e&&(e=0),this.y=0,this.x=0,this.x=e,this.y=t}),_y=((i["spine.support.math.Vector2"]=cy).__name__="spine.support.math.Vector2",cy.prototype={__class__:cy},(i["spine.support.utils._AnimationStateMap.Entry"]=Lg).__name__="spine.support.utils._AnimationStateMap.Entry",Lg.prototype={__class__:Lg},{}),dy=(_y.copy=function(e,t,n,i,s){for(var a,l=t,r=i,o=s+t;l<o;)a=e[l],n[r]=a,++l,++r},{}),py=(dy.__properties__={get_size:"get_size"},dy.add=function(e,t){var n=null,i=t.hashCode,s=e.h[i];if(null==s)e.h[i]=s=[];else for(var a=0,l=s.length;a<l;){var r=s[a++];if(null!=(h=t)&&r.slotIndex==(c=h).slotIndex&&r.name==c.name){n=r;break}}for(var o=0,u=!1,a=0,l=s;a<l.length;){var h,c,r=l[a];if(++a,null!=(h=t)&&r.slotIndex==(c=h).slotIndex&&r.name==c.name){s[o]=t,u=!0;break}++o}return u||s.push(t),null==n},dy.orderedItems=function(e){for(var t=[],n=e.iterator();n.hasNext();)for(var i=n.next(),s=0,a=i.length;s<a;)t.push(i[s++]);return t},dy.get_size=function(e){for(var t=0,n=e.iterator();n.hasNext();)for(var i=0,s=n.next().length;i<s;)++i,++t;return t},{}),my=(py.fill=function(e,t,n,i){for(var s=t;s<n;)e[s++]=i},function(e,t,n){this.data=e,this.index=t,this.keys=n}),gy=((i["spine.support.utils.JsonChild"]=my).__name__="spine.support.utils.JsonChild",my.__interfaces__=[H],my.prototype={has:function(e){return null!=this.get(e)},require:function(e){return this.get(e)},get:function(e){return Object.prototype.hasOwnProperty.call(this.data[this.index],e)?new Y(X.field(this.data[this.index],e)):null},getAtIndex:function(e){return this.data[this.index]instanceof Array?new my(this.data[this.index],e):null},getChild:function(e){e=X.field(this.data[this.index],e);return null==e?null:new Y(e).get_child()},getString:function(e,t){return Object.prototype.hasOwnProperty.call(this.data[this.index],e)?X.field(this.data[this.index],e):t},getFloat:function(e,t){return null==t&&(t=0),"number"==typeof e&&(0|e)===e?this.data[this.index]instanceof Array?this.data[this.index][e]:0:Object.prototype.hasOwnProperty.call(this.data[this.index],e)?X.field(this.data[this.index],e):t},getInt:function(e,t){return null==t&&(t=0),Object.prototype.hasOwnProperty.call(this.data[this.index],e)?X.field(this.data[this.index],e):t},getBoolean:function(e,t){return null==t&&(t=!1),Object.prototype.hasOwnProperty.call(this.data[this.index],e)?X.field(this.data[this.index],e):t},asString:function(){return this.data[this.index]},asFloat:function(){return this.data[this.index]},asInt:function(){return this.data[this.index]},isString:function(){return"string"==typeof this.data[this.index]},get_next:function(){return this.index<this.data.length-1?new my(this.data,this.index+1,this.keys):null},get_name:function(){return null!=this.keys?this.keys[this.index]:null},get_size:function(){return this.data[this.index].length},get_child:function(){var e=this.data[this.index];if(null==e)return null;if(e instanceof Array)return new my(e,0);for(var t=[],n=[],i=0,s=X.fields(e);i<s.length;){var a=s[i];++i,t.push(a),n.push(X.field(e,a))}return 0==t.length?null:new my(n,0,t)},asFloatArray:function(){return this.data[this.index]},asShortArray:function(){return this.data[this.index]},__class__:my,__properties__:{get_child:"get_child",get_size:"get_size",get_name:"get_name",get_next:"get_next"}},{}),fy=(gy.addAll=function(e,t){for(var n=!1,i=0,s=t.length;i<s;){var a=t[i++];-1==e.indexOf(a)&&(n=!0,e.push(a))}return n},function(e,t){null==e&&(e=""),null!=t&&(""!=e?e+=" "+el.string(t):e=""+el.string(t)),Sg.call(this,e),this.name="SerializationException"}),Ay=((i["spine.support.utils.SerializationException"]=fy).__name__="spine.support.utils.SerializationException",fy.__super__=Sg,fy.prototype=e(Sg.prototype,{__class__:fy}),function(){this.snapshots=[],this.snapshotIndex=-1,this.array=[]}),xy=((i["spine.support.utils.SnapshotArray"]=Ay).__name__="spine.support.utils.SnapshotArray",Ay.prototype={begin:function(){this.snapshotIndex++;var e=this.snapshots[this.snapshotIndex];if(null==e)e=[].concat(this.array),this.snapshots[this.snapshotIndex]=e;else for(var t=this.array.length,n=e.length,i=(t<n?e.splice(t,t-n):n<t&&(e[t-1]=null),0),s=this.array.length;i<s;){var a=i++;e[a]=this.array[a]}return e},end:function(){for(var e=this.snapshots[this.snapshotIndex],t=(this.snapshotIndex--,e.length),n=e,i=0;i<t;)n[i++]=null},__class__:Ay},function(){}),wy=((i["spine.utils.SpineUtils"]=xy).__name__="spine.utils.SpineUtils",function(e,t){Ig.call(this,e,t)}),yy=((i["spine.utils._Triangulator.PolygonPool"]=wy).__name__="spine.utils._Triangulator.PolygonPool",wy.__super__=Ig,wy.prototype=e(Ig.prototype,{newObject:function(){return[]},__class__:wy}),function(e,t){Ig.call(this,e,t)}),il=((i["spine.utils._Triangulator.IndicesPool"]=yy).__name__="spine.utils._Triangulator.IndicesPool",yy.__super__=Ig,yy.prototype=e(Ig.prototype,{newObject:function(){return[]},__class__:yy}),function(){}),by=((i["thx.Arrays"]=il).__name__="thx.Arrays",il.count_Null_Int=function(e){var n=new Je;return il.each(e,function(e){var t=n.h.hasOwnProperty(e)?n.h[e]+1:1;n.h[e]=t}),n},il.groupByIndex_gasm_heaps_types_Vec_Int=function(e,t){for(var n=new Je,i=0,s=e.length;i<s;){var a=i++,l=t(a),r=n.h[l];null==r?(r=[e[a]],n.h[l]=r):r.push(e[a])}return n},il.append=function(e,t){return e.push(t),e},il.applyIndexes=function(e,t,n){if(null==n&&(n=!1),t.length!=e.length)throw new Ey("`Arrays.applyIndexes` can only be applied to two arrays with the same length",null,{fileName:"thx/Arrays.hx",lineNumber:55,className:"thx.Arrays",methodName:"applyIndexes"});var i=[];if(n)for(var s=Oy.createInt(),a=0,l=e.length;a<l;){for(var r=t[o=a++];s.h.hasOwnProperty(r);)++r;Oy.add(s,r),i[r]=e[o]}else for(var o,a=0,l=e.length;a<l;)i[t[o=a++]]=e[o];return i},il.each=function(e,t){for(var n=0,i=e.length;n<i;)t(e[n++])},il.eachi=function(e,t){for(var n=0,i=e.length;n<i;){var s=n++;t(e[s],s)}},il.all=function(e,t){for(var n=0,i=e.length;n<i;)if(!t(e[n++]))return!1;return!0},il.any=function(e,t){for(var n=0,i=e.length;n<i;)if(t(e[n++]))return!0;return!1},il.at=function(e,t){for(var n=t,i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++;i[l]=e[n[l]]}return i},il.commonsFromStart=function(e,t,n){null==n&&(n=Dy.equality);for(var i=0,s=0,a=il.zip(e,t);s<a.length;){var l=a[s];if(++s,!n(l._0,l._1))break;++i}return e.slice(0,i)},il.containsExact=function(e,t,n){if(null==n)return 0<=Vy.indexOf(e,t);for(var i=0,s=e.length;i<s;)if(n(e[i++],t))return!0;return!1},il.containsEq=function(e,t,n){for(var i=0,s=e.length;i<s;)if(n(e[i++],t))return!0;return!1},il.containsAllExact=function(e,t,n){for(var i=g1(t);i.hasNext();)if(!il.containsExact(e,i.next(),n))return!1;return!0},il.containsAnyExact=function(e,t,n){for(var i=g1(t);i.hasNext();)if(il.containsExact(e,i.next(),n))return!0;return!1},il.fromItem=function(e){return[e]},il.distinct=function(e,n){var t=[];if(e.length<=1)return e.slice();null==n&&(n=Dy.equality);for(var i=0,s=e;i<s.length;){var a=[s[i++]];il.any(t,(t=>function(e){return n(e,t[0])})(a))||t.push(a[0])}return t},il.equals=function(e,t,n){if(null==e||null==t||e.length!=t.length)return!1;null==n&&(n=Dy.equality);for(var i=0,s=e.length;i<s;){var a=i++;if(!n(e[a],t[a]))return!1}return!0},il.extract=function(e,t){for(var n=0,i=e.length;n<i;){var s=n++;if(t(e[s]))return e.splice(s,1)[0]}return null},il.filterNull=function(e){for(var t=[],n=0,i=e;n<i.length;){var s=i[n++];null!=s&&t.push(s)}return t},il.find=function(e,t){for(var n=0,i=e;n<i.length;){var s=i[n++];if(t(s))return s}return null},il.findi=function(e,t){for(var n=0,i=e.length;n<i;){var s=n++;if(t(e[s],s))return e[s]}return null},il.findMap=function(e,t){for(var n=0,i=e;n<i.length;){var s=t(i[n++]);if(!Qy.isNone(s))return s}return OA.None},il.filterMap=function(e,t){for(var n=[],i=0,s=e;i<s.length;){var a=t(s[i++]);0===a._hx_index&&n.push(a.v)}return n},il.findIndex=function(e,t){for(var n=0,i=e.length;n<i;){var s=n++;if(t(e[s]))return s}return-1},il.findLast=function(e,t){for(var n,i=e.length,s=0;s<i;)if(t(e[n=i-s++-1]))return e[n];return null},il.groupByAppend=function(e,t,n){for(var i=0,s=e.length;i<s;){var a=e[i++],l=t(a),r=n.get(l);null==r?n.set(l,[a]):r.push(a)}return n},il.order=function(e,t){e=e.slice();return e.sort(t),e},il.pushIf=function(e,t,n){return t&&e.push(n),e},il.reduce=function(e,t,n){for(var i=0,s=e;i<s.length;)n=t(n,s[i++]);return n},il.reducei=function(e,t,n){for(var i=0,s=e.length;i<s;){var a=i++;n=t(n,e[a],a)}return n},il.splitBy=function(e,t){for(var n=[],i=e.length,s=(i<=t&&(t=i),0),a=Math.ceil(e.length/t);s<a;){var l=s++;n.push(e.slice(l*t,(1+l)*t))}return n},il.zip=function(e,t){for(var n=e.length,i=t.length,s=[],a=0,l=n<i?n:i;a<l;){var r=a++;s.push({_0:e[r],_1:t[r]})}return s},il.zip3=function(e,t,n){for(var i=vy.min([e.length,t.length,n.length]),s=[],a=0;a<i;){var l=a++;s.push({_0:e[l],_1:t[l],_2:n[l]})}return s},il.zip4=function(e,t,n,i){for(var s=vy.min([e.length,t.length,n.length,i.length]),a=[],l=0;l<s;){var r=l++;a.push({_0:e[r],_1:t[r],_2:n[r],_3:i[r]})}return a},il.maxBy=function(e,t){var n;return 0==e.length?OA.None:(n=t,OA.Some(il.reduce(e,function(e,t){return Cy.max(n,e,t)},e[0])))},il.minBy=function(e,t){var n;return 0==e.length?OA.None:(n=t,OA.Some(il.reduce(e,function(e,t){return Cy.min(n,e,t)},e[0])))},il.pad=function(e,t,n){for(var i=t-e.length,s=[],a=0;a<i;)++a,s.push(n);return e.concat(s)},il.fill=function(e,t){for(var n=e,i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++,r=n[l];i[l]=null==r?t:r}return i},function(){}),vy=((i["thx.ArrayFloats"]=by).__name__="thx.ArrayFloats",by.sum=function(e){return il.reduce(e,function(e,t){return e+t},0)},function(){}),Cy=((i["thx.ArrayInts"]=vy).__name__="thx.ArrayInts",vy.max=function(e){return Qy.get(il.maxBy(e,Ry.order))},vy.min=function(e){return Qy.get(il.minBy(e,Ry.order))},vy.resize=function(e,t,n){for(null==n&&(n=0);e.length<t;)e.push(n);return e.splice(t,e.length-t),e},vy.sum=function(e){return il.reduce(e,function(e,t){return e+t},0)},(i["thx.IAssertBehavior"]=jg).__name__="thx.IAssertBehavior",jg.__isInterface__=!0,jg.prototype={__class__:jg},(i["thx.DefaultAssertBehavior"]=Hg).__name__="thx.DefaultAssertBehavior",Hg.__interfaces__=[jg],Hg.prototype={success:function(e){},fail:function(e,t){throw new Ny(e,t)},__class__:Hg},(i["thx.Assert"]=Yg).__name__="thx.Assert",Yg.isTrue=function(e,t,n){e?Yg.behavior.success(n):Yg.behavior.fail(t,n)},(i["thx.bigint.BigIntImpl"]=Zg).__name__="thx.bigint.BigIntImpl",Zg.__isInterface__=!0,Zg.prototype={__class__:Zg},(i["thx.bigint.Small"]=Xg).__name__="thx.bigint.Small",Xg.__interfaces__=[Zg],Xg.prototype={add:function(e){return this.isZero()?e:e.isZero()?this:this.sign!=e.sign?this.subtract(e.negate()):e.isSmall?this.addSmall(e):this.addBig(e)},addSmall:function(e){var t;return My.isPrecise(this.value+e.value)?new Xg(this.value+e.value):(e=e.value,t=My.smallToArray(e<0?-e:e),e=this.value,new Iy(My.addSmall(t,e<0?-e:e),this.sign))},addBig:function(e){var t=this.value;return new Iy(My.addSmall(e.value,t<0?-t:t),this.sign)},subtract:function(e){return this.isZero()?e.negate():e.isZero()?this:this.sign!=e.sign?this.add(e.negate()):e.isSmall?this.subtractSmall(e):this.subtractBig(e)},subtractSmall:function(e){return new Xg(this.value-e.value)},subtractBig:function(e){var t;return e.compareToAbsSmall(this)<0?new Xg(this.value-e.toInt()):(t=this.value,My.subtractSmall(e.value,t<0?-t:t,0<=this.value))},divide:function(e){return this.divMod(e).quotient},divMod:function(e){if(e.isZero())throw new Ey("division by zero",null,{fileName:"thx/bigint/Small.hx",lineNumber:71,className:"thx.bigint.Small",methodName:"divMod"});return e.isSmall?this.divModSmall(e):this.divModBig(e)},divModSmall:function(e){var t=this.value/e.value;return{quotient:new Xg(t<0?Math.ceil(t):Math.floor(t)),remainder:new Xg(this.value%e.value)}},divModBig:function(e){var t=this.value;return new Iy(My.smallToArray(t<0?-t:t),this.value<0).divModBig(e)},multiply:function(e){return e.isSmall?this.multiplySmall(e):this.multiplyBig(e)},multiplySmall:function(e){var t,n;return My.isPrecise(this.value*e.value)?new Xg(this.value*e.value):(n=e.value,t=My.smallToArray(n<0?-n:n),n=(n=this.value)<0?-n:n,new Iy(n<1e7?My.multiplySmall(t,n):My.multiplyLong(t,My.smallToArray(n)),this.sign!=e.sign))},multiplyBig:function(e){var t=this.value;return new Iy(My.multiplyLong(e.value,My.smallToArray(t<0?-t:t)),this.sign!=e.sign)},abs:function(){var e=this.value;return new Xg(e<0?-e:e)},negate:function(){return new Xg(-this.value)},next:function(){return this.addSmall(Xg.one)},pow:function(e){if(this.isZero())return e.isZero()?Xg.one:this;if(this.isUnit())return!this.sign||e.isEven()?Xg.one:Xg.negativeOne;if(e.sign)return Xg.zero;var t;if(e.isSmall)return My.canPower(this.value,t=e.value)?new Xg(0|Math.pow(this.value,t)):(t=this.value,new Iy(My.smallToArray(t<0?-t:t),this.sign).pow(e));throw new Ey("The exponent "+el.string(e)+" is too large.",null,{fileName:"thx/bigint/Small.hx",lineNumber:133,className:"thx.bigint.Small",methodName:"pow"})},square:function(){var e;return My.isPrecise(this.value*this.value)?new Xg(this.value*this.value):(e=this.value,new Iy(My.square(My.smallToArray(e<0?-e:e)),!1))},isEven:function(){return 0==(1&this.value)},isZero:function(){return 0==this.value},isUnit:function(){var e=this.value;return 1==(e<0?-e:e)},compareTo:function(e){return this.sign!=e.sign?this.sign?-1:1:e.isSmall?this.compareToSmall(e):this.compareToBig(e)},compareToSmall:function(e){return Ry.compare(this.value,e.value)},compareToBig:function(e){var t=this.value;return My.compareToAbs(My.smallToArray(t<0?-t:t),e.value)*(this.sign?-1:1)},compareToAbs:function(e){return e.isSmall?this.compareToAbsSmall(e):this.compareToAbsBig(e)},compareToAbsSmall:function(e){var t=this.value,e=e.value;return Ry.compare(t<0?-t:t,e<0?-e:e)},compareToAbsBig:function(e){var t=this.value;return My.compareToAbs(My.smallToArray(t<0?-t:t),e.value)},toString:function(){return""+this.value},toStringWithBase:function(e){return this.value.toString(e)},__class__:Xg},{}),Sy=(Cy.max=function(e,t,n){switch(e(t,n)._hx_index){case 1:return t;case 0:case 2:return n}},Cy.min=function(e,t,n){switch(e(t,n)._hx_index){case 1:return n;case 0:case 2:return t}},fe["thx.OrderingImpl"]={__ename__:!0,__constructs__:null,LT:{_hx_name:"LT",_hx_index:0,__enum__:"thx.OrderingImpl",toString:o},GT:{_hx_name:"GT",_hx_index:1,__enum__:"thx.OrderingImpl",toString:o},EQ:{_hx_name:"EQ",_hx_index:2,__enum__:"thx.OrderingImpl",toString:o}}),ky=(Sy.__constructs__=[Sy.LT,Sy.GT,Sy.EQ],Sy.__empty_constructs__=[Sy.LT,Sy.GT,Sy.EQ],function(){}),My=((i["thx.bigint.Decimals"]=ky).__name__="thx.bigint.Decimals",ky.fromInt=function(e){return new By(My.fromInt(e),0)},ky.fromFloat=function(e){if(isFinite(e))return ky.parse(""+e);throw tl.thrown("Value is not a finite Float: "+e)},ky.parse=function(e){var t,n,i,s=(e=e.toLowerCase()).indexOf("e");return 0<s?(i=!1,t=e.substring(0,s),"-"==(s=e.substring(s+1)).substring(0,1)&&(i=!0,s=s.substring(1)),n=My.parseBase(s,10),n=Xg.ten.pow(n),i?ky.parse(t).divideWithScale(Ty.fromBigInt(n),el.parseInt(s)):ky.parse(t).multiply(Ty.fromBigInt(n))):(i=e.indexOf("."))<0?new By(My.parseBase(e,10),0):new By(My.parseBase(e.substring(0,i)+e.substring(i+1),10),e.length-i-1)},function(){}),Iy=((i["thx.bigint.Bigs"]=My).__name__="thx.bigint.Bigs",My.isPrecise=function(e){return-1e7<e&&e<1e7},My.canPower=function(e,t){if(0==e||0==t)return!0;var n,e=Math.abs(e),t=Math.abs(t);try{n=0|Math.pow(e,t)}catch(e){return CA.lastError=e,!1}return(0|Math.pow(n,1/t))==e&&My.isPrecise(n)},My.smallToArray=function(e){return Yg.isTrue(0<=e,"Bigs.smallToArray should always be non-negative: "+e,{fileName:"thx/bigint/Bigs.hx",lineNumber:62,className:"thx.bigint.Bigs",methodName:"smallToArray"}),e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]},My.arrayToSmall=function(e){My.trim(e);var t=e.length;if(t<4&&My.compareToAbs(e,My.MAX_BASE_ARR)<0)switch(t){case 0:return 0;case 1:return e[0];case 2:return e[0]+1e7*e[1];default:return e[0]+1e7*(e[1]+1e7*e[2])}return null},My.trim=function(e){for(;1<e.length&&0==e[e.length-1];)e.pop()},My.createArray=function(e){for(var t=new Array(e),n=0;n<e;)t[n++]=0;return t},My.createFloatArray=function(e){for(var t=new Array(e),n=0;n<e;)t[n++]=0;return t},My.add=function(e,t){for(var n,i=e.length,s=t.length,a=new Array(i),l=0,r=0;r<s;)n=e[r]+t[r]+l,a[r++]=n-1e7*(l=1e7<=n?1:0);for(;r<i;)n=e[r]+l,a[r++]=n-1e7*(l=1e7==n?1:0);return 0<l&&a.push(l),a},My.addAny=function(e,t){return e.length>=t.length?My.add(e,t):My.add(t,e)},My.addSmall=function(e,t){for(var n,i=e.length,s=new Array(i),a=0;a<i;)n=e[a]-1e7+t,t=Math.floor(n/1e7),s[a++]=n-1e7*t,++t;for(;0<t;)s[a++]=t%1e7,t=Math.floor(t/1e7);return s},My.compareToAbs=function(e,t){if(e.length!=t.length)return e.length>t.length?1:-1;for(var n=e.length;0<=--n;)if(e[n]!=t[n])return e[n]>t[n]?1:-1;return 0},My.subtract=function(e,t){for(var n,i=e.length,s=t.length,a=new Array(i),l=0,r=0;r<s;)l=(n=e[r]-l-t[r])<0?(n+=1e7,1):0,a[r++]=n;for(;r<i;){if(!((n=e[r]-l)<0)){a[r++]=n;break}n+=1e7,a[r++]=n}for(;r<i;)a[r]=e[r],++r;return My.trim(a),a},My.subtractAny=function(e,t,n){0<=My.compareToAbs(e,t)?i=My.subtract(e,t):(i=My.subtract(t,e),n=!n);var i,t=My.arrayToSmall(i);return null!=t?new Xg(t=n?-t:t):new Iy(i,n)},My.subtractSmall=function(e,t,n){for(var i=e.length,s=new Array(i),a=-t,l=0;l<i;){var r=l++,o=e[r]+a,a=Math.floor(o/1e7);s[r]=(1e7+(o%1e7|0))%1e7}t=My.arrayToSmall(s);return null!=t?new Xg(t=n?-t:t):new Iy(s,n)},My.multiplyLong=function(e,t){for(var n=e.length,i=t.length,s=My.createFloatArray(n+i),a=0;a<n;)for(var l=e[c=a++],r=0;r<i;){var o,u=r++,h=(o=l*t[u]+s[c+u])/1e7,h=o-1e7*(o=h<0?Math.ceil(h):Math.floor(h));s[c+u]=h<0?Math.ceil(h):Math.floor(h),s[c+u+1]+=o}for(var c,_=new Array(s.length),a=0,r=s.length;a<r;)_[c=a++]=0|s[c];return My.trim(_),_},My.multiplySmall=function(e,t){for(var n=e.length,i=new Array(n),s=0,a=0,l=t;a<n;){var r,o,s=(o=(r=s+e[a]*l)/1e7)<0?Math.ceil(o):Math.floor(o);i[a++]=r-1e7*s}for(;0<s;)i[a++]=s%1e7,s=(o=s/1e7)<0?Math.ceil(o):Math.floor(o);for(var u=new Array(i.length),h=0,c=i.length;h<c;)u[a=h++]=0|i[a];return My.trim(u),u},My.shiftLeft=function(e,t){for(var n=[];0<t--;)n.push(0);return n.concat(e)},My.multiplyKaratsuba=function(e,t){var n,i,s,a,l=e.length;return(n=(i=t.length)<l?l:i)<=400?My.multiplyLong(e,t):(n=Math.ceil(n/2),i=e.slice(n),l=e.slice(0,n),e=t.slice(n),t=t.slice(0,n),s=My.multiplyKaratsuba(l,t),a=My.multiplyKaratsuba(i,e),My.addAny(My.addAny(s,My.shiftLeft(My.subtract(My.subtract(My.multiplyKaratsuba(My.addAny(l,i),My.addAny(t,e)),s),a),n)),My.shiftLeft(a,2*n)))},My.fromInt=function(e){var t=e<0?-e:e;return t<1e7?new Xg(e):new Iy(My.smallToArray(t),e<0)},My.square=function(e){for(var t=e.length,n=My.createFloatArray(t+t),i=0;i<t;)for(var s=e[u=i++],a=0;a<t;){var l,r=a++,o=(l=s*e[r]+n[u+r])/1e7,o=l-1e7*(l=o<0?Math.ceil(o):Math.floor(o));n[u+r]=o<0?Math.ceil(o):Math.floor(o),n[u+r+1]+=l}for(var u,h=new Array(n.length),i=0,a=n.length;i<a;)h[u=i++]=0|n[u];return My.trim(h),h},My.divMod1=function(e,t){for(var n=e.length,i=t.length,s=My.createFloatArray(t.length),a=t[i-1],l=Math.ceil(1e7/(2*a)),r=My.multiplySmall(e,l),o=new Array(r.length),u=0,h=r.length;u<h;)o[w=u++]=r[w];for(var c=My.multiplySmall(t,l),_=(o.length<=n&&o.push(0),c.push(0),a=c[i-1],n-i);0<=_;){d=9999999;for(var d=Math.floor((1e7*o[_+i]+o[_+i-1])/a),p=A=0,m=c.length,u=0;u<m;){var g=(A+=d*c[w=u++])/1e7,g=g<0?Math.ceil(g):Math.floor(g);p+=o[_+w]-(A-1e7*g),A=g,p=p<0?(o[_+w]=p+1e7,-1):(o[_+w]=p,0)}for(;0!=p;){--d;for(h=A=0;h<m;)var f=h++,A=(A+=o[_+f]-1e7+c[f])<0?(o[_+f]=A+1e7,0):(o[_+f]=A,1);p+=A}s[_]=d,--_}for(var x=new Array(o.length),u=0,h=o.length;u<h;)x[w=u++]=0|o[w];for(var w,e=My.divModSmall(x,l).q,o=new Array(s.length),u=0,h=s.length;u<h;)o[w=u++]=0|s[w];return My.trim(o),[{small:My.arrayToSmall(o),big:o},{small:My.arrayToSmall(e),big:e}]},My.divMod2=function(e,t){for(var n,i,s,a,l,r=e.length,o=t.length,u=[],h=[];0!=r;)if(h.unshift(e[--r]),My.compareToAbs(h,t)<0)u.push(0);else{for(s=1e7*h[(i=h.length)-1]+h[i-2],a=1e7*t[o-1]+t[o-2],o<i&&(s=1e7*(s+1)),n=Math.ceil(s/a);l=My.multiplySmall(t,n),!(My.compareToAbs(l,h)<=0)&&0!=--n;);u.push(n),h=My.subtract(h,l)}return u.reverse(),[{small:My.arrayToSmall(u),big:u},{small:My.arrayToSmall(h),big:h}]},My.divModSmall=function(e,t){for(var n=e.length,i=My.createArray(n),s=0,a=n-1;0<=a;){var l,r=(l=1e7*s+e[a])/t,s=l-(l=r<0?Math.ceil(r):Math.floor(r))*t;i[a--]=0|l}return{q:i,r:s<0?Math.ceil(s):Math.floor(s)}},My.parseBase=function(e,t){var n,i,s=Xg.zero,a=Xg.one,l=new Xg(t),r="-"==e.substring(0,1);if(t<2||36<t)throw new Ey("base ("+t+") must be a number between 2 ad 36",null,{fileName:"thx/bigint/Bigs.hx",lineNumber:530,className:"thx.bigint.Bigs",methodName:"parseBase"});r&&(e=e.substring(1)),0==(e=Wy.trimCharsLeft(e,"0").toLowerCase()).length&&(e="0"),10==t&&0<(n=e.indexOf("e"))&&(i=e.substring(n+1),e=e.substring(0,n),n=Ae.startsWith(i,"+")?el.parseInt(i.substring(1)):el.parseInt(i),0<=(i=e.indexOf("."))&&(n-=e.length-i,e=e.substring(0,i)+e.substring(1+i)),e=Wy.rpad(e,"0",e.length+n));var o=e.length;if(o<=My.LOG_MAX_BASE/Math.log(t))return new Xg(Ry.parse(e,t)*(r?-1:1));for(var u,h=[],c=0;c<o;){var _=Jn.cca(e,c++);if(48<=_&&_<=57)h.push(new Xg(_-48));else{if(!(97<=_&&_<=122))throw new Ey(e+" is not a valid string",null,{fileName:"thx/bigint/Bigs.hx",lineNumber:565,className:"thx.bigint.Bigs",methodName:"parseBase"});h.push(new Xg(_-87))}}h.reverse();for(var c=0,d=h.length;c<d;)u=h[c++].multiply(a),s=s.add(u),a=a.multiply(l);return r?s.negate():s},function(e,t){this.sign=t,this.value=e,this.isSmall=!1}),By=((i["thx.bigint.Big"]=Iy).__name__="thx.bigint.Big",Iy.__interfaces__=[Zg],Iy.prototype={add:function(e){return e.isZero()?this:this.isZero()?e:this.sign!=e.sign?this.subtract(e.negate()):e.isSmall?this.addSmall(e):this.addBig(e)},addSmall:function(e){e=e.value;return new Iy(My.addSmall(this.value,e<0?-e:e),this.sign)},addBig:function(e){return new Iy(My.addAny(this.value,e.value),this.sign)},subtract:function(e){return e.isZero()?this:this.isZero()?e.negate():this.sign!=e.sign?this.add(e.negate()):e.isSmall?this.subtractSmall(e):this.subtractBig(e)},subtractSmall:function(e){e=e.value;return My.subtractSmall(this.value,e<0?-e:e,this.sign)},subtractBig:function(e){return My.subtractAny(this.value,e.value,this.sign)},divide:function(e){return this.divMod(e).quotient},divMod:function(e){if(e.isZero())throw new Ey("division by zero",null,{fileName:"thx/bigint/Big.hx",lineNumber:56,className:"thx.bigint.Big",methodName:"divMod"});return e.isSmall?this.divModSmall(e):this.divModBig(e)},divModSmall:function(e){var t=e.value,t=My.divModSmall(this.value,t<0?-t:t),n=My.arrayToSmall(t.q),i=t.r;return this.sign&&(i=-i),null!=n?(this.sign!=e.sign&&(n=-n),{quotient:new Xg(n),remainder:new Xg(i)}):{quotient:new Iy(t.q,this.sign!=e.sign),remainder:new Xg(i)}},divModBig:function(e){var t,n,i,s=My.compareToAbs(this.value,e.value);return-1==s?{quotient:Xg.zero,remainder:this}:0==s?{quotient:this.sign==e.sign?Xg.one:Xg.negativeOne,remainder:Xg.zero}:(t=(s=this.value.length+e.value.length<=200?My.divMod1(this.value,e.value):My.divMod2(this.value,e.value))[0].small,e=this.sign!=e.sign,n=s[1].small,i=this.sign,{quotient:null!=t?new Xg(t=e?-t:t):new Iy(s[0].big,e),remainder:null!=n?new Xg(n=i?-n:n):new Iy(s[1].big,i)})},multiply:function(e){return e.isZero()?Xg.zero:e.isSmall?this.multiplySmall(e):this.multiplyBig(e)},multiplySmall:function(e){var t=e.value;return new Iy(My.multiplyLong(this.value,My.smallToArray(t<0?-t:t)),this.sign!=e.sign)},multiplyBig:function(e){return 4e3<this.value.length+e.value.length?new Iy(My.multiplyKaratsuba(this.value,e.value),this.sign!=e.sign):new Iy(My.multiplyLong(this.value,e.value),this.sign!=e.sign)},abs:function(){return new Iy(this.value,!1)},negate:function(){return new Iy(this.value,!this.sign)},next:function(){return this.add(Xg.one)},pow:function(e){if(this.isZero())return e.isZero()?Xg.one:this;if(this.isUnit())return!this.sign||e.isEven()?Xg.one:Xg.negativeOne;if(e.sign)return Xg.zero;if(!e.isSmall)throw new Ey("The exponent "+el.string(e)+" is too large.",null,{fileName:"thx/bigint/Big.hx",lineNumber:177,className:"thx.bigint.Big",methodName:"pow"});for(var t=e.value,n=this,i=Xg.one;1==(1&t)&&(i=i.multiply(n),--t),0!=t;)t=t/2|0,n=n.square();return i},square:function(){return new Iy(My.square(this.value),!1)},isEven:function(){return 0==(1&this.value[0])},isZero:function(){return 0==this.value.length},isUnit:function(){return!1},compareTo:function(e){return this.sign!=e.sign?this.sign?-1:1:e.isSmall?this.compareToSmall(e):this.compareToBig(e)},compareToSmall:function(e){e=e.value;return My.compareToAbs(this.value,My.smallToArray(e<0?-e:e))*(this.sign?-1:1)},compareToBig:function(e){return My.compareToAbs(this.value,e.value)*(this.sign?-1:1)},compareToAbs:function(e){return e.isSmall?this.compareToAbsSmall(e):this.compareToAbsBig(e)},compareToAbsSmall:function(e){e=e.value;return My.compareToAbs(this.value,My.smallToArray(e<0?-e:e))},compareToAbsBig:function(e){return My.compareToAbs(this.value,e.value)},toInt:function(){var e=My.arrayToSmall(this.value);if(null==e)throw new Ey("overflow",null,{fileName:"thx/bigint/Big.hx",lineNumber:278,className:"thx.bigint.Big",methodName:"toInt"});return(this.sign?-1:1)*e},toString:function(){return this.toStringWithBase(10)},toStringWithBase:function(e){if(this.isZero())return"0";if(10==e){for(var t=this.value.length,n=""+this.value[--t];0<=--t;)l=""+this.value[t],n+="0000000".substring(l.length)+l;return(this.sign?"-":"")+n}for(var n=[],i=new Xg(e),s=this;s.sign||0<=s.compareToAbs(i);){var a,l,s=(a=s.divMod(i)).quotient;(l=a.remainder).sign&&(l=i.subtract(l).abs(),s=s.next()),n.push(l.toStringWithBase(e))}return n.push(s.toStringWithBase(e)),n.reverse(),(this.sign?"-":"")+n.join("")},__class__:Iy},function(e,t){this.value=e,this.scale=t}),Ty=((i["thx.bigint.DecimalImpl"]=By).__name__="thx.bigint.DecimalImpl",By.prototype={divide:function(e){return this.divideWithScale(e,ky.divisionExtraScale)},divideWithScale:function(e,t){if(e.isZero())throw new Ey("division by zero",null,{fileName:"thx/bigint/DecimalImpl.hx",lineNumber:40,className:"thx.bigint.DecimalImpl",methodName:"divideWithScale"});var n=this.matchScale(e),e=e.matchScale(this),i=Xg.ten.pow(My.fromInt(e.scale+t)),n=n.value.multiply(i).divMod(e.value),i=e.scale+t;return new By(n.quotient,i).trim(i)},moduloWithScale:function(e,t){if(e.isZero())throw new Ey("modulo by zero",null,{fileName:"thx/bigint/DecimalImpl.hx",lineNumber:51,className:"thx.bigint.DecimalImpl",methodName:"moduloWithScale"});var n=this.matchScale(e),e=e.matchScale(this),i=Xg.ten.pow(My.fromInt(t)),e=n.value.multiply(i).divMod(e.value.multiply(i)),i=n.scale+t;return new By(e.remainder,i).trim(i)},multiply:function(e){return new By(this.value.multiply(e.value),this.scale+e.scale)},modulo:function(e){return this.moduloWithScale(e,ky.divisionExtraScale)},negate:function(){return new By(this.value.negate(),this.scale)},pow:function(e){var t;return e<0?(t=this.value.pow(My.fromInt(-e)),Ty.one.divideWithScale(Ty.fromBigInt(t),(this.scale+1)*-e)):new By(this.value.pow(My.fromInt(e)),this.scale*e)},ceilTo:function(e){var t;return this.isZero()?this:((t=this.scaleTo(e)).isZero()?By.one:this.modulo(t)).multiply(By.ten.pow(e)).toFloat()<=0?t:new By(t.value.add(Xg.one),t.scale)},scaleTo:function(e){var t;return e==this.scale?this:e>this.scale?(t=Xg.ten.pow(My.fromInt(e-this.scale)),new By(this.value.multiply(t),e)):(t=Xg.ten.pow(My.fromInt(this.scale-e)),new By(this.value.divide(t),e))},isZero:function(){return this.value.isZero()},compareTo:function(e){var t=this.matchScale(e),e=e.matchScale(this);return t.value.compareTo(e.value)},trim:function(e){var t,n;return null==e&&(e=0),0==this.scale?this:(t=(n=this.toString()).split("."),n=0<(e=Wy.rpad(Wy.trimCharsRight(t[1],"0"),"0",e)).length?t[0]+"."+e:t[0],ky.parse(n))},toFloat:function(){return parseFloat(this.toString())},toString:function(){var e=this.value.sign,t=(e?this.value.negate():this.value).toString(),n=t.length;return 0==this.scale?(e?"-":"")+t:t.length<=this.scale?(e?"-":"")+"0."+Wy.lpad(t,"0",this.scale):(e?"-":"")+t.substring(0,n-this.scale)+"."+t.substring(n-this.scale)},matchScale:function(e){return this.scale>=e.scale?this:this.scaleTo(e.scale)},__class__:By},{}),Ey=(Ty.fromBigInt=function(e){return new By(e,0)},Ty.fromInt=function(e){return ky.fromInt(e)},Ty.equals=function(e,t){return 0==e.compareTo(t)},function(e,t,n){if(Error.call(this,e),this.message=e,null==t){try{t=AA.exceptionStack()}catch(e){CA.lastError=e,t=[]}if(0==t.length)try{t=AA.callStack()}catch(e){CA.lastError=e,t=[]}}this.stackItems=t,this.pos=n}),Fy=((i["thx.Error"]=Ey).__name__="thx.Error",Ey.__super__=Error,Ey.prototype=e(Error.prototype,{toString:function(){return this.message+"\nfrom: "+this.getPosition()+"\n\n"+this.stackToString()},getPosition:function(){return this.pos.className+"."+this.pos.methodName+"() at "+this.pos.lineNumber},stackToString:function(){return AA.toString(this.stackItems)},__class__:Ey}),function(){}),Dy=((i["thx.Floats"]=Fy).__name__="thx.Floats",Fy.compare=function(e,t){return e<t?-1:t<e?1:0},Fy.interpolate=function(e,t,n){return(n-t)*e+t},Fy.nearEquals=function(e,t,n){return null==n&&(n=1e-9),isFinite(e)?Math.abs(e-t)<=n:isNaN(e)?isNaN(t):!isNaN(t)&&!isFinite(t)&&0<e==0<t},Fy.roundTo=function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t},Fy.wrapCircular=function(e,t){return(e%=t)<0&&(e+=t),e},function(){}),Ry=((i["thx.Functions"]=Dy).__name__="thx.Functions",Dy.equality=function(e,t){return e==t},Dy.noop=function(){},function(){}),Py=((i["thx.Ints"]=Ry).__name__="thx.Ints",Ry.compare=function(e,t){return e-t},Ry.parse=function(e,t){null==t&&(t="0x"==e.substring(0,2)?16:10);e=parseInt(e,t);return isNaN(e)?null:e},Ry.range=function(e,t,n){if(null==t&&(t=e,e=0),(t-e)/(n=null==n?1:n)==1/0)throw tl.thrown("infinite range");var i,s=[],a=-1;if(n<0)for(;;){if(!(t<(i=e+n*++a)))break;s.push(i)}else for(;;){if(!((i=e+n*++a)<t))break;s.push(i)}return s},Ry.wrapCircular=function(e,t){return(e%=t)<0&&(e+=t),e},function(){}),zy=((i["thx.Iterators"]=Py).__name__="thx.Iterators",Py.find=function(e,t){for(;e.hasNext();){var n=e.next();if(t(n))return n}return null},Py.map=function(e,t){for(var n=[];e.hasNext();)n.push(t(e.next()));return n},Py.reduce=function(e,t,n){for(var i=n;e.hasNext();)i=t(i,e.next());return i},Py.toArray=function(e){for(var t=[];e.hasNext();)t.push(e.next());return t},function(){}),Qy=((i["thx.Maps"]=zy).__name__="thx.Maps",zy.tuples=function(t){return Py.map(t.keys(),function(e){return{_0:e,_1:t.get(e)}})},zy.mapValues=function(e,n,t){return zy.reduce(e,function(e,t){return e.set(t._0,n(t._1)),e},t)},zy.reduce=function(e,t,n){return il.reduce(zy.tuples(e),t,n)},zy.values=function(t){return Py.map(t.keys(),function(e){return t.get(e)})},zy.fromArray=function(e,i,s){return il.reduce(e,function(e,t){var n=i(t),t=s(t);return e.h[n]=t,e},new at)},zy.merge=function(e,t){return il.reduce(t,function(e,n){return Py.reduce(n.keys(),function(e,t){return e.set(t,n.get(t)),e},e)},e)},function(){}),Vy=((i["thx.Options"]=Qy).__name__="thx.Options",Qy.toBool=function(e){switch(e._hx_index){case 0:return!0;case 1:return!1}},Qy.isNone=function(e){return!Qy.toBool(e)},Qy.get=function(e){switch(e._hx_index){case 0:return e.v;case 1:return null}},{}),Oy=(Vy.indexOf=function(e,t,n){null==n&&(n=Dy.equality);for(var i=0,s=e.length;i<s;){var a=i++;if(n(t,e[a]))return a}return-1},{}),Wy=(Oy.createInt=function(e){var t=new Je;return null!=e&&Oy.pushMany(t,e),t},Oy.add=function(e,t){return!e.exists(t)&&(e.set(t,!0),!0)},Oy.pushMany=function(e,t){for(var n=g1(t);n.hasNext();)e.set(n.next(),!0)},function(){}),Ny=((i["thx.Strings"]=Wy).__name__="thx.Strings",Wy.map=function(e,t){for(var n=e.split(""),i=new Array(n.length),s=0,a=n.length;s<a;){var l=s++;i[l]=t(n[l])}return i},Wy.repeat=function(e,t){for(var n=[],i=0;i<t;)++i,n.push(e);return n.join("")},Wy.trimCharsLeft=function(e,t){for(var n=0,i=0,s=e.length;i<s&&0<=t.indexOf(e.charAt(i++));)++n;return e.substring(n)},Wy.trimCharsRight=function(e,t){for(var n,i=e.length,s=i,a=0;a<i&&(n=i-a++-1,0<=t.indexOf(e.charAt(n)));)s=n;return e.substring(0,s)},Wy.lpad=function(e,t,n){n-=e.length;return 0<n?Wy.repeat(t,n)+e:e},Wy.rpad=function(e,t,n){n-=e.length;return 0<n?e+Wy.repeat(t,n):e},function(e,t){Ey.call(this,e=null==e?"expected true":e,null,t)}),Gy=((i["thx.error.AssertError"]=Ny).__name__="thx.error.AssertError",Ny.__super__=Ey,Ny.prototype=e(Ey.prototype,{__class__:Ny}),{}),Uy=(Gy.fromAny=function(e){return e instanceof Qp?e:Qp.withData(0,"Unexpected Error",e,{fileName:"tink/await/Error.hx",lineNumber:12,className:"tink.await._Error.Error_Impl_",methodName:"fromAny"})},function(){}),Ly=((i["tink.await.OutcomeTools"]=Uy).__name__="tink.await.OutcomeTools",Uy.getOutcome=function(e,t){if(null==e)return t1.Success(t);switch(e._hx_index){case 0:return e;case 1:var n=e.failure;return n instanceof Qp?e:t1.Failure(Gy.fromAny(n))}},{}),jy=(Ly.invoke=function(e,t){Ly.depth<500?(Ly.depth++,e(t),Ly.depth--):Ly.defer(function(){e(t)})},Ly.defer=function(e){SA.delay(e,0)},(i["tink.core.LinkObject"]=qg).__name__="tink.core.LinkObject",qg.__isInterface__=!0,qg.prototype={__class__:qg},(i["tink.core.CallbackLinkRef"]=Kg).__name__="tink.core.CallbackLinkRef",Kg.__interfaces__=[qg],Kg.prototype={cancel:function(){var e=this.link;null!=e&&e.cancel()},__class__:Kg},{}),Hy=(jy.noop=function(){},jy.fromMany=function(n){return new Hy(function(){if(null!=n)for(var e=0;e<n.length;){var t=n[e];++e,null!=t&&t.cancel()}else n=null})},function(e){this.f=e}),Yy=((i["tink.core.SimpleLink"]=Hy).__name__="tink.core.SimpleLink",Hy.__interfaces__=[qg],Hy.prototype={cancel:function(){null!=this.f&&(this.f(),this.f=null)},__class__:Hy},(i["tink.core._Callback.LinkPair"]=Jg).__name__="tink.core._Callback.LinkPair",Jg.__interfaces__=[qg],Jg.prototype={cancel:function(){var e;this.dissolved||(this.dissolved=!0,null!=(e=this.a)&&e.cancel(),null!=(e=this.b)&&e.cancel(),this.a=null,this.b=null)},__class__:Jg},(i["tink.core._Callback.ListCell"]=$g).__name__="tink.core._Callback.ListCell",$g.__interfaces__=[qg],$g.prototype={cancel:function(){var e;null!=this.list&&(e=this.list,this.cb=null,this.list=null,--e.used<=e.cells.length>>1)&&e.compact()},__class__:$g},(i["tink.core.Disposable"]=ef).__name__="tink.core.Disposable",ef.__isInterface__=!0,ef.prototype={__class__:ef,__properties__:{get_disposed:"get_disposed"}},(i["tink.core.OwnedDisposable"]=tf).__name__="tink.core.OwnedDisposable",tf.__isInterface__=!0,tf.__interfaces__=[ef],(i["tink.core.SimpleDisposable"]=nf).__name__="tink.core.SimpleDisposable",nf.__interfaces__=[tf],nf.noop=function(){},nf.prototype={get_disposed:function(){return null==this.disposeHandlers},ondispose:function(e){var t=this.disposeHandlers;null==t?e():t.push(e)},dispose:function(){var e=this.disposeHandlers;if(null!=e){this.disposeHandlers=null;for(var t=this.f,n=(this.f=nf.noop,t(),0);n<e.length;)e[n++]()}},__class__:nf,__properties__:{get_disposed:"get_disposed"}},(i["tink.core.CallbackList"]=sf).__name__="tink.core.CallbackList",sf.__super__=nf,sf.prototype=e(nf.prototype,{destroy:function(){for(var e,t=0,n=this.cells;t<n.length;){var i=n[t];++t,i.cb=null,i.list=null}this.queue=null,this.cells=null,0<this.used&&(this.used=0,e=this.ondrain,Ly.depth<500?(Ly.depth++,e(),Ly.depth--):Ly.defer(e))},invoke:function(a){var e,t,l=this;if(Ly.depth<500){if(Ly.depth++,null!=l.disposeHandlers)if(l.busy)1!=l.destructive&&(t=a,(e=l).queue.push(function(){e.invoke(t)}));else{l.busy=!0,l.destructive&&l.dispose();for(var n=l.cells.length,i=0;i<n;){var s=l.cells[i++];null!=s.list&&s.cb(a)}l.busy=!1,null==l.disposeHandlers?l.destroy():(l.used<l.cells.length&&l.compact(),0<l.queue.length&&l.queue.shift()())}Ly.depth--}else Ly.defer(function(){if(null!=l.disposeHandlers)if(l.busy){var e,t;1!=l.destructive&&(t=a,(e=l).queue.push(function(){e.invoke(t)}))}else{l.busy=!0,l.destructive&&l.dispose();for(var n=l.cells.length,i=0;i<n;){var s=l.cells[i++];null!=s.list&&s.cb(a)}l.busy=!1,null==l.disposeHandlers?l.destroy():(l.used<l.cells.length&&l.compact(),0<l.queue.length&&l.queue.shift()())}})},compact:function(){if(!this.busy)if(0==this.used){this.resize(0);var e=this.ondrain;Ly.depth<500?(Ly.depth++,e(),Ly.depth--):Ly.defer(e)}else{for(var t=0,n=0,i=this.cells.length;n<i;){var s=n++,a=this.cells[s];if(null!=a.cb&&(t!=s&&(this.cells[t]=a),++t==this.used))break}this.resize(this.used)}},resize:function(e){this.cells.length=e},clear:function(){this.busy&&this.queue.push(Cn(this,this.clear));for(var e=0,t=this.cells;e<t.length;){var n=t[e];++e,n.cb=null,n.list=null}this.resize(0)},__class__:sf}),(i["tink.core.AlreadyDisposed"]=af).__name__="tink.core.AlreadyDisposed",af.__interfaces__=[tf],af.prototype={get_disposed:function(){return!0},ondispose:function(e){e()},__class__:af,__properties__:{get_disposed:"get_disposed"}},(i["tink.core._Future.FutureObject"]=lf).__name__="tink.core._Future.FutureObject",lf.prototype={getStatus:function(){return Xy.NeverEver},handle:function(e){return null},eager:function(){},__class__:lf},(i["tink.core._Lazy.Computable"]=rf).__name__="tink.core._Lazy.Computable",rf.__isInterface__=!0,rf.prototype={__class__:rf},(i["tink.core._Lazy.LazyObject"]=of).__name__="tink.core._Lazy.LazyObject",of.__isInterface__=!0,of.__interfaces__=[rf],of.prototype={__class__:of},function(e){this.value=e}),Zy=((i["tink.core._Lazy.LazyConst"]=Yy).__name__="tink.core._Lazy.LazyConst",Yy.__interfaces__=[of],Yy.prototype={isComputed:function(){return!0},get:function(){return this.value},compute:function(){},underlying:function(){return null},__class__:Yy},function(e){lf.call(this),this.value=e}),rt=((i["tink.core._Future.SyncFuture"]=Zy).__name__="tink.core._Future.SyncFuture",Zy.__super__=lf,Zy.prototype=e(lf.prototype,{getStatus:function(){return Xy.Ready(this.value)},handle:function(e){return Ly.invoke(e,Jy.get(this.value)),null},eager:function(){this.value.isComputed()||Jy.get(this.value)},__class__:Zy}),{}),Xy=(rt.never=function(){return rt.NEVER_INST},rt.noise=function(e){return 4==e.getStatus()._hx_index?rt.never():rt.map(e,function(e){return null})},rt.first=function(t,n){var e=t;switch(e.getStatus()._hx_index){case 3:return n.getStatus()._hx_index,e;case 4:return n;default:switch(n.getStatus()._hx_index){case 3:return n;case 4:return e;default:return new Ky(function(e){return new Jg(t.handle(e),n.handle(e))})}}},rt.map=function(e,n,t){var i=e.getStatus();switch(i._hx_index){case 3:var s=i.result,a=n;return new Zy(new $y(function(){return a(s.get())},s));case 4:return rt.never();default:return new Ky(function(t){return e.handle(function(e){t(n(e))})})}},rt.flatMap=function(e,s,t){var n=e.getStatus();switch(n._hx_index){case 3:var i=n.result;return new Ky(function(t){return s(Jy.get(i)).handle(function(e){t(e)})});case 4:return rt.never();default:return new Ky(function(n){var i=new Kg;return new Jg(e.handle(function(e){var e=s(e).handle(n),t=i.link;null!=t&&t.cancel(),i.link=e}),i)})}},rt.merge=function(s,a,l){var e=s.getStatus(),t=a.getStatus();return 4==e._hx_index||4==t._hx_index?rt.never():new Ky(function(i){function e(e){var t=s.getStatus(),n=a.getStatus();3==t._hx_index&&3==n._hx_index&&i(l(Jy.get(t.result),Jy.get(n.result)))}return new Jg(s.handle(e),a.handle(e))})},rt.inParallel=function(e,t){return rt.many(e,t)},rt.inSequence=function(e){return rt.many(e,1)},rt.many=function(e,t){return rt.processMany(e,t,t1.Success,function(e){return n1.orNull(e)})},rt.processMany=function(c,_,d,p){return 0==c.length?new Zy(new Yy(p(t1.Success([])))):new Ky(function(a){for(var l=[],e=[],t=0;t<c.length;)++t,e.push(null);for(var n,r=e,i=0,s=0,o=!1,u=(n=null==_?c.length:_<1?1:_>c.length?c.length:_,function(){var e;return i==r.length&&0==s&&(e=p(t1.Success(r)),o=!0,a(e),!0)}),h=function(){if(!o&&!u())for(;i<r.length;){var e=[(i+=1)-1],t=c[e[0]],e=[(s=>function(e){switch((n=d(e))._hx_index){case 0:r[s[0]]=n.data,u();break;case 1:for(var t=n.failure,n=0;n<l.length;){var i=l[n];++n,null!=i&&i.cancel()}t=p(t1.Failure(t));o=!0,a(t)}})(e)],n=t.getStatus();if(3==n._hx_index){n=Jy.get(n.result);if(e[0](n),!o)continue}else s+=1,l.push(t.handle((t=>function(e){--s,t[0](e),o||h()})(e)));break}},e=0,t=n;e<t;)++e,h();return jy.fromMany(l)})},rt.async=function(e,t){null==t&&(t=!1);e=rt.irreversible(e);return t||e.eager(),e},rt.irreversible=function(t){return new Ky(function(e){return t(e),null})},rt.or=function(e,t){return rt.first(e,t)},rt.either=function(e,t){return rt.first(rt.map(e,RA.Left),rt.map(t,RA.Right))},rt.and=function(e,t){return rt.merge(e,t,function(e,t){return new i1(e,t)})},fe["tink.core.FutureStatus"]={__ename__:!0,__constructs__:null,Suspended:{_hx_name:"Suspended",_hx_index:0,__enum__:"tink.core.FutureStatus",toString:o},Awaited:{_hx_name:"Awaited",_hx_index:1,__enum__:"tink.core.FutureStatus",toString:o},EagerlyAwaited:{_hx_name:"EagerlyAwaited",_hx_index:2,__enum__:"tink.core.FutureStatus",toString:o},Ready:((R=function(e){return{_hx_index:3,result:e,__enum__:"tink.core.FutureStatus",toString:o}})._hx_name="Ready",R.__params__=["result"],R),NeverEver:{_hx_name:"NeverEver",_hx_index:4,__enum__:"tink.core.FutureStatus",toString:o}}),qy=(Xy.__constructs__=[Xy.Suspended,Xy.Awaited,Xy.EagerlyAwaited,Xy.Ready,Xy.NeverEver],Xy.__empty_constructs__=[Xy.Suspended,Xy.Awaited,Xy.EagerlyAwaited,Xy.NeverEver],function(){this.status=Xy.Awaited,lf.call(this),this.list=new sf(!0)}),Ky=((i["tink.core.FutureTrigger"]=qy).__name__="tink.core.FutureTrigger",qy.__super__=lf,qy.prototype=e(lf.prototype,{getStatus:function(){return this.status},handle:function(e){var t=this.status;return 3==t._hx_index?(Ly.invoke(e,Jy.get(t.result)),null):null==(t=this.list).disposeHandlers?null:(e=new $g(e,t),t.cells.push(e),0==t.used++&&(t=t.onfill,Ly.depth<500?(Ly.depth++,t(),Ly.depth--):Ly.defer(t)),e)},trigger:function(e){return 3!=this.status._hx_index&&(this.status=Xy.Ready(new Yy(e)),this.list.invoke(e),!0)},__class__:qy}),function(e){this.status=Xy.Suspended;var t=this;lf.call(this),this.wakeup=e,this.callbacks=new sf(!0),this.callbacks.ondrain=function(){var e;t.status==Xy.Awaited&&(t.status=Xy.Suspended,null!=(e=t.link)&&e.cancel(),t.link=null)},this.callbacks.onfill=function(){t.status==Xy.Suspended&&(t.status=Xy.Awaited,t.arm())}}),Jy=((i["tink.core._Future.SuspendableFuture"]=Ky).__name__="tink.core._Future.SuspendableFuture",Ky.__super__=lf,Ky.prototype=e(lf.prototype,{getStatus:function(){return this.status},trigger:function(e){var t;3!=this.status._hx_index&&(this.status=Xy.Ready(new Yy(e)),t=this.link,this.link=null,this.wakeup=null,this.callbacks.invoke(e),null!=t)&&t.cancel()},handle:function(e){var t=this.status;return 3==t._hx_index?(Ly.invoke(e,Jy.get(t.result)),null):null==(t=this.callbacks).disposeHandlers?null:(e=new $g(e,t),t.cells.push(e),0==t.used++&&(t=t.onfill,Ly.depth<500?(Ly.depth++,t(),Ly.depth--):Ly.defer(t)),e)},arm:function(){var t=this;this.link=this.wakeup(function(e){t.trigger(e)})},eager:function(){switch(this.status._hx_index){case 0:this.status=Xy.EagerlyAwaited,this.arm();break;case 1:this.status=Xy.EagerlyAwaited}},__class__:Ky}),{}),$y=(Jy.get=function(e){return e.compute(),e.get()},function(e,t){this.f=e,this.from=t}),e1=((i["tink.core._Lazy.LazyFunc"]=$y).__name__="tink.core._Lazy.LazyFunc",$y.__interfaces__=[of],$y.prototype={underlying:function(){return this.from},isComputed:function(){return null==this.f},get:function(){return this.result},compute:function(){var e=this.f;if(null!=e){if((this.f=null)!=(i=this.from)){for(var t=i,n=(this.from=null,[]);null!=t&&!t.isComputed();)n.push(t),t=t.underlying();n.reverse();for(var i=0;i<n.length;)n[i++].compute()}this.result=e()}},__class__:$y},{}),t1=(e1.ofAny=function(e){return null},fe["tink.core.Outcome"]={__ename__:!0,__constructs__:null,Success:((R=function(e){return{_hx_index:0,data:e,__enum__:"tink.core.Outcome",toString:o}})._hx_name="Success",R.__params__=["data"],R),Failure:((R=function(e){return{_hx_index:1,failure:e,__enum__:"tink.core.Outcome",toString:o}})._hx_name="Failure",R.__params__=["failure"],R)}),n1=(t1.__constructs__=[t1.Success,t1.Failure],t1.__empty_constructs__=[],function(){}),i1=((i["tink.core.OutcomeTools"]=n1).__name__="tink.core.OutcomeTools",n1.orNull=function(e){switch(e._hx_index){case 0:return e.data;case 1:return null}},function(e,t){this.a=e,this.b=t}),s1=((i["tink.core.MPair"]=i1).__name__="tink.core.MPair",i1.prototype={__class__:i1},{}),a1=(s1.filter=function(e,n,t){return l1.over(e,function(t){return e.listen(function(e){n(e)&&t(e)})})},s1.nextTime=function(e,t){return s1.pickNext(e,function(e){return null==t||t(e)?OA.Some(e):OA.None})},s1.pickNext=function(e,t){var n=new qy,e=e.listen(function(e){e=t(e);0===e._hx_index&&n.trigger(e.v)});return n.handle(null==e?jy.noop:Cn(R=e,R.cancel)),n},s1.trigger=function(){return new r1},s1.dead=function(){return a1.INST},(i["tink.core._Signal.SignalObject"]=uf).__name__="tink.core._Signal.SignalObject",uf.__isInterface__=!0,uf.__interfaces__=[ef],uf.prototype={__class__:uf},function(){af.call(this)}),l1=((i["tink.core._Signal.Disposed"]=a1).__name__="tink.core._Signal.Disposed",a1.__interfaces__=[uf],a1.__super__=af,a1.prototype=e(af.prototype,{listen:function(e){return null},__class__:a1}),function(t,n){this.handlers=new sf;var i=this;this.activate=t,this.init=n,this.handlers.ondrain=function(){var e=i.subscription;null!=e&&e.cancel()},this.handlers.onfill=function(){var e;null!=n&&(e=n,n=null,e(i)),i.subscription=t(Cn(R=i.handlers,R.invoke))}}),r1=((i["tink.core._Signal.Suspendable"]=l1).__name__="tink.core._Signal.Suspendable",l1.__interfaces__=[tf,uf],l1.over=function(e,t){return e.get_disposed()?s1.dead():(t=new l1(t),e.ondispose(Cn(t,t.dispose)),t)},l1.prototype={get_disposed:function(){return null==this.handlers.disposeHandlers},dispose:function(){this.handlers.dispose()},ondispose:function(e){this.handlers.ondispose(e)},listen:function(e){var t=this.handlers;return null==t.disposeHandlers?null:(e=new $g(e,t),t.cells.push(e),0==t.used++&&(t=t.onfill,Ly.depth<500?(Ly.depth++,t(),Ly.depth--):Ly.defer(t)),e)},__class__:l1,__properties__:{get_disposed:"get_disposed"}},function(){this.handlers=new sf}),o1=((i["tink.core.SignalTrigger"]=r1).__name__="tink.core.SignalTrigger",r1.__interfaces__=[tf,uf],r1.prototype={get_disposed:function(){return null==this.handlers.disposeHandlers},dispose:function(){this.handlers.dispose()},ondispose:function(e){this.handlers.ondispose(e)},listen:function(e){var t=this.handlers;return null==t.disposeHandlers?null:(e=new $g(e,t),t.cells.push(e),0==t.used++&&(t=t.onfill,Ly.depth<500?(Ly.depth++,t(),Ly.depth--):Ly.defer(t)),e)},__class__:r1,__properties__:{get_disposed:"get_disposed"}},(i["tweenx909.advanced.CommandX"]=hf).__name__="tweenx909.advanced.CommandX",hf.prototype={__class__:hf},function(){});(i["tweenxcore.Easing"]=o1).__name__="tweenxcore.Easing",o1.linear=function(e){return e},o1.sineIn=function(e){return 0==e?0:1==e?1:1-Math.cos(1.5707963267948966*e)},o1.sineOut=function(e){return 0==e?0:1==e?1:Math.sin(1.5707963267948966*e)},o1.sineInOut=function(e){return 0==e?0:1==e?1:-.5*(Math.cos(3.141592653589793*e)-1)},o1.sineOutIn=function(e){return 0==e?0:1==e?1:e<.5?.5*Math.sin(2*e*1.5707963267948966):-.5*Math.cos(1.5707963267948966*(2*e-1))+1},o1.quadIn=function(e){return e*e},o1.quadOut=function(e){return-e*(e-2)},o1.quadInOut=function(e){return e<.5?2*e*e:--e*e*-2+1},o1.quadOutIn=function(e){return e<.5?-.5*(e*=2)*(e-2):.5*(e=2*e-1)*e+.5},o1.cubicIn=function(e){return e*e*e},o1.cubicOut=function(e){return--e*e*e+1},o1.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},o1.cubicOutIn=function(e){return.5*((e=2*e-1)*e*e+1)},o1.quartIn=function(e){return(e*=e)*e},o1.quartOut=function(e){return 1-(e=--e*e)*e},o1.quartInOut=function(e){return(e*=2)<1?.5*(e*=e)*e:-.5*((e=(e-=2)*e)*e-2)},o1.quartOutIn=function(e){return e<.5?(e=2*e-1,-.5*(e*=e)*e+.5):(e=2*e-1,.5*(e*=e)*e+.5)},o1.quintIn=function(e){return e*(e*=e)*e},o1.quintOut=function(e){e-=1;return e*(e*=e)*e+1},o1.quintInOut=function(e){return(e*=2)<1?.5*e*(e*=e)*e:.5*(e-=2)*(e*=e)*e+1},o1.quintOutIn=function(e){return.5*((e=2*e-1)*(e*=e)*e+1)},o1.expoIn=function(e){return 0==e?0:Math.exp(6.931471805599453*(e-1))},o1.expoOut=function(e){return 1==e?1:1-Math.exp(-6.931471805599453*e)},o1.expoInOut=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.exp(6.931471805599453*(e-1)):.5*(2-Math.exp(-6.931471805599453*(e-1)))},o1.expoOutIn=function(e){return e<.5?.5*(1-Math.exp(-13.862943611198906*e)):.5==e?.5:.5*(Math.exp(13.862943611198906*(e-1))+1)},o1.circIn=function(e){return e<-1||1<e?0:1-Math.sqrt(1-e*e)},o1.circOut=function(e){return e<0||2<e?0:Math.sqrt(e*(2-e))},o1.circInOut=function(e){return e<-.5||1.5<e?.5:(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},o1.circOutIn=function(e){return e<0?0:1<e?1:e<.5?(e=2*e-1,.5*Math.sqrt(1-e*e)):(e=2*e-1,-.5*(Math.sqrt(1-e*e)-1-1))},o1.bounceIn=function(e){return(e=1-e)<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)},o1.bounceOut=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375},o1.bounceInOut=function(e){return e<.5?(e=1-2*e)<.36363636363636365?.5*(1-7.5625*e*e):e<.7272727272727273?.5*(1-(7.5625*(e-=.5454545454545454)*e+.75)):e<.9090909090909091?.5*(1-(7.5625*(e-=.8181818181818182)*e+.9375)):.5*(1-(7.5625*(e-=.9545454545454546)*e+.984375)):(e=2*e-1)<.36363636363636365?7.5625*e*e*.5+.5:e<.7272727272727273?.5*(7.5625*(e-=.5454545454545454)*e+.75)+.5:e<.9090909090909091?.5*(7.5625*(e-=.8181818181818182)*e+.9375)+.5:.5*(7.5625*(e-=.9545454545454546)*e+.984375)+.5},o1.bounceOutIn=function(e){return e<.5?(e*=2)<.36363636363636365?7.5625*e*e*.5:e<.7272727272727273?.5*(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?.5*(7.5625*(e-=.8181818181818182)*e+.9375):.5*(7.5625*(e-=.9545454545454546)*e+.984375):(e=1-(2*e-1))<.36363636363636365?.5-7.5625*e*e*.5+.5:e<.7272727272727273?.5-.5*(7.5625*(e-=.5454545454545454)*e+.75)+.5:e<.9090909090909091?.5-.5*(7.5625*(e-=.8181818181818182)*e+.9375)+.5:.5-.5*(7.5625*(e-=.9545454545454546)*e+.984375)+.5},o1.backIn=function(e){return 0==e?0:1==e?1:e*e*(2.70158*e-1.70158)},o1.backOut=function(e){return 0==e?0:1==e?1:--e*e*(2.70158*e+1.70158)+1},o1.backInOut=function(e){return 0==e?0:1==e?1:(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)},o1.backOutIn=function(e){return 0==e?0:1==e?1:e<.5?.5*((e=2*e-1)*e*(2.70158*e+1.70158)+1):.5*(e=2*e-1)*e*(2.70158*e-1.70158)+.5},o1.elasticIn=function(e){return 0==e?0:1==e?1:-(Math.exp(6.931471805599453*--e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4))},o1.elasticOut=function(e){return 0==e?0:1==e?1:Math.exp(-6.931471805599453*e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4)+1},o1.elasticInOut=function(e){return 0==e?0:1==e?1:(e*=2)<1?Math.exp(6.931471805599453*--e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4)*-.5:Math.exp(-6.931471805599453*--e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4)*.5+1},o1.elasticOutIn=function(e){return e<.5?0==(e*=2)?0:.5*Math.exp(-6.931471805599453*e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4)+.5:.5==e?.5:1==e?1:(e=2*e-1,.5-.5*Math.exp(6.931471805599453*--e)*Math.sin(6.283185307179586*(.001*e-75e-6)/3e-4))},o1.warpOut=function(e){return e<=0?0:1},o1.warpIn=function(e){return e<1?0:1},o1.warpInOut=function(e){return e<.5?0:1},o1.warpOutIn=function(e){return e<=0?0:e<1?.5:1},(i["tweenx909.rule.BoolRuleX"]=cf).__name__="tweenx909.rule.BoolRuleX",cf.calc=function(e,t,n,i,s){return 0<(e?1:0)*i+(t?1:0)*n},cf.defaultFrom=function(e,t,n){return e},(i["tweenx909.rule.ArrayRuleX"]=_f).__name__="tweenx909.rule.ArrayRuleX",_f.calc=function(e,t,n,i,s){for(var a=g1(e),l=[],r=g1(t);r.hasNext();){var o,u=r.next(),e=a.next();if("number"==typeof(t=u))o=e*i+t*n;else{for(var h=null,c=!1,_=g1($.get_rules());_.hasNext();){var d=_.next();if(nl.__instanceof(t,d.inputClass)){c=!0,h=d.calc(e,t,n,i,s);break}}if(!c)throw u=nl.getClass(t),tl.thrown(s.error("The tween rule for "+u.__name__+" is not defined"));o=h}l.push(o)}return l},_f.defaultFrom=function(e,t,n){var i=n;if(null!=e)for(var s=[],a=g1(t);a.hasNext();)a.next(),s.push(null);else if(be.count(e)!=be.count(t))throw tl.thrown(i.error("The array length must be same with start."));for(var l=[],r=g1(t),o=g1(e);o.hasNext();)l.push(_f._defaultFrom(o.next(),r.next(),n));return l},_f._defaultFrom=function(e,t,n){if("number"==typeof t)return e;for(var i=g1($.get_rules());i.hasNext();){var s=i.next();if(nl.__instanceof(t,s.inputClass))return s.defaultFrom(e,t,n)}var a=nl.getClass(t);throw tl.thrown(n.error("The tween rule for "+a.__name__+" is not defined"))},(i["tweenxcore.structure.Timeline"]=df).__name__="tweenxcore.structure.Timeline",(i["tweenx909.rule.TimelineRuleX"]=pf).__name__="tweenx909.rule.TimelineRuleX",pf.calc=function(e,t,n,i,s){return t.search(n).data},pf.defaultFrom=function(e,t,n){return null},(i["tweenxcore.color.IColor"]=mf).__name__="tweenxcore.color.IColor",mf.__isInterface__=!0,(i["tweenxcore.color.RgbColor"]=gf).__name__="tweenxcore.color.RgbColor",gf.__interfaces__=[mf],gf.prototype={__class__:gf},(i["tweenxcore.color.ITransparentColor"]=ff).__name__="tweenxcore.color.ITransparentColor",ff.__isInterface__=!0,ff.__interfaces__=[mf],(i["tweenxcore.color.ArgbColor"]=Af).__name__="tweenxcore.color.ArgbColor",Af.__interfaces__=[ff],Af.__super__=gf,Af.prototype=e(gf.prototype,{__class__:Af}),(i["tweenx909.rule.ArgbRuleX"]=xf).__name__="tweenx909.rule.ArgbRuleX",xf.calc=function(e,t,n,i,s){var a=e.a*i+t.a*n,l=e.r*i+t.r*n,r=e.g*i+t.g*n,e=e.b*i+t.b*n;return(255*(a<=0?0:1<=a?1:a)|0)<<24|(255*(l<=0?0:1<=l?1:l)|0)<<16|(255*(r<=0?0:1<=r?1:r)|0)<<8|255*(e<=0?0:1<=e?1:e)|0},xf.defaultFrom=function(e,t,n){return new Af((e>>>24&255)/255,(e>>16&255)/255,(e>>8&255)/255,(255&e)/255)},(i["tweenxcore.color.HsvColor"]=wf).__name__="tweenxcore.color.HsvColor",wf.__interfaces__=[mf],wf.hsvToRgbInt=function(e,t,n){e=6*(e-Math.floor(e));var i=Math.floor(e),s=(t<=0?t=0:1<=t&&(t=1),n<=0?n=0:1<=n&&(n=1),n*(1-t)),a=e-i,l=0,r=0,o=0;switch(i){case 0:r=(l=n)*(1-t*(1-a)),o=s;break;case 1:l=n*(1-t*a),r=n,o=s;break;case 2:l=s,o=(r=n)*(1-t*(1-a));break;case 3:l=s,r=n*(1-t*a),o=n;break;case 4:l=n*(1-t*(1-a)),r=s,o=n;break;case 5:r=s,o=(l=n)*(1-t*a)}return(255*l|0)<<16|(255*r|0)<<8|255*o|0},wf.fromRgb=function(e,t,n,i){null==i&&(i=0),(e=e<t?t<n?(4+(e-t)/(a=(s=n)-e))/6:(2+(n-e)/(a=(s=t)-(e<n?e:n)))/6:e<n?(4+(e-t)/(a=(s=n)-t))/6:(t-n)/(a=(s=e)-(t<n?t:n))/6)<0&&++e;var s,a,t=a/s;return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new wf(e+i,t,s)},wf.prototype={__class__:wf},(i["tweenxcore.color.AhsvColor"]=yf).__name__="tweenxcore.color.AhsvColor",yf.__interfaces__=[ff],yf.__super__=wf,yf.prototype=e(wf.prototype,{__class__:yf}),(i["tweenx909.rule.AhsvRuleX"]=bf).__name__="tweenx909.rule.AhsvRuleX",bf.calc=function(e,t,n,i,s){var a=e.a*i+t.a*n;return(255*(a<=0?0:1<=a?1:a)|0)<<24|wf.hsvToRgbInt(e.h*i+t.h*n,e.s*i+t.s*n,e.v*i+t.v*n)},bf.defaultFrom=function(e,t,n){var i=16777215&e,i=wf.fromRgb((i>>16&255)/255,(i>>8&255)/255,(255&i)/255,0);return new yf((e>>>24&255)/255,i.h,i.s,i.v)},(i["tweenx909.rule.RgbRuleX"]=vf).__name__="tweenx909.rule.RgbRuleX",vf.calc=function(e,t,n,i,s){var a=e.r*i+t.r*n,l=e.g*i+t.g*n,e=e.b*i+t.b*n;return(255*(a<=0?0:1<=a?1:a)|0)<<16|(255*(l<=0?0:1<=l?1:l)|0)<<8|255*(e<=0?0:1<=e?1:e)|0},vf.defaultFrom=function(e,t,n){return new gf((e>>16&255)/255,(e>>8&255)/255,(255&e)/255)},(i["tweenx909.rule.HsvRuleX"]=Cf).__name__="tweenx909.rule.HsvRuleX",Cf.calc=function(e,t,n,i,s){return wf.hsvToRgbInt(e.h*i+t.h*n,e.s*i+t.s*n,e.v*i+t.v*n)},Cf.defaultFrom=function(e,t,n){return wf.fromRgb((e>>16&255)/255,(e>>8&255)/255,(255&e)/255,0)},(i["tweenx909.rule.QuakeX"]=Sf).__name__="tweenx909.rule.QuakeX",Sf.prototype={__class__:Sf},(i["tweenx909.rule.QuakeRuleX"]=kf).__name__="tweenx909.rule.QuakeRuleX",kf.calc=function(e,t,n,i,s){var a=n<.5?e.ease(2*n):t.ease(2*i);return e.value*i+t.value*n+a*(2*Math.random()-1)*(e.scale*i+t.scale*n)},kf.defaultFrom=function(e,t,n){return new Sf(e,t.scale,t.ease)};(n=fe["tweenx909.advanced.UpdateModeX"]={__ename__:!0,__constructs__:null,MANUAL:{_hx_name:"MANUAL",_hx_index:0,__enum__:"tweenx909.advanced.UpdateModeX",toString:o},TIME:((R=function(e){return{_hx_index:1,frameRate:e,__enum__:"tweenx909.advanced.UpdateModeX",toString:o}})._hx_name="TIME",R.__params__=["frameRate"],R)}).__constructs__=[n.MANUAL,n.TIME],n.__empty_constructs__=[n.MANUAL];var $=function(e,t,n,i,s,a,l,r,o,u){if(this.timeScale=1,this._skip=null,this._currentTime=0,hf.call(this,u1.TWEEN(this),u),this._type=e,(this._currentTime=0)==e._hx_index?(this._easeIsDefault=!1,this._ease=null==n?o1.linear:n):this._ease=(this._easeIsDefault=null==n)?$.defaultEase:n,this._time=(this._timeIsDefault=null==t)?$.defaultTime:t,this._delay=(this._delayIsDefault=null==i)?$.defaultDelay:i,this._interval=(this._intervalIsDefault=null==r)?$.defaultInterval:r,this._repeat=(this._repeatIsDefault=null==s)?$.defaultRepeat:s,this._yoyo=(this._yoyoIsDefault=null==a)?$.defaultYoyo:a,this._zigzag=(this._zigzagIsDefault=null==l)?$.defaultZigZag:l,this._autoPlay=(this._autoPlayIsDefault=null==o)?$.defaultAutoPlay:o,this._rest=0,this._eventListeners=[],this.id=$.idCounter++,$._addedTweens.push(this),!$.managerInited){$.managerInited=!0,$.stopUpdater();var h=$.updateMode;switch(h._hx_index){case 0:break;case 1:$.prevTime=(new Date).getTime();var c=Math.round(1e3/h.frameRate);null!=$._timer&&$._timer.stop(),$._timer=new SA(c),$._timer.run=$.mainLoop}}},u1=((i["tweenx909.TweenX"]=$).__name__="tweenx909.TweenX",$.__properties__={get_rules:"get_rules"},$.prevTime=null,$.get_rules=function(){return $._rules},$.dumpDefaults=function(){return(new h1).dump()},$.setDefaults=function(e){e.apply()},$.mainLoop=function(){switch($.updateMode._hx_index){case 0:throw tl.thrown("invalid auto update");case 1:$.manualUpdate(((new Date).getTime()-$.prevTime)/1e3),$.prevTime=(new Date).getTime()}},$.stopUpdater=function(){null!=$._timer&&($._timer.stop(),$._timer=null)},$.manualUpdate=function(e){$.initTweens();for(var t=$._tweens.length,n=0;n<t;){var i=$._tweens[n++];i._update(e*i.timeScale*$.topLevelTimeScale),i.playing||($._tweens.splice(--n,1),--t)}$._resetLog()},$.initTweens=function(){for(var e=0,t=$._addedTweens;e<t.length;)t[e++]._init();$._addedTweens.splice(0,$._addedTweens.length)},$.to=function(e,t,n,i,s,a,l,r,o,u,h){return null==t&&(t={}),$.isIterable(e)?new d1(p1.ARRAY(e,[{}],[t]),n,i,s,a,l,r,o,u,h):new d1(p1.FROM_TO(e,{},t),n,i,s,a,l,r,o,u,h)},$.tweenFunc1=function(e,t,n,i,s,a,l,r,o,u,h,c){return new $(p1.FUNC(e,[t],[n]),i,s,a,l,r,o,u,h,c)},$.serial=function(e,t,n){for(var i=new $(p1.GROUP(new c1(e,_1.SERIAL,t)),null,null,null,null,null,null,null,null,n),s=g1(e);s.hasNext();){var a=s.next();if(null!=a){a=a.command;if(0==a._hx_index){a=a.tween;if(a._inited)throw tl.thrown(a.error("Can't serialize initialized TweenCommandX"));a._autoPlay=!1,a._parent=i}}}return i},$._timer=null,$._resetLog=function(){$._initLog=[],$.dictionary=new VA},$.isIterable=function(e){return null!=e&&(e instanceof Array||!(!Object.prototype.hasOwnProperty.call(e,"iterator")||!X.isFunction((t=e)instanceof Array?function(){return new JA(t)}:"function"==typeof t.iterator?Cn(t,t.iterator):t.iterator))&&null!=g1(e));var t},$.__super__=hf,$.prototype=e(hf.prototype,{get_currentTime:function(){var e=this.get_totalTime(),t=this.backward?e-this._currentTime:this._currentTime;return t=e<(t=t<0?0:t)?e:t},get_singleTime:function(){return this._time+this._interval},get_totalTime:function(){return this._delay+this.get_singleTime()*this._repeat-this._interval+this._rest},error:function(e){var t=this.definedPosInfos;return e+"(Tween_"+this.id+" was generated at "+t.className+"/"+t.methodName+"() ["+t.fileName+":"+t.lineNumber+"])"},play:function(){if(null!=this._parent)throw tl.thrown(this.error("Can't play serialized object directly"));if(!this.playing){this._inited||this._init(),this.playing=!0,$._tweens.push(this);var e=this._eventListeners[0];if(null!=e)for(var t=0;t<e.length;)e[t++](this);null!=this._onPlay&&this._onPlay(),this.update(1.4901161415892264e-8)}return this},_stop:function(){if(this.playing){this.playing=!1;var e=this._eventListeners[9];if(null!=e)for(var t=0;t<e.length;)e[t++](this);null!=this._onStop&&this._onStop()}},update:function(e){if(null!=this._parent)throw tl.thrown(this.error("Can't stop serialized object directly"));return this._update(e*this.timeScale*$.topLevelTimeScale),this},_invert:function(){this._currentTime=this._totalTime-this._currentTime,this._repeat%2==0&&(this._odd=!this._odd),this._inverted=!this._inverted;var e=this._delay;this._delay=this._rest,this._rest=e},_init:function(){if(!this._inited){this._inited=!0,$._groupDefaults&&(this._easeIsDefault&&(this._ease=$.defaultEase),this._timeIsDefault&&(this._time=$.defaultTime),this._delayIsDefault&&(this._delay=$.defaultDelay),this._intervalIsDefault&&(this._interval=$.defaultInterval),this._repeatIsDefault&&(this._repeat=$.defaultRepeat),this._yoyoIsDefault&&(this._yoyo=$.defaultYoyo),this._zigzagIsDefault&&(this._zigzag=$.defaultZigZag),this._autoPlayIsDefault)&&(this._autoPlay=$.defaultAutoPlay),0==this._repeat&&(this._repeat=2147483646),this._time<1.4901161415892264e-8&&(this._time=1.4901161415892264e-8),this._fastMode=!0;var e=this._type;switch(e._hx_index){case 0:this.initGroup(e.group);break;case 1:for(var t=e._from,n=e._to,i=0,s=g1(e.targets);s.hasNext();){var a=s.next(),l=n[i];this._initFromTo(a,t[i],l),0==i&&(this._toKeys=X.fields(l)),++i}break;case 2:t=e._to;this._initFromTo(e.target,e._from,t),this._toKeys=X.fields(t)}this._singleTime=this.get_singleTime(),this._totalTime=this.get_totalTime(),this._autoPlay&&this.play()}},_initFromTo:function(e,t,n){throw tl.thrown(this.error("must be standard tween."))},_update:function(e){if(this._inited||this._init(),0!=e){(e=this.backward?-e:e)<0&&(this._invert(),this.backward=!this.backward,e=-e);var t,n=this._currentTime,i=this.get_singleTime(),s=this._totalTime,a=this._time,l=this._delay,r=s-this._rest,o=n-l<1.4901161415892264e-8,u=!o&&r-n<1.4901161415892264e-8,h=n-l,c=Math.floor(h/i),_=h-c*i,d=a-_<1.4901161415892264e-8;if(_+=e,h+=e,(this._currentTime=n+=e)-l<1.4901161415892264e-8){if(null!=(t=this._eventListeners[1]))for(var p=0;p<t.length;)t[p++](this);null!=this._onDelay&&this._onDelay()}else{if(o){if(this._apply(0,0),null!=(t=this._eventListeners[2]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onHead&&this._onHead(),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);null!=this._onUpdate&&this._onUpdate()}if(r-n<1.4901161415892264e-8){if(!u){if(d){if(null!=(t=this._eventListeners[6]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onRepeat&&this._onRepeat(),this._apply(0,c),null!=(t=this._eventListeners[2]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onHead&&this._onHead(),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);null!=this._onUpdate&&this._onUpdate()}if(this._apply(this._time,this._repeat-1),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onUpdate&&this._onUpdate(),null!=(t=this._eventListeners[4]))for(p=0;p<t.length;)t[p++](this);null!=this._onFoot&&this._onFoot()}if(s-n<1.4901161415892264e-8){if(this._currentTime=this._totalTime,null!=(t=this._eventListeners[8]))for(p=0;p<t.length;)t[p++](this);null!=this._onFinish&&this._onFinish(),this._stop()}else{if(null!=(t=this._eventListeners[7]))for(p=0;p<t.length;)t[p++](this);null!=this._onRest&&this._onRest()}}else{if(a-_<1.4901161415892264e-8){if(!d&&0<=c){if(this._apply(this._time,c),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onUpdate&&this._onUpdate(),null!=(t=this._eventListeners[4]))for(p=0;p<t.length;)t[p++](this);null!=this._onFoot&&this._onFoot()}if(_<i){if(null!=(t=this._eventListeners[5]))for(p=0;p<t.length;)t[p++](this);return void(null!=this._onInterval&&this._onInterval())}if(0<=c){if(null!=(t=this._eventListeners[6]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onRepeat&&this._onRepeat(),this._apply(0,c),null!=(t=this._eventListeners[2]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onHead&&this._onHead(),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);null!=this._onUpdate&&this._onUpdate()}if(a-(_=h-(c=h/i|0)*i)<1.4901161415892264e-8){if(this._apply(this._time,c),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onUpdate&&this._onUpdate(),null!=(t=this._eventListeners[4]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onFoot&&this._onFoot(),null!=(t=this._eventListeners[5]))for(p=0;p<t.length;)t[p++](this);return void(null!=this._onInterval&&this._onInterval())}}else if(d){if(null!=(t=this._eventListeners[6]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onRepeat&&this._onRepeat(),this._apply(0,c),null!=(t=this._eventListeners[2]))for(p=0;p<t.length;)t[p++](this);if(null!=this._onHead&&this._onHead(),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);null!=this._onUpdate&&this._onUpdate()}if(this._apply(_,c),null!=(t=this._eventListeners[3]))for(p=0;p<t.length;)t[p++](this);null!=this._onUpdate&&this._onUpdate()}}}},_apply:function(e,t){var t=t%2==1,e=e/this._time,n=(this._odd&&(t=!t),this._inverted&&(e=1-e),t?(this._yoyo&&(e=1-e),e=this._ease(e),this._zigzag&&(e=1-e)):e=this._ease(e),e),i=this._type;switch(i._hx_index){case 0:var s=i.group,a=s.tweens,l=1.00000001*(this._time*n-s.current);if(l<0)for(var r=1-a.length,o=1;r<o;)a[-r++]._update(l);else for(r=0,o=a.length;r<o;)a[r++]._update(l);s.current=s.tweens[0].get_currentTime();break;case 1:for(var u=i._from,h=i._to,c=1-n,_=0,d=g1(i.targets);d.hasNext();)for(var p=d.next(),m=h[_++],g=u[_-1],r=0,o=this._toKeys;r<o.length;){var f=o[r],A=(++r,p),x=g,w=F=null==x?null:!!x.__properties__&&(E=x.__properties__["get_"+f])?x[E]():x[f],x=m;if("number"==typeof(M=T=null==x?null:!!x.__properties__&&(k=x.__properties__["get_"+f])?x[k]():x[f]))S=w*c+M*n;else{for(var y=0,b=$._rules.length,v=null,C=!1;y<b;)if(D=$._rules[y++],nl.__instanceof(M,D.inputClass)){C=!0,v=D.calc(w,M,n,c,this);break}if(!C)throw R=nl.getClass(M),tl.thrown(this.error("The tween rule for "+R.__name__+" is not defined"));S=v}!!A.__properties__&&(I=A.__properties__["set_"+f])?A[I](S):A[f]=S}break;case 2:d=i.target,g=i._from,m=i._to,c=1-n;if(this._fastMode)for(r=0,o=this._toKeys;r<o.length;){var f=o[r],S=(++r,(F=null==g?null:!!g.__properties__&&(E=g.__properties__["get_"+f])?g[E]():g[f])*c+(T=null==m?null:!!m.__properties__&&(k=m.__properties__["get_"+f])?m[k]():m[f])*n);!!d.__properties__&&(I=d.__properties__["set_"+f])?d[I](S):d[f]=S}else for(r=0,o=this._toKeys;r<o.length;){var k,M,I,f=o[r],w=(++r,F=null==g?null:!!g.__properties__&&(E=g.__properties__["get_"+f])?g[E]():g[f]);if("number"==typeof(M=T=null==m?null:!!m.__properties__&&(k=m.__properties__["get_"+f])?m[k]():m[f]))S=w*c+M*n;else{for(_=0,b=$._rules.length,v=null,C=!1;_<b;)if(D=$._rules[_++],nl.__instanceof(M,D.inputClass)){C=!0,v=D.calc(w,M,n,c,this);break}if(!C)throw R=nl.getClass(M),tl.thrown(this.error("The tween rule for "+R.__name__+" is not defined"));S=v}!!d.__properties__&&(I=d.__properties__["set_"+f])?d[I](S):d[f]=S}break;case 3:for(var s=i.func,g=i._from,c=1-n,B=[],r=0,o=(m=i._to).length;r<o;){var T,E,F=g[_=r++];if("number"==typeof(T=m[_]))E=F*c+T*n;else{for(var D,R,y=0,b=$._rules.length,v=null,C=!1;y<b;)if(D=$._rules[y++],nl.__instanceof(T,D.inputClass)){C=!0,v=D.calc(F,T,n,c,this);break}if(!C)throw R=nl.getClass(T),tl.thrown(this.error("The tween rule for "+R.__name__+" is not defined"));E=v}B[_]=E}s.apply(null,B);break;case 4:1==n&&i.func()}},onFinish:function(e){return this._onFinish=e,this},initGroup:function(e){var t=null,n=!1,i=(null!=e.defaults&&(t=$.dumpDefaults(),n=$._groupDefaults,$._groupDefaults=!0,$.setDefaults(e.defaults),$.defaultAutoPlay=!1),0),s=0,a=[];switch((c=e.type)._hx_index){case 0:for(var l=g1(e.source);l.hasNext();){var r=l.next();if(null!=r)switch((h=r.command)._hx_index){case 0:var o=h.tween,u=(a.push(o),o._autoPlay=!1,$._groupDefaults&&o._delayIsDefault&&(o._delay=$.defaultDelay),o._init(),o._delay+=i,o._totalTime+=i);null!=o._skip?i+=o._skip:i=u,s<u&&(s=u);break;case 1:i+=h.delay}}break;case 1:for(var h=c.lag,l=g1(e.source);l.hasNext();){r=l.next();if(null!=r)switch((c=r.command)._hx_index){case 0:o=c.tween,u=(a.push(o),o._init(),o._delay+=i,o._totalTime+=i);i+=null!=o._skip?o._skip:h,s<u&&(s=u);break;case 1:i+=c.delay}}}for(var c=0;c<a.length;){var l=a[c],_=(++c,s-l._totalTime);l._rest+=_,l._totalTime+=_}this._time=s,e.tweens=a,(e.source=null)!=e.defaults&&($._groupDefaults=n,$.setDefaults(t))},__class__:$,__properties__:{get_totalTime:"get_totalTime",get_singleTime:"get_singleTime",get_currentTime:"get_currentTime"}}),fe["tweenx909.advanced.CommandTypeX"]={__ename__:!0,__constructs__:null,TWEEN:((R=function(e){return{_hx_index:0,tween:e,__enum__:"tweenx909.advanced.CommandTypeX",toString:o}})._hx_name="TWEEN",R.__params__=["tween"],R),WAIT:((R=function(e){return{_hx_index:1,delay:e,__enum__:"tweenx909.advanced.CommandTypeX",toString:o}})._hx_name="WAIT",R.__params__=["delay"],R)}),h1=(u1.__constructs__=[u1.TWEEN,u1.WAIT],u1.__empty_constructs__=[],function(){this._autoPlay=!0,this._zigzag=!1,this._yoyo=!1,this._repeat=1,this._interval=0,this._delay=0,this._time=.3,this._ease=$.DEFAULT_EASE}),c1=((i["tweenx909.advanced.DefaultsX"]=h1).__name__="tweenx909.advanced.DefaultsX",h1.prototype={dump:function(){return this._time=$.defaultTime,this._ease=$.defaultEase,this._delay=$.defaultDelay,this._interval=$.defaultInterval,this._repeat=$.defaultRepeat,this._yoyo=$.defaultYoyo,this._zigzag=$.defaultZigZag,this._autoPlay=$.defaultAutoPlay,this},apply:function(){$.defaultTime=this._time,$.defaultEase=this._ease,$.defaultDelay=this._delay,$.defaultInterval=this._interval,$.defaultRepeat=this._repeat,$.defaultYoyo=this._yoyo,$.defaultZigZag=this._zigzag,$.defaultAutoPlay=this._autoPlay},clone:function(){var e=new h1;return e._time=this._time,e._ease=this._ease,e._delay=this._delay,e._interval=this._interval,e._repeat=this._repeat,e._yoyo=this._yoyo,e._zigzag=this._zigzag,e._autoPlay=this._autoPlay,e},__class__:h1},function(e,t,n){this.current=0,this.source=e,this.type=t,null!=n&&(this.defaults=n.clone())}),_1=((i["tweenx909.advanced.GroupX"]=c1).__name__="tweenx909.advanced.GroupX",c1.prototype={__class__:c1},fe["tweenx909.advanced._GroupX.GroupTypeX"]={__ename__:!0,__constructs__:null,SERIAL:{_hx_name:"SERIAL",_hx_index:0,__enum__:"tweenx909.advanced._GroupX.GroupTypeX",toString:o},LAG:((R=function(e){return{_hx_index:1,lag:e,__enum__:"tweenx909.advanced._GroupX.GroupTypeX",toString:o}})._hx_name="LAG",R.__params__=["lag"],R)}),d1=(_1.__constructs__=[_1.SERIAL,_1.LAG],_1.__empty_constructs__=[_1.SERIAL],function(e,t,n,i,s,a,l,r,o,u){if(this._autoFrom=!0,1==e._hx_index)for(var h=e._from,c=e._to,_=h.pop(),d=c.pop(),p=g1(e.targets);p.hasNext();)p.next(),c.push(d1.clone(d)),h.push(d1.clone(_));$.call(this,e,t,n,i,s,a,l,r,o,u)}),p1=((i["tweenx909.advanced.StandardTweenX"]=d1).__name__="tweenx909.advanced.StandardTweenX",d1.clone=function(e){for(var t={},n=0,i=X.fields(e);n<i.length;){var s=i[n];++n,X.setProperty(t,s,X.getProperty(e,s))}return t},d1.__super__=$,d1.prototype=e($.prototype,{_initFromTo:function(e,t,n){null==this._autoFrom&&(this._autoFrom=$.defaultAutoFrom);for(var i=null,s=0,a=X.fields(n);s<a.length;){var l=a[s];++s;"number"!=typeof(R=null==(B=n)?null:!!B.__properties__&&(F=B.__properties__["get_"+l])?B[F]():B[l])&&(this._fastMode=!1);var r,o="$$$$"==Jn.substr(l,0,4),u=o?Jn.substr(l,4,null):l;if(r=null==(E=n)?null:!!E.__properties__&&(y=E.__properties__["get_"+l])?E[y]():E[l],Object.prototype.hasOwnProperty.call(t,u)){var h=t;g=null==h?null:!!h.__properties__&&(g=h.__properties__["get_"+u])?h[g]():h[u]}else{if(this._autoFrom){if(null==i){i={};var h=$._initLog,c=e,_=null!=$.dictionary.h[c.__id__]?$.dictionary.h[c.__id__]:($._objCounter=1+$._objCounter%33029,$.dictionary.set(c,$._objCounter),$._objCounter),d=h[_];if(null!=d)for(var p=0;p<d.length;){var m=d[p];++p,m.target==e&&(i=m.data)}}var g=Object.prototype.hasOwnProperty.call(i,u)?(_=null==(w=i)?null:!!w.__properties__&&(v=w.__properties__["get_"+u])?w[v]():w[u],this._defaultFrom(_,r)):(f=null==(b=e)?null:!!b.__properties__&&(S=b.__properties__["get_"+u])?b[S]():b[u],this._defaultFrom(f,r))}else{var f=e;A=null==f?null:!!f.__properties__&&(V=f.__properties__["get_"+u])?f[V]():f[u],g=this._defaultFrom(A,r)}var z,A=t,x=!!A.__properties__&&(z=A.__properties__["set_"+u]);x?A[z](g):A[u]=g}o&&(D=r+g,!!(x=n).__properties__&&(o=x.__properties__["set_"+u])?x[o](D):x[u]=D,X.deleteField(n,l))}for(var i={},Q=X.fields(t),s=0;s<Q.length;){var w,y,b,v,C,S,V,u=Q[s],k=(++s,Object.prototype.hasOwnProperty.call(n,u)||(B=n,P=D=null==(E=t)?null:!!E.__properties__&&(F=E.__properties__["get_"+u])?E[F]():E[u],!!B.__properties__&&(R=B.__properties__["set_"+u])?B[R](P):B[u]=P),this._repeat%2==0),M=this._time/this._time,O=(this._odd&&(k=!k),this._inverted&&(M=1-M),k?(this._yoyo&&(M=1-M),M=this._ease(M),this._zigzag&&(M=1-M)):M=this._ease(M),M),c=i,W=null==(w=t)?null:!!w.__properties__&&(y=w.__properties__["get_"+u])?w[y]():w[u],I=null==(b=n)?null:!!b.__properties__&&(v=b.__properties__["get_"+u])?b[v]():b[u],N=1-O;if("number"==typeof I)C=W*N+I*O;else{for(var G,U=0,L=$._rules.length,j=null,H=!1;U<L;)if(G=$._rules[U++],nl.__instanceof(I,G.inputClass)){H=!0,j=G.calc(W,I,O,N,this);break}if(!H)throw k=nl.getClass(I),tl.thrown(this.error("The tween rule for "+k.__name__+" is not defined"));C=j}(V=!!c.__properties__&&(S=c.__properties__["set_"+u]))?c[S](C):c[u]=C}var B=e,T=null!=$.dictionary.h[B.__id__]?$.dictionary.h[B.__id__]:($._objCounter=1+$._objCounter%33029,$.dictionary.set(B,$._objCounter),$._objCounter);if(null==$._initLog[T])$._initLog[T]=[{target:e,data:i}];else{for(var Y=!1,s=0,a=$._initLog[T];s<a.length;){m=a[s];if(++s,m.target==e){for(var p=0,Z=X.fields(i);p<Z.length;){var E,F,D,R,u=Z[p],B=(++p,m.data),P=D=null==(E=i)?null:!!E.__properties__&&(F=E.__properties__["get_"+u])?E[F]():E[u];!!B.__properties__&&(R=B.__properties__["set_"+u])?B[R](P):B[u]=P}Y=!0;break}}Y||$._initLog[T].push({target:e,data:i})}},_defaultFrom:function(e,t){if("number"==typeof t)return e;for(var n=0,i=$._rules;n<i.length;){var s=i[n];if(++n,nl.__instanceof(t,s.inputClass))return s.defaultFrom(e,t,this)}var a=nl.getClass(t);throw tl.thrown(this.error("The tween rule for "+a.__name__+" is not defined"))},play:function(){return $.prototype.play.call(this),this},update:function(e){return $.prototype.update.call(this,e),this},onFinish:function(e){return $.prototype.onFinish.call(this,e),this},__class__:d1}),fe["tweenx909.advanced.TweenTypeX"]={__ename__:!0,__constructs__:null,GROUP:((R=function(e){return{_hx_index:0,group:e,__enum__:"tweenx909.advanced.TweenTypeX",toString:o}})._hx_name="GROUP",R.__params__=["group"],R),ARRAY:((R=function(e,t,n){return{_hx_index:1,targets:e,_from:t,_to:n,__enum__:"tweenx909.advanced.TweenTypeX",toString:o}})._hx_name="ARRAY",R.__params__=["targets","_from","_to"],R),FROM_TO:((R=function(e,t,n){return{_hx_index:2,target:e,_from:t,_to:n,__enum__:"tweenx909.advanced.TweenTypeX",toString:o}})._hx_name="FROM_TO",R.__params__=["target","_from","_to"],R),FUNC:((R=function(e,t,n){return{_hx_index:3,func:e,_from:t,_to:n,__enum__:"tweenx909.advanced.TweenTypeX",toString:o}})._hx_name="FUNC",R.__params__=["func","_from","_to"],R),CALL:((R=function(e){return{_hx_index:4,func:e,__enum__:"tweenx909.advanced.TweenTypeX",toString:o}})._hx_name="CALL",R.__params__=["func"],R)}),m1=(p1.__constructs__=[p1.GROUP,p1.ARRAY,p1.FROM_TO,p1.FUNC,p1.CALL],p1.__empty_constructs__=[],function(){});function g1(e){return e instanceof Array?new JA(e):e.iterator()}function Cn(e,t){var n;return null==t?null:(null==t.__id__&&(t.__id__=p.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&(n=t.bind(e),e.hx__closures__[t.__id__]=n),n)}(i["tweenxcore.FloatTools"]=m1).__name__="tweenxcore.FloatTools",m1.revert=function(e){return 1-e},m1.clamp=function(e,t,n){return null==n&&(n=1),e<=(t=null==t?0:t)?t:n<=e?n:e},m1.lerp=function(e,t,n){return t*(1-e)+n*e},m1.inverseLerp=function(e,t,n){return(e-t)/(n-t)},m1.repeat=function(e,t,n){e=(e-(t=null==t?0:t))/((n=null==n?1:n)-t);return e-Math.floor(e)},m1.shake=function(e,t,n){null==t&&(t=0);n=(n=null==n?Math.random:n)();return t+(-e*(1-n)+e*n)},m1.spread=function(e,t){return-t*(1-e)+t*e},m1.sinByRate=function(e){return Math.sin(2*e*Math.PI)},m1.cosByRate=function(e){return Math.cos(2*e*Math.PI)},m1.yoyo=function(e,t){return t(2*(e<.5?e:1-e))},m1.zigzag=function(e,t){return e<.5?t(2*e):1-t(2*(e-.5))},m1.mixEasing=function(e,t,n,i){return null==i&&(i=.5),t(e)*(1-i)+n(e)*i},m1.crossfadeEasing=function(e,t,n,i,s,a){null==a&&(a=1),null==s&&(s=0);i=i(e),s=s*(1-i)+a*i;return t(e)*(1-s)+n(e)*s},m1.connectEasing=function(e,t,n,i,s){var a;return null==s&&(s=.5),e<(i=null==i?.5:i)?0*(1-(a=t(e/i)))+s*a:s*(1-(a=n((e-i)/(1-i))))+a},m1.oneTwoEasing=function(e,t,n,i){return e<(i=null==i?.5:i)?t(e/i):n((e-i)/(1-i))},m1.binarySearch=function(e,t,n){var i,s=0,a=e.length;if(0==(n=null==n?0:n))do{}while(e[i=((a-s)/2|0)+s]<=t?s=i+1:a=i,s!=a);else do{}while(e[i=((a-s)/2|0)+s]<t?s=i+1:a=i,s!=a);return s},m1.polyline=function(e,t){var n;if(t.length<2)throw tl.thrown("points length must be more than 2");return n=e*(e=t.length-1),null==(e=e-1)&&(e=1),t[e=Math.floor(n<=0?0:e<=n?e:n)]*(1-(n=n-e))+t[e+1]*n},m1.bezier2=function(e,t,n,i){return(t*(1-e)+n*e)*(1-e)+(n*(1-e)+i*e)*e},m1.bezier3=function(e,t,n,i,s){var a=n*(1-e)+i*e;return((t*(1-e)+n*e)*(1-e)+a*e)*(1-e)+(a*(1-e)+(i*(1-e)+s*e)*e)*e},m1.bezier=function(e,t){var n;if(t.length<2)throw tl.thrown("points length must be more than 2");return 2==t.length?t[0]*(1-e)+t[1]*e:3==t.length?(n=t[1],(t[0]*(1-e)+n*e)*(1-e)+(n*(1-e)+t[2]*e)*e):m1._bezier(e,t)},m1._bezier=function(e,t){for(;;){var n;if(4==t.length)return n=t[1],((t[0]*(1-e)+n*e)*(1-e)+(i=n*(1-e)+(n=t[2])*e)*e)*(1-e)+(i*(1-e)+(n*(1-e)+t[3]*e)*e)*e;for(var i=e,s=[],a=0,l=t.length-1;a<l;){var r=a++;s.push(t[r]*(1-e)+t[1+r]*e)}e=i,t=s}},m1.uniformQuadraticBSpline=function(e,t){var n,i,s;if(t.length<2)throw tl.thrown("points length must be more than 2");return 2==t.length?t[0]*(1-e)+t[1]*e:(null==(i=(n=t.length-2)-1)&&(i=1),(i=(e=e*n)-(n=Math.floor(e<=0?0:i<=e?i:e)))*i*((e=t[n])/2-(s=t[n+1])+t[n+2]/2)+i*(-e+s)+e/2+s/2)},m1.frameToSecond=function(e,t){return e/t},m1.secondToFrame=function(e,t){return e*t},m1.degreeToRate=function(e){return e/360},m1.rateToDegree=function(e){return 360*e},m1.radianToRate=function(e){return e/(2*Math.PI)},m1.rateToRadian=function(e){return 2*e*Math.PI},m1.millisecondToBeat=function(e,t){return e*t/6e4},m1.beatToMillisecond=function(e,t){return 6e4*e/t},(i["tweenxcore.structure.TimelineSearchResult"]=Mf).__name__="tweenxcore.structure.TimelineSearchResult",Mf.prototype={__class__:Mf},p.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(Jn.now=performance.now.bind(performance)),i.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:i.String=String,enumerable:!1,writable:!0}),String.__name__="String",(i.Array=Array).__name__="Array",(Date.prototype.__class__=i.Date=Date).__name__="Date";var f1,A1={},x1={},w1=Number,y1=Boolean,b1={},v1={};pp.content=[{name:"R_preloader_background_jpg",data:"/9j/4AAQSkZJRgABAQAAAQABAAD/4QhtRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAhAAAAcgEyAAIAAAAUAAAAk4dpAAQAAAABAAAAqAAAANQALcbAAAAnEAAtxsAAACcQQWRvYmUgUGhvdG9zaG9wIDI2LjggKE1hY2ludG9zaCkAMjAyNTowNzoxMCAxMzo1OToxNgAAAAOgAQADAAAAAQABAACgAgAEAAAAAQAAB4CgAwAEAAAAAQAABAAAAAAAAAAABgEDAAMAAAABAAYAAAEaAAUAAAABAAABIgEbAAUAAAABAAABKgEoAAMAAAABAAIAAAIBAAQAAAABAAABMgICAAQAAAABAAAHMwAAAAAAAABIAAAAAQAAAEgAAAAB/9j/7QAMQWRvYmVfQ00AAf/uAA5BZG9iZQBkgAAAAAH/2wCEAAwICAgJCAwJCQwRCwoLERUPDAwPFRgTExUTExgRDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBDQsLDQ4NEA4OEBQODg4UFA4ODg4UEQwMDAwMEREMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAFUAnwMBIgACEQEDEQH/3QAEAAr/xAE/AAABBQEBAQEBAQAAAAAAAAADAAECBAUGBwgJCgsBAAEFAQEBAQEBAAAAAAAAAAEAAgMEBQYHCAkKCxAAAQQBAwIEAgUHBggFAwwzAQACEQMEIRIxBUFRYRMicYEyBhSRobFCIyQVUsFiMzRygtFDByWSU/Dh8WNzNRaisoMmRJNUZEXCo3Q2F9JV4mXys4TD03Xj80YnlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vY3R1dnd4eXp7fH1+f3EQACAgECBAQDBAUGBwcGBTUBAAIRAyExEgRBUWFxIhMFMoGRFKGxQiPBUtHwMyRi4XKCkkNTFWNzNPElBhaisoMHJjXC0kSTVKMXZEVVNnRl4vKzhMPTdePzRpSkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2JzdHV2d3h5ent8f/2gAMAwEAAhEDEQA/AOfqdurjuCnlVaLIJadQ5WWvrHOpPAVXBk4SYnY6jzdDmcPFUh00Pkl9OGB9jgxp0E8/cn9OSAx4f8NPyqjZkF7yT9EaAI+PaC6OJRlzEwelLRyseHrbYu2tGzYWu8SZQHEzKObASHWDdt8UO51RM1yPLspceUSGlsGTEYnUhHKUpkgpLY6ZJJoKIKXkSgSEgE7MJSlLaU4akSkBYAlEbU6JSbE6qe9RyJ6MkQOrES0bok+fZDszPaPftk6ho7fFSuLnVuDeSNFQhxaGQd3gop3bLCqS5QqG11ZJJncSZMqqdXNCsXMLKmNPZVnOggjkJEIvVOUMvaHASJlIske4k+UqOxg0hRsj/9DkGy6I5U3eq2C4EHsjCllbnBjpa7jyVl7Wt2WvMbdBOvZUqdQ5OlaFzRI0Km15aQR2V94osbuLAT2IUPsLCJJgnw4QKhkHVZlwd804DT8lXsqNOsyOJTstg6lHHLgl4HdblgMkdNxsm2hOAoPsq2yHgE9lOkFzdVZ4x33afAe2zIHyU97ikGqW1HRNnuwhKFKEiEFBjoknUSJBHigleREyomytupIlVQx/ugyGmIRK20kQR7vNMEr6LqpBk3+q8R9Fo0Vdw1HmVbyWtFTYhVHzHzQKQUwA7KJ5CbYSNXFMamSo2Z//0eXA926VZeTdQ1mk+fkqFbjpqiOyrgADAA40VJ0SG1YxzcUMI1B7IYuIxw1pIfKC7IL/AKZKk3JAEAAoElVMcy0mmsTr3VbaS3dKtWvrsGoAKCa2jh2iQkmmdFAj1H8DhGrtdvMGAdFFpIY0A8pwSeWwQhZu1aVR6t6hpgkndPCHblBlvp7Z8SpNtZXVBcJVNxD7C7drKlM6iK3YhDU2NHQGoBHdLYSnqc1zBrJhKywMbJ+5P49LWCGtMHMI5UCDCb7UHGCE5taeE33Y91/sy7NC5mRW8w76XEKu82z7yQVoXkF9Z8CivbW8Q5spvHHurhPZyWEk6klO7j5qzk41dY3MkT2VZ3CNg7IIIKTe2P8AYol4ng/cmNrY0Teq3xTKZX//0uPZppwp2AlvCkx9gkECTzpH8UZu9zSw/RI0VKnR4r6NNwJOhjRWMdm5vl3KDBJII47orHFtYAKCLOrC+PV2tUXNIbPgkTLy6VFzp0PBSXApwdG/BSa8mJKFu4HgE7TqEldQncWF0FN+iAIiD2QXNJBIJ3SnY1x+mOO6FhWrYrsIaCCov3PO4OnyKTa2xoVLYEziC/6IHbgdRCXquCO5gIhCcyCNo+JREgVcTA2BxE6IgtA4dKDaGiwN8Ug2oEye6dos4tTS97y4Az+KqvdqivdXtMczp8FXJ1T4/Ktu5X4MpTSmLlGUqXW//9PlDb9w/FToeHmD2Vb1K7A4ayw6wP8AXcpV27ASNe0k/PsqdN9ldU8WuLRIOqiGuPZEFweC4D7+6W8ppteACGHpO7p/QB5KW890t6GqWQqA7qTWHuoC0KQsQ1TaUNaFLRB9RMbEKUnkJF4Vc2eagbQlwqbJeFA2BVXZAHdBfkFxgHROECq2WQ5zrNzShb7E+9sQnlqkBrosMQWIsd34TEymc8Tookpy3ho6FlqnQ9xHBTbnJUq3/9Th/wDCPme3hCkzfHt2jj6Wp/k/yFgJKo33o6/Vk7+fP+Cmd65lJMO7INnozuUfcueSSU9ENycblziSSnpPemO9c4kkp6E70J+9YaSIU67t06pCIWQknodfRRMrKSSQXT1S1WYknLXS1TarOSSQ/wD/2f/tEL5QaG90b3Nob3AgMy4wADhCSU0EBAAAAAAADxwBWgADGyVHHAIAAAIAAAA4QklNBCUAAAAAABDNz/p9qMe+CQVwdq6vBcNOOEJJTQQ6AAAAAADlAAAAEAAAAAEAAAAAAAtwcmludE91dHB1dAAAAAUAAAAAUHN0U2Jvb2wBAAAAAEludGVlbnVtAAAAAEludGUAAAAAQ2xybQAAAA9wcmludFNpeHRlZW5CaXRib29sAAAAAAtwcmludGVyTmFtZVRFWFQAAAABAAAAAAAPcHJpbnRQcm9vZlNldHVwT2JqYwAAAAwAUAByAG8AbwBmACAAUwBlAHQAdQBwAAAAAAAKcHJvb2ZTZXR1cAAAAAEAAAAAQmx0bmVudW0AAAAMYnVpbHRpblByb29mAAAACXByb29mQ01ZSwA4QklNBDsAAAAAAi0AAAAQAAAAAQAAAAAAEnByaW50T3V0cHV0T3B0aW9ucwAAABcAAAAAQ3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQHLAAAAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAAAAAABBjcm9wV2hlblByaW50aW5nYm9vbAAAAAAOY3JvcFJlY3RCb3R0b21sb25nAAAAAAAAAAxjcm9wUmVjdExlZnRsb25nAAAAAAAAAA1jcm9wUmVjdFJpZ2h0bG9uZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABABLAAAAAEAAQEsAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAABaOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAAOEJJTQQCAAAAAAAMAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAGAQEBAQEBOEJJTQQtAAAAAAAGAAEAAAABOEJJTQQIAAAAAAAQAAAAAQAAAkAAAAJAAAAAADhCSU0ERAAAAAAAEAAAAAIAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAANdAAAABgAAAAAAAAAAAAAEAAAAB4AAAAAUAGIAYQBjAGsAZwByAG8AdQBuAGQAXwBwAHIAZQBsAG8AYQBkAGUAcgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAHgAAABAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAABAAAAAAAUmdodGxvbmcAAAeAAAAABnNsaWNlc1ZsTHMAAAABT2JqYwAAAAEAAAAAAAVzbGljZQAAABIAAAAHc2xpY2VJRGxvbmcAAAAAAAAAB2dyb3VwSURsb25nAAAAAAAAAAZvcmlnaW5lbnVtAAAADEVTbGljZU9yaWdpbgAAAA1hdXRvR2VuZXJhdGVkAAAAAFR5cGVlbnVtAAAACkVTbGljZVR5cGUAAAAASW1nIAAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAQAAAAAAFJnaHRsb25nAAAHgAAAAAN1cmxURVhUAAAAAQAAAAAAAG51bGxURVhUAAAAAQAAAAAAAE1zZ2VURVhUAAAAAQAAAAAABmFsdFRhZ1RFWFQAAAABAAAAAAAOY2VsbFRleHRJc0hUTUxib29sAQAAAAhjZWxsVGV4dFRFWFQAAAABAAAAAAAJaG9yekFsaWduZW51bQAAAA9FU2xpY2VIb3J6QWxpZ24AAAAHZGVmYXVsdAAAAAl2ZXJ0QWxpZ25lbnVtAAAAD0VTbGljZVZlcnRBbGlnbgAAAAdkZWZhdWx0AAAAC2JnQ29sb3JUeXBlZW51bQAAABFFU2xpY2VCR0NvbG9yVHlwZQAAAABOb25lAAAACXRvcE91dHNldGxvbmcAAAAAAAAACmxlZnRPdXRzZXRsb25nAAAAAAAAAAxib3R0b21PdXRzZXRsb25nAAAAAAAAAAtyaWdodE91dHNldGxvbmcAAAAAADhCSU0EKAAAAAAADAAAAAI/8AAAAAAAADhCSU0EFAAAAAAABAAABTU4QklNBAwAAAAAB08AAAABAAAAnwAAAFUAAAHgAACfYAAABzMAGAAB/9j/7QAMQWRvYmVfQ00AAf/uAA5BZG9iZQBkgAAAAAH/2wCEAAwICAgJCAwJCQwRCwoLERUPDAwPFRgTExUTExgRDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBDQsLDQ4NEA4OEBQODg4UFA4ODg4UEQwMDAwMEREMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAFUAnwMBIgACEQEDEQH/3QAEAAr/xAE/AAABBQEBAQEBAQAAAAAAAAADAAECBAUGBwgJCgsBAAEFAQEBAQEBAAAAAAAAAAEAAgMEBQYHCAkKCxAAAQQBAwIEAgUHBggFAwwzAQACEQMEIRIxBUFRYRMicYEyBhSRobFCIyQVUsFiMzRygtFDByWSU/Dh8WNzNRaisoMmRJNUZEXCo3Q2F9JV4mXys4TD03Xj80YnlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vY3R1dnd4eXp7fH1+f3EQACAgECBAQDBAUGBwcGBTUBAAIRAyExEgRBUWFxIhMFMoGRFKGxQiPBUtHwMyRi4XKCkkNTFWNzNPElBhaisoMHJjXC0kSTVKMXZEVVNnRl4vKzhMPTdePzRpSkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2JzdHV2d3h5ent8f/2gAMAwEAAhEDEQA/AOfqdurjuCnlVaLIJadQ5WWvrHOpPAVXBk4SYnY6jzdDmcPFUh00Pkl9OGB9jgxp0E8/cn9OSAx4f8NPyqjZkF7yT9EaAI+PaC6OJRlzEwelLRyseHrbYu2tGzYWu8SZQHEzKObASHWDdt8UO51RM1yPLspceUSGlsGTEYnUhHKUpkgpLY6ZJJoKIKXkSgSEgE7MJSlLaU4akSkBYAlEbU6JSbE6qe9RyJ6MkQOrES0bok+fZDszPaPftk6ho7fFSuLnVuDeSNFQhxaGQd3gop3bLCqS5QqG11ZJJncSZMqqdXNCsXMLKmNPZVnOggjkJEIvVOUMvaHASJlIske4k+UqOxg0hRsj/9DkGy6I5U3eq2C4EHsjCllbnBjpa7jyVl7Wt2WvMbdBOvZUqdQ5OlaFzRI0Km15aQR2V94osbuLAT2IUPsLCJJgnw4QKhkHVZlwd804DT8lXsqNOsyOJTstg6lHHLgl4HdblgMkdNxsm2hOAoPsq2yHgE9lOkFzdVZ4x33afAe2zIHyU97ikGqW1HRNnuwhKFKEiEFBjoknUSJBHigleREyomytupIlVQx/ugyGmIRK20kQR7vNMEr6LqpBk3+q8R9Fo0Vdw1HmVbyWtFTYhVHzHzQKQUwA7KJ5CbYSNXFMamSo2Z//0eXA926VZeTdQ1mk+fkqFbjpqiOyrgADAA40VJ0SG1YxzcUMI1B7IYuIxw1pIfKC7IL/AKZKk3JAEAAoElVMcy0mmsTr3VbaS3dKtWvrsGoAKCa2jh2iQkmmdFAj1H8DhGrtdvMGAdFFpIY0A8pwSeWwQhZu1aVR6t6hpgkndPCHblBlvp7Z8SpNtZXVBcJVNxD7C7drKlM6iK3YhDU2NHQGoBHdLYSnqc1zBrJhKywMbJ+5P49LWCGtMHMI5UCDCb7UHGCE5taeE33Y91/sy7NC5mRW8w76XEKu82z7yQVoXkF9Z8CivbW8Q5spvHHurhPZyWEk6klO7j5qzk41dY3MkT2VZ3CNg7IIIKTe2P8AYol4ng/cmNrY0Teq3xTKZX//0uPZppwp2AlvCkx9gkECTzpH8UZu9zSw/RI0VKnR4r6NNwJOhjRWMdm5vl3KDBJII47orHFtYAKCLOrC+PV2tUXNIbPgkTLy6VFzp0PBSXApwdG/BSa8mJKFu4HgE7TqEldQncWF0FN+iAIiD2QXNJBIJ3SnY1x+mOO6FhWrYrsIaCCov3PO4OnyKTa2xoVLYEziC/6IHbgdRCXquCO5gIhCcyCNo+JREgVcTA2BxE6IgtA4dKDaGiwN8Ug2oEye6dos4tTS97y4Az+KqvdqivdXtMczp8FXJ1T4/Ktu5X4MpTSmLlGUqXW//9PlDb9w/FToeHmD2Vb1K7A4ayw6wP8AXcpV27ASNe0k/PsqdN9ldU8WuLRIOqiGuPZEFweC4D7+6W8ppteACGHpO7p/QB5KW890t6GqWQqA7qTWHuoC0KQsQ1TaUNaFLRB9RMbEKUnkJF4Vc2eagbQlwqbJeFA2BVXZAHdBfkFxgHROECq2WQ5zrNzShb7E+9sQnlqkBrosMQWIsd34TEymc8Tookpy3ho6FlqnQ9xHBTbnJUq3/9Th/wDCPme3hCkzfHt2jj6Wp/k/yFgJKo33o6/Vk7+fP+Cmd65lJMO7INnozuUfcueSSU9ENycblziSSnpPemO9c4kkp6E70J+9YaSIU67t06pCIWQknodfRRMrKSSQXT1S1WYknLXS1TarOSSQ/wD/2QA4QklNBCEAAAAAAFcAAAABAQAAAA8AQQBkAG8AYgBlACAAUABoAG8AdABvAHMAaABvAHAAAAAUAEEAZABvAGIAZQAgAFAAaABvAHQAbwBzAGgAbwBwACAAMgAwADIANQAAAAEAOEJJTQQGAAAAAAAHAAYAAAABAQD/4RGeaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMyA3OS45NjkwYTg3ZmMsIDIwMjUvMDMvMDYtMjA6NTA6MTYgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjYuMiAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDI1LTAyLTA3VDEzOjA0OjI3KzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyNS0wNy0xMFQxMzo1OToxNiswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNS0wNy0xMFQxMzo1OToxNiswMjowMCIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjVmNTcyNzYtZTdiMi00YmEzLTg2NDgtMDQ3YzhhZGQyMzAzIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZWY4YjEzMDctZjQzMy1jMjRhLTkzZDItZTFmMDYyZmY2MTllIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YmRmMThhMTMtMzUyMy1kMDQwLWJiY2EtYmE3YWQ4ZWU0ZmZlIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiZGYxOGExMy0zNTIzLWQwNDAtYmJjYS1iYTdhZDhlZTRmZmUiIHN0RXZ0OndoZW49IjIwMjUtMDItMDdUMTM6MDQ6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNi4yIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZGQ3ZGFkNTEtZDBiNy04ZTRlLTgwOTktNzE1ZTM3ZDYwNmM4IiBzdEV2dDp3aGVuPSIyMDI1LTAyLTA3VDEzOjM3OjUwKzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjYuMiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBkNmNjZjdkLWYzYTAtNDBjYy05MjIyLTljODhmMjQxOGE5YiIgc3RFdnQ6d2hlbj0iMjAyNS0wNy0xMFQxMzo1OToxNiswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI2LjggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjVmNTcyNzYtZTdiMi00YmEzLTg2NDgtMDQ3YzhhZGQyMzAzIiBzdEV2dDp3aGVuPSIyMDI1LTA3LTEwVDEzOjU5OjE2KzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjYuOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MGQ2Y2NmN2QtZjNhMC00MGNjLTkyMjItOWM4OGYyNDE4YTliIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTNlZTQyOWUtZmU5ZC01NzRkLTlmYmItMzEwNDE5OTFjODk5IiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YmRmMThhMTMtMzUyMy1kMDQwLWJiY2EtYmE3YWQ4ZWU0ZmZlIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////7gAOQWRvYmUAZEAAAAAB/9sAhAAKCgoKCgoLDAwLDxAOEA8WFBMTFBYiGBoYGhgiMyAlICAlIDMtNywpLDctUUA4OEBRXk9KT15xZWVxj4iPu7v7AQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAQAB4ADASIAAhEBAxEB/8QAGgABAQEBAQEBAAAAAAAAAAAAAAECAwQFBv/aAAgBAQAAAAD8pb6acgAAoApUFAEIBEAgAAAAIFAAAAAAAAALVAFut9LoEkznHDz443NAiYg6dNVAgiEQ9lvo0OGhQAABSiKChENbzzkABKQUAEAFAigAAAAAIoFUUC3e9W0RMzPHjz5YxrNCEc0XfS7QgSEIj2tdt05WFAAAFCoKtWrMZPRnlmQAQAoBAAVAoBCgAAABKAtApTW9aWkTMzy5c8ZzbzyCEc4XbruCBIQiPYvbpanOwAUAFgoqLbddum2eHmiEQCAAKQACoCgQCgAAAlACqAKut6qiSTljlnF303ceLECEc4NdegQIhCI9bXTtVnHpIAAKKAAt6d+1Jnz+fJCAQAAAAAoEACiAUCFIUApShC27tBJjPPPM9HS1MeHnkQhzg6ddBAiEQj1Nb72mMdEgACqUBAvbvu1OfDnnMQQAAAAFBFEAAUgACkpCgFUoAa1ZjUkkiVwnX0a1WceDngghzidb1oQRBEI9NuvRpTz9VkBFFqta1SZwkL06UznMkyiCAgURYoAAAAFIAAAABQq0oQLdznjMZXtvUxx59e+tak5+HlmJAmIu9dKEEQhEPRbfTql553FSAW29OvXQDPHjkW1ISISEEAWAKAAAApAAAAAAoqqtUSQutZ44zq4b76THlm+t725x4eWZECYi73uhCEEhDvbe/S0eftIpAtvT09SY53paknmyokkQCRCAAAFAAAAAAAAAAqlWtatJM5Lqznz1XPn061nlwTXfp01MePjhICYjWumlIIhCFxn01rt1tpjG0FQuu3fpZOXm1nPs1MxubtY58cSQUiIgAAAAUAAAACKAAClKrWtaoTOIurJJM8I3M4znK+nrHbHk5YSAmcta62kEIjV55xzr2renfVDjuwFL6N72nPwZzdbK7XpvWtJnzccyKBIgCAoAFAAAABFixQAKUUutbtoSYyuiM55cJkTMyvb0c8+rPl54iBGJOmuqoIhK5crnMj6K3Xp1aOc2gLe23Tcz4/Mtttt11dN63pnHl5ZhVgkQIAFACwoAABBUAoAUpRbrerQJmRSM8uHLMtszmRrc36s8OeJARnM666AJGpjjzSUT3rb6d2nHrz1bAb7F6Tw85Lbatveuut7TPHy5lUQhEQAAFAFAABCoAKAKpQXW9WgqSQJMcuPHLe5GeeDXTp6b5+OJARnM663RGs4xyzQzBr16W9+trPDtc7pC76E15+GS221p121vfSycvLlbbJmQIhAAAoAUAAgABUUKooVda1QUSQJjlz48pelZwnOXXX1befjjIIZxd9NKznPOCSDVi3vNr1722eTt1y2VNbqZ5+VS222276XOut0mOE106Uxx55gCQAAFAKAEACoKJQpRQq61bYAEEmOHHlib1tymdc1127bnDniQIZxd7TOSJmlsW203G7r03RjHfONa106ac8zOfLz0tattW761lvWmcumrozjz4yiAQRQBQAACgCFCUFKUFt1dLCACLJz4+bllrXWc8mTfTr0nHnjIITmWjIuottsINo3fRvSqzZr02rz55xy8zS222223tUaDbV1dJjhzmZIgAIoCgCgAAAAKUUBdXWlhAEAzjj5eeW9bTLGV133pwxiQRLnFzS20ttEIQ3Brt2ulpm+izK4mM+XDS222223tay1VzelutMs555zzzABFApFAKAAAABSlAVdW2iIABJjh5+UXpozzka136XPLnjIRjc5aku61bQgRENBXXrd6q530SJM45eeatW2rbbrrus1VG7dVJnOOeMyAAKUAFAFKIgAFKUUC22qQIAQznjw5ZW7rGcy66duicefNEHPpnnqG7vQBBEQ0C67062s98pJM48+Jq1attNb31tmbaJq2qmcc85kAAKqkAoFFtokkLCKKUKBVUKEAIJnlw54G6zgvTp10zx54ygmNOdG70oARDWMtgt67tb1capJnOPNGqVVq3WunbRmrSYttSZzmRAAKKKAAVdW6omcwJBRQUBVAAAIGccuPORrWEXfTrus8eWMoM5t50dL0ABJJnN1dAXXa1d6kmdGc8eebqiltW616NaTNtJOYEkQABQVQAoW6utW0mcZyECgFVFAAAABM45csSKi7313oxy44yhMy3nZXTWwBCIZmtQVb11au2Jz6kxwzndUKtW3fbpozqaJOcgRAAFAooFAt1rWtWiZxjMEKCoVQAAAAAmcY45zJV6a671Uxy4YyhMy3mLvpoAWYRpkoKuu1U3z511rn5srooVVt307aqZ2EzzQgAAUCiigUuta3aoYxjAAoACgAAAAEznPPnmNb301q1M8vLjKIwXAu+mqSQZbiIKBV6btGManTU48otpQq1db7b0ZtpJjCAAAoFBaFULrW9KCZxjIBQKRQAAAAAJJnOcNb3d3VmccPLiQjEtwLrVDWgiIgKFLveicyujzZi6ooVV1rtvWjOlSZwgQAKCgpQtULrWrREZznIKKRRKAAAAAAJJIutXSmOHkxmQjEawHXpQBCEgloUW70zhbcueS6oUKrWt9daqNCSYCAABQKKVqqF1aISSSAURQAAAAAAKQgaW0zjh5cZgTOW+aW9d0AIiIJaCiqRaYyhq0UFW3XXerShJmkQQAKCgpbbQVQESAAAAAAAAAKAgpQzz4ebECHNrCXXXVABISDOlCgoFc4K1QUFtvTprS1RIzaREAAFiiqttEKACAAAAoAIABQAAAExz8/DIIZmuaOu9gASM5omiiwoUSZBdKChVu+mtVaoSKCEIAApSqoACgAAAKAABABQAABCTHLy8wEMsDp00ABImswzaoBQsSQDVqKClut71VtoJNKEIQAAoVQAUKAAAAoAAAAAAAQjOefn45UEI5jp00ABIgjF0oKBUTIUaFAot3rdq22kS2gEQQACigCilAAAAFAIUAAAAQESZzjhyxFoQjmOnTQAESEMNVSqUhEzSkWqAKXWtaq3VUiatoREAJQAFBRVAAAAAAAKBACoAgSTOOXLGJLoEIxF30tACIhDDVpa9HFRJJBdt8ctKACrrWrVurSF1ahCBFAACgqigAAAAAAAAIFAJCRM558sZzC0CIxF30tACEhDC6q116R6s8s884i71M5ZjSiVKFatult1ag3aJEABQBQUoooAACFCAAAATMLoIiRJJnOcYzEKBCMRbu2y6VCJEJcGrbrp0up6tcumOXnxrUyzJIqgigattW3WlhW7UkQoQqgUFKUKAAAAEVAAACZziXWqiSJmSTMkzAJAQjEm97tAELcYzM56l1rp10tevXPXLy87rr0mOeJMxSEUFLaq3V0sLrVSICxC2gKKpQoAAAAAQAAAznnjN1qpJJmIiEktoxmSkIzmdNboW2ZkzjOQTvF1rvvRl79Yvk8+O/q3omOfPniEkQFQtWrbdWot3bIgCSW20KKpSgACiKRYAAEAATOOWMtKkSBQJNb1WePPMqCM5b3uyMzOFRCSD1SNa9OqznXv1OXHny37Om6kmcZxjOJmSBSSlW2220W7pEBMyW60qiqUoFAAAAgAAQAEzz5c8FCkt1bVsnPe9pjhzwIIzmaCwEkBaPbyzGvVrUznfurzScO19W9BM88yTPPGJNBMwVVq3SlutWoiJMZNb1bRVUoUABSKEAEABAAMc+XPGSq1S9NaqkzjW9Jjz8sCBM4TSoBaIC37Xk82WvTqleu44758fTnffVomc5kxzmciMySAqrbbS3eqIkmcZzdb3q1VUqgKAAAIAEACAAzjny55hbdWtb6WqkzjWtJz4cc5AScyW20oBVD688PNe+rS+pzm+fH0Dtq0STGOGTWtamM5xMyRFVVttXW7oSTOcZy1ve7atKooCgEAACAgAgWAmccufOLaW3fTeqJM5btzz4csZAScyb0qrVAhD7vLnzxjpaV6czoxz66zM9tWiZzy5TrvSkkmMYzjMirStWtXerSTOc4yb3rWlqqUBQAAAgEAIARUBMc+XPN1Ui3fTerRM4utM48/LGQEnMnTW7VQCERfu5zM+cpb3x06IiYvPfS0mcc89d6tWJJnOM454zItWrq23WtaqSZzjMa1vWrapQUAAACVAIAQICwEzz5c861tnEXW97ttTOLq3OPPyxkBJzHTXRQBCRD7knLnkpb3namZmMku7c55Tr01pSEmcc84xzxClW26tutapJM4zGtb3q1SlAAAAAICACBAAM8+XPN6bucZi3Wt61UmWrc44ccZAScx03uxGgRERfp5xqIVq+nWqzjyw1prSZzHTe9UBM5584zy5Ziqq2223WhJnOY1re9a1VCgKAAIAAhACBAAM45cs631ucRmF1vehhrSc+HLGQEci73uWgEhEX3wAutejejHPyZyt316VnOL01u2gkznnNTHDjgUpVqramZmLrpretbuhQKAAAEAAgQECAAzjlyzevSsExmS63rVZaqY4cs5ARzi9N60QBERF9qAtt36N6TPLxc826329Gpnlz1rerrQJM4mk5+fjiFAKBJEt306a1db1qgKKAACBAAQECBAAmOXLF6dNMkxMZLremVqZ5c8wCHI1ve6QCESF9kJI6W636N6TPLw4wdOnfvtz8+Mt7303okmczWmeXm5c4CCBBBdb69Nl1vpqkRbaALAAgIAEQCBAAmOXLDp00yTOc5mTWrIsmcsiUhzTW97qAEREPYjnmt73d+jerM8vFz5r06+jtpz4cMLvfXtuzOc5zremeXl44yIhAhCta6dOnQy106a0mYa3qgAAgCBBKJAIEADOOXLDe9MxJmYmclEIaCUhzTeumqIEIiD2JOUXXTenq3uzPLx88S9Onp67mPP58ZuuvXvu5xxxLvptnj5ePOQIQIKutb69N6mczXTpqpnLW+m7QBABAIIAhBAQATGOXLm1rUzEkzJmQALuiURzTeumqIEJCD2SMc7vW7b6Ou6xz8vPGXTp6uupjz8OWbrp377Z48MS66dtZ4eXhiQAQFau976dNSYzNb3smct9OvTVCCQqiEAgQEQQEAJnHLlyxLbJEiRIIBdbUlEc06XposCERA9ach1trXT0a0xz8mMxvr6emmOHDnhrp377Y4efnLvr23nz+XjzQq2RAtutb303pM4yut6pJN9evTVCJJI1bQhAQQEQICAJjnx5csQsQggQKW7UlEczet6AIRmFX1Ji221bfTtrHHy5Zuuno67mOHLnmXp377mOHn5x06ejWfP5eOILdEkRbda3vpvSZznK61q6qNdenTQRM5zmN61qgQhAQQggICyY58eXLGRAAIAq7oCHM3regCQCQ9ZFVVO3Tpc8OGMy66de3Rz4csZzrp37bmOHDnHTp33jzebjmC61bM5hbrW99N6M4zmLrWtb1U106bpDOcY55l303u6CBCAQIgQAJnnz5csYkhAAAirugIYl1rdoQIkEX1gpVTp162cuWZJd9e2pz8/LOZrXfrtjjyxlvp31jzeblmRbrW0mYW6106b3c5znOS61rfTYu+mxEzz5csZmt76dOmqECIFAkSBACTOMc+eMZkiAQAirugIYl1rdAhChmPYChWd9uumcySXe93PLjyxk106dWOXPOW+na483n5ZhbretZmYW7306brGc5zC61rfTdjXTeqiTnx48sRddOnXrvQIEFUCSSEAgJnOcc+WM5REggIFu1Ahiat3VWSRGZmQPpClJqL260KW2pz5c+ecGum7nniF6dLjz8OeYW63szIXW+nTpqZziZkNXV3vel1vegZ5ceHHMa1rp269dUggKpQjMzAgIEZzz5csZVMySICBbtQIYlrVSSEQgD6KqKzvNvo3zLvVtqzOcc+eOca1bJmDWrnhy55S263q5Zi3fTp02mM5zmFtt1re9Xe91SZ58PPywt1rp27ddAgCqUEmZmBACEnPlx5y6rOc5mUggW7oEJmRbQgpAF9dqqFl7dbiS3pdWpM5zz5YkW6IiFZ5c8Zhda1bJIu99Ou9M4zM5hVW63ve971aGeXHz8sLdb6du3TQggtBSjMznIBAgmOPHnNdN2ZxjOJmSIFu6lEsmZG9BQBBTd1uqUdO+qzzLvWqznOeeM5zdb1aRJJmZxjGZF1qiQ1vfTrus5kzmAVrXTpve9Whnlw4csmtdOnXt0oQCqIKqZzmAgIDOOXHlN9eu0xnnjGcTMhFuwVLJmRrdpQIIFl3dNVS+jeqznJvdTnzzmZzm66dNUEiZzjnjOcwqiF1rp06bqSSZioK10306b1ViY5cOPLK61vr17dNCEKogFGZmAhAQmOXHlnfbt0rOc4xjGMZmUVoUpGJLvdoEIAM3VujVt323SZkjWrOWJJnNb6dNWhETOefPnmSIAW7303qhJDSQrWt9Om9UTPPjx5c4Xe+nbt03UICkAKkmRSSBBJnlx4zXbt10ZkzjGOeM5zmLUWqRiTWuloSCADF1auel2310TOcyXppM5kki76b0oBJMc+fOJmIBbvfTWpFBaZW23e+u9aSZxy48ueYXWunbt13bKkFIBASQtJMoAmOfDlnXbt11YiZmcYxzxnMlkNKSZk3emgkEBFMW21L0tuiRmQu7UAXWraUBM8+eZJJJAW66dNXOTRLagtut76dNakxnHLlyxBbrfbv23QSKRBEBEW0mZEAY58eWN9e/TRURM5zjHPnnMmTSkmZN63aiCAlSsLq0brOsohK1rQAq20pSqzjEyiSSAuunTczg0hpRF1ve+m91nnnHPnyyUt327dt0IiogmZEUhbSSJAGefHlnfXt0tAJJnOccueMZltImY1rdIQgAMrdLVrOKQDWtKUKAFWqZzCJGUBrp03MYmrILaQ6b6b6b1qY55zjnzyql317dtUElhBM4zkFKtESQUZxy4zXXr00KBEmc45cMYlVCZjV3RmCSqIiq1ba1nOSANbtAUABbQkAkRImunTcxiaszJV1tJd9em97tmMYmOfPNtF3169d0EIQmcYxmC21apIQUZxy5y9eu7QFITOOfn5ZzVgmY1bZFJMm7RJc2tW1bJiAQatpVFCAtUACCJJenTcxiaMyRd7qXp06b1qpjGM554i2q3069N2qgREmOfPEkLdW1QIFGc8ucvTpvSgASY5cOeIsEZjVIkENaomDVrVpoZkhELaFBRQtqgigCSSa6b3MZNJJM3XTUmt9d6tSYxnOcZlq23W+nTd1aBEkxzxzzJBdatAoUExz5y9Om6oADOeXDnnICQIEEVQzK6Z1bqltRJGZE1agqKFKtABShEkXp11MYXYkyu9JenTQkznOc5mVW3Vu99Na1dVRJM55455kiRdXVCigpM8+eb06btAKgznn58YlgREEiRCAQj043q6pboEmMQt0kVAKtpRIgKoIhrp03nGZrehJLomt7smZmZkkkVbq263vd1rVtGZnGMYzIkiNW2qFApM45y76a1VABM458MZlgkSJBLQYAQ741u3SzVtEnPCNaqQgFtuqCMSQVarKC66dNTGGt7BFuZrekznMzIiFXVW3e9autXVJnOMYxkJJBbbaAoEznnLvetVVAJMc8csSWEZYVSNQgxYIPRzvS3SzVtVJzxlbqokgWta1qkpnGMgW0kgu+nTUxhrdpRWZremczOZEAttS3e9XVurUznGMZkUiSRbbbQAIznEut6ttpQJnnzxzklRJnLUCUEJBLTvhu26LdFSZ55NXUkzIVbrW92kpOWMJQ1TMRbrr01nGWtC0tZa3pnMkkANWyZXetattpnOMZzItEkgW21QAjOcxrVtttWgmMcsYkBJiUDOgQSFDrqW26WatVJnnk1dSc5BWta1vWlLWePPEVFtrMg1rrvUxlrUyui0m96ZkSRQXWmc4l1rVtqpnGc5kLQkkC2qtAqM5zGrVq22qSZxzxiQJMyVKSaEBADrattpq2kmecS61nGcott3vW9Wrbqc+PLMLFaskkW76dNTGWrMroaGulSERQutVnnjLW7aqpMZzJBQkgClUVaJnOWrRVtqiZxzxmQRMSs2masAQA7Kq6pdUJjETVucZgq61re9W26tzz4c85UVqsyI1vp01nEaszLoaVvdZEFC6tTHPDWtKoSTOZIAkQUAottWTEatApQZzzzmQiZkSaWZ0AgCK61aurS6CY5k1bnCLC3Wt71brWqxy4c8xaVdSSQu+nTWcRqzMuhou9amQKQ1bTHPMu7RSozM5kgIgUgCi21MxrWggiKjGc5khGImboZ0BACF61at1S0GeRLpMxVkXWt71rW7THHjzzFtq2pMyLvp0uc5urMzVFq71ZIFqC0rOMLrVAUSZzJJBEKqIsBVUyb3oEiRBJnOcoiZzcybpnQECAO5atuhdZqTnkukkqwlut9Nb1qk58uPPJq6paTMkb6dLnEurMy6FLvdmYFpJQtznM1rVEKUkkzJIkQqoiwQVUjWt20iIQSZznCIzMsxuoogCAO9LVtWa1BnGUurJFILvfTe9KZxx44yXeqLZJMxvp0uM51bMrS1Nb3c5kVaQiKZy1rVqCKWpJJJJJAqIBACLrVqoilCTPPGUTLLBuoqAgAl9IW2qaoOeZLdTMUgu+nXerSZxx44hrW6i2RnMb6b1jBqzJoU1vVzmQWrBnJUi61qiELaCSSTMgJAEBELaqoC2hJyzlJMkzNWpSBACD6eMYtttU1otmOWLdZzFENb69daBjHHliGt6CkkxLvpu5xLq5ytLS72mMwLaqZwAt1q6SEUq0qSTMzIJApIRCCgBaoSZzIkzKmdCbyBAED6h53agz6M7u0nPz4W5maENdO3TQJnnx55zbrWiWomcTW+m7jMbucrRTW9M5zmC222YzGkLbq2oAVbQSZmcwiFVJEREAAUAkiRmQZ0M9MhrMBAPrSc8ejVqTj6bq2pz8uJblIIN9enUkqZxx55LvQKiYyvTpu4zm6sytFLvUznOYFt0TMtQq22qAi2lUkznMhAtJJIkiFRQKgEkSSQZ0JvIpkSwD6yTl6NaOWF69VGPPxluWsEg316dLnMpnHLEjWtCUjOctb67uMS6SLUtLqzGZIBbqwAFtqrUIqlUSZzlFBRJmSSCpDVRazI0ZkZZZqS0m8UqSCxA+qXHa6TnU6aDU4cMrFuYzF3067TEGc885NatSUjOY1vrq5xLpmW1KLu5xhCIW6tKEWqq1QhVKEkzIUQUmZlmRdJJdaRqzOF3ZzxGWZnSSibyLcwTWQPXret61TMZ1nHTGvQ5+fJk1ZJk306aszhZM88w1qkESQ1ve7jMtTN1YUu2cQsmZC61atCraFtEFUAkmRamcxdGcyZzLd2ZmtaRqzPNrdnHGZJJBKJuSVAiwDfTO76vN6defpjeems9J1bz5cRBqxiN76aszmEnPEXVpFkSLbrernBpmXQDWrnMtszjMF1q1q6KtoKAVQIiQUznGZrdZzJnBrdZl3pGrMYmulzw55ZZZpAbmRALAPV283px3467cl646Tj0XrvPn55YVdWZjW+mkmLkzjMXVIhEW26urnMumZdALuzMu0xjORbbq61rSrQUABSBEBM4xhre2c5znMu96mZd6Zujnib2nDnmRlmiBuZQAsEPc49ddfNfThj0Zz04b6XvZ5+MziVbu5jWulM5MxiS21JDKGrq225yukjQE1u5i6uc88wGrq63rS2qQoAAEIQkzjGW96sxjGMrvpqZN6Zukxza2zx5ySMwAnSZgACD6vkuO2/P0x2vTWoS9d3PDjmc5Vt1ZpdUmTMiFEkSRGtattTMu0i2KjWrIumc5yEXWrq6uraClQABAREkzjMut7Zxz55y1ve2DdRUxzXUnPEiMyUEnXOQELAPreGa32z0nTLPo47mrrqnPzZzhVqrqtVJmzERbUSZiSFu7bbnK6sgLYuqikkipF1qmrdWhVAAILBESTOYutVnHLniNb6aZjWplU55is5kRMoAnTMCAsCPsc6znXPe7HozdLbZnz88yXVuNTOrdCRMRC0kkJMl1dW25kurIFUa1CiAFtC3VqlCgAECISSQttmefLniW73uZTVmSTMhESEyzQM9MkATUQPsxPLvrw7dK1pcyl05ccSXdY1MrqkSTMRaEkEzFutW25hqxLSi6UoFBVA1aUFCgEBCCRCrGMcuWC73WZKkEyEhEMs0CayBA1kD7I8va7ZtlNoG55ueZWiyUURJEKpJBMwutW0i0KpVWlKKoUBaqgKUBBLAghCwznny54jWtGUWIIERBJIpCaggE1ED7ShM2RpWijXn44zWqWUQCQASBJkt1bapQotVSqUqqBQqgCgsCAQCEBM8+fLnmLrSQASUJLEJJKCWABNZA+0omGbvNtrVZ1bx82Mmi2aQpCEASKSSLbbbS0CqtKpS0pQUoAUAECACIEJM8ufLnkq1BQIBLBEZogQoRN5EPtVTGGirbqmdbY8fPMK1RSACIqE0JJVtWqoFLVqlVSqFKBQAAgIIBAgRnHLlz55FAFCKCkESCABFTeUD7NpOVudrebpupelY83DOUrVUUASIULUgq1SlAWratKpRSgFAAICBAQEEEZxz48sZgUAoANGdQlyIZ0ECtzKD7Kpx3nV0clvTS9LqZ4+XGYLWtVEQEDVoEFpVKBBbbbVqgqgAAUECAQIECEEZzy5csZyAAAC3cTUIlkEADTUMw+ws5VdUxiavTWumrWMeTniVFWilADVUAqqCgkirqrbaFUAgKAAECBAggRCExz58uecgAQALdVnRELJEUBqzUIk+uci7rObYnS9OmrWcefhiAm6oKFFtpRRQKBJIW6W21QUBACkUCBCBAQQhEJM458+ecoAQCBV2uaITSZRQW1LAPqzGZrZJnn1xN7116btZzz8mZAaKWraCrSgKoAEmS22raoAAAAACEECBBEQRJM5xjGIiEAJAK2LLEJqyTOhaWAI+q4VuoufL6+E113166tScuEkJFtqqWgKBUoKKBJC2rS0AAAAAEQQgQIIhCIzM5znEiIQREIKNkoixKMqtBKIPq45OluJEri73XXvbSZ5SIQAqqAsACgUUILVBQAKAQAIIIQIEIIQiTOczMyiEIESIFNQABWUNEACPrc8t0xvistvTXXeqJJyBJmFF0pFAIClCgUKCgKhQACAQQggIIIIQiZxnMiIRACRAoiAFIFCggD6k5WxMazjtZN3Xo1oJJgCIEKoEAACqFCgoKAAAAgQIgICBCEIJM5xmRFhAgQRQIREFgoF0EmSaj6xJeeGVttt331Qzy1eexICgCAIBQFUKFCgAAAEBBBAgEBCIETMxMSCiIAQIEsIgiGoBWgTKma+rVJ50l1ndXt1tBjjW6ACARABBSgKKFCgKIUgICBAICAghBESZmc5kKtIgCICECIRCClNAZUSPq2qc+JrFutXvtQRiWgIEEEABFCihQooUIoCAICCAEEBCEIkkmc5khbbUQoRBYmYEEiARCW0JKBPrLbU584W3e+qigmQCECEEUABRShRQAUAEBAgIAQEEREREmc5mQXVpEUERQzmQQGQCEEBAD66roY5o1rXS05Z67oTFCRCEIhWgAFFKCqAAKCAgIAgAggiIkREzmZyFttEFBJLRM5iAEIIgCCAD61LbSYG9Oe/O63HoqjnIFIBCC0IqKFFChQAAACAEAQIEQiIiJGZnMgt1aJC0SItJM5gQEBCAIEAT64taBOSdfL6eTrz76zx7dKnOgECAKgABQooAoAAAgAQIEIQiIhIkkzJAurSIVRIKJMSABAgIECAQ+s5Ttbp53TzdtcZ7PNeutc+Po5c9+naYAAgAAgABRQUCgAACAEBCIISIRESTMkgW2iJVAktCZzBACACBAhAPqzz8Onb0W+fn6OHXpy6dDzz0eVrpm30WTNKgJQgQEAEClUUFABRACAQIhEEREREkkzESltCCqCKEmZAQABAEVBAT6nLxnX3W8uV6Xpl0Twd7NY68869dM5pQAgQgIBAFKqhQpBQQAQEIghCJEREkkkiQWrSBRRC1EzIgAQACAAEPp8PNvWfbrUZ53p4Nezq8msenzZ79uXXVTLSoWBCCIECAFFKoUFACABBBCEIiRERJJJEgFUAUBFokygQqAAQAAgPp48vp4enVx0x4mvZ5fTx9jz54fQzz72kzdCoCBEEQgCAoqiiigAQAQIQQREkRCJJJIgFAAFBKCSQAAAgAEAD6Tz8M9O3o8nbr5e+O/m6cvZnfm16FJMa3QAhBCIQQAApQoooAEAQIICISRIQkkkiBQCogCkAhAAAEBAAAhfpI8vp8funH0eTvrjeWfoY60JnlPTaAgRECIQEAFChRQFAEAggQIRESEJJJEgC0AQgBAgBAAAIAAIA+m4884z7t+b04xx36uPTrRnPPE3vrqgEIRAiIAAAKKsUKAEBAQIEIhIQkiSSCFWqCBAIIQEAAAIAIWAA+nOfiNe+8cdvJr1bCYxnOtVvfS0gSCBBECAABSigKAQCACBIQiIRJEkRAWrQIAgCEQkAFgLAAgAAPpJ4Jfb0eTPr0TGcSLc9Ft32AQQQQQQAgKAoUAoEAIBCCIRBEkiSIAW1QIAEEISQAAAgAAIAPppnXm9G2dExzxC3TGtVd72AgRAgEIAACgKAARUACERAghIkkiBBVtVACAIQhJAAAAAAIAD6QKJnOMZpqly3V3rdBAQggQCACgAUApEFAQhBEAhEkkiCAVqgCAESARIgAUABCwAAE//EABkBAQEBAQEBAAAAAAAAAAAAAAABAgMEBf/aAAgBAhAAAAD5OZr62wAAgUigAgABAECAREgmcxCZzq1RMZAo5zN9ntoAASZy6WWgARUACLAggIkITEiMxSlExkCjnMt/U3QIQpOOG+uqACAAAQCCCEiCZxJENVCkucQCjEwvs9lUjOM5Xe7MraqggAAIAEEERIis45xNpndQpLjMAowxG/pdQnLlOeN6b3brVC0IAIAACCCJGcw1c5zJnTMdLCkZzAWVcTOV9Xt0TjzznjkO+7evUFAAQAAECESJjItkkxkG7ZQmJAXReTOV17+tY45zxzEi+m3fewtAUgAACCEJEzmBUZxmVa2EWYyLVDEmFdvXvOM5585Eib7a30Za62gAAAQAiJCZyAJjMil6XKWGJQCImcmu3ZGeWYiTNt306Wa3u7AAQAAQiITMgAmMQLrqwESSAFyTMl79bJzxEhMKa79Vu96pAABEUCEgkkAFmOUFvTbmBMyAFyMyN9tpyygkzkXp6ul1qlgEAJmRdUERBAAGeWYXfSzmBM5AKiJkdPVeXLJLEzmU16PVugEABnOZF3qkIQAEAzjMa3UwBMySgBEhrr6PPiQIzmEvT197QgAiJMyGt6QgQABASQJIAxCAAiKu5JASTBLe/q6UABEySBdUQEBKAQEhGYAxkAAlgWpAJMyDfp76UFCJEUCkBAQAAECZkWDGQAsBC1AgTMSL29O6UoAAQBBAIAAAkmZRExAAsACRoQJJIa9HbYqgUCEAQIAQEUESSRREzIAUikJlbULLEiSXp6OmqoAWBACAgAgxLoiSMi0RMxBFolCJQSoCJE11771RCgIACBAAJOWLskUltgJMQFogJRBIpI0JEa7dt2pnOtUQABAQACZ54lWt0lrMCTIAIACCEKCIN9utqZzd6sIAACAAlkxylW63bMtMQEzIAAACBCkSAb7dNEw1uwAAAgAJYxyzrWV6aszNsQEmEAKAAgASKgjp22TOW+lAAAEAEDPLO9Zku9XM2xAM4QA0gAEAEVALvaTOXTrsKAAiwAIJyxvckjWpNswDGYAKAASoAFAtJM5b7bRrQUAQACCc8a0RFNMgMZgAoAikABaKESTMt3odOlApBYAECc83UAogEzmACikMqIolGqAiTMi23VvTapma0AABAzmSgUIFkxEAKKQgJLYjS2gkJMwta6au7UxzzrrqgIAAmZmWlAgWZzIANRQgCQRLbq1EhJJCmum922Z5c5evXQIkS1YBJzzrVCUgqZzAVURQgESEFutCQjMhbJd9emhjjiOvbQJIRbQImMa2SxSCpMwAQFQCSQQW26IJJEojXTtqxz5Zjp20WJBC0EGMa3YAhUMSCKEUAiSWIBbbQkQIG+vSyc8SN9dhIIAoJnF3oIILDGUqFEFCJEWBBSrUILBLevS5mcwvXVRBMkiqKZy6UAgEzkALIlsCQgAgWlJLREuuu2ZJI1vVIJjGbIKKqNaAFoTMQoEiWgQgIIIqqktgk1vpqZkRLda0EzywRAC2oAOm9CIQCsxC0SSlCIIBSFyqS61ZAiZb67qZ54yqBEGtSZAXr00IQgKykTVJJKoWAJFVIpCSqpURjN320mMSVUQItrMEG+m9DMgiioki6skkuhlQBlaMqEiiliGZm63ZEKEQFqIQut9KTMEFBERqpI1SQJQSWiShItACSSLbQLAQKgga6bqSIIoCIltmTQgJQSWiSljK6EAZiIttFQsLAyCrddKzAgAQkW2SKAilSRaIKiLRBKTIIWqCgEiUF30JLCCwrIgpMtAlhViS0shSIuiEBJARFq0qUogQN7rMpAqUyuVsgy0EWGiIWkShJbQiCySCyIW2gWgANarIQFCEW5Ey0EVKqEaEShCqEgMoRYgtqUWqEJTW6yEqUDUkUSSKlRRREtEAQI1SRmJCAhVJd3K2oQmk300wAAolgMyNIRRRCpJVKhGct6DOMpAAKG9sTWtTFQaTfWswAWUWIgklqEKAKZi0qDMzbQkzmAAULrUy3qzKwurbqsosUJTKkIRLFIKJS2SFBESAQZggBSlDe7M2ra1QkAAMygggiwKQq1JBAiBECIABRQa3uxVUtRZkAAwUQIAAIstJIgEEIIEFAUBW+mwoKBgWAFxKBBFQAIBEBUhBAIAAoULvpugBYGUpLArCwWIgWQAhAQLYiEACAUCllLre6oUATMoEFxUWpIglRBAQAKQhAAhQKFBbdaqiqqKJIqIDNilkhJkoSUQAAEqEAAKFALbqqCqFqpYEA5qWEgmIoAAQAEACBQCgourRQUCqsqoEt4xaIgYiKBSKggAAQFAAUpdWpCxVFFUWiIXki0kWEzBQAAggAAAAooq6pJLYKltoClFiuURVlsiMwAWAAIBFCAFFClW2pACxbQoFCjlqZtIKmZIAUABAgCUAUUUq2iAAWqABQMbcmkTcsYjIFABUIAAAFFKq1QioAWgCgBeW2LUSpkzACigEAQACgqlVaVAACgUAFDlqyKZinOAUKAAgAAUBVVaVEUAoKACgDlvXNWVVJjIUFFIACBQAUpVWhICgVQCygAOZC2oRjMoUCgAlgFgUUKVaBIKCi0AAAF//xAAZAQEBAQEBAQAAAAAAAAAAAAAAAQIDBAX/2gAIAQMQAAAA+/GPk4AAAKLIFAFABQAooUtFutirvXPEBrooij0JPD44AAC63eedZhQABQAKFCi1Sl3qlukmZAt6LLCj0E5/KwAqiF7bY4yKABQAAWUoKWqou920szEQLrVLKD0Eni8UC273pMc5dM5QoShQAAUBRS2rSNdN6My2ZSAu9BQPQJz+Zzhb2663vOZjmmM5QUFlAAAUChata1TM3u1VtziSIq9KKlE9Ik8nhhfR1uu+omeWJOPKEULFAAKIoKLVrW7US6Xeiyc5khb0opEPUWTHzeR09Gtd9VExxkxwhMgoBRACgUq1V3qgVd6iJMQitbqogPUWM8PFnfXeuvSiJjnnHLWmOOUKBQAAClqqutaALdkW55ZoXW6AD0lRnhxau+2gSSTOME54zgBQAACi2lXWqALvaGnPg0Fa3QLF9A0meHNb03oLJIZ5YjOOeYKJQAtQCqtLdVAIvTtcy3PLk1Sl3oKg9JdGMccXfTVUrOSMebEznMKAAW61UxCWqUqgILrttLOfLN1SjpoVA9IurnHPxzv6NUKzIM+fzYgAAFa3u1nnmFUUCgBdb3ZjEWijppYA9IarPPh5vX11QWSImPJwgABZdW61oZ54UoUAUAW6S0go6aAD0hSTPPdtUEQZ4eTmAKC61bQZxlShQFAANWlkLV3oAPRQCZpaBCEx5fPkCgW6oQSAUKAUAShW0Kt6UBY9FAJBbKEWInHycooAKABQUUAVKABdVBbelBZTtozKpkW0QBGPN58AAAFBQoKCgABbdJBbrdCg7W45yNasW21AAk5+XjkAAFAKKFAoNICqtJBbrVoLDucpMy7Zt1q2glBJw8vOBSAKKAKKAUXdkKBIoVvdAg7VyjM0ZLdaugoomPP58QurmQKoAFBQCl3oRMksjVC71QBZ1YjJZAt1RdVQTn5uOS61MSVQAAoUAVdapJMwqNULdatAXFoyhYKqFt1bVsnLhxya0zmUAAFBQArW7lWZIqNUK3ugKwtMwolWQLdXdqmeXn5LdamMAgACgoAW7uZbZMypbQt3pQogMyVbJbICrrpohM8ubVtnPlkAgFJQUAW61mLazCLQt3pQqASSDSKIUb3UiJILbz44VmBAoAKAVvWZTRAQLd6oVFgSRJdJDSKsXQgFi7Y5ZtzzwARQAoBbuopSCQGulUBYIkLbmQ0gqWrCipdazMTLPPMLq5yAFigF1q0AgkBvdUCoEZW1MlqQqWg0iy62zmY5yYkt31uOeIClCKFatoCLJAut1QUgiQpC6qRUlA1ZDXSzMY5ZxIb7dLOPLIF1RMhRbqosqWJBLvdKQKJEBK1dIVJALYXermNY58sZHTvtOXHILq0TMCi3SCpYkEut2ig0kSQC3VQAiChbajUxy55i9O2058cC22qiQAashQJCLemigNaZkzFKtVABcihUVKmOWTW96McswtWlIIBbEoBIi63pZQXSxnKqFIAKSqZbmQJnGF1q0zzyKq21KhCCwAGSLrpVAXVGc1UFAABRm6mCrc455uraJjIK1vdQRBEytQVJmJbrdtrINqTAKAChUFZu85C6xjC6qxc5zILd9eghCEZw3QDnzg1qrRUTpaOcLQACgLZm6mCtXItkQSTGS76daAiIZ5t6As5coXWlWhDbQzgtqWBBbVkqpm6zgXVmtkzIKZziXe+miBUhGec6aoE5csmt7tUZKs0JiLakKQN0hSZupiF2zdEkhdauc5utaogKiJnnOmyizjxyu+tpUJSWhzi2zMq1EXdEpJLvOZK2woSF100zlq0CACZ556bKpOPHLXXagJSVRjK1MS3VSF1agJLqZkt3MBYRdb3UgAqAGeed6pSOXGN9K1LKJZYqkxLpnnLdakhrWoiwS6mEa3MSgDW91BIFBZKTlndVSOfGXpuWiyoIqkwauecrWmRrVgBLrOUt1MChVa3ZGrnIoCLU5Y1QLMc5eupoADAqIts5jWpBrQEWTWs5i3UwClVd3Mu2QglSXRnnkAiZXrVEoDmEKXWcRdbzItotQi7zga1MEWqDWpLWVERUjSTMIAYXrohQg5KIVrWcQ3qSS6ti2ILvOYXec2RaLS0GVEAzNGYqVUms8160AA5LLKjV1MI3YiXViiktzmLdSCUGtKBABEzNWZy2WmZrHM66AAOUpQrSJLbCKqi1FzlLdSaRbAuqgQAEyrOY2UYM5OugIqDLKgrSIWiC0S2pcxVpRQRbAgAEDGDSWRIiXe6gAJCAW0iaUg0JFtCiqAEAQAAJM4iogQje6ASiEgUtsiWgWpSW0oFgAIAAACZxmACEL1pCkoiRUVVqM2gW0CqCLBYAAAAAmcYASwQdNWFQqElILTRFBSqAAAAAAAACTGZAIEF6UBQklSF0NVCqBQAASwUAAAABJmIREJCXdoosrMqEto1qwFAAAAEUAAAACEIQgmZCiqFjURKWi7ogKlRSFAAAAAAASACASIzYhRrM6EgaBvQAQAKAQUlAFCABEFCAhCEkgs3UtiRVSl3QQAAWUQAoAAACRKoCLJAQhBLDYJLJaXW6QgAAAAKAWAAIkLSKQMiAQgQ3i6klsIur0qEACFShKBQAABCRKVFEpJAEAgjXK9ZBrBWrrQEBAAoAAUAAkRAoBKkRYAgAuG5JWotXVoEAgAKJQACgIkQAAgQCAADWc2kaou6AQIsAAoASgUQiQKBEBCVAABF1jHRG0LdWgCAgAAqACioIkBVEIIiAACAOkBktmrrQEBAAABFCiASQBaIRAkgVAsAQ/8QAIhABAAICAwEBAQEBAQEAAAAAAQARAhASIDADQFBgE3AE/9oACAEBAAECANDu/rq7u5d3d3d3dy7u7u9Xdy7u5d3d373eruXe71d3u9XfS+t6vdy7vvd3u7uXcu77X0vVy93fjd7u+pAg3d3d3dq5Ln9co5ZMfPPoax733vsdB2mH82q6mJ8s8P8AZmOztd2q5fXJVyYwmXnn0x0PL9GHXOJ/KquDjsnN+mWX+xAO13d2rk/XLJzWoYf8CZeefTDQh+Q6fPrkYKfxzE+J8619cf8Abh1u7u1fo5q5IB8T4GFJjGHln0JeGP5Tp83rnpP4ZMccfkdWfTN/2xu7u7tyfo5K5ORjiHzCqpEIw8s+gEPzHTDt9Mfnlqv4OGAjLu8vplmxj/tAi8xcv+nPnduVf8/+bKxhDoxhGHlluofnOmL2fzGJ8v8Aj/x/4/8AH/k4d8cz6f8AT/r/ANX6Lf8Atjajd8uVkMDHTPpjMciHRjGPnnvHWP5zqPX6GDq79T5nwMPDLHL4p43f+tqq7mso748Eshtiur/6H1HTGMfPPeOsf2YJ2yPfHDD59Ms/+59jLrkZYSqr/YVVVUpPBwcTHWWMxRu3J+hk52ZfOYLlcZlGHlnvDWP5eK89k+ads5j3vqGPzxN39PoNuQmVub9v+3/VmMvVPzfk4/6sA7onaq0zJl8/+jmrkt3fPGfV+edsyXzy3j+LHBj937v0Ttg90GPiGOJMdrnm5836GQmUqoZEMiEOiZ/NH/TkAPFNHdjkrld3fax+mRleSx8XWWmEPcxyzz+pjHPndceg98vK5gS8G7X7/SVL3dzBjMcoI6YzPF/05CHkyu7MxVuWTjxToZn0EmEXKMfLLTrH0Pmr98/tyuuNbvri9T6pWOXhgS4Zcl+n0870MJi7Z9B71/niEPyKv0i6C9UlXCEJiVPpHzYbx8ODH7v/ANGTx49HLlOP/Mxvp83plPlMGPjhL3jl9/pd+eLExzERuLkuqquPGo/50h+RmbeasCiMVyt6DiY7+ky8mMN47BHP/q/VldHLlOPAx3xMGDv5p0yMUciYZdKmOPHVrnnZ64bQbu+V5MoxPmY1VOGWD/nD8rPpFd2Ol1aUQnzmDbM5l5MYQlGX/T/q5V0XlOPAN1w4cdGkHWL1zww+cJnjWLD5Hy4OORLYueV+hMXSCZczLSOBibNomQlf5agr8jGZxj0Nugy2QmEw0z6TLxYxhHvd1w46rjw4V5IOsXvkJhl88CXyMrzYq/TP8bGClXzHRo2xjK/1zGZRE0QNJxmTo0TEjPpMvFjGG7uceO648a9DsZfN8MYY6W5yVVXPKHsw2zF68R1Y6do48UT/AFTGZxiaEYaVemPRn0mXjkujdbDjX4TuGORl/wBDPplPlpbuXarnlGHpcJi7yiHVmLcsbvaq5L/NqpX9W+jM4x6jrKO6DExNM+ky8WOjvj+Q8B2A7+blLu5dqubLvyuxHFOhGD0ZyG7vlytXJb/k1VVVVVV/Du7l3fuxiJuzS5dQxDbPpMo+BDR0Nn4A/wCa/wDU+3hg9B1kGcu7tVyyujdeYidMtHZnLld8uXJyu/5VVVVVVSV/ZZkMStWMegAG2fSMe7rHR0NHsvP/AKL/AMjCjxHqMZi0fQds+jrH3JY7ZjGD0Ze7u7v+UABVVVVSJ/YYiZYomzoAAYhtn0jHu6x0dMdY/iRSHli9Riua1x4oixh7kJgnR8Mt3/OIABXZjH+0iOLjVVVQAAArbM4x7usdHTHWPnxRz5XQuWjyxe15wZgy7+js/ATBHoeD/QIB5MY/3ERwcaqjGjEAqqqkzI93WPbHRqqqOX/T/pztwPn4Hni9bydJjlr6Oz8BBE6Pgn84hCHhdqx/u0iOPDiYmIAFVpjM8o93WPbGWZ85x4f8zH9RkO7tg6MouiH4DWKQdng/zyHhd2r/AH6qqqgrsz6ZZeOWjtiYn5j1MrmT2c/ykwRIOmD2YSv6F3d/4iq7qv1mSeDoj1wmP8a++XY/AQRG/N61/MvV3/jrtV+iw83qTH8x+Wxi/nEfU7V/Ju7v/JKv0VPFIx26x/C5c5x4mMPyMv8AQIjq/F/n3/lVXJyWHkaep+EnLZo/K+B+Egjdwb/oX/mlVc8lmPkay2aPzH7z8JCDux8R/wB/aq5ZZqsx8jWW8f0HvVdXuH4yEHoN/wDgdy7Vyc3JV1j5Gst4w/ObO4Y/CtVVV3MTBhMtH4TVje7vuf6m79Lu7u7XLJVXVUeRrLeMO1/gPGuWP0cXHg/DP5PySOqA+fFydGX6LlwfA/093fW5d3d3d25c3NyV1cqqPI1lpgmXLkZW4mH4DobsxPmGsoFYEZmIYGNuqqqr8h4D3H/SMVbu7u7u7u75cuXK7u9VVVVUeRrLTolevH/n/wA2P0/7f9n6Xs388euUNZjPpl9EYB8j4vwfi41VVVV7nkN9h/0TFVbsRu75cuXK7u/ElVVca8TWXTHvXHgxz/7f937v0XjXiaxOnNTX0jPs5a+WIBVVTg/F+L8+NVVVX5bHuPvf+RYxVu75cru7vvVVVONGJhxqkY+JrLpiGPG/+n/Z+z9XKq8L5cpSbIwhvOGjWRyZxQmKQlVVVSI/N+T80qq6VKpPyD7Xdj/jmMYx3d3fhXHjx48aqqxAqkTKPiay1d8pXhfK5XHhw47J/wAUrobzhKNMWZGQ4/PIh1qkcaqo4PzcEquPHRMvzCeissRIf41jGMY+NVKAKqqqqqgCqYzKMfJ3fS7lVx4V41xME+/zSoHZ3k5QGZiOPzzPBHFKjOSsqVVVxqqqvxEPFjGOyEP8cxERHzAAqujshtjMo+b1DjxrwquPHjxrZH6LnhVYnZ1auJAyMYmWGGfkxjLgGB8zCnF+b83Bxqqr8JDyYx2QhD/HMREelV1IQ7uyG2MyjHyYdDrXHjx415kR+b8H4Pw4eGTAZiZYYFTLHHMdX1ZkpjiYVVVVVVI4ODg4pHdSzyETuxEStEIf45jEY6CqrqQSHqxmUY+ZthA41+IjHTrLwWYlIHaj6DLu7ZkuscQqq3VVSIxjESXfqQTxY7IQh/jmMY7CqToQRG+z1YzOMfM26x/KRYr9XMOxEAOt3aGScTMzu7cnIMcQCvBjGK6Yx/CIjLl6VdkIQ/xzGZR0QhKRK3YiI30erGZxj5EOuO75c+Xu/Zzrxxh1Yt3z/wCn/S4ZTjwcEqgIebGZRlcUzj6Xcu7G75cuXJycruyGiEP8axmUdEIaSqqtXYiN3p6sZnGPkQ2axlcOP4SL5ExhDbGZS1u7g4ZVVU6IQh6MYFIzOMfO7u7u+XLlz58+XK7IQ0Qh/jWMyjohDpUrTqxEbu1l3arnGPkQ2ax/Kdr6kxhDbGZRjL5chD5w2zJsREbvxWVGMyjHteru7u+XLly5cuXK7shAA0IkP8YxmUdEIeLq7syMrtbMr5OS5L5nTHWP5TsvMy2TGENsYxjshCfOGmMyjoTIzMxOt3aw2zKZRj0u5d3d3d3d3d3cIQADdiJ3u/8ABsYx0Qg7u7vpd2ZGXJy5GfPnzc7Xo+WMIflOq1L5jCYwhDTGZRj0IT5w0xn0i3yMjIcE2xVVyshtmUyjHV3d3e73fgAAAbsREbu7u7If4JjMo6ERu1u7u7u1u+XLlfLly5XY9nqdMYTGH5DvQTDRMUhtjGIlQhrGG2fSMd4o4QhpmSvLkZGQjGZOSq9LuX7AAAbdiIjdqt2In+CVclVsTLly5cuXLld3a3q7u7lyzs9jbCEPzPRyuGJjpawSG2OnZCEIaYz6RjvGEwhDTM1VsREYzNyir+QAAADTFWCI3d2t2QhD1v8ApquSq3d8uV3d3d3fqehHoQ/Kdah3wSG2MVbhCYzGGmMziJohMIaYzNYuiCaZnMo+NeYAAAGlVdEEb27JjCHld3d3/PYxiqq3d3dy/wB5HRs9+XO5XEx3w4GPXGMsSGUZksuVRMXFNszjGOiEwhpjM5lHZCGmfSZRj2OleAEAADTFXoaOlVQAQ8bVycuViN/zmMyiMT955miHmw3fLlej0xjCfNYaYxxSqhBJhpjM4xjohMIaZlM4x2Qhpn0mUe5uqTsBAAA0xjGPQhCEIFVQAQ7sVXJycuRkZCI/zWIji4uKVX7DxdY6IflPTGOsFTTHFErjx4mOOARmUzjElEHBG7XKMdkxhrKfSZR7kOj3AAAA0xj2IQhDqQh4Krk5OV2ImQiP5a1Ur8SI4uLi4pVVX8J0aPauPHhwq+f/AF8yMsYOmVx4cePEACMymQm7ETIbXJV2Qhpc5lHuQ6PYgAABGMYx7EIQh1IQ7sZk5KrcERESH5qlflpHFxcUTVVVV+5j0Olcavlz/wCn/X/t/wBefKVVS/Jl5OEJhCX2qqrTMhERK0QeXJyXoQg2uTlHuQ8iAABpjGPiQgjohCHdjMplHqQhMZjD9Fap/HVImQiSqqkqv2MZd2Z8+fK5Wrvld6quPHiY+WWspgkAlVOQ+DGMYjGVRDvW7Fclj3IdXqAAGmMfQRHRCHgzKZTKPUhCYzGH6qj+VETKOw48XFxcaqv05bu71VVx48a8KqjEyvxxhKwx1V8jLB0dLu1XJWulVVVVV1VjHsQh4EIBCG2MY9a7CJCEIeDMplMo9SATGEP1sY/lZlGOiAHHi4OLi4uNVX5su1VVca48ePGqquxGDyHuawCHWqrHRLtbVXOKtwAqqqqrjXGqjGInW9Xd9CEIQht6JVVVV1IQhCHgzKZTKPQhCYzGEP6LGMyjomMCqcXFxcHFxcUqvyZbJd3qj8BoRl8r6MIQh0TjUxly1yycrW1XQECqqqqqqqpxcUSJUrzIQhCDfV1VVVdSEIQh3YuTksehCExmMIf0mZTKOiYwgVVI4uLg4OLi4uNVXe/B3jo/UN25WOsIQ1d3d3y5mXPkq27d1jMYedVSIiSqrzIQhBu7u/wEIQ7quTkq9SCOKQ/Y969mZTKOiYzGHWqcXFxcHBxcUqq6Ojwd4/vvF3hBu7cnNzcruzK7iVXWiYw0N3fgxGJVSvMhCHS7u/chCEOqrk5KvYhCYuMIfqv8zMplHRMZjDtVU4uLi4ODi4pVbdHg7NH6DsQgzHL/AKf9OV3y58uV2Qb5cuV3eqqiXZld3d3d3emMd1Eqq8CENur/AAkIQhtiqqsY9yExmMIflu7u7/MxmUdExmMPKkcXFxcHBxcUqOjwep+83fJy58r6XY3d+N3fLlyu7u75cruMelVSRKqtVohDbs9bhCEIQhtjGMYx3VVUITGYwh+O7u7u7u76X7MZlHRMYQ9apHFxcHFHZ4P6jxojs/g3yvlyu73XWqqpVVohDTHxu76kIQhCENMYx0xj1rQEJjD8bFW75Xd3e7u+l+LGZR0TGEPeqRMhHzdHhfLleiVVVVS75+ZDxvdVW7u7vtd3d35XfSqqqqtEIaY9Xrdm3RCEAhDbGO2MfEhMYfiVVW7u7u71dy79WMyjohCDq79GMyjGMfF0b5Wt1fK7WWGL1vkZ+RGEelau73d3fLly5Xd/iv8ACQhpj5kIdCEIQhu1VbtVfEhBG5fqqqq3d3djd6u7u/RjGOiEIfhYzKMYx8XRKq71Uu7jLs7Lp6HQdZQiXcrzvV3d3u7u7u7vwuXfoQhpjs6VUqEOhCG7u7cnJyVVXpfQgiN3foqqq97u5dy5er8mMdEIQ/ExjHT4XUvzux5cuXPnzc+VzKHrVVVVX8C7u7vld35EIaYx0Q3VVVEOhCGru+XJycnK1u932ERG7u/C1VVXxu9XfncvTGOiEIfhYxjHT4He7u7vd3d3d3d3ecvZt2dqpj+WqqvG7l3er8iENMdkOtVVBshDd3d3d3foQTV2I31tVVVW/O78ru5cuMY6IQhL91VWOnu7u7vVVxqqqkSV4Z6x7m3sx8H3CqrVVp/KQhpjsh6kNul/GQgm7G7u7tVcnJyW/W5fld3q1Y6IQRv2VVWOnuxdVW2Y6u+qdrlZEPwo9TT7AErVVVIx/GQhDTHZDV3fgQ2+VVKqqqtkIQ6Xd3auTk5OSrd+t363dxXZCDd3cu/FjFXydHd/BWyZGJs2w0Q7MehDTpb8CEO1VVIx8TzIQ0x2bu7u76kPGqqqqqqqqtkIbvV3dqrkqrf4r7X4Me93d3d+DMox9H8aBVdzwNvZj0IaYq3d9iHgFRjHxPIhCGmOzd9L6kPGqqqlUAVSI7Idru1VWL+e71fS+jHxu7vd9mMfJYbOp6Y+T4O3sx6mlY+JCEO4RmUY+j3IQhpjs6niQ2+tAGmMdkPNjH9F3cu5d9WMfW93emMY+b4MPTHyIeBoh1Y9TTHpXQhCEOpANMyjH8ZCENMdmnZ4kPwnRjHZD0r9t3dy+jHZ6Xd3tj2Ojo0vV9cfc6Gjsx6mmVoKquhCENhWmMyjGP4iEIaY6IadniQ/Fd6Yx/BVVX671cu7js6VVV2u7uMfN3Z+I/M9WPU09DdbIQhsA6MyjHtVd06EIaY6Ox4kNP4Lu7Yx0Qh61SV++7voQ/Gx8HTp7nrj+A6Hdj1NPQ6VohCEIAdGMyjH8hCGmOjb5kIafe7u7Y7Ifgqqqq/XfYhL86qqpETux29z1x/IaOrE6GnodyEIQDsxmUY9T0dkIaY9XzIbfwXd3a6NHlfeqqqqq/aN3d3d3d34sY92Hiep+YiVVImnR2O5CEA7sZlGPU9HZCGmOiGn0Oju7u5fV1d3d7E/JVVVVUr9V3d3d3d3d3d3fRj2Iw06OjD1PBH5vzOlV0NJUrhwzEdHqQmIQ7sZlGPQh5sdEIQ0x2afMhtj0u7u+rq773f5alV+y7u7u9Xcu93d3fQ06fF9jyImM4f8/wDnw4ceOJRgYGASkyGOiHmQmMxhu+jGZR6kPJjshCGnoafMhtXV7u7u7jGPnd3f50f6hp0+LHu9jz+hjK1VUwgvZjEdEOj3IQmMNrerVmUep6OyEIafwkNqurl6u7vTH9t+DH3qV+i76HQ06eh1Y9TT2x88ggBvLKJjlfZmcdGyLqq2QhCGlu7u1VjKqiHmx2Qht8TwIaVV8bu/5L1qqqvz1VVKqulVXZ7HZ7vY8LvTidcyr4BLtzMoz6R0dCVKrZMYQ29XTFeh6PQhCGn8JDTH0sf2V71VVVV+GqlaJVJVVSaCqqPV09Ds+p4YfU+2P1MzKXLthk5f9Mc8vr/0sKGZjHsPR0QhDo9LjGPQ83qQhDTHuejHdVSdiD2qqqqqqryqqleFbqqqqjHs9XoSqlVAqkqqpKhKpGPV09Dsx9DwJ9Ji/SYOcv5ZZzHP6GE+s4Y454jjLnz0xjDV3oZUdmjo9mMfymjTHq+ZtjuqRGPtVVVVVVVaqV0qV5VVVXVjs6O2MdkOxthtmWzaMerp8mPoeXyyZ8TXyyn0mLjr6BExxwcsv+nz0zMdMu7uxlbNHkx6H4DZt6HQ8SGnoaYxj2OxqqqVuq/XW2MY7IdGMY7IQ092G2Zbx2xj1dPk+p4fXDDLHEy+JOLgP00ZYZfR+eWZwwwfmfIIz6R09xiaPJlxNn5nZD1IdTbGPiaIQh/LYx2Q2xjGOyEOpDbDbMtjdqx6umHi/lYz4q/LLPIz+ji/TDD55YYYIJkqrjDTPpHTt6mqMal32Y7Sq8HsQ7uyH5lY6qqqtHYf5LGMoANsYx6EIdSG2DLXJVcW+bkvgeDH830MJlh88MsT48eczRwTTMlMTHbMhIyklVUqyEfJjHo6dvR09DR2eh6nrVVVVXc/kuqoANsYxjshDqau1G7XJVbu78TwYx/Ll8+Kn0yyxPnHH5P0xwTAnDgHVjPoRlIFVtNjL7Meo3dy+r+09aqqqqr+hVVXRjGPQhB0sEbu75Xaru/xPqx8qSvpBBxwxcuQ6vlztR5mU+hMpych6Xbsl3d3d2vQbv2O70H81VUrtVVX82q6sYx6iN2t3d3d3cY9bI9nT4MPRj6vzx+YLZpnNagWZORlBYxl8rg3OV2/sex/Qr+jaqqr0Ebu7u7l30dX0ezph4Y+jH3WpZAFy5GPGuXKccYz6DGH4L1VdD1ep/o2Kqqt3d3d3Y3cuXL3fR3fU8MfRmXspFuueLUuVWkmIz6GUel31qul3e70e1V/pGMVVWXLu7uXcu73cvrb3ZT4Y+mUy9so5EyeRjygdiGmMyHpd2Nx1d6qu1dnxqq/0bGZRivS7u76Xcu7u7u7vT3Zb4HozL1WUphda5cscuptn1GOzqRl9Kqql30vrVdaqqr9Nf4djGMY9LuXu7u7u7l3fgx7Hd9EZVeKqQZWyDMUdhtn0Mo6e1jd3d3cu77hVVVV1qqqqqVuqr/LsYxj+W5d3fRj0dOk6PmDHpXZbyZYaVRHlOVgdGMZkPatDeqrxqq8aqqqqqqldaqv8sxjGP72PU0dzxqMe9bzygdHI0ZciBipgkOjGfUY+FetVx41Uqqqt1VaqVqqlf5pjGMYyv0u3swXudqrb555CQNLMZm4/VifTLBZiGWL1ZkUlV0qVL1XHjx41VVVVX8Ov8cxjGPaq/O9mOh3UelfhtlmlDJih9JlnnMUlqQ7ZTjx41XHhw4cOHGq61Vaqv3VUqv8fdqq+dfkezHrdxho8DyzaYGh5cHGxXLEwJeOWEOzpJVVVVK6Xf8Au7i3b710e9VTth2OtyuNQ3d8uXLlfK7vly5T6wmJ0WWK3XGsSY4njXZl3Kqqvtf+yVVW/wA1aqtvS7u7uzxu7lVW6qqquqE5c+fNmOauWOTLmJz+cIeOftd6qqr/AB13q7/daqq3f5a/EOqtiD1O6rKvs48OOZsmeQXfKE+ejtkc+V49ruVXGv8AF3fS/wCNdqqr/MsY+B4KGmX4JW8I5BLJjMIeGQ4UbJVf727tVu/wV+2pd3LvxUOiVV31zx3lgt2RhA8uEH81/wCnuXdqt3+uqr1vvVbu7u75ch5cuXK7630yxqWGrDE3dy+2X+5vV6u7VVu/5aV7VVflcU41RjZjq7vL7f8ATDPsg9b5cuXK7v8ArXfW+t/wL3e7l7VVvsfqf6Q7ZwquOJFftfLB+p8svju+mUu9VXtf8K/e+t/wLuXL8rXwNH6V/sGT9s/p9Uxr55/cQzx+WON5Z/8AfD6bQfa9VX8S/O/4t3+C5cv+Cv8AO+p8ctmn7v1UMcPphlm5X88jDL5mMz+n/fHP7TDFxxy3l5XcrVyq/Ndy5d/373fa7l+9/jX+dn9scz7fLOGvuZ5/OfYcsMs/ln895ffH739ZhgT6TCD8HaHe7uVX6ru93/hLl3q7u7/hr/LrX2y388t/Z+WR88/mfIMs8c9Za/4/LL7Rxyy+TmZfT49U5XKqv9Hfjd3d3er/AIS/zvvDHL5YfPLAdJHJ++H1yyufLPXyZnMgzyy+Er/jjhtbMf33/h76X0u7u7v+Hdr/AD88fllmfBHWX2MvrvFzmGHz+g6+2P8A3mMz+Z8McdXL5GP+Hv8ABf4r8b/Xe7vtdr/Q+nyqn5/L6T6z4rPli/R+1/KZ4Z/QcvomXwx+HW1JwD9F/wCZuX/Eu93f9P7A5weOGspj82fDL7Y/9JiZ/Lu5v1xP/VPs4fb6fTnMNfXGZZv3y+nx0/HD57uOT9H7OQaxfS78L/8APPobxxCfZPt9MUx+eGG+fNzfq/TlKrWMw8L/AK1/1b/z6QMMNfUMMeiuaud7q+ty5d/37637X4Xf+wMZ9jF1ljtXNyc+gbxehMX/ADd6v+xf9i7vpdxyc3Nzc5cuXdjMW5cxRl3/AJG/0X/Gu/7X/8QANRAAAQIEBAUDAwQDAAIDAAAAAQACESExURAgMEEDEiJhcUBwgTJSkUJgobETUGIj0XLB4f/aAAgBAQADPwDMVDlfaR8Zyjicp1CjiUcD/rz/AKAo5DgcCjkOufQlHIUcxxKN0cTdFG6N0bo3RuigJVNgi6bjAWChRSK6WqWnNuTq+MJemmMkhkBBBoUYFpq0w/2hdQI7lcs4+wbRKp7JzqmAsEG0UcegKR05tyTJwACJIgPSzGTpGXlcHbGRUP8AWusURscgiE26GyLvYCFSvtEUT9TvgICQCJxc6jSnQMSAugKR06ZKjAKHpZjJI+cocCDuiRA1Ej/qSaBHcpg2yAgn98Q1BtPwnmwQ3mU49lcomginmsAm7klNFGjCRXQpFSGlTJ1ImQ/KA9NMZJnNycQO2dI/6cuomis84IgPYACpQ2iU42CG5JwinHb8qJbWaYNvzn6T5wkNKmTmPbCXppjJ1DNzMIXM2dR/pRUqGYBE/vkBGNFEIXTbqwKd2Cu4oDbBx2KduQE3eJUIkbFfJuoloFG76EnecJaVMYkD1MxkgRn/AMb47emJoCn2T+ydcI3CNwnpw2OgRJCyFiuxXZORNT++5lQDjughbAolFDckoCgGQQJ3UxKKgYEERMtCb/OpTGZwn6eY04tjCilDcfyPRPdQIblNFANFrqhfaURUewsipypBVGDrK5UI+VG/wqDeMcxee5RoQYqUCaOTRvFT+kwzdXE86ksa+pmMvSM/IYjb+W+gLvCa3aeVrKlN+134XDP6vygaEHMHCaLcDZGxRt7BGyhM1xBiVILl2gMouiCJJx3/AAhhKJ3UDy/hAQicnW/CulLGWEvSdk6yYKvb/abEQDj8Q/vLUZ5B1v6XKSzarfGcHMSgK5gwXJoESS5xi7AItPMKoOAIocAKkLh/eEzv+Ey5HlBwQGQHZNsrFEVHsFE/MERKBUA4FC6NkboZTBQEq0QapA91+n8Yx4j9SWPSPRFy4XD+t64X6eG4p/6eG0eVxTXiQ8CCBrE+VCks3VoGBAqwxHgoOAI04lBowrkDGlxoFElzjMqwKO7kdgn9k8CHOQOyjUk/KbYIWRFCVzBFs2/jYoOmM4KhMU9gAEUb6YgH2wo1QnbCS6zpUw6ThIqinrl1AuFwzAnndYLiPlHlFhVAbYNG4Vmkp52ATjV5+EPOWENCBDvgrkfDZ0x504DGuRrgAHRINAj4V4nRg4i+BB5hX+0CARjHLA/v6KOUnZORuERtl5T2RAgMekeFFdfxqSOEsJ6jjtBcJn1cQRsEwfTwye5knP8AqfAWagPpaU+wCcauKCA2yAbjNEDMSTLpCiCCi9kP1A/yFzAHRickCo4HiEzPLsNSBBx5Xdj/AHoRaf39EKUcgFUcCZBN8ppVYkyzF0gtsOseNKYwkVRU84V0HHZMb9XEC4Io1zlxT9LQ0LiP+p5KhuhbKBuFYEp5/SPlO3d+ENySmgiACgYH4yyy9JXSpQsoPB2dL5XI/s7+9GuXZR6B86sQogHCIggfOMckjmNkbFG371opLbGKOxjiAEcIjLEE22QgIY9bfGlNvnCRUgpjKTsoVIHlcMfrj4CG3DPyVxTQhvhE1cSgNsouo0BKedgE7dybvEoCgGQ2RiJ4bHJM5YgrkMFBzTsZLmBC/wAjEXCdRI5y7wgNzl5BHfZG899ao74iM6FFpgTEYnGRxJQ3QG2QHZEfvOYywARxjjPLMqDYI4dTdKbfOEipBTCKYBNybswnyn7BoTzV5Qygbodynfb+U47obxKAoBkNkcBbGmEVOBxgRmDwnAzMsIOI2M0A8OmAZGC4goQ7yg4AqJgBEpxqQEzeJTftCadgoHLzO7DXg7yMYiC5gQfBT6SkiKtKBoceZHZDRgf3lEZaZK4RKllhAqWM26VPKmVIqQRqED3zC6JoCndgrkpo2xKK7oIW0JjGKIkfzjEDQlEVE0HN7EIwIdVtUSTGTYxQaIAABHAHNyt77YT1oEHJAg/BW4qFFA1ChRxCf2KAqCEDupn99yOWIGNUChhtlgCoAY/T50qeVMqqlhuEEEbI7lDIV3QQtqzHnKRSYQO620YEt+Qg58dgJ5jDLzO7DCp1pFSGMQtjULlMNjlB2RBgfg6QxCh+7ZHLBA4TOEETl3VB85KeVPRop4SxFlMYxwHopjzmBQFIhPjDmHynbt/BQ3BCaf1DLCDrf0pHzpQGMB6OBDvyoo75QRBGhqNWP7tkdCehBbmpyS0oxUYHCWTqHp5jQgcgGXlcWFS0Yu8YC6F9fbLtZG6vXLuKhCEfYCSmgM8fAy9On0jN1D0ZNAU7eA8rhN+rij4XCH0sc5cQkcvDaJ76MRoCIJ8FESd8HQgCUcJnEYdyjcrujdG6N80xlgQfzhsajNymIoV2QviLoYH95b5iILfCmWMvzm6SpDQkcJHzhXzk6vj0AFSmbcN7vMlxf0sa3+VxnV4h+JIGs/KAQCmNGB0IghRE/BRH0n4VYgiCBoctBjL021sIjLELb2BAUcIqC2Chm6SpDQlh9WFcnUfSEbJwoIp+8IdlMaURmjhyujsVYItPN+U0zgFZxTrhOsE638qJJ9JIZYEHCB7HNv8AvsFEaMaIDP0lSGhTCbvGEz5yTOq47FQqWjyVw/vj/wDERVuGfkwT7MH8on6nE+JINPS0A3RdU4zGlA6EoKIw5Ty7bZINPpZkZtraED+/AURmjXMcRArpGhMYdXxhM+clchsiu4VyFwxV4XCu4+AhtwnHyuJsxg/lcU14kPAUfqe4/KYP0jRp6KJUD5wiuYdxXGJAtP0sCM2+hEewBsj4QGkACCdl0jQ6sOoeMJnKLq0U87OXEO38p53Cu8pncpoo0esBzxGBBiKoERGEST6aOaEtCcfYqAlU4dOhMYdQwmckfEUI0/0+2YgxCMDL2v6fGEtCIw6m4dRyS/19B6eevv7E9JwlowJCm3DqONVIenmPTRwiT6enoNvYigwlpTHlTXVjL0bRUhNNInwE804bvmS4l2D5ijvxPw1NiIl5nf05An7YRMcJHS6hh1YzHowKNb+E65yTHp6f6mB9ho+Ma6U3eMOoY9Q8eomPcWOSulJ3nCYxmfUTHrSaD2mso1y10un5wpjX1ExpF1KXQcyIJ5rogkETGsTQK5TQDAKQUz7V10un5wkPOMs4G/oaaMSAaJokJ+FxAIBoHlF5i4xKDRECYTHCbAuGaRCLSAHRJ2XEH6fwiKgjKTQI7mCY1HEgQ9oRgUTvk7IrugpnSl84SHnEABdij9qdYI7wRUTNNt6ExEs8E47Q8obzQGPSVIYdTyfqj/GLIRcAuFEw5kT2HdMFZo7BXOB/1MP3qMTgMDpTOlL5OEvnCXoXWKdZHcgLhivEC4A/UT4CZtw3HynbcNo8rin9QHgJxq92cQB3ObpOPKQ8eD4w5R3NEZRdFGIRNSiaAlONSAmQ3VnJ42iiKg+1hsioE6Uvk4SwpomycjcJgq8Lgj9cVwhRjircL8rimgaFxT+uHgJxq9x+ULIDYaciukZbAlOInCGPQ7CJB2GLTUROdp2TdiUU4be0JsjhGKCFsnUdKXzh0nCYwNkbK5C4Yq8LhC5Q24ZT9mtC4p/UB8J5q9yBqSULDRFwm3VmlO+1PuM0jl6TliCLqLBemACn8otPhAgEaJQNQE2ysU4baZO2EPYo4hC2WubqOlI+cOk4QNE7sn/ciakoWXbQFwhddinfan9k77lclNsm2GXifbpdJRsUZREMnU7vPCa6j5UZfhcpnTfXFkNiiiNsShdWGE1t7J1zdR0pYSOMMougjYp1gnXXcptkLDSNkVMTw/WPnJNvnPTyMdlQrdRK6neVEBcwiK/2tj8a4uuyN0LZT7KTKmc3VqSOUkVQuULIW0iiu6CCGSYXD+4Jh3BXK4j8Y9Tc/wBPkYxK5gQjARU11HyVIKBiFGYWx/OqIRRnhGgRQugNsBZBG6NvZKZU83VqSKlkkMpRxCFtSY8oWCYasC4dih9xX/aLXwJ2zzb5yQUipogx2iukYcpQdMItkUCNSJQG2mLIYG2cew0yp5urUqpYyxCHqf8AyHwM/UzyoDLAZYIOTmzCG+lFQ9AELYAexM1MZuoasvVTHnIwbxPZPNByqEZ5+tiio6VldApwoURUIIHfEDfAuQGubLv7GzVM0/QTHnKLhNuE26Fj+NeYQj0glcQ7hqBqSfOl1tz1RO5R+4p1wjuEECiKK6BQXdHEeglgTgPYymaY9BMYgptk2w9FMavW3PIqWZ11zII3RvgB6efsXLNMegn6emr1jwdHuiu2Bwmcwuhf0tfYqmemrXzjX1oCHlRMIZeseNSYxrllkN0fZ4DEo3RJE9WZxl6emUndDCBCCiI49Y8akxjIZZIo5Cp+10zjIenplM5boxhLAWwkMeoHvonGeMhllnnnN0cBlkfZKY1Znz68XUzJGIXdC2MApQURpzwpq1yyOlI+yVNWZwp6ieSNcYkQyxcB8qag7znGAwrhMZqZ65ZHPIYy9kqaszhP0TbhBRo134Tvscn/AGFPs38p8R1ME8huFclAbDNNxw3so4RMBnCsUVOJzTGpI+1MzhM6x2R3xsB+E66dco3xpqSPnGULKguc/bArtjLJPPL2lrozPqpjU6QpYQd5Cp5yHKMCV3yxOAXdHGQ06ezVdHqOEh6A2Rsiiu6YKvC4Q/WFwbrhREifjU6RjQqJA+cwQ0z6GYyT9lq6PUVLObIoofcEz7wuH9y4f/Sbswq3DT9mhcS4XE+9P+8o/cfyghZdtWRUA3GoUo+o7ruhh205n2Wro9WAuhYrsj9oTuyfdO+4o3OAtj3QuguxRsU6yd2TrhH7kfuKFympthpyOERgTLcqAwBicHXTrBR1hgdeXsxXR6sgXYo2RRuEbrucAhZCw0jZFFA004t8SUkAoTNcSNl2KCF1I6gCJzFHMcx9oOrGYyFFHKEEEENCYQKPlXlowd5UyFExzTOARG6J3Rv7e9WIiUF2KNkbJ3ZOuEd/QTGQeEfKGfndnFkF3KN1AZYInfAn226vVTywwAIgoI7hA4zOkBuguxQQvhMqujM+1/VjL18SpKhxmcouhddkUb5RZBDAo2XbIfamehP1VNCBwiIYgcxKFijZOujcoIIYnIbo3RxCF8AhbDuijb2dCOhMaEz/AKWBwr5Qugijf0xyBBd13wOIQ9lSNWZwmPUTGnKOEv8ARFHA4BBDIfZCWpM4T0BcILsU77SnWCf2TjuE77gnfcE77gnfcE+4T/8AlP8AtH5T/s/lH7ChGh04jCSmdQXwN0UcDb14wHsTLU6jhM4i6OwKcgavKagNgiiiobonwrIndV7HOVMS1JlSCnibIrughZGyOXujdFFHEIIIe0ktTqOBsrlDA5DdGwRsjjDZHYfKho0OhHGSkMOyN139Qb4HIEEEPaSJiUBrC6FwhcIXTbpt026bdA7oXCF9KBxlmGlL/RBD2WgM4wNkUbruguxX/K7I2CKKPZFFGwRsuyFk1UUNOZ0Dnl7cSUhkKF12RRup1zgqHjTpqTB15e3fZFDAIYSjow8Z+xRVyojCYzwPnGWvL2ukckhmp6SEshOaCmM8vcCuSQzR0Z6cQiQDFG+jAnQqMZ61FD2trkkNeup0jSkDoTBxl7eVySGvLU6fdGuSQ9X06c/OnP27rkkMk8s8sxq9Ppqak1P2urklrT1en00Rqz9qjgbI2Vcktaur0+knjM5q5pn2umcksZ6fTq9Pz6eeWuevtdM5JaO+XpGr0fOgHfU0FN2JCeNgfCiNEBEbHCWJNAUewQHdS9qu67ruu67ruu67ruV3KmckvnQqqZZDV6PnT5XkbRXU2W6Yf0puxIR2cE4WTxsn/anfaokRuvwpkRQuU2yAoBkkfbSvr+jTiQfhdQ854VKhyqK6m+3czkkcJYTyUy01ujTiCFEtOYg/CLjdESO6hJRLdCDjnBHqij7G0yTOpMZZjzrdA1IOEL5hFpRFD8IOkULlADIBugaHGhU8a5I+01VTJM6ExkmMsx51ugaBLoGE0OYgiCa4wmmkwigaEZgQQowumipCaNyUHGARBIgnXRPDRjCCc2cFEA4RaclcxGB9oJHCqmMnUdSeWY863QNAxiF1E7EAqBBUHn8qDwosOEW+CosKLSi7lImjzAw3UwU4QjunNeEIOO64cAgAIKHE8jDpzVXbCnoKeysjhIqeTqOSuhPL1DzrdDdD/HxCNjhB3YoQMhRDlMhXAHiPBgBBRBbuMBFkUWO5TTZQ4jhfAwBsVIKIITSIkoR5RshzN7KwXTjBxxkcaegp7I1ySOHTl6jkrhI4S0ZjzrdDdDmERULmZFczHXBXNwid4KDI3wc5zuxTmAO77KIiEC0pvEaBGcEWuERMSQcIoiWxCJIBMoIlsk6xTgQYKLoxVyoYzGElI40zQyV9lpjLIqqkFM5Oo55DSmPOt0M0f8bnDYhCEIzJQBeG0KBAbYIsAITgSRujBpjIhEFvlEkECKcHAoOguQVQNQmEyqokiBRDgISKcCRKkQjBpjIownk6vjCSkcaaAUFI49kbLto90V29i5KRUgq4BGynnl6jpZ40YPd5UHtPdHnIAT2vmJIOEE2E4xTYAQEkwSiMCIAblFwc0ycFNszOuBBMB9Lv4KAe12xXM00i0oPbEVUeHAhP6ZZA4KEVIKWeRRyUz/3krlkPY2SoqoWxnnrhX0sipN8aLXGJCEYwEUAImiYTAFPDg0QEd04teHRioOYbhD/IRs4KLYWKJbKoQPEJFpp3UIbxCMEIk3TYAQQFBoTjcYSwkp4DCuaOlXNaOAXb2PnnnhPRkNSR8KTfGnEQX/jN2uUWscoEN/5jFAsMI8wKe4scBAwXKIIAw3sER+goGhxG5QXZOsniFFxIwknCrRRA4Rae2IQIy/2hdBUXZdlDZG2HcLuu5w7Y1ylH2Mpmn6LpGpIqnjUJPEa0RiVFobGia0xmSgKBACJRd2H8lADACcYFGUpp0In/ANKBiadk0CMER5XJ4/pCpIihUGaBJMQqCMwZKIwhK2BsggghuU1SHldkUVLUr7JUzTyVyUwlodOpIqnjXgiTE1/rAeSi7/8AFXbwi3aVwgTWQRNAjcDwhuSU0WTbhC6BQ8KbsIOjcaEhjNUzDHsij7J0zTGSeSuEzoSOpIqmsAIlGMTX+kAiQTsjKnjZQqCjCQiialBtgiaAo3Q3iULDEAiF1ARV6nDp8TyzwCkMDZTUYI3QuhdCxXZdgvC7rucOy7YHCR9jqZpjJPJMYQOhM6ktebR8qMgm/qrYqIAuVH6Z/wBK8yhtMomph4QGeJjtsuY9hkgIWOULuULqVUPuKmprsiijfUl7EnA5zhMZZ5IjCWeBGpJT1QBEo8Q2CAcALLbeyBMSB4C2Eyian4xJoYBOBnNAiIyc3hRMBTfLMG+emMypoXw7I2RRviEEMO2HcYiy7eyMxowOE/RyU8DpACJRcRGQThQj8JziSIWig1E1pbJvExUT5EcA0kIGmHN4/tc0hS6AEBli09p554D7SoGiEZoWK7FGyPZdwu5Q7oWXYIo39maejkNOnkKZ04LndMwCALaQgUXVpZR+n8oDJESBKA8xUKmaHkqA/wCqoio+QmwiSIIurIaECRod0boo3Xc+122eunNvlTznITEDZACdEPqIARdWlskJCqa6piU4d/7QNEJx2UAXGSMYmpobKPlCtDdEiJ0KO+PT9kbI4d0EPZ3fPPT6m+dOA7lFoPTspBztgIIkxP4xACJ7D+UIkiQUnmE4hOEjNAmBkUees4IkUhdRYzs6CBIgIkIh1Ihf8uUQDniCL4G6KNs4QxNkUV3QQshgUUcR7LyGWYV5G6Plbeh6m6ZdF+wIUSbCqJPfYWxhLdTiZlbblbBEEw3H8olwG8V0lcpIb8lNM+ckoloDRTdEAdUPCc2cYhSlvIaEASjBFFFFdl2RRuu6CCFvaaQyyVMLwKHcI7EFGxQxlpdQ0oN8ockoxK22H8lQ874lo+nyYomn8BEm0vJQaJkfhGkJd04fbG6cSDKSMaVKceyDQAmmSG5QDxo8hhsaawQ9o5DN0jN3K8Lt+Cofcv8ApG7U6wTvtR+0rsUEELocwnshdC6F0LoXCF0LoYGAPdddIVKk0+Tl5J7HDmcexgooCpRI6QSnGHSnGsAE0GfUbKHkrmPKPlNbQaIIgaIglp20TfDsUbZDmHsuUUUbKApgEEELqWiUULBNsmruUfuKP3J1wnXCP/KNmo2ajZqNmo/8o3b+EfuH4R+/EsIMyLqFJhDv+E1NTth+U41JPZQhEy2KALo3TmgCEJJgA5RMpv6hA3CiJF3yiYdRJ7IiwUZN/Kg4fOnR1pHxrBBdijZHAIe0UsIkq3ooI2TuyuM7TUBNsmj9IRFN/wC8YeCoGIh8oOECDHZM++aIcesSlEppMyXFH7UXVkF1DwpjwT+dAkVgiDBwgUEJxottxmF12KNkUbruULIe1czjFG+tBbnGIWx0QQQiCY3xhvJEz5Z90QDEBQAwAwifMvhfUe8B4GiHCBC5bwuE7Ygp0QYecguULe2hwhiNTc5QV3KN9CM4Kn8G+AiI0UOoR7ouh2/ko/aUbflXKAE0QI/qMgg0AW0/tMP6TxsD4QPtn20AjdFdsBcr/pG4R7I2Rsuy7FbwK7FdiuxRsjYJ3ZOujc6NZRBqEQIiYQKcBAOkoDHYTKh1OP8A6CJPMfjWg4OvI+4QQxN0b4G6N0bo3Rujc6k4tkf4QJmOUpw3BTvtTvt/lHc/hNbID4CJMXfAzNaYTiuLCPIIIPEc8QRdRE675hdC6C7I2RRRujddz7lgobEhPu0p/wDyiau/CDaDACpTBvHwiWxbWEk9z+RzoeEW8XlBiFFh7TUWDtJdT4U0OUx2NfKNk7sjddyghb0HZH3GBMARFMGxKc2EGyO6eGh3NAQohyhpmEOucCDJc7e4qoEOuuQ8/DMt0XtMGp0IF0B2QaIDAMESnR2Qf5yAgi6JHffXGBXdD2+iw9pqLSLHMNmp7YczIBF7ekwiov5XuKAcHMdILmEQJhc7Gg1BRDSw7FQEU3nPTGJXE5iRBqDiCSaINoMAzuU+OyDxEKTUCYOJFkeGQ4GUUHCIyQPNsZHSCNiijdNVgjZHAe31Q0RRbQp43BRcSDkofhPc0REkOQQKg8HYpnDaeQiK5mgol0WoPI2whhAwaPlGPUMDzproxJjZHhPETIrmYYIcRkDtuv0cT4K+oZAQQaIzBqM4uuxRsjddyh7hkM8nJB4yAMMd1EchbEEritJ5TJc7olxTBtHygE1tSmuocel3jAERDlVhqFAscucB7ZOQewxk5qiwdkeG7mbQpzxAwXWMsZj6ggQuxRsjddyhb3J6R5RcYAItbGKD2xiUWGFVEA4g1GDRUhMFIlB7oQ2XK0mwUURNc7Z1GIDi2EQUeCbsKDeI1wMQZoOBBT+HFqLzEgLpcgRA0TdiUGUyACZTjQQFyoGJJJ9zuZpCDXT3C5mkL6gu+LWmECSg4A3CPI7EscDDdRY7wi5pcKgocQQNdwv8fFIAlGGJBDwoiBYMJDwg+tVdyDRAZRdRk38oAxqb+6JJi38J4lAoxhBPbOBRJ5SfGHW5RZCxUQQmuJDguHw5f0mOhzMKBEiizicpMEY87PqC5y0wgQFGBTWmBigRAox6aIxi4/GcBHiGf0plkAID3Ug8G4UQDcIB55bqIBTYxgIrk4rm4ObxHBtT/wDaa3aJuhAxpBVb8onq/KfCHMcIABB7oxhfQA3RNAiSOah91XAAgoAQdHymvAgDJOgGxlh0N8YEOjscAwiIqm7AlOfWll1/GAJkYJrTGpzAboBWTj2xiCogH3Uix2QuIAUBDBpbWcUQAIfK5mmCIqCnO2kgwQGQXQwF/wAInY/Kcd4Kd0UMkCR8+6sCRY4GIBkgwYwee6cQIAohoBrDIAigKlWCcf1ZYZoEH3VAcXbnCYNwotBxa6oyAIoCpRNJaMRliIKIHusDtlCsEUAieyGjUKZzQce/uj//xAAhEQACAQUBAQEBAQEAAAAAAAABEQACECAwQFASYAMTBP/aAAgBAgEBAgCG1Joq5Xdg+ySTkatJh2m//NWOQ1ff2DPn2ScW0loO43oqpqex3JNVhSB7RJLbcWB0GHh/56xoJNf+n+n+n+grcM+fles8DDDFk7HQd5vSaKhlVWS6qvsVP6pr/wBPv7FXqtttw2SNm3YWPC4lY4fwrBwqqsSTG26a2waavUOTuYdA4fkDE3EE/nW3KjYknKkg2pIjbfnHYcFcaTglZXdjcW/nXR/T6+zVaonQKhWwfs1NioHzGdZ0gHQQsXoOAlGJJ1MEVit2EFX0D6x0ACHoOIOBh0HEGkxJAAcrbfEsFFEqhkJSIdJ1PE4A0mxhh0HKk0wU/IpXI222+wghYACx0nU8TgJSRPmvUchP51DnZLuIO4g0pICzOk8KsIJRU6jwUmioHibcOIg70ktp41cVazkJRVSXzJJeifDOYNFQNnvUSSS/NiUmkj8C9B6WweASgg+4223medtJcNJpI9Ilgttttt6jpdlqXKJSQRm/IMMYLbbukvlZnFJLpesGkgvAlg+OYbt3SSMGo6XZ8i2g0kG5hsIPHMIOQxMGs+eDTUDkC/GMNhFYEF2MFzoPoAgttksVAg+KYbCyUBBBhgudB85IQFtslukg2fhGGwwVgWYNZ8tJRXbbsCC22D4BhsNQ/CCAtsEeCYbDzXuHMgAMWweg856V4QgiAGBhJLFQPSYY+Iw6X6IIIgxMJJgNJGtxvUYbDiOKSS9MEQYmHCmDqNhxnBt5Pa3rb4hARiYcKYOkw2EHEehvgfEIDckw3Qg3tvQbCD3W+ASmCxOQg1tttttttswwQeGM14ggFjmINRJLbb+vr6+vr6+vr6bbf039NtvQsFgsRsSSi6hBG23g/oVAvEknU223Zv6bb+vpg61mOtJcYLbbyf0KgXZkkngFjqEpg1NtttsQ4j1zcVCptkngWwQQZPiHtg/TfcIMTieQ4DIec33iDrHtLB9owPOPWOpvrEFz3D2296iWCgg5BsEH5YeCPXdnob2t2YPGkklmOd7G2MyW222223HZtsQaG8RemDkOweIbjM8wghhsILGHMXpg4xd6R5LbfOI3YQWMMF0kAvld58B63G+oYJJJJRYHif4dLSIAkkklpPoOz71wiAJJLFeo7t+iIOM/pBBxnlOhuPQ/bFm23d6kuJ5H8MtrbepKyiUeZyP4NLwWMRsP4JLyXksDdL1F6qhFjFY/qQDTBDYQxoAgfgElwjnGLgBENlH7iSXlkEECMQWEMdyfxqXSlVBBEY7pfq6bEiGfUSUNz7C9IG6WZ/U//8QAJxEAAgECBQMEAwAAAAAAAAAAAAEREGAgITBAUQISMUFCYaBQcID/2gAIAQIBAz8Ar2tNHck167pImw29156NqlWaKwp3j6epNEpNbKBurIsF/gPa9GBDGMYsCEK44aaO5J4+KwMmiIwJ24+B6EOOcU6ME2blr8IfqRp93SngyrBOOHbLol4Q9XsYurwJUb1IFVDuSM9kyb5m23xowTs4JuSGLqUiIvaHSXspVytbOP5Ym9XdKo+LxY+T5YhcL6HSp8O9Pj7hq+s4/wBBu8nA6KcTojK688TJIwwxRdaYiDIyY+DJ1VHdsolI8VbIYrzkzEr1i9v/xAAhEQACAQUAAwEBAQAAAAAAAAABEQACECAwQAMSUGATBP/aAAgBAwEBAgC9Qqp5UrJfZAAxQplWinh/00cgpHj9CJ7H7AgGKUbJzp4a6aqdaSuBTTY1E/aAASSjescJn+mjQAPGPF/P+f8AM+NKe3sS/qpXAF3wDiqFdGKp8YCpp/nVQvWqj+f8/Q0/VSSSgyXqked4mf6KDjRTEABCEiKqUiKqfpiAYrADE6hpelEeWi9AFgAMiCLVAhL1S+aNYgu29Q5DPL46/GKB46aRAKRoINKI9BQkaSF8sAaxoMJeQ5SKwlYAa0aTSrGGk0kfJA1OCJXFqiYNAI4EoZUFYSkDaRUI2SSTypJcLbbbbbdJFjYWJqJg0jW8BcwioWEAGg5VCo+3uanyIBJELc23qBFTNyaibDSOAXMMqFUFfiOk5GeSk84AACsYe4EVCps1GyWgcLsYZ5KFQBwVCuk8SSQCwMPe37OLWNgzdiDQBwGV01DgQCu22yT8IRtvlHdUPJSRwttttt/PHyzK6ahvbbb+YBoHCSKm3kOAiukj7yWkcBJMft7+zb46hXSR9FLFJJaxrbs7mwjbft7NvcZXTUPoiJJJZNvMbQYcDoYL9vZtt6SK6SMQER8gZmNtw6gdgIJwOp3fs23mZUK6SMBYw/IGZ4Rtbudrdm23kRVTVSRkQvjCC7ut44jyMHMioVUpJClIj4wgsbuy3DiOD4BBi2zCPX19UkRUCPjCxzS2DoEO4WbbbdkrgKoEJJfBEFjpSS0DiOQhxGkFtt6hYwhJEH4QulwCDnSR1jiAhsRZknFAepHQIOUQdTsksRwiKGxhhscQABT6mkjUkl3iDob0JJaRkIBDdEEQ4gUgBEVA6Ekkl3CDNvuW0ZkEEHGmC5lUPxzmINKulrSXO23ZmGGHGkC5lUPzxvIWKSXIldZNmGEWQAgjbMPAl2CDiSSXMsBY6TDdZGHWkkkkkkkuMQcR7zYWOgww2EGZh0iAAL1SSSSSSVkkkkkjkIMEk8Hie82FjkLGGJCkBJJQhJZAAJRJJJJJIgwQBJJJJVZDFtjI/ENhY5C69fX1SWCSRF0AABvMMEGkyqHAYJJJJJIwYnuNhY5C4xOaSIIQApFIHAYYINCMqhwEAASiySyOA4BqNhY5CGwLbbeAgiIISFIC4TDBBpMqhwpAwGS1G4wbegQbBY4iCHYIILJJchhsNJlcNxALnMazcXMOsbRY4iCHaIMEuQw2GkyqG9IFhpGs3FzDgMxtFjiIIdwg6TDYYt3qhvTcbW8HkcRmNoscRY7hBZu52N4GGwLbbbbJNhBxttvE4jMbRY4ix3CCxsLN6G7MGOEnB4OxhsNo3ixhwHILHEWPI22223kC23sNxwtt5ixxGY2ixxFjtS70kjZGGw4hBY6TZKDMbRY4ix2DWsVgdIzNzDYcJ+QczdJJJJc6VjgMWyWybiDUeEYG45TEkrJJJK67Dk227PCniXcc0kl8k4N7KfopJfQMPEPnL6xh4wfgr8EQkt4PYAookkvvpJJJJJLNvWc1kPxyukkQklduNtttvSPzqUUAMOa9SN4g/OkLIRtYLJ/plscBsI7D9SSKoYLGCJmDAfkTzmysoSDBZxWH6kEEEhGGxACsgP1DdMMMYCWAH6qq1IqgnrZ2Fh+qSISs9CUWC5F+K//EACgRAQACAQIFAwQDAAAAAAAAAAEAEWACECAhMDFAEkFwUFFhkHGAoP/aAAgBAwEDPwDc1CMdKj7eUsrAw7dHn4PbWfw+Ku9bOBV5hq0ox0qPhXDcJeAn0DtqOisYQhCPAxjkYiMdGpHj+8ra4StmXwJgpDz7LO5xVxXwVwVkvo1JwWm9ysw9Z+SatHeLsHUuO7DJLK8I+VTo3K8SsksqatLVzVHVzc29RtWk8KslHw7PnG8dqXnTHLjrOWX85P8AoOIQzZ/aByz3v8Bv9Xe/7v66FwlZsbn2+ADMi4PQNmc8r5bJTwEqXw2Eb3corltc5zmT8zmbvtsZaXKWc3cJZHM6nKLmbsubf//Z"},{name:"R_gameconfig_json",data:"ewogICJzdHlsZSI6IHsKICAgICJ0ZXh0IjogewogICAgICAiZ2FtYmxlSGVhZGVyIjogewogICAgICAgICJmb250IjogImFscGhha2luZCIsCiAgICAgICAgInN0cmluZ3MiOiBbCiAgICAgICAgICAiZ2FtYmxlX2J1dHRvbl91YyIKICAgICAgICBdLAogICAgICAgICJzaXplIjogNTAsCiAgICAgICAgImNvbG9yIjogIjB4RkZGRkZGRkYiLAogICAgICAgICJvdXRsaW5lQ29sb3IiOiAiMHhGRjRFMTMyMiIsCiAgICAgICAgIm91dGxpbmVXaWR0aCI6IDEuMAogICAgICB9LAogICAgICAiY29udGludWVIZWFkZXIiOiB7CiAgICAgICAgImZvbnQiOiAiYWxwaGFraW5kIiwKICAgICAgICAic3RyaW5ncyI6IFsKICAgICAgICAgICJjb250aW51ZV91YyIKICAgICAgICBdLAogICAgICAgICJzaXplIjogNTAsCiAgICAgICAgImNvbG9yIjogIjB4RkZGRkZGRkYiLAogICAgICAgICJvdXRsaW5lQ29sb3IiOiAiMHhGRjAwNDcyRSIsCiAgICAgICAgIm91dGxpbmVXaWR0aCI6IDEuMAogICAgICB9LAogICAgICAiZ2FtYmxlUmVzdWx0SGVhZGVyIjogewogICAgICAgICJmb250IjogImFscGhha2luZCIsCiAgICAgICAgInN0cmluZ3MiOiBbCiAgICAgICAgICAiYm9udXNfZ2FtYmxlX3Jlc3VsdCIsCiAgICAgICAgICAiYm9udXNfZ2FtYmxlX3RyaWNrZXJ5IiwKICAgICAgICAgICJib251c19nYW1ibGVfZXBpYyIKICAgICAgICBdLAogICAgICAgICJzaXplIjogNTAsCiAgICAgICAgImNvbG9yIjogIjB4RkZGRkU4QjAiLAogICAgICAgICJvdXRsaW5lQ29sb3IiOiAiMHhGRjNDMTUwMCIsCiAgICAgICAgIm91dGxpbmVXaWR0aCI6IDEuMAogICAgICB9LAogICAgICAiZmVhdHVyZUJvZHkiOiB7CiAgICAgICAgImZvbnQiOiAiYWxwaGFraW5kIiwKICAgICAgICAic3RyaW5ncyI6IFsKICAgICAgICAgICJ5b3Vfd29uX251bV9mcmVlX3NwaW5zX3VjIiwKICAgICAgICAgICJoaWdoX25vb25fYm9udXNfZGVzYyIsCiAgICAgICAgICAiZ2FtYmxlX2Nob2ljZV9kaWFsb2dfaGlnaF9ub29uIiwKICAgICAgICAgICJ0cmlja2VyeV9ib251c19kZXNjIiwKICAgICAgICAgICJnYW1ibGVfY2hvaWNlX2RpYWxvZ190cmlja2VyeSIsCiAgICAgICAgICAiZXBpY19ib251c19kZXNjIiwKICAgICAgICAgICJkaWdpdHMiCiAgICAgICAgXSwKICAgICAgICAic2l6ZSI6IDUzLAogICAgICAgICJjb2xvciI6ICIweEZGRkZFQzk3IiwKICAgICAgICAib3V0bGluZUNvbG9yIjogIjB4RkY0MzQxMUQiLAogICAgICAgICJvdXRsaW5lV2lkdGgiOiAxLjAKICAgICAgfSwKICAgICAgImZlYXR1cmVCb2R5UG9ydHJhaXQiOiB7CiAgICAgICAgImZvbnQiOiAiYWxwaGFraW5kIiwKICAgICAgICAic3RyaW5ncyI6IFsKICAgICAgICAgICJ5b3Vfd29uX251bV9mcmVlX3NwaW5zX3VjIiwKICAgICAgICAgICJoaWdoX25vb25fYm9udXNfZGVzYyIsCiAgICAgICAgICAiZ2FtYmxlX2Nob2ljZV9kaWFsb2dfaGlnaF9ub29uIiwKICAgICAgICAgICJ0cmlja2VyeV9ib251c19kZXNjIiwKICAgICAgICAgICJnYW1ibGVfY2hvaWNlX2RpYWxvZ190cmlja2VyeSIsCiAgICAgICAgICAiZXBpY19ib251c19kZXNjIiwKICAgICAgICAgICJib251c19nYW1ibGVfYnJvbnplIiwKICAgICAgICAgICJkaWdpdHMiCiAgICAgICAgXSwKICAgICAgICAic2l6ZSI6IDY1LAogICAgICAgICJjb2xvciI6ICIweEZGRkZFQzk3IiwKICAgICAgICAib3V0bGluZUNvbG9yIjogIjB4RkY0MzQxMUQiLAogICAgICAgICJvdXRsaW5lV2lkdGgiOiAxLjAKICAgICAgfSwKICAgICAgImZlYXR1cmVJbmZvIjogewogICAgICAgICJmb250IjogImFscGhha2luZCIsCiAgICAgICAgInN0cmluZ3MiOiBbCiAgICAgICAgICAibnVtX2ZyZWVfc3BpbnNfcGxheWVkIgogICAgICAgIF0sCiAgICAgICAgInNpemUiOiA4MCwKICAgICAgICAiY29sb3IiOiAiMHhGRkZGRUM5NyIsCiAgICAgICAgIm91dGxpbmVDb2xvciI6ICIweEZGNDM0MTFEIiwKICAgICAgICAib3V0bGluZVdpZHRoIjogMS4wCiAgICAgIH0sCiAgICAgICJmZWF0dXJlRm9vdGVyR2VuZXJhbCI6IHsKICAgICAgICAiZm9udCI6ICJhbHBoYWtpbmQiLAogICAgICAgICJzdHJpbmdzIjogWwogICAgICAgICAgImdhbWJsZV9jaG9pY2VfZGlhbG9nIgogICAgICAgIF0sCiAgICAgICAgInNpemUiOiAyNywKICAgICAgICAiY29sb3IiOiAiMHhGRkZGRUM5NyIsCiAgICAgICAgIm91dGxpbmVDb2xvciI6ICIweEZGNDM0MTFEIiwKICAgICAgICAib3V0bGluZVdpZHRoIjogMS4wCiAgICAgIH0sCiAgICAgICJmZWF0dXJlRm9vdGVyTGFuZHNjYXBlIjogewogICAgICAgICJmb250IjogImFscGhha2luZCIsCiAgICAgICAgInN0cmluZ3MiOiBbCiAgICAgICAgICAiZ2FtYmxlX2Nob2ljZV9kaWFsb2ciCiAgICAgICAgXSwKICAgICAgICAic2l6ZSI6IDIzLAogICAgICAgICJjb2xvciI6ICIweEZGRkZFQzk3IiwKICAgICAgICAib3V0bGluZUNvbG9yIjogIjB4RkY0MzQxMUQiLAogICAgICAgICJvdXRsaW5lV2lkdGgiOiAxLjAKICAgICAgfSwKICAgICAgImZlYXR1cmVGb290ZXJQb3J0cmFpdCI6IHsKICAgICAgICAiZm9udCI6ICJhbHBoYWtpbmQiLAogICAgICAgICJzdHJpbmdzIjogWwogICAgICAgICAgImdhbWJsZV9jaG9pY2VfZGlhbG9nIgogICAgICAgIF0sCiAgICAgICAgInNpemUiOiAzMiwKICAgICAgICAiY29sb3IiOiAiMHhGRkZGRUM5NyIsCiAgICAgICAgIm91dGxpbmVDb2xvciI6ICIweEZGNDM0MTFEIiwKICAgICAgICAib3V0bGluZVdpZHRoIjogMS4wCiAgICAgIH0sCiAgICAgICJzcGxhc2hIZWFkZXIiOiB7CiAgICAgICAgImZvbnQiOiAiYWxwaGFraW5kIiwKICAgICAgICAic3RyaW5ncyI6IFsKICAgICAgICAgICJtZWNoYW5pY3NfdWMiLAogICAgICAgICAgImZyZWVfc3BpbnNfdWMiLAogICAgICAgICAgIm1heF93aW5fdWMiCiAgICAgICAgXSwKICAgICAgICAic2l6ZSI6IDQ2LAogICAgICAgICJjb2xvciI6ICIweEZGRkZFMDY2IiwKICAgICAgICAib3V0bGluZUNvbG9yIjogIjB4RkY1NTFGMDAiLAogICAgICAgICJvdXRsaW5lV2lkdGgiOiAxLjAKICAgICAgfSwKICAgICAgInNwbGFzaEJvZHkiOiB7CiAgICAgICAgImZvbnQiOiAiYWxwaGFraW5kIiwKICAgICAgICAic3RyaW5ncyI6IFsKICAgICAgICAgICJtZWNoYW5pY3NfYm9keSIsCiAgICAgICAgICAiZnJlZV9zcGluc19ib2R5IiwKICAgICAgICAgICJtYXhfd2luX2JvZHkiCiAgICAgICAgXSwKICAgICAgICAic2l6ZSI6IDQwLAogICAgICAgICJjb2xvciI6ICIweEZGRkZFMDY2IiwKICAgICAgICAib3V0bGluZUNvbG9yIjogIjB4RkY1NTFGMDAiLAogICAgICAgICJvdXRsaW5lV2lkdGgiOiAxLjAsCiAgICAgICAgInNwYWNlV2lkdGgiOiA3CiAgICAgIH0sCiAgICAgICJzcGxhc2hGb290ZXIiOiB7CiAgICAgICAgImZvbnQiOiAiYWxwaGFraW5kIiwKICAgICAgICAic3RyaW5ncyI6IFsKICAgICAgICAgICJjbGlja190b19jb250aW51ZV91YyIKICAgICAgICBdLAogICAgICAgICJzaXplIjogNzAsCiAgICAgICAgImNvbG9yIjogIjB4RkZGRkQ2MzQiLAogICAgICAgICJvdXRsaW5lQ29sb3IiOiAiMHhGRjAwMDAwMCIsCiAgICAgICAgIm91dGxpbmVXaWR0aCI6IDEuMCwKICAgICAgICAic2hhZG93QW5nbGUiOiAtMi43LAogICAgICAgICJzaGFkb3dSYWRpdXMiOiAxLAogICAgICAgICJzaGFkb3dEaXN0YW5jZSI6IC0zLAogICAgICAgICJsZXR0ZXJTcGFjaW5nIjogLTEuMDEKICAgICAgfSwKICAgICAgInRvdGFsRm9vdGVyIjogewogICAgICAgICJmb250IjogImFscGhha2luZCIsCiAgICAgICAgInN0cmluZ3MiOiBbCiAgICAgICAgICAiY2xpY2tfdG9fY29udGludWVfdWMiCiAgICAgICAgXSwKICAgICAgICAic2l6ZSI6IDEyMCwKICAgICAgICAiY29sb3IiOiAiMHhGRkZGRDYzNCIsCiAgICAgICAgIm91dGxpbmVDb2xvciI6ICIweEZGMDAwMDAwIiwKICAgICAgICAib3V0bGluZVdpZHRoIjogMS4wLAogICAgICAgICJzaGFkb3dBbmdsZSI6IC0yLjcsCiAgICAgICAgInNoYWRvd1JhZGl1cyI6IDEsCiAgICAgICAgInNoYWRvd0Rpc3RhbmNlIjogLTMsCiAgICAgICAgImxldHRlclNwYWNpbmciOiAtMS4wMQogICAgICB9CiAgICB9LAogICAgImltYWdlcyI6IHt9CiAgfSwKICAicHJlbG9hZGVyIjogewogICAgInByb2dyZXNzIjogewogICAgICAib2Zmc2V0IjogewogICAgICAgICJ4IjogMCwKICAgICAgICAieSI6IDE0MgogICAgICB9LAogICAgICAiaGVpZ2h0IjogMjUsCiAgICAgICJ3aWR0aCI6IDQwMCwKICAgICAgImNvbG9yIjogIjB4RkZBNjM0IiwKICAgICAgImJhY2tncm91bmRDb2xvciI6ICIweEZGMDAwMDAwIiwKICAgICAgImJhY2twbGF0ZSI6IHsKICAgICAgICAic2NhbGVNb2RlIjogImZpbGwiLAogICAgICAgICJhbmNob3IiOiAiY2VudGVyIgogICAgICB9CiAgICB9CiAgfSwKICAicmVlbCI6IHsKICAgICJzcGluUmV2ZWFsUHJvcHMiOiB7CiAgICAgICJub3JtYWwiOiBbCiAgICAgICAgewogICAgICAgICAgIm1vZGUiOiAiZGVmYXVsdCIsCiAgICAgICAgICAidmFsdWVzIjogewogICAgICAgICAgICAic3BlZWQiOiAyMi4wLAogICAgICAgICAgICAiYXR0ZW50aW9uU3BlZWQiOiAyNC4wLAogICAgICAgICAgICAic3RhcnRDdXJ2ZSI6ICJFYXNpbmcucXVhZE91dChyYXRlKSIsCiAgICAgICAgICAgICJzdGFydER1cmF0aW9uIjogMC40LAogICAgICAgICAgICAic3RvcER1cmF0aW9uIjogMC4xLAogICAgICAgICAgICAiYXR0ZW50aW9uU3RvcER1cmF0aW9uIjogMS4wLAogICAgICAgICAgICAic3RvcFNwZWVkIjogMTUuMCwKICAgICAgICAgICAgImF0dGVudGlvblN0b3BTcGVlZCI6IDQuMCwKICAgICAgICAgICAgInByZXNlbnRBZnRlclNldHRsZSI6IGZhbHNlLAogICAgICAgICAgICAicmVlbERlbGF5IjogMC4wMjUsCiAgICAgICAgICAgICJyZWVsU3RvcERlbGF5IjogMC4yNSwKICAgICAgICAgICAgInN0b3BUeXBlIjogewogICAgICAgICAgICAgICJ0eXBlIjogImVsYXN0aWMiLAogICAgICAgICAgICAgICJkYW1waW5nUmF0aW8iOiAwLjk4LAogICAgICAgICAgICAgICJoYWxmbGlmZSI6IDAuMDI1CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJhdHRlbnRpb25TdG9wVHlwZSI6IHsKICAgICAgICAgICAgICAidHlwZSI6ICJlbGFzdGljIiwKICAgICAgICAgICAgICAiZGFtcGluZ1JhdGlvIjogMC45NCwKICAgICAgICAgICAgICAiaGFsZmxpZmUiOiAwLjE1CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIF0sCiAgICAgICJ0dXJibyI6IFsKICAgICAgICB7CiAgICAgICAgICAibW9kZSI6ICJkZWZhdWx0IiwKICAgICAgICAgICJ2YWx1ZXMiOiB7CiAgICAgICAgICAgICJzcGVlZCI6IDMwLjAsCiAgICAgICAgICAgICJhdHRlbnRpb25TcGVlZCI6IDMzLjAsCiAgICAgICAgICAgICJzdGFydEN1cnZlIjogIkVhc2luZy5xdWFkSW4ocmF0ZSkiLAogICAgICAgICAgICAic3RhcnREdXJhdGlvbiI6IDAuMSwKICAgICAgICAgICAgInN0b3BEdXJhdGlvbiI6IDAuMDI1LAogICAgICAgICAgICAiYXR0ZW50aW9uU3RvcER1cmF0aW9uIjogMC41LAogICAgICAgICAgICAic3RvcFNwZWVkIjogMTUuMCwKICAgICAgICAgICAgImF0dGVudGlvblN0b3BTcGVlZCI6IDYuMCwKICAgICAgICAgICAgInByZXNlbnRBZnRlclNldHRsZSI6IGZhbHNlLAogICAgICAgICAgICAicmVlbERlbGF5IjogMC4wNSwKICAgICAgICAgICAgInN0b3BUeXBlIjogewogICAgICAgICAgICAgICJ0eXBlIjogImVsYXN0aWMiLAogICAgICAgICAgICAgICJkYW1waW5nUmF0aW8iOiAwLjk4LAogICAgICAgICAgICAgICJoYWxmbGlmZSI6IDAuMDI1CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIF0sCiAgICAgICJzdXBlclR1cmJvIjogWwogICAgICAgIHsKICAgICAgICAgICJtb2RlIjogImRlZmF1bHQiLAogICAgICAgICAgInZhbHVlcyI6IHsKICAgICAgICAgICAgInNwZWVkIjogNzUuMCwKICAgICAgICAgICAgInN0YXJ0Q3VydmUiOiAiRWFzaW5nLnF1YWRJbihyYXRlKSIsCiAgICAgICAgICAgICJzdGFydER1cmF0aW9uIjogMC4wNzUsCiAgICAgICAgICAgICJzdG9wRHVyYXRpb24iOiAwLjA3NSwKICAgICAgICAgICAgInN0b3BTcGVlZCI6IDIwLjAsCiAgICAgICAgICAgICJyZWVsRGVsYXkiOiAwLjAKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIF0KICAgIH0sCiAgICAiZHJvcFJldmVhbFByb3BzIjogewogICAgICAibm9ybWFsIjogWwogICAgICAgIHsKICAgICAgICAgICJtb2RlIjogImRlZmF1bHQiLAogICAgICAgICAgInZhbHVlcyI6IHsKICAgICAgICAgICAgImRyb3BTdGFydCI6IDAuMCwKICAgICAgICAgICAgImRyb3BFbmQiOiAwLjAsCiAgICAgICAgICAgICJzdGFydER1cmF0aW9uIjogMC40LAogICAgICAgICAgICAic3RvcER1cmF0aW9uIjogMC41LAogICAgICAgICAgICAiZHJvcFRpbWVSYW5kb20iOiAwLjAwMSwKICAgICAgICAgICAgInN5bWJvbERlbGF5IjogMC4wMjUsCiAgICAgICAgICAgICJyZWVsRGVsYXkiOiAwLjAsCiAgICAgICAgICAgICJyZW1vdmVSZWVsRGVsYXkiOiAwLjEsCiAgICAgICAgICAgICJwcmVzZW50RGVsYXkiOiAwLjUsCiAgICAgICAgICAgICJhdHRlbnRpb25EdXJhdGlvbiI6IDAuMiwKICAgICAgICAgICAgImF0dGVudGlvblNwZWVkIjogMC4yLAogICAgICAgICAgICAiYWRkQ3VydmUiOiAiRWFzaW5nLmN1YmljSW4ocmF0ZSkiLAogICAgICAgICAgICAicmVtb3ZlQ3VydmUiOiAiRWFzaW5nLmN1YmljSW4ocmF0ZSkiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdLAogICAgICAidHVyYm8iOiBbCiAgICAgICAgewogICAgICAgICAgIm1vZGUiOiAiZGVmYXVsdCIsCiAgICAgICAgICAidmFsdWVzIjogewogICAgICAgICAgICAiZHJvcFN0YXJ0IjogMC4wLAogICAgICAgICAgICAiZHJvcEVuZCI6IDAuMCwKICAgICAgICAgICAgInN0YXJ0RHVyYXRpb24iOiAwLjMsCiAgICAgICAgICAgICJzdG9wRHVyYXRpb24iOiAwLjMsCiAgICAgICAgICAgICJkcm9wVGltZVJhbmRvbSI6IDAuMDAxLAogICAgICAgICAgICAic3ltYm9sRGVsYXkiOiAwLjAyNSwKICAgICAgICAgICAgInJlZWxEZWxheSI6IDAuMCwKICAgICAgICAgICAgInJlbW92ZVJlZWxEZWxheSI6IDAuMDIsCiAgICAgICAgICAgICJwcmVzZW50RGVsYXkiOiAwLjUsCiAgICAgICAgICAgICJhdHRlbnRpb25EdXJhdGlvbiI6IDAuMiwKICAgICAgICAgICAgImF0dGVudGlvblNwZWVkIjogMC4xLAogICAgICAgICAgICAiYWRkQ3VydmUiOiAiRWFzaW5nLmN1YmljSW4ocmF0ZSkiLAogICAgICAgICAgICAicmVtb3ZlQ3VydmUiOiAiRWFzaW5nLmN1YmljSW4ocmF0ZSkiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdLAogICAgICAic3VwZXJUdXJibyI6IFsKICAgICAgICB7CiAgICAgICAgICAibW9kZSI6ICJkZWZhdWx0IiwKICAgICAgICAgICJ2YWx1ZXMiOiB7CiAgICAgICAgICAgICJkcm9wU3RhcnQiOiAwLjAsCiAgICAgICAgICAgICJkcm9wRW5kIjogMCwKICAgICAgICAgICAgInN0YXJ0RHVyYXRpb24iOiAwLjEzLAogICAgICAgICAgICAic3RvcER1cmF0aW9uIjogMC4yLAogICAgICAgICAgICAiZHJvcFRpbWVSYW5kb20iOiAwLjAsCiAgICAgICAgICAgICJzeW1ib2xEZWxheSI6IDAuMCwKICAgICAgICAgICAgInJlZWxEZWxheSI6IDAuMCwKICAgICAgICAgICAgInJlbW92ZVJlZWxEZWxheSI6IDAuMCwKICAgICAgICAgICAgInByZXNlbnREZWxheSI6IDAuNSwKICAgICAgICAgICAgImFkZEN1cnZlIjogIkZsb2F0VG9vbHMub25lVHdvRWFzaW5nKHJhdGUsIEVhc2luZy5jdWJpY0luLCByYXRlMSAtPiBGbG9hdFRvb2xzLm9uZVR3b0Vhc2luZyhyYXRlMSwgcmF0ZTIgLT4gRmxvYXRUb29scy5iZXppZXIocmF0ZTIsIFsxLCAwLjk1LCAwLjk1LCAxXSksIHJhdGUzIC0+IEZsb2F0VG9vbHMuYmV6aWVyKHJhdGUzLCBbMSwgMC45OSwgMC45OSwgMV0pLCAwLjcpLCAwLjUpIiwKICAgICAgICAgICAgInJlbW92ZUN1cnZlIjogIkVhc2luZy5jdWJpY0luKHJhdGUpIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgXQogICAgfSwKICAgICJjb2xsYXBzZVJlYWN0UHJvcHMiOiB7CiAgICAgICJub3JtYWwiOiBbCiAgICAgICAgewogICAgICAgICAgIm1vZGUiOiAiZGVmYXVsdCIsCiAgICAgICAgICAidmFsdWVzIjogewogICAgICAgICAgICAiZHJvcFN0YXJ0IjogMC4wLAogICAgICAgICAgICAic3ltYm9sRGVsYXkiOiAwLjAyNSwKICAgICAgICAgICAgInJlZWxEZWxheSI6IDAuMDIsCiAgICAgICAgICAgICJjb2xsYXBzZVRpbWVSYW5kb20iOiAwLjAwMSwKICAgICAgICAgICAgInN0b3BEdXJhdGlvbiI6IDAuNSwKICAgICAgICAgICAgImFkZEN1cnZlIjogIkVhc2luZy5jdWJpY0luKHJhdGUpIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgXSwKICAgICAgInR1cmJvIjogWwogICAgICAgIHsKICAgICAgICAgICJtb2RlIjogImRlZmF1bHQiLAogICAgICAgICAgInZhbHVlcyI6IHsKICAgICAgICAgICAgImRyb3BTdGFydCI6IDAuMCwKICAgICAgICAgICAgInN5bWJvbERlbGF5IjogMC4wMjUsCiAgICAgICAgICAgICJyZWVsRGVsYXkiOiAwLjAxLAogICAgICAgICAgICAiY29sbGFwc2VUaW1lUmFuZG9tIjogMC4wMDEsCiAgICAgICAgICAgICJzdG9wRHVyYXRpb24iOiAwLjIsCiAgICAgICAgICAgICJhZGRDdXJ2ZSI6ICJFYXNpbmcuY3ViaWNJbihyYXRlKSIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIF0sCiAgICAgICJzdXBlclR1cmJvIjogWwogICAgICAgIHsKICAgICAgICAgICJtb2RlIjogImRlZmF1bHQiLAogICAgICAgICAgInZhbHVlcyI6IHsKICAgICAgICAgICAgImRyb3BTdGFydCI6IDAuMCwKICAgICAgICAgICAgInN5bWJvbERlbGF5IjogMC4wLAogICAgICAgICAgICAicmVlbERlbGF5IjogMC4wLAogICAgICAgICAgICAiY29sbGFwc2VUaW1lUmFuZG9tIjogMC4wMDEsCiAgICAgICAgICAgICJzdG9wRHVyYXRpb24iOiAwLjEyNSwKICAgICAgICAgICAgImFkZEN1cnZlIjogIkVhc2luZy5xdWFkSW4ocmF0ZSkiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdCiAgICB9CiAgfQp9"},{name:"R_preloader_logo_png",data:"iVBORw0KGgoAAAANSUhEUgAAApoAAAJICAMAAAD2JLTpAAAAe1BMVEVHcEwLBwQIBQMOCAQICAsKBwcLBgMBBg0OCgUFBgsyLRtfVTcAAAD/xlMnEgL/vkzmkzHvnDKeSAhaKQOpVg1zNQn7xUqyXhFnKgV/b0X2sUHJXABQQBvWizA+HgWGXB3/21+MPQW9eyr6+q/Dvo+9rmSihxCXkWX89YXtwAsrAAAADHRSTlMAoeq8GYDXZfxD/v6ar07pAAAgAElEQVR42uxcba+zqhKtVTTm5hB3rO2NUUj5sP//T7zyNswAdu8n9/nkmZXz0k1xhDWLYUDs7cZgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMxhXRjaIVY8dEMP4EoxiEsP+Of9OmhzPZiUY69CNR69D9P1brI2Ac/2Y3ahCt7wsPtb8mFosOeTh4cOwlAEvHxrmjpBlG4pFW2OtHopfWlaMykUxKge/Qd9Zsf9TunFoP891pmBWZ76lVr3l763vrrQxNuFEv/lTvw/hBhLZ30E5Ml5TNADYG+GckDN4b0VUqnQ/LMd0WGD/h+RJoJHitgT67TmIeVJ/4QdwMpFrfY+8P6AtR0dChIuxM8GwqbLuKd6Ca6G51q/be6O8h9cuPB9FaWEeGkdhlA8w3v8lVlkAV4mnICx2JTVbmiUD9bsZc077fKEZAw4QsYO9R4/kSQIQiHvvC4SEa5aUNLlCxDEseq6yTFcx610SR6Ko8YDa1JuVWO1qiBiKOtjIymg7Jw9106HMFnATpaOA2FoVqaMouiVvXZgVlz6FGPxSKz7Re5fkSECddPrxuGdMBQa1lGJBthbqmrKgcZ1YkWzA5+y++1+fznz0zsOigciqJMry473OrIwmaYcipbXNWVa23qu1p35sKH6dB000qbjLRT4t11wseqqTivcuvFh+19/lbqao8XyZobsvhNk/jFoXYusijngHKBaPosk3vhwOMBkJcHfen11TTeUZtvefuyyxn9nITTH77Sw3YP2S6r96KieaJIoLg1HI0cVMQ3QurAkrW3YQWru7bTf4GbVSmY2MrtQldtr0LNPRJmk6ekZw4ZhxUjIjKMwjtwZU01Rr5a39iQM2c50uACitwaz/dCNWbj2BOcAr4WbdcmjqUOd9uK/FT4wNxLAyRUqe7Kyhe46cex0zv6ihCo2JYza22bsDtTyT67YmkqXeLJIlFZn33YVavRGUn0rQVFhc3iTSP9mGrzycZGhqaqxCBmJgNpEwcVJVmyfPFpYlj0dNHsJEQgciJnzXW67xm9boRB+JniArJjzpqaUMBMOWZbs79zm4uvGSpVSxN3K+ikxLLFxVn3dw3mlvkYoozANWhLouWolrQZiFNjeX9WZolz1eXpkSxyHHUOLWq9VmSHSzoFERyGm3ZSOe8DVdT8EnHOpkeGonHSmzycLuVVkckzR235USaeylNMgB3RR1eSDMOUaJD38FK1FSFEM+kGS74LM2S54tLc0zToJWbZbQryXmuKlmI7vSmlmc+57ldDlN35wIe+451aAAY61Gp8+kytSrwFK+QGE6kGdJkHMvXvI/97ZM0SeDVe2GVSPObBFz1SZqY3hNpVni+uDRpLHLUi6TWdd99PoiipiHKpFOvY7ijTgizlbP4z3fyRj3VFGSoxMvbsHVEixtcpFFHvk+k6RSApYkl4DOUoUaa2WLWaIhlXWgMzzFfue1zaXoykdAtfK24QqvwfHFp9tRBOnjcpCWI9jlYzqwmi8nNLka3sLtM1bXjxfOawty2gR202kwm18MBSpu4x1yx2uM2GeS+/USa7gtUHOzZFfQWWt8PJ6RpmFaQiRT3aQabbnqMhm3X5RZHnrVu5bf0z5Lnqy+DYBrcCRNrmmbQvkYezHrwzhpXmYfMBIhkR5NgKJpBXjqlmunRWxLgupGtlfbEqsQBf/1JmjaeoWITI7kkT5XqpJk8sSS3qEhzDWEvV2tVmvtP0ix5/hdI02cxekUhbis4zKTp3HlvMLl+l6cXIwTiVeN10IIFaesbCEPpAbag+0zZxl/FqkJhfKM5RE2ax2jLi9fiwUudtK2Sru5gIJNmjxLjVf9Cmrb0ozRLnv8F0vSxaNtRWfJ+H08YEA+7taxqBFneexe4mmGriCrcX5kWHmtUUZ+k2RJ/Z/vRNasbiuMar+bq0oRaJwNQ4ZUvJU2V0tT5jlg6DEKatqua2rId0i192zSkcp3n4V8gzZAE4mCUvh/auz3Y0xBpeqqbwT2BRvsvOm5kx8AHruvzHSGS3KZDOCq255v4jW7b49UVWrimZwTPc2k+l3wSVtjt5NEUJW3JpalMdYWexKSzDQ7cjnKHdEdaHKg06zx3l5emCjP0Uv2+qU3oYdgO/lzDtpOlaY8eS5IAqGvSdKnm8GnlkVr6XbGKVkb6+RtprrX88PkLaZqTTcxVVqTpjwn9Z83Wgp+k+dTn0qzx3F5fmpERVU/TqrnmFqJmOKgVd/hAhXE1/o1XLGgL2hC/orOSH6VZs4qi5vqDNMlDhD+Wpi4sk03MXJr+SBM8BQ28n0hzRf+tSrPK84Um9C+LIE332bPzcp8f2pd5aS7u85xL8ytisrq4iwHOECrzhS6ZXZ1da19qx/jdxp14uVnipxdNNW+22uTaA62Ellasxjr7F8WcddJ33V83QbGvoHDHCmmGUhXa8kA3/ULNQEUhzsUzTssEHUX3+ZL4sgXZS9JEf1Z5Hi8mTYxMb1/gKflfJGP5grNtqZbfCBd3tNYslA8y0OEgDhTrmTqiIyekHPs7MXNmFW77K2nOWd9n0NYP0jSGGEY6nBZZk6ZEJ+LUlLWjlGYID6fSbKo8i0tJcyLeTbHIF0yJfPfRr3aSA2U2uNU9Hl+z/0F6MVQocR00JwfjgYBSTfcEXccbzseQmFIor1iFyAd9Mh+kiaNdKt7905dXGY2gCpCjkTxwQbzZOx1Q9eTOlXYYdCIufKcg7E81adZ5FleLmkidQM6UaU7KB0xfCjnbVZ3IRHbox7iLvJ23DOxNweqEQoSc4G/jP1lZ3IfsnSKv4GnOYnHdavDtA+bX1LhcEm+XvAQTOJfxRwChdnc61cRToe80wPegxTeOhfGg9G57EQiUQOAb1YmXzdAw+63oSGVR51lccUKfUOQwuHCKSdEcpKMfE4SWLGVTRdoVFbx8VebXHgRvPYxStxZLc0hNmvSyGJRkVK3G2T8G5BcK3kSakytM0QnPGEbPPjq79vTj2VTzUCFp1mQ0o5uho8RZkH9lUTMcH4U2ajKh07VBU+f5UrnmVOaaKnf4JIvZc4oxMqRsEwohiuh9RyEXlUd+F/+3Bp0tWarp382as9TDnFv17TTQ3kXGO9QmdJRTQC8nbHMmLwhl6fUMr3lQncSbTRDWiwE6YQJDLUPbaEi2Sxot6jxfbYX+0kc+9DYwqS3FkkJB8j6B44zEHl6yqT/V8w7Yk8RVCo6J3xkkkqeat0GcheK6VefRyfh+TNZlJ1ETF8KEHpYoEwltQynN3ejw5op/zuMtP8KlpmhyavD0VRBIilAbp5Rr5tLsazy3V988eiA5LjiJnCc0xGdJUrYHMqVQfH3kwklRTfZp+wgmyiLVvIVtEhIhlw9W4ZOKq5JUrZJrpugks1666KxofpFdKWH3O1he9kxjE5FmsD19ZQRiab6L7OKNpemTSvdsqeD5Sk+DqtJ8pUzy8P7+gvAg57QNqSSJmo6myLZUL7qCCh6D/T7jFwotbB8lSRWp5m0Me9Xehpu7lk9WJUQ7HYbYXotIb/Ru50QWLCqNApdKSlGRpobfKhiwNI9GPUwWNdEuR2LQzEAgyHUyfnGTluv6dEIfKzz3w9X2Nd/Flvux9NPZa313v1+8vI4lpgku9e8Ev72H5yBXX29+7Da5T4fn1PKIJxqgsIGMKc22RapppRlee3Ve31+L/GhVanPA7WSF/y96med884ic4JhnX6H3rVfaTKn5DfpVDffI1cI14m6FCc3L8S4ndMegNb2UzyzQch9vNR1Q7lwelWZ40Z3wLK4izezN7orXWvJrKf0P76F78u+ieFW7Jy9j41++GO71F7DJCZouPpinRs+s/ila+mMclR8tOO5P9v9ROwP6392q/9SH8rV1/O19pP4ahqHguRmGi0zo7U9M3hPl96bkoq25pC901Ass1qZB149DtQ1tNvhdYOrzn2nBN0dW73+oEiLGvjIKbM9HssmKa3uIX2mzzbrbDp9ccPCGezgSf/VjhefhMtJEPiHDN/6chZXj8dkdf/MeaHr8e1DEJX3y41GcWLy37sL2DnK2Rv7H3plwt61qUfja1oRDlLWQqGnlh8tKX9L//wsfBzSAhGylzYvvSvbXIZOCJLS14TAWB5ckC8Rd7IM8jnOYLU5e7FZTnTrwirlYg3U6ijLfEe7Gxl859Fe/Dy7fHTFJM9BDMZomcxnVrxS3O7hLWaq1iG/C3UPKo4MrO0zvBwuf1z5nyXz+LOM1g/wMX3vKwXxnH3OZIHdyCH445uNhkGv6OPedeZqUv/4a7CUEn82kmU1JFG4JuPxqqvYoiz3I3kVBl0DXSAu/hTc8u6083+V5eJtudbEx5TDTXKou/fE2slRWldGKNeM5h6Tz9EH5IsNzf+lZ9LxKlsxn9mmkmcjIxVPbTv7m32BrP5hdKSvvC1vLNEf2IdfH4lNnyXNmn1Kad3nk7KYU/hXazK5kGi2DmH3INcxOuyXfvog02Rtcb2t2ZzelEBfp93lZsvWXxK/PeQdpZqmTfpqV4tib1MiWx6dNb1nUsPVycqM0E8+BvZeTsvL6XcZexJLXyf7s7b5xDyyu48xPzT6tMjfkZ3AISzjGPyvPMbtSFwuMkq1dQ6pcyq6ePPtz34rEmLqkbPUdYatXt+FUK+9BVKaw9cxevq+fag15tuKPLH4zGcuy5RNwOTF9g4VPa5anwTeYz9BxAfnUw1mpMS1Onk4121RaM/vL2XBjbHZmdu2Bs/SP+rQpSfrUfmTJt3b266l3e/XKFqde5PMn0uaQn1GW/eP3jEi+hP5NDn5Iuei+ZNHDWhznvpNK018DY+FnK/inXo5vykqqGes3T8iGj/ZhZ+6Xphuep9wfMCUxu/xF8rdNKi6uh3POkp4flF27suXlL/P5E7L21LaDTUkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8IbKMWcoyz8vSfpIhR8D9RcnKfFfsKx6yLw67HAIFd4Ox/FDwVfa7EuoEH2+WVpWDVda6UdJYhLD/Sdnouv/R/lAir8AH6rLcFaMqlRFtt6Q1Std0RJFt0DkrUfyDv9flYT/IUhpS5akVzi69bwrRWk5On0JqztktmR9cTbWCwYK/06UvqiutyCxbQQW4lMrSWJSir6QRo3tynm1IrnY1gB0yGPydLuvGuuVJGOn1OKFsLbP2ou2RfL+eYFl47xXkscYa7AGZDN4ejQ+6tMqzJbWRzUyVyumyViKqctbrcmNWmNHhCr4J/tgvrcNRhCMHk1SeptE2KK9qbWbBkOE8X0lyZ4UpRSskOa8N8G31tOEc9U3wdl1a4VFBbaw7EqRN+uiriVXtVBtzatVaFFTaUEoJSmuwXSvTtuZ7BOpgc0leOOU15tS3CglqFpp6fyqqXZpU+1EnWs2rpA9ay9RGKB1WCYy10GrNZAFYcCAVnRaGSM1Frp2oW6UV1gYPiR4hq3Zbls9rqza2OjVXA3oAYmlWottKJGEhRM2LpTRLzptFGOWLdNgm2I51uFZSRfB0S5fU8t5GpmmVtgi6M6t1ZabmpgAhbCRUIMvBtiBoz3UrbYzj+3nW9Nm2whOaZmu0nJfQzKYXW6YKbVPe6j0CYJJm01kpUVd5rz5Xw2xt4X2y/1OvpAgIPdS6badj28ypMFdNGoUSHbxBmpyrTvamtoGwpklfnUIbZLYwlyZhmWoo0VuNZnewse2Ic9kNapIUlF+XZjuTZqem2mNZ8ToozJfmacRJobcSbJam6QKjk67NqLvpmpNO676LJ3PNUMvIXEXSlGh1B9soObfhzFxLVPOM7bPr/4mFNIUXGyvCyHzmmWqMgwyvEAeBLeS8mkuzaeqqqhrTi7NL2mbwuaLqY05d5nLVL3vF2+pCjRAdbGLH66U0aZARSW0o2LuFNE+hTOuqpMJcqquW6UJ06kDCEA+whQOv24U0aQxcQ+I0bZuubLaRg1JXeyNTdUwV69NWAWq0HoFNFFy3wiQCai9OHUbs3UyaY7Suea1UWpKxb1LjEVqPwBulOSlIBeKs561JQV1zan630mw2oEyNeRhgG1kVSDNRrGsq76PaZju55tRp2XCd0ubMQFVDY+0OaDwCG2CcN4E0F4Wx1FwnQ/RYmh2vVGy7iRKdpl/yCusqgE2UnKtWyCtlsKYDwkB9lGY4lFOmbTPyTFLmPi8hTRC5Y7k7HA67xUpFeSjNZOOPqrlok64ZDU2y7tvQTGCaG6xSPeiqocK8LCFNEFQo82DlongtGCtN6aWplnbnv6WoNppqPQqVaQWsqf+9db1IJtVfSaa5I2miyR30hrmr+ik+NBeN2tKLSZw7zk0rVEKRwZd0SNBdOUwMCpTZHF9qPraBkkKFmcX7jWuM2h9ySBP4yqSblWZF6aftUolLaxUM8jhQF7q43vKj6uYUBOm9JANlmvr88nLh6hTHS2YZ7+sqejHAF3ZMt35GM6wLM4wt0uP08YK60EUiZom+rE2bGLE5CFPry4vF1knj4XNiEV4pIVSFjkrglilwwlzMHzO1b17M9mMXumpWB1oq3bSJEZuuL131wiTbbLpwiNJknFO7kmk7jeEdIK+SwvQDJxu+L32zZteaK6r0H3TSNlup9bkXprfNeY/7vK5gaHgHpImynNZ7W6lGytZUfEfSrE0nVtojVWi0c9cUKtKlt815h7slnlNJk4MgzS9flo/CVFPorYKZt5rvaJRlVfdB0tVYyDi10Tw2t46RnuvS2Wa9nL0RN5qKk8Eo9y8el+95OBgoiRsFxPnl5ay9PIfFt0ilyutYDUtyNW7sJrVXugWRlrK0nCfX7IL/22C2kOkkJqJ/+fBnnHO7KlBasICk+XI5H2lcu2/61OMqcWNF0y3KpT3npCp9eV6J1LD4YKSyolNieMcXViYtbGmESnTuxDVIQ9p8+c/leCaOx9q6Z0WLFVqRRjhJni9rouw9k5tTYppb6JuSnBrSvLtA7rX1U2kDcz22VaprgTdpU7+cvTQHjlakltr9XTfJGUdeBcPl5r4ph+DLRkE7SPPOZereb/2Uf/TeDzay4SoKutX6VDLTKV47Nc70GbBFmNYy9Xx5pIj+dCdaKxbSvHcYEgyo+MCtyQ42MjedUCtzGhczw602q8kuExI93rbNc0XnXKy+uaxukkvvMfLonuTLrcmqDzFQV80Undg0HaKPhSTn57MOJXkM/tyU5uVob06ury3XR0X9mkc1utDvWpgfVvfOq2hzR7cFaWb5vyhTt/HQYDUbTqQW2hx8c9DirOZ5TZqXs5sUfGPlw8E2Jb0GO7S43w3mB0c+/Pr16/X7+VitynRfFMXBSvXdRjBme69Ms7pEQeJz6XzzOEmR/ukNrnlx91Y1YsOynGSbujHWNHkOad6tmum1eHx+/v1MeIHyq1SHd3leRazMjciWtFnXdTIQskF6SpX+lasbs2kxY6dNaWjDjD2Ga96LXa+277+fnh4ff/78PQn0Yd1B+XusG0C9jjScVzXNldXalt/rtem3waiPej1Ev1xIrPW079V23KqdNU+u/Q4+Upn8+Pjz8fHxyfJtEujzr9fXB2tEKYn+dXSQ2VTlaWyoUcuRGiqarRM0vZM2a7fzxbD1BXUN1Uf6Y9FHanevpj0xdGNO3VtxFYcqhzTvVJpPUrv8JG16eoGOCrUmam309fX794eHQaj7dzi3n8SjmrditamoYZI2SjWSNg6ySpy/P9SPSd3gRoi2ezu0SJybtwaV3IWwOfPhMRAn6fPx6ds3X8aPEu2Fen4P29z15XkwuFylGzOX08WtNhs3Erh1i2X7ZPxevjLe0tet6v5HyqQ9CSpMWrtXcB7ZjP7+IxbnaKFPjyTSR9Ipeenz88M71DapMVW3vhtbXmlrVyu+qakTKZw+0Q4Ip9V2dQrGbWwSpvIzKlGe37emOZSB58sPp8DHNZ6cVn//9x2WAspccCJF6wZVCiNvLUA002aruezetJz7Bq/Ujdv1shU0yMlNQ4c0/xXStPwIZbkm0Z+v77FKVd5Hzm5F9pPb0m9crkBd6azsh1JSAL1Bm+3NPa9O0faqbpdBVQ/KRHl+H5bdQPXPhC5jhdoi/Vv9Hs1H7H/snYtyo7gShgsbsAADnk2CBweM4kvg/Z9wJbUELSFxsbPneLaWmqrJxcG2+Pi7+1dL9nDFcuabaYhkke+nIfuDbZyq776OvW5+WrouPx8K5m8ohPy3P8JLqWZMAUWTS/kjkWuml/OPOJu7nReOZVs1Aasm9onWYs7m70/rBu6PZZnvR/5hvlAbhgEnc32t9//qLfz3ekeqTJ+M5/SUJEkFFvbTnysa8SvvbTcb15QTaKlE1JZxCt38fXwwxzyOP5/t/a8PhmYQeGEoJHO1aMKWOJv/9jF++vCJG02K4FQ/pJfhkeFjaPqR6meK4OLvGAni2G63YTgGlUh/0iKgv7+Oxzcx12nh8riyJOebH72Ju47shmNlhrJ5bnD+gSscyWH+07TcH0X0krrqH6qj+djcsi/2MwJViXa2I+CkckbJKM4LPnXpBO/d+Oi/tWH8+A4rKc+Kq6B/NSsuZ4T3EHuFz8Hyo2Abojt9E27/oL1Co51ZCLU4z6Sjeui7f58P7VLlh0hV/N3UwRFlMqoRSjCe/Xz6F/8Uaui0fH/gw6hBL7/eMtVHPYC5/C36gRrIrLyJGYnlesuSGu/HO+nZC7InSuEf0knFhMvT38GdjrUS/dcMZD6CZqipSrRbcHBC8b1v4vmbqSQ3kR46jsKe/+tDcblXKeYqMv2dwoAkdzFdRpbLpmxJ3PzkfCh7QQRnRPzQ6PT/CDRFJTJCE2kn1lCaSLAes1V41RW3t5aPU7SUTQBU45MH957O31+f72/6Sp9FevkuwGRyeSZ7i2AujeZRr5f7qmVUdmledMnibHMoRLfRjwmmUgCSlO3tdpNNELyVTD3Z6/dHSzYGMcsKW4U+0FkNht8DaQtfByTGSRn2/nI4OZ+hLp6Kzi8e1PdrCvKjmHbn+ycM7Umhp8CEF7WgbPCR+xWXDIGOFny6jMZL0RSzDplE5meWbgYbdaMIJq8dHKqTrCLStH1x5fRNNGPnFCX8IpPBfC2ajMFAXMakK3LaxX3A6yvIJQcMOhmJJwvq7+f924py/Is31BFtoR5SyyXrnnmRQQwuU97ymqYdLxZD22hHNl85Yci0YA08bzrJaxlzLjv2itJC9ECIVrIUOsnaav+Dd8I/Z2yiSy5utcFxH9VAqZwFWuf4CSiHlEGwX8TapfMZCwKHaJpTOEl1aZSzqjJPPmv5+UHIx5Ji/OtDoxIWOOsHeulgbAX6Cj5fS4IEl1fFJTu+iXVCgm+Ep2+3IFIBwghixJSQBj6XcspVXom6UfJRp07Kn+uW/MST/S9kM3A47sjbFF/k9C5u7YWOHyilUSfG4mQMTecmV3x9nJVRGHbSHur60vROj8CTL+NhGWeWTbQMH0dQirInGD9RBClkaNhXDGHgMxh+QZIW66UYrloA79upCUd2BeF/XHQ9L09kgbCWhoPJEovc0Z+TF7R/spcWzkhHs3T3HClbk8yTydAKvJF5kcXsOt5UykpmI6ZBqASiOlwul5rReWzOCBEB5fHrnJ0/jlapfDOpBN2wgOkbFiU+Nl7Ue8EE5JJxWeTa7cxXE5tFcKTOGOmayY6LWF6Qdtc2fqoeghcWczBdXCo6OZzxS00NOHQz0G1Nd7IpbM1wKpoznCxQkopDCUm5OFWiXaM5RAFQqTFtfYGD49lUCM+Mh/VP1GrEKx3RA69DSbLqjIwGk0v88RuEL41L+PIidBeI56oElrpewiHqc2K4h1CIlwT1a/W1eXaXMYlFdWLWz76IPdyf4MtZp7auiMSot7NgpurJWpj5eumgHlhsTdTlgfLOUqIZWQliGZgZBLlS3lWlSJm+DOdZpQ2+L69kJcmsFZ0489zzuuiDF0Zir7jM1EkW+qumYX+b2ckUYCqLsipliatq27LqT9delVxaKBDvztuNCnFW7yQoWiBhvgCbQ1RncCokyUi37fWnCOZMMm1g0vH8HlNOKZwvzWbgdtyNbrgGLqg/SiqZUpoYxEnZIijxZVyPZn8ly1pxicTz/eNM9jPLk7PqoznyR9cHO5lcjxSYWXKTvguVB7gvcDH3pRNLGCZe7+xGmhlfuxbVR2MzWUR1BefG/V42FldyJ2v9NDd5pKmrYQcWK7z0Z2oPE+mkmPSOhK25NWJKrzNOKEcxT3Qir+yckLKIqKwRnSK2u6hkSnmERwHXFjLhPUkPIGllqC6k78KXSfGV0N09kyjlU0GTR/QNoieC++bWFRxaWQj5w6iVXTEE2gFOPKJVUpZ80aBa22rCGcg7ZkEsR8rZQVB/YTa3e33Fr6vDXST4ZlUXbSahtHN+Xz0g4RDPawQmxpMVRhWP4cSI4+Tc1Af0wLNBpvIwZX0jnJfUxl7f3PINrauOK16Ydx689pZx06Fw0Qd0cqN6oEVwxmWrsnSVWCQWCzSALINOgzmyA9lztS8d0/1QtzWdSQo9ZSM0IwuUnRtKdSaycv2GqhnaXzqRFz20w8+rUXTPmuFBFSYzGjZyAslkYHZOTVTzfPGJ0uLSuN4i1VdOSeKvVP9NMIhmbmaBPZzSOud5BfRxC89cvA5kkS4gk1q/y1Ng81WnLVFoSahDMiGeH0byL/42UfWChHIyqsCZ4pVtY54y7GlxqrWQXhup5+FiDeyNKp90Mo1nYGVElzpzyKEjMG64dtV04s7b6ncV6Tg4ORvzWokAACAASURBVJ8H2xiK0NGxuTPASaoTzWFIeWaRFywfvYouhD5n8IBMpAZU77edKiAEm+RF2YwW25r1SP35rPhd3tdpPgklNebi1+zer1qek06c6HSwyqZAr7EWRETy+6uxkwmclJPOS9925ZifMJJN30g0cyPLVvvzGaKJnMcSMlty0p8nLygUMBIoD156uiDNpJYVsoLNzcuj2c477ji/F4rAI1UxrZRjEU4WeO6WQq2VMYs94y+NTqWdh8ZeCiUiEajzC0FOe6QnzOQ2bQmO0MxcciTidqQnmsVQvYcogdAzTQNOGbrj0S8LKGAE/nIeni4ugHQlLVKBuad3rTzTQCo6EPojUrMn2lSKvy6Pc3pHFHs+eCItgvy0mBwF2ynXukcy9pG7VqWNxbM+Oqp07jnVJ3raW8kUI1BdZ4SHluZZJyO6h0rMRJ067/rZBimabeecUeShW9hVF2qxzKXYBeBL0dylA3Rm4XZKr7EWDOGemV/f5AfbcDtGmBs2ZCMPfiPyVTUEwPE9+c1m2cVfZGtSNYmD0QxlvKGULogdpnsUrNb1eDTquYan8oUsqebhV55Cd4rqnIpMT3DOeRFauCyiU5VSykRzIKc3J2SOQrqJ7SjYS75ybhpnIPYCnC6sPai8XW4ETfr3VuJMnSpVP4ycNJmzwrjgDldFS25rTgNVWQpDBgxD4rvQlgTPjsm63T8Ch4Gg8PwlS3NZ49jQFAUudJtaySznIyIonpbB5lMCG8kNSnRyOtna4s2IJgxjLp7Ufgtcy2FyKn+Eyf6NXYcdLyADJtmsp9RTowsg35jydK9V0Vnfm33Jvzh9s/Oxczfim8vC5NZb0K3ZawHyjqJFsc0aVyiNV9RBvYXAL1Gu/umnPjH5dIZzNtYHJuzPkcktd3NH3MtUsrkzE03guxS/ktDG3cSAFTwcFXbVFDFdvpzqurzssf2oKK6VWncA5eDteieTFwgeV4lCDTdZ8VhQUXxc9gV8kYG4CAesXohmuBTNVLc1vbmLNJHldGsaPKJRlabzqUojWvUtmDzB0dksv2UruT2aL6ki8k71X+wnZLzXRk+OUKXlsBRa/OdFk1ZZWR9EILBXpywQ758J5+aZtqqrrr12UGZF02GMT5rFenCOzEFhaEKWCJk6YMJ+GK4xZsRJJx3Jk2iR9ceTSLO207gruVwxCbEzUuEc77OIJo0hlSSqMzjYWnykJ8jk0ZXvhXuPHTtEGRbEJjATzT4tCNUu5d20HSIP17QTZBjlE2RSfKZot++NCtoR5wWS02as9mKFWqytbLaheQAcT8O2RUvRjBak9YOtiSbIwkX68QPJpofRzBGSec8n/wcXEy0i343R3NrIjBc7L6JohgmU6TuSDo8xNQ36seUbclJF06Gic0lrLhQYzPwnD0EikbMOYjDvbtUMFS05DyQEX0kDTcqhkbkeykzo92o0FzQSo0WpW7N7fc1RkOU+b6hpVI4DuZJN/iXEc0RmsIxMsiIgwm7NZPaOpClxcjX8+ZRoDiZqe3UH4ng+C1sY0uW9lFw70RhduBcieNjWZblAhtiMdIErCoamzPX4OzqtQ3O3xDvqgzCqx7RcMzvZNqSZqfajdVXQMC2CiFSAylQY960HjqZ2465s1wXEPMWVuiuiq8dYcoWur6xvTr2DOWEZX912qxDnA50L2qwEnHuMNG1Zmpn3MhTOSJnQwAIy3mCAiX9Q4wX2esmyOO7RLPobeSmawWI0G93GisiqEt3CebCuCuIte1gmh2pIDKdIhbfjdW5oLxydTGA+uRb9CRe+9lZ3pSZUiIzJZGG4n3YtJs0QFF/TidbQmVjHG7jFxvyTZUS1V53IKPn0pnmR1Rlmc4eHRSr/t3rm+LISTWRrnqYviWFr6hsmfS9FE8ZoRbLZy3pc6OU5yjf5f3cyLPc0FzEj28g3ZgxwqraQTxrPJzJ3Z/Gcqz+fEE0lrBXEV7BfHMFnKs2n9N7wT+eOq6Z2b+RLYaoCdyL/Tdu1Nreq69CbBymBGmd/OMzgIcWTR8P//4UHv2RJthM4sy/t3k2aR4O9WJKWZFnfu4JZ20UnOgisD1BBA11haMKlc+nFNmge2DCXHXMGzfNXhZYHTHoVLI1Sp7Ypm1Xs34AdTBnRae+44hOvWroFbxXhdY7MKlZXMLFUvgcp0d4L5rS3+MsHz551y6TpE6quONj8Ypimccr5DkYJ6N4M9w2pCQtp5fPQfQvGXFI9Kedthul4gAvcx6rPY+V6/WFoTmmnjZXQPCUMUJoTVkhsJ39XrwrR/WWvrmaXyBHkleMmWg/QpAANMbvjqV1su2HWhSSy0ZH5CfUMrxeUh8tD0eOUZcmim/Mb86G/l+7fkOboizXD650qltGOLb2W/DBvppGMknlmoMxozIOeNOQb3lWATEkr64xNN4vHdyEU4tCMkchmaLrQSqaKYVbWZO0Vmjf2AkCJfNr10DwgX5PSJaVQ+/l2uKhlGaa6JGjG2nMIpySWSwWOsvhQIIteWrOywLcuiFIuI1SWI20MYouIQ6HVWIq5LAEXclL6mYhn9TUtxJ0CP/OTtJJlEg6EIj+MzF4E3gzQTFnTD5Pq10OTFRKTSaKfVbG1oWfiz9WlWFVc/calJiXzsrbjx+SuVhv0CM3lT1C6JLDqa3aZH6PubtVO0nexCqRJJVKWYiJGHvhVzsPHZOUSoTyLeuTznRyp7YmY6vawvj10QUstk+Xv/CdwDs7329Tq4oo234WVmK7qg7ubOWQi3iyz5s0GMmrcAE0ua8o4AWgywqnuE2gePoToaITM6n23iK+53cbVYdAJKTUIlPAV/tMsaRY6OpnGMF+mC+oe9Zb0OTBDXSzgFyzwhwAkjoVcYdF78Sj6kkaPfEOarVvKxlag5uNUYyqy0HRG7v0OJ0EyGrL1gE5lOOWQ+Uqf77HpEfGPjh/bMWhr4uTF991g0L9wkC2ZaZMo+5JUa7qZ330I0cGlN8ONlJPvtUV7iNafGhEmA6aUbiSwj8Cb0iADtUOeJrXfEjk11hO5XpW5QWgTW3RVkj+LTrth3TJpXq0Yjx+GgD21x8ZoZ0deFzZnRgq9fgbJqFAPmBQZlzgzroA7uLF2rPkb/UQ9mj+sx25DopLImhKZSSJqZ2RN3jCpFKLDGNW2Rr2P0Ky2QvOmRaRKCk8ZqAznfc8ZFclJDJ40Wx3PU0quS2lxm5wn0rQ3oYkJSZKVW2T7JY4q6vwuQ0lEp0jSKqtRZUtrfktFWAHIWtu2YQXK9HDryIhmOFOn2DxAW7cbZs1vY3/qAM39NlnzKRJhBtl1vwid9UaIAs0oiqGqX29phzvamcPXVmj+etZ0LCmZURcli067gtsVNRWIxrkTtqe8TB0mnuZX6zgaPFmJAybunkriuXqPYJYCx5xouCbQleBCCdB05TfoLaWd/axB73wXvANviOaLcn34Pr5bdeIUJFjTVrbmBJsnYMob0TinYRpdtLwSmlTWpJNECymab96Ez87+CVKqhcP3xZ2djQLW3K/cXwJBc0JUCXbcYdR8O7tXJdj0JVyPxwBG3a/L0clcg1nXPa9LHnv0bD3SuU6jJ8liKeImCS0ZMAPmryENIFnFgZebaHgG4hEtdvGJRp9/2B3SSMhLRmlgzmqbkILkOw683pDsi5ZuX9HtG6yJtQ/st8maWubjCw+FLtf17khCdJ7xk67K0XY7CivbaqSAb4TmKILxDoCUmEZt+QyNKY/gDkMRov3TIVMoCWtG3ltsaLqWo3NhmHM2h9SiY2xECGXuCcGcpfgcy/ze2sdYzDlF8dcR4S32HuNHsFdOle3n7KDShrq2t6tOJFKQ3nMmWhTiPCWTHv2F3cz7fgrEb+7cvuuNE4+mCTmcEqWod8nCpdjr6KZFklGxt3x/FiTch2T3qggd9XAHFAIeA2+aW8olrkljPuNznOwkCLUM3aOjRaYSZeJx5O+6QSSyYMSmmKNF/xGCGhvurhM7xBgVB15SeHPOn7MgrR5R8BEH9ydwAkW9seenQs52gXJQoxot3/vJCzb91X7cf0Km1Te969G1Jj3q/8gYb9vaD9N3bwVr4kJiHFmgwXH3fB6Qr51j/jXLbJOA18cWYywCOm8Uj5ZgmHia/pYIAO3nTNNIl+ofbJ8BOd+x//gUOIwivmZTDm/dU7C0eaGupeQyKKmXkthtiHwpo+Lz0PQ5y7f1iXqZlLdYS99dNX1/xyO03RgeRShTNqi22ph8Xy13ish8WxwqfT49dnxGtw/Yr6g2yZot0FFmwmTSH+F8yiwN43nElELcBXvYsJUZ6fZHgEmMuzXp946rUr4Tweg6OKj53uK4D96DujF6Ki5/ixafWvQkb5rkBBha8fDAC0dvt2lYJa1TJCXBq/MrXO+6mxaES+xk7egeDTWSNsEk/DzFZZz0u7oBpyCd1iDTYRPpqVWFi2uQGLRmB44zM2+ZufJTwfojfCVd9kaW2+boRPLopi00DhQZFJyS3FRhuQycOnQLu7mPg7HZiHgFolM35ry4/k3BOaIYvROCWZk4BpKzpaRyMb7jMpQzNVfupmTaVnjcn85V06rqFJpIplAKN3esqVyaZMF0NDSvFctO++Bv1vv9Dhr27m067oQe2Kq4RyIS1GJKJ5RFaPorYHi4XYDsTEtqwmFUBZokvwR9yz4FO1JLj8FIwiH3b34EX7YyLSTiGozOv1TFONIxqYieK0T/k+vdbjbOPKUbJXoi48lKei0nIE0fJ0i1okBnu3kwjyo4LGkizC1XGkKiDLFBMOho5wagzVpcuJ/SJz4cumTC5b4CmTqIsIeqqkIuroLbppltuLdNcSeDQCJ06fU2u89htZzwDsr15+hdXMjQEWVUCmIId1t2xMLlQxdB6VImzIm8yRrtxTo+4oUWfHVTykP8VVBIu7gFzVdFpJcfOEOWrExBKQtgpLjEcfgEqVOa8kJ+AHkH84TlUmvBAsCQG5CfUAkW9jY7fSn0eqCyAUDdl0WvQKbtlvFLl8EUjk3WUglqHSlKRab9wHKFK9kDfdy0TAwOydq4s25cELS6qU5Ffb0Px2KxX2n22NUihhML3YWtUEo52HqsF2oOSbh3BaZFqcAOe6oJvbFB4IIVXLTXkDpNCTV9dRxbh81J41+yjRwsOA8Rh02u6iNXz+X9x3bVUn09dZPqTVup/ddfgCbeaI2YNsENZp0LWM3DkLRzzqrAr2ezZEeytbtorO94hBdGjh+haWjkPnR0DfrjvlxDOWq1HQIFA6dlL3zdY2zeNM3Zx/iMCcLorkwfTJ/oxEtU+JcRn2j2K0yXXdVYXzWi/qTv8zlWOzw1TrOSyhkiH0RG13NsRfdmNcgv9P3YfUTmeQs0YdYxa0II3Mu2SXY3cbqgmDClIVBSJgHPwK4KOh9X23Tc9/j7j5Cfj/l+fw6+Dq8x7a/nXnFqHWIFI/I3HebGuDtSsgBu0uHp2KKPWqBYSkhy3in3kUCTqgIU5Ew0ETJX2OKCvxE7Ff3MV6zGTZx7IebEBDaRwBN525h0z5lvVlGhKzUqqnj7J7IX1HGL4t4WCckNgd2D8/ka2rGpY09BbOpHTZUnSQqDIGdjnU3rlK/bKJGoVMNn2pRKydlvGWr1wFmoDLW+iMOJ7bqB5r4U3k5Rv8IWXZHLjzvqBIxMmQvGRKHyrzhmBM+SvVt4wC0yu2qkNiTLAo9fsZ8njrqx9MeEV4nFK0012GQ9AKonOaEtFbEFP27amRYp7mzSmW5oSxrCJpx3u03s2DhdsO9wEEyHUPAIWpAZXdUO97wjYYhccyiz4509TLuu7PUGmaHE4bSsmd2EEOtXIrHoZMwwfpgCSxUrz1bB/5s0wbZktSyYR2M8aEsNR4HsnMtWYWyeD1AHaB3ythkbuiRWshQgSQbKjPSFwAwq/v6wwwA8430czlv2TD5v4yNzznanEodRO4qxVtgna0RGcUTmkszomjUY54o67AZ47jv8dGDk1Klyv0bgBYWzUfTUbVbA6BDHI+zuesgMk3gkTjBzhtK0gGDaF9iSXxTsJ68QoWO2FFTVDU+woegfRKhqfvKkyz40DDEP67BvOyH+NECIFYNpiIvSXBGZvEe+7f/6v9yd9bLmbR0fBTD0wrfIRs15blpKWnmBfrgl0cGif3evx6tZ1fjoSBZGNiL3kQCGSq4+FJR7dMioh7gOFkE56WVHh8n9h8uPqKuZJANSpGKgoVrBVgj+Pm6YbYNI+mbxze2YDhr/zp3ciSnRwx1eslDMg/UGwg6IzMZjqeJKOPN77Qam/xdoYozaM4hJvUHk5sRO4nIml9swGvBar6p+3Of7vGojjCNdT27UG0W+8kBlHzMfywejPgiCTfq5jjgQ6hFgaK+EDAAF48384BCQg1mWBLrydxzHKcZskmburJf0I7DvENIyJ8P/ofbIVGdgwzHQIghazyV4tMY01VghCJxZff01aFYkoaxkbqo/GHjR0ix87jmXsHKtMZqsL5ZVcl63EQZZs+toM4tHZY4/yZf5dgf4AOFF/Xz3mGh7ZNSTJXUxl0LUq17T4pjPg5VNrxLL01CyDBBU1C9OAG4DoYum3jQXeGuPzEi+NBy6aMkDhFzWmldMuk9f13vYvftvbMq6Q65GnyXFz0fcDGUsJGp0RO94vU5uBsypj6v2lj3Tlm/ebQAwejh+PhT88GhdXg8qUnfVzKIT4q7QIhVEu22asfgPh6uFRbF+hgAaqFzMv8UTaC9eOfc76aNsunMoqh7oueYKUh6chEwxlwZkHqpqi2i5qZA4zLNEZlKlTqYiHudy/urTsLLABz3VqjRroEkseieBH+1xAeQpB7uUOC8KAfOCX/RH3F3RcF3fwggoZUWEcyYUq1nA9NySqCoepNDpkh1DkDV+83/GdguZsHDnvOkH6LvDA2fEwtU9v/5l7lq0WtdxKPRFWtrEXtCw0IqTTi6c2///wolfsiQ7kHLorAkFSlsSP7a3tmRHPpYn2+QiCqahkxrF3JG3hdNvW0icmCcaQgi01MCMmbcvnsjtzlU5IA4nlqC/tnvm2ntZYeHm0zwLx9SAU0GVIvBS4af9So/4ioofZMY9Uq2Ca8wTM0L4J+VzYO5z8/J5AXpQi374OTLZHeNlzY/8XAvhEBatgLVAXUPK5mpnPfHrx+fnx3X6HeUNMyVcbkZHdm6ZgkhqYvtWInP/O1usbwjbtyHkErqUwFRHziEdi2Blt+6NmYviP/cZ1zvHLaivV/v6adkeLRuZ821kgwi7IsOdKG82wIImuETiTB93HUbzQaxDuJrIA2tgqD0wKIJvlOsuMIybyL8XYdG+Z6wKocNCdacP9AJ27i8f4L2cgHIONskkt2tpzDLg48QothlevJHIfPilg4Y1T6Hr2gYCe/CK5mrO1e9EjdH7jBKCwyGB8nKxl3DtvXCHX3FPpNXFPmwJqC2AiAxokiopgVG69hC3X0Z7Nr3S+RXPYWdVr3at7xb/z4/kgkUHIYSDSOIHbc3Gb+W9QsGeoEPOgNAcA3+kUzgegeksB8Ilmn7GnSH4Em34eXJPW7jwCNJpdoqNFBupIUPm5regSdO+nhi1uIJE8lROrPmfyZPwb7OUT90pYER8uTzTfmrG95nvvnbhDr97kfMthAIAhzAOZX9yaAhUQX4uITO95cPvh4ToS/AgVuvH7WNgtOe4SISIb5rPkAVYp5+IHBiHwsAOreh6t9pGaFZ90aODkZgMJc7jkDdZr1pjiIJi+7sVB4UIUgGY0mzay9wPmXS9mTlh79nvtqHjXjlth6hUlDkpNHtp7mMf2mA7q5VrsRaW7fC7eRJq8/jnhE0vgJlgKNHIwCjGD7ipPmvOwtAiK47JGu8c2myy8tTQkyPXNJMDnjRGojrPdtD7pTo7bEPNfLnQzqhHDeiCrmpOfwpRlkjusr7UboCIIJmZ4FzTZuanFcjc/x4y6Srdz5b3pfvdIjtEFlX2IB6H1jXLRJaoNg7ePLIT/tO+vXCH33zLgNGNpMmwMximKkg+zVgTn7f+ZUt/lW6TCDv980HpZHJwTwUZzUObiaxpiNg64DhRBnTMW+IZwvQervTVzkJhY0WIYmAVuE4JBbHQPAjozYpe4Mz/UYkl7wTPc+dom9a7b7vfh6UMazZM3lC1FE28FEyeUKu0oQNxUDx6JYwlQvXCdHF7qTaPlYpAsfBs7U+KQsaawqRzim1M2zov2a55pIxiJ9mv/9qlgPUklKfnSFH2ithzZLKyzqWMUzNjhK30w9wrNclihcPbyyf3FcYxHEhgFfIrOWhy5EUDwI5QLDT29nH9PB5vj4KdbJPlG37+0kFSd7S2xdtARAmUHKxt4nIP17a1K8KrHYNmEYg80BM9gIWbT2/yxOyVagueeBseTfj2iM389DQxNDFaZyYKMHWYaKLE6tfW2bUs1wszo0SacItO6Dj+aP30uImTbfiWs0NOD63ZLP0ETRXDWEnhB+H0ftF0WgtlinNHu+CphAcxWE6RKe4pEFXGd98cW6K7SrX2btZ4vCMySfaBAwvXQcSpI6U2cxnTEyc3Vrh51ODdJRKAUulb0b9UdE4XbT79lKnNY21AqaAv3E/S7FLY5V5DrOkYbuIPAQY+1+l8UL8LpoujKnIhHGkkv1jXEC8Q4ePpbmhjgCvGFu2pYIyrddL6qtGLokiasak6H70ChWoIS+oe58lPg2ihfKNoX1qVsQOrxHSRWox6oCFhxU4Q//L7d98LmRtiJDuI5jeMOH4EfOb+JTiphA70GWiU27aBb0oV8AoYFXfPYOnm0/ts04CAzcQuOmKUHjr7QjTbB7BdLatLZJfUKSrhUdHOwXGnyBoCa4tx2j7AsBmihMTRiQ0dQLF1nftEhre34wRCU1H/HJ7fP67RBU1qKX7s4Ikhg2JiCKGsUuy6Fy3bl9WXYhGDeyKT3djwDLTvNOtaLB7t1vDcQXOX0mb7BoDUuxGG8ezhfc9CjjQWRWmzTQPcWjbQAn0EMmQ2qDD+PTJ5JoSPE59OUoQl6GkI8U+Phi4/AtlGCfwD0NOGwPE5pdjBNhyQNVkVLjYkLCqaquM8+DGwJqltMlEqAD72Df72XUi1/IHNpBEQ4K/7cuYWb5I/TMcfQCphzKEIWNmEYBxGnSsiupcmDnYBC6U5dYWzWidgUW7ifcGkH6s3mC2tJpyZf8I9F8j89xrqyD8ta5z1GUn/2wMPQijvJfp4peZDxKLChTTjevCVsDwKxWa4ThiIwgr4F21dKiiVL7MYtFHsf776dZZkzvraCm0ZC4FFuScyY+KBw+eHu0/hRPCX9TavHOvgAM11EkoEDAztws560WAzBS7bDzDLk+kZRoOSVrrwmz8LlKn5vVvv1xzHBYjn/c0cIWBNpHVPrL0cnD7w9him9/AWqAPBMI1ylAVK/GhvJyJK5Yu2X2eC0dP6GG6BTIlS/7HxqZY4kw3w090Xmbu4S+L14p1KzmYMRlk3J7j51l0n0AzAqTfBGNA/oRr2XeS4/pI282Q2xxcDDH6xL5MbQDDLZKbhCuv5qlV2JiFyOOnHDwK16OxynJfPzDBpFENhEmWP0SN6djqwKFewQgZ36hOUfBOZHUKQjTi1jg9bU4kQwYRMnS02ZIbPI3N1H2Si8Xi/+P4yFIZFE0hdAspSbuCnO8vOoAg+WOuFuE4bgjwemn8Wbz6dJSsIHemIk4+jHJxKsDfAK1euh2ujlOIoJBXVUoCnKiab7afDdGooGJk01poVCHAPrj13So1mKop1C6teGkU2tHQ4afEuloMEHoR7S2KTIW/Z9aK0zt3JVJD7ciY2Zk/79atDi96Nw9dVbZsiH11yHpUk4MIMcmsWb4SxKW/WG4mzNHZIwbnQAiNuxK68olFSfAjPkEm2aA3YqUwLMZSh+EzZ8fgGTDU5xzilGU25nUYmiPjw0rJ+aQxUo2gHLQssOgLYTGNE5qkU5SAFAXNHzqTZZDoDfIyULXoJqO7JGLaLWSHWtSrR6xzirR+0W0j1TyVXyFF1AOdsMcU19SCd/Y9LcSDONApVPsKX6loMtrUu5faKOr4MTnGGMq6JwKq9fV2ZDH9I3ANodcMR9IZApikaDqz0faNGG9ox1XnUGLEskfiXlfPQfHpILrq6qXVU83xcuvn0w9MsNutBgZ4bWgJfoN9kHK/6vH43huYOb7NJPsMU529cohWaq9pQtHt7Q/p3ywTr90MscSk6Wy8KlnadBXSXbs9dxw3av/snN212L86kS+HCsvPhbTQmmtlb+seF7aqnpOG9NbrhBO+LxabcqEiA0+gFnDHpl9e+kLvpdkxSZNI8/lj/YFBoeQcgBell1vAUc7+tNJqEGupxKXFOkrGWnHmInDnL2B6Zd5udfCgJtmNV9915eB2NQoguqKQ3CXsCzbcb23VcvC96zP5Qxuax6t7Ul2W21TJDXQS2gp8hM/QUadEOqczHLuh7lVBCK7bEEX3T7qYmBN0vETfZEO3I7bnfIFNy5vZ3F7TPJKwsdJOF6DA6jIL+BqEOmtWeJH85L29Xr14Wrov7HptT0c+j0lAssMdlV838Z6/0XyCTZUqPwqGL2CMW/TXNFtXCnJPAZq9v0YtjLUMW6jtwJrW9eroFmfq+1nyONQsQfekGa+mVnseom2lb7R822+MNQ54KW+gW+0FRbpZiSEScjKpwk68Zh57jcs1O0pvbeVMnDnmU8HNzLD7dXIFSfbvtxC7Ya9Sry4GphqLy/oJQ7FLwaDt+hMzt/ZBJ7whacHhL/1ZmUc8NmwmaKzLp8TUqLa2Nb0PX93FGZDk0N4V9cAqDyiqTST27Y7rUdK2MLh9FIKoe4WadWc3CT7v3HkUqL1Si3pxz0kyBzW+akJLfa13uM+vblq0H6PFcsZRuP0Lm08N9jtXxB0cUo55GtU6+oc1yEM1W/Wy+pErjQFlH4w/6vDiwSbFZmLPMC1zVdVWVTfhqm52jer0p9KLB2cTYU9wPeXVUwQAAIABJREFU9+2yzst61kmHyqzhKbD5Bossjxr6+dr359GQRUpxhnI8p/9ZE3n0f8GZPHH/TyE6hPEfoemtUf15veo4u2Rwlim0yttw7mvRfv1xefCIyM2pRVd/UYddhiePG4lNI54Y/FO7MZUyxD6yyUqN9vppw+6587E1PeTmHLulPhzGUjkMub4HGbbleiZq8RLdWvt5M74OXc3sRgGZtKKGvuDV8Z05M2UB/ZvjP4AjaReTYB6u1xMok4nKAiiZ6tvcVvrlxDkzuB4Le5Bh6MWo9FDkCcElOh+hpyz8yHjTRGhubHl3fJLdhTSrbUY+brdmu9oGjFKiHIZO46iRgWz9lfqeTEc/HbVMKR2KXuJMUxgY/xPO9HfaVH8LzSFBcx2h+XxJ1YpDdTi/1F9fbHVjVRGbPyTO3ba8gYAjzu+8W+Odj/ORcOZewE8pFJp7eTuo9b51TxYckcOmb7WDG+bUkG/Q4YWP8nVplH13rJ8YMi9GYNLw0eg5s7ozZ3qbyHaX/AtoVgGazmh1WidQOqZccontraMwJV7+ATh3LAV+hs0wr2QIYRr+VIOJkZfEISz3zYD3++xDczNHSL+WzLkPnHyerOeWLpgQOTlzU3sWTM/jD9rC7im13T5uGTIjGv/L3tlwJ8ozYXgJISbg4dSqx9qDsO3b6vP/f+GbSQImIXzYYgvu3N2PLmt3K1zcM5kkw8kF8wc9s0nXEvnNxTH7IqLbTTPjETWl0qp2ysCQuO/+/fNVNm+Fk0Re1/t2JIR5pc0mYCEqkm+uVXs776L+bmR27RhA3YHQa2uG0hqfVxvfJKVL7rfd2ZD1hkaHQg6n/Fo7s6J52DZ/KM/0rqxhFJ4qdiuiaj37QXdlbqY+i32R3/bPsC/dh9bDFCL2Jcek9WkgffNKjoPAsUPhJWsNfs63USeaXndONRDarwPPNTaN0XKz09eUvAbPpfuI1CQecaOqLphW9S3XZLZDhLVUsvwhMuvCdUsK0dGBfm+28cEU+NeHVYHRwK1sjrsi0isS7+EgortGGqrcu4MP5l4p4ZZJIzvyCYfbojVDaS8Gy6uqeil7xoxdllk7Jxv6ksSNFTqaB0OECe8OmVN3QhiyzRajGtEBRqvT0860C78tB+eEceca0m+/h2iATsKipN0BUvQN9XmuJsOgcv8OHuYOPmKvyY+bUMZuTtZaZ9p6EKL4yl0dXxu6jLtR67bBpu3d55FLz/xrV8hO7UGQJpMnUzc1GuE5PYQORHr9ZC14ii4bD2UcQftac9uS5Bt5tfDvJxa+Jlw9V3MVep6SGJWw8m67Cnezi72rKLy0oRXOR84ddwQB0TyGsqGzfSrkmU+cqbTP//7+95F9/K0rVCeHzwbOn4zmN7A5KhmNV2PQbKC8poisfsLMl81ftO1euz3na/mTEOb9p62YtBoz8dl+y4Ge5VZE98n0BkJ6D6XoWtw9LmuO/fbUIhj55EVjcBLse9O0vftPgvfXnwNyAvupme/7Mc/Ub+U2Ov3HvdsOIHrXMrWg9PWN90tFl90n1qOOO8G00u4bRvrNYx5WXoLB7IK+cP8X69SF0utbXJOzVtY8JkvzymXFK9D3Gqrtn+w5oPJH6pmtCwtPbLoJURKsqtGuVIl49+tXH6Q54R1GO4eEMbl16NGCnF2HR8IPUsyq47a/j3G5pgwDcWdyMhLOyFkhdeqamXXWz/+oZ34RURY0EOq0qGmcMkrGnKpvF3DpeDiDw0txDYHkFjBFaCIj6ng8yRWJjvQ67o876nQmQ2dvxKmw3LvaPHme6dim/HCj+Z/f1CCjUXDKj1qPjV2Ph3KyW3EknB11Dzq+RmrXRUVvyYC2uWX2wpJ2PY93INmbDNGbo4i95j60y+00J88MEko7CGWBAorQHYliNt4pxdQdlgfp7KvHCXeczzsyvFD5qaNaHOQ2lvG46zJTeyTW45IjAk7fqRB05S+1sgbo7noWk2eu5+CZY1zUqtU263doZw0/SKV6fiadvPf3H9ppGGKoTkz9Yb5XeyGsJ8MLEC4GZjlE8GsjxsYhOXizBU+FPgvCXXHsLwO0apy/MTb/HqL1RG2zfkeMrEUJ4TzUFf5FOv036t5JwvtPbyhDqeKLVAgV0Q+4GKrWfbeYNyZF15dMrNSv1llwU5ZiswmmmrOM5oPuAqYSO/XeoTOrnt788znJvQZTnddJ9P11/9ffhOa37mnhr9LZBEwTPHO7AM/snXwXvWWLX4Dy7gP9gaS1C5v+9JqOhXJkGOj5Hr1aQGn7pmWaW2vB3RIuoei6TmLBUN7Ehxgy66F/vANdMQJJOo27BNj0M03jmQsi0794gobGAN++sWdrnd9KjkUv2vTeSFr/T9Tlm/VgfbM4z/RvbuGNCpcM5YjC4HffmxgYVd8VSecWiHiXb1qeuTAyh7L5hxBt116E+IE3W9/cd729aWgxhJNvnhZK5tU3xaOSeR3i/wQqv3T9XDa57Zumu1e0QP/Rl+yxwXzkey64X29b+6b0zJelkol6CNv0Y3pT31yuZ6Ie1DfNnOXyqkaoh2ezUn1XNsfruh0kEzUbNqXg4dsxkon6ZTbdfFN1AXut0UQyUTNi83Xz+tbsqkGhZsMmrw57sxIOyUT9MpuhvbARkon6VXWxGSOZqFn6ZnTfNoUo1GjfjFvbtxFN1Dx8k/mbZBFN1EzYJF6HY0w1UTNh0+yBZ8kK0UTNbSwE25on6/WDQk3H5pRdqFCou7CJ0Rw1FwkkEzV/NjGYo2YltEzUvH0T9yKiZjgWwk2yKBQKhUKhUCgUCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFAqFQqFQqLZoW39abauo+fkHG1qhfgTKVZJA9/04ZjFTgk+gHX9SN1WjVKzkq+TrIvgBgl6AgiKjqHtJJDEjXCn3JI+QSEDfP0kuY8S8TIsQAgxH2N4XdR/HTBgwmRZFJnXMjrXk51lWpJynK5FIdkmayhepV2VFJj9LQZJPEq/wNKKmt8xYclkcj5fPsC5ZzouYkDQLvOZyuRyzQpon+ibqHmQWx88+HdOUk+zS8wLCY0w4URNH84jnfdQZ38yz3hekhGFIR02rFeHZ54AuMqL30nssOEnwXKKmHQLx/DiE5nHAND+rIucRnkzUpIp5OgbNY3/ARzRR90AzG2LzWKejcjh+1VmOzut4jmiiph8FrfPCqQld8bsAfBd5IJNoHtXx6lj/Yr3omAGamGuippXMNYusZtPQd27Aq+CPlULzbANZOb8VRcERTdT0I/RUsekEaxdEhWZ99Oy/oIJpIU6weISaVoKt06Lw3ND7Q4OmrzO8SM1YcqxroqZGM5bJprTNGsSz753nBs2qQfZsoQtkylQzxplK1MRoRpynik0nWDsZp+2alWecikwZzyNEEzUxmgkDNIsqGLE1iTWaZ/u4+kMFZGZFyVmCaKImRnMFyzsAsKYy1KLUcs2zOwJSngmmGeOSTdTkaCaE54qwLHPHNw2r4WFQlSkw5S9gmogmamLRFdhmWmj/AzwrJ57LEbiqa2ZZVcD6YbWIWH9aS5nmChfFoSZGU9omW+fG/3TqmDUL2Q1/xlZ9mS/IlWkimqjJI/oqqkN6sQ8imOpsVMNoIdyYZrTCeI66R0TXId1mbt+AqABUaOrD2d6FFLiNE4znqLtE9FVi2HR4bLtm5tvpHv5uTSSZGM9Rd4noK9hTmdowFmmpPuBHkeYazRKOF6n+1LyQqHCO8XxphrSIBhdUsal9M01Ttfdca83X6zXsA5Z/l14PXwXHmOqTgKa5FCLrPhfQ4GL2Vw3QlGwSQHC91jQq8NSHQpTn6/oItxFdazKXkWlCnxyhm438g3cSMKkatDR9LgiL5z6HRzWbTCGYq7YHqU4tVQ0pS+F9XJsjNKoH54swTeicU3fMiaN/LDumTe8VUFpL0hkn8z4NMEhfqWUewbVvmbTMIjjDnhGdaC6AzFVM7EBAoB8OVGPpP8Al3JQaSjXjB/tmYHFuBr0tyALYVJuEwkrXaZjM1GSa8788ULpN6544KqXmxPD52HhKv4SbUlolYOnuNoQrOPcGAhDSjWv6i4nhz8UVzao5WME0EF+GaVJ4c01fHFjPr5o5qXZNRLUTe1Q6he5nZcJhq5nAMWNk5n1XIEWGm0tmmoVmz16BVPDU4GhhC2CSeBFJG00Id5o6NbYv+dR4Rg85Z0BhMkUOE+pwGNgsK9mc+f4EYDNiRDeMgwKmpUKi6QhKm1ma52whwwkau2R+OiuhlXnCWujHg1Mwrqeg6+2v7RYCx3j+fVeg3KVGcaZcZFWI8nztHlA9D1m8lIrmiuSZc1nOzm5QNXPwiI0YJZm5mUjRMe/cAvOYxWz2AYMqMuVoYetLghk4KOkspW0uYRooIam71d5KnJv5L5l0PdiUlsxjSFqvx/FsUyczaoIFsrIZw0npSofz8uX5cDjsDjst+dlht5e+KX9Xhw/qE6m3bZnzPC/jZPa+SROehsM5BHSzpgXYfLCt9DQm18nnpqUFOGUBFQo1soDqpky1Z1pBMvVY4HJfnZ42m9O7YfN5p0CUaJaKzIZWpZ2ik+u7btZ4RuTaQNTbZ2+taZn9WPWraKqbLzMbZmoooffA5fPj40OyWsyygiRMGCf5dr8DLjdPp/dqvy3LMpcf5fbtcNiuwTUliPpQud3u354NnS9AJycsmvFiYnpF028DUWXX9X3po7VW1mjWy8VUAOdmwH75+J+lj5hEdF5mWWNJypfq/elJY1mUZd5MosufbztA8/ktr4+oZR3l9sXg+bzfOnjSOV4ig+bF2q9cNVuV6wXUD9f1O7ICul6eoxu1fIBsNo/zCRgNlYBlUb2fnqTALYtcJZDSGF/2IDkEKt8AzbdSDoXUoZftVsMr8dy/HeBLT4cK8FzDgoEZ2qdyzYvjmVUTz7NmBXX6aAFdNw0qdAuL9Zort2xko3mZw1vXXhmpOVXGmMYS7PIg7VJhCdF6V+eTB2mW2+1aDtulfdbHDrvnN2OVEtfDaQN6UmlArmano3nNTtOoYwlAldn7nAiPHgxNEeuqJrhGnmYWlzNzTRPBGyr3gCVA9aTs0tjglUpN4ZaX4JqSUO8vdgZPGDy9P2k8JeAy+TSzf7Phkybw9I6s0h9WmzuVaP6fvXPhTpRn4ngFRAQPpwvhQFuEg8/u6/f/hm/mkito3e1l2RyCUlRoa/jxn5lkEjoVooc35/cRxnHnCGbvKKYPZ/HXrkqVqpcSlXHcM5U/nsm7ZC4raCpq3VJJ+51Bu2bVzoogPxO+uaIT5FPI30jdf2Df/zqgyTGOyhxvz5WblL+i8IaTlMHNKCbP+i5ixYRmIyZSpRDAWIaCXM/iL1yVyVFDCbdGA/5GdA+JS6AI/vdh6Gwr7vEHBr1a/lAF6UhnC7i/WnwOkLOKgIKC/h1Ck+MudTq3TrjQbeWG3MQJkKoSGJqQhHvSuR3QpEnt7JkV5mLEnn/jVZkoJmNMaQYogUp0LBfkchK3yIMiDfpw73MWT2PaX5V+tuh/UoJkRCm8303oMcY0RZPQoZPiMkroh+RpmoZxH1IvOt5zdJdSxhUhyUNrcsyPK0yCS3b6lsnUeOiHyrOXSontkGNrqJRYSu/SRD3VXS49NN/oxwU33nzxlHRq8VR8nqWAQjspjy0qLUS/gQTwM1/Yq7L9LGhoptZn4hPz9cNBMzmgJkVwtzLo/OG6Jwt+vRpf8+d/P69FlsVf+NWVTO40kiiUHSilMuBE5fnSzuVSUC9kKx5RTY2nT6cST8YT6DSAgoKChJZ8k9aIR0Icl29t/Xltmi/a33eCgOuLVhPgM4sDGpOR7NMoxfuHZnmfE5WYSH1diIKkq5l9eopHQkRaSCKTIJTNREIpldLBclRYklwKprK9b9CzOwb9zTHtIJ6Mp6DIiPTz1SK0Qw3F3cDfg3HDmtHPVtJjGl3/W0Dz6nakS6MW0oxiB0kmWuxceZM6Y3MhPv/5En0OmgmPDGQizQC5kmVSODrJUBIUBstJdYZrLOm1eNzXfIPHZf5+xf6lxFO1T/1wJJQJtUQ0Q0SJ0R3r6OcI6THN52i609ZztnQWTjaxNBVEJow4LN1xNdcFNK8f6kMngaQhxA6QjKR0J0EmsVsH29Dh8YxQolYClRaWQtlvBaS263M4xX3V9ITTCoyoy6hHR1fz+WoYfSY/lLqXSh5UTELKrU4fD5mSOPMM+q8FMFFf4mDs+SHVZJbzAV+/5mj+5qBfo44KR2qXJB6jkhMt8MQTknS+1er5x1meerTg3K8oKUEsGUyXS5NRNIPzvQhd43nx8Ow0n9K+U3eo1s9XW9RBRSfFaKlHwed5+tHc82SXFT8txVzmEkaNZsFM+S1Dv1RN2QujEXJr/HZBcdCVso7UFYsGI7EWsyIMQRZpSDiySOKIozR12jkDCUQKRSSdcHo+s/UGH/M89j1lapClh5ZLF0uNp7CM+h+oZutjOefzxAL6bJh81csPJ0gTI4g8XlCS0358x84mug6d+lTLIS/gJPwCtcSGvUJN0NjzKBMUFugLCseep7263vLyZM96wYE6fGnV+5DD5EEyIpVlF+9mBT9gDCOnYViFCsRjM1bt5cJMktHmk8qm+/kshbIdRyF3uAwl2/qpqjwbjostnR6VzvZ7qnm5ZdedLncU0EGGRs/y/7tYbVk+o7pVFKb1HOTz5RacyfGQHG/VqarYdMgxm6/EuXFKr+0dT1sutSWgW3hINAvlQZ9Kmp2Kr0IqdgfECSpBzyLkFp5XKFMzt7C3pWicRsE0eo6kw+MZTTepDfwDw0W+IeTRjlRigvASmjoEEi6itPmQaho635YhBUAb7O0cOC6X7rH0Ri5WzGa5ovJ5GbJeNCXAuWTWj/s+L8fcoixTNaqxw2o1klFaVSyrKR8o9pLiUgQ0MsigKX3NRkoVLiOXtlVbYzNCKlnf9F1f9zU8oAz1QBv0Vt9RxhkcYFAkHvEJNpp+mE/kbhe0fmT+TGtM3U1C6CEU9mY7R9K26VaUbmWzP+RrvhsamTJ2mKlcEiTABnxvgd9aeSi4jGV/fm57gLPwlDM5FD0MpoMqwxru+YEL/8C3CrlLM1oFdN4pbVEG1RWU7KJcGfSBDKkuxNMFTSvCWUAFqXrDpWi4usTYXhwULe7Q7XIIp/oHmlFXWZ21ze9QJ41QMpntXDXnGrpMp3jU17zH4kxA5V8GDe3gGuVvob4DpvYqmBpoGiU4cxvO5BDnaJzl/zWrK6hbU80FwMm/TjlDcHqe2eLgupGeZkAD0Q8RploVfZY15x+YEDbiFYvyaJNzu7BlGciw1GrRB5eOd1TynD2q8GgIBtLTyVatWvOGZ8lvKacVGOEH76rm2/3P7nyMI5AmQymN8Si1T1SOF3Q7m0Fu8wg5mCoFPgI/dFDFeFEnM83drK7BgssKVoIKtJ4Rfpi7KZwU92MM+TZYG3V1Po+DXxWZcRqHel6G2qvVUsOqXU0oHZSGFqtM0zSCPlYzu+2AaWRTGK1sNajWZuuGSVbYTqopfteWv80Bvcmp4EFxVVXBF5ukzk3ySpdADuNZwXnK0h2kB+DIz0aMpWoH1VUmRbfrVQ3Jja4z1a1q2klCkseNUjnDQjPZpypyyQZZjzqOZp4InwqtKxJkZA1f8FJV4wSq4VIHh1XuMSM/HXX0gLTf9VZ607fm9sqSTXtRqvnb/uaf2n7TQ9XJ2u0ZTsrfo2Z8GeJLMiWg5iqtxO2CNVmhPFu4DtSMOl7OY5QGZNDVzAhFkZ9kDckvTTb1Xg29W+4cvEyhw9kNwTSi2QofSeFY9tmP1vI13W7Nz+Hz7V1Op1oS2FNv/Bmak7D3U+qc9KPKxnZgtLfyYE2TMkCrgRB9UDcy3Os7kCGazTI9X1Zaj1dN3djySuhXvqa2rp2fBUWeDyoc1fwkON8eVVGBVh3jIQ7ZAdIRbNVkN74K9kGcy/TRkgbUS4kzQmg0y6ahNJ4vxrNdetXOWoi4mWgkG+1Zej88am13c7E1XqFp2XThN4B+RVHAVl3JcD6PWQNTOIwwJISnGbHDuhuX7bvGqUqDGrEGAykLbnIvO0Sz/R61tC+AdikEGluPxQVx9U7irP3d/kFoinmY1JqspY9S+nZHPQVYdRkPSZ+wHKH/FV5N1kXkXFSP+UyV/ajSKCQ0cZ5bTOyXXk+t8iYeLOMHBfPWHv+zu37mtLbO0xFNP3y3YUVfU9iKacXwTk9n+6nRkg3nUMIgl17apx41VNj/xL16qhSOFYNo4kv9eoqCQhPZhJ7yokA0mwdA0tfp75exvRWLt59D9lJoZfuavheqQnqLUK8B6hM5FeByUo4ITRmGnkprxL+9o5CVr5UunnJpVjsf1R+iedhF0JaRFyXGQdUdHM1ivx75aV7RGkSV96Vd6I1xealubDv7VAu7VPN3BLZaVbwW/AA0dXOW/RC89/wT9xeovU0daAkT5mB34f/DKk1NU4t0U/VHRR/mnAh41FEa0qTECd5IHEenLaJZ+a2V/24ZThjo/f3S1WrCmwf2xR4KXOsOCz628i+EOgtqak1IOC+z/qXP9/EJ4iDX2ayWKkvVk9k2D3+/xnv3LwLxJWhOn7aTx6MFYtc578BLfGuqXHkewkMzy4qXPNvF2QzNyquozgazm1/MTp16O3YuwvYBC0fPj3Xfnf1R++roFi+IL1PNyaw/YmIWqq6zwNQPvXJ0U8IZGJoJotkDmrus9OOgqZkTNQNlvuHIqg2JB07n6rAvzkt8dc38SHfL+f1Wjz2qZveNijk9hKNDZNMsXY4WkSyY/JgsN1k6oWW0C2r6wiOr5imWoXota6Cywp5ppl7zDV+3fPFyPrdImRt715Uye/iS2N2lslnY1qq5Eufijmr6ltsRTCSz40wZJZvKnjcBDb5QWdaomqdYhkMDNbrrhiGssNNWVlcI0cmJ/7ssDe2uQUo196lGUzVIgGp2GwjrKx2jWVm6WYeH5gFUs8/iA4bo3WSy2ADNTTXXjqYqgUVBWjUlmkcrROeob1PN9aIJYYHTFB8mmqCa6XGXcRxUCaOaG5qrVU1Gc6TnFNDsCBpNaHKHWbYgRCdnUzeXbWiuH00dBYUWoEtfU6GJcVAHFl3RuaG5ZjSnynY2ZRQUKprR4YAhOs45rdIXNjRXjSYke6hlOAUXoBs0jxCio0W3DHq3obliNCcrCjoFFwUxmiWgmWk0N4O+ejQbNOhaNsvwAvSnYw4zZZfR/ohxEM7FppZNNVeMJpHJjybAAP3pgGjm2f5IXZUqawA70TfVXCeaNasmLdU0hRigS9U85YhmcqAQvdHzHkg0N9Vcq2pOkxUETQF2Uxo0d8khziJuL+OBB5tqrlc1J0c1ZRQUHppJr9A87rKoRgdblaauNzRXWGBCGXmWmglXcKJCjIJsNPdwnx6/bCCsr5TWDF40214W7QJEs0A0Tzu8T6Wa4bpUMxFnGwjrK2oOaGu2uPgQIpoZo5kc9jFO9iitOhj2GubdrTcQ1les2SGxwHzE4bmaNppHitGtxIFmi9BXGgaZgECWIVw0r4jm04bmvxIGdTUiWSk0ozRAe/70xGjGgGZ8GqgPbENz/WhWCk+Iz0NEM3HQhG50K7V/2tBcZ+NRN1my2QWK5lNc5tcropkcYDC6Y9E3NNfpa9a2q1nDJO5JkGiWL4Qmjvzd0PyHVJM6RoYo2ocomk+7PHv51SOaMBXs4Fj0raNypRG6hWY3RGmQoolo/uz/z9656CirAwFY7teQjWiEHFbDiuH93/B0pi1tARX3F3VhBkVFRWk/5lLaTuhD0s7IT489Z5NA+HStmS/yKiWIB2gmoR8BmiIOKjo0awLh82Svt2oW+RL7asoOm0lTIpqbSMRBxvD73TDB3xQRuSi7dHXPlO8vPd0l3kQKVrlBJsaUGQkPVZoeD787khfLj7iNLD88U+Nha6C5yAvoiGaFaNqIpieczf1WdaE+TIdRwqGBoyEjt6vMit/j0MnV17e+9J98997+/tbh1H7u+wvRDOMdY7P3lW8N5V/Kl34yjp0X90F8ZIHVQQuC8sVGQZsI0GxDO0A0fYWmlMP3P2jNL11/fmnK7stgr0euWBnK8cuAdFj3N5H42YHWPH2C2hyHrVv+M+9sE1v/98PW3epHR7PIj+FCo6BNlIRV08YhoOnizEfaKGd4YLrmv8FykCt2Pxzw6UFu/TkcftSiP/xgAuBuJTd0r7TN2leN3akNciVu6lGsjRTRMInhcV/vDy8XmbFA5UCYli5huzPzOWzNicxVl1pocF82mh5HM8y0Uc6/ld1WzWLWTeksx3Xs5Erku1ET5qv3zGn7u28au98ZT3fa9Pvb/jz/dVFkKZ509f1Z/MVARePWn+R/WtnU3YN2GyzqWvgvpMgxClosmvGl4WiqOIiPJdWqSdWS6PXfbZvAqJpsb2fku9nutv2nHa3DZBK7XpqKwW9cZ6TgsxL30DzpOG47Q6GOXPFUGwfPn53gyQnv4qaeic21VnKnMSo5mFu+elz2YM+XGgXxi+hNFVobPQ4qaqPSjCpT2zQ46xEqe/pLTwXcS/IykvmllyxlpxSigPGkA7obhfSkuqkIrbnX+eHAGMdYD7Umd+gKhSFnDm6nnq7tP5W7x6+aSHJt+WsmldI8Lipr6giaSYpouoFodOfjnIcGru5p0u1W6ZsRFbrT09zo8OlIDvA0Ps0IPPHXkDodXnEsdwKwHd4kMqb6kk8KA82toSaFdjt1R3Xi0MljrDHVT5hrRSH1ZC2x65+3p76JERSeOhi3tYRy22nORzWmtOdLjYIYmlkGbe54pVLFQft66HFpKkFpmfq287XrcBpkhRpkiDoZibF0hdmpSN2a76a6vnuBZo5o1porUvfYUUBK9ZZjgrQsr+ttXW+vLSdu30+a3QZzf6o1FjsLrtTmb0w4v++FOV+IMWZ/AAAKQElEQVRyFARXKhFNH49Pdj6SXpleb7V5zm9r3bM3VelJs6ad/jxtjRxmWz1H25anSdupb53GfVb11ukukoISnPr8yNEscBzi9GxDyOUxL56cUmAkyYKRYkQlFLgtDM1wqdeC5EV0cTlogzPAigmZtRN1LxdRsbW8DRKRqDQ6dbdBfqdbd9vEJ2p9e2/n/w4CCmQuzYuHhCnMFMHMiwe/ae6Gj7PKcTd83BU8xU2FXPhNrOCNsX0M/kaeLzkKwovoSVNmdmTGQY/LXn+UyZhUejAjq52R08fMOGRm0hnPsyMz6EwXUH/5JIw6RI6hAFPjRmdJh0pRkxe5+aGie5DbtY/IV5xcIUU+XY7pUq8FySuVbYyXg7Q4aCZR3A5QLszETQ+dDneZgwH1xzEQeyop714yMsGUq/e0R21DrgGdD3esSM+L3pKb2rNTog/JgqMggeZFNGyqOEirv/yqRXkQyP0gTZPK5dRP5NRPy3gdwyl45jh2WyfM4KYwIEI+gMweToYuzPUdGVSqD459e6gwNS6l0pxOaJYuNwrCNvdGNmxuoF9crpfsAE7TQfoVpSaBfW25Lx611iN2Oe+5jTjXQ5abmrJPj7aMkHltGcFOwtdD0SCu0C13MdmUHwu5wIujvdTOmgJG3rDpyjgIJ0pYltihzeC0/amfh7ammUshg1umPcmmLPwr/Ps4o8yCA3SJJm/YZHGQw6oRJdQXEFvcQznfTPjRknZrOBbHsR/4w4OZW64ILxKx6GXFp+jRXg//GwuyUjgFYBn8AmzKugVXIZ5enYhNznKjoI1rQZu7bD1yA89y/NvCijuL2ZLZ/l8RxwoCy7fFH77/v2177DMTj1dMasa4+ef/bft2J1jyKZ+JS6xjx/KW62puXByC0WYyRGfiBd4t8UM/SUq2+I73RyRAec1vOVg6SZKF1tN3nYUVlnwWs1WcxuzAomWjmchucZCH+p4AmiVIBXPtkAyKx06gdADNZ++bxah83zBRVRmnPtu2XHu+2QQ+Q7OJZYg+Hc2Y0BwRa0Y0rQ7NDNF0lo6mA2h2cdAUtVAJNB0icVg8djgjmnEp0EzWgCaE6Jeug4d7v3zsP4tm9Ao0fYmmPYNBH6LpLhlNC1qPxKDKjRvxKoxuoSmsyvPLfj4k3ehVWvOlaEbRstG0GZpi5BrCeVss25doetFfEZycJGI1CffeDe/aO7AKxj4YTPklhmYl0LxSPL1/0dt3oD4iFnF2RdEQzUWDCSG6Da1HMkTn2/jidndNPIFmDD0L/oh0RyWPpltrB6i9Ult66/sSSTRD+0rxbLrfwlv3VPtN/pGNfLERH+ihKcKDJaOJIXoVOhN70XUBuhMsvGh+ZYQ0NJ9dUw7ftdKaSy9/3nqUTD0HLY5mwtCMCM23oFkJrWktvfxZiF41LA6Ko4nlE8soKCISR0/0udD0Ta0pmqIXH6K3WeY9cupW4YL7V/+b1kzatoXyiWbY9cq0pmVnGKJb08rHhqJvkyX3r/4XrWlnZdMAmv7z0YwB+hWhCXFQCXFQMuVIA99umwaubFIUNI4mM0HzoMl3jfteC5oyDordB8onXuxcO5+M5gW0AqBZrgRNGQdN8NtdD8ZrwKcpCno1mp5dNQLNeB1oyjhokrPpWqBhQcf6AaE5yg+giV0Gnw2Ox4t+XWhCHHSJpzibkWOXUDwVuZr30Hx2g7g7RHPxpSnioEnOpoiCQMUSmuOqDRzCWdAUBuuyIq0p4qBJziZXCuRq3lBt4BDOcYVbotmyfa9GawbYZXOKs6m5mtTgPirWfGg6YamjGa4ATdEv7jLBBkUOR5NczetoJvOjma5Fa+IsXNzZvKcJtVZNQvPFaEZ+1mpoJkY3xsWiKZzN7O7BcicfXE2y57c8njmCFLhOqRn0daCpnM07Z7or7HmSUqvmzRKaA01msZqz2Df0sMlWgSZ3Nu9b9AANPzJMaN5yCOfwBAM7OZ/PHZowwmMFBSqcTXYiBnesFdrzNrPJ1bxSRD5HM3m6TnM9iSbb94rQ5M5mc6dPf+RrTUeE5jWD3iI+TwfHC8sVoimcTZF9+nrh8PgcWpnInl8zLDbOSwSD+p4eYCGaF0AzWRGarETbpjeucqA0RRDUxmTPr3uEjpi28NlzsrqO3QKarRh/kWRPH+Hxoc4mt9VVeqO/jFCaaM8JzaslaTkwXaLlzYZmtS40AyfFC2w3rIRUmg3Z85slyWdLfPpsRJEfNxLNuFwPmsyih9il6MbFSs/O4LQ9oz0nNK8UpJrA5tnNmh2a/BL6DEM2P7REefPRDbWJShPQLMmeT0LzyWcvb9Y8Q7NmytH0o5WUqI9dZtrqmv8OniaUzRntOaF5w6DPoTVFs6ZCs1oJmqxEhUVvr6hNbNOEsrnYZM+noPnss9eyS4kmXqdcDZouzlkKjZbjhgIm7eBKk+LzaWw+O0C3bO7pixb3OQYffaxFxywtvMObO2JOMjxpz41P9vxeUeIkiM8m3tHQTMpVzMalLLrNR6SNhX6BNOdn6A9H9vwOnO7zoVFtR7zFfQVzGGoW3Rdqc+jFRJ05P4PSJHv+esEucXqL+xpGrWkWnavNgUlnfk5ccqXZYhBEaL5cvFAG6LzFvQpDbz1oskCoauXUHK5BZijIPGNGFrLnr68ehWacxklSZakfrOXgIz6NPfbHTHQ2I0ZmctGUJtnzN6DJ+x3xtqMwhDSD1mrQdCEQEmrzwtjkQyZdF7rSJC0ns+FKk9B8fe04YcvRZAE6pKx01tS4zNSmn8YlHxoFBeBYnmc5dppJnSmUJtnzN1SOzzswXHA6aAvTbq6nHtwA1SZns0G7YdvMdqAilW2afkBK840B+hmnO/ZmadT/bIvOE3RyNtsyqeK4StD7PIsLQaQ034smDkL3g7WhCRadqc24FGwCnjjVqADzfLHDpaee+/wAnXlazjy97j5fbcJVsI7NRkOTx0CkNN8iFr8a12j5F1dVERGmWIyBzcuAzHOJre2kNN8UoEPLcnPRUn2vqiLcQJp0U3GK6Dx0PAqC3oWmuFBXhcKer60eoEOXY4vESZrmBP+bN2mS0nyX1vT5hXPskjhH/5E/oDY9JxQJz8tWqU4g0wrI03yXeDa25CGZ61QPEc/oLdkEOlvZAg+OJpnzd1WM5TOJfWe1gagr2YyTUklShSnqTFKa74xQcQjxeisBhw8Am7ZiswIPx1qj7/1h9RKsMDTvqU3mbzLXJq4SJlXMwLQdPF8jUpofgOZq9YOLh+9ZfpjyuXvCFGZJCcicv19jBCuvBVEIfOoeJr5jeSs/XT+iVqKAakGWgedZluh+RWR+hjELVt6FQTceAbk4H1IpbhQxzRmtvBZG2SQy30+nS3UwwiaRSfKRbEZEJslHwklgknyc300ak+RT/W7yvElISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEj+bw8OCAAAAACE/H/dkAAAAAAAAAAAAAAAAMBEORGhQyitK+QAAAAASUVORK5CYII"}],nl.__toStr={}.toString,vA.add(u0.updateCursor,-1),we.Element=0,we.PCData=1,we.CData=2,we.Comment=3,we.DocType=4,we.ProcessingInstruction=5,we.Document=6,ee.BASE_NAME="gasm.core.components.AppModelComponent",Ce.BASE_NAME="gasm.core.components.SpriteModelComponent",Se.BASE_NAME="gasm.core.components.SpriteModelComponent",ke.BASE_NAME="gasm.core.components.ThreeDModelComponent",A.DISPATCHING_SENTINEL=new f(null,null),sl.REFERENCE_SIZE=512,sl.MIN_DEPTH_PRECISON=15259021896696422e-21,B.BASE_NAME="gasm.heaps.components.Heaps3DComponent",T.BASE_NAME="gasm.heaps.components.HeapsCameraFitComponent",Ne.BASE_NAME="gasm.heaps.components.Heaps3DComponent",D.sceneCounter=0,je.BASE_NAME=D.BASE_NAME="gasm.heaps.components.HeapsSceneBase",He.BASE_NAME="gasm.heaps.components.HeapsSceneBase",Ye.BASE_NAME="gasm.heaps.components.SceneModelComponent",Ze.BASE_NAME="gasm.heaps.components.SceneModelComponent",qe.BASE_NAME="gasm.heaps.components.HeapsSpriteComponent",P.BASE_NAME="gasm.heaps.components.actor.render.PostProcessingChainComponent",$e._passes=new Je,$e._chains=new Je,$e._noiseTextures=new Je,$e._id=0,$e.BASE_NAME="gasm.heaps.components.actor.render.PostProcessingComponent",pt._parsers=new at,pt._exts=[".png",".jpg",".jpeg",".ktx2"],ft.SRC="HXSMGGdhc20uaGVhcHMuc2hhZGVycy5BbHBoYQMBCnBpeGVsQ29sb3IFDAQAAAIFYWxwaGEDAgABBwAAAAAAAAAAAAAAAAAA8D8DCGZyYWdtZW50DgYAAAEBAwAABQEGgQIBBQwCAgMFDAA",ft._MODULE="gasm.heaps.shaders.Alpha",W.SRC="HXSMF2gzZC5zaGFkZXIuU2NyZWVuU2hhZGVyBwEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACghfX2luaXRfXw4GAAALBnZlcnRleA4GAAACAgoAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAALAAAFAQYEAgYFDAkDKw4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAA",W._MODULE="h3d.shader.ScreenShader",N.SRC="HXSMKmdhc20uaGVhcHMuc2hhZGVycy5Qb3N0TXVsdGlwbHlBbHBoYVNjcmVlbgkBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoCAgAACwhfX2luaXRfXw4GAAAMBnZlcnRleA4GAAANCGZyYWdtZW50DgYAAAMCCwAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAAwAAAUBBgQCBgUMCQMrDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAQ0AAAUDCA4FY29sb3IFDAQAAAkDIg4CAgoKAgIDBQoFDAAGggoCDgUMkgAFCwkDGA4DAQMAAAAAAADwPwMJAwgOAgoCDgUMDAADAQOamZmZmZkBQAMDCQMSDgEKAg4FDAwAAwMDBQsGBAIHBQwCDgUMBQwA",N._MODULE="gasm.heaps.shaders.PostMultiplyAlphaScreen",At.SRC="HXSMK2dhc20uaGVhcHMuc2hhZGVycy5Qb3N0UHJvY2Vzc2luZ1NoYWRlckJhc2UPAQVpbnB1dA0BAgIIcG9zaXRpb24FCgEBAAMCdXYFCgEBAAEAAAQFZmxpcFkDAgAABQZvdXRwdXQNAgIGCHBvc2l0aW9uBQwEBQAHBWNvbG9yBQwEBQAEAAAICnBpeGVsQ29sb3IFDAQAAAkMY2FsY3VsYXRlZFVWBQoEAAAKCGNvbG9yTWFwCgICAAALCWNvbG9yTWFwMgoCAgAADAlub3JtYWxNYXAKAgIAAA0IZGVwdGhNYXAKAgIAAA4Ibm9pc2VNYXAKAgIAAA8KcmVzb2x1dGlvbgUKAgAAEAR0aW1lAwIAABEIX19pbml0X18OBgAAEgZ2ZXJ0ZXgOBgAAEwhmcmFnbWVudA4GAAADAhEAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAASAAAFAQYEAgYFDAkDKw4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAETAAAFAQYEAgcFDAkDIg4CAgoKAgIDBQoFDAUMAA",At._MODULE="gasm.heaps.shaders.PostProcessingShaderBase",xt.SRC="HXSMIGdhc20uaGVhcHMuc2hhZGVycy5UZXh0dXJlU2hhZGVyCAEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgd0ZXh0dXJlCgICAAALCF9faW5pdF9fDgYAAAwGdmVydGV4DgYAAAICCwAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAAwAAAUBBgQCBgUMCQMrDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwA",xt._MODULE="gasm.heaps.shaders.TextureShader",G.SRC="HXSMHmdhc20uaGVhcHMuc2hhZGVycy5Ud2VlblNoYWRlcgEBBHRpbWUDAgAAAA",G._MODULE="gasm.heaps.shaders.TweenShader",kt.tmpPoint=new St(0,0),Kt.defaultUseScreenResolution=!(jt.STRICT=!(Gt.EARCUT=null)),Jt.SRC="HXSMG2gyZC5maWx0ZXIuX01hc2suTWFza1NoYWRlcg0BBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoCAgAACwRtYXNrCgICAAAMCG1hc2tNYXRBBQsCAAANCG1hc2tNYXRCBQsCAAAOC3Ntb290aEFscGhhAgIAAQAAAAAADwhfX2luaXRfXw4GAAAQBnZlcnRleA4GAAARCGZyYWdtZW50DgYAAAMCDwAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAABAAAAUBBgQCBgUMCQMrDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAREAAAUFCBIFY29sb3IFDAQAAAkDIg4CAgoKAgIDBQoFDAAIEwJ1dgULBAAACQMqDgICAwUKAQMAAAAAAADwPwMFCwAIFAFrBQwEAAAJAyIOAgILCgIJAykOAgkDHg4CAhMFCwIMBQsDCQMeDgICEwULAg0FCwMFCgUMAAgVBWFscGhhAwQAAAsCDgIKAhQFDAwAAwkDJw4BBgcKAhQFDAwAAwEDAAAAAAAAAAADAgMDAAYEAgcFDAYBAhIFDAIVAwUMBQwA",Jt._MODULE="h2d.filter.Mask",zr.GUID=0,Vr.SOFTWARE_DRIVER=!1,Vr.ANTIALIASING=0,Vr.CURRENT=null,Wr.tmp=new Wr,ln.SLEEP_THRESHOLD=1e-4,ln.MAX_THRESHOLD=1e6,dn.TMP_RAY=new _n,dn.TMP_MAT=new Wr,Hr.tmpMat=new Wr,xn.TMP_RAY=new _n,xn.TMP_MAT=new Wr,Xr.ALLOW_WEBGL2=!0,Xr.BLACK=new q(0,0,0,0),Xr.outOfMemoryCheck=!1,Xr.TFILTERS=[[[9728,9728],[9729,9729]],[[9728,9984],[9729,9985]],[[9728,9986],[9729,9987]]],Xr.TWRAP=[33071,10497],Xr.FACES=[0,1028,1029,1032],Xr.BLEND=[1,0,770,768,772,774,771,769,773,775,32769,32771,32770,32772,776],Xr.COMPARE=[519,512,514,517,516,518,513,515],Xr.STENCIL_OP=[7680,0,7681,7682,34055,7683,34056,5386],Xr.OP=[32774,32778,32779,32775,32776],Xr.CUBE_FACES=[34069,34070,34071,34072,34073,34074],Xr.CBUFFERS=(()=>{for(var e=[],t=0;t<32;){for(var n=t++,i=[],s=0;s<n;)i.push(36064+s++);e.push(i)}return e})(),Jr.checkFlags=-1,oo.defaultKillAlphaThreshold=.5,oo.loadingTextureColor=-65281,uo.current=new uo("Default"),_o.UID=0,_o.PREVENT_AUTO_DISPOSE=2147483647,_o.nativeFormat=C.RGBA,_o.TRILINEAR_FILTERING_ENABLED=!0,_o.DEFAULT_WRAP=ao.Clamp,_o.noiseTextureKeys=new Je,Fn.__meta__={obj:{ignore:["shader"]}},Dn.SRC="HXSMHmgzZC5wYXNzLl9Db3B5LkFycmF5Q29weVNoYWRlcgoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoDAgAACwVsYXllcgECAAAMCF9faW5pdF9fDgYAAA0GdmVydGV4DgYAAA4IZnJhZ21lbnQOBgAAAwIMAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAADQAABQEGBAIGBQwJAysOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAABDgAABQEGBAIIBQwJAyIOAgIKCgMJAyoOAgIJBQoJAycOAQILAQMFCwUMBQwA",Dn._MODULE="h3d.pass.Copy",Rn.SRC="HXSMGWgzZC5wYXNzLl9Db3B5LkNvcHlTaGFkZXIJAQVpbnB1dA0BAgIIcG9zaXRpb24FCgEBAAMCdXYFCgEBAAEAAAQFZmxpcFkDAgAABQZvdXRwdXQNAgIGCHBvc2l0aW9uBQwEBQAHBWNvbG9yBQwEBQAEAAAICnBpeGVsQ29sb3IFDAQAAAkMY2FsY3VsYXRlZFVWBQoEAAAKB3RleHR1cmUKAgIAAAsIX19pbml0X18OBgAADAZ2ZXJ0ZXgOBgAADQhmcmFnbWVudA4GAAADAgsAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAAMAAAFAQYEAgYFDAkDKw4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAENAAAFAQYEAggFDAkDIg4CAgoKAgIJBQoFDAUMAA",Rn._MODULE="h3d.pass.Copy",Pn.SRC="HXSMIWgzZC5wYXNzLl9DdWJlQ29weS5DdWJlQ29weVNoYWRlcgoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoGAgAACwNtYXQGAgAADAhfX2luaXRfXw4GAAANBnZlcnRleA4GAAAOCGZyYWdtZW50DgYAAAMCDAAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAA0AAAUBBgQCBgUMCQMrDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAQ4AAAUCCA8CdXYFCgQAAAYDBgECCQUKAQMAAAAAAAAAQAMFCgEDAAAAAAAA8D8DBQoABgQCCAUMCQMiDgICCgoGCQMgDgEGAQkDKg4CAg8FCgEDAAAAAAAA8D8DBQsCCwYFCwULBQwFDAA",Pn._MODULE="h3d.pass.CubeCopy",qn.db=new at,qn.FILE_NAME="model.props",qn.LOD_CONFIG="lodConfig",qn.DYN_BONES_CONFIG="dynamicBones",qn.current=new qn,Co.tmpMat=new Wr,Io.newWorldPos=new Gr(0,0,0),Io.expectedPos=new Gr(0,0,0),Io.tmpVec=new Gr(0,0,0),Io.tmpVec2=new Gr(0,0,0),Io.tmpQ=new tn,Bo.FIXED_DT=.016666666666666666,Bo.TMP_MAT=new Wr,Fo.SRC="HXSMF2gzZC5zaGFkZXIuQW1iaWVudExpZ2h0CgEGZ2xvYmFsDQECAgxhbWJpZW50TGlnaHQFCwABAAMQcGVyUGl4ZWxMaWdodGluZwIAAQEAAAAAAAAAAAQKcGl4ZWxDb2xvcgUMBAAABQ9saWdodFBpeGVsQ29sb3IFCwQAAAYKbGlnaHRDb2xvcgULBAAABwhhZGRpdGl2ZQICAAEAAAAAAAgIX19pbml0X18OBgAACRBfX2luaXRfX2ZyYWdtZW50DgYAAAoJY2FsY0xpZ2h0DgYAAAsGdmVydGV4DgYAAAwIZnJhZ21lbnQOBgAABQIIAAAFAQYEAgYFCwsCBwICAgULCQMqDgEBAwAAAAAAAAAAAwULBQsFCwACCQAABQEGBAIFBQsLAgcCAgIFCwkDKg4BAQMAAAAAAAAAAAMFCwULBQsAAwoBDQpsaWdodENvbG9yBQsEAAAFCwUBDQsCBwICDQULBAYAAgIFCwYBCQMWDgIEBgMBAwAAAAAAAPA/AwICBQsFCwULAQMAAAAAAAAAAAMFCwINBQsFCwULBQsFCwAAAAsAAAUBCwcCAgMCAgaBCgIEBQySAAULCQIKDgECBgULBQsFCwAAAAEMAAAFAQsCAwIGgQoCBAUMkgAFCwkCCg4BAgUFCwULBQsAAAA",Fo._MODULE="h3d.shader.AmbientLight",Do.SRC="HXSMEWgzZC5zaGFkZXIuQmFzZTJkGwEFaW5wdXQNAQMCCHBvc2l0aW9uBQoBAQADAnV2BQoBAQAEBWNvbG9yBQwBAQABAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgEdGltZQMAAAAJBnpWYWx1ZQMCAAAKB3RleHR1cmUKAgIAAAsOc3ByaXRlUG9zaXRpb24FDAQAAAwQYWJzb2x1dGVQb3NpdGlvbgUMBAAADQpwaXhlbENvbG9yBQwEAAAODHRleHR1cmVDb2xvcgUMBAAADwxjYWxjdWxhdGVkVVYFCgMAABAKaXNSZWxhdGl2ZQICAAEAAAAAABEFY29sb3IFDAIAABIPYWJzb2x1dGVNYXRyaXhBBQsCAAATD2Fic29sdXRlTWF0cml4QgULAgAAFA1maWx0ZXJNYXRyaXhBBQsCAAAVDWZpbHRlck1hdHJpeEIFCwIAABYIaGFzVVZQb3MCAgABAAAAAAAXBXV2UG9zBQwCAAAYCWtpbGxBbHBoYQICAAEAAAAAABkKcGl4ZWxBbGlnbgICAAEAAAAAABoQaGFsZlBpeGVsSW52ZXJzZQUKAgAAGwl2aWV3cG9ydEEFCwIAABwJdmlld3BvcnRCBQsCAAAdDm91dHB1dFBvc2l0aW9uBQwEAAAeCF9faW5pdF9fDgYAAB8GdmVydGV4DgYAACAIZnJhZ21lbnQOBgAAAwIeAAAFBgYEAgsFDAkDKw4DAgIFCgIJAwEDAAAAAAAA8D8DBQwFDAsCEAIFAwYECgIMBQwAAAMJAx4OAgkDKg4CCgILBQwRAAUKAQMAAAAAAADwPwMFCwISBQsDAwYECgIMBQwEAAMJAx4OAgkDKg4CCgILBQwRAAUKAQMAAAAAAADwPwMFCwITBQsDAwYECgIMBQw5AAUKCgILBQw5AAUKBQoABgQCDAUMAgsFDAUMAAYEAg8FCgsCFgIGAAYBAgMFCgoCFwUMOQAFCgUKCgIXBQwRAAUKBQoCAwUKBQoFCgYEAg0FDAsCEAIGAQIRBQwCBAUMBQwCBAUMBQwFDAYEAg4FDAkDIg4CAgoKAgIPBQoFDAUMBoECDQUMAg4FDAUMAAAfAAAFBQghA3RtcAULBAAACQMqDgIKAgwFDBEABQoBAwAAAAAAAPA/AwULAAYEAiEFCwkDKg4DCQMeDgICIQULAhQFCwMJAx4OAgIhBQsCFQULAwEDAAAAAAAA8D8DBQsFCwYEAh0FDAkDKw4DCQMeDgICIQULAhsFCwMJAx4OAgIhBQsCHAULAwoCDAUMOQAFCgUMBQwLAhkCBoMKAh0FDBEABQoCGgUKBQoAAAYEAgYFDAIdBQwFDAABIAAABQILBg4CGAIGCQoCDQUMDAADAQP8qfHSTWJQPwMCAgwAAAAGBAIHBQwCDQUMBQwA",Do._MODULE="h3d.shader.Base2d",Ro.SRC="HXSME2gzZC5zaGFkZXIuQmFzZU1lc2gcAQZjYW1lcmENAQwCBHZpZXcHAAEAAwRwcm9qBwABAAQIcG9zaXRpb24FCwABAAUIcHJvakZsaXADAAEABghwcm9qRGlhZwULAAEABwh2aWV3UHJvagcAAQAIEHByZXZpb3VzVmlld1Byb2oHAAEACQ9pbnZlcnNlVmlld1Byb2oHAAEACgV6TmVhcgMAAQALBHpGYXIDAAEADANkaXIFCwMBAA0Naml0dGVyT2Zmc2V0cwUMAAEAAAAADgZnbG9iYWwNAgUPBHRpbWUDAA4AEAlwaXhlbFNpemUFCgAOABEJbW9kZWxWaWV3BwAOAQMSEG1vZGVsVmlld0ludmVyc2UHAA4BAxMRcHJldmlvdXNNb2RlbFZpZXcHAA4BAwAAABQFaW5wdXQNAwIVCHBvc2l0aW9uBQsBFAAWBm5vcm1hbAULARQAAQAAFwZvdXRwdXQNBAYYCHBvc2l0aW9uBQwEFwAZBWNvbG9yBQwEFwAaBWRlcHRoAwQXABsGbm9ybWFsBQsEFwAcCXdvcmxkRGlzdAMEFwAdCHZlbG9jaXR5BQoEFwAEAAAeEHJlbGF0aXZlUG9zaXRpb24FCwQAAB8TdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAIBtwcmV2aW91c1RyYW5zZm9ybWVkUG9zaXRpb24FCwQAACEYcGl4ZWxUcmFuc2Zvcm1lZFBvc2l0aW9uBQsEAAAiEXRyYW5zZm9ybWVkTm9ybWFsBQsEAAAjEXByb2plY3RlZFBvc2l0aW9uBQwEAAAkGXByZXZpb3VzUHJvamVjdGVkUG9zaXRpb24FDAQAACUKcGl4ZWxDb2xvcgUMBAAAJgVkZXB0aAMEAAAnC25kY1Bvc2l0aW9uBQoEAAAoE3ByZXZpb3VzTmRjUG9zaXRpb24FCgQAACkIc2NyZWVuVVYFCgQAACoJc3BlY1Bvd2VyAwQAACsJc3BlY0NvbG9yBQsEAAAsCXdvcmxkRGlzdAMEAAAtDXBpeGVsVmVsb2NpdHkFCgQAAC4FY29sb3IFDAIAAC8Nc3BlY3VsYXJQb3dlcgMCAAEHAAAAAAAAAAAAAAAAAABZQDAOc3BlY3VsYXJBbW91bnQDAgABBwAAAAAAAAAAAAAAAAAAJEAxDXNwZWN1bGFyQ29sb3IFCwIAADIIX19pbml0X18OBgAAMxBfX2luaXRfX2ZyYWdtZW50DgYAADQGdmVydGV4DgYAADUIZnJhZ21lbnQOBgAABAIyAAAFDQYEAh4FCwIVBQsFCwYEAh8FCwYBAh4FCwkDNQ4BAhEHCAULBQsGBAIjBQwGAQkDKw4CAh8FCwEDAAAAAAAA8D8DBQwCBwcFDAUMBgQCIAULBgECHgULCQM1DgECEwcIBQsFCwYEAiQFDAYBCQMrDgICIAULAQMAAAAAAADwPwMFDAIIBwUMBQwGBAIiBQsJAyAOAQQGAQIWBQsJAzMOAQIRBwYFCwULBQsFCwYEAgwFCwkDIA4BBAYDAgQFCwIfBQsFCwULBQsFCwYEAiUFDAIuBQwFDAYEAioDAi8DAwYEAisFCwYBAjEFCwIwAwULBQsGBAIpBQoJAzsOAQYCCgIjBQwRAAUKCgIjBQwMAAMFCgUKBQoGBAImAwYCCgIjBQwIAAMKAiMFDAwAAwMDBgQCLAMGAgkDHA4BBgMCHwULAgQFCwULAwILAwMDAAIzAAAFCgYEAiIFCwkDIA4BAiIFCwULBQsGBAInBQoGAgoCIwUMEQAFCgoCIwUMDAADBQoFCgYEAigFCgYCCgIkBQwRAAUKCgIkBQwMAAMFCgUKBgQCKQUKCQM7DgECJwUKBQoFCgYEAiYDBgIKAiMFDAgAAwoCIwUMDAADAwMGBAIqAwIvAwMGBAIrBQsGAQIxBQsCMAMFCwULBoMCJwUKCgINBQwRAAUKBQoGgwIoBQoKAg0FDDkABQoFCgYEAi0FCgYBBAYDAigFCgInBQoFCgUKCQMpDgIBAwAAAAAAAOA/AwEDAAAAAAAA4L8DBQoFCgUKAAA0AAAFAgYEAhgFDAYBAiMFDAkDKw4EAQMAAAAAAADwPwMCBQMBAwAAAAAAAPA/AwEDAAAAAAAA8D8DBQwFDAUMBgQCIQULAh8FCwULAAE1AAAFBQYEAhkFDAIlBQwFDAYEAhoDAiYDAwYEAhsFCwIiBQsFCwYEAhwDAiwDAwYEAh0FCgItBQoFCgA",Ro._MODULE="h3d.shader.BaseMesh",hi.SRC="HXSMFWgzZC5zaGFkZXIuQmxlbmRzaGFwZQcBBWlucHV0DQEEAghwb3NpdGlvbgULAQEAAwZub3JtYWwFCwEBAAQHd2VpZ2h0cwULAQEABQdpbmRleGVzCQQAAAABAQABAAAGEHJlbGF0aXZlUG9zaXRpb24FCwQAAAcKc2hhcGVDb3VudAECAAAIBnZjb3VudAECAAAJB29mZnNldHMQgQMAAAIAAAoHd2VpZ2h0cxCBAwAAAgAACwZ2ZXJ0ZXgOBgAAAQALAAAFAQ4MA2lkeAEEAAAGFQECAAAAAAECBwEPAQAABQIIDQlvZmZzZXRQb3MFCwQAAAkDKg4DEQIJEIEDAAAGAAQGAQYBAgwBAggBAQECAwAAAAEBAQQGAQNFAQECAwAAAAEBAQEDEQIJEIEDAAAGAAYABAYBBgECDAECCAEBAQIDAAAAAQEBBAYBA0UBAQIDAAAAAQEBAQECAQAAAAEBAxECCRCBAwAABgAGAAQGAQYBAgwBAggBAQECAwAAAAEBAQQGAQNFAQECAwAAAAEBAQEBAgIAAAABAQMFCwAGBAIGBQsGAAIGBQsGAQINBQsRAgoQgQMAAAIMAQMFCwULBQsAAAA",hi._MODULE="h3d.shader.Blendshape",Po.SRC="HXSMD2gzZC5zaGFkZXIuQmx1chsBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoLaW52ZXJzZVByb2oHAgAACwd0ZXh0dXJlCgICAAAMDGRlcHRoVGV4dHVyZQoCAgAADQdRdWFsaXR5AQIAAQAAAAAADgdpc0RlcHRoAgIAAQAAAAAADwZ2YWx1ZXMPAw0CAAAQB29mZnNldHMPAw0CAAARBXBpeGVsBQoCAAASDWhhc0ZpeGVkQ29sb3ICAgABAAAAAAATEHNtb290aEZpeGVkQ29sb3ICAgABAAAAAAAUCmZpeGVkQ29sb3IFDAIAABUQaXNEZXB0aERlcGVuZGFudAICAAEAAAAAABYOZGVwdGhUaHJlc2hvbGQDAgAAFxVkZXB0aFRocmVzaG9sZE1heERpc3QDAgAAGAZpc0N1YmUCAgABAAAAAAAZC2N1YmVUZXh0dXJlCgYCAAAaB2N1YmVEaXIGAgAAGwhfX2luaXRfXw4GAAAcBnZlcnRleA4GAAAdDnNjYWxlVGhyZXNob2xkDgYAAB4IZnJhZ21lbnQOBgAAHw9nZXRWaWV3UG9zaXRpb24OBgAABQIbAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAAHAAABQEGBAIGBQwJAysOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAADHQEgAXoDBAAAAwUDCCEBdAMEAAACFgMACwYHAhcDAQMAAAAAAAAAAAMCBoECIQMGAAEDAAAAAAAA8D8DCQMWDgIGAwIgAwIXAwMBAwAAAAAAAAAAAwMDAwAADQIhAwAAAR4AAAUCCwIVAgUMCCIKZGltZW5zaW9ucwUKBAAACQMlDgECCwoCBQoACCMNaW52RGltZW5zaW9ucwUKBAAABgIBAwAAAAAAAPA/AwIiBQoFCgAIJAVjb29yZAUKBAAACgNHBQwRAAUKAAglBmZyYWdVVgUKBAAABgEKAiQFChEABQoCIwUKBQoACCYBcAULBAAACQIfDgECJQUKBQsACCcEbWluWgMEAAAKAiYFCwgAAwAIKAFjBQwEAAAJAyIOAgILCgICJQUKBQwACCkFY29sb3IFDAQAAAkDKw4EAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwEDAAAAAAAAAAADAQMAAAAAAAAAAAMFDAAIKgZpc0VkZ2UCBAAAAQEAAgAVBnVucm9sbAAOKwFpAQQAAAYVBwMCDQEBBgACDQEBAgEAAAABAQ8BAAAFBQgsCGN1ckNvb3JkBQoEAAAGAAkDEQ4BBgACJAUKBgEGAQQGAQIRBQoCIgUKBQoFCgkDKQ4BAQMAAAAAAADwPwMFCgUKCQMnDgECKwEDBQoFCgUKCQMpDgEBAwAAAAAAAOA/AwUKBQoACC0JbmVhcmVzdFVWBQoEAAAGAQIsBQoCIwUKBQoACC4EcGN1cgULBAAACQIfDgECLQUKBQsACC8BZAMEAAAJAw8OAQYDCgIuBQsIAAMKAiYFCwgAAwMDAAYEAioCBg8CKgIEBgcCLwMJAh0OAQkDFQ4CCgIuBQsIAAMKAiYFCwgAAwMDAgICAgAAABUGdW5yb2xsAA4wAWkBBAAABhUGAAcDAg0BAQECAQAAAAEBAg0BDwEAAAUICDEIY3VyQ29vcmQFCgQAAAYACQMRDgEGAAIkBQoGAQYBBAYBAhEFCgIiBQoFCgUKEQIQDwMNCwYJAjABAQIAAAAAAQIHAwIwAQECMAEBAwUKCQMnDgECMAEDBQoFCgUKCQMpDgEBAwAAAAAAAOA/AwUKBQoACDIJbmVhcmVzdFVWBQoEAAAGAQIxBQoCIwUKBQoACDMCdXYFCgQAAAYAAiUFCgYBBgECEQUKEQIQDwMNCwYJAjABAQIAAAAAAQIHAwIwAQECMAEBAwUKCQMnDgECMAEDBQoFCgAINARjY3VyBQwEAAAJAyIOAgILCgILBAIqAgICMgUKAjMFCgUKBQwACDUEcGN1cgULBAAACQIfDgECMgUKBQsACDYBZAMEAAAJAw8OAQYDCgI1BQsIAAMKAiYFCwgAAwMDAAYEAigFDAsEBgcCNgMJAh0OAQkDFQ4CCgI1BQsIAAMKAiYFCwgAAwMDAgICKAUMAjQFDAUMBQwGgAIpBQwGAQIoBQwRAg8PAw0LBgkCMAEBAgAAAAABAgcDAjABAQIwAQEDBQwFDAAAAAYEAggFDAIpBQwFDAALAg4CBQMINwN2YWwDBAAAAQMAAAAAAAAAAAMAFQZ1bnJvbGwADjgBaQEEAAAGFQYABwMCDQEBAQIBAAAAAQECDQEPAQAABQELAhgCBoACNwMGAQkDOA4BCQMiDgICGQoGBgEJAyoOAgYDBgEEBgACAwUKBgEGAQIRBQoRAhAPAw0LBgkCOAEBAgAAAAABAgcDAjgBAQI4AQEDBQoJAycOAQI4AQMFCgUKBQoBAwAAAAAAAABAAwUKAQMAAAAAAADwPwMFCgEDAAAAAAAA8D8DBQsCGgYFCwUMAxECDw8DDQsGCQI4AQECAAAAAAECBwMCOAEBAjgBAQMDAwaAAjcDBgEJAzgOAQkDIg4CAgsKAgYAAgMFCgYBBgECEQUKEQIQDwMNCwYJAjgBAQIAAAAAAQIHAwI4AQECOAEBAwUKCQMnDgECOAEDBQoFCgUMAxECDw8DDQsGCQI4AQECAAAAAAECBwMCOAEBAjgBAQMDAwAAAAAGBAIIBQwJAzcOAQkDFQ4CAjcDAQPLGlDK///vPwMDBQwFDAAFAwg5BWNvbG9yBQwEAAAJAysOBAEDAAAAAAAAAAADAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwEDAAAAAAAAAAADBQwAFQZ1bnJvbGwADjoBaQEEAAAGFQYABwMCDQEBAQIBAAAAAQECDQEPAQAABQELAhgCBoACOQUMBgEJAyIOAgIZCgYGAQkDKg4CBgMGAQQGAAIDBQoGAQYBAhEFChECEA8DDQsGCQI6AQECAAAAAAECBwMCOgEBAjoBAQMFCgkDJw4BAjoBAwUKBQoFCgEDAAAAAAAAAEADBQoBAwAAAAAAAPA/AwUKAQMAAAAAAADwPwMFCwIaBgULBQwRAg8PAw0LBgkCOgEBAgAAAAABAgcDAjoBAQI6AQEDBQwFDAaAAjkFDAYBCQMiDgICCwoCBgACAwUKBgEGAQIRBQoRAhAPAw0LBgkCOgEBAgAAAAABAgcDAjoBAQI6AQEDBQoJAycOAQI6AQMFCgUKBQwRAg8PAw0LBgkCOgEBAgAAAAABAgcDAjoBAQI6AQEDBQwFDAAAAAAGBAIIBQwCOQUMBQwAAAALAhICBQILAhMCBoEKAggFDAwAAwoCFAUMDAADAwYECgIIBQwMAAMGAQoCFAUMDAADCQMnDgEGBwoCCAUMDAADAQMAAAAAAAAAAAMCAwMDAAYECgIIBQySAAULBgEKAhQFDJIABQsKAggFDAwAAwULBQsAAAAAAx8BOwJ1dgUKBAAABQsFBAg8BWRlcHRoAwQAAAoJAyIOAgIMCgICOwUKBQwAAAMACD0EdGVtcAUMBAAABgEJAysOAwkDPA4BAjsFCgUKAjwDAQMAAAAAAADwPwMFDAIKBwUMAAg+CG9yaWdpbldTBQsEAAAGAgoCPQUMkgAFCwoCPQUMDAADBQsADQI+BQsAAA",Po._MODULE="h3d.shader.Blur",_i.SRC="HXSME2gzZC5zaGFkZXIuQ29sb3JBZGQDAQpwaXhlbENvbG9yBQwEAAACBWNvbG9yBQsCAAADCGZyYWdtZW50DgYAAAEBAwAABQEGgAoCAQUMkgAFCwICBQsFCwA",_i._MODULE="h3d.shader.ColorAdd",di.SRC="HXSME2gzZC5zaGFkZXIuQ29sb3JLZXkDAQhjb2xvcktleQUMAgAAAgx0ZXh0dXJlQ29sb3IFDAQAAAMIZnJhZ21lbnQOBgAAAQEDAAAFAggEBWNkaWZmBQwEAAAGAwICBQwCAQUMBQwACwYJCQMeDgICBAUMAgQFDAMBA/Fo44i1+OQ+AwIMAAAAAA",di._MODULE="h3d.shader.ColorKey",pi.SRC="HXSMFmgzZC5zaGFkZXIuQ29sb3JNYXRyaXgEAQpwaXhlbENvbG9yBQwEAAACBm1hdHJpeAcCAAADB2VuYWJsZWQCAgABAAAAAAAECGZyYWdtZW50DgYAAAEBBAAABQELAgMCBgQCAQUMCQMrDgIKBAYBCQMrDgIKAgEFDJIABQsBAwAAAAAAAPA/AwUMAgIHBQwFDJIABQsKBAYBAgEFDAICBwUMBQwMAAMFDAUMAAAA",pi._MODULE="h3d.shader.ColorMatrix",Qo.SRC="HXSMFGgzZC5zaGFkZXIuRGlyU2hhZG93EgEGZW5hYmxlAgIAAQAAAAAAAhNDSEVDS19PVVRfT0ZfQk9VTkRTAgIAAQAAAAAAAwdVU0VfRVNNAgIAAQAAAAAABAtzaGFkb3dQb3dlcgMCAAAFB1VTRV9QQ0YCAgABAAAAAAAGC1BDRl9TQU1QTEVTAQIAAQAAAAAABwhwY2ZTY2FsZQMCAAAICXNoYWRvd1JlcwUKAgAACQlzaGFkb3dNYXARAQIAAAoKc2hhZG93UHJvaggCAAALCnNoYWRvd0JpYXMDAgAADBN0cmFuc2Zvcm1lZFBvc2l0aW9uBQsEAAANBnNoYWRvdwMEAAAOCWRpclNoYWRvdwMEAAAPC3BvaXNzb25EaXNrDwUMBgIAABAEcmFuZA4GAAARC3NhbXBsZURlcHRoDgYAABIIZnJhZ21lbnQOBgAAAwMQARMBdgMEAAADBQIIFAJkcAMEAAAJAx4OAgkDKw4BAhMDBQwJAysOBAEDXynLEMf6KUADAQP0/dR46Y5TQAMBA6JFtvP9lEZAAwEDUI2XbhKrV0ADBQwDAA0JAxMOAQYBCQMCDgECFAMDAQNQ/Bhz0V3lQAMDAwAAAxEBFQJ1dgUKBAAAAwUDCBYFZGVwdGgDBAAAAAALAgICBQIIFwtvdXRPZkJvdW5kcwIEAAAGDwYPBg8GCQoCFQUKAAADAQMAAAAAAAAAAAMCBgcKAhUFCgAAAwEDAAAAAAAA8D8DAgIGCQoCFQUKBAADAQMAAAAAAAAAAAMCAgYHCgIVBQoEAAMBAwAAAAAAAPA/AwICAAYEAhYDCwIXAgEDAAAAAAAA8D8DCgkDQQ4DAgkRAQIVBQoBAwAAAAAAAAAAAwMAAAMDAwAGBAIWAwoJA0EOAwIJEQECFQUKAQMAAAAAAAAAAAMDAAADAwANAhYDAAABEgAABQILAgECBQELAgUCBQsGBAINAwEDAAAAAAAA8D8DAwgYCXRleGVsU2l6ZQUKBAAABgIBAwAAAAAAAPA/AwIIBQoFCgAIGQlzaGFkb3dQb3MFCwQAAAYBAgwFCwIKCAULAAgaCHNoYWRvd1V2BQoEAAAJAzsOAQoCGQULEQAFCgUKAAgbBHpNYXgDBAAACQM2DgEKAhkFCwgAAwMACBwDcm90AwQAAAYBBgEJAhAOAQYABgAKAgwFCwAAAwoCDAULBAADAwoCDAULCAADAwMBAx+F61G4HglAAwMBAwAAAAAAAABAAwMACB0EY29zUgMEAAAJAwMOAQIcAwMACB4Ec2luUgMEAAAJAwIOAQIcAwMACB8Oc2FtcGxlU3RyZW5ndGgDBAAABgIBAwAAAAAAAPA/AwkDJw4BAgYBAwMACCAIb2ZmU2NhbGUFCgQAAAYBAhgFCgIHAwUKAA4hAWkBBAAABhUBAgAAAAABAgYBDwEAAAUECCIGb2Zmc2V0BQoEAAAGAQoRAg8PBQwGAiEBBQwRAAUKAiAFCgUKAAYEAiIFCgkDKQ4CBgMGAQIdAwoCIgUKAAADAwYBAh4DCgIiBQoEAAMDAwYABgECHQMKAiIFCgQAAwMGAQIeAwoCIgUKAAADAwMFCgUKCCMFZGVwdGgDBAAACQIRDgEGAAIaBQoCIgUKBQoDAAaDAg0DCwQGBwYDAhsDAgsDAwIjAwICAh8DAQMAAAAAAAAAAAMDAwAAAAsCAwIFBQgkCXNoYWRvd1BvcwULBAAABgECDAULAgoIBQsACCUFZGVwdGgDBAAACQIRDgEJAzsOAQoCJAULEQAFCgUKAwAIJgR6TWF4AwQAAAkDNg4BCgIkBQsIAAMDAAgnBWRlbHRhAwQAAAYDCQMVDgIEBgACJQMCCwMDAwImAwMCJgMDAAYEAg0DCQM2DgEJAwkOAQYBAgQDAicDAwMDAwAFBAgoCXNoYWRvd1BvcwULBAAABgECDAULAgoIBQsACCkIc2hhZG93VXYFCgQAAAkDOw4BCgIoBQsRAAUKBQoACCoFZGVwdGgDBAAACQIRDgEKAikFChEABQoDAAYEAg0DCwYHBgMJAzYOAQoCKAULCAADAwILAwMCKgMCAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwMDAAAAAAAABgQCDgMCDQMDAA",Qo._MODULE="h3d.shader.DirShadow",mi.SRC="HXSMFWgzZC5zaGFkZXIuR2VuVGV4dHVyZQoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoEbW9kZQECAAEAAAAAAAsFY29sb3IFDAIAAAwIX19pbml0X18OBgAADQZ2ZXJ0ZXgOBgAADghmcmFnbWVudA4GAAADAgwAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAANAAAFAQYEAgYFDAkDKw4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAEOAAAFARMEAgoBAQEBAQIAAAAAAQUBBgQCCAUMCwYHCQMcDgEKAgYFDBEABQoDAQMAAAAAAADwPwMCCQMrDgEBAwAAAAAAAAAAAwUMAgsFDAUMBQwAAAAA",mi._MODULE="h3d.shader.GenTexture",Vo.SRC="HXSMFWgzZC5zaGFkZXIuTGluZVNoYWRlcg0BBmNhbWVyYQ0BBgIEdmlldwcAAQADBHByb2oHAAEABAh2aWV3UHJvagcAAQAFCXByb2pEZXB0aAMAAQAGBXpOZWFyAwABAAcEekZhcgMAAQAAAAAIBmdsb2JhbA0CAgkJcGl4ZWxTaXplBQoACAAKCW1vZGVsVmlldwcACAEDAAAACwVpbnB1dA0DAwwIcG9zaXRpb24FCwELAA0Gbm9ybWFsBQsBCwAOAnV2BQoBCwABAAAPBm91dHB1dA0EARAIcG9zaXRpb24FDAQPAAQAABERdHJhbnNmb3JtZWROb3JtYWwFCwQAABITdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAExFwcm9qZWN0ZWRQb3NpdGlvbgUMBAAAFAtsZW5ndGhTY2FsZQMCAAAVBXdpZHRoAwIAABYEcGRpcgUMBAAAFwhfX2luaXRfXw4GAAAYCWxpbmVhcml6ZQ4GAAAZBnZlcnRleA4GAAADAhcAAAUBBQUIGgNkaXIFCwQAAAYBAg0FCwkDMw4BAgoHBgULAAYEAhYFDAYBCQMrDgIGAQIaBQsJAzMOAQICBwYFCwEDAAAAAAAA8D8DBQwCAwcFDAUMBoEKAhYFDBEABQoGAgEDAAAAAAAA8D8DCQMNDgEGAAYBCgIWBQwAAAMKAhYFDAAAAwMGAQoCFgUMBAADCgIWBQwEAAMDAwMDBQoGgAISBQsGAQYBAhoFCwoCDgUKAAADBQsCFAMFCwULBgQCEQULCQMgDgECGgULBQsFCwAAAxgBGwFkAwQAAAMFAwgcAW4DBAAAAgYDAAgdAWYDBAAAAgcDAA0GAgQGAQYBAQMAAAAAAAAAQAMCHAMDAh0DAwMEBgMGAAIdAwIcAwMGAQYBBAYDBgEBAwAAAAAAAABAAwIbAwMBAwAAAAAAAPA/AwMDBAYDAh0DAhwDAwMDAgUDAwMDAwAAABkAAAUBBoAKAhMFDBEABQoGAQYBBgEGAQQGAQoCFgUMBQAFCgkDKQ4CAQMAAAAAAADwPwMBAwAAAAAAAPC/AwUKBQoFCgQGAwoCDgUKBAADAQMAAAAAAADgPwMDAwUKCQIYDgEGAgoCEwUMCAADCgITBQwMAAMDAwUKAgkFCgUKAhUDBQoFCgA",Vo._MODULE="h3d.shader.LineShader",Oo.SRC="HXSMF2gzZC5zaGFkZXIuTWluTWF4U2hhZGVyCwEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgR0ZXhBCgICAAALBHRleEIKAgIAAAwFaXNNYXgCAgABAAAAAAANCF9faW5pdF9fDgYAAA4GdmVydGV4DgYAAA8IZnJhZ21lbnQOBgAAAwINAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAADgAABQEGBAIGBQwJAysOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAABDwAABQMIEAFhBQwEAAAJAyIOAgIKCgICCQUKBQwACBEBYgUMBAAACQMiDgICCwoCAgkFCgUMAAYEAggFDAsCDAIJAxYOAgIQBQwCEQUMBQwJAxUOAgIQBQwCEQUMBQwFDAUMAA",Oo._MODULE="h3d.shader.MinMaxShader",gi.SRC="HXSMG2gzZC5zaGFkZXIuQ3ViZU1pbk1heFNoYWRlcgwBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoEdGV4QQoGAgAACwR0ZXhCCgYCAAAMBWlzTWF4AgIAAQAAAAAADQNtYXQGAgAADghfX2luaXRfXw4GAAAPBnZlcnRleA4GAAAQCGZyYWdtZW50DgYAAAMCDgAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAA8AAAUBBgQCBgUMCQMrDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAARAAAAUFCBECdXYFCgQAAAYDBgECCQUKAQMAAAAAAAAAQAMFCgEDAAAAAAAA8D8DBQoACBIDZGlyBQsEAAAGAQkDKg4CAhEFCgEDAAAAAAAA8D8DBQsCDQYFCwAIEwFhBQwEAAAJAyIOAgIKCgYCEgULBQwACBQBYgUMBAAACQMiDgICCwoGAhIFCwUMAAYEAggFDAsCDAIJAxYOAgITBQwCFAUMBQwJAxUOAgITBQwCFAUMBQwFDAUMAA",gi._MODULE="h3d.shader.MinMaxShader",Wo.SRC="HXSMFGgzZC5zaGFkZXIuTm9ybWFsTWFwCgEGY2FtZXJhDQECAghwb3NpdGlvbgULAAEAAwNkaXIFCwMBAAAAAAQGZ2xvYmFsDQIBBQltb2RlbFZpZXcHAAQBAwAAAAYFaW5wdXQNAwMHAnV2BQoBBgAIBm5vcm1hbAULAQYACQd0YW5nZW50BQsBBgABAAAKB3RleHR1cmUKAgIAAAsMY2FsY3VsYXRlZFVWBQoEAAAME3RyYW5zZm9ybWVkUG9zaXRpb24FCwQAAA0RdHJhbnNmb3JtZWROb3JtYWwFCwQAAA4SdHJhbnNmb3JtZWRUYW5nZW50BQwDAAAPDl9faW5pdF9fdmVydGV4DgYAABAIZnJhZ21lbnQOBgAAAgIPAAAFAgYEAg4FDAkDKw4CBgECCQULCQMzDgECBQcGBQsLBgcJAx4OAgIJBQsCCQULAwEDAAAAAAAA4D8DAgEDAAAAAAAA8D8DAQMAAAAAAADwvwMDBQwFDAYEAgsFCgIHBQoFCgABEAAABQUIEQFuBQsEAAACDQULAAgSAm5mBQsEAAAJAzoOAQkDIg4CAgoKAgILBQoFDAULAAgTBHRhblgFCwQAAAkDIA4BCgIOBQySAAULBQsACBQEdGFuWQULBAAABgEJAx8OAgIRBQsCEwULBQsHAwoCDgUMDAADAwULAAYEAg0FCwkDIA4BBAYABgAGAQoCEgULAAADAhMFCwULBgEKAhIFCwQAAwIUBQsFCwULBgEKAhIFCwgAAwIRBQsFCwULBQsFCwULAA",Wo._MODULE="h3d.shader.NormalMap",fi.SRC="HXSMFGgzZC5zaGFkZXIuT3V0bGluZTJEDQEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgd0ZXh0dXJlCgICAAALBHNpemUFCgIAAAwHc2FtcGxlcwECAAEAAAAAAA0FY29sb3IFDAIAAA4NbXVsdGlwbHlBbHBoYQECAAEAAAAAAA8IX19pbml0X18OBgAAEAZ2ZXJ0ZXgOBgAAEQhmcmFnbWVudA4GAAADAg8AAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAAQAAAFAQYEAgYFDAkDKw4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAERAAAFDAgSCG93bkNvbG9yBQwEAAAJAyIOAgIKCgICAwUKBQwACBMIbWF4QWxwaGEDBAAAAQMAAAAAAAAAAAMACBQIY3VyQ29sb3IFDAQAAAAACBUJZGlzcGxhY2VkBQoEAAAAAAgWBWFuZ2xlAwQAAAEDAAAAAAAAAAADAAgXCGRvdWJsZVBpAwQAAAEDGC1EVPshGUADAAgYBHN0ZXADBAAABgICFwMJAycOAQIMAQMDABUGdW5yb2xsAA4ZAWkBBAAABhUBAgAAAAABAgwBDwEAAAUFBoACFgMCGAMDBgQKAhUFCgAAAwYACgIDBQoAAAMGAQoCCwUKAAADCQMDDgECFgMDAwMDBgQKAhUFCgQAAwYACgIDBQoEAAMGAQoCCwUKBAADCQMCDgECFgMDAwMDBgQCFAUMCQMiDgICCgoCAhUFCgUMBQwGBAITAwkDFg4CAhMDCgIUBQwMAAMDAwAAAAgaC3Jlc3VsdEFscGhhAwQAAAkDFg4CAhMDCgISBQwMAAMDAAgbC3Jlc3VsdENvbG9yBQsEAAAGAAoCEgUMkgAFCwYBCgINBQySAAULBAYDAQMAAAAAAADwPwMKAhIFDAwAAwMDBQsFCwAIHANvdXQFCwQAAAYBAhsFCwkDFg4CCQMnDgECDgEDAhoDAwULAAYEAgcFDAkDKw4CAhwFCwYBAhoDCQMYDgMKAg0FDAwAAwEDAAAAAAAA8D8DCgISBQwMAAMDAwUMBQwA",fi._MODULE="h3d.shader.Outline2D",No.SRC="HXSMEWgzZC5zaGFkZXIuU2hhZG93BgEGc2hhZG93DQEFAgNtYXARAQABAAMEcHJvaggAAQAEBWNvbG9yBQsAAQAFBXBvd2VyAwABAAYEYmlhcwMAAQAAAAAHCnBpeGVsQ29sb3IFDAQAAAgTdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAACRhwaXhlbFRyYW5zZm9ybWVkUG9zaXRpb24FCwQAAAoJc2hhZG93UG9zBQsEAAEBCwhmcmFnbWVudA4GAAABAQsAAAUGCAwJc2hhZG93UG9zBQsEAAAGAQIJBQsCAwgFCwAIDQVkZXB0aAMEAAAJA0AOAgICEQEJAzsOAQoCDAULEQAFCgUKAwAIDgR6TWF4AwQAAAkDNg4BCgIMBQsIAAMDAAgPBWRlbHRhAwQAAAYDCQMVDgIEBgACDQMCBgMDAwIOAwMCDgMDAAgQBXNoYWRlAwQAAAkDNg4BCQMJDgEGAQIFAwIPAwMDAwAGgQoCBwUMkgAFCwYABgEEBgMBAwAAAAAAAPA/AwIQAwMDCgIEBQuSAAULBQsCEAMFCwULAA",No._MODULE="h3d.shader.Shadow",Go.SRC="HXSMHmgzZC5zaGFkZXIuU2lnbmVkRGlzdGFuY2VGaWVsZA8BBWlucHV0DQEDAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEABAVjb2xvcgUMAQEAAQAABQZvdXRwdXQNAgIGCHBvc2l0aW9uBQwEBQAHBWNvbG9yBQwEBQAEAAAIBHRpbWUDAAAACQ5zcHJpdGVQb3NpdGlvbgUMBAAAChBhYnNvbHV0ZVBvc2l0aW9uBQwEAAALCnBpeGVsQ29sb3IFDAQAAAwMdGV4dHVyZUNvbG9yBQwEAAANDGNhbGN1bGF0ZWRVVgUKAwAADg5vdXRwdXRQb3NpdGlvbgUMBAAADwdjaGFubmVsAQIAAQAAAAAAEA1hdXRvU21vb3RoaW5nAgIAAQAAAAAAEQthbHBoYUN1dG9mZgMCAAASCXNtb290aGluZwMCAAATBm1lZGlhbg4GAAAUCGZyYWdtZW50DgYAAAIDEwMVAXIDBAAAFgFnAwQAABcBYgMEAAADBQENCQMWDgIJAxUOAgIVAwIWAwMJAxUOAgkDFg4CAhUDAhYDAwIXAwMDAAABFAAABQUIGA10ZXh0dXJlU2FtcGxlBQwEAAACDAUMAAgZCGRpc3RhbmNlAwQAAAAABgQCGQMLBgUCDwEBAgAAAAABAgoCGAUMAAADCwYFAg8BAQIBAAAAAQIKAhgFDAQAAwsGBQIPAQECAgAAAAECCgIYBQwIAAMLBgUCDwEBAgMAAAABAgoCGAUMDAADCQITDgMKAhgFDAAAAwoCGAUMBAADCgIYBQwIAAMDAwMDAwMIGglzbW9vdGhWYWwDBAAACwIQAgkDDw4BBgEJAz8OAQIZAwMBAwAAAAAAAOA/AwMDAhIDAwAGBAIMBQwJAysOBAEDAAAAAAAA8D8DAQMAAAAAAADwPwMBAwAAAAAAAPA/AwkDGw4DBgMCEQMCGgMDBgACEQMCGgMDAhkDAwUMBQwA",Go._MODULE="h3d.shader.SignedDistanceField",Ai.SRC="HXSMEGgzZC5zaGFkZXIuVXRpbHMHAQtib25lTWF0cml4WAgEAAACC2JvbmVNYXRyaXhZCAQAAAMLYm9uZU1hdHJpeFoIBAAABAtib25lTWF0cml4VwgEAAAFC3NraW5XZWlnaHRzBQwEAAAGDmFwcGx5U2tpblBvaW50DgYAAAcMYXBwbHlTa2luVmVjDgYAAAIDBgEIAXAFCwQAAAULBQMICQt0cmFuc2Zvcm1lZAULBAAABgAGAAYBBAYBAggFCwIBCAULBQsKAgUFDAAAAwULBgEEBgECCAULAgIIBQsFCwoCBQUMBAADBQsFCwYBBAYBAggFCwIDCAULBQsKAgUFDAgAAwULBQsACwYHCgIFBQwMAAMBAwAAAAAAAAAAAwIFAQaAAgkFCwYBBAYBAggFCwIECAULBQsKAgUFDAwAAwULBQsAAAANAgkFCwAAAwcBCgF2BQsEAAAFCwUDCAsLdHJhbnNmb3JtZWQFCwQAAAYABgAGAQQGAQIKBQsJAzMOAQIBCAYFCwULCgIFBQwAAAMFCwYBBAYBAgoFCwkDMw4BAgIIBgULBQsKAgUFDAQAAwULBQsGAQQGAQIKBQsJAzMOAQIDCAYFCwULCgIFBQwIAAMFCwULAAsGBwoCBQUMDAADAQMAAAAAAAAAAAMCBQEGgAILBQsGAQQGAQIKBQsJAzMOAQIECAYFCwULCgIFBQwMAAMFCwULAAAADQILBQsAAA",Ai._MODULE="h3d.shader.Skin",xi.SRC="HXSME2gzZC5zaGFkZXIuU2tpbkJhc2UIARByZWxhdGl2ZVBvc2l0aW9uBQsEAAACE3RyYW5zZm9ybWVkUG9zaXRpb24FCwQAAAMRdHJhbnNmb3JtZWROb3JtYWwFCwQAAAQITWF4Qm9uZXMBAgABAAAAAAAFEWZvdXJCb25lc0J5VmVydGV4AgIAAQAAAAAABgtjYWxjUHJldlBvcwICAAEAAAAAAAcNYm9uZXNNYXRyaXhlcw8IBAIAAQgIEXByZXZCb25lc01hdHJpeGVzDwgEAgABCAA",xi._MODULE="h3d.shader.SkinBase",Uo.SRC="HXSMD2gzZC5zaGFkZXIuU2tpbhIBEHJlbGF0aXZlUG9zaXRpb24FCwQAAAITdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAAxF0cmFuc2Zvcm1lZE5vcm1hbAULBAAABAhNYXhCb25lcwECAAEAAAAAAAURZm91ckJvbmVzQnlWZXJ0ZXgCAgABAAAAAAAGC2NhbGNQcmV2UG9zAgIAAQAAAAAABw1ib25lc01hdHJpeGVzDwgEAgABCAgRcHJldkJvbmVzTWF0cml4ZXMPCAQCAAEICQtib25lTWF0cml4WAgEAAAKC2JvbmVNYXRyaXhZCAQAAAsLYm9uZU1hdHJpeFoIBAAADAtib25lTWF0cml4VwgEAAANC3NraW5XZWlnaHRzBQwEAAAOBWlucHV0DQEEDwhwb3NpdGlvbgULAQ4AEAZub3JtYWwFCwEOABEHd2VpZ2h0cwULAQ4AEgdpbmRleGVzCQQAAAABDgABAAATG3ByZXZpb3VzVHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAFA5hcHBseVNraW5Qb2ludA4GAAAVDGFwcGx5U2tpblZlYw4GAAAWBnZlcnRleA4GAAADAxQBFwFwBQsEAAAFCwUDCBgLdHJhbnNmb3JtZWQFCwQAAAYABgAGAQQGAQIXBQsCCQgFCwULCgINBQwAAAMFCwYBBAYBAhcFCwIKCAULBQsKAg0FDAQAAwULBQsGAQQGAQIXBQsCCwgFCwULCgINBQwIAAMFCwULAAsGBwoCDQUMDAADAQMAAAAAAAAAAAMCBQEGgAIYBQsGAQQGAQIXBQsCDAgFCwULCgINBQwMAAMFCwULAAAADQIYBQsAAAMVARkBdgULBAAABQsFAwgaC3RyYW5zZm9ybWVkBQsEAAAGAAYABgEEBgECGQULCQMzDgECCQgGBQsFCwoCDQUMAAADBQsGAQQGAQIZBQsJAzMOAQIKCAYFCwULCgINBQwEAAMFCwULBgEEBgECGQULCQMzDgECCwgGBQsFCwoCDQUMCAADBQsFCwALBgcKAg0FDAwAAwEDAAAAAAAAAAADAgUBBoACGgULBgEEBgECGQULCQMzDgECDAgGBQsFCwoCDQUMDAADBQsFCwAAAA0CGgULAAAAFgAABQsLAgYCBQcGBAIJCBECCA8IBAkDJg4BCgISCQQAAAAAAAMBCAgGBAIKCBECCA8IBAkDJg4BCgISCQQAAAAEAAMBCAgGBAILCBECCA8IBAkDJg4BCgISCQQAAAAIAAMBCAgGBAIMCBECCA8IBAkDJg4BCgISCQQAAAAMAAMBCAgGBAINBQwJAysOAgIRBQsBAwAAAAAAAAAAAwUMBQwLAgUCBgQKAg0FDAwAAwYDAQMAAAAAAADwPwMEBgAGAAoCEQULAAADCgIRBQsEAAMDCgIRBQsIAAMDAwMDAAAGBAITBQsJAhQOAQIBBQsFCwULAAAABgQCCQgRAgcPCAQJAyYOAQoCEgkEAAAAAAADAQgIBgQCCggRAgcPCAQJAyYOAQoCEgkEAAAABAADAQgIBgQCCwgRAgcPCAQJAyYOAQoCEgkEAAAACAADAQgIBgQCDAgRAgcPCAQJAyYOAQoCEgkEAAAADAADAQgIBgQCDQUMCQMrDgICEQULAQMAAAAAAAAAAAMFDAUMCwIFAgYECgINBQwMAAMGAwEDAAAAAAAA8D8DBAYABgAKAhEFCwAAAwoCEQULBAADAwoCEQULCAADAwMDAwAABgQCAgULCQIUDgECAQULBQsFCwYEAgMFCwkCFQ4BAhAFCwULBQsGBAIDBQsJAyAOAQIDBQsFCwULCwcCAgYCAgYEAhMFCwICBQsFCwAAAA",Uo._MODULE="h3d.shader.Skin",Lo.SRC="HXSMFmgzZC5zaGFkZXIuU2tpblRhbmdlbnQTARByZWxhdGl2ZVBvc2l0aW9uBQsEAAACE3RyYW5zZm9ybWVkUG9zaXRpb24FCwQAAAMRdHJhbnNmb3JtZWROb3JtYWwFCwQAAAQITWF4Qm9uZXMBAgABAAAAAAAFEWZvdXJCb25lc0J5VmVydGV4AgIAAQAAAAAABgtjYWxjUHJldlBvcwICAAEAAAAAAAcNYm9uZXNNYXRyaXhlcw8IBAIAAQgIEXByZXZCb25lc01hdHJpeGVzDwgEAgABCAkLYm9uZU1hdHJpeFgIBAAACgtib25lTWF0cml4WQgEAAALC2JvbmVNYXRyaXhaCAQAAAwLYm9uZU1hdHJpeFcIBAAADQtza2luV2VpZ2h0cwUMBAAADgVpbnB1dA0BBQ8IcG9zaXRpb24FCwEOABAGbm9ybWFsBQsBDgARB3RhbmdlbnQFCwEOABIHd2VpZ2h0cwULAQ4AEwdpbmRleGVzCQQAAAABDgABAAAUEnRyYW5zZm9ybWVkVGFuZ2VudAUMBAAAFRtwcmV2aW91c1RyYW5zZm9ybWVkUG9zaXRpb24FCwQAABYOYXBwbHlTa2luUG9pbnQOBgAAFwxhcHBseVNraW5WZWMOBgAAGAZ2ZXJ0ZXgOBgAAAwMWARkBcAULBAAABQsFAwgaC3RyYW5zZm9ybWVkBQsEAAAGAAYABgEEBgECGQULAgkIBQsFCwoCDQUMAAADBQsGAQQGAQIZBQsCCggFCwULCgINBQwEAAMFCwULBgEEBgECGQULAgsIBQsFCwoCDQUMCAADBQsFCwALBgcKAg0FDAwAAwEDAAAAAAAAAAADAgUBBoACGgULBgEEBgECGQULAgwIBQsFCwoCDQUMDAADBQsFCwAAAA0CGgULAAADFwEbAXYFCwQAAAULBQMIHAt0cmFuc2Zvcm1lZAULBAAABgAGAAYBBAYBAhsFCwkDMw4BAgkIBgULBQsKAg0FDAAAAwULBgEEBgECGwULCQMzDgECCggGBQsFCwoCDQUMBAADBQsFCwYBBAYBAhsFCwkDMw4BAgsIBgULBQsKAg0FDAgAAwULBQsACwYHCgINBQwMAAMBAwAAAAAAAAAAAwIFAQaAAhwFCwYBBAYBAhsFCwkDMw4BAgwIBgULBQsKAg0FDAwAAwULBQsAAAANAhwFCwAAABgAAAUNCwIGAgUHBgQCCQgRAggPCAQJAyYOAQoCEwkEAAAAAAADAQgIBgQCCggRAggPCAQJAyYOAQoCEwkEAAAABAADAQgIBgQCCwgRAggPCAQJAyYOAQoCEwkEAAAACAADAQgIBgQCDAgRAggPCAQJAyYOAQoCEwkEAAAADAADAQgIBgQCDQUMCQMrDgICEgULAQMAAAAAAAAAAAMFDAUMCwIFAgYECgINBQwMAAMGAwEDAAAAAAAA8D8DBAYABgAKAhIFCwAAAwoCEgULBAADAwoCEgULCAADAwMDAwAABgQCFQULCQIWDgECAQULBQsFCwAAAAYEAgkIEQIHDwgECQMmDgEKAhMJBAAAAAAAAwEICAYEAgoIEQIHDwgECQMmDgEKAhMJBAAAAAQAAwEICAYEAgsIEQIHDwgECQMmDgEKAhMJBAAAAAgAAwEICAYEAgwIEQIHDwgECQMmDgEKAhMJBAAAAAwAAwEICAYEAg0FDAkDKw4CAhIFCwEDAAAAAAAAAAADBQwFDAsCBQIGBAoCDQUMDAADBgMBAwAAAAAAAPA/AwQGAAYACgISBQsAAAMKAhIFCwQAAwMKAhIFCwgAAwMDAwMAAAYEAgIFCwkCFg4BAgEFCwULBQsGBAIDBQsJAhcOAQIQBQsFCwULBgQKAhQFDJIABQsJAhcOAQoCEQULkgAFCwULBQsGBAIDBQsJAyAOAQIDBQsFCwULBgQKAhQFDJIABQsJAyAOAQoCFAUMkgAFCwULBQsLBwICBgICBgQCFQULAgIFCwULAAAA",Lo._MODULE="h3d.shader.SkinTangent",jo.SRC="HXSMGmgzZC5zaGFkZXIuU3BlY3VsYXJUZXh0dXJlBAEHdGV4dHVyZQoCAgAAAgxjYWxjdWxhdGVkVVYFCgQAAAMJc3BlY0NvbG9yBQsEAAAECGZyYWdtZW50DgYAAAEBBAAABQEGgQIDBQsKCQMiDgICAQoCAgIFCgUMkgAFCwULAA",jo._MODULE="h3d.shader.SpecularTexture",Ho.SRC="HXSMEmgzZC5zaGFkZXIuVGV4dHVyZQsBBWlucHV0DQEBAgJ1dgUKAQEAAQAAAwhhZGRpdGl2ZQICAAEAAAAAAAQJa2lsbEFscGhhAgIAAQAAAAAABQ1zcGVjdWxhckFscGhhAgIAAQAAAAAABhJraWxsQWxwaGFUaHJlc2hvbGQDAgABBwAAAAAAAAAAAAAAAAAA8D8HB3RleHR1cmUKAgIAAAgMY2FsY3VsYXRlZFVWBQoEAAAJCnBpeGVsQ29sb3IFDAQAAAoJc3BlY0NvbG9yBQsEAAALBnZlcnRleA4GAAAMCGZyYWdtZW50DgYAAAIACwAABQEGBAIIBQoCAgUKBQoAAQwAAAUECA0BYwUMBAAACQMiDgICBwoCAggFCgUMAAsGDgIEAgYJBgMKAg0FDAwAAwIGAwMBAwAAAAAAAAAAAwICDAAAAAsCAwIGgAIJBQwCDQUMBQwGgQIJBQwCDQUMBQwACwIFAgaBAgoFCwoCDQUM/gAFCwULAAAA",Ho._MODULE="h3d.shader.Texture",wi.SRC="HXSMEmgzZC5zaGFkZXIuVVZEZWx0YQQBB3V2RGVsdGEFCgIAAAIHdXZTY2FsZQUKAgAAAwxjYWxjdWxhdGVkVVYFCgQAAAQGdmVydGV4DgYAAAEABAAABQEGBAIDBQoGAAYBAgMFCgICBQoFCgIBBQoFCgUKAA",wi._MODULE="h3d.shader.UVDelta",yi.SRC="HXSMFmgzZC5zaGFkZXIuVmVydGV4Q29sb3IEAQVpbnB1dA0BAQIFY29sb3IFCwEBAAEAAAMKcGl4ZWxDb2xvcgUMBAAABAhhZGRpdGl2ZQICAAEAAAAAAAUIZnJhZ21lbnQOBgAAAQEFAAAFAQsCBAIGgAoCAwUMkgAFCwICBQsFCwaBCgIDBQySAAULAgIFCwULAAA",yi._MODULE="h3d.shader.VertexColor",Yo.SRC="HXSMG2gzZC5zaGFkZXIuVmVydGV4Q29sb3JBbHBoYQQBBWlucHV0DQEBAgVjb2xvcgUMAQEAAQAAAwpwaXhlbENvbG9yBQwEAAAECGFkZGl0aXZlAgIAAQAAAAAABQhmcmFnbWVudA4GAAABAQUAAAUBCwIEAgaAAgMFDAICBQwFDAaBAgMFDAICBQwFDAAA",Yo._MODULE="h3d.shader.VertexColorAlpha",bi.SRC="HXSMFmgzZC5zaGFkZXIuVm9sdW1lRGVjYWwdAQZjYW1lcmENAQwCBHZpZXcHAAEAAwRwcm9qBwABAAQIcG9zaXRpb24FCwABAAUIcHJvakZsaXADAAEABghwcm9qRGlhZwULAAEABwh2aWV3UHJvagcAAQAIEHByZXZpb3VzVmlld1Byb2oHAAEACQ9pbnZlcnNlVmlld1Byb2oHAAEACgV6TmVhcgMAAQALBHpGYXIDAAEADANkaXIFCwMBAA0Naml0dGVyT2Zmc2V0cwUMAAEAAAAADgZnbG9iYWwNAgUPBHRpbWUDAA4AEAlwaXhlbFNpemUFCgAOABEJbW9kZWxWaWV3BwAOAQMSEG1vZGVsVmlld0ludmVyc2UHAA4BAxMRcHJldmlvdXNNb2RlbFZpZXcHAA4BAwAAABQFaW5wdXQNAwIVCHBvc2l0aW9uBQsBFAAWBm5vcm1hbAULARQAAQAAFwZvdXRwdXQNBAYYCHBvc2l0aW9uBQwEFwAZBWNvbG9yBQwEFwAaBWRlcHRoAwQXABsGbm9ybWFsBQsEFwAcCXdvcmxkRGlzdAMEFwAdCHZlbG9jaXR5BQoEFwAEAAAeEHJlbGF0aXZlUG9zaXRpb24FCwQAAB8TdHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAIBtwcmV2aW91c1RyYW5zZm9ybWVkUG9zaXRpb24FCwQAACEYcGl4ZWxUcmFuc2Zvcm1lZFBvc2l0aW9uBQsEAAAiEXRyYW5zZm9ybWVkTm9ybWFsBQsEAAAjEXByb2plY3RlZFBvc2l0aW9uBQwEAAAkGXByZXZpb3VzUHJvamVjdGVkUG9zaXRpb24FDAQAACUKcGl4ZWxDb2xvcgUMBAAAJgVkZXB0aAMEAAAnC25kY1Bvc2l0aW9uBQoEAAAoE3ByZXZpb3VzTmRjUG9zaXRpb24FCgQAACkIc2NyZWVuVVYFCgQAACoJc3BlY1Bvd2VyAwQAACsJc3BlY0NvbG9yBQsEAAAsCXdvcmxkRGlzdAMEAAAtDXBpeGVsVmVsb2NpdHkFCgQAAC4IZGVwdGhNYXARAQAAAC8Fc2NhbGUFCgIAADAGbm9ybWFsBQsCAAAxB3RhbmdlbnQFCwIAADIKaXNDZW50ZXJlZAICAAEAAAAAADMMY2FsY3VsYXRlZFVWBQoEAAA0EnRyYW5zZm9ybWVkVGFuZ2VudAUMBAAANQ5fX2luaXRfX3ZlcnRleA4GAAA2CGZyYWdtZW50DgYAAAICNQAABQIGBAIiBQsJAyAOAQQGAQIwBQsJAzMOAQIRBwYFCwULBQsFCwYEAjQFDAkDKw4CCQMgDgEEBgECMQULCQMzDgECEQcGBQsFCwULAQMAAAAAAADwPwMFDAUMAAE2AAAFCQg3Bm1hdHJpeAcEAAAGAQIJBwISBwcACDgJc2NyZWVuUG9zBQoEAAAGAgoCIwUMEQAFCgoCIwUMDAADBQoACDkDcnV2BQwEAAAJAysOAwI4BQoJA0AOAgIuEQEJAzsOAQI4BQoFCgMBAwAAAAAAAPA/AwUMAAg6BHdwb3MFDAQAAAYBAjkFDAI3BwUMAAg7BHBwb3MFDAQAAAYBAjkFDAIJBwUMAAYEAiEFCwYCCgI7BQySAAULCgI7BQwMAAMFCwULBgQCMwUKBgECLwUKBAYCCgI6BQwRAAUKCgI6BQwMAAMFCgUKBQoFCgsCMgIGgAIzBQoBAwAAAAAAAOA/AwUKAAALBgkJAxUOAgkDFQ4CCgIzBQoAAAMKAjMFCgQAAwMJAxUOAgYDAQMAAAAAAADwPwMKAjMFCgAAAwMGAwEDAAAAAAAA8D8DCgIzBQoEAAMDAwMBAwAAAAAAAAAAAwIMAAAAAA",bi._MODULE="h3d.shader.VolumeDecal",Oi.background_bonus_1="background_bonus_1",Oi.intro_background_bonus_1="intro_background_bonus_1",Wi.frames=Oi,Ni.background_bonus_2="background_bonus_2",Ni.background_epic="background_epic",Gi.frames=Ni,Ui.bg="bg",Li.frames=Ui,es.continue_button_active="continue_button_active",es.continue_button_hover="continue_button_hover",es.gamble_button_active="gamble_button_active",es.gamble_button_hover="gamble_button_hover",es.intro_splash_bonus="intro_splash_bonus",es.intro_splash_bonus_vertical="intro_splash_bonus_vertical",es.reel_2="reel_2",es.tumbleweed="tumbleweed",ts.frames=es,ns.countup_bg="countup_bg",ns.fs_four="fs_four",ns.fs_two="fs_two",ns.hidden_epic_bonus_small="hidden_epic_bonus_small",ns.high_noon_saloon="high_noon_saloon",ns.logo="logo",ns.pistols_at_dawn="pistols_at_dawn",ns.reel_bg="reel_bg",ns.spark_1="spark_1",ns.spark_2="spark_2",ns.trail_of_trickery="trail_of_trickery",is.frames=ns,ss.a="a",ss.b="b",ss.c="c",ss.hidden_epic_bonus="hidden_epic_bonus",ss.volatility="volatility",as.frames=ss,J.__meta__={statics:{backgrounds:{keep:null},misc_bonus:{keep:null},backgrounds_bonus_two:{keep:null},splash:{keep:null},misc:{keep:null},backgrounds_bonus_one:{keep:null},digits_countup:{keep:null},digits_silver:{keep:null},digits_diamond:{keep:null},digits_clover:{keep:null},digits_bronze:{keep:null},digits_gold:{keep:null},digits_bullets:{keep:null},digits:{keep:null},coin_animation:{keep:null}}},J.backgrounds_info=Li,J.misc_bonus_info=ts,J.backgrounds_bonus_two_info=Gi,J.splash_info=as,J.misc_info=is,J.backgrounds_bonus_one_info=Wi,J.digits_countup_info=Xi,J.digits_silver_info=$i,J.digits_diamond_info=qi,J.digits_clover_info=Zi,J.digits_bronze_info=Hi,J.digits_gold_info=Ki,J.digits_bullets_info=Yi,J.digits_info=Ji,J.coin_animation_info=ji,t.__meta__={statics:{wintier_1:{keep:null},music_bonus_level_2:{keep:null},update_sweep_2:{keep:null},bag_zipper_ding:{keep:null},symdrop_3:{keep:null},spurs_wood_1:{keep:null},bush_hawk_transit:{keep:null},pop_glitter_1:{keep:null},infuriated_3:{keep:null},delighted_1:{keep:null},music_level_2:{keep:null},music_bonus_level_1:{keep:null},spurs_wood_2:{keep:null},diamond:{keep:null},dropgrid_out:{keep:null},delighted_3:{keep:null},win_end_bet_high:{keep:null},fuming_1:{keep:null},suspense_drums:{keep:null},arrow:{keep:null},western_bonus_3:{keep:null},impact_gun_spin:{keep:null},raccoon_welcome_3:{keep:null},symdrop_1:{keep:null},western_vignette_1:{keep:null},bugle_cannon_1:{keep:null},update_sweep_6:{keep:null},holster_gun_faster:{keep:null},gunshot_clicks_2:{keep:null},click_drop_5:{keep:null},bass_hit_5:{keep:null},coins_pour:{keep:null},music_bonus_3_level_0:{keep:null},ping_3:{keep:null},whistle_downer:{keep:null},wintier_2:{keep:null},plastic_click:{keep:null},pop_glitter_2:{keep:null},reeldrop_1:{keep:null},medium_coin_3:{keep:null},drumroll:{keep:null},holster_gun:{keep:null},delighted_4:{keep:null},ricochet_3:{keep:null},flute_vignette_whip_3:{keep:null},ping_1:{keep:null},western_bonus_1:{keep:null},update_sweep_1:{keep:null},infuriated_2:{keep:null},pling:{keep:null},update_sweep_3:{keep:null},music_bonus_level_3:{keep:null},ping_2:{keep:null},update_sweep_5:{keep:null},click_open:{keep:null},medium_coin_2:{keep:null},big_coin_2:{keep:null},music_bonus_2_level_2:{keep:null},spin_crunchy_3:{keep:null},click_drop_3:{keep:null},plink_1:{keep:null},plink_3:{keep:null},lecowboy_intro:{keep:null},plink_4:{keep:null},cymbal_crash:{keep:null},click_sweep:{keep:null},wintier_3:{keep:null},music_bonus_2_level_0:{keep:null},pistol_boing_whistle:{keep:null},music_bonus_2_level_1:{keep:null},fountain_start:{keep:null},raccoon_welcome_2:{keep:null},small_coin_3:{keep:null},bugle_cannon_2:{keep:null},bass_hit_4:{keep:null},spur_whistle:{keep:null},gun_draw:{keep:null},medium_coin_1:{keep:null},cartoon_move:{keep:null},small_coin_2:{keep:null},pop_guncock:{keep:null},dropswoosh_in:{keep:null},fuming_2:{keep:null},heavy_poof:{keep:null},spin_crunchy_1:{keep:null},big_coin_1:{keep:null},click_close:{keep:null},symdrop_4:{keep:null},win_end_bet_over:{keep:null},happy_1:{keep:null},update_sweep_4:{keep:null},nail_board_shimmer:{keep:null},click_drop_4:{keep:null},whirl_1:{keep:null},happy_2:{keep:null},western_vignette_3:{keep:null},success_2:{keep:null},music_bonus_level_0:{keep:null},spurs_wood_3:{keep:null},spurs_wood_4:{keep:null},bass_hit_1:{keep:null},spin_crunchy_2:{keep:null},count_blip:{keep:null},raccoon_welcome_1:{keep:null},music_level_3:{keep:null},gunshot_clicks_1:{keep:null},win_end_bet_low:{keep:null},poof:{keep:null},bugle_wet_1:{keep:null},wintier_4:{keep:null},coins_swoosh_new:{keep:null},swoosh:{keep:null},gunshot_clicks_3:{keep:null},music_bonus_2_level_3:{keep:null},click_drop_2:{keep:null},win_count_1:{keep:null},symdrop_2:{keep:null},coin_swoosh:{keep:null},fuming_3:{keep:null},music_level_0:{keep:null},poof_metallic:{keep:null},dropgrid_in:{keep:null},western_bonus_2:{keep:null},western_vignette_2:{keep:null},flute_vignette_whip_1:{keep:null},delighted_2:{keep:null},ricochet_2:{keep:null},cork_pop:{keep:null},bass_hit_3:{keep:null},desert_ambience:{keep:null},small_coin_1:{keep:null},ricochet_1:{keep:null},ping_clicks_reload:{keep:null},shotgun_cock:{keep:null},plink_2:{keep:null},big_coin_3:{keep:null},loud_ping:{keep:null},vibraslap:{keep:null},success_1:{keep:null},music_level_1:{keep:null},flute_vignette_whip_2:{keep:null},bass_hit_2:{keep:null},scratch:{keep:null},bugle_wet_2:{keep:null},pop_weapon:{keep:null},ricochet_4:{keep:null},infuriated_1:{keep:null},click_drop_1:{keep:null}}},hs.setup_6="setup_6",hs.reload_5="reload_5",hs.shoot_2="shoot_2",hs.shoot_3="shoot_3",hs.reload_2="reload_2",hs.shoot_5="shoot_5",hs.reload_track="reload_track",hs.shoot_1="shoot_1",hs.reload_epic="reload_epic",hs.shoot_6="shoot_6",hs.reload_1="reload_1",hs.setup="setup",hs.shoot_4="shoot_4",hs.reload_4="reload_4",hs.reload_3="reload_3",hs.reload_6="reload_6",cs.animations=hs,_s.bronze_start="bronze_start",_s.diamond_landed="diamond_landed",_s.diamond_setup="diamond_setup",_s.bronze_end="bronze_end",_s.gold_start="gold_start",_s.diamond_spin="diamond_spin",_s.gold_sparkle_idle="gold_sparkle_idle",_s.gold_landed="gold_landed",_s.bronze_landed="bronze_landed",_s.bronze_coin="bronze_coin",_s.silver_end="silver_end",_s.silver_landed="silver_landed",_s.silver_start="silver_start",_s.diamond_sparkle_idle="diamond_sparkle_idle",_s.gold_end="gold_end",_s.gold_coin="gold_coin",_s.silver_coin="silver_coin",ds.animations=_s,ps.dust="dust",ps.remove="remove",ps.reveal="reveal",ms.animations=ps,gs.epic_win_remove="epic_win/remove",gs.total_win_remove="total_win/remove",gs.mega_win_trigger="mega_win/trigger",gs.big_win_trigger="big_win/trigger",gs.big_win_remove="big_win/remove",gs.epic_win_idle="epic_win/idle",gs.total_win_idle="total_win/idle",gs.mega_win_idle="mega_win/idle",gs.big_win_idle="big_win/idle",gs.super_mega_win_trigger="super_mega_win/trigger",gs.mega_win_remove="mega_win/remove",gs.super_mega_win_idle="super_mega_win/idle",gs.epic_win_trigger="epic_win/trigger",gs.total_win_trigger="total_win/trigger",gs.super_mega_win_remove="super_mega_win/remove",fs.animations=gs,As.setup="setup",As.reveal="reveal",xs.animations=As,ws.shoot="shoot",ws.empty="empty",ws.setup="setup",ws.idle="idle",ys.animations=ws,bs.reel_highlight="reel_highlight",bs.dance_start="dance_start",bs.epic_bonus_sus_scratch="epic_bonus/sus_scratch",bs.shoot_2="shoot_2",bs.welcome="welcome",bs.dance_end="dance_end",bs.epic_bonus_win_1="epic_bonus/win_1",bs.epic_bonus_reel_highlight="epic_bonus/reel_highlight",bs.win_3="win_3",bs.dance_idle="dance_idle",bs.epic_bonus_shoot_start="epic_bonus/shoot_start",bs.shoot_3="shoot_3",bs.epic_bonus_dance_idle="epic_bonus/dance_idle",bs.shoot_5="shoot_5",bs.epic_bonus_dance_end="epic_bonus/dance_end",bs.epic_bonus_shoot_end="epic_bonus/shoot_end",bs.epic_bonus_win_3="epic_bonus/win_3",bs.epic_bonus_shoot_1="epic_bonus/shoot_1",bs.shoot="shoot",bs.bonus_transition="bonus_transition",bs.epic_bonus_loosing_2="epic_bonus/loosing_2",bs.shoot_end="shoot_end",bs.epic_bonus_dance="epic_bonus/dance",bs.shoot_fail="shoot_fail",bs.shoot_start="shoot_start",bs.epic_bonus_win_2="epic_bonus/win_2",bs.epic_bonus_dance_start="epic_bonus/dance_start",bs.loosing_1="loosing_1",bs.dance_long="dance_long",bs.lost_mustache="lost_mustache",bs.epic_bonus_idle="epic_bonus/idle",bs.epic_bonus_shoot_2="epic_bonus/shoot_2",bs.loosing_2="loosing_2",bs.dance="dance",bs.shoot_4="shoot_4",bs.epic_bonus_loosing_1="epic_bonus/loosing_1",bs.win_2="win_2",bs.sus_scratch="sus_scratch",bs.win_1="win_1",bs.idle="idle",vs.animations=bs,Cs.specials_clover_idle="specials/clover/idle",Cs.specials_fs_setup="specials/fs/setup",Cs.specials_fs_win="specials/fs/win",Ss.animations=Cs,K.__meta__={statics:{coin_reveal:{keep:null},symbols:{keep:null},range_reveal:{keep:null},bullet_indicator:{keep:null},coin:{keep:null},countup_tiers:{keep:null},shooting_range:{keep:null},smokey:{keep:null}}},K.coin_reveal_info=ms,K.symbols_info=Ss,K.range_reveal_info=xs,K.bullet_indicator_info=cs,K.coin_info=ds,K.countup_tiers_info=fs,K.shooting_range_info=ys,K.smokey_info=vs,ks.images=os,ks.spines=K,ks.sounds=t,ks.fonts=new at,ks.bitmapFonts=new at,ks.atlases=J,ks.gradients=rs,ks.models=us,ks.configs=ls,Rs.__meta__={obj:{await:null},fields:{getMaxSize:{async:null},getStepBounds:{async:null}}},Rs.BASE_NAME="hacksaw.core.components.actor.CountupControllerComponent",uu.BASE_NAME="hacksaw.core.components.actor.SoundTriggerComponent",Us.BASE_NAME="gasm.heaps.components.actor.render.PostProcessingChainComponent",_u.BASE_NAME="hacksaw.core.components.model.CasinoModel",Ls.BASE_NAME="hacksaw.core.components.model.ExcitementModel",pu.BASE_NAME="gasm.heaps.components.Heaps3DComponent",mu.BASE_NAME=Zs.BASE_NAME=js.BASE_NAME="gasm.heaps.components.Heaps3DComponent",Au.BASE_NAME=Js.BASE_NAME=Xs.BASE_NAME="gasm.heaps.components.Heaps3DComponent",na.BASE_NAME=ea.BASE_NAME="gasm.heaps.components.Heaps3DComponent",ua.__meta__={fields:{progress:{keep:null}}},yu.__meta__={statics:{alphakind:{keep:null}}},yu.alphakind="alphakind",ya.SRC="HXSMJGhhY2tzYXcuY29yZS5maWx0ZXJzLmgyZC5Db2xvckZpbHRlcgoBBWlucHV0DQECAghwb3NpdGlvbgUKAQEAAwJ1dgUKAQEAAQAABAVmbGlwWQMCAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgKcGl4ZWxDb2xvcgUMBAAACQxjYWxjdWxhdGVkVVYFCgQAAAoHdGV4dHVyZQoCAgAACwVjb2xvcgUMAgAADAhfX2luaXRfXw4GAAANBnZlcnRleA4GAAAOCGZyYWdtZW50DgYAAAMCDAAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAAA0AAAUBBgQCBgUMCQMrDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAAQ4AAAUCCA8FYWxwaGEDBAAACgkDIg4CAgoKAgIDBQoFDAwAAwAGBAIIBQwGAQILBQwCDwMFDAUMAA",ya._MODULE="hacksaw.core.filters.h2d.ColorFilter",ba.SRC="HXSMKWhhY2tzYXcuY29yZS5maWx0ZXJzLmgyZC5Nb3Rpb25CbHVyU2hhZGVyDAEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgdzYW1wbGVzAQIAAQAAAAAACwlkaXJlY3Rpb24DAgAADAlpbnRlbnNpdHkDAgAADQd0ZXh0dXJlCgICAAAOCF9faW5pdF9fDgYAAA8GdmVydGV4DgYAABAIZnJhZ21lbnQOBgAAAwIOAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAADwAABQEGBAIGBQwJAysOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAABEAAABQcIEQNkaXIFCgQAAAkDIA4BCQMpDgIJAwIOAQILAwMJAwMOAQILAwMFCgUKAAgSBWRlbHRhAwQAAAYCAQMAAAAAAADwPwMJAycOAQIKAQMDAAgTBWFuZ2xlBQoEAAAGAQIMAwoCEQUKEQAFCgUKAAgUA2FjYwUMBAAACQMrDgEBAwAAAAAAAAAAAwUMAAgVA3BvcwMEAAABAwAAAAAAAOC/AwAVBnVucm9sbAAOFgFpAQQAAAYVAQIAAAAAAQIKAQ8BAAAFAwaAAhUDAhIDAwgXAnV2BQoEAAAGAwIDBQoEBgECEwUKAhUDBQoFCgUKAAaAAhQFDAoJAyIOAgINCgICFwUKBQyTAwUMBQwAAAAGBAIIBQwJAysOAQYBAhIDAhQFDAUMBQwFDAA",ba._MODULE="hacksaw.core.filters.h2d.MotionBlurShader",cl.SRC="HXSMKWhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5CaXRtYXBNYXNrU2hhZGVyDQEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACgd0ZXh0dXJlCgICAAALBG1hc2sKAgIAAAwIbWFza01hdEEFCwIAAA0IbWFza01hdEIFCwIAAA4GbWFza1VWBQoDAAAPCF9faW5pdF9fDgYAABAGdmVydGV4DgYAABEIZnJhZ21lbnQOBgAAAwIPAAAFAgYEAgcFDAIIBQwFDAYEAgkFCgIDBQoFCgAAEAAABQMGBAIGBQwJAysOBAoCAgUKAAADBgEKAgIFCgQAAwIEAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DBQwFDAgSAnV2BQsEAAAJAyoOAgIDBQoBAwAAAAAAAPA/AwULAAYEAg4FCgkDKQ4CCQMeDgICEgULAgwFCwMJAx4OAgISBQsCDQULAwUKBQoAAREAAAUDCBMFY29sb3IFDAQAAAkDIg4CAgoKAgIDBQoFDAAIFAFrBQwEAAAJAyIOAgILCgICDgUKBQwABgQCBwUMBgECEwUMCQMrDgQBAwAAAAAAAPA/AwEDAAAAAAAA8D8DAQMAAAAAAADwPwMKAhQFDAwAAwUMBQwFDAA",cl._MODULE="hacksaw.core.h3d.shaders.BitmapMaskShader",_l.SRC="HXSMLmhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5Db2xvck11bHRpcGxpZXJTaGFkZXILAQVpbnB1dA0BAwIIcG9zaXRpb24FCgEBAAMCdXYFCgEBAAQFY29sb3IFDAEBAAEAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACAR0aW1lAwAAAAkOc3ByaXRlUG9zaXRpb24FDAQAAAoQYWJzb2x1dGVQb3NpdGlvbgUMBAAACwpwaXhlbENvbG9yBQwEAAAMDHRleHR1cmVDb2xvcgUMBAAADQxjYWxjdWxhdGVkVVYFCgMAAA4Ob3V0cHV0UG9zaXRpb24FDAQAAA8KbXVsdGlwbGllcgUMAgAAEAhmcmFnbWVudA4GAAABARAAAAUBBoECBwUMAg8FDAUMAA",_l._MODULE="hacksaw.core.h3d.shaders.ColorMultiplierShader",fh.SRC="HXSMNWhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5HYXVzc2lhbkJsdXJTaW5nbGVBeGlzU2hhZGVyGAEFaW5wdXQNAQICCHBvc2l0aW9uBQoBAQADAnV2BQoBAQABAAAEBWZsaXBZAwIAAAUGb3V0cHV0DQICBghwb3NpdGlvbgUMBAUABwVjb2xvcgUMBAUABAAACApwaXhlbENvbG9yBQwEAAAJDGNhbGN1bGF0ZWRVVgUKBAAACghjb2xvck1hcAoCAgAACwljb2xvck1hcDIKAgIAAAwJbm9ybWFsTWFwCgICAAANCGRlcHRoTWFwCgICAAAOCG5vaXNlTWFwCgICAAAPCnJlc29sdXRpb24FCgIAABAEdGltZQMCAAARCWRpcmVjdGlvbgUKAgAAEgZvZmZzZXQPAwAGAgAAEwZ3ZWlnaHQPAwAGAgAAFAZhbW91bnQDAgAAFQd1dnNaZXJvBQwEAAAWBnV2c09uZQUMBAAAFwZ1dnNUd28FDAQAABgIdXZzVGhyZWUFDAQAABkHdXZzRm91cgUMBAAAGghfX2luaXRfXw4GAAAbBnZlcnRleA4GAAAcCGZyYWdtZW50DgYAAAMCGgAABQIGBAIHBQwCCAUMBQwGBAIJBQoCAwUKBQoAABsAAAUMCB0NcmVzb2x1dGlvbkRpcgUKBAAABgECEQUKCQMpDgIGAgEDAAAAAAAA8D8DCgIPBQoAAAMDBgIBAwAAAAAAAPA/AwoCDwUKBAADAwUKBQoABgQKAhUFDBEABQoGAAIDBQoEBgEGAQIdBQoRAhIPAwAGAQIBAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhUFDDkABQoGAwIDBQoEBgEGAQIdBQoRAhIPAwAGAQIBAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhYFDBEABQoGAAIDBQoEBgEGAQIdBQoRAhIPAwAGAQICAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhYFDDkABQoGAwIDBQoEBgEGAQIdBQoRAhIPAwAGAQICAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhcFDBEABQoGAAIDBQoEBgEGAQIdBQoRAhIPAwAGAQIDAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhcFDDkABQoGAwIDBQoEBgEGAQIdBQoRAhIPAwAGAQIDAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhgFDBEABQoGAAIDBQoEBgEGAQIdBQoRAhIPAwAGAQIEAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhgFDDkABQoGAwIDBQoEBgEGAQIdBQoRAhIPAwAGAQIEAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhkFDBEABQoGAAIDBQoEBgEGAQIdBQoRAhIPAwAGAQIFAAAAAQMFCgIUAwUKBQoFCgUKBgQKAhkFDDkABQoGAwIDBQoEBgEGAQIdBQoRAhIPAwAGAQIFAAAAAQMFCgIUAwUKBQoFCgUKBgQCBgUMCQMrDgQKAgIFCgAAAwYBCgICBQoEAAMCBAMDAQMAAAAAAAAAAAMBAwAAAAAAAPA/AwUMBQwAARwAAAUMCB4DY29sBQwEAAAGAQkDIg4CAgoKAgIDBQoFDBECEw8DAAYBAgAAAAABAwUMAAaAAh4FDAYBCQMiDgICCgoCCgIVBQwRAAUKBQwRAhMPAwAGAQIBAAAAAQMFDAUMBoACHgUMBgEJAyIOAgIKCgIKAhUFDDkABQoFDBECEw8DAAYBAgEAAAABAwUMBQwGgAIeBQwGAQkDIg4CAgoKAgoCFgUMEQAFCgUMEQITDwMABgECAgAAAAEDBQwFDAaAAh4FDAYBCQMiDgICCgoCCgIWBQw5AAUKBQwRAhMPAwAGAQICAAAAAQMFDAUMBoACHgUMBgEJAyIOAgIKCgIKAhcFDBEABQoFDBECEw8DAAYBAgMAAAABAwUMBQwGgAIeBQwGAQkDIg4CAgoKAgoCFwUMOQAFCgUMEQITDwMABgECAwAAAAEDBQwFDAaAAh4FDAYBCQMiDgICCgoCCgIYBQwRAAUKBQwRAhMPAwAGAQIEAAAAAQMFDAUMBoACHgUMBgEJAyIOAgIKCgIKAhgFDDkABQoFDBECEw8DAAYBAgQAAAABAwUMBQwGgAIeBQwGAQkDIg4CAgoKAgoCGQUMEQAFCgUMEQITDwMABgECBQAAAAEDBQwFDAaAAh4FDAYBCQMiDgICCgoCCgIZBQw5AAUKBQwRAhMPAwAGAQIFAAAAAQMFDAUMBgQCBwUMAh4FDAUMAA",fh._MODULE="hacksaw.core.h3d.shaders.GaussianBlurSingleAxisShader",Ah.SRC="HXSML2hhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5NdWx0aVRpbGVUZXh0dXJlU2hhZGVyHwEFaW5wdXQNAQECAnV2BQoBAQABAAADCGFkZGl0aXZlAgIAAQAAAAAABAlraWxsQWxwaGECAgABAAAAAAAFDXNwZWN1bGFyQWxwaGECAgABAAAAAAAGEmtpbGxBbHBoYVRocmVzaG9sZAMCAAEHAAAAAAAAAAAAAAAAAADwPwcHdGV4dHVyZQoCAgAACAxjYWxjdWxhdGVkVVYFCgQAAAkKcGl4ZWxDb2xvcgUMBAAACglzcGVjQ29sb3IFCwQAAAsHTmJUaWxlcwECAAEAAAAAAAwKdXZQb3NpdGlvbg8FCgsCAAANB3V2U2NhbGUPBQoLAgAADgh1dk1hcmdpbg8FCgsCAAAPCHV2T2Zmc2V0DwUKCwIAABAIdXZSZXBlYXQPBQoLAgAAEQ51dlJlcGVhdEVuYWJsZQ8BCwIAABIIdGV4dHVyZTIKAgIAABMKdXZSb3RhdGlvbgMCAAAUDXV2Um90YXRpb25GaXQDAgAAFQpvcmlnaW5hbFVWBQoEAAAWBnRpbGVVVgUMBAAAFwd0aWxlVVYyBQwEAAAYCXRpbGVVVk1pbgUMBAAAGQl0aWxlVVZNYXgFDAQAABoKdGlsZVVWMk1pbgUMBAAAGwp0aWxlVVYyTWF4BQwEAAAcD2NhbGN1bGF0ZVRpbGVVVg4GAAAdCHJvdGF0ZVVWDgYAAB4GdmVydGV4DgYAAB8PdGlsZVRleHR1cmVSZWFkDgYAACAIZnJhZ21lbnQOBgAABQMcAiEBaQEEAAAiB2lucHV0VVYFCgQAAAUMBQYIIwJ1dgUKBAAAAiIFCgAGgQIjBQoGAhECDQ8FCgsCIQEFCgQGAwEDAAAAAAAA8D8DEQIODwUKCwIhAQUKBQoFCgUKBQoGgwIjBQoRAg8PBQoLAiEBBQoFCggkBm1hc2tVVgUKBAAABgICIwUKEQINDwUKCwIhAQUKBQoABoACIwUKEQIMDwUKCwIhAQUKBQoNCQMrDgQKAiMFCgAAAwoCIwUKBAADCgIkBQoAAAMKAiQFCgQAAwUMAAADHQMlAnV2BQoEAAAmBWFuZ2xlAwQAACcIcHJlc2VydmUDBAAABQoFBQgoAXAFCgQAAAYDBgEBAwAAAAAAAABAAwIlBQoFCgEDAAAAAAAA8D8DBQoACCkBeAwEAAAJAzIOAgkDKQ4CCQMDDgECJgMDBwMJAwIOAQImAwMDBQoJAykOAgkDAg4BAiYDAwkDAw4BAiYDAwUKDAAGgQIoBQoCKQwFCgaBAigFCgYDAQMAAAAAAADwPwMGAQYBCQMPDgEJAwIOAQYBAiYDAQMAAAAAAAAAQAMDAwMBAwAAAAAAAOA/AwMCJwMDAwUKDQYABgEBAwAAAAAAAOA/AwIoBQoFCgEDAAAAAAAA4D8DBQoAAAAeAAAFBwsGBQITAwEDAAAAAAAAAAADAgUBBgQCCAUKAgIFCgUKAAUBBgQCCAUKCQIdDgMCAgUKAhMDAhQDBQoFCgAABgQCFQUKAggFCgUKBgQCFgUMCQIcDgIBAgAAAAABAhUFCgUMBQwGBAIIBQoKAhYFDBEABQoFCgYEAhgFDAkCHA4CAQIAAAAAAQkDKQ4BAQMAAAAAAAAAAAMFCgUMBQwGBAIZBQwJAhwOAgECAAAAAAEJAykOAQEDAAAAAAAA8D8DBQoFDAUMCwYFAgsBAQICAAAAAQIFAwYEAhcFDAkCHA4CAQIBAAAAAQIVBQoFDAUMBgQCGgUMCQIcDgIBAgEAAAABCQMpDgEBAwAAAAAAAAAAAwUKBQwFDAYEAhsFDAkCHA4CAQIBAAAAAQkDKQ4BAQMAAAAAAADwPwMFCgUMBQwAAAAAAx8DKgd0ZXh0dXJlCgIEAAArAnV2BQoEAAAsDHRpbGVEb21haW5VVgUKBAAABQwFBggtDHRleHR1cmVDb2xvcgUMBAAACQMiDgICKgoCAisFCgUMAAguBG1hc2sDBAAAAQMAAAAAAAAAAAMABoACLgMJAw8OAQkDEQ4BCgIsBQoAAAMDAwMGgAIuAwkDDw4BCQMRDgEKAiwFCgQAAwMDAwaBAi0FDAYDAQMAAAAAAADwPwMJAxcOAwIuAwEDAAAAAAAAAAADAQMAAAAAAADwPwMDAwUMDQItBQwAAAEgAAAFBQgvCnJlcGVhdGVkVVYFDAQAAAkDGA4DAhgFDAIZBQwKCQMTDgEGAQIVBQoRAhAPBQoLAQIAAAAAAQUKBQoFChMBBQwFDAAIMAZyZWFsVVYFDAQAAAYABgECFgUMCQMnDgEEBgMBAgEAAAABEQIRDwELAQIAAAAAAQEBAQMFDAYBCQMnDgERAhEPAQsBAgAAAAABAQMCLwUMBQwFDAAIMQVjb2xvcgUMBAAACQIfDgMCBwoCCgIwBQwRAAUKCgIwBQw5AAUKBQwACwYFAgsBAQICAAAAAQIFBAgyC3JlcGVhdGVkVVYyBQwEAAAJAxgOAwIaBQwCGwUMCgkDEw4BBgECFQUKEQIQDwUKCwECAQAAAAEFCgUKBQoTAQUMBQwACDMHcmVhbFVWMgUMBAAABgAGAQIXBQwJAycOAQQGAwECAQAAAAERAhEPAQsBAgEAAAABAQEBAwUMBgEJAycOARECEQ8BCwECAQAAAAEBAwIyBQwFDAUMAAg0BmNvbG9yMgUMBAAACQIfDgMCEgoCCgIzBQwRAAUKCgIzBQw5AAUKBQwABgQCMQUMBgAEBgEEBgMBAwAAAAAAAPA/AwoCNAUMDAADAwMCMQUMBQwFDAYBCgI0BQwMAAMCNAUMBQwFDAUMAAAABoECCQUMAjEFDAUMAA",Ah._MODULE="hacksaw.core.h3d.shaders.MultiTileTextureShader",dl.SRC="HXSMKWhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5QcmVtdWx0aXBseUFscGhhAwEGb3V0cHV0DQEBAgVjb2xvcgUMBAEABAAAAwpwaXhlbENvbG9yBQwEAAAECGZyYWdtZW50DgYAAAEBBAAABQELBgcKAgMFDAwAAwEDAAAAAAAAAAADAgUCBoEKAgIFDJIABQsKAgMFDAwAAwULBgQKAgIFDAwAAwoCAwUMDAADAwAFAQYEAgIFDAkDKw4EAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwEDAAAAAAAAAAADAQMAAAAAAAAAAAMFDAUMAAAA",dl._MODULE="hacksaw.core.h3d.shaders.PremultiplyAlpha",pl.SRC="HXSMLGhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5TREZEZXB0aFdyaXRlU2hhZGVyCwEFaW5wdXQNAQMCCHBvc2l0aW9uBQoBAQADAnV2BQoBAQAEBWNvbG9yBQwBAQABAAAFBm91dHB1dA0CAgYIcG9zaXRpb24FDAQFAAcFY29sb3IFDAQFAAQAAAgEdGltZQMAAAAJDnNwcml0ZVBvc2l0aW9uBQwEAAAKEGFic29sdXRlUG9zaXRpb24FDAQAAAsKcGl4ZWxDb2xvcgUMBAAADAx0ZXh0dXJlQ29sb3IFDAQAAA0MY2FsY3VsYXRlZFVWBQoDAAAODm91dHB1dFBvc2l0aW9uBQwEAAAPBm1lZGlhbg4GAAAQCGZyYWdtZW50DgYAAAIDDwMRAXIDBAAAEgFnAwQAABMBYgMEAAADBQENCQMWDgIJAxUOAgIRAwISAwMJAxUOAgkDFg4CAhEDAhIDAwITAwMDAAABEAAABQIGBAIHBQwCDAUMBQwGBANIAwkCDw4DCgIMBQwAAAMKAgwFDAQAAwoCDAUMCAADAwMA",pl._MODULE="hacksaw.core.h3d.shaders.SDFDepthWriteShader",ml.SRC="HXSMLmhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5TaWduZWREaXN0YW5jZUZpZWxkM0QSAQVpbnB1dA0BAQICdXYFCgEBAAEAAAMHdGV4dHVyZQoCAgAABA1kaXN0YW5jZVJhbmdlAQIAAAUMb3V0bGluZUNvbG9yBQwCAAAGC3NoYWRvd0NvbG9yBQwCAAAHDG91dGxpbmVXaWR0aAMCAAAID291dGxpbmVTdHJlbmd0aAMCAAAJDXNoYWRvd01ldHJpY3MFDAIAAAoJZmlsbENvbG9yBQwCAAALDGNhbGN1bGF0ZWRVVgUKBAAADApwaXhlbENvbG9yBQwEAAANCXNwZWNDb2xvcgULBAAADgl1bml0UmFuZ2UFCgQAAA8GdmVydGV4DgYAABAGbWVkaWFuDgYAABENc2NyZWVuUHhSYW5nZQ4GAAASB29wYWNpdHkOBgAAEwhmcmFnbWVudA4GAAAFAA8AAAUCBgQCDgUKCQMpDgEJAycOAQIEAQMFCgUKBgQCCwUKAgIFCgUKAAMQAxQBcgMEAAAVAWcDBAAAFgFiAwQAAAMFAQ0JAxYOAgkDFQ4CAhQDAhUDAwkDFQ4CCQMWDgICFAMCFQMDAhYDAwMAAAMRAAMFAwgXB3B4UmFuZ2UFCgQAAAYCAg4FCgkDKQ4BCQMlDgECAwoCBQoFCgUKAAgYDXNjcmVlblRleFNpemUFCgQAAAYCCQMpDgEBAwAAAAAAAPA/AwUKCQM/DgECCwUKBQoFCgANCQMWDgIGAQEDAAAAAAAA4D8DCQMeDgICFwUKAhgFCgMDAQMAAAAAAADwPwMDAAADEgMZCXRoaWNrbmVzcwMEAAAaDXRleHR1cmVPZmZzZXQFCgQAABsIc29mdG5lc3MDBAAAAwUFCBwIZGlzdGFuY2UDBAAACgkDIg4CAgMKAgYAAgsFCgIaBQoFCgUMDAADAAgdB3B4UmFuZ2UDBAAACQIRDgADAAgeAWQDBAAABgABAwAAAAAAAOA/AwYBAh0DBAYABgMCHAMBAwAAAAAAAOA/AwMJAxgOAwEDAAAAAAAAAAADBgIBAwAAAAAAAPA/AwoCDgUKAAADAwIZAwMDAwMDAAgfA21heAMEAAAGAAEDAAAAAAAA4D8DBgECHQMEBgAGAwEDAAAAAAAA8D8DAQMAAAAAAADgPwMDCQMYDgMBAwAAAAAAAAAAAwYCAQMAAAAAAADwPwMKAg4FCgAAAwMCGQMDAwMDAwANCQMbDgMBAwAAAAAAAAAAAwYBBgEGAQIfAwQGAgEDAAAAAAAA8D8DCgIOBQoAAAMDAwMKAg4FCgAAAwMJAxgOAwEDmpmZmZmZqT8DAQNmZmZmZmbmPwMCGwMDAwIeAwMAAAETAAAFDgggBWZpZWxkBQwEAAAJAyIOAgIDCgICCwUKBQwACCECc2QDBAAACQMVDgIKAiAFDAwAAwkCEA4DCgIgBQwAAAMKAiAFDAQAAwoCIAUMCAADAwMACCIEdGV4dAUMBAAACQMrDgIKAgoFDJIABQsGAQoCCgUMDAADCQMXDgMGAAEDAAAAAAAA4D8DBgEJAhEOAAMEBgMCIQMBAwAAAAAAAOA/AwMDAwMBAwAAAAAAAAAAAwEDAAAAAAAA8D8DAwMFDAAIIwdvdXRsaW5lBQwEAAAJAysOAgoCBQUMkgAFCwYBCgIFBQwMAAMJAhIOAwIHAwkDKQ4BAQMAAAAAAAAAAAMFCgYDAQMAAAAAAADwPwMCCAMDAwMFDAAIJAxzaGFkb3dPZmZzZXQFCgQAAAoCCQUMEQAFCgAIJQxzaGFkb3dSYWRpdXMDBAAACgIJBQwIAAMACCYOc2hhZG93U29mdG5lc3MDBAAACgIJBQwMAAMACCcGc2hhZG93BQwEAAAJAysOAgoCBgUMkgAFCwYBCgIGBQwMAAMJAhIOAwIlAwYCAiQFCgkDJQ4BAgMKAgUKBQoCJgMDAwUMAAgoBWNvbG9yBQwEAAAJAysOAQEDAAAAAAAAAAADBQwABgQCKAUMBgAGAQoCJwUMDAADAicFDAUMBgEEBgMBAwAAAAAAAPA/AwoCJwUMDAADAwMCKAUMBQwFDAUMBgQCKAUMBgAGAQoCIwUMDAADAiMFDAUMBgEEBgMBAwAAAAAAAPA/AwoCIwUMDAADAwMCKAUMBQwFDAUMBgQCKAUMBgAGAQoCIgUMDAADAiIFDAUMBgEEBgMBAwAAAAAAAPA/AwoCIgUMDAADAwMCKAUMBQwFDAUMBoEKAgwFDJIABQsKAgwFDAwAAwULBoECDAUMAigFDAUMAA",ml._MODULE="hacksaw.core.h3d.shaders.SignedDistanceField3D",gl.SRC="HXSMLGhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5TcGluZUNsaXBwaW5nU2hhZGVyAgEKcGl4ZWxDb2xvcgUMBAAAAghmcmFnbWVudA4GAAABAQIAAAUBBgQCAQUMCQMrDgQBAwAAAAAAAPA/AwEDAAAAAAAA8D8DAQMAAAAAAADwPwMBAwAAAAAAAPA/AwUMBQwA",gl._MODULE="hacksaw.core.h3d.shaders.SpineClippingShader",fl.SRC="HXSMLGhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5WZXJ0ZXhDb2xvckRhcmtUaW50AwEFaW5wdXQNAQICBWNvbG9yBQwBAQADBmNvbG9yMgUMAQEAAQAABApwaXhlbENvbG9yBQwEAAAFCGZyYWdtZW50DgYAAAEBBQAABQMIBghjb2xvclBNQQULBAAABgAGAQQGAwYABgEEBgMKAgQFDAwAAwEDAAAAAAAA8D8DAwMKAgMFDAwAAwMBAwAAAAAAAPA/AwMKAgQFDJIABQsFCwULCgIDBQySAAULBQsGAQoCBAUMkgAFCwoCAgUMkgAFCwULBQsABgQKAgQFDJIABQsCBgULBQsGgQoCBAUMDAADCgICBQwMAAMDAA",fl._MODULE="hacksaw.core.h3d.shaders.VertexColorDarkTint",Al.SRC="HXSMO2hhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5pbnN0YW5jaW5nLkluc3RhbmNlZEJhc2VNZXNoU2hhZGVyFgEGY2FtZXJhDQEMAgR2aWV3BwABAAMEcHJvagcAAQAECHBvc2l0aW9uBQsAAQAFCHByb2pGbGlwAwABAAYIcHJvakRpYWcFCwABAAcIdmlld1Byb2oHAAEACBBwcmV2aW91c1ZpZXdQcm9qBwABAAkPaW52ZXJzZVZpZXdQcm9qBwABAAoFek5lYXIDAAEACwR6RmFyAwABAAwDZGlyBQsDAQANDWppdHRlck9mZnNldHMFDAABAAAAAA4GZ2xvYmFsDQIFDwR0aW1lAwAOABAJcGl4ZWxTaXplBQoADgARCW1vZGVsVmlldwcADgEDEhBtb2RlbFZpZXdJbnZlcnNlBwAOAQMTEXByZXZpb3VzTW9kZWxWaWV3BwAOAQMAAAAUBWlucHV0DQMCFQhwb3NpdGlvbgULARQAFgZub3JtYWwFCwEUAAEAABcGb3V0cHV0DQQGGAhwb3NpdGlvbgUMBBcAGQVjb2xvcgUMBBcAGgVkZXB0aAMEFwAbBm5vcm1hbAULBBcAHAl3b3JsZERpc3QDBBcAHQh2ZWxvY2l0eQUKBBcABAAAHhByZWxhdGl2ZVBvc2l0aW9uBQsEAAAfE3RyYW5zZm9ybWVkUG9zaXRpb24FCwQAACAbcHJldmlvdXNUcmFuc2Zvcm1lZFBvc2l0aW9uBQsEAAAhGHBpeGVsVHJhbnNmb3JtZWRQb3NpdGlvbgULBAAAIhF0cmFuc2Zvcm1lZE5vcm1hbAULBAAAIxFwcm9qZWN0ZWRQb3NpdGlvbgUMBAAAJBlwcmV2aW91c1Byb2plY3RlZFBvc2l0aW9uBQwEAAAlCnBpeGVsQ29sb3IFDAQAACYFZGVwdGgDBAAAJwtuZGNQb3NpdGlvbgUKBAAAKBNwcmV2aW91c05kY1Bvc2l0aW9uBQoEAAApCHNjcmVlblVWBQoEAAAqCXNwZWNQb3dlcgMEAAArCXNwZWNDb2xvcgULBAAALAl3b3JsZERpc3QDBAAALQ1waXhlbFZlbG9jaXR5BQoEAAAuCGluc3RhbmNlDQUELwx3b3JsZE1hdHJpeDAFDAEuAQkBAAAAMAx3b3JsZE1hdHJpeDEFDAEuAQkBAAAAMQx3b3JsZE1hdHJpeDIFDAEuAQkBAAAAMgx3b3JsZE1hdHJpeDMFDAEuAQkBAAAAAQAAMwZ2ZXJ0ZXgOBgAAAQAzAAAFCgg0C3dvcmxkTWF0cml4BwQAAAkDNA4EAi8FDAIwBQwCMQUMAjIFDAcACDUCdHAFDAQAAAYBCQMrDgICHgULAQMAAAAAAADwPwMFDAI0BwUMAAYEAh8FCwoCNQUMkgAFCwULBgQCIwUMBgECNQUMAgcHBQwFDAYEAiIFCwkDIA4BBAYBAhYFCwkDMw4BAjQHBgULBQsFCwULBgQCDAULCQMgDgEEBgMCBAULCgI1BQySAAULBQsFCwULBQsGBAIpBQoJAzsOAQYCCgIjBQwRAAUKCgIjBQwMAAMFCgUKBQoGBAImAwYCCgIjBQwIAAMKAiMFDAwAAwMDBgQCLAMGAgkDHA4BBgMCHwULAgQFCwULAwILAwMDBgQCGAUMBgECIwUMCQMrDgQBAwAAAAAAAPA/AwIFAwEDAAAAAAAA8D8DAQMAAAAAAADwPwMFDAUMBQwA",Al._MODULE="hacksaw.core.h3d.shaders.instancing.InstancedBaseMeshShader",xl.SRC="HXSMPmhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy5pbnN0YW5jaW5nLkluc3RhbmNlZFRpbGVUZXh0dXJlU2hhZGVyDQEFaW5wdXQNAQECAnV2BQoBAQABAAADCGFkZGl0aXZlAgIAAQAAAAAABAlraWxsQWxwaGECAgABAAAAAAAFDXNwZWN1bGFyQWxwaGECAgABAAAAAAAGEmtpbGxBbHBoYVRocmVzaG9sZAMCAAEHAAAAAAAAAAAAAAAAAADwPwcHdGV4dHVyZQoCAgAACAxjYWxjdWxhdGVkVVYFCgQAAAkKcGl4ZWxDb2xvcgUMBAAACglzcGVjQ29sb3IFCwQAAAsMdGlsZUluc3RhbmNlDQIFDAp1dlBvc2l0aW9uBQoBCwEJAQAAAA0HdXZTY2FsZQUKAQsBCQEAAAAOCHV2TWFyZ2luBQoBCwEJAQAAAA8IdXZPZmZzZXQFCgELAQkBAAAAEA1pbnN0YW5jZUNvbG9yBQwBCwEJAQAAAAEAABEGdGlsZVVWBQoEAAASBnZlcnRleA4GAAATCGZyYWdtZW50DgYAAAIAEgAABQYGBAIIBQoCAgUKBQoIFAFzBQoEAAAGAgEDAAAAAAAA8D8DBAYDAQMAAAAAAADwPwMCDgUKBQoFCgUKAAaBAggFCgYBAg0FCgIUBQoFCgUKBoMCCAUKAg8FCgUKBgQCEQUKBgICCAUKAg0FCgUKBQoGgAIIBQoCDAUKBQoAARMAAAUGBoECCQUMCQMiDgICBwoCAggFCgUMBQwIFQRtYXNrAwQAAAEDAAAAAAAAAAADAAaAAhUDCQMPDgEJAxEOAQoCEQUKAAADAwMDBoACFQMJAw8OAQkDEQ4BCgIRBQoEAAMDAwMGgQIJBQwJAxYOAgEDAAAAAAAAAAADBgMBAwAAAAAAAPA/AwIVAwMDBQwGgQIJBQwCEAUMBQwA",xl._MODULE="hacksaw.core.h3d.shaders.instancing.InstancedTileTextureShader",wl.SRC="HXSMNWhhY2tzYXcuY29yZS5oM2Quc2hhZGVycy50d2Vlbi5FZGdlTWl4Q29sb3JNdWx0U2hhZGVyCgEEdGltZQMCAAACBWlucHV0DQEBAw1jdXJ2ZVBvc2l0aW9uBQoBAgABAAAEBHJhdGUDAgAABQ9jb2xvck11bHRpcGxpZXIFDAIAAAYJZGlyZWN0aW9uBQoCAAAHC2JsZW5kRmFjdG9yAwIAAAgKcGFja2VkRGF0YQUMAwABAQkKcGl4ZWxDb2xvcgUMBAAACg5fX2luaXRfX3ZlcnRleA4GAAALCGZyYWdtZW50DgYAAAICCgAABQQGBAIIBQwJAysOBAEDAAAAAAAAAAADAQMAAAAAAAAAAAMBAwAAAAAAAAAAAwEDAAAAAAAAAAADBQwFDAYECgIIBQwRAAUKBgEJAw8OAQIGBQoFCgIEAwUKBQoGBAoCCAUMCAADBgMBAwAAAAAAAPA/AwQGAQQGAAoCBgUKAAADAQMAAAAAAADwPwMDAwEDAAAAAAAA4D8DAwMDAwYECgIIBQwMAAMGAwEDAAAAAAAA8D8DBAYBBAYACgIGBQoEAAMBAwAAAAAAAPA/AwMDAQMAAAAAAADgPwMDAwMDAAELAAAFBAgMCWNvbG9yRWRnZQUKBAAACQMbDgMGAwoCCAUMEQAFCgIHAwUKBgAKAggFDBEABQoCBwMFCgIDBQoFCgAIDQtjb2xvckxldmVsWAMEAAAGAAoCCAUMCAADBgEJAxAOAQYDCgIGBQoAAAMBA5qZmZmZmbk/AwMDCgIMBQoAAAMDAwAIDgtjb2xvckxldmVsWQMEAAAGAAoCCAUMDAADBgEJAxAOAQYDCgIGBQoEAAMBA5qZmZmZmbk/AwMDCgIMBQoEAAMDAwAGBAoCCQUMkwMFDAkDGA4DCgIJBQyTAwUMBgEKAgkFDJMDBQwKAgUFDJMDBQwFDAkDFg4CAg0DAg4DAwUMBQwA",wl._MODULE="hacksaw.core.h3d.shaders.tween.EdgeMixColorMultShader",Mh.clipper=new kl,Mh.triangulator=new kh,Fh.TMP_MAT=new Wr,Gh.LINEAR=Nr.L([1,0,0,0,-1,1,0,0,0,0,0,0,0,0,0,0]),Gh.BEZIER=Nr.L([1,0,0,0,-3,3,0,0,3,-6,3,0,-1,3,-3,1]),Gh.HERMITE=Nr.L([1,0,0,0,0,1,0,0,-3,-2,3,-1,2,1,-2,1]),Gh.CATMULL_ROM=Nr.L([0,1,0,0,-.5,0,.5,0,1,-2.5,2,-.5,-.5,1.5,-1.5,.5]),Gh.BASIS=Nr.L([.16666666666666666,.6666666666666666,.16666666666666666,0,-.5,0,.5,0,.5,-1,.5,0,-.16666666666666666,.5,-.5,.16666666666666666]),Wl._renderCallbackPersistent=!1,Kl.doublePi=2*Math.PI,pc._delays=new Je,pc._intervals=new Je,pc._delayId=-1,pc._intervalId=-1,Ac.__meta__={fields:{splashHeader:{keep:null},splashBody:{keep:null},splashFooter:{keep:null},featureBody:{keep:null},featureBodyPortrait:{keep:null},featureFooterGeneral:{keep:null},featureFooterLandscape:{keep:null},featureFooterPortrait:{keep:null},featureInfo:{keep:null},continueHeader:{keep:null},gambleHeader:{keep:null},totalFooter:{keep:null},gambleResultHeader:{keep:null}}},ar.BASE_NAME="gasm.heaps.components.actor.render.PostProcessingChainComponent",lr.BASE_NAME="hacksaw.games.lecowboy.components.actor.FortuneActor",or.BASE_NAME="hacksaw.games.lecowboy.components.actor.GambleController",hr.BASE_NAME="hacksaw.games.lecowboy.components.actor.GridHighlightHandler",wc.BASE_NAME="hacksaw.games.lecowboy.components.actor.QuaternionRotator",dr.BASE_NAME="hacksaw.games.lecowboy.components.actor.SceneryHandler",Cc.BASE_NAME="hacksaw.games.lecowboy.components.model.GameModel",fr.BASE_NAME=mr.BASE_NAME="gasm.heaps.components.Heaps3DComponent",s_.SRC="HXSMLmhhY2tzYXcuZ2FtZXMubGVjb3dib3kuc2hhZGVycy5CbGFja0JhcnNTaGFkZXIQAQVpbnB1dA0BAgIIcG9zaXRpb24FCgEBAAMCdXYFCgEBAAEAAAQFZmxpcFkDAgAABQZvdXRwdXQNAgIGCHBvc2l0aW9uBQwEBQAHBWNvbG9yBQwEBQAEAAAICnBpeGVsQ29sb3IFDAQAAAkMY2FsY3VsYXRlZFVWBQoEAAAKCGNvbG9yTWFwCgICAAALCWNvbG9yTWFwMgoCAgAADAlub3JtYWxNYXAKAgIAAA0IZGVwdGhNYXAKAgIAAA4Ibm9pc2VNYXAKAgIAAA8KcmVzb2x1dGlvbgUKAgAAEAR0aW1lAwIAABEJdHdlZW5UaW1lAwIAABIIX19pbml0X18OBgAAEwZ2ZXJ0ZXgOBgAAFAhmcmFnbWVudA4GAAADAhIAAAUCBgQCBwUMAggFDAUMBgQCCQUKAgMFCgUKAAATAAAFAQYEAgYFDAkDKw4ECgICBQoAAAMGAQoCAgUKBAADAgQDAwEDAAAAAAAAAAADAQMAAAAAAADwPwMFDAUMAAEUAAAFBQgVAnV2BQoEAAACAwUKAAgWA2NvbAUMBAAACQMrDgEBAwAAAAAAAAAAAwUMAAaACgIWBQwMAAMGAAYBCQMaDgIBAzMzMzMzM8M/AwoCFQUKBAADAwEDAAAAAAAAAAADAwkDGg4CCgIVBQoEAAMGAQEDMzMzMzMzwz8DAhEDAwMDAwaACgIWBQwMAAMGAAkDGg4CBgMBAwAAAAAAAPA/AwYBAQMzMzMzMzPDPwMCEQMDAwoCFQUKBAADAwYBCQMaDgIKAhUFCgQAAwEDMzMzMzMz6z8DAwEDAAAAAAAAAAADAwMDBgQCCAUMAhYFDAUMAA",s_._MODULE="hacksaw.games.lecowboy.shaders.BlackBarsShader",O_.BASE_NAME="hacksaw.slotcommon.components.actor.ReelActorComponent",q_.BASE_NAME="gasm.heaps.components.Heaps3DComponent",K_.BASE_NAME="gasm.heaps.components.Heaps3DComponent",Md.BASE_NAME="hacksaw.slotcommon.components.model.ReelModelComponent",Qd.BASE_NAME="hacksaw.slotcommon.components.model.SlotModel",Zd.__meta__={fields:{dropRevealProps:{keep:null},spinRevealProps:{keep:null},collapseReactProps:{keep:null}}},lp.tick=.015625,cp.pending=[],cp.threadCount=0,xA._mul=null!=Math.imul?Math.imul:function(e,t){return e*(65535&t)+(e*(t>>>16)<<16|0)|0},kA.DEFAULT_RESOLVER=new mp,kA.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",kA.CODES=null,TA.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TA.BYTES=IA.ofString(TA.CHARS),qA.helper=new DataView(new ArrayBuffer(8)),px.escapes=((f1=new at).h.lt="<",f1.h.gt=">",f1.h.amp="&",f1.h.quot='"',f1.h.apos="'",f1),Tp.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1],Tp.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Tp.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1],Tp.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Tp.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Mx.__meta__={obj:{IgnoreCover:Tp.FIXED_HUFFMAN=null}},Wx.SIZES=[4,2,1,1],Lx._UID=0,Lx.ALL_FORMATS=new at,jx.CACHE=new Je,jx._UID=0,jx.MAX_FORMATS=16,Hx.ASCII=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",Hx.LATIN1="-",Hx.DEFAULT_CHARS=Hx.ASCII+Hx.LATIN1,Hx.complementChars=(()=>{for(var e=new Je,t=0,n="".length;t<n;)e.h[Jn.cca("",t++)]=!0;return e})(),Zx.VALUES=["none","up",null,null,"left",null,"right",null,null,"down"],Kx.initDone=!1,Kx.keyPressed=[],Kx.ALLOW_KEY_REPEAT=!1,l0.wantedFPS=60,l0.maxDeltaTime=.5,l0.smoothFactor=.95,l0.lastTimeStamp=Jn.now()/1e3,l0.elapsedTime=0,l0.frameCount=0,l0.dt=1/l0.wantedFPS,l0.currentDT=1/l0.wantedFPS,r0.inst=null,u0.setCursor=u0.setNativeCursor,u0.loopInit=!1,u0.fpsLimit=-1,Jp.QTMP=new tn,_m.baseLodConfig=[.5,.2,.01],dm.BLEND=wr.__empty_constructs__.slice(),pm.TMP_BYTES=null,x0.invalidChars=new ot("[^A-Za-z0-9_]","g"),w0.PREFETCH_CACHE=null,C0.ENABLED=!(fm.RELOAD_LFS=[]),C0.ENGINE_PACKAGES=["h3d","hxd","h2d","haxe","sys","hrt"],ym.LIVE_UPDATE=!1,F0.DEFAULT_FILTER=so.Linear,F0.MIPMAP_MAX_SIZE=0,F0.ENABLE_AUTO_WATCH=!0,F0.BLACK_1x1=e0.alloc(1,1,C.RGBA),R0.workerLimit=4,R0._workerNextTaskID=1,R0._workerPool=[],Q0.ETC1=0,Q0.ETC2=1,Q0.BC1=2,Q0.BC3=3,Q0.BC4=4,Q0.BC5=5,Q0.BC7_M6_OPAQUE_ONLY=6,Q0.BC7_M5=7,Q0.ASTC_4x4=10,Q0.ATC_RGB=11,Q0.ATC_RGBA_INTERPOLATED_ALPHA=12,Q0.RGBA32=13,Q0.RGB565=14,Q0.BGR565=15,Q0.RGBA4444=16,Q0.BC6H=22,Q0.RGB_HALF=24,Q0.RGBA_HALF=25,O0.RGBAFormat=1023,O0.RGBA8Format=32856,O0.R8Format=33321,O0.RG8Format=33323,O0.RGBA_ASTC_4x4_Format=37808,O0.RGB_BPTC_UNSIGNED_Format=36495,O0.RGBA_BPTC_Format=36492,O0.RGB_S3TC_DXT1_Format=33776,O0.RGBA_S3TC_DXT1_Format=33777,O0.RGBA_S3TC_DXT5_Format=33779,O0.RGB_ETC1_Format=36196,O0.RGBA_ETC2_EAC_Format=37496,O0.RGB_ETC2_Format=37492,W0.UnsignedByteType=1009,W0.FloatType=1015,W0.HalfFloatType=1016,L0.inst=null,Ue.UID=0,Ue.SWIZ=aw.__empty_constructs__.slice(),Ue.MAX_CHANNELS_BITS=3,Ue.MAX_PARTIAL_MAPPINGS_BITS=7,Im.SRC="HXSMEGh4c2wuQmF0Y2hTaGFkZXIFAQ9CYXRjaF9IYXNPZmZzZXQCAgABAAAAAAACEEJhdGNoX1VzZVN0b3JhZ2UCAgABAAAAAAADC0JhdGNoX0NvdW50AQIAAQAAEAAABAxCYXRjaF9CdWZmZXIQBQwDAgAABRNCYXRjaF9TdG9yYWdlQnVmZmVyEIIFDAAAAgAAAA",Im._MODULE="hxsl.BatchShader",Tm.vec2=Le.TVec(2,K0.VFloat),Tm.vec3=Le.TVec(3,K0.VFloat),Tm.vec4=Le.TVec(4,K0.VFloat),Tm.ivec2=Le.TVec(2,K0.VInt),Tm.ivec3=Le.TVec(3,K0.VInt),Tm.ivec4=Le.TVec(4,K0.VInt),Tm.GLOBALS=null,Pm.TRACE=!1,_w.SWIZ=[aw.X,aw.Y,aw.Z,aw.W],pw.KWD_LIST="attribute const uniform varying buffer shared\r\n\tcoherent volatile restrict readonly writeonly\r\n\tatomic_uint\r\n\tlayout\r\n\tcentroid flat smooth noperspective\r\n\tpatch sample\r\n\tbreak continue do for while switch case default\r\n\tif else\r\n\tsubroutine\r\n\tin out inout\r\n\tfloat double int void bool true false\r\n\tinvariant precise\r\n\tdiscard return\r\n\tmat2 mat3 mat4 dmat2 dmat3 dmat4\r\n\tmat2x2 mat2x3 mat2x4 dmat2x2 dmat2x3 dmat2x4\r\n\tmat3x2 mat3x3 mat3x4 dmat3x2 dmat3x3 dmat3x4\r\n\tmat4x2 mat4x3 mat4x4 dmat4x2 dmat4x3 dmat4x4\r\n\tvec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 dvec2 dvec3 dvec4\r\n\tuint uvec2 uvec3 uvec4\r\n\tlowp mediump highp precision\r\n\timage1D iimage1D uimage1D\r\n\timage2D iimage2D uimage2D\r\n\timage3D iimage3D uimage3D\r\n\tstruct\r\n\tcommon partition active\r\n\tasm\r\n\tclass union enum typedef template this packed\r\n\tresource\r\n\tgoto\r\n\tinline noinline public static extern external interface\r\n\tlong short half fixed unsigned superp\r\n\tinput output\r\n\thvec2 hvec3 hvec4 fvec2 fvec3 fvec4\r\n\tsampler3DRect\r\n\tfilter\r\n\tsizeof cast\r\n\tnamespace using\r\n\trow_major",pw.KWDS=(()=>{for(var e=new at,t=0,n=new ot("[ \t\r\n]+","g").split(pw.KWD_LIST);t<n.length;)e.h[n[t++]]=!0;return e})(),pw.GLOBALS=(()=>{for(var e=[],t=0,n=xe.__empty_constructs__.slice();t<n.length;){var i=n[t];++t;var s=(s=""+el.string(i)).charAt(0).toLowerCase()+Jn.substr(s,1,null);e[i._hx_index]=s}for(e[xe.ToInt._hx_index]="int",e[xe.ToFloat._hx_index]="float",e[xe.ToBool._hx_index]="bool",e[xe.LReflect._hx_index]="reflect",e[xe.Mat3x4._hx_index]="_mat3x4",e[xe.VertexID._hx_index]="gl_VertexID",e[xe.InstanceID._hx_index]="gl_InstanceID",e[xe.IVec2._hx_index]="ivec2",e[xe.IVec3._hx_index]="ivec3",e[xe.IVec4._hx_index]="ivec4",e[xe.BVec2._hx_index]="bvec2",e[xe.BVec3._hx_index]="bvec3",e[xe.BVec4._hx_index]="bvec4",e[xe.FragCoord._hx_index]="gl_FragCoord",e[xe.FragDepth._hx_index]="gl_FragDepth",e[xe.FrontFacing._hx_index]="gl_FrontFacing",e[xe.FloatBitsToUint._hx_index]="_floatBitsToUint",e[xe.UintBitsToFloat._hx_index]="_uintBitsToFloat",e[xe.ComputeVar_LocalInvocation._hx_index]="ivec3(gl_LocalInvocationID)",e[xe.ComputeVar_GlobalInvocation._hx_index]="ivec3(gl_GlobalInvocationID)",e[xe.ComputeVar_LocalInvocationIndex._hx_index]="int(gl_LocalInvocationIndex)",e[xe.ComputeVar_WorkGroup._hx_index]="ivec3(gl_WorkGroupID)",t=0;t<e.length;)pw.KWDS.h[e[t++]]=!0;return e})(),pw.MAT34="struct _mat3x4 { vec4 a; vec4 b; vec4 c; };",Om.UID=0,fw.SWIZ=["x","y","z","w"],vw.UID=0,Nm.TVECS=new Je,Nm.TDIMS=q0.__empty_constructs__.slice(),Nm.BOPS=((f1=tx.__empty_constructs__.slice()).splice(tx.OpAssignOp(null)._hx_index,0,null),f1),Nm.UNOPS=nx.__empty_constructs__.slice(),Nm.TGLOBALS=xe.__empty_constructs__.slice(),Nm.TSWIZ=new Je,Nm.REGS=[aw.X,aw.Y,aw.Z,aw.W],Nm.VKINDS=$0.__empty_constructs__.slice(),Nm.PRECS=tw.__empty_constructs__.slice(),Nm.FKIND=iw.__empty_constructs__.slice(),Nm.SIGN=9204765,Cw.MAX_LIST_SIZE=0,Cw.ALLOW_DUPLICATES=!0,Gm.UID=0,Sw.UNROLL_LOOPS=!1,Sw.SHADER_RESOLVE=new at,Ag.propertyIds=["12"],xg.propertyIds=["13"],Rw.emptyAnimation=new Zm("<empty>",[],0),Qg.epsilon=1e-5,Zw.__meta__={obj:{SuppressWarnings:["javadoc"]}},Xw.nextID=0,sy.CLEAR=new sy(0,0,0,0),uy.clampToEdge=new uy(1,"clampToEdge"),uy.repeat=new uy(2,"repeat"),hy.degRad=Math.PI/180,hy.radDeg=180/Math.PI,xy.radiansToDegrees=57.29577866666166,xy.radDeg=xy.radiansToDegrees,xy.degreesToRadians=.01745329277777778,xy.degRad=xy.degreesToRadians,Yg.behavior=new Hg,Xg.zero=new Xg(0),Xg.one=new Xg(1),Xg.ten=new Xg(10),Xg.negativeOne=new Xg(-1),ky.divisionExtraScale=4,My.MAX_BASE_ARR=My.smallToArray(1e7),My.LOG_MAX_BASE=Math.log(1e7),By.one=ky.fromInt(1),By.ten=ky.fromInt(10),Ty.one=By.one,Ry.order=function(e,t){return t<e?Sy.GT:e==t?Sy.EQ:Sy.LT},Ly.depth=0,rt.NOISE=new Zy(new Yy(null)),rt.NEVER_INST=new lf,a1.INST=new a1,o1.PI=3.141592653589793,o1.PI_H=1.5707963267948966,o1.LN_2=.6931471805599453,o1.LN_2_10=6.931471805599453,o1.overshoot=1.70158,o1.amplitude=1,o1.period=3e-4,cf.inputClass=y1,_f.inputClass=Array,pf.inputClass=df,xf.inputClass=Af,bf.inputClass=yf,vf.inputClass=gf,Cf.inputClass=wf,kf.inputClass=Sf,$._tweens=[],$._addedTweens=[],$.managerInited=!1,$.DEFAULT_EASE=o1.linear,$.defaultEase=$.DEFAULT_EASE,$.defaultTime=.3,$.defaultDelay=0,$.defaultInterval=0,$.defaultRepeat=1,$.defaultYoyo=!1,$.defaultZigZag=!1,$.defaultAutoPlay=!0,$.defaultAutoFrom=!0,$._rules=[cf,_f,pf,xf,bf,vf,Cf,kf],$.topLevelTimeScale=1,$._groupDefaults=!1,$.updateMode=n.TIME(60),$._initLog=[],$.dictionary=new VA,$._objCounter=0,$.idCounter=0,sr.main(),cp.run()})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);